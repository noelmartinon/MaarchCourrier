!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"6S62":function(e,r,a){"use strict";a.r(r),a.d(r,"InstallerModule",function(){return Qt});var o,s=a("vWc3"),i=a("cMWS"),c=a("tyNb"),l=a("B/XX"),p=a("1YbM"),u=a("mrSG"),b=a("0IaG"),m=a("LRne"),d=a("vkgz"),g=a("JIr8"),f=a("fXoL"),h=a("sYmb"),v=a("tk/3"),y=((o=function(){function e(){t(this,e),this.steps=[]}return n(e,[{key:"setStep",value:function(t){this.steps.push(t)}},{key:"isStepAlreadyLaunched",value:function(t){return this.steps.filter(function(e){return t===e.idStep}).length>0}}]),e}()).\u0275fac=function(t){return new(t||o)},o.\u0275prov=f.Pb({token:o,factory:o.\u0275fac}),o),F=a("AXEc"),k=a("uqn4"),C=a("7EHt"),I=a("bTqV"),S=a("ofXK"),T=a("MutI"),O=a("FKr1");function Y(t,e){1&t&&(f.Xb(0),f.Tc(1,"..."),f.Wb())}function Z(t,e){1&t&&f.Ub(0,"i",16)}function G(t,e){1&t&&f.Ub(0,"i",17)}function x(t,e){if(1&t&&(f.Zb(0,"div",18),f.Tc(1),f.Yb()),2&t){var n=f.kc().$implicit;f.Fb(1),f.Vc(" ",n.msgErr," ")}}function w(t,e){if(1&t&&(f.Zb(0,"mat-list-item"),f.Zb(1,"div",11),f.Zb(2,"span",12),f.Tc(3),f.Yb(),f.Rc(4,Y,2,0,"ng-container",10),f.Tc(5,"\xa0 "),f.Rc(6,Z,1,0,"i",13),f.Rc(7,G,1,0,"i",14),f.Rc(8,x,2,1,"div",15),f.Yb(),f.Yb()),2&t){var n=e.$implicit;f.Fb(1),f.Lb("endStep","OK"===n.state||"KO"===n.state)("currentStep","inProgress"===n.state),f.Fb(2),f.Uc(n.label),f.Fb(1),f.sc("ngIf","inProgress"===n.state),f.Fb(2),f.sc("ngIf","OK"===n.state),f.Fb(1),f.sc("ngIf","KO"===n.state),f.Fb(1),f.sc("ngIf",""!==n.msgErr)}}function _(t,e){if(1&t){var n=f.ac();f.Zb(0,"button",23),f.gc("click",function(){return f.Ic(n),f.kc(2).goToInstance()}),f.Tc(1),f.lc(2,"translate"),f.Yb()}2&t&&(f.Fb(1),f.Uc(f.mc(2,1,"lang.goToNewInstance")))}function U(t,e){1&t&&(f.Zb(0,"button",24),f.Tc(1),f.lc(2,"translate"),f.Yb()),2&t&&(f.Fb(1),f.Uc(f.mc(2,1,"lang.cancel")))}function P(t,e){if(1&t&&(f.Xb(0),f.Ub(1,"span",19),f.Zb(2,"div",20),f.Rc(3,_,3,3,"button",21),f.Rc(4,U,3,3,"button",22),f.Yb(),f.Wb()),2&t){var n=f.kc();f.Fb(3),f.sc("ngIf",!n.isInstallError()&&n.isInstallComplete()),f.Fb(1),f.sc("ngIf",n.isInstallError()||!n.isInstallBegin())}}var L,M=((L=function(){function e(n,r,a,o,s,i,c){t(this,e),this.translate=n,this.data=r,this.dialogRef=a,this.http=o,this.installerService=s,this.notify=i,this.authService=c,this.steps=[],this.customId="",this.disableAnimation=!0}return n(e,[{key:"ngOnInit",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.initSteps();case 1:case"end":return t.stop()}},t,this)}))}},{key:"ngAfterViewInit",value:function(){var t=this;setTimeout(function(){return t.disableAnimation=!1})}},{key:"launchInstall",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=0;case 1:if(t.t0=n<this.data.length,!t.t0){t.next=8;break}return this.steps[n].state="inProgress",t.next=6,this.doStep(n);case 6:e=t.sent,t.t0=e;case 8:if(!t.t0){t.next=13;break}case 10:n++,t.next=1;break;case 13:case"end":return t.stop()}},t,this)}))}},{key:"initSteps",value:function(){var t=this;this.data.forEach(function(e,n){0===n?t.customId=e.body.customId:e.body.customId=t.customId,t.steps.push({idStep:e.idStep,label:e.description,state:"",msgErr:""})})}},{key:"doStep",value:function(t){var e=this;return new Promise(function(n,r){e.installerService.isStepAlreadyLaunched(e.data[t].idStep)?(e.steps[t].state="OK",n(!0)):e.http[e.data[t].route.method.toLowerCase()](e.data[t].route.url,e.data[t].body).pipe(Object(d.a)(function(r){e.steps[t].state="OK",e.installerService.setStep(e.steps[t]),n(!0)}),Object(g.a)(function(r){return e.steps[t].state="KO",e.steps[t].msgErr=void 0!==r.error.lang?e.translate.instant("lang."+r.error.lang):r.error.errors,n(!1),Object(m.a)(!1)})).subscribe()})}},{key:"isInstallBegin",value:function(){return this.steps.filter(function(t){return""===t.state}).length!==this.steps.length}},{key:"isInstallComplete",value:function(){return 0===this.steps.filter(function(t){return""===t.state}).length}},{key:"isInstallError",value:function(){return this.steps.filter(function(t){return"KO"===t.state}).length>0}},{key:"goToInstance",value:function(){var t=this;this.http.request("DELETE","../rest/installer/lock",{body:{customId:this.customId}}).pipe(Object(d.a)(function(e){t.authService.noInstall=!1,window.location.href=e.url,t.dialogRef.close("ok")}),Object(g.a)(function(e){return t.notify.handleSoftErrors(e),Object(m.a)(!1)})).subscribe()}}]),e}()).\u0275fac=function(t){return new(t||L)(f.Tb(h.d),f.Tb(b.a),f.Tb(b.g),f.Tb(v.b),f.Tb(y),f.Tb(F.a),f.Tb(k.a))},L.\u0275cmp=f.Nb({type:L,selectors:[["app-install-action"]],decls:16,vars:10,consts:[[1,"mat-dialog-content-container"],["mat-dialog-content",""],["hideToggle","","expanded",""],[1,"launch-action"],["color","primary",1,"text-center"],["mat-raised-button","","type","button","color","primary",2,"font-size","25px","padding","20px",3,"click"],[1,"far","fa-hdd"],[3,"expanded"],["installStepAction",""],[4,"ngFor","ngForOf"],[4,"ngIf"],["mat-line","",1,"step"],[1,"stepLabel"],["class","fa fa-check","style","color: green",4,"ngIf"],["class","fa fa-times","style","color: red",4,"ngIf"],["class","alert-message alert-message-danger","role","alert","style","margin-top: 30px;min-width: 100%;",4,"ngIf"],[1,"fa","fa-check",2,"color","green"],[1,"fa","fa-times",2,"color","red"],["role","alert",1,"alert-message","alert-message-danger",2,"margin-top","30px","min-width","100%"],[1,"divider-modal"],["mat-dialog-actions","",1,"actions"],["mat-raised-button","","mat-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","mat-button","",3,"mat-dialog-close",4,"ngIf"],["mat-raised-button","","mat-button","","color","primary",3,"click"],["mat-raised-button","","mat-button","",3,"mat-dialog-close"]],template:function(t,e){if(1&t){var n=f.ac();f.Zb(0,"div",0),f.Zb(1,"div",1),f.Zb(2,"mat-accordion"),f.Zb(3,"mat-expansion-panel",2),f.Zb(4,"div",3),f.Zb(5,"h2",4),f.Tc(6),f.lc(7,"translate"),f.Yb(),f.Zb(8,"button",5),f.gc("click",function(){return f.Ic(n),f.Ec(13).open(),e.launchInstall()}),f.Ub(9,"i",6),f.Tc(10),f.lc(11,"translate"),f.Yb(),f.Yb(),f.Yb(),f.Zb(12,"mat-expansion-panel",7,8),f.Rc(14,w,9,9,"mat-list-item",9),f.Yb(),f.Yb(),f.Yb(),f.Rc(15,P,5,2,"ng-container",10),f.Yb()}2&t&&(f.Fb(1),f.sc("@.disabled",e.disableAnimation),f.Fb(5),f.Uc(f.mc(7,6,"lang.almostThere")),f.Fb(4),f.Vc(" ",f.mc(11,8,"lang.launchInstall")," "),f.Fb(2),f.sc("expanded",!1),f.Fb(2),f.sc("ngForOf",e.steps),f.Fb(1),f.sc("ngIf",e.isInstallComplete()||e.isInstallError()||!e.isInstallBegin()))},directives:[b.e,C.a,C.c,I.b,S.m,S.n,T.c,O.k,b.c,b.d],pipes:[h.c],styles:[".step[_ngcontent-%COMP%]{opacity:.5}.currentStep[_ngcontent-%COMP%], .step[_ngcontent-%COMP%], .step[_ngcontent-%COMP%]   .stepLabel[_ngcontent-%COMP%]{transition:all .2s}.currentStep[_ngcontent-%COMP%]{opacity:1}.currentStep[_ngcontent-%COMP%]   .stepLabel[_ngcontent-%COMP%]{font-size:150%;transition:all .2s}.endStep[_ngcontent-%COMP%]{opacity:1}.mat-expansion-panel[_ngcontent-%COMP%]{box-shadow:none}.launch-action[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),L),V=a("pLZG"),E=a("4zkx"),j=a("A6w4"),q=a("rH+9"),A=a("eiH7"),N=a("XhcP"),R=a("xHqg"),z=a("3Pt+"),B=a("MJ5r"),D=a("NFeN"),W=a("kmnG"),H=a("d3UM"),X=a("f0Cb");function K(t,e){if(1&t&&(f.Zb(0,"mat-option",14),f.Tc(1),f.lc(2,"translate"),f.Yb()),2&t){var n=e.$implicit;f.sc("value",n),f.Fb(1),f.Vc(" ",f.mc(2,2,"lang."+n+"Full")," ")}}function J(t,e){if(1&t&&(f.Zb(0,"mat-list-item"),f.Ub(1,"mat-icon",15),f.Zb(2,"div",16),f.Tc(3),f.Zb(4,"small",17),f.Tc(5),f.Yb(),f.Yb(),f.Yb()),2&t){var n=e.$implicit;f.Fb(3),f.Vc("",n.label," "),f.Fb(2),f.Uc(n.id)}}function Q(t,e){if(1&t&&(f.Xb(0),f.Zb(1,"mat-list"),f.Zb(2,"div",9),f.Tc(3),f.lc(4,"translate"),f.Yb(),f.Rc(5,J,6,2,"mat-list-item",10),f.Yb(),f.Ub(6,"mat-divider"),f.Wb()),2&t){var n=f.kc();f.Fb(3),f.Vc("",f.mc(4,2,"lang.instancesList")," : "),f.Fb(2),f.sc("ngForOf",n.customs)}}function tt(t,e){if(1&t&&(f.Zb(0,"mat-list-item"),f.Ub(1,"mat-icon",18),f.Zb(2,"div",16),f.Tc(3),f.lc(4,"translate"),f.Yb(),f.Yb()),2&t){var n=e.$implicit;f.Fb(1),f.Hb(n.icon),f.Fb(2),f.Uc(f.mc(4,3,n.desc))}}var et,nt=function(t){return{value1:t}},rt=((et=function(){function e(n,r,a,o,s){t(this,e),this.translate=n,this.http=r,this.notify=a,this._formBuilder=o,this.authService=s,this.langs=[],this.appVersion=B.a.VERSION.split(".")[0]+"."+B.a.VERSION.split(".")[1],this.steps=[{icon:"fas fa-check-square",desc:"lang.prerequisiteCheck"},{icon:"fa fa-database",desc:"lang.databaseCreation"},{icon:"fa fa-database",desc:"lang.dataSampleCreation"},{icon:"fa fa-hdd",desc:"lang.docserverCreation"},{icon:"fas fa-tools",desc:"lang.stepCustomizationActionDesc"},{icon:"fa fa-user",desc:"lang.adminUserCreation"}],this.customs=[]}return n(e,[{key:"ngOnInit",value:function(){this.stepFormGroup=this._formBuilder.group({lang:["fr",z.y.required]}),this.getLang(),this.authService.noInstall||this.getCustoms()}},{key:"getLang",value:function(){var t=this;this.http.get("../rest/languages").pipe(Object(d.a)(function(e){t.langs=Object.keys(e.langs).filter(function(t){return"nl"!==t})}),Object(g.a)(function(e){return t.notify.handleSoftErrors(e),Object(m.a)(!1)})).subscribe()}},{key:"changeLang",value:function(t){this.translate.use(t)}},{key:"getCustoms",value:function(){var t=this;this.http.get("../rest/installer/customs").pipe(Object(d.a)(function(e){t.customs=e.customs}),Object(g.a)(function(e){return t.notify.handleSoftErrors(e),Object(m.a)(!1)})).subscribe()}},{key:"initStep",value:function(){return!1}},{key:"getInfoToInstall",value:function(){return[]}}]),e}()).\u0275fac=function(t){return new(t||et)(f.Tb(h.d),f.Tb(v.b),f.Tb(F.a),f.Tb(z.e),f.Tb(k.a))},et.\u0275cmp=f.Nb({type:et,selectors:[["app-welcome"]],decls:32,vars:25,consts:[[1,"stepContent"],[1,"stepContentTitle"],[2,"text-align","center"],["svgIcon","maarchLogoFull",1,"maarchLogoFull"],[2,"width","850px","margin","auto",3,"formGroup"],["appearance","outline","floatLabel","never"],["formControlName","lang","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["mat-subheader",""],[4,"ngFor","ngForOf"],["mat-raised-button","","color","primary","href","https://community.maarch.org/","target","_blank"],["mat-raised-button","","color","primary","href","http://www.maarch.com","target","_blank"],[2,"font-style","italic","padding-top","30px","text-align","right",3,"innerHTML"],[3,"value"],["mat-list-icon","","color","primary",1,"fas","fa-box-open"],["mat-line",""],[2,"color","#666"],["mat-list-icon","","color","primary"]],template:function(t,e){1&t&&(f.Zb(0,"div",0),f.Zb(1,"h2",1),f.Tc(2),f.lc(3,"translate"),f.Yb(),f.Zb(4,"div",2),f.Ub(5,"mat-icon",3),f.Yb(),f.Zb(6,"form",4),f.Zb(7,"mat-form-field",5),f.Zb(8,"mat-label"),f.Tc(9),f.lc(10,"translate"),f.Yb(),f.Zb(11,"mat-select",6),f.gc("selectionChange",function(t){return e.changeLang(t.value)}),f.Rc(12,K,3,4,"mat-option",7),f.Yb(),f.Yb(),f.Yb(),f.Ub(13,"mat-divider"),f.Rc(14,Q,7,4,"ng-container",8),f.Zb(15,"mat-list"),f.Zb(16,"div",9),f.Tc(17),f.lc(18,"translate"),f.Yb(),f.Rc(19,tt,5,5,"mat-list-item",10),f.Yb(),f.Ub(20,"mat-divider"),f.Zb(21,"p"),f.Tc(22),f.lc(23,"translate"),f.Yb(),f.Zb(24,"a",11),f.Tc(25," community.maarch.org "),f.Yb(),f.Tc(26),f.lc(27,"translate"),f.Zb(28,"a",12),f.Tc(29," www.maarch.com "),f.Yb(),f.Ub(30,"p",13),f.lc(31,"translate"),f.Yb()),2&t&&(f.Fb(2),f.Vc("",f.nc(3,10,"lang.welcomeApp",f.zc(23,nt,e.appVersion))," !"),f.Fb(4),f.sc("formGroup",e.stepFormGroup),f.Fb(3),f.Vc("",f.mc(10,13,"lang.chooseAppLanguage")," : "),f.Fb(3),f.sc("ngForOf",e.langs),f.Fb(2),f.sc("ngIf",e.customs.length>0),f.Fb(3),f.Vc("",f.mc(18,15,"lang.installDescription")," : "),f.Fb(2),f.sc("ngForOf",e.steps),f.Fb(3),f.Vc(" ",f.mc(23,17,"lang.externalInfoSite")," : "),f.Fb(4),f.Vc(" ",f.mc(27,19,"lang.or")," "),f.Fb(4),f.sc("innerHTML",f.mc(31,21,"lang.maarchLicenceInstall"),f.Jc))},directives:[D.a,z.z,z.q,z.j,W.c,W.g,H.a,z.p,z.h,z.x,S.m,X.a,S.n,T.a,T.f,I.a,O.o,T.c,T.b,O.k],pipes:[h.c],styles:[".stepContent[_ngcontent-%COMP%]{margin:auto}.stepContent[_ngcontent-%COMP%]   .stepContentTitle[_ngcontent-%COMP%]{color:var(--maarch-color-primary);margin-bottom:30px;border-bottom:1px solid;padding:0}.stepContent[_ngcontent-%COMP%]   .maarchLogoFull[_ngcontent-%COMP%]{width:300px;height:100px}.stepContent[_ngcontent-%COMP%]   .mat-divider[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}.link[_ngcontent-%COMP%]{text-decoration:underline;color:var(--maarch-color-primary)!important}"]}),et),at=a("zkoq"),ot=a("Qu3c"),st=["packageItem"];function it(t,e){if(1&t&&(f.Zb(0,"mat-grid-tile"),f.Zb(1,"mat-list-item"),f.Ub(2,"mat-icon",12),f.Zb(3,"div",13),f.Tc(4),f.lc(5,"translate"),f.Ub(6,"i",14,15),f.lc(8,"translate"),f.Yb(),f.Yb(),f.Yb()),2&t){var n=e.$implicit;f.Fb(2),f.Ib("fa iconCheckPackage icon_",n.state,""),f.Fb(2),f.Vc(" ",f.mc(5,7,"lang.install_"+n.label)," "),f.Fb(2),f.sc("id",n.label)("matTooltip",f.mc(8,9,"lang.install_"+n.label+"_desc"))("matTooltipClass","ok"!==n.state?"tooltip-red":"")}}function ct(t,e){if(1&t&&(f.Zb(0,"mat-list",8),f.Zb(1,"div",9),f.Tc(2),f.lc(3,"translate"),f.Yb(),f.Zb(4,"mat-grid-list",10),f.Rc(5,it,9,11,"mat-grid-tile",11),f.Yb(),f.Yb()),2&t){var n=e.$implicit,r=f.kc();f.Fb(2),f.Uc(f.mc(3,2,"lang."+n.key)),f.Fb(3),f.sc("ngForOf",r.packagesList[n.key])}}var lt,pt=((lt=function(){function e(n,r,a,o){t(this,e),this.translate=n,this.http=r,this.notify=a,this._formBuilder=o,this.prerequisites={},this.packagesList={general:[{label:"phpVersionValid",required:!0},{label:"writable",required:!0}],tools:[{label:"unoconv",required:!0},{label:"netcatOrNmap",required:!0},{label:"pgsql",required:!0},{label:"curl",required:!0},{label:"zip",required:!0},{label:"wkhtmlToPdf",required:!0},{label:"imagick",required:!0}],phpExtensions:[{label:"fileinfo",required:!0},{label:"pdoPgsql",required:!0},{label:"gd",required:!0},{label:"mbstring",required:!0},{label:"json",required:!0},{label:"gettext",required:!0},{label:"xml",required:!0}],phpConfiguration:[{label:"errorReporting",required:!0},{label:"displayErrors",required:!0}]},this.docMaarchUrl="https://docs.maarch.org/gitbook/html/MaarchCourrier/".concat(B.a.VERSION.split(".")[0]+"."+B.a.VERSION.split(".")[1],"/guat/guat_prerequisites/home.html")}return n(e,[{key:"ngOnInit",value:function(){this.stepFormGroup=this._formBuilder.group({firstCtrl:["",z.y.required]}),this.getStepData()}},{key:"getStepData",value:function(){var t=this;this.http.get("../rest/installer/prerequisites").pipe(Object(d.a)(function(e){t.prerequisites=e.prerequisites,Object.keys(t.packagesList).forEach(function(e){t.packagesList[e].forEach(function(n,r){t.packagesList[e][r].state=t.prerequisites[t.packagesList[e][r].label]?"ok":"ko","phpVersionValid"===t.packagesList[e][r].label&&t.translate.setTranslation(t.translate.getDefaultLang(),{lang:{install_phpVersionValid_desc:t.translate.instant("lang.currentVersion")+" : "+t.prerequisites.phpVersion}},!0)})}),t.stepFormGroup.controls.firstCtrl.setValue(t.checkStep()),t.stepFormGroup.controls.firstCtrl.markAsUntouched()}),Object(g.a)(function(e){return t.notify.handleSoftErrors(e),Object(m.a)(!1)})).subscribe()}},{key:"initStep",value:function(){var t=this;Object.keys(this.packagesList).forEach(function(e){t.packagesList[e].forEach(function(n,r){"ko"===t.packagesList[e][r].state&&t.packageItem.toArray().filter(function(n){return n._elementRef.nativeElement.id===t.packagesList[e][r].label})[0].toggle()})})}},{key:"checkStep",value:function(){var t=this,e="success";return Object.keys(this.packagesList).forEach(function(n){t.packagesList[n].forEach(function(t){"ko"===t.state&&(e="")})}),e}},{key:"isValidStep",value:function(){return void 0!==this.stepFormGroup&&"success"===this.stepFormGroup.controls.firstCtrl.value}},{key:"getFormGroup",value:function(){return this.stepFormGroup}},{key:"getInfoToInstall",value:function(){return[]}}]),e}()).\u0275fac=function(t){return new(t||lt)(f.Tb(h.d),f.Tb(v.b),f.Tb(F.a),f.Tb(z.e))},lt.\u0275cmp=f.Nb({type:lt,selectors:[["app-prerequisite"]],viewQuery:function(t,e){var n;1&t&&f.ad(st,1),2&t&&f.Dc(n=f.hc())&&(e.packageItem=n)},decls:16,vars:14,consts:[[1,"stepContent"],[1,"stepContentTitle"],[1,"fas","fa-check-square"],["role","alert",1,"alert-message","alert-message-info",2,"margin-top","30px","min-width","100%"],["target","_blank",1,"link",3,"href"],["style","background: white;",4,"ngFor","ngForOf"],[2,"text-align","center"],["mat-raised-button","","type","button","color","primary",3,"click"],[2,"background","white"],["mat-subheader",""],["cols","3","rowHeight","50px"],[4,"ngFor","ngForOf"],["mat-list-icon",""],["mat-line","",1,"packageName"],["matTooltipPosition","right",1,"fa","fa-info-circle",3,"id","matTooltip","matTooltipClass"],["packageItem","matTooltip"]],template:function(t,e){1&t&&(f.Zb(0,"div",0),f.Zb(1,"h2",1),f.Ub(2,"i",2),f.Tc(3),f.lc(4,"translate"),f.Yb(),f.Zb(5,"div",3),f.Tc(6),f.lc(7,"translate"),f.Zb(8,"a",4),f.Tc(9),f.Yb(),f.Yb(),f.Rc(10,ct,6,4,"mat-list",5),f.lc(11,"keyvalue"),f.Zb(12,"div",6),f.Zb(13,"button",7),f.gc("click",function(){return e.getStepData()}),f.Tc(14),f.lc(15,"translate"),f.Yb(),f.Yb(),f.Yb()),2&t&&(f.Fb(3),f.Vc(" ",f.mc(4,6,"lang.prerequisite"),""),f.Fb(3),f.Vc(" ",f.mc(7,8,"lang.stepPrerequisite_desc")," : "),f.Fb(2),f.tc("href",e.docMaarchUrl,f.Lc),f.Fb(1),f.Uc(e.docMaarchUrl),f.Fb(1),f.sc("ngForOf",f.mc(11,10,e.packagesList)),f.Fb(4),f.Uc(f.mc(15,12,"lang.updateInformations")))},directives:[S.m,I.b,T.a,T.f,at.a,at.c,T.c,D.a,T.b,O.k,ot.b],pipes:[h.c,S.g],styles:['@charset "UTF-8";.stepContent[_ngcontent-%COMP%]{margin:auto}.stepContent[_ngcontent-%COMP%]   .stepContentTitle[_ngcontent-%COMP%]{color:var(--maarch-color-primary);margin-bottom:30px;border-bottom:1px solid;padding:0}.packageItem[_ngcontent-%COMP%]{flex:1!important}.iconCheckPackage[_ngcontent-%COMP%]{background:#fff;font-size:15px!important;display:flex;align-items:center;justify-content:center;padding:10px;border-radius:20px;height:35px;width:35px}.icon_ok[_ngcontent-%COMP%]{color:green}.icon_ok[_ngcontent-%COMP%]:before{content:"\uf111"}.icon_warning[_ngcontent-%COMP%]{color:orange}.icon_warning[_ngcontent-%COMP%]:before{content:"\uf111"}.icon_ko[_ngcontent-%COMP%]{color:red}.icon_ko[_ngcontent-%COMP%]:before{content:"\uf111"}.link[_ngcontent-%COMP%]{text-decoration:underline;color:var(--maarch-color-primary)!important}.packageName[_ngcontent-%COMP%]{font-size:120%!important;white-space:normal!important}.packageName[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:help;opacity:.5;color:var(--maarch-color-primary)} .tooltip-red{background:#b71c1c;font-size:14px}']}),lt),ut=a("qFsG");function bt(t,e){1&t&&(f.Zb(0,"div",18),f.Tc(1),f.lc(2,"translate"),f.Yb()),2&t&&(f.Fb(1),f.Vc(" ",f.mc(2,1,"lang.stepEmptyDb")," "))}function mt(t,e){if(1&t&&(f.Zb(0,"mat-option",19),f.Tc(1),f.Yb()),2&t){var n=e.$implicit;f.sc("value",n),f.Fb(1),f.Vc(" ",n," ")}}var dt,gt,ft=((gt=function(){function e(n,r,a,o,s,i){t(this,e),this.translate=n,this.http=r,this._formBuilder=a,this.notify=o,this.functionsService=s,this.installerService=i,this.hide=!0,this.connectionState=!1,this.dbExist=!1,this.dataFiles=[],this.nextStep=new f.o;var c=[z.y.pattern(/^[^\;\" \\]+$/),z.y.required],l=[z.y.pattern(/^[^ ]+$/),z.y.required];this.stepFormGroup=this._formBuilder.group({dbHostCtrl:["localhost",z.y.required],dbLoginCtrl:["",l],dbPortCtrl:["5432",z.y.required],dbPasswordCtrl:["",l],dbNameCtrl:["",c],dbSampleCtrl:["data_fr",z.y.required],stateStep:["",z.y.required]})}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.stepFormGroup.controls.dbHostCtrl.valueChanges.pipe(Object(d.a)(function(){return t.stepFormGroup.controls.stateStep.setValue("")})).subscribe(),this.stepFormGroup.controls.dbLoginCtrl.valueChanges.pipe(Object(d.a)(function(){return t.stepFormGroup.controls.stateStep.setValue("")})).subscribe(),this.stepFormGroup.controls.dbPortCtrl.valueChanges.pipe(Object(d.a)(function(){return t.stepFormGroup.controls.stateStep.setValue("")})).subscribe(),this.stepFormGroup.controls.dbPasswordCtrl.valueChanges.pipe(Object(d.a)(function(){return t.stepFormGroup.controls.stateStep.setValue("")})).subscribe(),this.stepFormGroup.controls.dbNameCtrl.valueChanges.pipe(Object(d.a)(function(){return t.stepFormGroup.controls.stateStep.setValue("")})).subscribe(),this.getDataFiles()}},{key:"getDataFiles",value:function(){var t=this;this.http.get("../rest/installer/sqlDataFiles").pipe(Object(d.a)(function(e){t.dataFiles=e.dataFiles}),Object(g.a)(function(e){return t.notify.handleSoftErrors(e),Object(m.a)(!1)})).subscribe()}},{key:"isValidConnection",value:function(){return!1}},{key:"initStep",value:function(){this.installerService.isStepAlreadyLaunched("database")&&this.stepFormGroup.disable()}},{key:"checkConnection",value:function(){var t=this;this.http.get("../rest/installer/databaseConnection",{observe:"response",params:{server:this.stepFormGroup.controls.dbHostCtrl.value,port:this.stepFormGroup.controls.dbPortCtrl.value,user:this.stepFormGroup.controls.dbLoginCtrl.value,password:this.stepFormGroup.controls.dbPasswordCtrl.value,name:this.stepFormGroup.controls.dbNameCtrl.value}}).pipe(Object(d.a)(function(e){t.dbExist=200===e.status,t.notify.success(t.translate.instant("lang.rightInformations")),t.stepFormGroup.controls.stateStep.setValue("success"),t.nextStep.emit()}),Object(g.a)(function(e){return t.dbExist=!1,t.notify.error(t.translate.instant("Given database has tables"===e.error.errors?"lang.dbNotEmpty":"lang.badInformations")),t.stepFormGroup.markAllAsTouched(),t.stepFormGroup.controls.stateStep.setValue(""),Object(m.a)(!1)})).subscribe()}},{key:"checkStep",value:function(){return this.stepFormGroup.valid}},{key:"isValidStep",value:function(){return!!this.installerService.isStepAlreadyLaunched("database")||void 0!==this.stepFormGroup&&this.stepFormGroup.valid}},{key:"isEmptyConnInfo",value:function(){return this.stepFormGroup.controls.dbHostCtrl.invalid||this.stepFormGroup.controls.dbPortCtrl.invalid||this.stepFormGroup.controls.dbLoginCtrl.invalid||this.stepFormGroup.controls.dbPasswordCtrl.invalid||this.stepFormGroup.controls.dbNameCtrl.invalid}},{key:"getFormGroup",value:function(){return!!this.installerService.isStepAlreadyLaunched("database")||this.stepFormGroup}},{key:"getInfoToInstall",value:function(){return[{idStep:"database",body:{server:this.stepFormGroup.controls.dbHostCtrl.value,port:this.stepFormGroup.controls.dbPortCtrl.value,user:this.stepFormGroup.controls.dbLoginCtrl.value,password:this.stepFormGroup.controls.dbPasswordCtrl.value,name:this.stepFormGroup.controls.dbNameCtrl.value,data:this.stepFormGroup.controls.dbSampleCtrl.value},route:{method:"POST",url:"../rest/installer/database"},description:this.translate.instant("lang.stepDatabaseActionDesc"),installPriority:2}]}}]),e}()).\u0275fac=function(t){return new(t||gt)(f.Tb(h.d),f.Tb(v.b),f.Tb(z.e),f.Tb(F.a),f.Tb(q.a),f.Tb(y))},gt.\u0275cmp=f.Nb({type:gt,selectors:[["app-database"]],outputs:{nextStep:"nextStep"},decls:47,vars:35,consts:[[1,"stepContent"],[1,"stepContentTitle"],[1,"fa","fa-database"],["role","alert",1,"alert-message","alert-message-info",2,"margin-top","30px","min-width","100%"],[2,"width","850px","margin","auto",3,"formGroup"],["appearance","outline"],["matInput","","formControlName","dbHostCtrl","required",""],["matInput","","formControlName","dbPortCtrl","required",""],["matInput","","formControlName","dbLoginCtrl","required",""],["matInput","","formControlName","dbPasswordCtrl","required","",3,"type"],["mat-icon-button","","matSuffix","","color","primary",3,"click"],["matInput","","formControlName","dbNameCtrl","maxlength","50","required",""],["class","alert-message alert-message-info","role","alert","style","margin-top: 0px;min-width: 100%;",4,"ngIf"],["appearance","outline","floatLabel","never"],["formControlName","dbSampleCtrl"],[3,"value",4,"ngFor","ngForOf"],[2,"text-align","center"],["mat-raised-button","","type","button","color","primary",3,"disabled","click"],["role","alert",1,"alert-message","alert-message-info",2,"margin-top","0px","min-width","100%"],[3,"value"]],template:function(t,e){1&t&&(f.Zb(0,"div",0),f.Zb(1,"h2",1),f.Ub(2,"i",2),f.Tc(3),f.lc(4,"translate"),f.Yb(),f.Zb(5,"div",3),f.Tc(6),f.lc(7,"translate"),f.Yb(),f.Zb(8,"form",4),f.Zb(9,"mat-form-field",5),f.Zb(10,"mat-label"),f.Tc(11),f.lc(12,"translate"),f.Yb(),f.Ub(13,"input",6),f.Yb(),f.Zb(14,"mat-form-field",5),f.Zb(15,"mat-label"),f.Tc(16),f.lc(17,"translate"),f.Yb(),f.Ub(18,"input",7),f.Yb(),f.Zb(19,"mat-form-field",5),f.Zb(20,"mat-label"),f.Tc(21),f.lc(22,"translate"),f.Yb(),f.Ub(23,"input",8),f.Yb(),f.Zb(24,"mat-form-field",5),f.Zb(25,"mat-label"),f.Tc(26),f.lc(27,"translate"),f.Yb(),f.Ub(28,"input",9),f.Zb(29,"button",10),f.gc("click",function(){return e.hide=!e.hide}),f.Ub(30,"mat-icon"),f.Yb(),f.Yb(),f.Zb(31,"mat-form-field",5),f.Zb(32,"mat-label"),f.Tc(33),f.lc(34,"translate"),f.Yb(),f.Ub(35,"input",11),f.Yb(),f.Rc(36,bt,3,3,"div",12),f.Zb(37,"mat-form-field",13),f.Zb(38,"mat-label"),f.Tc(39),f.lc(40,"translate"),f.Yb(),f.Zb(41,"mat-select",14),f.Rc(42,mt,2,2,"mat-option",15),f.Yb(),f.Yb(),f.Zb(43,"div",16),f.Zb(44,"button",17),f.gc("click",function(){return e.checkConnection()}),f.Tc(45),f.lc(46,"translate"),f.Yb(),f.Yb(),f.Yb(),f.Yb()),2&t&&(f.Fb(3),f.Vc(" ",f.mc(4,17,"lang.database"),""),f.Fb(3),f.Vc(" ",f.mc(7,19,"lang.stepDatabase_desc")," "),f.Fb(2),f.sc("formGroup",e.stepFormGroup),f.Fb(3),f.Uc(f.mc(12,21,"lang.host")),f.Fb(5),f.Uc(f.mc(17,23,"lang.port")),f.Fb(5),f.Uc(f.mc(22,25,"lang.user")),f.Fb(5),f.Uc(f.mc(27,27,"lang.password")),f.Fb(2),f.sc("type",e.hide?"password":"text"),f.Fb(2),f.Ib("fa ",e.hide?"fa-eye-slash":"fa-eye",""),f.Fb(3),f.Uc(f.mc(34,29,"lang.dbName")),f.Fb(3),f.sc("ngIf",e.dbExist),f.Fb(3),f.Uc(f.mc(40,31,"lang.dbSample")),f.Fb(3),f.sc("ngForOf",e.dataFiles),f.Fb(2),f.sc("disabled",e.isEmptyConnInfo()||e.stepFormGroup.controls.dbHostCtrl.disabled),f.Fb(1),f.Vc(" ",f.mc(46,33,"lang.checkInformations")," "))},directives:[z.z,z.q,z.j,W.c,W.g,ut.b,z.c,z.p,z.h,z.x,I.b,W.i,D.a,z.l,S.n,H.a,S.m,O.o],pipes:[h.c],styles:[".stepContent[_ngcontent-%COMP%]{margin:auto}.stepContent[_ngcontent-%COMP%]   .stepContentTitle[_ngcontent-%COMP%]{color:var(--maarch-color-primary);margin-bottom:30px;border-bottom:1px solid;padding:0}"]}),gt),ht=((dt=function(){function e(n,r,a,o,s){var i=this;t(this,e),this.translate=n,this._formBuilder=r,this.notify=a,this.http=o,this.installerService=s,this.nextStep=new f.o;var c=[z.y.pattern(/^[^\'\<\>\|\*\:\?]+$/),z.y.required];this.stepFormGroup=this._formBuilder.group({docserversPath:["/opt/maarch/docservers/",c],stateStep:["",z.y.required]}),this.stepFormGroup.controls.docserversPath.valueChanges.pipe(Object(d.a)(function(){return i.stepFormGroup.controls.stateStep.setValue("")})).subscribe()}return n(e,[{key:"ngOnInit",value:function(){}},{key:"isValidStep",value:function(){return!!this.installerService.isStepAlreadyLaunched("docserver")||void 0!==this.stepFormGroup&&this.stepFormGroup.valid}},{key:"initStep",value:function(){this.installerService.isStepAlreadyLaunched("docserver")&&this.stepFormGroup.disable()}},{key:"getFormGroup",value:function(){return!!this.installerService.isStepAlreadyLaunched("docserver")||this.stepFormGroup}},{key:"checkAvailability",value:function(){var t=this;this.http.get("../rest/installer/docservers",{params:{path:this.stepFormGroup.controls.docserversPath.value}}).pipe(Object(d.a)(function(e){t.notify.success(t.translate.instant("lang.rightInformations")),t.stepFormGroup.controls.stateStep.setValue("success"),t.nextStep.emit()}),Object(g.a)(function(e){return t.notify.error(t.translate.instant("lang.pathUnreacheable")),t.stepFormGroup.controls.stateStep.setValue(""),Object(m.a)(!1)})).subscribe()}},{key:"getInfoToInstall",value:function(){return[{idStep:"docserver",body:{path:this.stepFormGroup.controls.docserversPath.value},route:{method:"POST",url:"../rest/installer/docservers"},description:this.translate.instant("lang.stepDocserversActionDesc"),installPriority:3}]}}]),e}()).\u0275fac=function(t){return new(t||dt)(f.Tb(h.d),f.Tb(z.e),f.Tb(F.a),f.Tb(v.b),f.Tb(y))},dt.\u0275cmp=f.Nb({type:dt,selectors:[["app-docservers"]],outputs:{nextStep:"nextStep"},decls:20,vars:14,consts:[[1,"stepContent"],[1,"stepContentTitle"],[1,"fa","fa-hdd"],["role","alert",1,"alert-message","alert-message-info",2,"margin-top","30px","min-width","100%"],[2,"width","850px","margin","auto",3,"formGroup"],["appearance","outline",2,"color","initial"],["matInput","","formControlName","docserversPath"],["matSuffix",""],[2,"text-align","center"],["mat-raised-button","","type","button","color","primary",3,"disabled","click"]],template:function(t,e){1&t&&(f.Zb(0,"div",0),f.Zb(1,"h2",1),f.Ub(2,"i",2),f.Tc(3),f.lc(4,"translate"),f.Yb(),f.Zb(5,"div",3),f.Tc(6),f.lc(7,"translate"),f.Yb(),f.Zb(8,"form",4),f.Zb(9,"mat-form-field",5),f.Zb(10,"mat-label"),f.Tc(11),f.lc(12,"translate"),f.Yb(),f.Ub(13,"input",6),f.Zb(14,"span",7),f.Tc(15,"/__CUSTOM_iD__/"),f.Yb(),f.Yb(),f.Zb(16,"div",8),f.Zb(17,"button",9),f.gc("click",function(){return e.checkAvailability()}),f.Tc(18),f.lc(19,"translate"),f.Yb(),f.Yb(),f.Yb(),f.Yb()),2&t&&(f.Fb(3),f.Vc(" ",f.mc(4,6,"lang.docserver"),""),f.Fb(3),f.Vc(" ",f.mc(7,8,"lang.stepDocserver_desc")," "),f.Fb(2),f.sc("formGroup",e.stepFormGroup),f.Fb(3),f.Uc(f.mc(12,10,"lang.docserverPath")),f.Fb(6),f.sc("disabled",!e.stepFormGroup.controls.docserversPath.valid),f.Fb(1),f.Uc(f.mc(19,12,"lang.checkInformations")))},directives:[z.z,z.q,z.j,W.c,W.g,ut.b,z.c,z.p,z.h,W.i,I.b],pipes:[h.c],styles:[".stepContent[_ngcontent-%COMP%]{margin:auto}.stepContent[_ngcontent-%COMP%]   .stepContentTitle[_ngcontent-%COMP%]{color:var(--maarch-color-primary);margin-bottom:30px;border-bottom:1px solid;padding:0}"]}),dt),vt=a("aEDk"),yt=a("JX91"),Ft=a("Kj3r"),kt=a("jhN1"),Ct=a("Wp6s");function It(t,e){1&t&&(f.Xb(0),f.Tc(1),f.lc(2,"translate"),f.Wb()),2&t&&(f.Fb(1),f.Vc(" ",f.mc(2,1,"lang.customAlreadyExist")," "))}function St(t,e){1&t&&(f.Xb(0),f.Tc(1),f.lc(2,"translate"),f.Wb()),2&t&&(f.Fb(1),f.Vc(" ",f.mc(2,1,"lang.invalidCustomName")," "))}var Tt=function(){return{value1:'"_", "-"'}};function Ot(t,e){1&t&&(f.Xb(0),f.Tc(1),f.lc(2,"translate"),f.Wb()),2&t&&(f.Fb(1),f.Vc(" ",f.nc(2,1,"lang.onlySpecialCharAllowed",f.yc(4,Tt))," "))}var Yt=function(){return{value1:"2"}};function Zt(t,e){1&t&&(f.Xb(0),f.Tc(1),f.lc(2,"translate"),f.Wb()),2&t&&(f.Fb(1),f.Vc(" ",f.nc(2,1,"lang.invalidLengthCustomName",f.yc(4,Yt))," "))}function Gt(t,e){if(1&t){var n=f.ac();f.Zb(0,"mat-card",20),f.gc("click",function(){f.Ic(n);var t=e.$implicit;return f.kc().selectBg(t.url)}),f.Yb()}if(2&t){var r=e.$implicit,a=f.kc();f.Oc("background","url("+r.url+")"),f.Lb("selected",r.url===a.stepFormGroup.controls.bodyLoginBackground.value)("disabled",a.stepFormGroup.controls.bodyLoginBackground.disabled)}}function xt(t,e){if(1&t){var n=f.ac();f.Zb(0,"mat-card",21),f.gc("click",function(){return f.Ic(n),f.Ec(2).click()}),f.Zb(1,"input",22,23),f.gc("change",function(t){return f.Ic(n),f.kc().uploadTrigger(t,"bg")}),f.Yb(),f.Ub(3,"i",24),f.Yb()}}var wt,_t,Ut=((_t=function(){function e(n,r,a,o,s,i,c){t(this,e),this.translate=n,this._formBuilder=r,this.notify=a,this.sanitizer=o,this.scanPipe=s,this.http=i,this.installerService=c,this.readonlyState=!1,this.backgroundList=[];var l=[z.y.pattern(/^[a-z0-9_\-]*$/),z.y.required,z.y.minLength(3)];this.stepFormGroup=this._formBuilder.group({firstCtrl:["success",z.y.required],customId:[null,l],appName:["Maarch Courrier "+B.a.VERSION.split(".")[0]+"."+B.a.VERSION.split(".")[1],z.y.required],loginMessage:['<span style="color:#24b0ed"><strong>D\xe9couvrez votre application via</strong></span>&nbsp;<a title="le guide de visite" href="https://docs.maarch.org/gitbook/html/MaarchCourrier/'.concat(B.a.VERSION.split(".")[0]+"."+B.a.VERSION.split(".")[1],'/guu/home.html" target="_blank"><span style="color:#f99830;"><strong>le guide de visite en ligne</strong></span></a>')],homeMessage:['<p>D&eacute;couvrez <strong>Maarch Courrier 21.03</strong> avec <a title="notre guide de visite" href="https://docs.maarch.org/" target="_blank"><span style="color:#f99830;"><strong>notre guide de visite en ligne</strong></span></a>.</p>'],bodyLoginBackground:["assets/bodylogin.jpg"],uploadedLogo:["../rest/images?image=logo"]}),this.backgroundList=Array.from({length:17}).map(function(t,e){return{filename:"".concat(e+1,".jpg"),url:"assets/".concat(e+1,".jpg")}})}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.checkCustomExist(),this.stepFormGroup.controls.customId.valueChanges.pipe(Object(yt.a)(""),Object(d.a)(function(){t.stepFormGroup.controls.firstCtrl.setValue("")}),Object(Ft.a)(500),Object(V.a)(function(t){return t.length>2}),Object(V.a)(function(){return null===t.stepFormGroup.controls.customId.errors||void 0===t.stepFormGroup.controls.customId.errors.pattern}),Object(d.a)(function(){t.checkCustomExist()})).subscribe()}},{key:"initStep",value:function(){null===this.stepFormGroup.controls.customId.value&&this.stepFormGroup.controls.customId.setValue(this.appDatabase.getInfoToInstall()[0].body.name),this.installerService.isStepAlreadyLaunched("createCustom")&&this.installerService.isStepAlreadyLaunched("customization")?(this.stepFormGroup.disable(),this.readonlyState=!0,tinymce.remove(),this.initMce(!0)):this.installerService.isStepAlreadyLaunched("createCustom")?(this.stepFormGroup.controls.customId.disable(),this.stepFormGroup.controls.appName.disable(),this.stepFormGroup.controls.firstCtrl.disable()):this.installerService.isStepAlreadyLaunched("customization")?(this.stepFormGroup.controls.loginMessage.disable(),this.stepFormGroup.controls.homeMessage.disable(),this.stepFormGroup.controls.bodyLoginBackground.disable(),this.stepFormGroup.controls.uploadedLogo.disable(),this.readonlyState=!0,tinymce.remove(),this.initMce(!0)):(this.readonlyState=!1,this.initMce())}},{key:"checkCustomExist",value:function(){var t=this;this.http.get("../rest/installer/custom",{observe:"response",params:{customId:this.stepFormGroup.controls.customId.value}}).pipe(Object(d.a)(function(e){null!==t.stepFormGroup.controls.customId.errors?delete t.stepFormGroup.controls.customId.errors.customExist:t.stepFormGroup.controls.firstCtrl.setValue("success")}),Object(g.a)(function(e){return null!==e.error.errors.match(/^Custom already exists/g)?(t.stepFormGroup.controls.customId.setErrors(Object.assign(Object.assign({},t.stepFormGroup.controls.customId.errors),{customExist:!0})),t.stepFormGroup.controls.customId.markAsTouched()):null!==e.error.errors.match(/^Unauthorized custom name/g)?(t.stepFormGroup.controls.customId.setErrors(Object.assign(Object.assign({},t.stepFormGroup.controls.customId.errors),{invalidCustomName:!0})),t.stepFormGroup.controls.customId.markAsTouched()):t.notify.handleSoftErrors(e),Object(m.a)(!1)})).subscribe()}},{key:"isValidStep",value:function(){return!(!this.installerService.isStepAlreadyLaunched("createCustom")||!this.installerService.isStepAlreadyLaunched("customization"))||void 0!==this.stepFormGroup&&this.stepFormGroup.valid}},{key:"getFormGroup",value:function(){return!(!this.installerService.isStepAlreadyLaunched("createCustom")||!this.installerService.isStepAlreadyLaunched("customization"))||this.stepFormGroup}},{key:"initMce",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];tinymce.init({selector:"textarea",base_url:"../node_modules/tinymce/",convert_urls:!1,height:"150",suffix:".min",language:this.translate.instant("lang.langISO").replace("-","_"),language_url:"../node_modules/tinymce-i18n/langs/".concat(this.translate.instant("lang.langISO").replace("-","_"),".js"),menubar:!1,statusbar:!1,readonly:t,plugins:["autolink"],external_plugins:{maarch_b64image:"../../src/frontend/plugins/tinymce/maarch_b64image/plugin.min.js"},toolbar_sticky:!0,toolbar_drawer:"floating",toolbar:t?"":"undo redo | fontselect fontsizeselect | bold italic underline strikethrough forecolor | maarch_b64image |         alignleft aligncenter alignright alignjustify         bullist numlist outdent indent | removeformat"})}},{key:"getInfoToInstall",value:function(){return[{idStep:"createCustom",body:{lang:this.appWelcome.stepFormGroup.controls.lang.value,customId:this.stepFormGroup.controls.customId.value,applicationName:this.stepFormGroup.controls.appName.value},description:this.translate.instant("lang.stepInstanceActionDesc"),route:{method:"POST",url:"../rest/installer/custom"},installPriority:1},{idStep:"customization",body:{loginMessage:tinymce.get("loginMessage").getContent(),homeMessage:tinymce.get("homeMessage").getContent(),bodyLoginBackground:this.stepFormGroup.controls.bodyLoginBackground.value,logo:this.stepFormGroup.controls.uploadedLogo.value},description:this.translate.instant("lang.stepCustomizationActionDesc"),route:{method:"POST",url:"../rest/installer/customization"},installPriority:3}]}},{key:"uploadTrigger",value:function(t,e){var n=this;if(t.target.files&&t.target.files[0]){var r=this.canUploadFile(t.target.files[0],e);if(!0===r){var a=new FileReader;a.readAsDataURL(t.target.files[0]),a.onload=function(t){if("logo"===e)n.stepFormGroup.controls.uploadedLogo.setValue(t.target.result);else{var r=new Image;r.onload=function(e){e.target.width<1920||e.target.height<1080?n.notify.error(n.translate.instant("lang.badImageResolution",{value1:"1920x1080"})):(n.backgroundList.push({filename:t.target.result,url:t.target.result}),n.stepFormGroup.controls.bodyLoginBackground.setValue(t.target.result))},r.src=t.target.result}}}else this.notify.error(r)}}},{key:"canUploadFile",value:function(t,e){var n="logo"!==e?["image/jpg","image/jpeg"]:["image/svg+xml"];if("logo"===e){if(t.size>5e6)return this.translate.instant("lang.maxFileSizeExceeded",{value1:"5mo"});if(-1===n.indexOf(t.type))return this.translate.instant("lang.onlyExtensionsAllowed",{value1:n.join(", ")})}else{if(t.size>1e7)return this.translate.instant("lang.maxFileSizeExceeded",{value1:"10mo"});if(-1===n.indexOf(t.type))return this.translate.instant("lang.onlyExtensionsAllowed",{value1:n.join(", ")})}return!0}},{key:"logoURL",value:function(){return this.sanitizer.bypassSecurityTrustUrl(this.stepFormGroup.controls.uploadedLogo.value)}},{key:"selectBg",value:function(t){this.stepFormGroup.controls.bodyLoginBackground.disabled||this.stepFormGroup.controls.bodyLoginBackground.setValue(t)}},{key:"clickLogoButton",value:function(t){this.stepFormGroup.controls.uploadedLogo.disabled||t.click()}}]),e}()).\u0275fac=function(t){return new(t||_t)(f.Tb(h.d),f.Tb(z.e),f.Tb(F.a),f.Tb(kt.b),f.Tb(vt.e),f.Tb(v.b),f.Tb(y))},_t.\u0275cmp=f.Nb({type:_t,selectors:[["app-customization"]],inputs:{appDatabase:"appDatabase",appWelcome:"appWelcome"},features:[f.Eb([vt.e])],decls:54,vars:36,consts:[[1,"stepContent"],[1,"stepContentTitle"],[1,"fas","fa-tools"],["role","alert",1,"alert-message","alert-message-info",2,"margin-top","30px","min-width","100%"],[2,"display","contents",3,"formGroup"],[1,"col-md-6"],["appearance","outline"],["matInput","","formControlName","customId"],[4,"ngIf"],["matInput","","formControlName","appName"],["name","loginMessage","id","loginMessage","formControlName","loginMessage",2,"padding-top","10px"],["name","homeMessage","id","homeMessage","formControlName","homeMessage",2,"padding-top","10px"],["matRipple","",2,"width","350px","background-size","100%","cursor","pointer"],[2,"width","100%",3,"src","click"],["type","file","name","files[]","accept","image/svg+xml",2,"display","none",3,"change"],["uploadLogo",""],[1,"backgroundList"],[1,"backgroundItem",2,"background","url(assets/bodylogin.jpg)","background-size","cover",3,"click"],["style","opacity: 0.3;","class","backgroundItem",3,"selected","disabled","background","click",4,"ngFor","ngForOf"],["style","opacity: 0.3;display: flex;align-items: center;justify-content: center;","class","backgroundItem",3,"click",4,"ngIf"],[1,"backgroundItem",2,"opacity","0.3",3,"click"],[1,"backgroundItem",2,"opacity","0.3","display","flex","align-items","center","justify-content","center",3,"click"],["type","file","name","files[]","accept","image/jpeg",2,"display","none",3,"change"],["uploadFile",""],[1,"fa","fa-plus",2,"font-size","30px","color","#666"]],template:function(t,e){if(1&t){var n=f.ac();f.Zb(0,"div",0),f.Zb(1,"h2",1),f.Ub(2,"i",2),f.Tc(3),f.lc(4,"translate"),f.Yb(),f.Zb(5,"div",3),f.Tc(6),f.lc(7,"translate"),f.Yb(),f.Zb(8,"form",4),f.Zb(9,"div",5),f.Zb(10,"mat-form-field",6),f.Zb(11,"mat-label"),f.Tc(12),f.lc(13,"translate"),f.Yb(),f.Ub(14,"input",7),f.Zb(15,"mat-error"),f.Rc(16,It,3,3,"ng-container",8),f.Rc(17,St,3,3,"ng-container",8),f.Rc(18,Ot,3,5,"ng-container",8),f.Rc(19,Zt,3,5,"ng-container",8),f.Yb(),f.Yb(),f.Zb(20,"mat-form-field",6),f.Zb(21,"mat-label"),f.Tc(22),f.lc(23,"translate"),f.Yb(),f.Ub(24,"input",9),f.Yb(),f.Zb(25,"div"),f.Tc(26),f.lc(27,"translate"),f.Yb(),f.Ub(28,"textarea",10),f.Ub(29,"br"),f.Ub(30,"br"),f.Zb(31,"div"),f.Tc(32),f.lc(33,"translate"),f.Yb(),f.Ub(34,"textarea",11),f.Ub(35,"br"),f.Ub(36,"br"),f.Yb(),f.Zb(37,"div",5),f.Zb(38,"div"),f.Tc(39),f.lc(40,"translate"),f.Yb(),f.Zb(41,"div"),f.Zb(42,"mat-card",12),f.Zb(43,"img",13),f.gc("click",function(){f.Ic(n);var t=f.Ec(45);return e.clickLogoButton(t)}),f.Yb(),f.Zb(44,"input",14,15),f.gc("change",function(t){return e.uploadTrigger(t,"logo")}),f.Yb(),f.Yb(),f.Yb(),f.Ub(46,"br"),f.Zb(47,"div"),f.Tc(48),f.lc(49,"translate"),f.Yb(),f.Zb(50,"div",16),f.Zb(51,"mat-card",17),f.gc("click",function(){return e.selectBg("assets/bodylogin.jpg")}),f.Yb(),f.Rc(52,Gt,1,6,"mat-card",18),f.Rc(53,xt,4,0,"mat-card",19),f.Yb(),f.Yb(),f.Yb(),f.Yb()}2&t&&(f.Fb(3),f.Vc(" ",f.mc(4,20,"lang.customization"),""),f.Fb(3),f.Vc(" ",f.mc(7,22,"lang.stepCustomization_desc")," "),f.Fb(2),f.sc("formGroup",e.stepFormGroup),f.Fb(4),f.Uc(f.mc(13,24,"lang.instanceId")),f.Fb(4),f.sc("ngIf",null==e.stepFormGroup.controls.customId.errors?null:e.stepFormGroup.controls.customId.errors.customExist),f.Fb(1),f.sc("ngIf",null==e.stepFormGroup.controls.customId.errors?null:e.stepFormGroup.controls.customId.errors.invalidCustomName),f.Fb(1),f.sc("ngIf",null==e.stepFormGroup.controls.customId.errors?null:e.stepFormGroup.controls.customId.errors.pattern),f.Fb(1),f.sc("ngIf",null==e.stepFormGroup.controls.customId.errors?null:e.stepFormGroup.controls.customId.errors.minlength),f.Fb(3),f.Uc(f.mc(23,26,"lang.applicationName")),f.Fb(4),f.Vc("",f.mc(27,28,"lang.loginMsg")," : "),f.Fb(6),f.Vc("",f.mc(33,30,"lang.homeMsg")," : "),f.Fb(7),f.Vc("",f.mc(40,32,"lang.chooseLogo")," : "),f.Fb(4),f.sc("src",e.logoURL(),f.Lc),f.Fb(5),f.Vc("",f.mc(49,34,"lang.chooseLoginBg")," : "),f.Fb(3),f.Lb("disabled",e.stepFormGroup.controls.bodyLoginBackground.disabled)("selected","assets/bodylogin.jpg"===e.stepFormGroup.controls.bodyLoginBackground.value),f.Fb(1),f.sc("ngForOf",e.backgroundList),f.Fb(1),f.sc("ngIf",!e.stepFormGroup.controls.bodyLoginBackground.disabled))},directives:[z.z,z.q,z.j,W.c,W.g,ut.b,z.c,z.p,z.h,W.b,S.n,Ct.a,O.t,S.m],pipes:[h.c],styles:[".stepContent[_ngcontent-%COMP%]{margin:auto}.stepContent[_ngcontent-%COMP%]   .stepContentTitle[_ngcontent-%COMP%]{color:var(--maarch-color-primary);margin-bottom:30px;border-bottom:1px solid;padding:0}.backgroundList[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);grid-gap:10px}.selected[_ngcontent-%COMP%]{transition:all .3s;opacity:1!important;border:10px solid var(--maarch-color-secondary)!important}.backgroundItem[_ngcontent-%COMP%]{border:0 solid var(--maarch-color-secondary);opacity:.5;transition:all .3s;cursor:pointer;height:120px;background-size:cover!important}.disabled[_ngcontent-%COMP%]{cursor:default!important}.backgroundItem[_ngcontent-%COMP%]:not(.disabled):hover{transition:all .3s;opacity:1!important}"]}),_t),Pt=((wt=function(){function e(n,r,a,o){t(this,e),this.translate=n,this._formBuilder=r,this.notify=a,this.installerService=o,this.hide=!0,this.tiggerInstall=new f.o;var s=[z.y.pattern(/^[\w.@-]*$/),z.y.required],i=[z.y.pattern(/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/),z.y.required];this.stepFormGroup=this._formBuilder.group({login:["superadmin",s],firstname:["Admin",z.y.required],lastname:["SUPER",z.y.required],password:["",z.y.required],passwordConfirm:["",z.y.required],email:["yourEmail@domain.com",i]})}return n(e,[{key:"ngOnInit",value:function(){var t=this;this.stepFormGroup.controls.password.valueChanges.pipe(Object(d.a)(function(e){e!==t.stepFormGroup.controls.passwordConfirm.value?(t.stepFormGroup.controls.password.setErrors({incorrect:!0}),t.stepFormGroup.controls.passwordConfirm.setErrors({incorrect:!0}),t.stepFormGroup.controls.passwordConfirm.markAsTouched()):(t.stepFormGroup.controls.password.setErrors(null),t.stepFormGroup.controls.passwordConfirm.setErrors(null))})).subscribe(),this.stepFormGroup.controls.passwordConfirm.valueChanges.pipe(Object(d.a)(function(e){e!==t.stepFormGroup.controls.password.value?(t.stepFormGroup.controls.password.setErrors({incorrect:!0}),t.stepFormGroup.controls.password.markAsTouched(),t.stepFormGroup.controls.passwordConfirm.setErrors({incorrect:!0})):(t.stepFormGroup.controls.password.setErrors(null),t.stepFormGroup.controls.passwordConfirm.setErrors(null))})).subscribe()}},{key:"initStep",value:function(){this.installerService.isStepAlreadyLaunched("userAdmin")&&this.stepFormGroup.disable()}},{key:"isValidStep",value:function(){return void 0!==this.stepFormGroup&&(this.stepFormGroup.valid||this.installerService.isStepAlreadyLaunched("userAdmin"))}},{key:"getFormGroup",value:function(){return!!this.installerService.isStepAlreadyLaunched("userAdmin")||this.stepFormGroup}},{key:"getInfoToInstall",value:function(){return[{idStep:"userAdmin",body:{login:this.stepFormGroup.controls.login.value,firstname:this.stepFormGroup.controls.firstname.value,lastname:this.stepFormGroup.controls.lastname.value,password:this.stepFormGroup.controls.password.value,email:this.stepFormGroup.controls.email.value},route:{method:"PUT",url:"../rest/installer/administrator"},description:this.translate.instant("lang.stepUserAdminActionDesc"),installPriority:3}]}},{key:"launchInstall",value:function(){this.tiggerInstall.emit()}}]),e}()).\u0275fac=function(t){return new(t||wt)(f.Tb(h.d),f.Tb(z.e),f.Tb(F.a),f.Tb(y))},wt.\u0275cmp=f.Nb({type:wt,selectors:[["app-useradmin"]],outputs:{tiggerInstall:"tiggerInstall"},decls:49,vars:39,consts:[[1,"stepContent"],[1,"stepContentTitle"],[1,"fas","fa-user"],["role","alert",1,"alert-message","alert-message-info",2,"margin-top","30px","min-width","100%"],[2,"width","850px","margin","auto",3,"formGroup"],["appearance","outline"],["matInput","","formControlName","login"],["matInput","","formControlName","firstname"],["matInput","","formControlName","lastname"],["matInput","","formControlName","password",3,"type"],["mat-icon-button","","matSuffix","","color","primary",3,"click"],["matInput","","formControlName","passwordConfirm",3,"type"],["matInput","","formControlName","email"]],template:function(t,e){1&t&&(f.Zb(0,"div",0),f.Zb(1,"h2",1),f.Ub(2,"i",2),f.Tc(3),f.lc(4,"translate"),f.Yb(),f.Zb(5,"div",3),f.Tc(6),f.lc(7,"translate"),f.Yb(),f.Zb(8,"form",4),f.Zb(9,"mat-form-field",5),f.Zb(10,"mat-label"),f.Tc(11),f.lc(12,"translate"),f.Yb(),f.Ub(13,"input",6),f.Yb(),f.Zb(14,"mat-form-field",5),f.Zb(15,"mat-label"),f.Tc(16),f.lc(17,"translate"),f.Yb(),f.Ub(18,"input",7),f.Yb(),f.Zb(19,"mat-form-field",5),f.Zb(20,"mat-label"),f.Tc(21),f.lc(22,"translate"),f.Yb(),f.Ub(23,"input",8),f.Yb(),f.Zb(24,"mat-form-field",5),f.Zb(25,"mat-label"),f.Tc(26),f.lc(27,"translate"),f.Yb(),f.Ub(28,"input",9),f.Zb(29,"button",10),f.gc("click",function(){return e.hide=!e.hide}),f.Ub(30,"mat-icon"),f.Yb(),f.Zb(31,"mat-error"),f.Tc(32),f.lc(33,"translate"),f.Yb(),f.Yb(),f.Zb(34,"mat-form-field",5),f.Zb(35,"mat-label"),f.Tc(36),f.lc(37,"translate"),f.Yb(),f.Ub(38,"input",11),f.Zb(39,"button",10),f.gc("click",function(){return e.hide=!e.hide}),f.Ub(40,"mat-icon"),f.Yb(),f.Zb(41,"mat-error"),f.Tc(42),f.lc(43,"translate"),f.Yb(),f.Yb(),f.Zb(44,"mat-form-field",5),f.Zb(45,"mat-label"),f.Tc(46),f.lc(47,"translate"),f.Yb(),f.Ub(48,"input",12),f.Yb(),f.Yb(),f.Yb()),2&t&&(f.Fb(3),f.Vc(" ",f.mc(4,19,"lang.userAdmin"),""),f.Fb(3),f.Vc(" ",f.mc(7,21,"lang.stepUserAdmin_desc")," "),f.Fb(2),f.sc("formGroup",e.stepFormGroup),f.Fb(3),f.Uc(f.mc(12,23,"lang.id")),f.Fb(5),f.Uc(f.mc(17,25,"lang.firstname")),f.Fb(5),f.Uc(f.mc(22,27,"lang.lastname")),f.Fb(5),f.Uc(f.mc(27,29,"lang.password")),f.Fb(2),f.sc("type",e.hide?"password":"text"),f.Fb(2),f.Ib("fa ",e.hide?"fa-eye-slash":"fa-eye",""),f.Fb(2),f.Uc(f.mc(33,31,"lang.passwordNotMatch")),f.Fb(4),f.Uc(f.mc(37,33,"lang.retypeNewPassword")),f.Fb(2),f.sc("type",e.hide?"password":"text"),f.Fb(2),f.Ib("fa ",e.hide?"fa-eye-slash":"fa-eye",""),f.Fb(2),f.Uc(f.mc(43,35,"lang.passwordNotMatch")),f.Fb(4),f.Uc(f.mc(47,37,"lang.email")))},directives:[z.z,z.q,z.j,W.c,W.g,ut.b,z.c,z.p,z.h,I.b,W.i,D.a,W.b],pipes:[h.c],styles:[".stepContent[_ngcontent-%COMP%]{margin:auto}.stepContent[_ngcontent-%COMP%]   .stepContentTitle[_ngcontent-%COMP%]{color:var(--maarch-color-primary);margin-bottom:30px;border-bottom:1px solid;padding:0}"]}),wt),Lt=["stepper"],Mt=["stepContent"];function Vt(t,e){1&t&&f.Tc(0,"Installation")}function Et(t,e){if(1&t){var n=f.ac();f.Zb(0,"button",33),f.gc("click",function(){return f.Ic(n),f.kc(2).gotToLogin()}),f.lc(1,"translate"),f.Ub(2,"mat-icon",34),f.Yb()}2&t&&f.sc("title",f.mc(1,1,"lang.home"))}function jt(t,e){1&t&&(f.Tc(0),f.lc(1,"translate")),2&t&&f.Uc(f.mc(1,1,"lang.prerequisite"))}function qt(t,e){1&t&&(f.Tc(0),f.lc(1,"translate")),2&t&&f.Uc(f.mc(1,1,"lang.database"))}function At(t,e){1&t&&(f.Tc(0),f.lc(1,"translate")),2&t&&f.Uc(f.mc(1,1,"lang.docserver"))}function Nt(t,e){1&t&&(f.Tc(0),f.lc(1,"translate")),2&t&&f.Uc(f.mc(1,1,"lang.customization"))}function Rt(t,e){1&t&&(f.Tc(0),f.lc(1,"translate")),2&t&&f.Uc(f.mc(1,1,"lang.userAdmin"))}function zt(t,e){1&t&&f.Ub(0,"mat-icon",35)}function Bt(t,e){1&t&&f.Ub(0,"mat-icon",35)}function Dt(t,e){1&t&&f.Ub(0,"mat-icon",36)}function $t(t,e){if(1&t){var n=f.ac();f.Zb(0,"mat-horizontal-stepper",6,7),f.gc("selectionChange",function(t){return f.Ic(n),f.kc().initStep(t)}),f.Zb(2,"mat-step",8),f.Rc(3,Vt,1,0,"ng-template",9),f.Zb(4,"div",10),f.Zb(5,"div",11),f.Ub(6,"app-welcome",null,12),f.Yb(),f.Rc(9,Et,3,3,"button",13),f.Zb(10,"button",14),f.lc(11,"translate"),f.Ub(12,"mat-icon",15),f.Yb(),f.Yb(),f.Yb(),f.Zb(13,"mat-step",16),f.Rc(14,jt,2,3,"ng-template",9),f.Zb(15,"div",10),f.Zb(16,"div",11),f.Ub(17,"app-prerequisite",null,17),f.Yb(),f.Zb(20,"button",18),f.lc(21,"translate"),f.Ub(22,"mat-icon",19),f.Yb(),f.Zb(23,"button",20),f.lc(24,"translate"),f.Ub(25,"mat-icon",15),f.Yb(),f.Yb(),f.Yb(),f.Zb(26,"mat-step",16),f.Rc(27,qt,2,3,"ng-template",9),f.Zb(28,"div",10),f.Zb(29,"div",11),f.Zb(30,"app-database",21,22),f.gc("nextStep",function(){return f.Ic(n),f.kc().nextStep()}),f.Yb(),f.Yb(),f.Zb(33,"button",18),f.lc(34,"translate"),f.Ub(35,"mat-icon",19),f.Yb(),f.Zb(36,"button",20),f.lc(37,"translate"),f.Ub(38,"mat-icon",15),f.Yb(),f.Yb(),f.Yb(),f.Zb(39,"mat-step",16),f.Rc(40,At,2,3,"ng-template",9),f.Zb(41,"div",10),f.Zb(42,"div",11),f.Zb(43,"app-docservers",21,23),f.gc("nextStep",function(){return f.Ic(n),f.kc().nextStep()}),f.Yb(),f.Yb(),f.Zb(46,"button",18),f.lc(47,"translate"),f.Ub(48,"mat-icon",19),f.Yb(),f.Zb(49,"button",20),f.lc(50,"translate"),f.Ub(51,"mat-icon",15),f.Yb(),f.Yb(),f.Yb(),f.Zb(52,"mat-step",16),f.Rc(53,Nt,2,3,"ng-template",9),f.Zb(54,"div",10),f.Zb(55,"div",11),f.Ub(56,"app-customization",24,25),f.Yb(),f.Zb(59,"button",18),f.lc(60,"translate"),f.Ub(61,"mat-icon",19),f.Yb(),f.Zb(62,"button",20),f.lc(63,"translate"),f.Ub(64,"mat-icon",15),f.Yb(),f.Yb(),f.Yb(),f.Zb(65,"mat-step",16),f.Rc(66,Rt,2,3,"ng-template",9),f.Zb(67,"div",10),f.Zb(68,"div",11),f.Zb(69,"app-useradmin",26,27),f.gc("tiggerInstall",function(){return f.Ic(n),f.kc().endInstall()}),f.Yb(),f.Yb(),f.Zb(72,"button",18),f.lc(73,"translate"),f.Ub(74,"mat-icon",19),f.Yb(),f.Zb(75,"button",28),f.gc("click",function(){return f.Ic(n),f.kc().endInstall()}),f.lc(76,"translate"),f.Ub(77,"mat-icon",29),f.Yb(),f.Yb(),f.Yb(),f.Rc(78,zt,1,0,"ng-template",30),f.Rc(79,Bt,1,0,"ng-template",31),f.Rc(80,Dt,1,0,"ng-template",32),f.Yb()}if(2&t){var r=f.Ec(8),a=f.Ec(18),o=f.Ec(31),s=f.Ec(44),i=f.Ec(57),c=f.Ec(70),l=f.kc();f.sc("@.disabled",!0),f.Fb(9),f.sc("ngIf",!l.authService.noInstall),f.Fb(1),f.sc("title",f.mc(11,25,"lang.next")),f.Fb(3),f.sc("stepControl",a.getFormGroup()),f.Fb(7),f.sc("title",f.mc(21,27,"lang.previous")),f.Fb(3),f.sc("title",f.mc(24,29,"lang.next"))("disabled",!a.isValidStep()),f.Fb(3),f.sc("stepControl",o.getFormGroup()),f.Fb(7),f.sc("title",f.mc(34,31,"lang.previous")),f.Fb(3),f.sc("title",f.mc(37,33,"lang.next"))("disabled",!o.isValidStep()),f.Fb(3),f.sc("stepControl",s.getFormGroup()),f.Fb(7),f.sc("title",f.mc(47,35,"lang.previous")),f.Fb(3),f.sc("title",f.mc(50,37,"lang.next"))("disabled",!s.isValidStep()),f.Fb(3),f.sc("stepControl",i.getFormGroup()),f.Fb(4),f.sc("appDatabase",o)("appWelcome",r),f.Fb(3),f.sc("title",f.mc(60,39,"lang.previous")),f.Fb(3),f.sc("title",f.mc(63,41,"lang.next"))("disabled",!i.isValidStep()),f.Fb(3),f.sc("stepControl",c.getFormGroup()),f.Fb(7),f.sc("title",f.mc(73,43,"lang.previous")),f.Fb(3),f.sc("title",f.mc(76,45,"lang.beginInstall"))("disabled",!c.isValidStep())}}var Wt,Ht,Xt,Kt=[{path:"",component:(Wt=function(){function e(n,r,a,o,s,i,c,l,p,u){t(this,e),this.translate=n,this.router=r,this.headerService=a,this.notify=o,this.appService=s,this.sortPipe=i,this.dialog=c,this.functionService=l,this.privilegeService=p,this.authService=u,this.loading=!0}return n(e,[{key:"ngOnInit",value:function(){this.headerService.hideSideBar=!0,this.authService.isAuth()||this.authService.noInstall?null===this.authService.getToken()||this.privilegeService.hasCurrentUserPrivilege("create_custom")?this.loading=!1:(this.router.navigate(["/login"]),this.notify.error(this.translate.instant("lang.mustPrivilegeToInstall"))):(this.router.navigate(["/login"]),this.notify.error(this.translate.instant("lang.mustConnectToInstall")))}},{key:"ngAfterViewInit",value:function(){$(".mat-horizontal-stepper-header-container").insertBefore(".bg-head-content"),$(".mat-step-icon").css("background-color","white"),$(".mat-step-icon").css("color","#135f7f"),$(".mat-step-label").css("color","white")}},{key:"isValidStep",value:function(){return!1}},{key:"initStep",value:function(t){this.stepContent.toArray()[t.selectedIndex].initStep()}},{key:"nextStep",value:function(){this.stepper.next()}},{key:"gotToLogin",value:function(){this.router.navigate(["/login"])}},{key:"endInstall",value:function(){var t=this,e=[];this.stepContent.toArray().forEach(function(t){e=e.concat(t.getInfoToInstall())}),e=this.sortPipe.transform(e,"installPriority"),this.dialog.open(M,{panelClass:"maarch-modal",disableClose:!0,width:"500px",data:e}).afterClosed().pipe(Object(V.a)(function(e){return!t.functionService.empty(e)}),Object(d.a)(function(t){}),Object(g.a)(function(e){return t.notify.handleErrors(e),Object(m.a)(!1)})).subscribe()}}]),e}(),Wt.\u0275fac=function(t){return new(t||Wt)(f.Tb(h.d),f.Tb(c.c),f.Tb(E.a),f.Tb(F.a),f.Tb(j.a),f.Tb(p.a),f.Tb(b.b),f.Tb(q.a),f.Tb(A.a),f.Tb(k.a))},Wt.\u0275cmp=f.Nb({type:Wt,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(f.ad(Lt,1),f.ad(Mt,1)),2&t&&(f.Dc(n=f.hc())&&(e.stepper=n.first),f.Dc(n=f.hc())&&(e.stepContent=n))},features:[f.Eb([{provide:l.h,useValue:{showError:!0}},p.a])],decls:7,vars:5,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-content"],[1,"container"],[1,"container-content",2,"overflow","hidden"],["linear","","style","height: 100vh;overflow: auto;",3,"selectionChange",4,"ngIf"],["linear","",2,"height","100vh","overflow","auto",3,"selectionChange"],["stepper",""],["label","install"],["matStepLabel",""],[1,"stepContainer"],[1,"stepContent"],["stepContent","","appWelcome",""],["mat-fab","","class","previousStepButton","color","primary",3,"title","click",4,"ngIf"],["mat-fab","","matStepperNext","","color","primary",1,"nextStepButton",3,"title"],[1,"fa","fa-arrow-right"],[3,"stepControl"],["appPrerequisite","","stepContent",""],["mat-fab","","matStepperPrevious","","color","primary",1,"previousStepButton",3,"title"],[1,"fa","fa-arrow-left"],["mat-fab","","matStepperNext","","color","primary",1,"nextStepButton",3,"title","disabled"],[3,"nextStep"],["appDatabase","","stepContent",""],["appDocservers","","stepContent",""],[3,"appDatabase","appWelcome"],["appCustomization","","stepContent",""],[3,"tiggerInstall"],["appUseradmin","","stepContent",""],["mat-fab","","color","accent",1,"nextStepButton",3,"title","disabled","click"],[1,"fas","fa-check-double"],["matStepperIcon","edit"],["matStepperIcon","done"],["matStepperIcon","error"],["mat-fab","","color","primary",1,"previousStepButton",3,"title","click"],[1,"fas","fa-home"],[1,"fa","fa-check","stepIcon"],[1,"fa","fa-times","stepIcon",2,"color","red","font-size","15px !important"]],template:function(t,e){1&t&&(f.Zb(0,"mat-sidenav-container",0),f.Zb(1,"mat-sidenav-content"),f.Zb(2,"div",1),f.Ub(3,"div",2),f.Yb(),f.Zb(4,"div",3),f.Zb(5,"div",4),f.Rc(6,$t,81,47,"mat-horizontal-stepper",5),f.Yb(),f.Yb(),f.Yb(),f.Yb()),2&t&&(f.Fb(3),f.Lb("fullContainer",e.appService.getViewMode()),f.Fb(1),f.Lb("fullContainer",e.appService.getViewMode()),f.Fb(2),f.sc("ngIf",!e.loading))},directives:[N.b,N.c,S.n,R.a,R.b,R.c,rt,I.b,R.f,D.a,pt,R.g,ft,ht,Ut,Pt,R.d],pipes:[h.c],styles:[".mat-stepper-horizontal{height:100%!important}.container[_ngcontent-%COMP%]{padding-left:80px!important;padding-right:80px!important}.previousStepButton[_ngcontent-%COMP%]{position:fixed;top:50%;left:10px;transform:translateY(-50%)}.previousStepButton[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:25px;height:auto;width:auto}.nextStepButton[_ngcontent-%COMP%]{position:fixed;top:50%;right:13px;transform:translateY(-50%)}.nextStepButton[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:25px;height:auto;width:auto} .mat-step-icon{background-color:#fff;color:#135f7f} .mat-step-label-active{opacity:1!important} .mat-step-label{color:#fff;opacity:.5}.stepIcon[_ngcontent-%COMP%]{font-size:10px!important;height:auto!important;width:auto!important} .mat-step-label{transition:all .2s} .mat-step-label-selected{font-size:160%;transition:all .2s;opacity:1}"]}),Wt)}],Jt=((Xt=function e(){t(this,e)}).\u0275fac=function(t){return new(t||Xt)},Xt.\u0275mod=f.Rb({type:Xt}),Xt.\u0275inj=f.Qb({imports:[[c.f.forChild(Kt)],c.f]}),Xt),Qt=((Ht=function e(n){t(this,e),n.setDefaultLang("fr")}).\u0275fac=function(t){return new(t||Ht)(f.dc(h.d))},Ht.\u0275mod=f.Rb({type:Ht}),Ht.\u0275inj=f.Qb({providers:[y],imports:[[s.a,i.a,Jt]]}),Ht)}}])}();