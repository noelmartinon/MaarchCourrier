function _createForOfIteratorHelper(t,e){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,c=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return r=t.done,t},e:function(t){c=!0,o=t},f:function(){try{r||null==a.return||a.return()}finally{if(c)throw o}}}}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"/JYr":function(t,e,a){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),o=a("q3Kh"),r=a("gTqA"),c=a("wjEo");e.exhaustMap=function t(e,a){return a?function(n){return n.pipe(t((function(t,n){return r.from(e(t,n)).pipe(o.map((function(e,i){return a(t,e,n,i)})))})))}:function(t){return t.lift(new l(e))}};var l=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.project))},t}(),s=function(t){function e(e,a){var n=t.call(this,e)||this;return n.project=a,n.hasSubscription=!1,n.hasCompleted=!1,n.index=0,n}return i(e,t),e.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},e.prototype.tryNext=function(t){var e,a=this.index++;try{e=this.project(t,a)}catch(n){return void this.destination.error(n)}this.hasSubscription=!0,this._innerSub(e)},e.prototype._innerSub=function(t){var e=new c.SimpleInnerSubscriber(this),a=this.destination;a.add(e);var n=c.innerSubscribe(t,e);n!==e&&a.add(n)},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(c.SimpleOuterSubscriber)},Dxa7:function(t,e,a){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),o=a("FWf1"),r=a("IKal"),c=a("aJGj");e.take=function(t){return function(e){return 0===t?c.empty():e.lift(new l(t))}};var l=function(){function t(t){if(this.total=t,this.total<0)throw new r.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.total))},t}(),s=function(t){function e(e,a){var n=t.call(this,e)||this;return n.total=a,n.count=0,n}return i(e,t),e.prototype._next=function(t){var e=this.total,a=++this.count;a<=e&&(this.destination.next(t),a===e&&(this.destination.complete(),this.unsubscribe()))},e}(o.Subscriber)},IKal:function(t,e,a){"use strict";e.ArgumentOutOfRangeError=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}()},NpuA:function(t,e,a){var n,i;void 0===(i="function"==typeof(n=function t(){"use strict";var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},a=!e.document&&!!e.postMessage,n=a&&/blob:/i.test((e.location||{}).protocol),i={},o=0,r={parse:function(a,n){var c=(n=n||{}).dynamicTyping||!1;if(V(c)&&(n.dynamicTypingFunction=c,c={}),n.dynamicTyping=c,n.transform=!!V(n.transform)&&n.transform,n.worker&&r.WORKERS_SUPPORTED){var l=function(){if(!r.WORKERS_SUPPORTED)return!1;var a,n,c=(a=e.URL||e.webkitURL||null,n=t.toString(),r.BLOB_URL||(r.BLOB_URL=a.createObjectURL(new Blob(["(",n,")();"],{type:"text/javascript"})))),l=new e.Worker(c);return l.onmessage=g,l.id=o++,i[l.id]=l}();return l.userStep=n.step,l.userChunk=n.chunk,l.userComplete=n.complete,l.userError=n.error,n.step=V(n.step),n.chunk=V(n.chunk),n.complete=V(n.complete),n.error=V(n.error),delete n.worker,void l.postMessage({input:a,config:n,workerId:l.id})}var p=null;return"string"==typeof a?p=n.download?new s(n):new b(n):!0===a.readable&&V(a.read)&&V(a.on)?p=new u(n):(e.File&&a instanceof File||a instanceof Object)&&(p=new d(n)),p.stream(a)},unparse:function(t,e){var a=!1,n=!0,i=",",o="\r\n",c='"',l=c+c,s=!1,d=null,b=!1;!function(){if("object"==typeof e){if("string"!=typeof e.delimiter||r.BAD_DELIMITERS.filter((function(t){return-1!==e.delimiter.indexOf(t)})).length||(i=e.delimiter),("boolean"==typeof e.quotes||"function"==typeof e.quotes||Array.isArray(e.quotes))&&(a=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(s=e.skipEmptyLines),"string"==typeof e.newline&&(o=e.newline),"string"==typeof e.quoteChar&&(c=e.quoteChar),"boolean"==typeof e.header&&(n=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");d=e.columns}void 0!==e.escapeChar&&(l=e.escapeChar+c),"boolean"==typeof e.escapeFormulae&&(b=e.escapeFormulae)}}();var u=new RegExp(f(c),"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return m(null,t,s);if("object"==typeof t[0])return m(d||p(t[0]),t,s)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:p(t.data[0])),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),m(t.fields||[],t.data||[],s);throw new Error("Unable to serialize unrecognized input");function p(t){if("object"!=typeof t)return[];var e=[];for(var a in t)e.push(a);return e}function m(t,e,a){var r="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var c=Array.isArray(t)&&0<t.length,l=!Array.isArray(e[0]);if(c&&n){for(var s=0;s<t.length;s++)0<s&&(r+=i),r+=g(t[s],s);0<e.length&&(r+=o)}for(var d=0;d<e.length;d++){var b=c?t.length:e[d].length,u=!1,p=c?0===Object.keys(e[d]).length:0===e[d].length;if(a&&!c&&(u="greedy"===a?""===e[d].join("").trim():1===e[d].length&&0===e[d][0].length),"greedy"===a&&c){for(var f=[],m=0;m<b;m++)f.push(e[d][l?t[m]:m]);u=""===f.join("").trim()}if(!u){for(var h=0;h<b;h++)0<h&&!p&&(r+=i),r+=g(e[d][c&&l?t[h]:h],h);d<e.length-1&&(!a||0<b&&!p)&&(r+=o)}}return r}function g(t,e){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);!0===b&&"string"==typeof t&&null!==t.match(/^[=+\-@].*$/)&&(t="'"+t);var n=t.toString().replace(u,l);return"boolean"==typeof a&&a||"function"==typeof a&&a(t,e)||Array.isArray(a)&&a[e]||function(t,e){for(var a=0;a<e.length;a++)if(-1<t.indexOf(e[a]))return!0;return!1}(n,r.BAD_DELIMITERS)||-1<n.indexOf(i)||" "===n.charAt(0)||" "===n.charAt(n.length-1)?c+n+c:n}}};if(r.RECORD_SEP=String.fromCharCode(30),r.UNIT_SEP=String.fromCharCode(31),r.BYTE_ORDER_MARK="\ufeff",r.BAD_DELIMITERS=["\r","\n",'"',r.BYTE_ORDER_MARK],r.WORKERS_SUPPORTED=!a&&!!e.Worker,r.NODE_STREAM_INPUT=1,r.LocalChunkSize=10485760,r.RemoteChunkSize=5242880,r.DefaultDelimiter=",",r.Parser=m,r.ParserHandle=p,r.NetworkStreamer=s,r.FileStreamer=d,r.StringStreamer=b,r.ReadableStreamStreamer=u,e.jQuery){var c=e.jQuery;c.fn.parse=function(t){var a=t.config||{},n=[];return this.each((function(t){if("INPUT"!==c(this).prop("tagName").toUpperCase()||"file"!==c(this).attr("type").toLowerCase()||!e.FileReader||!this.files||0===this.files.length)return!0;for(var i=0;i<this.files.length;i++)n.push({file:this.files[i],inputElem:this,instanceConfig:c.extend({},a)})})),i(),this;function i(){if(0!==n.length){var e,a,i,l=n[0];if(V(t.before)){var s=t.before(l.file,l.inputElem);if("object"==typeof s){if("abort"===s.action)return e=l.file,a=l.inputElem,i=s.reason,void(V(t.error)&&t.error({name:"AbortError"},e,a,i));if("skip"===s.action)return void o();"object"==typeof s.config&&(l.instanceConfig=c.extend(l.instanceConfig,s.config))}else if("skip"===s)return void o()}var d=l.instanceConfig.complete;l.instanceConfig.complete=function(t){V(d)&&d(t,l.file,l.inputElem),o()},r.parse(l.file,l.instanceConfig)}else V(t.complete)&&t.complete()}function o(){n.splice(0,1),i()}}}function l(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(t){var e=y(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new p(e),(this._handle.streamer=this)._config=e}).call(this,t),this.parseChunk=function(t,a){if(this.isFirstChunk&&V(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(t);void 0!==i&&(t=i)}this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+t;this._partialLine="";var c=this._handle.parse(o,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var l=c.meta.cursor;this._finished||(this._partialLine=o.substring(l-this._baseIndex),this._baseIndex=l),c&&c.data&&(this._rowCount+=c.data.length);var s=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(n)e.postMessage({results:c,workerId:r.WORKER_ID,finished:s});else if(V(this._config.chunk)&&!a){if(this._config.chunk(c,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);c=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(c.data),this._completeResults.errors=this._completeResults.errors.concat(c.errors),this._completeResults.meta=c.meta),this._completed||!s||!V(this._config.complete)||c&&c.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),s||c&&c.meta.paused||this._nextChunk(),c}this._halted=!0},this._sendError=function(t){V(this._config.error)?this._config.error(t):n&&this._config.error&&e.postMessage({workerId:r.WORKER_ID,error:t,finished:!1})}}function s(t){var e;(t=t||{}).chunkSize||(t.chunkSize=r.RemoteChunkSize),l.call(this,t),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),a||(e.onload=D(this._chunkLoaded,this),e.onerror=D(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var n in t)e.setRequestHeader(n,t[n])}this._config.chunkSize&&e.setRequestHeader("Range","bytes="+this._start+"-"+(this._start+this._config.chunkSize-1));try{e.send(this._config.downloadRequestBody)}catch(t){this._chunkError(t.message)}a&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(t){var e=t.getResponseHeader("Content-Range");return null===e?-1:parseInt(e.substring(e.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){this._sendError(new Error(e.statusText||t))}}function d(t){var e,a;(t=t||{}).chunkSize||(t.chunkSize=r.LocalChunkSize),l.call(this,t);var n="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,a=t.slice||t.webkitSlice||t.mozSlice,n?((e=new FileReader).onload=D(this._chunkLoaded,this),e.onerror=D(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var i=Math.min(this._start+this._config.chunkSize,this._input.size);t=a.call(t,this._start,i)}var o=e.readAsText(t,this._config.encoding);n||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function b(t){var e;l.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t,a=this._config.chunkSize;return a?(t=e.substring(0,a),e=e.substring(a)):(t=e,e=""),this._finished=!e,this.parseChunk(t)}}}function u(t){l.call(this,t=t||{});var e=[],a=!0,n=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){n&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):a=!0},this._streamData=D((function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),a&&(a=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}}),this),this._streamError=D((function(t){this._streamCleanUp(),this._sendError(t)}),this),this._streamEnd=D((function(){this._streamCleanUp(),n=!0,this._streamData("")}),this),this._streamCleanUp=D((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function p(t){var e,a,n,i=Math.pow(2,53),o=-i,c=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)(e[-+]?\d+)?\s*$/,l=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,s=this,d=0,b=0,u=!1,p=!1,g=[],h={data:[],errors:[],meta:{}};if(V(t.step)){var v=t.step;t.step=function(e){if(h=e,x())C();else{if(C(),0===h.data.length)return;d+=e.data.length,t.preview&&d>t.preview?a.abort():(h.data=h.data[0],v(h,s))}}}function D(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function C(){if(h&&n&&(W("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+r.DefaultDelimiter+"'"),n=!1),t.skipEmptyLines)for(var e=0;e<h.data.length;e++)D(h.data[e])&&h.data.splice(e--,1);return x()&&function(){if(h)if(Array.isArray(h.data[0])){for(var e=0;x()&&e<h.data.length;e++)h.data[e].forEach(a);h.data.splice(0,1)}else h.data.forEach(a);function a(e,a){V(t.transformHeader)&&(e=t.transformHeader(e,a)),g.push(e)}}(),function(){if(!h||!t.header&&!t.dynamicTyping&&!t.transform)return h;function e(e,a){var n,i=t.header?{}:[];for(n=0;n<e.length;n++){var o=n,r=e[n];t.header&&(o=n>=g.length?"__parsed_extra":g[n]),t.transform&&(r=t.transform(r,o)),r=M(o,r),"__parsed_extra"===o?(i[o]=i[o]||[],i[o].push(r)):i[o]=r}return t.header&&(n>g.length?W("FieldMismatch","TooManyFields","Too many fields: expected "+g.length+" fields but parsed "+n,b+a):n<g.length&&W("FieldMismatch","TooFewFields","Too few fields: expected "+g.length+" fields but parsed "+n,b+a)),i}var a=1;return!h.data.length||Array.isArray(h.data[0])?(h.data=h.data.map(e),a=h.data.length):h.data=e(h.data,0),t.header&&h.meta&&(h.meta.fields=g),b+=a,h}()}function x(){return t.header&&0===g.length}function M(e,a){return n=e,t.dynamicTypingFunction&&void 0===t.dynamicTyping[n]&&(t.dynamicTyping[n]=t.dynamicTypingFunction(n)),!0===(t.dynamicTyping[n]||t.dynamicTyping)?"true"===a||"TRUE"===a||"false"!==a&&"FALSE"!==a&&(function(t){if(c.test(t)){var e=parseFloat(t);if(o<e&&e<i)return!0}return!1}(a)?parseFloat(a):l.test(a)?new Date(a):""===a?null:a):a;var n}function W(t,e,a,n){var i={type:t,code:e,message:a};void 0!==n&&(i.row=n),h.errors.push(i)}this.parse=function(i,o,c){if(t.newline||(t.newline=function(t,e){t=t.substring(0,1048576);var a=new RegExp(f(e)+"([^]*?)"+f(e),"gm"),n=(t=t.replace(a,"")).split("\r"),i=t.split("\n");if(1===n.length||1<i.length&&i[0].length<n[0].length)return"\n";for(var o=0,r=0;r<n.length;r++)"\n"===n[r][0]&&o++;return o>=n.length/2?"\r\n":"\r"}(i,t.quoteChar||'"')),n=!1,t.delimiter)V(t.delimiter)&&(t.delimiter=t.delimiter(i),h.meta.delimiter=t.delimiter);else{var l=function(e,a,n,i,o){var c,l,s,d;o=o||[",","\t","|",";",r.RECORD_SEP,r.UNIT_SEP];for(var b=0;b<o.length;b++){var u=o[b],p=0,f=0,g=0;s=void 0;for(var h=new m({comments:i,delimiter:u,newline:a,preview:10}).parse(e),v=0;v<h.data.length;v++)if(n&&D(h.data[v]))g++;else{var y=h.data[v].length;f+=y,void 0!==s?0<y&&(p+=Math.abs(y-s),s=y):s=y}0<h.data.length&&(f/=h.data.length-g),(void 0===l||p<=l)&&(void 0===d||d<f)&&1.99<f&&(l=p,c=u,d=f)}return{successful:!!(t.delimiter=c),bestDelimiter:c}}(i,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);l.successful?t.delimiter=l.bestDelimiter:(n=!0,t.delimiter=r.DefaultDelimiter),h.meta.delimiter=t.delimiter}var s=y(t);return t.preview&&t.header&&s.preview++,e=i,a=new m(s),h=a.parse(e,o,c),C(),u?{meta:{paused:!0}}:h||{meta:{paused:!1}}},this.paused=function(){return u},this.pause=function(){u=!0,a.abort(),e=V(t.chunk)?"":e.substring(a.getCharIndex())},this.resume=function(){s.streamer._halted?(u=!1,s.streamer.parseChunk(e,!0)):setTimeout(s.resume,3)},this.aborted=function(){return p},this.abort=function(){p=!0,a.abort(),h.meta.aborted=!0,V(t.complete)&&t.complete(h),e=""}}function f(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(t){var e,a=(t=t||{}).delimiter,n=t.newline,i=t.comments,o=t.step,c=t.preview,l=t.fastMode,s=e=void 0===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(s=t.escapeChar),("string"!=typeof a||-1<r.BAD_DELIMITERS.indexOf(a))&&(a=","),i===a)throw new Error("Comment character same as delimiter");!0===i?i="#":("string"!=typeof i||-1<r.BAD_DELIMITERS.indexOf(i))&&(i=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var d=0,b=!1;this.parse=function(t,r,u){if("string"!=typeof t)throw new Error("Input must be a string");var p=t.length,m=a.length,g=n.length,h=i.length,v=V(o),y=[],D=[],C=[],x=d=0;if(!t)return F();if(l||!1!==l&&-1===t.indexOf(e)){for(var M=t.split(n),W=0;W<M.length;W++){if(d+=(C=M[W]).length,W!==M.length-1)d+=n.length;else if(u)return F();if(!i||C.substring(0,h)!==i){if(v){if(y=[],R(C.split(a)),L(),b)return F()}else R(C.split(a));if(c&&c<=W)return y=y.slice(0,c),F(!0)}}return F()}for(var O=t.indexOf(a,d),_=t.indexOf(n,d),S=new RegExp(f(s)+f(e),"g"),k=t.indexOf(e,d);;)if(t[d]!==e)if(i&&0===C.length&&t.substring(d,d+h)===i){if(-1===_)return F();_=t.indexOf(n,d=_+g),O=t.indexOf(a,d)}else{if(-1!==O&&(O<_||-1===_)){if(!(O<k)){C.push(t.substring(d,O)),O=t.indexOf(a,d=O+m);continue}var w=E(O,k,_);if(w&&void 0!==w.nextDelim){k=w.quoteSearch,C.push(t.substring(d,O=w.nextDelim)),O=t.indexOf(a,d=O+m);continue}}if(-1===_)break;if(C.push(t.substring(d,_)),Q(_+g),v&&(L(),b))return F();if(c&&y.length>=c)return F(!0)}else for(k=d,d++;;){if(-1===(k=t.indexOf(e,k+1)))return u||D.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:y.length,index:d}),P();if(k===p-1)return P(t.substring(d,k).replace(S,e));if(e!==s||t[k+1]!==s){if(e===s||0===k||t[k-1]!==s){-1!==O&&O<k+1&&(O=t.indexOf(a,k+1)),-1!==_&&_<k+1&&(_=t.indexOf(n,k+1));var I=T(-1===_?O:Math.min(O,_));if(t[k+1+I]===a){C.push(t.substring(d,k).replace(S,e)),t[d=k+1+I+m]!==e&&(k=t.indexOf(e,d)),O=t.indexOf(a,d),_=t.indexOf(n,d);break}var j=T(_);if(t.substring(k+1+j,k+1+j+g)===n){if(C.push(t.substring(d,k).replace(S,e)),Q(k+1+j+g),O=t.indexOf(a,d),k=t.indexOf(e,d),v&&(L(),b))return F();if(c&&y.length>=c)return F(!0);break}D.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:y.length,index:d}),k++}}else k++}return P();function R(t){y.push(t),x=d}function T(e){var a=0;if(-1!==e){var n=t.substring(k+1,e);n&&""===n.trim()&&(a=n.length)}return a}function P(e){return u||(void 0===e&&(e=t.substring(d)),C.push(e),d=p,R(C),v&&L()),F()}function Q(e){d=e,R(C),C=[],_=t.indexOf(n,d)}function F(t){return{data:y,errors:D,meta:{delimiter:a,linebreak:n,aborted:b,truncated:!!t,cursor:x+(r||0)}}}function L(){o(F()),y=[],D=[]}function E(n,i,o){var r={nextDelim:void 0,quoteSearch:void 0},c=t.indexOf(e,i+1);if(i<n&&n<c&&(c<o||-1===o)){var l=t.indexOf(a,c);if(-1===l)return r;c<l&&(c=t.indexOf(e,c+1)),r=E(l,c,o)}else r={nextDelim:n,quoteSearch:i};return r}},this.abort=function(){b=!0},this.getCharIndex=function(){return d}}function g(t){var e=t.data,a=i[e.workerId],n=!1;if(e.error)a.userError(e.error,e.file);else if(e.results&&e.results.data){var o={abort:function(){n=!0,h(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:v,resume:v};if(V(a.userStep)){for(var r=0;r<e.results.data.length&&(a.userStep({data:e.results.data[r],errors:e.results.errors,meta:e.results.meta},o),!n);r++);delete e.results}else V(a.userChunk)&&(a.userChunk(e.results,o,e.file),delete e.results)}e.finished&&!n&&h(e.workerId,e.results)}function h(t,e){var a=i[t];V(a.userComplete)&&a.userComplete(e),a.terminate(),delete i[t]}function v(){throw new Error("Not implemented.")}function y(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var a in t)e[a]=y(t[a]);return e}function D(t,e){return function(){t.apply(e,arguments)}}function V(t){return"function"==typeof t}return n&&(e.onmessage=function(t){var a=t.data;if(void 0===r.WORKER_ID&&a&&(r.WORKER_ID=a.workerId),"string"==typeof a.input)e.postMessage({workerId:r.WORKER_ID,results:r.parse(a.input,a.config),finished:!0});else if(e.File&&a.input instanceof File||a.input instanceof Object){var n=r.parse(a.input,a.config);n&&e.postMessage({workerId:r.WORKER_ID,results:n,finished:!0})}}),(s.prototype=Object.create(l.prototype)).constructor=s,(d.prototype=Object.create(l.prototype)).constructor=d,(b.prototype=Object.create(b.prototype)).constructor=b,(u.prototype=Object.create(l.prototype)).constructor=u,r})?n.apply(e,[]):n)||(t.exports=i)},aJGj:function(t,e,a){"use strict";var n=a("Q1FS");e.EMPTY=new n.Observable((function(t){return t.complete()})),e.empty=function(t){return t?function(t){return new n.Observable((function(e){return t.schedule((function(){return e.complete()}))}))}(t):e.EMPTY}},aPMI:function(t,e,a){"use strict";a.r(e),a.d(e,"AdministrationModule",(function(){return dx}));var n=a("vWc3"),i=a("cMWS"),o=a("tyNb"),r=a("LRne"),c=a("3Pt+"),l=a("JX91"),s=a("lJxs"),d=a("vkgz"),b=a("JIr8"),u=a("fXoL"),p=a("sYmb"),f=a("tk/3"),m=a("4zkx"),g=a("A6w4"),h=a("eiH7"),v=a("aEDk"),y=a("AXEc"),D=a("rH+9"),V=a("d7/a"),C=a("XhcP"),x=a("Ro8j"),M=a("zZ42"),W=a("F8Z3"),O=a("ofXK"),_=a("f0Cb"),S=a("kmnG"),k=a("qFsG"),w=a("Xa2L"),I=a("Wp6s"),j=a("FKr1"),R=a("bTqV"),T=a("1YbM"),P=["snav2"],Q=["searchServiceInput"];function F(t,e){1&t&&(u.Wb(0,"div",18),u.Rb(1,"mat-spinner",19),u.Vb())}function L(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-card",20),u.dc("click",(function(){u.Dc(a);var t=e.$implicit;return u.hc().goToSpecifiedAdministration(t)})),u.Wb(1,"div",21),u.Rb(2,"i",22),u.Vb(),u.Wb(3,"span",23),u.Qc(4),u.Vb(),u.Qc(5),u.ic(6,"translate"),u.Vb()}if(2&t){var n=e.$implicit;u.Db(2),u.Fb(n.style),u.Db(2),u.Rc(n.count),u.Db(1),u.Sc("\xa0 ",u.jc(6,5,n.label)," ")}}function E(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",24),u.dc("click",(function(){u.Dc(a);var t=e.$implicit;return u.hc().goToSpecifiedAdministration(t)})),u.ic(1,"translate"),u.Wb(2,"div",25),u.Wb(3,"span",26),u.Rb(4,"i"),u.Vb(),u.Wb(5,"span",27),u.Qc(6),u.ic(7,"translate"),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit;u.oc("joyrideStep",n.id)("title",u.jc(1,6,n.comment)),u.Db(4),u.Gb("avatarCount2 ",n.style,""),u.Db(2),u.Sc(" ",u.jc(7,8,n.label)," ")}}var A,U=function(t){return{width:t}},z=((A=function(){function t(e,a,n,i,o,r,l,s,d,b){_classCallCheck(this,t),this.translate=e,this.http=a,this.router=n,this.headerService=i,this.appService=o,this.privilegeService=r,this.latinisePipe=l,this.notify=s,this.functionService=d,this.featureTourService=b,this.loading=!1,this.shortcutsAdmin=[],this.organisationServices=[],this.productionServices=[],this.classementServices=[],this.supervisionServices=[],this.searchService=new c.i,this.administrations=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.administration")),this.organisationServices=this.privilegeService.getCurrentUserAdministrationsByUnit("organisation"),this.productionServices=this.privilegeService.getCurrentUserAdministrationsByUnit("production"),this.classementServices=this.privilegeService.getCurrentUserAdministrationsByUnit("classement"),this.supervisionServices=this.privilegeService.getCurrentUserAdministrationsByUnit("supervision"),this.administrations=this.organisationServices.concat(this.productionServices).concat(this.classementServices).concat(this.supervisionServices),this.shortcutsAdmin=this.administrations.filter((function(t){return["admin_users","admin_groups","manage_entities"].indexOf(t.id)>-1})).map((function(t){return Object.assign(Object.assign({},t),{count:0})})),this.getNbShortcuts(),this.filteredAdministrations=this.searchService.valueChanges.pipe(Object(l.a)(""),Object(s.a)((function(e){return t._filter(e,"administrations")}))),this.loading=!1,setTimeout((function(){t.searchServiceInput.nativeElement.focus()}),0)}},{key:"ngAfterViewInit",value:function(){"root_visible"!==this.headerService.user.mode&&"root_invisible"!==this.headerService.user.mode||this.featureTourService.init()}},{key:"goToSpecifiedAdministration",value:function(t){!0===t.angular?this.router.navigate([t.route]):window.location.assign(t.route)}},{key:"_filter",value:function(t,e){var a=this;if("string"==typeof t){var n=this.latinisePipe.transform(t.toLowerCase());return this[e].filter((function(t){return a.latinisePipe.transform(t.label.toLowerCase()).includes(n)}))}return this[e]}},{key:"getNbShortcuts",value:function(){var t=this;this.http.get("../rest/administration/details").pipe(Object(d.a)((function(e){t.functionService.empty(e.count.users)||(t.shortcutsAdmin.filter((function(t){return"admin_users"===t.id}))[0].count=e.count.users),t.functionService.empty(e.count.groups)||(t.shortcutsAdmin.filter((function(t){return"admin_groups"===t.id}))[0].count=e.count.groups),t.functionService.empty(e.count.entities)||(t.shortcutsAdmin.filter((function(t){return"manage_entities"===t.id}))[0].count=e.count.entities)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(r.a)(!1)}))).subscribe()}}]),t}()).\u0275fac=function(t){return new(t||A)(u.Qb(p.e),u.Qb(f.b),u.Qb(o.c),u.Qb(m.a),u.Qb(g.a),u.Qb(h.a),u.Qb(v.c),u.Qb(y.a),u.Qb(D.a),u.Qb(V.a))},A.\u0275cmp=u.Kb({type:A,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(P,!0),u.Kc(Q,!0)),2&t&&(u.yc(a=u.ec())&&(e.sidenavRight=a.first),u.yc(a=u.ec())&&(e.searchServiceInput=a.first))},decls:24,vars:22,consts:[[1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],["stepNumber","1","joyrideStep","firstStep","title","demoTour","text","Hi, Welcome to demo tour",1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content",2,"display","flex","flex-direction","column"],["class","loading",4,"ngIf"],[2,"display","grid","grid-template-columns","repeat(auto-fill, minmax(400px, 1fr))","gap","20px","padding","20px"],["class","countCard","matRipple","",3,"click",4,"ngFor","ngForOf"],[2,"padding","10px","font-size","10px","width","250px !important"],["matInput","",3,"formControl","placeholder"],["searchServiceInput",""],[2,"margin","20px","display","grid","grid-template-columns","repeat(auto-fill, minmax(300px, 1fr))","gap","20px","padding","20px","padding-top","0px","margin-top","0px"],["mat-button","","style","font-size:20px;height:80px;",3,"joyrideStep","title","click",4,"ngFor","ngForOf"],["position","end","autoFocus","false",1,"panel-right",2,"overflow-x","hidden",3,"fixedInViewport","opened","mode","ngStyle"],["snav2",""],[1,"loading"],[2,"margin","auto"],["matRipple","",1,"countCard",3,"click"],["mat-card-avatar","",1,"avatarCount",2,"margin-right","10px"],[2,"position","absolute"],[2,"font-size","40px"],["mat-button","",2,"font-size","20px","height","80px",3,"joyrideStep","title","click"],[2,"display","flex","align-items","center"],[2,"padding-right","10px"],[1,"countLabel",2,"white-space","initial","text-align","left"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Wb(1,"mat-sidenav-content"),u.Wb(2,"div",1),u.Wb(3,"div",2),u.Wb(4,"div",3),u.Rb(5,"header-left"),u.Vb(),u.Wb(6,"div",4),u.Rb(7,"header-right"),u.Vb(),u.Vb(),u.Rb(8,"div",5),u.Vb(),u.Wb(9,"div",6),u.Wb(10,"div",7),u.Oc(11,F,2,0,"div",8),u.Wb(12,"div",9),u.Oc(13,L,7,7,"mat-card",10),u.Vb(),u.Rb(14,"mat-divider"),u.Wb(15,"mat-form-field",11),u.Rb(16,"input",12,13),u.Vb(),u.Wb(18,"div",14),u.Oc(19,E,8,10,"button",15),u.ic(20,"sortBy"),u.ic(21,"async"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Rb(22,"mat-sidenav",16,17),u.Vb()),2&t&&(u.Db(3),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(2),u.oc("ngForOf",e.shortcutsAdmin),u.Db(3),u.oc("formControl",e.searchService)("placeholder",e.translate.instant("lang.filterBy")),u.Db(3),u.oc("ngForOf",u.kc(20,15,u.jc(21,18,e.filteredAdministrations),"label")),u.Db(3),u.oc("fixedInViewport",e.appService.getViewMode())("opened",(e.appService.getViewMode(),!1))("mode",e.appService.getViewMode()?"over":"side")("ngStyle",u.vc(20,U,e.appService.getViewMode()?"80%":"30%")))},directives:[C.e,C.f,x.a,M.a,W.a,O.t,O.s,_.a,S.c,k.b,c.d,c.u,c.j,C.d,O.w,w.c,I.a,j.u,I.c,R.b],pipes:[T.a,O.b,p.d],styles:[".adminArea[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap}.adminArea_1[_ngcontent-%COMP%]{flex:1}.adminArea_1[_ngcontent-%COMP%], .adminArea_2[_ngcontent-%COMP%], .adminArea_3[_ngcontent-%COMP%], .adminArea_4[_ngcontent-%COMP%]{overflow:hidden;padding:20px}.loading[_ngcontent-%COMP%]{display:flex;height:100%}.adminArea-label[_ngcontent-%COMP%]{font-size:20px;font-weight:bolder;opacity:.2;text-align:center}.adminArea-button[_ngcontent-%COMP%]{white-space:inherit;height:100px;line-height:20px} .autocompleteServices .mat-optgroup-label{position:-webkit-sticky;position:sticky;top:0;background:#fff;z-index:1}.countCard[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;height:100px;color:#fff;background:#135f7f;cursor:pointer}.avatarCount[_ngcontent-%COMP%]{color:#135f7f;font-size:20px;background:#fff}.avatarCount[_ngcontent-%COMP%], .avatarCount2[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:center;border-radius:40px;padding:10px}.avatarCount2[_ngcontent-%COMP%]{color:#fff;font-size:30px;background:#135f7f;width:55px!important;height:55px!important}.countLabel[_ngcontent-%COMP%]{color:#135f7f;font-size:16px}"]}),A),N=a("0IaG"),H=a("M9IT"),B=a("Dh3D"),X=a("I65S"),G=a("rNzc"),q=a("+0xr"),K=a("2c88"),J=a("pLZG"),Y=a("XqQ8"),Z=a("SIQe"),tt=a("5cI5"),et=a("/t3+"),at=a("1jcm"),nt=a("w9N8"),it=a("d3UM");function ot(t,e){1&t&&(u.Ub(0),u.Wb(1,"div",18),u.Rb(2,"mat-spinner"),u.Vb(),u.Tb())}function rt(t,e){if(1&t&&(u.Wb(0,"mat-option",32),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a),u.Db(1),u.Sc(" ","\t"===a?"TAB":a," ")}}function ct(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",28),u.dc("click",(function(){return u.Dc(a),u.hc(),u.zc(1).click()}))("onFileDropped",(function(t){return u.Dc(a),u.hc(2).dndUploadFile(t)})),u.Wb(1,"div"),u.Qc(2),u.ic(3,"translate"),u.Wb(4,"mat-form-field",29),u.dc("click",(function(t){return u.Dc(a),t.stopPropagation()})),u.Wb(5,"mat-label"),u.Qc(6),u.ic(7,"translate"),u.Vb(),u.Wb(8,"mat-select",30),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).currentDelimiter=t}))("click",(function(t){return u.Dc(a),t.stopPropagation()})),u.Oc(9,rt,2,2,"mat-option",31),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.Db(2),u.Sc(" ",u.jc(3,4,"lang.dndFileCsvDesc")," "),u.Db(4),u.Rc(u.jc(7,6,"lang.delimiter")),u.Db(2),u.oc("ngModel",n.currentDelimiter),u.Db(1),u.oc("ngForOf",n.delimiters)}}function lt(t,e){if(1&t&&(u.Wb(0,"mat-option",32),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a),u.Db(1),u.Sc(" ",a," ")}}function st(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-header-cell"),u.Rb(1,"i",41),u.ic(2,"translate"),u.Qc(3,"\xa0"),u.Wb(4,"b",42),u.ic(5,"translate"),u.Qc(6),u.Vb(),u.Qc(7," \xa0"),u.Rb(8,"i",43),u.Qc(9,"\xa0 "),u.Rb(10,"i",44),u.ic(11,"translate"),u.Qc(12,"\xa0"),u.Wb(13,"mat-form-field",45),u.dc("click",(function(t){return u.Dc(a),t.stopPropagation()})),u.ic(14,"translate"),u.Wb(15,"mat-select",46),u.dc("ngModelChange",(function(t){u.Dc(a);var e=u.hc().$implicit;return u.hc(3).associatedColmuns[e]=t}))("selectionChange",(function(t){u.Dc(a);var e=u.hc().$implicit;return u.hc(3).changeColumn(e,t.value)})),u.Rb(16,"mat-option",47),u.Oc(17,lt,2,2,"mat-option",31),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc().$implicit,i=u.hc(3);u.Db(1),u.oc("title",u.jc(2,7,"lang.dbColumn")),u.Db(3),u.oc("title",u.jc(5,9,"lang.dbColumn")),u.Db(2),u.Rc(n),u.Db(4),u.oc("title",u.jc(11,11,"lang.csvColumn")),u.Db(3),u.oc("title",u.jc(14,13,"lang.csvColumn")),u.Db(2),u.oc("ngModel",i.associatedColmuns[n]),u.Db(2),u.oc("ngForOf",i.csvColumns)}}function dt(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit,n=u.hc().$implicit;u.Db(1),u.Sc(" ",a[n]," ")}}function bt(t,e){if(1&t&&(u.Ub(0),u.Ub(1,38),u.Oc(2,st,18,15,"mat-header-cell",39),u.Oc(3,dt,2,1,"mat-cell",40),u.Tb(),u.Tb()),2&t){var a=e.$implicit;u.Db(1),u.oc("matColumnDef",a)}}function ut(t,e){1&t&&u.Rb(0,"mat-header-row")}function pt(t,e){1&t&&u.Rb(0,"mat-row")}function ft(t,e){if(1&t&&(u.Wb(0,"mat-table",33,34),u.Oc(2,bt,4,1,"ng-container",35),u.Oc(3,ut,1,0,"mat-header-row",36),u.Oc(4,pt,1,0,"mat-row",37),u.Vb()),2&t){var a=u.hc(2);u.oc("dataSource",a.dataSource),u.Db(2),u.oc("ngForOf",a.userColmuns),u.Db(1),u.oc("matHeaderRowDef",a.userColmuns),u.Db(1),u.oc("matRowDefColumns",a.userColmuns)}}function mt(t,e){if(1&t){var a=u.Xb();u.Wb(0,"input",19,20),u.dc("change",(function(t){return u.Dc(a),u.hc().uploadCsv(t)})),u.Vb(),u.Oc(2,ct,10,8,"div",21),u.Wb(3,"div",22),u.Wb(4,"div",23),u.Rb(5,"mat-paginator",24,25),u.Vb(),u.Vb(),u.Oc(7,ft,5,4,"mat-table",26),u.Rb(8,"div",27),u.ic(9,"translate"),u.Rb(10,"div",27),u.ic(11,"translate")}if(2&t){var n=u.hc();u.Db(2),u.oc("ngIf",0===n.csvData.length),u.Db(3),u.oc("length",100)("hidePageSize",!0)("pageSize",10),u.Db(2),u.oc("ngIf",n.csvData.length>0),u.Db(1),u.oc("innerHTML",u.jc(9,7,"lang.infoImportusers"),u.Ec),u.Db(2),u.oc("innerHTML",u.jc(11,9,"lang.infoImportusers2"),u.Ec)}}function gt(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",48),u.dc("click",(function(){return u.Dc(a),u.hc().onSubmit()})),u.Qc(1),u.ic(2,"translate"),u.Vb()}if(2&t){var n=u.hc();u.oc("disabled",n.loading),u.Db(1),u.Rc(u.jc(2,2,"lang.validate"))}}var ht,vt=((ht=function(){function t(e,a,n,i,o,r,c,l,s){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.functionsService=i,this.localStorage=o,this.headerService=r,this.dialog=c,this.dialogRef=l,this.data=s,this.loading=!1,this.userColmuns=["id","user_id","firstname","lastname","mail","phone"],this.csvColumns=[],this.delimiters=[";",",","\t"],this.currentDelimiter=";",this.associatedColmuns={},this.dataSource=new q.p(null),this.hasHeader=!0,this.csvData=[],this.userData=[],this.countAll=0,this.countAdd=0,this.countUp=0}return _createClass(t,[{key:"ngOnInit",value:function(){this.setConfiguration()}},{key:"changeColumn",value:function(t,e){var a=this;this.userData=[];for(var n=this.hasHeader?1:0;n<this.csvData.length;n++){var i=this.csvData[n];this.userData.push({id:"id"===t?i[this.csvColumns.filter((function(t){return t===e}))[0]]:i[this.associatedColmuns.id],user_id:"user_id"===t?i[this.csvColumns.filter((function(t){return t===e}))[0]]:i[this.associatedColmuns.user_id],firstname:"firstname"===t?i[this.csvColumns.filter((function(t){return t===e}))[0]]:i[this.associatedColmuns.firstname],lastname:"lastname"===t?i[this.csvColumns.filter((function(t){return t===e}))[0]]:i[this.associatedColmuns.lastname],mail:"mail"===t?i[this.csvColumns.filter((function(t){return t===e}))[0]]:i[this.associatedColmuns.mail],phone:"phone"===t?i[this.csvColumns.filter((function(t){return t===e}))[0]]:i[this.associatedColmuns.phone]})}this.countAdd=this.csvData.filter((function(t,e){return e>0&&a.functionsService.empty(t[a.associatedColmuns.id])})).length,this.countUp=this.csvData.filter((function(t,e){return e>0&&!a.functionsService.empty(t[a.associatedColmuns.id])})).length,setTimeout((function(){a.dataSource=new q.p(a.userData),a.dataSource.paginator=a.paginator}),0)}},{key:"uploadCsv",value:function(t){var e=this;if(t.target.files&&t.target.files[0]&&("text/csv"===t.target.files[0].type||"application/vnd.ms-excel"===t.target.files[0].type)){this.loading=!0;var a=[],n=new FileReader;n.readAsText(t.target.files[0],"ISO-8859-1"),n.onload=function(t){(a=(a=t.target.result.split("\n")).filter((function(t){return""!==t})))[0].split(e.currentDelimiter).map((function(t){return t.replace(/"/gi,"").trim()})).length>=e.userColmuns.length-1?function(){var t={};e.setCsvColumns(a[0].split(e.currentDelimiter).map((function(t){return t.replace(/"/gi,"").trim()}))),e.countAll=e.hasHeader?a.length-1:a.length;for(var n=0;n<a.length;n++)t={},a[n].split(e.currentDelimiter).map((function(t){return t.replace(/"/gi,"").trim()})).forEach((function(a,n){t[e.csvColumns[n]]=a})),e.csvData.push(t);e.initData(),e.countAdd=e.csvData.filter((function(t,a){return a>0&&e.functionsService.empty(t[e.associatedColmuns.id])})).length,e.countUp=e.csvData.filter((function(t,a){return a>0&&!e.functionsService.empty(t[e.associatedColmuns.id])})).length,e.localStorage.save("importUsersFields_"+e.headerService.user.id,e.currentDelimiter)}():e.notify.error(e.translate.instant("lang.mustAtLeastMinValues")),e.loading=!1}}else this.dialog.open(Z.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.notAllowedExtension")+" !",msg:this.translate.instant("lang.file")+" : <b>"+t.target.files[0].name+"</b>, "+this.translate.instant("lang.type")+" : <b>"+t.target.files[0].type+"</b><br/><br/><u>"+this.translate.instant("lang.allowedExtensions")+"</u> : <br/>text/csv"}})}},{key:"setCsvColumns",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.csvColumns=e.filter((function(e){return t.functionsService.empty(e)})).length>0?Object.keys(e).map((function(t,e){return""+e})):e}},{key:"toggleHeader",value:function(){var t=this;this.hasHeader=!this.hasHeader,this.countAll=this.hasHeader?this.csvData.length-1:this.csvData.length,this.hasHeader?(this.countAdd=this.csvData.filter((function(e,a){return a>0&&t.functionsService.empty(e[t.associatedColmuns.id])})).length,this.countUp=this.csvData.filter((function(e,a){return a>0&&!t.functionsService.empty(e[t.associatedColmuns.id])})).length):(this.countAdd=this.csvData.filter((function(e,a){return t.functionsService.empty(e[t.associatedColmuns.id])})).length,this.countUp=this.csvData.filter((function(e,a){return!t.functionsService.empty(e[t.associatedColmuns.id])})).length),this.initData()}},{key:"initData",value:function(){var t=this;this.userData=[];for(var e=this.hasHeader?1:0;e<this.csvData.length;e++){var a=this.csvData[e];this.associatedColmuns.id=this.csvColumns[0],this.associatedColmuns.user_id=this.csvColumns[1],this.associatedColmuns.firstname=this.csvColumns[2],this.associatedColmuns.lastname=this.csvColumns[3],this.associatedColmuns.mail=this.csvColumns[4],this.associatedColmuns.phone=this.csvColumns[5],this.userData.push({id:a[this.csvColumns[0]],user_id:a[this.csvColumns[1]],firstname:a[this.csvColumns[2]],lastname:a[this.csvColumns[3]],mail:a[this.csvColumns[4]],phone:a[this.csvColumns[5]]})}setTimeout((function(){t.dataSource=new q.p(t.userData),t.dataSource.paginator=t.paginator}),0)}},{key:"dndUploadFile",value:function(t){this.uploadCsv({target:{files:[t[0]]}})}},{key:"onSubmit",value:function(){var t=this,e=[],a="";this.translate.get("lang.confirmImportUsers",{0:this.countAll}).subscribe((function(e){a=e+" ?<br/><br/>",a+="<ul><li><b>".concat(t.countAdd,"</b> ").concat(t.translate.instant("lang.additions"),"</li><li><b>").concat(t.countUp,"</b> ").concat(t.translate.instant("lang.modifications"),"</li></ul>")}));var n=this.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.import"),msg:a}});n.afterClosed().pipe(Object(J.a)((function(t){return"ok"===t})),Object(d.a)((function(){t.loading=!0,t.csvData.forEach((function(a,n){(t.hasHeader&&n>0||!t.hasHeader)&&e.push({id:a[t.associatedColmuns.id],user_id:a[t.associatedColmuns.user_id],firstname:a[t.associatedColmuns.firstname],lastname:a[t.associatedColmuns.lastname],mail:a[t.associatedColmuns.mail],phone:a[t.associatedColmuns.phone]})}))})),Object(Y.a)((function(){return t.http.put("../rest/users/import",{users:e})})),Object(d.a)((function(e){var a="";e.warnings.count>0&&(a="<br/>".concat(e.warnings.count," ").concat(t.translate.instant("lang.withWarnings"),"  : <ul>"),e.warnings.details.forEach((function(e){a+="<li> ".concat(t.translate.instant("lang."+e.lang)," (").concat(t.translate.instant("lang.line")," : ").concat(t.hasHeader?e.index+2:e.index+1,")</li>")})),a+="</ul>"),e.errors.count>0&&(a+="<br/>".concat(e.errors.count," ").concat(t.translate.instant("lang.withErrors"),"  : <ul>"),e.errors.details.forEach((function(e){a+="<li> ".concat(t.translate.instant("lang."+e.lang)," (").concat(t.translate.instant("lang.line")," : ").concat(t.hasHeader?e.index+2:e.index+1,")</li>")})),a+="</ul>"),n=t.dialog.open(Z.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:t.translate.instant("lang.import"),msg:"<b>"+e.success+"</b> / <b>"+t.countAll+"</b> "+t.translate.instant("lang.importedUsers")+"."+a}})})),Object(Y.a)((function(){return n.afterClosed()})),Object(d.a)((function(){t.dialogRef.close("success")})),Object(b.a)((function(e){return t.loading=!1,t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"setConfiguration",value:function(){null!==this.localStorage.get("importUsersFields_"+this.headerService.user.id)&&(this.currentDelimiter=this.localStorage.get("importUsersFields_"+this.headerService.user.id))}}]),t}()).\u0275fac=function(t){return new(t||ht)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(D.a),u.Qb(tt.a),u.Qb(m.a),u.Qb(N.b),u.Qb(N.h),u.Qb(N.a))},ht.\u0275cmp=u.Kb({type:ht,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&u.Xc(H.a,!0),2&t&&u.yc(a=u.ec())&&(e.paginator=a.first)},decls:37,vars:28,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"import-tool"],[2,"flex","1"],["color","primary",3,"checked","change"],[2,"flex","1","text-align","center"],["color","primary",1,"fa","fa-users"],["color","primary"],["color","primary",1,"fa","fa-user-plus"],[2,"flex","1","text-align","right"],["color","primary",1,"fa","fa-user-edit"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"divider-modal"],["mat-dialog-actions","",1,"actions"],["mat-raised-button","","mat-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","mat-button","",3,"disabled","mat-dialog-close"],[1,"loader"],["type","file","name","files[]","id","uploadFile","accept",".csv",2,"display","none",3,"change"],["uploadFile",""],["appUploadFileDragDrop","","class","dndFile",3,"click","onFileDropped",4,"ngIf"],[1,"row",2,"margin","0px"],[1,"col-md-12"],[3,"length","hidePageSize","pageSize"],["paginator",""],[3,"dataSource",4,"ngIf"],[1,"alert-message","alert-message-info",2,"min-width","100%",3,"innerHTML"],["appUploadFileDragDrop","",1,"dndFile",3,"click","onFileDropped"],["appearance","outline",2,"font-size","14px",3,"click"],[3,"ngModel","ngModelChange","click"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"dataSource"],["table",""],[4,"ngFor","ngForOf"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],[4,"matHeaderCellDef"],[4,"matCellDef"],["color","primary",1,"fas","fa-database",3,"title"],["color","primary",3,"title"],[1,"fas","fa-arrows-alt-h"],[1,"fas","fa-file-csv",3,"title"],[2,"width","80px !important",3,"title","click"],[3,"ngModel","ngModelChange","selectionChange"],["value",""],["mat-raised-button","","mat-button","","color","primary",3,"disabled","click"]],template:function(t,e){if(1&t&&(u.Wb(0,"div",0),u.Wb(1,"h1",1),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"div",2),u.Wb(5,"mat-toolbar",3),u.Wb(6,"span",4),u.Wb(7,"mat-slide-toggle",5),u.dc("change",(function(){return e.toggleHeader()})),u.Qc(8),u.ic(9,"translate"),u.Vb(),u.Vb(),u.Wb(10,"span",6),u.Rb(11,"i",7),u.Qc(12),u.ic(13,"translate"),u.Wb(14,"b",8),u.Qc(15),u.Vb(),u.Vb(),u.Wb(16,"span",6),u.Rb(17,"i",9),u.Qc(18),u.ic(19,"translate"),u.Wb(20,"b",8),u.Qc(21),u.Vb(),u.Vb(),u.Wb(22,"span",10),u.Rb(23,"i",11),u.Qc(24),u.ic(25,"translate"),u.Wb(26,"b",8),u.Qc(27),u.Vb(),u.Vb(),u.Vb(),u.Oc(28,ot,3,0,"ng-container",12),u.Oc(29,mt,12,11,"ng-template",null,13,u.Pc),u.Vb(),u.Rb(31,"span",14),u.Wb(32,"div",15),u.Oc(33,gt,3,4,"button",16),u.Wb(34,"button",17),u.Qc(35),u.ic(36,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t){var a=u.zc(30);u.Db(2),u.Rc(u.jc(3,16,"lang.usersImport")),u.Db(3),u.Ib("hide",0===e.csvData.length||e.loading),u.Db(2),u.oc("checked",e.hasHeader),u.Db(1),u.Rc(u.jc(9,18,"lang.csvHeader")),u.Db(4),u.Sc("\xa0",u.jc(13,20,"lang.usersOfFile")," : "),u.Db(3),u.Rc(e.countAll),u.Db(3),u.Sc("\xa0",u.jc(19,22,"lang.additions")," : "),u.Db(3),u.Rc(e.countAdd),u.Db(3),u.Sc("\xa0",u.jc(25,24,"lang.modifications")," : "),u.Db(3),u.Rc(e.countUp),u.Db(1),u.oc("ngIf",e.loading)("ngIfElse",a),u.Db(5),u.oc("ngIf",e.csvData.length>0),u.Db(1),u.oc("disabled",e.loading),u.Db(1),u.Rc(u.jc(36,26,"lang.cancel"))}},directives:[N.i,N.f,et.a,at.a,O.t,N.c,R.b,N.d,w.c,H.a,nt.a,S.c,S.g,it.a,c.u,c.x,O.s,j.p,q.o,q.k,q.n,q.c,q.i,q.b,q.h,q.a,q.j,q.m],pipes:[p.d],styles:[".loader[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center;justify-content:center}.hide[_ngcontent-%COMP%]{display:none}.import-tool[_ngcontent-%COMP%]{font-size:14px}.dndFile[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;margin:0;justify-content:center;font-size:30px;opacity:.5!important;cursor:pointer}"]}),ht),yt=a("mrSG"),Dt=a("nYR2"),Vt=["listFilter"];function Ct(t,e){1&t&&(u.Wb(0,"div",13),u.Rb(1,"mat-spinner"),u.Vb())}function xt(t,e){if(1&t&&(u.Wb(0,"mat-option",14),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a),u.Db(1),u.Sc(" ",a," ")}}function Mt(t,e){if(1&t&&(u.Wb(0,"mat-option",14),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a),u.Db(1),u.Sc(" ",a," ")}}function Wt(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",15),u.Wb(1,"mat-form-field",5),u.Wb(2,"mat-label"),u.Qc(3),u.ic(4,"translate"),u.Vb(),u.Wb(5,"mat-select",16),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().exportModel.delimiter=t})),u.ic(6,"translate"),u.Oc(7,Mt,2,2,"mat-option",7),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc();u.Db(3),u.Rc(u.jc(4,5,"lang.delimiter")),u.Db(2),u.pc("placeholder",u.jc(6,7,"lang.delimiter")),u.oc("ngModel",n.exportModel.delimiter)("disabled","csv"!=n.exportModel.format),u.Db(2),u.oc("ngForOf",n.delimiters)}}var Ot,_t,St=((Ot=function(){function t(e,a,n,i,o,r){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.data=i,this.localStorage=o,this.headerService=r,this.loading=!1,this.loadingExport=!1,this.delimiters=[";",",","TAB"],this.formats=["csv"],this.exportModel={delimiter:";",format:"csv"}}return _createClass(t,[{key:"ngOnInit",value:function(){return Object(yt.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.setConfiguration();case 1:case"end":return t.stop()}}),t,this)})))}},{key:"exportData",value:function(){var t=this;this.localStorage.save("exportUsersFields_"+this.headerService.user.id,JSON.stringify(this.exportModel)),this.loadingExport=!0,this.http.put("../rest/users/export",this.exportModel,{responseType:"blob"}).pipe(Object(d.a)((function(e){if("text/html"!==e.type){var a,n,i,o,r=document.createElement("a");r.href=window.URL.createObjectURL(e),n=(a=new Date).getDate(),i=a.getMonth()+1,o=a.getFullYear(),n<10&&(n="0"+n),i<10&&(i="0"+i),a=n+"-"+i+"-"+o,r.setAttribute("download","export_users_maarch_"+a+"."+t.exportModel.format.toLowerCase()),document.body.appendChild(r),r.click()}else alert(t.translate.instant("lang.tooMuchDatas"))})),Object(Dt.a)((function(){return t.loadingExport=!1})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"setConfiguration",value:function(){null!==this.localStorage.get("exportUsersFields_"+this.headerService.user.id)&&(this.exportModel.delimiter=JSON.parse(this.localStorage.get("exportUsersFields_"+this.headerService.user.id)).delimiter)}}]),t}()).\u0275fac=function(t){return new(t||Ot)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(N.a),u.Qb(tt.a),u.Qb(m.a))},Ot.\u0275cmp=u.Kb({type:Ot,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&u.Kc(Vt,!0),2&t&&u.yc(a=u.ec())&&(e.listFilter=a.first)},decls:24,vars:23,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["mat-dialog-content",""],["class","loader",4,"ngIf"],[1,"row"],["appearance","outline"],[3,"placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","col-md-9",4,"ngIf"],[1,"divider-modal"],["mat-dialog-actions","",1,"actions"],["mat-raised-button","","mat-button","","color","primary",3,"click"],["mat-raised-button","","mat-button","",3,"mat-dialog-close"],[1,"loader"],[3,"value"],[1,"col-md-9"],[3,"placeholder","ngModel","disabled","ngModelChange"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"h1",1),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"div",2),u.Oc(5,Ct,2,0,"div",3),u.Wb(6,"div",4),u.Wb(7,"div"),u.Wb(8,"mat-form-field",5),u.Wb(9,"mat-label"),u.Qc(10),u.ic(11,"translate"),u.Vb(),u.Wb(12,"mat-select",6),u.dc("ngModelChange",(function(t){return e.exportModel.format=t})),u.ic(13,"translate"),u.Oc(14,xt,2,2,"mat-option",7),u.Vb(),u.Vb(),u.Vb(),u.Oc(15,Wt,8,9,"div",8),u.Vb(),u.Vb(),u.Rb(16,"span",9),u.Wb(17,"div",10),u.Wb(18,"button",11),u.dc("click",(function(){return e.exportData()})),u.Qc(19),u.ic(20,"translate"),u.Vb(),u.Wb(21,"button",12),u.Qc(22),u.ic(23,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(2),u.Rc(u.jc(3,13,"lang.exportDatas")),u.Db(3),u.oc("ngIf",e.loadingExport),u.Db(2),u.Ib("col-md-12","csv"!=e.exportModel.format)("col-md-3","csv"==e.exportModel.format),u.Db(3),u.Rc(u.jc(11,15,"lang.format")),u.Db(2),u.pc("placeholder",u.jc(13,17,"lang.format")),u.oc("ngModel",e.exportModel.format),u.Db(2),u.oc("ngForOf",e.formats),u.Db(1),u.oc("ngIf","csv"==e.exportModel.format),u.Db(4),u.Rc(u.jc(20,19,"lang.toExport")),u.Db(3),u.Rc(u.jc(23,21,"lang.cancel")))},directives:[N.i,N.f,O.t,S.c,S.g,it.a,c.u,c.x,O.s,N.c,R.b,N.d,w.c,j.p],pipes:[p.d],styles:[".mat-dialog-container{position:relative}.mat-dialog-content[_ngcontent-%COMP%]{min-height:150px;padding-bottom:10px;overflow-x:hidden}.actions[_ngcontent-%COMP%], .loader[_ngcontent-%COMP%]{justify-content:center}.loader[_ngcontent-%COMP%]{position:absolute;display:flex;width:100%;left:0;top:0;height:100%;background:hsla(0,0%,100%,.6);z-index:1;align-items:center}"]}),Ot),kt=a("pWCv"),wt=a("6eB1"),It=a("RmLz"),jt=((_t=function(){function t(e,a,n,i){_classCallCheck(this,t),this.notify=e,this.headerService=a,this.functionsService=n,this.localStorage=i,this.filters={},this.defaultFilters={admin_users:{sort:"user_id",sortDirection:"asc",page:0,field:""},admin_actions:{sort:"id",sortDirection:"asc",page:0,field:""},admin_baskets:{sort:"basket_id",sortDirection:"asc",page:0,field:""},admin_contacts_groups:{sort:"label",sortDirection:"asc",page:0,field:""},admin_listmodels:{sort:"title",sortDirection:"asc",page:0,field:""},admin_groups:{sort:"group_desc",sortDirection:"asc",page:0,field:""},admin_indexing_models:{sort:"label",sortDirection:"asc",page:0,field:""},admin_notif:{sort:"notification_id",sortDirection:"asc",page:0,field:""},admin_parameters:{sort:"id",sortDirection:"asc",page:0,field:""},admin_priorities:{sort:"label",sortDirection:"asc",page:0,field:""},admin_shippings:{sort:"label",sortDirection:"asc",page:0,field:""},admin_status:{sort:"label_status",sortDirection:"asc",page:0,field:""},admin_tag:{sort:"label",sortDirection:"asc",page:0,field:""},admin_templates:{sort:"template_label",sortDirection:"asc",page:0,field:""},admin_alfresco:{sort:"label",sortDirection:"asc",page:0,field:""},admin_contacts_list:{sort:"lastname",sortDirection:"asc",page:0,field:""},admin_regitered_mail_issuing_site:{sort:"accountNumber",sortDirection:"asc",page:0,field:""},admin_regitered_mail:{sort:"rangeNumber",sortDirection:"asc",page:0,field:""}},this.searchTerm=new c.i(""),this.currentAdminId="",null!==this.localStorage.get("filtersAdmin_"+this.headerService.user.id)&&(this.filters=JSON.parse(this.localStorage.get("filtersAdmin_"+this.headerService.user.id)))}return _createClass(t,[{key:"setAdminId",value:function(t){this.currentAdminId=t}},{key:"setDataSource",value:function(t,e,a,n,i){var o=this;this.currentAdminId=t,this.searchTerm=new c.i(""),this.searchTerm.valueChanges.pipe(Object(kt.tap)((function(t){o.setFilter("field",t),o.saveFilter(o.filters[o.currentAdminId]),t=(t=t.trim()).toLowerCase(),setTimeout((function(){o.dataSource.filter=t}),0),o.dataSource.filterPredicate=function(t,e){return o.functionsService.filterUnSensitive(t,e,o.filterColumns)}}))).subscribe(),this.filterColumns=i,this.dataSource=new q.p(e),this.dataSource.paginator=n,this.dataSource.sortingDataAccessor=this.functionsService.listSortingDataAccessor,this.functionsService.empty(this.getFilter())&&this.saveDefaultFilter(),n.pageIndex=this.getFilter("page"),this.dataSource.sort=a;var r=document.getElementsByClassName("mat-column-"+this.getFilter("sort"))[0];r.click(),"desc"===this.getFilter("sortDirection")&&r.click(),this.searchTerm.setValue(this.getFilter("field")),Object(wt.merge)(a.sortChange,n.page).pipe(Object(It.startWith)({}),Object(kt.tap)((function(){o.saveFilter({sort:a.active,sortDirection:a.direction,page:n.pageIndex,field:o.getFilter("field")})})),Object(G.catchError)((function(t){return o.notify.handleSoftErrors(t),Object(X.of)(!1)}))).subscribe()}},{key:"saveDefaultFilter",value:function(){this.saveFilter(this.defaultFilters[this.currentAdminId])}},{key:"setFilter",value:function(t,e){this.filters[this.currentAdminId][t]=e}},{key:"saveFilter",value:function(t){this.filters[this.currentAdminId]=t,this.localStorage.save("filtersAdmin_"+this.headerService.user.id,JSON.stringify(this.filters))}},{key:"getFilterField",value:function(){return this.searchTerm}},{key:"getDataSource",value:function(){return this.dataSource}},{key:"getFilter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.functionsService.empty(this.filters[this.currentAdminId])?null:this.functionsService.empty(t)?this.functionsService.empty(this.filters[this.currentAdminId])?"":this.filters[this.currentAdminId]:this.functionsService.empty(this.filters[this.currentAdminId][t])?"":this.filters[this.currentAdminId][t]}}]),t}()).\u0275fac=function(t){return new(t||_t)(u.ac(y.a),u.ac(m.a),u.ac(D.a),u.ac(tt.a))},_t.\u0275prov=u.Mb({token:_t,factory:_t.\u0275fac}),_t),Rt=a("MutI"),Tt=a("NFeN"),Pt=a("jaxi"),Qt=a("Qu3c"),Ft=a("63qU"),Lt=["adminMenuTemplate"];function Et(t,e){1&t&&u.Rb(0,"mat-divider")}function At(t,e){if(1&t&&(u.Wb(0,"mat-nav-list"),u.Wb(1,"h3",11),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"p",19),u.Qc(5),u.ic(6,"translate"),u.Vb(),u.Wb(7,"p",19),u.Qc(8),u.ic(9,"translate"),u.Vb(),u.Wb(10,"p",19),u.Qc(11),u.ic(12,"translate"),u.Vb(),u.Vb()),2&t){var a=u.hc(2);u.Db(2),u.Rc(u.jc(3,7,"lang.quota")),u.Db(3),u.Tc("",u.jc(6,9,"lang.actives")," : ",a.quota.actives,""),u.Db(3),u.Tc("",u.jc(9,11,"lang.inactives")," : ",a.quota.inactives,""),u.Db(3),u.Tc("",u.jc(12,13,"lang.quota")," : ",a.quota.userQuota,"")}}function Ut(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-nav-list"),u.Wb(1,"h3",11),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"a",12),u.Rb(5,"mat-icon",13),u.Wb(6,"p",14),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Wb(9,"a",15),u.dc("click",(function(){return u.Dc(a),u.hc().openUsersExportModal()})),u.Rb(10,"mat-icon",16),u.Wb(11,"p",14),u.Qc(12),u.ic(13,"translate"),u.Vb(),u.Vb(),u.Wb(14,"a",15),u.dc("click",(function(){return u.Dc(a),u.hc().openUsersImportModal()})),u.Rb(15,"mat-icon",17),u.Wb(16,"p",14),u.Qc(17),u.ic(18,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Rb(19,"mat-divider"),u.Oc(20,Et,1,0,"mat-divider",18),u.Oc(21,At,13,15,"mat-nav-list",18)}if(2&t){var n=u.hc();u.Db(2),u.Rc(u.jc(3,6,"lang.actions")),u.Db(5),u.Sc(" ",u.jc(8,8,"lang.add")," "),u.Db(5),u.Sc(" ",u.jc(13,10,"lang.usersExport")," "),u.Db(5),u.Sc(" ",u.jc(18,12,"lang.usersImport")," "),u.Db(3),u.oc("ngIf",n.quota.userQuota),u.Db(1),u.oc("ngIf",n.quota.userQuota)}}function zt(t,e){1&t&&(u.Wb(0,"div",20),u.Rb(1,"mat-spinner",21),u.Vb())}function $t(t,e){if(1&t&&(u.Wb(0,"mat-header-cell",48),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=u.hc(2);u.Ib("hide-for-mobile",a.appService.getViewMode()),u.Db(1),u.Sc("",u.jc(2,3,"lang.technicalId")," ")}}function Nt(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.Ib("hide-for-mobile",n.appService.getViewMode()),u.Db(1),u.Sc(" ",a.id," ")}}function Ht(t,e){if(1&t&&(u.Wb(0,"mat-header-cell",48),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=u.hc(2);u.Ib("hide-for-mobile",a.appService.getViewMode()),u.Db(1),u.Rc(u.jc(2,3,"lang.id"))}}function Bt(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.Ib("hide-for-mobile",n.appService.getViewMode()),u.Db(1),u.Sc(" ",a.user_id," ")}}function Xt(t,e){1&t&&(u.Wb(0,"mat-header-cell",48),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.lastname")))}function Gt(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.lastname," ")}}function qt(t,e){1&t&&(u.Wb(0,"mat-header-cell",48),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.firstname")))}function Kt(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.firstname," ")}}function Jt(t,e){1&t&&(u.Wb(0,"mat-header-cell",48),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.status")))}var Yt=function(){return["SPD","ABS"]},Zt=function(t,e){return{statusUserLabelWarn:t,statusUserLabelPrimary:e}};function te(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Wb(1,"span",49),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.oc("ngClass",u.wc(6,Zt,u.uc(4,Yt).indexOf(a.status)>-1,-1==u.uc(5,Yt).indexOf(a.status))),u.Db(1),u.Rc(u.jc(3,2,"lang.user"+a.status))}}function ee(t,e){if(1&t&&(u.Wb(0,"mat-header-cell",48),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=u.hc(2);u.Ib("hide-for-mobile",a.appService.getViewMode()),u.Db(1),u.Rc(u.jc(2,3,"lang.email"))}}function ae(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.Ib("hide-for-mobile",n.appService.getViewMode()),u.Db(1),u.Sc(" ",a.mail," ")}}function ne(t,e){1&t&&u.Rb(0,"mat-header-cell")}var ie=function(){return["root_visible","root_invisible"]};function oe(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",55),u.dc("click",(function(t){u.Dc(a);var e=u.hc().$implicit,n=u.hc(2);return t.stopPropagation(),n.deleteUser(e,"suspend")})),u.ic(1,"translate"),u.Rb(2,"mat-icon",56),u.Vb()}if(2&t){var n=u.hc().$implicit,i=u.hc(2);u.pc("matTooltip",u.jc(1,2,"lang.suspend")),u.oc("disabled",n.id===i.user.id||u.uc(4,ie).indexOf(n.mode)>-1&&"standard"===i.headerService.user.mode)}}function re(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",57),u.dc("click",(function(t){u.Dc(a);var e=u.hc().$implicit,n=u.hc(2);return t.stopPropagation(),n.activateUser(e)})),u.ic(1,"translate"),u.Rb(2,"mat-icon",58),u.Vb()}if(2&t){var n=u.hc().$implicit,i=u.hc(2);u.pc("matTooltip",u.jc(1,2,"lang.authorize")),u.oc("disabled",u.uc(4,ie).indexOf(n.mode)>-1&&"standard"===i.headerService.user.mode)}}function ce(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-cell",50),u.Oc(1,oe,3,5,"button",51),u.Oc(2,re,3,5,"button",52),u.Wb(3,"button",53),u.dc("click",(function(t){u.Dc(a);var n=e.$implicit,i=u.hc(2);return t.stopPropagation(),i.deleteUser(n,"delete")})),u.ic(4,"translate"),u.Rb(5,"mat-icon",54),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit,i=u.hc(2);u.Db(1),u.oc("ngIf","SPD"!=n.status),u.Db(1),u.oc("ngIf","SPD"==n.status),u.Db(1),u.pc("matTooltip",u.jc(4,4,"lang.delete")),u.oc("disabled",n.id===i.user.id||u.uc(6,ie).indexOf(n.mode)>-1)}}function le(t,e){1&t&&u.Rb(0,"mat-header-row")}function se(t,e){if(1&t&&(u.Rb(0,"mat-row",59),u.ic(1,"translate")),2&t){var a=e.$implicit;u.Ib("admin",u.uc(6,ie).indexOf(a.mode)>-1),u.qc("routerLink","/administration/users/",a.id,""),u.pc("matTooltip",u.jc(1,4,"lang.view"))}}function de(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-card",22),u.Wb(1,"div",23),u.Wb(2,"div",24),u.Wb(3,"mat-form-field"),u.Rb(4,"input",25),u.ic(5,"translate"),u.Wb(6,"mat-button-toggle",26),u.dc("click",(function(t){u.Dc(a);var e=u.hc();return t.stopPropagation(),e.toggleWebserviceAccount()})),u.ic(7,"translate"),u.Rb(8,"mat-icon",27),u.Vb(),u.Vb(),u.Vb(),u.Wb(9,"div",24),u.Rb(10,"mat-paginator",28,29),u.Vb(),u.Vb(),u.Wb(12,"mat-table",30,31),u.Ub(14,32),u.Oc(15,$t,3,5,"mat-header-cell",33),u.Oc(16,Nt,2,3,"mat-cell",34),u.Tb(),u.Ub(17,35),u.Oc(18,Ht,3,5,"mat-header-cell",33),u.Oc(19,Bt,2,3,"mat-cell",34),u.Tb(),u.Ub(20,36),u.Oc(21,Xt,3,3,"mat-header-cell",37),u.Oc(22,Gt,2,1,"mat-cell",38),u.Tb(),u.Ub(23,39),u.Oc(24,qt,3,3,"mat-header-cell",37),u.Oc(25,Kt,2,1,"mat-cell",38),u.Tb(),u.Ub(26,40),u.Oc(27,Jt,3,3,"mat-header-cell",37),u.Oc(28,te,4,9,"mat-cell",38),u.Tb(),u.Ub(29,41),u.Oc(30,ee,3,5,"mat-header-cell",33),u.Oc(31,ae,2,3,"mat-cell",34),u.Tb(),u.Ub(32,42),u.Oc(33,ne,1,0,"mat-header-cell",43),u.Oc(34,ce,6,7,"mat-cell",44),u.Tb(),u.Oc(35,le,1,0,"mat-header-row",45),u.Oc(36,se,2,7,"mat-row",46),u.Vb(),u.Wb(37,"div",47),u.Qc(38),u.ic(39,"translate"),u.Vb(),u.Vb()}if(2&t){var n=u.hc();u.Db(4),u.pc("placeholder",u.jc(5,12,"lang.filterBy")),u.oc("formControl",n.adminService.getFilterField()),u.Db(2),u.pc("title",u.jc(7,14,"lang.displayWebserviceAccount")),u.oc("checked",n.withWebserviceAccount),u.Db(4),u.oc("length",100)("hidePageSize",!0)("pageSize",10),u.Db(2),u.oc("dataSource",n.adminService.getDataSource()),u.Db(23),u.oc("matHeaderRowDef",n.displayedColumns),u.Db(1),u.oc("matRowDefColumns",n.displayedColumns),u.Db(2),u.Tc(" ",n.data.length," ",u.jc(39,16,"lang.usersAlt"),"")}}var be=function(){return["/rest/autocomplete/users"]};function ue(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",10),u.Wb(1,"plugin-autocomplete",11),u.dc("triggerEvent",(function(t){u.Dc(a);var n=e.index;return u.hc(3).setRedirectUserListModels(n,t)})),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit,i=u.hc(3);u.pc("id",n.object_id),u.Db(1),u.oc("labelPlaceholder",i.translate.instant("lang.newDest")+" : "+n.title)("labelList",i.translate.instant("lang.availableUsers"))("routeDatas",u.uc(6,be))("targetSearchKey","idToDisplay")("subInfoKey","descriptionToDisplay")}}function pe(t,e){if(1&t&&(u.Ub(0),u.Wb(1,"h2"),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"div",7),u.Wb(5,"b"),u.Qc(6),u.Vb(),u.Qc(7,"\xa0"),u.Rb(8,"span",8),u.Qc(9," : "),u.Vb(),u.Oc(10,ue,2,7,"div",9),u.Tb()),2&t){var a=u.hc(2);u.Db(2),u.Rc(u.jc(3,5,"lang.redirectUserListDiff")),u.Db(4),u.Tc("",a.data.userDestRedirect.firstname," ",a.data.userDestRedirect.lastname,""),u.Db(2),u.oc("innerHTML",a.translate.instant("lang.chooseNewDest"),u.Ec),u.Db(2),u.oc("ngForOf",a.data.redirectListModels)}}function fe(t,e){if(1&t){var a=u.Xb();u.Ub(0),u.Wb(1,"h2"),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"div",7),u.Wb(5,"b"),u.Qc(6),u.Vb(),u.Qc(7,"\xa0"),u.Rb(8,"span",8),u.Qc(9," : "),u.Vb(),u.Wb(10,"div",10),u.Wb(11,"plugin-autocomplete",11),u.dc("triggerEvent",(function(t){return u.Dc(a),u.hc(2).setRedirectUserRes(t)})),u.Vb(),u.Vb(),u.Tb()}if(2&t){var n=u.hc(2);u.Db(2),u.Rc(u.jc(3,10,"lang.redirectUserListInstances")),u.Db(4),u.Tc("",n.data.userDestRedirect.firstname," ",n.data.userDestRedirect.lastname,""),u.Db(2),u.oc("innerHTML",n.translate.instant("lang.chooseNewDestUser"),u.Ec),u.Db(2),u.pc("id",n.data.userDestRedirect.user_id),u.Db(1),u.oc("labelPlaceholder",n.translate.instant("lang.newDestRes"))("labelList",n.translate.instant("lang.availableUsers"))("routeDatas",u.uc(12,be))("targetSearchKey","idToDisplay")("subInfoKey","descriptionToDisplay")}}function me(t,e){if(1&t&&(u.Wb(0,"b"),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=u.hc(3);u.Db(1),u.Uc("",u.jc(2,3,"lang.delete")," ",a.data.userDestRedirect.firstname," ",a.data.userDestRedirect.lastname,"")}}function ge(t,e){if(1&t&&(u.Wb(0,"b"),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=u.hc(3);u.Db(1),u.Uc("",u.jc(2,3,"lang.suspend")," ",a.data.userDestRedirect.firstname," ",a.data.userDestRedirect.lastname,"")}}function he(t,e){if(1&t&&(u.Ub(0),u.Wb(1,"div",12),u.Oc(2,me,3,5,"b",2),u.Qc(3,"\xa0 "),u.Oc(4,ge,3,5,"b",2),u.Qc(5,"\xa0 "),u.Vb(),u.Tb()),2&t){var a=u.hc(2);u.Db(2),u.oc("ngIf","delete"==a.data.userDestRedirect.actionMode),u.Db(2),u.oc("ngIf","suspend"==a.data.userDestRedirect.actionMode)}}function ve(t,e){if(1&t&&(u.Ub(0),u.Oc(1,pe,11,7,"ng-container",2),u.Oc(2,fe,12,13,"ng-container",2),u.Oc(3,he,6,2,"ng-container",2),u.Tb()),2&t){var a=u.hc();u.Db(1),u.oc("ngIf",a.data.inDiffListDest),u.Db(1),u.oc("ngIf",a.data.isResDestUser),u.Db(1),u.oc("ngIf",!a.data.inDiffListDest&&!a.data.isResDestUser)}}function ye(t,e){if(1&t&&(u.Wb(0,"mat-list-item"),u.Wb(1,"mat-icon",17),u.Rb(2,"i",18),u.Vb(),u.Wb(3,"p",15),u.Wb(4,"span"),u.Qc(5),u.Vb(),u.Vb(),u.Vb()),2&t){var a=e.$implicit;u.Db(5),u.Sc(" ",a," ")}}function De(t,e){if(1&t&&(u.Wb(0,"div",14),u.Wb(1,"mat-list"),u.Wb(2,"p",15),u.Qc(3),u.ic(4,"translate"),u.Vb(),u.Oc(5,ye,6,1,"mat-list-item",16),u.Vb(),u.Vb()),2&t){var a=u.hc(2);u.Db(3),u.Rc(u.jc(4,2,"lang.diffusionList")),u.Db(2),u.oc("ngForOf",a.data.listTemplateEntities)}}function Ve(t,e){if(1&t&&(u.Wb(0,"mat-list-item"),u.Wb(1,"mat-icon",17),u.Rb(2,"i",19),u.Vb(),u.Wb(3,"p",15),u.Wb(4,"span"),u.Qc(5),u.Vb(),u.Vb(),u.Vb()),2&t){var a=e.$implicit;u.Db(5),u.Sc(" ",a," ")}}function Ce(t,e){if(1&t&&(u.Wb(0,"div",14),u.Wb(1,"mat-list"),u.Wb(2,"p",15),u.Qc(3),u.ic(4,"translate"),u.Vb(),u.Oc(5,Ve,6,1,"mat-list-item",16),u.Vb(),u.Vb()),2&t){var a=u.hc(2);u.Db(3),u.Rc(u.jc(4,2,"lang.mailEntitiesList")),u.Db(2),u.oc("ngForOf",a.data.listInstanceEntities)}}function xe(t,e){if(1&t&&(u.Ub(0),u.Wb(1,"div",7),u.Wb(2,"p"),u.Rb(3,"span",8),u.Wb(4,"b"),u.Qc(5),u.Vb(),u.Qc(6,"\xa0"),u.Vb(),u.Wb(7,"p"),u.Rb(8,"span",8),u.Vb(),u.Vb(),u.Oc(9,De,6,4,"div",13),u.Oc(10,Ce,6,4,"div",13),u.Tb()),2&t){var a=u.hc();u.Db(3),u.oc("innerHTML",a.translate.instant("lang.userIsNotDeletable"),u.Ec),u.Db(2),u.Tc("",a.data.userDestRedirect.firstname," ",a.data.userDestRedirect.lastname,""),u.Db(3),u.oc("innerHTML",a.translate.instant("lang.userIsDeletableBy"),u.Ec),u.Db(1),u.oc("ngIf",a.data.inTemplateList),u.Db(1),u.oc("ngIf",a.data.inInstanceList)}}function Me(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",20),u.dc("click",(function(){u.Dc(a);var t=u.hc();return t.dialogRef.close(t.data)})),u.Qc(1),u.ic(2,"translate"),u.ic(3,"translate"),u.Vb()}if(2&t){var n=u.hc();u.oc("disabled",!n.sendFunction()),u.Db(1),u.Tc("",u.jc(2,3,"lang.delete")," ",u.jc(3,5,"lang.user"),"")}}function We(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",21),u.dc("click",(function(){u.Dc(a);var t=u.hc();return t.dialogRef.close(t.data)})),u.Qc(1),u.ic(2,"translate"),u.ic(3,"translate"),u.Vb()}if(2&t){var n=u.hc();u.oc("disabled",!n.sendFunction()),u.Db(1),u.Tc("",u.jc(2,3,"lang.suspend")," ",u.jc(3,5,"lang.user"),"")}}function Oe(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",22),u.dc("click",(function(){return u.Dc(a),u.hc().dialogRef.close()})),u.Qc(1),u.ic(2,"translate"),u.Vb()}2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.close")))}var _e,Se,ke=((Se=function(){function t(e,a,n,i,o,r,c,l,s){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.dialog=i,this.headerService=o,this.appService=r,this.functions=c,this.adminService=l,this.viewContainerRef=s,this.loading=!0,this.updateListModel=!0,this.updateListInstance=!0,this.data=[],this.config={},this.userDestRedirect={},this.userDestRedirectModels=[],this.listinstances=[],this.quota={},this.user={},this.withWebserviceAccount=!1,this.webserviceAccounts=[],this.noWebserviceAccounts=[],this.displayedColumns=["id","user_id","lastname","firstname","status","mail","actions"],this.filterColumns=["id","user_id","lastname","firstname","mail"]}return _createClass(t,[{key:"ngOnInit",value:function(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.users")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.user=this.headerService.user,this.getData()}},{key:"getData",value:function(){var t=this;this.webserviceAccounts=[],this.noWebserviceAccounts=[],this.data=[],this.http.get("../rest/users").pipe(Object(kt.tap)((function(e){t.data=e.users,t.data.forEach((function(e){e.statusLabel=t.translate.instant("lang.user"+e.status),"rest"===e.mode?t.webserviceAccounts.push(e):t.noWebserviceAccounts.push(e)})),t.data=t.noWebserviceAccounts,t.quota=e.quota,t.quota.actives>t.quota.userQuota&&t.notify.error(t.translate.instant("lang.quotaExceeded")),t.loading=!1,setTimeout((function(){t.adminService.setDataSource("admin_users",t.data,t.sort,t.paginator,t.filterColumns)}),0)})),Object(G.catchError)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"activateUser",value:function(t){var e=this;confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.authorize")+" \xab "+t.user_id+" \xbb")&&(t.status="OK",this.http.put("../rest/users/"+t.id,t).subscribe((function(){e.notify.success(e.translate.instant("lang.userAuthorized")),e.quota.userQuota&&(e.quota.inactives--,e.quota.actives++,e.quota.actives>e.quota.userQuota&&e.notify.error(e.translate.instant("lang.quotaExceeded")))}),(function(a){t.status="SPD",e.notify.error(a.error.errors)})))}},{key:"deleteUser",value:function(t,e){var a=this;t.actionMode=e,this.http.get("../rest/users/"+t.id+"/isDeletable").subscribe((function(e){e&&e.hasOwnProperty("errors")?a.notify.error(e.errors):(t.isDeletable=e.isDeletable,a.config=e.isDeletable?{panelClass:"maarch-modal",data:{userDestRedirect:t,isDeletable:e.isDeletable,redirectListInstances:e.listInstances,redirectListModels:e.listTemplates}}:{panelClass:"maarch-modal",data:{userDestRedirect:t,isDeletable:e.isDeletable,listInstanceEntities:e.listInstanceEntities,listTemplateEntities:e.listTemplateEntities}},a.dialogRef=a.dialog.open(we,a.config),a.dialogRef.afterClosed().subscribe((function(e){e&&t.isDeletable&&(t.inDiffListDest=e.inDiffListDest,t.isResDestUser=e.isResDestUser,e.inDiffListDest&&(t.redirectListModels=e.redirectListModels),e.isResDestUser&&(t.redirectDestResUserId=e.redirectDestResUserId,e.redirectListInstances.forEach((function(e){e.listInstances.forEach((function(e){"dest"===e.item_mode&&e.item_id===t.user_id&&(e.item_id=t.redirectDestResUserId)}))})),t.redirectListInstances=e.redirectListInstances),t.inDiffListDest&&t.isResDestUser?a.http.put("../rest/listTemplates/entityDest/itemId/"+t.id,t).subscribe((function(){a.http.put("../rest/listinstances",t.redirectListInstances).subscribe((function(e){null!=e&&e.errors?a.notify.error(e.errors):"delete"===t.actionMode?a.http.delete("../rest/users/"+t.id).subscribe((function(){for(var e in a.data)a.data[e].id==t.id&&a.data.splice(Number(e),1);a.adminService.setDataSource("admin_users",a.data,a.sort,a.paginator,a.filterColumns),a.quota.userQuota&&"SPD"!==t.status?a.quota.actives--:a.quota.userQuota&&"SPD"===t.status&&a.quota.inactives--,a.notify.success(a.translate.instant("lang.userDeleted")+" \xab "+t.user_id+" \xbb")}),(function(t){a.notify.error(t.error.errors)})):"suspend"===t.actionMode&&a.http.put("../rest/users/"+t.id+"/suspend",t).subscribe((function(){t.status="SPD",a.notify.success(a.translate.instant("lang.userSuspended")),a.quota.userQuota&&(a.quota.inactives++,a.quota.actives--)}),(function(e){t.status="OK",a.notify.error(e.error.errors)}))}),(function(t){a.notify.error(t.error.errors)}))}),(function(t){a.notify.error(t.error.errors)})):t.inDiffListDest&&!t.isResDestUser?a.http.put("../rest/listTemplates/entityDest/itemId/"+t.id,t).subscribe((function(){"delete"===t.actionMode?a.http.delete("../rest/users/"+t.id).subscribe((function(){for(var e in a.data)a.data[e].id==t.id&&a.data.splice(Number(e),1);a.adminService.setDataSource("admin_users",a.data,a.sort,a.paginator,a.filterColumns),a.quota.userQuota&&"OK"===t.status?a.quota.actives--:a.quota.userQuota&&"SPD"===t.status&&a.quota.inactives--,a.notify.success(a.translate.instant("lang.userDeleted")+" \xab "+t.user_id+" \xbb")}),(function(t){a.notify.error(t.error.errors)})):"suspend"===t.actionMode&&a.http.put("../rest/users/"+t.id+"/suspend",t).subscribe((function(){t.status="SPD",a.notify.success(a.translate.instant("lang.userSuspended")),a.quota.userQuota&&(a.quota.inactives++,a.quota.actives--)}),(function(e){t.status="OK",a.notify.error(e.error.errors)}))}),(function(t){a.notify.error(t.error.errors)})):!t.inDiffListDest&&t.isResDestUser?a.http.put("../rest/listinstances",t.redirectListInstances).subscribe((function(e){e&&e.hasOwnProperty("errors")?a.notify.error(e.errors):"delete"===t.actionMode?a.http.delete("../rest/users/"+t.id).subscribe((function(){for(var e in a.data)a.data[e].id===t.id&&a.data.splice(Number(e),1);a.adminService.setDataSource("admin_users",a.data,a.sort,a.paginator,a.filterColumns),a.quota.userQuota&&"OK"===t.status?a.quota.actives--:a.quota.userQuota&&"SPD"===t.status&&a.quota.inactives--,a.notify.success(a.translate.instant("lang.userDeleted")+" \xab "+t.user_id+" \xbb")}),(function(t){a.notify.error(t.error.errors)})):"suspend"===t.actionMode&&a.http.put("../rest/users/"+t.id+"/suspend",t).subscribe((function(){t.status="SPD",a.notify.success(a.translate.instant("lang.userSuspended")),a.quota.userQuota&&(a.quota.inactives++,a.quota.actives--)}),(function(e){t.status="OK",a.notify.error(e.error.errors)}))}),(function(t){a.notify.error(t.error.errors)})):t.inDiffListDest||t.isResDestUser||("delete"===t.actionMode?a.http.delete("../rest/users/"+t.id).subscribe((function(){for(var e in a.data)a.data[e].id==t.id&&a.data.splice(Number(e),1);a.adminService.setDataSource("admin_users",a.data,a.sort,a.paginator,a.filterColumns),a.quota.userQuota&&"OK"===t.status?a.quota.actives--:a.quota.userQuota&&"SPD"===t.status&&a.quota.inactives--,a.notify.success(a.translate.instant("lang.userDeleted")+" \xab "+t.user_id+" \xbb")}),(function(t){a.notify.error(t.error.errors)})):"suspend"===t.actionMode&&a.http.put("../rest/users/"+t.id+"/suspend",t).subscribe((function(){t.status="SPD",a.notify.success(a.translate.instant("lang.userSuspended")),a.quota.userQuota&&(a.quota.inactives++,a.quota.actives--)}),(function(e){t.status="OK",a.notify.error(e.error.errors)}))))})))}),(function(t){a.notify.error(t.error.errors)}))}},{key:"toggleWebserviceAccount",value:function(){this.withWebserviceAccount=!this.withWebserviceAccount,this.data=this.withWebserviceAccount?this.webserviceAccounts:this.noWebserviceAccounts,this.adminService.setDataSource("admin_users",this.data,this.sort,this.paginator,this.filterColumns)}},{key:"openUsersImportModal",value:function(){var t=this;this.dialog.open(vt,{disableClose:!0,width:"99vw",maxWidth:"99vw",panelClass:"maarch-full-height-modal"}).afterClosed().pipe(Object(J.a)((function(t){return"success"===t})),Object(kt.tap)((function(){t.getData()})),Object(G.catchError)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"openUsersExportModal",value:function(){this.dialog.open(St,{panelClass:"maarch-modal",width:"800px",autoFocus:!1})}}]),t}()).\u0275fac=function(t){return new(t||Se)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(N.b),u.Qb(m.a),u.Qb(g.a),u.Qb(D.a),u.Qb(jt),u.Qb(u.T))},Se.\u0275cmp=u.Kb({type:Se,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(Lt,!0),u.Xc(H.a,!0),u.Xc(B.a,!0)),2&t&&(u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.paginator=a.first),u.yc(a=u.ec())&&(e.sort=a.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/users/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],["mat-list-item","",3,"click"],["color","primary","mat-list-icon","",1,"fas","fa-file-export"],["color","primary","mat-list-icon","",1,"fas","fa-file-import"],[4,"ngIf"],["mat-line","",2,"margin-left","20px"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],["matSuffix","",1,"webserviceAccount",3,"checked","title","click"],["fontSet","fas","fontIcon","fa-user-shield fa-2x",2,"margin-left","-2px","margin-top","-4px"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","id"],["mat-sort-header","",3,"hide-for-mobile",4,"matHeaderCellDef"],[3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","user_id"],["matColumnDef","lastname"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","firstname"],["matColumnDef","status"],["matColumnDef","mail"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip","admin",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header",""],[1,"label",3,"ngClass"],[2,"justify-content","flex-end"],["mat-icon-button","","color","primary",3,"disabled","matTooltip","click",4,"ngIf"],["mat-icon-button","","color","accent",3,"matTooltip","disabled","click",4,"ngIf"],["mat-icon-button","","color","warn","data-toggle","modal","data-target","#changeDiffListDest",3,"disabled","matTooltip","click"],[1,"fa","fa-trash-alt","fa-2x"],["mat-icon-button","","color","primary",3,"disabled","matTooltip","click"],["aria-hidden","true",1,"fa","fa-pause","fa-2x"],["mat-icon-button","","color","accent",3,"matTooltip","disabled","click"],["aria-hidden","true",1,"fa","fa-check","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,Ut,22,14,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,zt,2,0,"div",9),u.Oc(14,de,40,18,"mat-card",10),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading))},directives:[C.e,C.f,x.a,W.a,O.t,Rt.h,Rt.g,Rt.d,o.f,Tt.a,Rt.c,j.l,_.a,w.c,I.a,S.c,k.b,c.d,c.u,c.j,Pt.a,S.j,H.a,q.o,B.a,q.c,q.i,q.b,q.k,q.n,q.h,B.b,q.a,O.q,R.b,Qt.b,q.j,q.m,o.d],pipes:[p.d],styles:["button[_ngcontent-%COMP%]:disabled{opacity:.3!important}.statusUserLabelWarn[_ngcontent-%COMP%]{color:#8e3e52}.statusUserLabelPrimary[_ngcontent-%COMP%]{color:#135f7f}.webserviceAccount[_ngcontent-%COMP%]{color:#666;width:37px;height:37px;font-size:x-small;border-radius:18px!important}.mat-button-toggle-checked[_ngcontent-%COMP%]{background-color:#f99830!important;color:#fff}.admin[_ngcontent-%COMP%]{font-weight:700}"]}),Se),we=((_e=function(){function t(e,a,n,i,o){_classCallCheck(this,t),this.translate=e,this.http=a,this.data=n,this.dialogRef=i,this.notify=o,this.loadModel=!1,this.loadInstance=!1,this.modalTitle=this.translate.instant("lang.confirmAction")}return _createClass(t,[{key:"ngOnInit",value:function(){this.data.isDeletable?(this.data.redirectListModels.length>0&&(this.data.inDiffListDest=!0),this.data.redirectListInstances.length>0&&(this.data.isResDestUser=!0)):(this.modalTitle=this.translate.instant("delete"===this.data.userDestRedirect.actionMode?"lang.unableToDelete":"lang.unableToSuspend"),this.data.listTemplateEntities.length>0&&(this.data.inTemplateList=!0),this.data.listInstanceEntities.length>0&&(this.data.inInstanceList=!0))}},{key:"setRedirectUserListModels",value:function(t,e){this.data.userDestRedirect.user_id!=e.id?this.data.redirectListModels[t].redirectUserId=e.id:(this.data.redirectListModels[t].redirectUserId=null,this.notify.error(this.translate.instant("lang.userUnauthorized")))}},{key:"setRedirectUserRes",value:function(t){this.data.userDestRedirect.user_id!=t.id?this.data.redirectDestResUserId=t.id:(this.data.redirectDestResUserId=null,this.notify.error(this.translate.instant("lang.userUnauthorized")))}},{key:"sendFunction",value:function(){var t=!0;return this.data.inDiffListDest&&this.data.redirectListModels.forEach((function(e){e.redirectUserId||(t=!1)})),this.data.isResDestUser&&(this.data.redirectDestResUserId||(t=!1)),t}}]),t}()).\u0275fac=function(t){return new(t||_e)(u.Qb(p.e),u.Qb(f.b),u.Qb(N.a),u.Qb(N.h),u.Qb(y.a))},_e.\u0275cmp=u.Kb({type:_e,selectors:[["ng-component"]],decls:11,vars:6,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],[4,"ngIf"],[1,"divider-modal"],["mat-raised-button","","color","warn","type","submit","class","btn btn-danger",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",3,"click",4,"ngIf"],["role","alert",1,"alert-message","alert-message-info"],[3,"innerHTML"],["class","form-group",3,"id",4,"ngFor","ngForOf"],[1,"form-group",3,"id"],["singleMode","","required","",3,"labelPlaceholder","labelList","routeDatas","targetSearchKey","subInfoKey","triggerEvent"],["role","alert",1,"alert"],["class","modal-body","class","col-md-6",4,"ngIf"],[1,"col-md-6"],["mat-line",""],[4,"ngFor","ngForOf"],["mat-list-icon",""],["color","primary",1,"fa","fa-share-alt"],["color","primary",1,"fa","fa-inbox"],["mat-raised-button","","color","warn","type","submit",1,"btn","btn-danger",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"click"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"h1",1),u.Qc(2),u.Vb(),u.Wb(3,"mat-dialog-content"),u.Oc(4,ve,4,3,"ng-container",2),u.Oc(5,xe,11,6,"ng-container",2),u.Vb(),u.Rb(6,"span",3),u.Wb(7,"mat-dialog-actions"),u.Oc(8,Me,4,7,"button",4),u.Oc(9,We,4,7,"button",5),u.Oc(10,Oe,3,3,"button",6),u.Vb(),u.Vb()),2&t&&(u.Db(2),u.Rc(e.modalTitle),u.Db(2),u.oc("ngIf",e.data.isDeletable),u.Db(1),u.oc("ngIf",!e.data.isDeletable),u.Db(3),u.oc("ngIf","delete"==e.data.userDestRedirect.actionMode&&e.data.isDeletable),u.Db(1),u.oc("ngIf","suspend"==e.data.userDestRedirect.actionMode&&e.data.isDeletable),u.Db(1),u.oc("ngIf",!e.data.isDeletable))},directives:[N.i,N.f,O.t,N.c,O.s,Ft.a,Rt.a,j.l,Rt.d,Tt.a,Rt.c,R.b],pipes:[p.d],styles:["mat-icon[_ngcontent-%COMP%]{height:auto!important}.alert-message[_ngcontent-%COMP%]{max-width:100%}"]}),_e),Ie=a("0EQZ");function je(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-list"),u.Wb(1,"mat-list-item"),u.Rb(2,"mat-icon",8),u.Wb(3,"h4",9),u.Qc(4),u.Vb(),u.Wb(5,"p",10),u.Qc(6),u.Vb(),u.Wb(7,"button",11),u.dc("click",(function(){return u.Dc(a),u.hc().unlinkMaarchParapheurAccount()})),u.Rb(8,"mat-icon",12),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc();u.Db(2),u.Lc("background-image","url("+n.externalUser.picture+")"),u.Db(2),u.Tc("",n.externalUser.firstname," ",n.externalUser.lastname,""),u.Db(2),u.Rc(n.externalUser.email),u.Db(1),u.oc("title",n.translate.instant("lang.unlinkAccount"))}}function Re(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-form-field"),u.Wb(1,"input",13),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().externalUser.login=t})),u.ic(2,"translate"),u.Vb(),u.Vb()}if(2&t){var n=u.hc();u.Db(1),u.pc("placeholder",u.jc(2,2,"lang.newLoginInMaarchParapheur")),u.oc("ngModel",n.externalUser.login)}}function Te(t,e){if(1&t&&u.Rb(0,"div",14),2&t){var a=u.hc();u.oc("innerHTML",a.translate.instant("lang.maarchParapheurAccountMsg")+" <b>"+a.externalUser.login+"</b> "+a.translate.instant("lang.maarchParapheurAccountMsg2"),u.Ec)}}var Pe,Qe=function(){return["/rest/autocomplete/maarchParapheurUsers?exludeAlreadyConnected=true"]},Fe=((Pe=function(){function t(e,a,n,i,o){_classCallCheck(this,t),this.translate=e,this.http=a,this.data=n,this.dialogRef=i,this.notify=o,this.externalUser={inMaarchParapheur:!1,login:"",firstname:"",lastname:"",email:"",picture:""}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.http.get("../rest/autocomplete/maarchParapheurUsers",{params:{search:this.data.user.mail,exludeAlreadyConnected:"true"}}).subscribe((function(e){e.length>0?(t.externalUser=e[0],t.externalUser.inMaarchParapheur=!0,t.http.get("../rest/maarchParapheur/user/"+t.externalUser.id+"/picture").subscribe((function(e){t.externalUser.picture=e.picture}),(function(e){t.notify.handleErrors(e)}))):(t.externalUser.inMaarchParapheur=!1,t.externalUser=t.data.user,t.externalUser.login=t.data.user.user_id,t.externalUser.email=t.data.user.mail)}),(function(e){t.notify.handleErrors(e)}))}},{key:"selectUser",value:function(t){var e=this;this.externalUser=t,this.externalUser.inMaarchParapheur=!0,this.http.get("../rest/maarchParapheur/user/"+this.externalUser.id+"/picture").subscribe((function(t){e.externalUser.picture=t.picture}),(function(t){e.notify.handleErrors(t)}))}},{key:"unlinkMaarchParapheurAccount",value:function(){this.externalUser.inMaarchParapheur=!1,this.externalUser=this.data.user,this.externalUser.login=this.data.user.user_id,this.externalUser.email=this.data.user.mail}}]),t}()).\u0275fac=function(t){return new(t||Pe)(u.Qb(p.e),u.Qb(f.b),u.Qb(N.a),u.Qb(N.h),u.Qb(y.a))},Pe.\u0275cmp=u.Kb({type:Pe,selectors:[["ng-component"]],decls:17,vars:18,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["appearance","outline",3,"labelPlaceholder","routeDatas","targetSearchKey","subInfoKey","triggerEvent"],[4,"ngIf"],["class","alert-message alert-message-danger","role","alert","style","margin-top: 30px;",3,"innerHTML",4,"ngIf"],[1,"divider-modal"],["color","primary","mat-raised-button","",3,"disabled","click"],["mat-raised-button","",3,"click"],["color","primary","mat-list-icon","",1,"avatarAccount"],["mat-line",""],["mat-line","",2,"color","#666"],["mat-icon-button","","color","warn",3,"title","click"],[1,"fas","fa-unlink"],["type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],["role","alert",1,"alert-message","alert-message-danger",2,"margin-top","30px",3,"innerHTML"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"h1",1),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"mat-dialog-content"),u.Wb(5,"plugin-autocomplete",2),u.dc("triggerEvent",(function(t){return e.selectUser(t)})),u.Vb(),u.Oc(6,je,9,6,"mat-list",3),u.Oc(7,Re,3,4,"mat-form-field",3),u.Oc(8,Te,1,1,"div",4),u.Vb(),u.Rb(9,"span",5),u.Wb(10,"mat-dialog-actions"),u.Wb(11,"button",6),u.dc("click",(function(){return e.dialogRef.close(e.externalUser)})),u.Qc(12),u.ic(13,"translate"),u.Vb(),u.Wb(14,"button",7),u.dc("click",(function(){return e.dialogRef.close("")})),u.Qc(15),u.ic(16,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(2),u.Rc(u.jc(3,11,"lang.linkAccount")),u.Db(3),u.oc("labelPlaceholder",e.translate.instant("lang.searchUserInMaarchParapheur"))("routeDatas",u.uc(17,Qe))("targetSearchKey","idToDisplay")("subInfoKey","email"),u.Db(1),u.oc("ngIf",e.externalUser.inMaarchParapheur),u.Db(1),u.oc("ngIf",!e.externalUser.inMaarchParapheur),u.Db(1),u.oc("ngIf",!e.externalUser.inMaarchParapheur),u.Db(3),u.oc("disabled",""===e.externalUser.login),u.Db(1),u.Rc(u.jc(13,13,"lang.validate")),u.Db(3),u.Rc(u.jc(16,15,"lang.cancel")))},directives:[N.i,N.f,Ft.a,O.t,N.c,R.b,Rt.a,Rt.d,Tt.a,Rt.c,j.l,S.c,k.b,c.d,c.u,c.x],pipes:[p.d],styles:[".avatarAccount[_ngcontent-%COMP%]{border:3px solid #f99830;height:45px!important;width:45px!important;background-size:cover;background-repeat:no-repeat;background-position:50%}"]}),Pe),Le=a("MJ5r"),Ee=a("wZkO"),Ae=a("7EHt"),Ue=a("/kMP"),ze=a("bSwM"),$e=a("STbY"),Ne=a("lJEt"),He=a("iadO"),Be=a("wQTr"),Xe=a("QibW"),Ge=["snav2"],qe=["adminMenuTemplate"],Ke=["maarchTree"];function Je(t,e){if(1&t){var a=u.Xb();u.Wb(0,"a",18),u.dc("click",(function(){return u.Dc(a),u.hc(3).activateAbsence()})),u.Rb(1,"mat-icon",19),u.Wb(2,"p",20),u.Qc(3),u.ic(4,"translate"),u.Vb(),u.Vb()}2&t&&(u.Db(3),u.Sc(" ",u.jc(4,1,"lang.activateAbsence")," "))}function Ye(t,e){if(1&t){var a=u.Xb();u.Wb(0,"a",18),u.dc("click",(function(){return u.Dc(a),u.hc(3).desactivateAbsence()})),u.Rb(1,"mat-icon",21),u.Wb(2,"p",20),u.Qc(3),u.ic(4,"translate"),u.Vb(),u.Vb()}2&t&&(u.Db(3),u.Sc(" ",u.jc(4,1,"lang.desactivateAbsence")," "))}function Ze(t,e){if(1&t){var a=u.Xb();u.Wb(0,"a",18),u.dc("click",(function(){return u.Dc(a),u.hc(3).resendActivationNotification()})),u.Rb(1,"mat-icon",22),u.Wb(2,"p",20),u.Qc(3),u.ic(4,"translate"),u.Vb(),u.Vb()}2&t&&(u.Db(3),u.Sc(" ",u.jc(4,1,"lang.sendActivationNotification")," "))}function ta(t,e){if(1&t){var a=u.Xb();u.Wb(0,"a",18),u.dc("click",(function(){return u.Dc(a),u.hc(3).changePasswd()})),u.Rb(1,"mat-icon",23),u.Wb(2,"p",20),u.Qc(3),u.ic(4,"translate"),u.Vb(),u.Vb()}2&t&&(u.Db(3),u.Sc(" ",u.jc(4,1,"lang.changePassword")," "))}function ea(t,e){1&t&&(u.Wb(0,"p",27),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc(" ",u.jc(2,1,"lang.maarchParapheurLinkbroken")," "))}function aa(t,e){if(1&t){var a=u.Xb();u.Wb(0,"a",24),u.dc("click",(function(){return u.Dc(a),u.hc(3).linkMaarchParapheurAccount()})),u.ic(1,"translate"),u.Rb(2,"mat-icon",25),u.Wb(3,"p",20),u.Qc(4),u.ic(5,"translate"),u.Vb(),u.Oc(6,ea,3,3,"p",26),u.Vb()}if(2&t){var n=u.hc(3);u.pc("title",u.jc(1,3,"lang.createUserInMaarchParapheur")),u.Db(4),u.Sc(" ",u.jc(5,5,"lang.linkAccount")," "),u.Db(2),u.oc("ngIf",!n.maarchParapheurConnectionStatus)}}function na(t,e){if(1&t&&(u.Wb(0,"mat-nav-list"),u.Wb(1,"h3",13),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Oc(4,Je,5,3,"a",16),u.Oc(5,Ye,5,3,"a",16),u.Oc(6,Ze,5,3,"a",16),u.Oc(7,ta,5,3,"a",16),u.Oc(8,aa,7,7,"a",17),u.Vb()),2&t){var a=u.hc(2);u.Db(2),u.Rc(u.jc(3,6,"lang.actions")),u.Db(2),u.oc("ngIf","ABS"!=a.user.status),u.Db(1),u.oc("ngIf","ABS"==a.user.status),u.Db(1),u.oc("ngIf",a.user.canSendActivationNotification),u.Db(1),u.oc("ngIf",a.user.canModifyPassword),u.Db(1),u.oc("ngIf",a.user.canCreateMaarchParapheurUser||""===a.maarchParapheurLink.login)}}function ia(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-list"),u.Wb(1,"h3",13),u.Qc(2,"Compte Maarch Parapheur"),u.Vb(),u.Wb(3,"mat-list-item"),u.Rb(4,"mat-icon",28),u.Wb(5,"p",29),u.Wb(6,"span"),u.Qc(7),u.Vb(),u.Wb(8,"button",30),u.dc("click",(function(){return u.Dc(a),u.hc(2).unlinkMaarchParapheurAccount()})),u.ic(9,"translate"),u.Rb(10,"mat-icon",31),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.Db(4),u.Lc("background-image","url("+n.maarchParapheurLink.picture+")"),u.Db(3),u.Sc(" ",n.maarchParapheurLink.login," "),u.Db(1),u.pc("title",u.jc(9,4,"lang.unlinkAccount"))}}function oa(t,e){if(1&t&&(u.Oc(0,na,9,8,"mat-nav-list",15),u.Rb(1,"mat-divider"),u.Oc(2,ia,11,6,"mat-list",15)),2&t){var a=u.hc();u.oc("ngIf",!a.creationMode&&!a.loading),u.Db(2),u.oc("ngIf",""!==a.maarchParapheurLink.login)}}function ra(t,e){1&t&&(u.Wb(0,"div",32),u.Rb(1,"mat-spinner",33),u.Vb())}function ca(t,e){1&t&&(u.Wb(0,"mat-error"),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc(" ",u.jc(2,1,"lang.requiredField"),""))}function la(t,e){1&t&&(u.Wb(0,"mat-hint"),u.Rb(1,"i",58),u.Wb(2,"span",59),u.Qc(3),u.ic(4,"translate"),u.Vb(),u.Vb()),2&t&&(u.Db(3),u.Rc(u.jc(4,1,"lang.passwordValid")))}function sa(t,e){1&t&&(u.Wb(0,"mat-hint"),u.Rb(1,"i",58),u.Wb(2,"span",59),u.Qc(3),u.ic(4,"translate"),u.Vb(),u.Vb()),2&t&&(u.Db(3),u.Rc(u.jc(4,1,"lang.passwordMatch")))}function da(t,e){if(1&t&&(u.Wb(0,"div",44),u.Wb(1,"div",60),u.Rb(2,"div",61),u.Vb(),u.Vb()),2&t){var a=u.hc(3);u.Db(2),u.oc("innerHTML",a.otherRuleText,u.Ec)}}var ba=function(t){return[t]};function ua(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",42),u.Wb(1,"form",43),u.Wb(2,"div",44),u.Wb(3,"mat-form-field",45),u.Rb(4,"input",46),u.ic(5,"translate"),u.Wb(6,"mat-icon",47),u.dc("click",(function(){u.Dc(a);var t=u.hc(2);return t.hidePassword=!t.hidePassword})),u.Vb(),u.Oc(7,ca,3,3,"mat-error",15),u.Vb(),u.Vb(),u.Wb(8,"div",44),u.Wb(9,"div",48),u.Qc(10),u.Vb(),u.Wb(11,"div",49),u.Wb(12,"mat-form-field",45),u.Rb(13,"input",50,51),u.ic(15,"translate"),u.Wb(16,"mat-icon",47),u.dc("click",(function(){u.Dc(a);var t=u.hc(2);return t.hidePassword=!t.hidePassword})),u.Vb(),u.Oc(17,la,5,3,"mat-hint",15),u.Wb(18,"mat-error"),u.Qc(19),u.Vb(),u.Vb(),u.Vb(),u.Wb(20,"div",49),u.Wb(21,"mat-form-field",45),u.Rb(22,"input",52,53),u.ic(24,"translate"),u.Wb(25,"mat-icon",47),u.dc("click",(function(){u.Dc(a);var t=u.hc(2);return t.hidePassword=!t.hidePassword})),u.Vb(),u.Oc(26,sa,5,3,"mat-hint",15),u.Wb(27,"mat-error"),u.Qc(28),u.ic(29,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Oc(30,da,3,1,"div",54),u.Wb(31,"div",44),u.Wb(32,"div",55),u.Wb(33,"button",56),u.dc("click",(function(){return u.Dc(a),u.hc(2).updatePassword()})),u.Qc(34),u.ic(35,"translate"),u.Vb(),u.Wb(36,"button",57),u.dc("click",(function(){return u.Dc(a),u.hc(2).showPassword=!1})),u.Qc(37),u.ic(38,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.Db(1),u.oc("formGroup",n.firstFormGroup),u.Db(3),u.pc("placeholder",u.jc(5,20,"lang.typeCurrentPassword")),u.oc("type",n.hidePassword?"password":"text"),u.Db(2),u.oc("ngClass",u.vc(32,ba,n.hidePassword?"fa-eye-slash":"fa-eye")),u.Db(1),u.oc("ngIf",n.firstFormGroup.controls.currentPasswordCtrl.hasError("required")),u.Db(3),u.Sc(" ",n.ruleText,""),u.Db(3),u.pc("placeholder",u.jc(15,22,"lang.typeNewPassword")),u.oc("type",n.hidePassword?"password":"text"),u.Db(3),u.oc("ngClass",u.vc(34,ba,n.hidePassword?"fa-eye-slash":"fa-eye")),u.Db(1),u.oc("ngIf",n.validPassword),u.Db(2),u.Rc(n.getErrorMessage()),u.Db(3),u.pc("placeholder",u.jc(24,24,"lang.retypeNewPassword")),u.oc("type",n.hidePassword?"password":"text"),u.Db(3),u.oc("ngClass",u.vc(36,ba,n.hidePassword?"fa-eye-slash":"fa-eye")),u.Db(1),u.oc("ngIf",!n.firstFormGroup.controls.retypePasswordCtrl.hasError("mismatch")&&""!=n.firstFormGroup.controls.retypePasswordCtrl.value),u.Db(2),u.Sc("",u.jc(29,26,"lang.passwordNotMatch")," !"),u.Db(2),u.oc("ngIf",n.passwordRules.renewal.enabled||n.passwordRules.historyLastUse.enabled),u.Db(3),u.oc("disabled",!n.firstFormGroup.valid),u.Db(1),u.Rc(u.jc(35,28,"lang.update")),u.Db(3),u.Rc(u.jc(38,30,"lang.cancel"))}}function pa(t,e){if(1&t&&(u.Wb(0,"div",62),u.Qc(1),u.Vb()),2&t){var a=u.hc(2);u.Db(1),u.Sc(" ",a.user.status,"")}}function fa(t,e){if(1&t){var a=u.Xb();u.Wb(0,"input",84),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(3).user.userId=t}))("keyup",(function(){return u.Dc(a),u.hc(3).setLowerUserId()})),u.ic(1,"translate"),u.ic(2,"translate"),u.Vb()}if(2&t){var n=u.hc(3);u.pc("title",u.jc(1,3,"lang.id")),u.pc("placeholder",u.jc(2,5,"lang.id")),u.oc("ngModel",n.user.userId)}}function ma(t,e){if(1&t&&(u.Rb(0,"input",85),u.ic(1,"translate"),u.ic(2,"translate")),2&t){var a=u.hc(3);u.pc("title",u.jc(1,3,"lang.id")),u.pc("value",a.user.user_id),u.pc("placeholder",u.jc(2,5,"lang.id"))}}var ga=function(){return["root_visible","root_invisible"]};function ha(t,e){if(1&t&&(u.Ub(0),u.Wb(1,"mat-option",86),u.Qc(2),u.Vb(),u.Tb()),2&t){var a=e.$implicit,n=u.hc(3);u.Db(1),u.oc("value",a.id)("disabled","standard"===n.headerService.user.mode&&u.uc(4,ga).indexOf(a.id)>-1)("title","standard"===n.headerService.user.mode&&u.uc(5,ga).indexOf(a.id)>-1?n.translate.instant("lang.mustSuperadmin"):""),u.Db(1),u.Sc(" ",a.label," ")}}function va(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div"),u.Wb(1,"mat-form-field"),u.Wb(2,"mat-label"),u.Qc(3),u.ic(4,"translate"),u.Vb(),u.Wb(5,"textarea",87),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(3).user.authorizedApi=t})),u.Vb(),u.Wb(6,"mat-hint"),u.Qc(7),u.ic(8,"translate"),u.Wb(9,"a",88),u.Qc(10),u.ic(11,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc(3);u.Db(3),u.Rc(u.jc(4,5,"lang.authorizedRoutes")),u.Db(2),u.oc("ngModel",n.user.authorizedApi),u.Db(2),u.Sc("",u.jc(8,7,"lang.authorizedRoutesInformations")," "),u.Db(2),u.qc("href","https://docs.maarch.org/gitbook/html/MaarchCourrier/",n.appVersion,"/guat/guat_architecture/API_REST/home.html",u.Gc),u.Db(1),u.Rc(u.jc(11,9,"lang.here"))}}function ya(t,e){if(1&t&&(u.Wb(0,"button",89),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){u.hc();var a=u.zc(1);u.oc("disabled",!a.form.valid),u.Db(1),u.Rc(u.jc(2,2,"lang.save"))}}function Da(t,e){if(1&t&&(u.Wb(0,"button",89),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){u.hc();var a=u.zc(1);u.oc("disabled",!a.form.valid),u.Db(1),u.Rc(u.jc(2,2,"lang.update"))}}function Va(t,e){if(1&t){var a=u.Xb();u.Wb(0,"form",63,64),u.dc("ngSubmit",(function(){return u.Dc(a),u.hc(2).onSubmit()})),u.Wb(2,"div",44),u.Wb(3,"div",65),u.Wb(4,"div",66),u.Wb(5,"div",67),u.Rb(6,"i",68),u.Vb(),u.Vb(),u.Wb(7,"div",69),u.Wb(8,"mat-form-field"),u.Oc(9,fa,3,7,"input",70),u.Oc(10,ma,3,7,"input",71),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(11,"div",44),u.Wb(12,"div",72),u.Wb(13,"mat-form-field"),u.Wb(14,"input",73),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).user.lastname=t})),u.ic(15,"translate"),u.ic(16,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(17,"div",72),u.Wb(18,"mat-form-field"),u.Wb(19,"input",74),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).user.firstname=t})),u.ic(20,"translate"),u.ic(21,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(22,"div",75),u.Wb(23,"mat-form-field"),u.Wb(24,"input",76),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).user.initials=t})),u.ic(25,"translate"),u.ic(26,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(27,"div",44),u.Wb(28,"div",65),u.Wb(29,"mat-form-field"),u.Wb(30,"input",77),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).user.phone=t})),u.ic(31,"translate"),u.ic(32,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(33,"div",44),u.Wb(34,"div",65),u.Wb(35,"mat-form-field"),u.Wb(36,"input",78),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).user.mail=t})),u.ic(37,"translate"),u.ic(38,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(39,"mat-accordion"),u.Wb(40,"mat-expansion-panel",79),u.Wb(41,"mat-expansion-panel-header"),u.Wb(42,"mat-panel-title",80),u.Qc(43),u.ic(44,"translate"),u.Vb(),u.Vb(),u.Wb(45,"div"),u.Wb(46,"mat-form-field"),u.Wb(47,"mat-label"),u.Qc(48),u.ic(49,"translate"),u.Vb(),u.Wb(50,"mat-select",81),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).user.mode=t})),u.Oc(51,ha,3,6,"ng-container",14),u.ic(52,"sortBy"),u.Vb(),u.Vb(),u.Vb(),u.Oc(53,va,12,11,"div",15),u.Vb(),u.Vb(),u.Wb(54,"div",82),u.Wb(55,"div",55),u.Oc(56,ya,3,4,"button",83),u.Oc(57,Da,3,4,"button",83),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.Db(9),u.oc("ngIf",n.creationMode),u.Db(1),u.oc("ngIf",!n.creationMode),u.Db(4),u.pc("title",u.jc(15,27,"lang.lastname")),u.pc("placeholder",u.jc(16,29,"lang.lastname")),u.oc("ngModel",n.user.lastname),u.Db(5),u.pc("title",u.jc(20,31,"lang.firstname")),u.pc("placeholder",u.jc(21,33,"lang.firstname")),u.oc("ngModel",n.user.firstname),u.Db(5),u.pc("title",u.jc(25,35,"lang.initials")),u.pc("placeholder",u.jc(26,37,"lang.initials")),u.oc("ngModel",n.user.initials),u.Db(6),u.pc("title",u.jc(31,39,"lang.phoneNumber")),u.pc("placeholder",u.jc(32,41,"lang.phoneNumber")),u.oc("ngModel",n.user.phone)("disabled",n.creationMode&&!n.canManagePersonalDatas||!n.creationMode&&(!n.canManagePersonalDatas||!n.canViewPersonalDatas)),u.Db(6),u.pc("title",u.jc(37,43,"lang.email")),u.pc("placeholder",u.jc(38,45,"lang.email")),u.oc("ngModel",n.user.mail),u.Db(4),u.oc("expanded",n.creationMode),u.Db(3),u.Sc(" ",u.jc(44,47,"lang.otherInformations")," "),u.Db(5),u.Rc(u.jc(49,49,"lang.accountType")),u.Db(2),u.oc("ngModel",n.user.mode)("disabled","standard"===n.headerService.user.mode&&u.uc(54,ga).indexOf(n.user.mode)>-1),u.Db(1),u.oc("ngForOf",u.kc(52,51,n.adminModes,"label")),u.Db(2),u.oc("ngIf","rest"===n.user.mode),u.Db(3),u.oc("ngIf",n.creationMode),u.Db(1),u.oc("ngIf",!n.creationMode)}}function Ca(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-list-item",91),u.Wb(1,"mat-slide-toggle",92),u.dc("change",(function(){u.Dc(a);var t=e.$implicit;return u.hc(3).toggleGroup(t)})),u.Qc(2),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit;u.Db(1),u.pc("id",n.group_id),u.oc("checked",1==n.checked)("disabled",!n.enabled),u.Db(1),u.Sc(" ",n.group_desc,"")}}function xa(t,e){if(1&t&&(u.Wb(0,"mat-tab",36),u.ic(1,"translate"),u.Wb(2,"mat-nav-list"),u.Oc(3,Ca,3,4,"mat-list-item",90),u.Vb(),u.Vb()),2&t){var a=u.hc(2);u.pc("label",u.jc(1,2,"lang.groups")),u.Db(3),u.oc("ngForOf",a.user.allGroups)}}function Ma(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-tab",36),u.ic(1,"translate"),u.Wb(2,"app-maarch-flat-tree",93,94),u.dc("afterSelectNode",(function(t){return u.Dc(a),u.hc(2).addEntity(t)}))("afterDeselectNode",(function(t){return u.Dc(a),u.hc(2).deleteEntity(t)})),u.Vb(),u.Vb()}2&t&&(u.pc("label",u.jc(1,3,"lang.entities")),u.Db(2),u.oc("selectionPropagation",!1)("openState","all"))}function Wa(t,e){1&t&&(u.Wb(0,"p",100),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc(" ",u.jc(2,1,"lang.selectAll")," "))}var Oa=function(){return["/rest/autocomplete/users"]};function _a(t,e){if(1&t){var a=u.Xb();u.Wb(0,"p",101),u.Wb(1,"button",102),u.ic(2,"translate"),u.Rb(3,"mat-icon",103),u.Rb(4,"mat-divider",104),u.Vb(),u.Wb(5,"button",105),u.dc("click",(function(){return u.Dc(a),u.hc(3).toggleBasket(!1)})),u.ic(6,"translate"),u.Rb(7,"mat-icon",106),u.Vb(),u.Wb(8,"button",107),u.dc("click",(function(){return u.Dc(a),u.hc(3).toggleBasket(!0)})),u.ic(9,"translate"),u.Rb(10,"mat-icon",108),u.Vb(),u.Wb(11,"mat-menu",109,110),u.Wb(13,"plugin-autocomplete",111),u.dc("triggerEvent",(function(t){return u.Dc(a),u.hc(3).addBasketRedirection(t)})),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.zc(12),i=u.hc(3);u.Db(1),u.pc("matTooltip",u.jc(2,9,"lang.redirectBaskets")),u.oc("matMenuTriggerFor",n),u.Db(3),u.oc("vertical",!0),u.Db(1),u.pc("matTooltip",u.jc(6,11,"lang.disableBasket")),u.Db(3),u.pc("matTooltip",u.jc(9,13,"lang.enableBasket")),u.Db(5),u.oc("labelPlaceholder",i.translate.instant("lang.redirectBaskets"))("routeDatas",u.uc(15,Oa))("targetSearchKey","idToDisplay")("subInfoKey","descriptionToDisplay")}}function Sa(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-icon",96),u.Wb(1,"mat-checkbox",118),u.dc("click",(function(t){return u.Dc(a),t.stopPropagation()}))("change",(function(t){u.Dc(a);var e=u.hc(2).$implicit,n=u.hc(3);return t?n.selectionBaskets.toggle(e):null})),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2).$implicit,i=u.hc(3);u.Db(1),u.oc("checked",i.selectionBaskets.isSelected(n))}}var ka=function(t){return{opacity:t}};function wa(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-list-item",113),u.Oc(1,Sa,2,1,"mat-icon",114),u.Wb(2,"h4",115),u.Wb(3,"span",116),u.dc("click",(function(){u.Dc(a);var t=u.hc().$implicit;return u.hc(3).selectionBaskets.toggle(t)})),u.Qc(4),u.Wb(5,"span",117),u.Qc(6),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc().$implicit;u.Db(1),u.oc("ngIf",n.enabled),u.Db(2),u.rc("matTooltip","",n.basket_name," [",n.group_desc,"]"),u.oc("ngStyle",u.vc(6,ka,n.allowed?"1":"0.5")),u.Db(1),u.Sc(" ",n.basket_name," "),u.Db(2),u.Rc(n.group_desc)}}function Ia(t,e){if(1&t&&(u.Ub(0),u.Oc(1,wa,7,8,"mat-list-item",112),u.Tb()),2&t){var a=e.$implicit;u.Db(1),u.oc("ngIf",null==a.userToDisplay)}}function ja(t,e){if(1&t){var a=u.Xb();u.Ub(0),u.Wb(1,"mat-list-item"),u.Rb(2,"mat-icon",119),u.Wb(3,"h4",120),u.Qc(4),u.Wb(5,"span",117),u.Qc(6),u.Vb(),u.Vb(),u.Wb(7,"p",20),u.Wb(8,"mat-form-field"),u.Rb(9,"input",121),u.ic(10,"translate"),u.Wb(11,"button",122),u.dc("click",(function(){u.Dc(a);var t=e.$implicit,n=e.index;return u.hc(3).delBasketRedirection(t,n)})),u.ic(12,"translate"),u.Rb(13,"mat-icon",123),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Tb()}if(2&t){var n=e.$implicit;u.Db(4),u.Sc("",n.basket_name," "),u.Db(2),u.Rc(n.group_desc),u.Db(3),u.rc("value","",u.jc(10,5,"lang.redirectedTo")," ",n.userToDisplay,""),u.Db(2),u.pc("matTooltip",u.jc(12,7,"lang.deleteRedirection"))}}function Ra(t,e){if(1&t){var a=u.Xb();u.Wb(0,"plugin-autocomplete",111),u.dc("triggerEvent",(function(t){u.Dc(a);var e=u.hc(),n=e.$implicit,i=e.index;return u.hc(3).reassignBasketRedirection(t,n,i)})),u.Vb()}if(2&t){var n=u.hc(4);u.oc("labelPlaceholder",n.translate.instant("lang.redirectBaskets"))("routeDatas",u.uc(4,Oa))("targetSearchKey","idToDisplay")("subInfoKey","descriptionToDisplay")}}function Ta(t,e){if(1&t){var a=u.Xb();u.Ub(0),u.Wb(1,"mat-list-item"),u.Rb(2,"mat-icon",124),u.Wb(3,"h4",120),u.Qc(4),u.Wb(5,"span",117),u.Qc(6),u.Vb(),u.Vb(),u.Wb(7,"p",20),u.Oc(8,Ra,1,5,"plugin-autocomplete",125),u.Wb(9,"mat-form-field"),u.Rb(10,"input",121),u.ic(11,"translate"),u.Wb(12,"button",122),u.dc("click",(function(){return e.$implicit.userToDisplay=null})),u.ic(13,"translate"),u.Rb(14,"mat-icon",126),u.Vb(),u.Wb(15,"button",122),u.dc("click",(function(){u.Dc(a);var t=e.$implicit,n=e.index;return u.hc(3).delBasketAssignRedirection(t,n)})),u.ic(16,"translate"),u.Rb(17,"mat-icon",123),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Tb()}if(2&t){var n=e.$implicit;u.Db(4),u.Sc("",n.basket_name," "),u.Db(2),u.Rc(n.group_desc),u.Db(2),u.oc("ngIf",null==n.userToDisplay),u.Db(2),u.rc("value","",u.jc(11,7,"lang.assignBy")," ",n.userToDisplay,""),u.Db(2),u.pc("matTooltip",u.jc(13,9,"lang.reassign")),u.Db(3),u.pc("matTooltip",u.jc(16,11,"lang.deleteAssignation"))}}function Pa(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-tab",36),u.ic(1,"translate"),u.Wb(2,"div",95),u.Wb(3,"mat-list"),u.Wb(4,"mat-list-item"),u.Wb(5,"mat-icon",96),u.Wb(6,"mat-checkbox",97),u.dc("change",(function(t){u.Dc(a);var e=u.hc(2);return t?e.masterToggleBaskets(t):null})),u.ic(7,"translate"),u.Vb(),u.Vb(),u.Oc(8,Wa,3,3,"p",98),u.Oc(9,_a,14,16,"p",99),u.Vb(),u.Rb(10,"mat-divider"),u.Oc(11,Ia,2,1,"ng-container",14),u.Vb(),u.Vb(),u.Wb(12,"div",95),u.Wb(13,"mat-tab-group"),u.Wb(14,"mat-tab",36),u.ic(15,"translate"),u.Wb(16,"mat-list"),u.Oc(17,ja,14,9,"ng-container",14),u.Vb(),u.Vb(),u.Vb(),u.Wb(18,"mat-tab-group"),u.Wb(19,"mat-tab",36),u.ic(20,"translate"),u.Wb(21,"mat-list"),u.Oc(22,Ta,18,13,"ng-container",14),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.pc("label",u.jc(1,10,"lang.baskets")),u.Db(6),u.pc("matTooltip",u.jc(7,12,"lang.selectAll")),u.oc("checked",n.selectionBaskets.hasValue()),u.Db(2),u.oc("ngIf",!n.selectionBaskets.hasValue()),u.Db(1),u.oc("ngIf",n.selectionBaskets.hasValue()),u.Db(2),u.oc("ngForOf",n.user.baskets),u.Db(3),u.pc("label",u.jc(15,14,"lang.basketsRedirected")),u.Db(3),u.oc("ngForOf",n.user.redirectedBaskets),u.Db(2),u.pc("label",u.jc(20,16,"lang.basketsAssigned")),u.Db(3),u.oc("ngForOf",n.user.assignedBaskets)}}function Qa(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",146),u.dc("click",(function(){return u.Dc(a),u.hc(3).clickOnUploader("uploadSignFile")}))("dragover",(function(){return u.Dc(a),u.hc(3).highlightMe=!0}))("dragleave",(function(){return u.Dc(a),u.hc(3).highlightMe=!1}))("onDropSuccess",(function(t){u.Dc(a);var e=u.hc(3);return e.test(t),e.highlightMe=!1})),u.ic(1,"translate"),u.Qc(2),u.ic(3,"translate"),u.Vb()}if(2&t){var n=u.hc(3);u.Ib("dndFileHighlighted",n.highlightMe),u.pc("matTooltip",u.jc(1,4,"lang.uploadSignFileInfo")),u.Db(2),u.Sc(" ",u.jc(3,6,"lang.uploadSignFile")," ")}}function Fa(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",147),u.Wb(1,"mat-card",148),u.Wb(2,"mat-card-content",55),u.Wb(3,"mat-form-field",149),u.Wb(4,"input",150),u.dc("ngModelChange",(function(t){return u.Dc(a),e.$implicit.signature_label=t}))("change",(function(){u.Dc(a);var t=e.index;return u.hc(3).updateSignature(t)})),u.ic(5,"translate"),u.Vb(),u.Wb(6,"button",151),u.dc("click",(function(){u.Dc(a);var t=e.$implicit;return u.hc(3).deleteSignature(t)})),u.ic(7,"translate"),u.Rb(8,"mat-icon",152),u.Vb(),u.Vb(),u.Rb(9,"img",153),u.ic(10,"async"),u.ic(11,"secureUrl"),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit,i=u.hc(3);u.Db(4),u.pc("placeholder",u.jc(5,6,"lang.label")),u.oc("ngModel",n.signature_label)("disabled",!i.canManagePersonalDatas),u.Db(2),u.pc("matTooltip",u.jc(7,8,"lang.delete")),u.oc("disabled",!i.canManagePersonalDatas),u.Db(3),u.oc("src",u.jc(10,10,u.jc(11,12,"../rest/users/"+i.user.id+"/signatures/"+n.id+"/content")),u.Gc)}}function La(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",154),u.dc("click",(function(){return u.Dc(a),u.hc(3).syncMP()})),u.ic(1,"translate"),u.Rb(2,"mat-icon",155),u.Vb()}if(2&t){var n=u.hc(3);u.pc("matTooltip",u.jc(1,4,"lang.syncSignsToMaarchParapheur")),u.oc("disabled",!n.user.external_id.maarchParapheur||n.loadingSign),u.Db(2),u.Ib("fa-spin",n.loadingSign)}}function Ea(t,e){if(1&t&&(u.Wb(0,"div",156),u.Rb(1,"img",157),u.Vb()),2&t){var a=u.hc(3);u.Db(1),u.pc("src",a.signatureModel.base64ForJs,u.Gc)}}function Aa(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-tab",127),u.ic(1,"translate"),u.Oc(2,Qa,4,8,"div",128),u.Wb(3,"div",129),u.Wb(4,"div",130),u.Oc(5,Fa,12,14,"div",131),u.Vb(),u.Wb(6,"div"),u.Oc(7,La,3,6,"button",132),u.Vb(),u.Vb(),u.Wb(8,"form",133,134),u.dc("ngSubmit",(function(){return u.Dc(a),u.hc(2).submitSignature()})),u.Wb(10,"div",135),u.Wb(11,"input",136),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).signatureModel.label=t})),u.ic(12,"translate"),u.Vb(),u.Wb(13,"div",137),u.Wb(14,"div",44),u.Wb(15,"input",138),u.dc("change",(function(t){return u.Dc(a),u.hc(2).uploadSignatureTrigger(t)})),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(16,"div",139),u.Wb(17,"button",140),u.Rb(18,"i",141),u.Vb(),u.Vb(),u.Wb(19,"div",142),u.Wb(20,"div",143),u.dc("click",(function(){return u.Dc(a),u.hc(2).clickOnUploader("uploadSignFile")})),u.Qc(21),u.ic(22,"translate"),u.Rb(23,"i",144),u.Qc(24," ( < 2MB ) "),u.Vb(),u.Vb(),u.Oc(25,Ea,2,1,"div",145),u.Vb(),u.Vb()}if(2&t){var n=u.zc(9),i=u.hc(2);u.pc("label",u.jc(1,11,"lang.signatures")),u.oc("disabled",!i.canViewPersonalDatas),u.Db(2),u.oc("ngIf",i.canManagePersonalDatas),u.Db(3),u.oc("ngForOf",i.user.signatures),u.Db(2),u.oc("ngIf",i.user.signatures.length>0&&i.canManagePersonalDatas),u.Db(4),u.pc("placeholder",u.jc(12,13,"lang.label")),u.oc("ngModel",i.signatureModel.label),u.Db(6),u.oc("disabled",!n.form.valid||!i.signatureModel.size),u.Db(2),u.oc("ngClass",u.vc(17,ba,""!=i.signatureModel.size?"col-md-10":"col-md-12")),u.Db(2),u.Sc(" ",u.jc(22,15,"lang.clickOn")," "),u.Db(4),u.oc("ngIf",i.signatureModel.size)}}function Ua(t,e){1&t&&(u.Wb(0,"mat-header-cell",182),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc(" ",u.jc(2,1,"lang.date")," "))}function za(t,e){if(1&t&&(u.Wb(0,"mat-cell",130),u.Qc(1),u.ic(2,"date"),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",u.kc(2,1,a.event_date,"dd/MM/y HH:mm"),"")}}function $a(t,e){1&t&&(u.Wb(0,"mat-header-cell",130),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc("",u.jc(2,1,"lang.technicalId")," "))}function Na(t,e){if(1&t&&(u.Wb(0,"mat-cell",130),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc("",a.record_id," ")}}function Ha(t,e){1&t&&(u.Wb(0,"mat-header-cell",183),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc(" ",u.jc(2,1,"lang.description"),""))}function Ba(t,e){if(1&t&&(u.Wb(0,"mat-cell",184),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.info," ")}}function Xa(t,e){1&t&&(u.Wb(0,"mat-header-cell",182),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc(" ",u.jc(2,1,"lang.ip")," "))}function Ga(t,e){if(1&t&&(u.Wb(0,"mat-cell",130),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.remote_ip," ")}}function qa(t,e){1&t&&u.Rb(0,"mat-header-row")}function Ka(t,e){1&t&&u.Rb(0,"mat-row")}function Ja(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-tab",36),u.ic(1,"translate"),u.Wb(2,"div",158),u.Wb(3,"div"),u.Wb(4,"div",159),u.Wb(5,"div",160),u.Wb(6,"mat-form-field"),u.Wb(7,"input",161),u.dc("keyup",(function(t){return u.Dc(a),u.hc(2).applyFilter(t.target.value)})),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(9,"div",160),u.Rb(10,"mat-paginator",162,163),u.Vb(),u.Vb(),u.Wb(12,"mat-table",164,165),u.Ub(14,166),u.Oc(15,Ua,3,3,"mat-header-cell",167),u.Oc(16,za,3,4,"mat-cell",168),u.Tb(),u.Ub(17,169),u.Oc(18,$a,3,3,"mat-header-cell",170),u.Oc(19,Na,2,1,"mat-cell",168),u.Tb(),u.Ub(20,171),u.Oc(21,Ha,3,3,"mat-header-cell",172),u.Oc(22,Ba,2,1,"mat-cell",173),u.Tb(),u.Ub(23,174),u.Oc(24,Xa,3,3,"mat-header-cell",167),u.Oc(25,Ga,2,1,"mat-cell",168),u.Tb(),u.Oc(26,qa,1,0,"mat-header-row",175),u.Oc(27,Ka,1,0,"mat-row",176),u.Vb(),u.Wb(28,"div",159),u.Wb(29,"div",177),u.Wb(30,"mat-form-field"),u.Wb(31,"input",178),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).minDate=t})),u.ic(32,"translate"),u.Vb(),u.Rb(33,"mat-datepicker-toggle",179),u.Rb(34,"mat-datepicker",180,181),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.zc(35),i=u.hc(2);u.pc("label",u.jc(1,13,"lang.history")),u.Db(7),u.pc("placeholder",u.jc(8,15,"lang.filterBy")),u.Db(3),u.oc("length",100)("hidePageSize",!0)("pageSize",10),u.Db(2),u.oc("dataSource",i.dataSource),u.Db(14),u.oc("matHeaderRowDef",i.displayedColumns),u.Db(1),u.oc("matRowDefColumns",i.displayedColumns),u.Db(4),u.pc("placeholder",u.jc(32,17,"lang.since")),u.oc("ngModel",i.minDate)("matDatepicker",n),u.Db(2),u.oc("for",n),u.Db(1),u.oc("startAt",i.minDate)}}function Ya(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-card",34),u.Wb(1,"mat-tab-group",35),u.dc("selectedIndexChange",(function(t){return u.Dc(a),u.hc().selectedTabIndex=t}))("selectedTabChange",(function(){return u.Dc(a),u.hc().initService()})),u.Wb(2,"mat-tab",36),u.ic(3,"translate"),u.Oc(4,ua,39,38,"div",37),u.Oc(5,pa,2,1,"div",38),u.Oc(6,Va,58,55,"form",39),u.Vb(),u.Oc(7,xa,4,4,"mat-tab",40),u.Oc(8,Ma,4,5,"mat-tab",40),u.Oc(9,Pa,23,18,"mat-tab",40),u.Oc(10,Aa,26,19,"mat-tab",41),u.Oc(11,Ja,36,19,"mat-tab",40),u.Vb(),u.Vb()}if(2&t){var n=u.hc();u.Db(1),u.oc("selectedIndex",n.selectedTabIndex),u.Db(1),u.pc("label",u.jc(3,10,"lang.informations")),u.Db(2),u.oc("ngIf",n.showPassword),u.Db(1),u.oc("ngIf","ABS"==n.user.status&&!n.showPassword),u.Db(1),u.oc("ngIf",!n.showPassword),u.Db(1),u.oc("ngIf",!n.creationMode),u.Db(1),u.oc("ngIf",!n.creationMode),u.Db(1),u.oc("ngIf",!n.creationMode),u.Db(1),u.oc("ngIf",!n.creationMode),u.Db(1),u.oc("ngIf",!n.creationMode)}}function Za(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-list-item"),u.Rb(1,"mat-icon",185),u.Wb(2,"h4",20),u.Qc(3),u.Vb(),u.Wb(4,"p",20),u.Wb(5,"mat-form-field",186),u.Wb(6,"input",187),u.dc("ngModelChange",(function(t){return u.Dc(a),e.$implicit.role=t}))("change",(function(){u.Dc(a);var t=e.$implicit;return u.hc().updateGroup(t)})),u.ic(7,"translate"),u.ic(8,"translate"),u.Vb(),u.Wb(9,"mat-hint",188),u.ic(10,"translate"),u.Qc(11),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit;u.Db(3),u.Rc(n.group_desc),u.Db(3),u.pc("title",u.jc(7,6,"lang.role")),u.pc("placeholder",u.jc(8,8,"lang.role")),u.oc("ngModel",n.role),u.Db(3),u.pc("matTooltip",u.jc(10,10,"lang.perimeter")),u.Db(2),u.Rc(n.maarch_comment)}}function tn(t,e){1&t&&u.Rb(0,"mat-icon",193)}function en(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-icon",194),u.Wb(1,"button",195),u.dc("click",(function(){u.Dc(a);var t=u.hc().$implicit;return u.hc().updatePrimaryEntity(t)})),u.ic(2,"translate"),u.Rb(3,"mat-icon",196),u.Vb(),u.Vb()}2&t&&(u.Db(1),u.pc("matTooltip",u.jc(2,1,"lang.entityTooglePrimary")))}function an(t,e){1&t&&(u.Wb(0,"span",117),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.primary")))}var nn=function(t){return{"font-weight":t}};function on(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-list-item"),u.Oc(1,tn,1,0,"mat-icon",189),u.Oc(2,en,4,3,"mat-icon",190),u.Wb(3,"h4",191),u.Qc(4),u.Oc(5,an,3,3,"span",192),u.Vb(),u.Wb(6,"p",20),u.Wb(7,"mat-form-field",186),u.Wb(8,"input",187),u.dc("ngModelChange",(function(t){return u.Dc(a),e.$implicit.user_role=t}))("change",(function(){u.Dc(a);var t=e.$implicit;return u.hc().updateEntity(t)})),u.ic(9,"translate"),u.ic(10,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit;u.Db(1),u.oc("ngIf","Y"==n.primary_entity),u.Db(1),u.oc("ngIf","Y"!=n.primary_entity),u.Db(1),u.pc("matTooltip",n.entity_label),u.oc("ngStyle",u.vc(13,nn,"Y"==n.primary_entity?"bold":"normal")),u.Db(1),u.Sc(" ",n.entity_label," "),u.Db(1),u.oc("ngIf","Y"==n.primary_entity),u.Db(3),u.pc("title",u.jc(9,9,"lang.role")),u.pc("placeholder",u.jc(10,11,"lang.role")),u.oc("ngModel",n.user_role)}}function rn(t,e){1&t&&(u.Rb(0,"div",15),u.ic(1,"translate")),2&t&&u.oc("innerHTML",u.jc(1,1,"lang.redirectConfidentialInfo"),u.Ec)}function cn(t,e){1&t&&(u.Rb(0,"div",15),u.ic(1,"translate")),2&t&&u.oc("innerHTML",u.jc(1,1,"lang.redirectModelInfo"),u.Ec)}function ln(t,e){if(1&t){var a=u.Xb();u.Wb(0,"plugin-autocomplete",16),u.dc("triggerEvent",(function(t){return u.Dc(a),u.hc().setRedirectUser(t)})),u.ic(1,"translate"),u.ic(2,"translate"),u.Vb()}2&t&&u.oc("labelPlaceholder",u.jc(1,5,"lang.userReplacement"))("labelList",u.jc(2,7,"lang.availableUsers"))("routeDatas",u.uc(9,Oa))("targetSearchKey","idToDisplay")("subInfoKey","descriptionToDisplay")}function sn(t,e){1&t&&(u.Wb(0,"span"),u.Wb(1,"em"),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Vb()),2&t&&(u.Db(2),u.Rc(u.jc(3,1,"lang.doNothingRedirectInformations")))}function dn(t,e){1&t&&(u.Rb(0,"span",17),u.ic(1,"translate")),2&t&&u.oc("innerHTML",u.jc(1,1,"lang.removeUserRedirectInformations"),u.Ec)}function bn(t,e){1&t&&(u.Wb(0,"span"),u.Wb(1,"em"),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Vb()),2&t&&(u.Db(2),u.Rc(u.jc(3,1,"lang.reaffectUserRedirectInformations")))}var un,pn,fn=((pn=function(){function t(e,a,n,i,o,r,c,l,s,d,b,u){var p=this;_classCallCheck(this,t),this.translate=e,this.http=a,this.route=n,this.router=i,this.zone=o,this.notify=r,this.dialog=c,this.headerService=l,this._formBuilder=s,this.appService=d,this.privilegeService=b,this.viewContainerRef=u,this.loading=!1,this.highlightMe=!1,this.config={},this.mode="",this.user={mode:"standard",authorizedApi:""},this._search="",this.signatureModel={base64:"",base64ForJs:"",name:"",type:"",size:0,label:""},this.userAbsenceModel=[],this.userList=[],this.maarchParapheurLink={login:"",picture:""},this.selectedSignature=-1,this.selectedSignatureLabel="",this.loadingSign=!1,this.data=[],this.CurrentYear=(new Date).getFullYear(),this.currentMonth=(new Date).getMonth()+1,this.minDate=new Date,this.ruleText="",this.validPassword=!1,this.showPassword=!1,this.hidePassword=!0,this.passwordModel={currentPassword:"",newPassword:"",reNewPassword:""},this.passwordRules={minLength:{enabled:!1,value:0},complexityUpper:{enabled:!1,value:0},complexityNumber:{enabled:!1,value:0},complexitySpecial:{enabled:!1,value:0},renewal:{enabled:!1,value:0},historyLastUse:{enabled:!1,value:0}},this.displayedColumns=["event_date","record_id","info","remote_ip"],this.dataSource=new q.p(this.data),this.selectedTabIndex=0,this.maarchParapheurConnectionStatus=!0,this.canViewPersonalDatas=!1,this.canManagePersonalDatas=!1,this.adminModes=[{id:"standard",label:this.translate.instant("lang.standard")},{id:"root_visible",label:this.translate.instant("lang.root_visible")},{id:"root_invisible",label:this.translate.instant("lang.root_invisible")},{id:"rest",label:this.translate.instant("lang.rest")}],this.appVersion=Le.a.VERSION.split(".")[0]+"."+Le.a.VERSION.split(".")[1],this.selectionBaskets=new Ie.c(!0,[]),window.angularUserAdministrationComponent={componentAfterUpload:function(t){return p.processAfterUpload(t)}}}return _createClass(t,[{key:"applyFilter",value:function(t){t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t}},{key:"masterToggleBaskets",value:function(t){var e=this;t.checked?this.user.baskets.forEach((function(t){t.userToDisplay||e.selectionBaskets.select(t)})):this.selectionBaskets.clear()}},{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.route.params.subscribe((function(e){void 0===e.id?(t.headerService.setHeader(t.translate.instant("lang.userCreation")),t.creationMode=!0,t.canViewPersonalDatas=!1,t.canManagePersonalDatas=t.privilegeService.hasCurrentUserPrivilege("manage_personal_data"),t.loading=!1):(t.creationMode=!1,t.serialId=e.id,t.http.get("../rest/users/"+t.serialId+"/details").subscribe((function(e){t.user=e,"rest"===t.user.mode&&(t.user.authorizedApi=t.user.authorizedApi.join("\n")),t.headerService.user.id===t.user.id?(t.canViewPersonalDatas=!0,t.canManagePersonalDatas=!0):(t.canViewPersonalDatas=t.privilegeService.hasCurrentUserPrivilege("view_personal_data"),t.canManagePersonalDatas=t.privilegeService.hasCurrentUserPrivilege("manage_personal_data")),t.canManagePersonalDatas&&(t.canViewPersonalDatas=!0),t.canViewPersonalDatas||(t.user.phone="****"),t.data=e.history,t.userId=e.user_id,t.minDate=new Date(t.CurrentYear+"-"+t.currentMonth+"-01"),t.headerService.setHeader(t.translate.instant("lang.userModification"),e.firstname+" "+e.lastname),void 0!==t.user.external_id.maarchParapheur&&t.checkInfoMaarchParapheurAccount(),t.loading=!1,setTimeout((function(){t.dataSource=new q.p(t.data),t.dataSource.paginator=t.paginator,t.dataSource.sort=t.sort}),0)}),(function(e){t.notify.handleErrors(e)})))}))}},{key:"checkInfoMaarchParapheurAccount",value:function(){var t=this;this.http.get("../rest/users/"+this.serialId+"/statusInMaarchParapheur").subscribe((function(e){t.maarchParapheurLink.login=e.link,t.loading=!1,""!==t.maarchParapheurLink.login?t.loadAvatarMaarchParapheur(t.user.external_id.maarchParapheur):t.maarchParapheurConnectionStatus=!1}))}},{key:"linkMaarchParapheurAccount",value:function(){var t=this;this.dialog.open(Fe,{panelClass:"maarch-modal",autoFocus:!1,data:{user:this.user}}).afterClosed().subscribe((function(e){e&&(e.inMaarchParapheur?t.linkAccountToMaarchParahpeur(e.id):t.createAccountToMaarchParahpeur(e.id,e.login))}))}},{key:"linkAccountToMaarchParahpeur",value:function(t){var e=this;this.http.put("../rest/users/"+this.serialId+"/linkToMaarchParapheur",{maarchParapheurUserId:t}).subscribe((function(){e.user.canCreateMaarchParapheurUser=!1,e.user.external_id.maarchParapheur=t,e.checkInfoMaarchParapheurAccount(),e.notify.success(e.translate.instant("lang.accountLinked"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"createAccountToMaarchParahpeur",value:function(t,e){var a=this;this.http.put("../rest/users/"+t+"/createInMaarchParapheur",{login:e}).subscribe((function(t){a.user.canCreateMaarchParapheurUser=!1,a.user.external_id.maarchParapheur=t.externalId,a.checkInfoMaarchParapheurAccount(),a.notify.success(a.translate.instant("lang.accountAdded"))}),(function(t){"Login already exists"===t.error.errors&&(t.error.errors=a.translate.instant("lang.loginAlreadyExistsInMaarchParapheur")),a.notify.error(t.error.errors)}))}},{key:"loadAvatarMaarchParapheur",value:function(t){var e=this;this.http.get("../rest/maarchParapheur/user/"+t+"/picture").subscribe((function(t){e.maarchParapheurLink.picture=t.picture}),(function(t){e.notify.handleErrors(t)}))}},{key:"unlinkMaarchParapheurAccount",value:function(){var t=this;confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.unlinkAccount"))&&this.http.put("../rest/users/"+this.serialId+"/unlinkToMaarchParapheur",{}).subscribe((function(){t.user.canCreateMaarchParapheurUser=!0,t.maarchParapheurLink.login="",t.maarchParapheurLink.picture="",t.notify.success(t.translate.instant("lang.accountUnlinked")),t.maarchParapheurConnectionStatus=!0}),(function(e){t.notify.error(e.error.errors)}))}},{key:"toogleRedirect",value:function(t){var e=this;$("#redirectUser_"+t.group_id+"_"+t.basket_id).toggle(),this.http.get("../rest/users").subscribe((function(t){}),(function(t){e.notify.handleErrors(t)}))}},{key:"initService",value:function(){0===this.maarchTree.rawData.length&&this.maarchTree.initData(this.user.allEntities.map((function(t){return Object.assign(Object.assign({},t),{parent_id:t.parent})})))}},{key:"processAfterUpload",value:function(t){var e=this;this.zone.run((function(){return e.resfreshUpload(t)}))}},{key:"resfreshUpload",value:function(t){this.signatureModel.size<=2e6?(this.signatureModel.base64=t.replace(/^data:.*?;base64,/,""),this.signatureModel.base64ForJs=t):(this.signatureModel.name="",this.signatureModel.size=0,this.signatureModel.type="",this.signatureModel.base64="",this.signatureModel.base64ForJs="",this.notify.error("Taille maximum de fichier d\xe9pass\xe9e (2 MB)"))}},{key:"clickOnUploader",value:function(t){$("#"+t).click()}},{key:"uploadSignatureTrigger",value:function(t){var e=this;if(t.target.files&&t.target.files[0]){var a=new FileReader;this.signatureModel.name=t.target.files[0].name,this.signatureModel.size=t.target.files[0].size,this.signatureModel.type=t.target.files[0].type,""===this.signatureModel.label&&(this.signatureModel.label=this.signatureModel.name),a.readAsDataURL(t.target.files[0]),a.onload=function(t){window.angularUserAdministrationComponent.componentAfterUpload(t.target.result),e.submitSignature()}}}},{key:"displaySignatureEditionForm",value:function(t){this.selectedSignature=t,this.selectedSignatureLabel=this.user.signatures[t].signature_label}},{key:"resendActivationNotification",value:function(){var t=this;confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.sendActivationNotification"))&&this.http.put("../rest/users/"+this.serialId+"/accountActivationNotification",{}).subscribe((function(e){t.notify.success(t.translate.instant("lang.activationNotificationSend"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"toggleGroup",value:function(t){var e=this;!0===$("#"+t.group_id+"-input").is(":checked")?this.http.post("../rest/users/"+this.serialId+"/groups",{groupId:t.group_id,role:t.role}).subscribe((function(t){return Object(yt.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.user.groups=t.groups,this.user.baskets=t.baskets,e.t0=this.headerService.user.id==this.serialId,!e.t0){e.next=7;break}return e.next=6,this.headerService.resfreshCurrentUser();case 6:this.privilegeService.resfreshUserShortcuts();case 7:this.notify.success(this.translate.instant("lang.groupAdded"));case 8:case"end":return e.stop()}}),e,this)})))}),(function(t){e.notify.error(t.error.errors)})):this.http.delete("../rest/users/"+this.serialId+"/groups/"+t.group_id).subscribe((function(t){return Object(yt.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.user.groups=t.groups,this.user.baskets=t.baskets,this.user.redirectedBaskets=t.redirectedBaskets,e.t0=this.headerService.user.id==this.serialId,!e.t0){e.next=8;break}return e.next=7,this.headerService.resfreshCurrentUser();case 7:this.privilegeService.resfreshUserShortcuts();case 8:this.notify.success(this.translate.instant("lang.groupDeleted"));case 9:case"end":return e.stop()}}),e,this)})))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"updateGroup",value:function(t){var e=this;this.http.put("../rest/users/"+this.serialId+"/groups/"+t.group_id,t).subscribe((function(t){e.notify.success(e.translate.instant("lang.groupUpdated"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"addEntity",value:function(t){var e=this;t.forEach((function(t){e.http.post("../rest/users/"+e.serialId+"/entities",{entityId:t.entity_id,role:""}).subscribe((function(t){e.user.entities=t.entities,e.user.allEntities=t.allEntities,e.headerService.user.id==e.serialId&&e.headerService.resfreshCurrentUser(),e.notify.success(e.translate.instant("lang.entityAdded"))}),(function(t){e.notify.error(t.error.errors)}))}))}},{key:"updateEntity",value:function(t){var e=this;this.http.put("../rest/users/"+this.serialId+"/entities/"+t.entity_id,t).subscribe((function(){e.notify.success(e.translate.instant("lang.entityUpdated"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"updatePrimaryEntity",value:function(t){var e=this;this.http.put("../rest/users/"+this.serialId+"/entities/"+t.entity_id+"/primaryEntity",{}).subscribe((function(a){e.user.entities=a.entities,e.notify.success(e.translate.instant("lang.entityTooglePrimary")+" \xab "+t.entity_id+" \xbb")}),(function(t){e.notify.error(t.error.errors)}))}},{key:"deleteEntity",value:function(t){var e=this;t.forEach((function(t){var a=t.entity_id;e.http.get("../rest/users/"+e.serialId+"/entities/"+a).subscribe((function(n){n.hasConfidentialityInstances||n.hasListTemplates?(e.config={panelClass:"maarch-modal",data:{hasConfidentialityInstances:n.hasConfidentialityInstances,hasListTemplates:n.hasListTemplates}},e.dialogRef=e.dialog.open(mn,e.config),e.dialogRef.afterClosed().subscribe((function(n){e.mode="delete",n?(e.mode=n.processMode,e.http.request("DELETE","../rest/users/"+e.serialId+"/entities/"+a,{body:{mode:e.mode,newUser:n.newUser}}).subscribe((function(t){e.user.entities=t.entities,e.user.allEntities=t.allEntities,e.headerService.user.id==e.serialId&&e.headerService.resfreshCurrentUser(),e.notify.success(e.translate.instant("lang.entityDeleted"))}),(function(t){e.notify.error(t.error.errors)}))):(e.maarchTree.toggleNode(e.maarchTree.dataSource.data,{selected:!0,opened:!0},[t.id]),e.mode=""),e.dialogRef=null}))):e.http.delete("../rest/users/"+e.serialId+"/entities/"+a).subscribe((function(t){e.user.entities=t.entities,e.user.allEntities=t.allEntities,e.headerService.user.id==e.serialId&&e.headerService.resfreshCurrentUser(),e.notify.success(e.translate.instant("lang.entityDeleted"))}),(function(t){e.notify.error(t.error.errors)}))}),(function(t){e.notify.error(t.error.errors)}))}))}},{key:"submitSignature",value:function(){var t=this;this.http.post("../rest/users/"+this.serialId+"/signatures",this.signatureModel).subscribe((function(e){t.user.signatures=e.signatures,t.notify.success(t.translate.instant("lang.signAdded")),t.signatureModel={base64:"",base64ForJs:"",name:"",type:"",size:0,label:""}}),(function(e){t.notify.error(e.error.errors)}))}},{key:"updateSignature",value:function(t){var e=this;this.http.put("../rest/users/"+this.serialId+"/signatures/"+this.user.signatures[t].id,{label:this.user.signatures[t].signature_label}).subscribe((function(a){e.user.signatures[t].signature_label=a.signature.signature_label,e.notify.success(e.translate.instant("lang.signUpdated"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"deleteSignature",value:function(t){var e=this;confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+t.signature_label+" \xbb")&&this.http.delete("../rest/users/"+this.serialId+"/signatures/"+t.id).subscribe((function(t){e.user.signatures=t.signatures,e.notify.success(e.translate.instant("lang.signDeleted"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"test",value:function(t){var e=this;if(t.mouseEvent.dataTransfer.files&&t.mouseEvent.dataTransfer.files[0]){var a=new FileReader;this.signatureModel.name=t.mouseEvent.dataTransfer.files[0].name,this.signatureModel.size=t.mouseEvent.dataTransfer.files[0].size,this.signatureModel.type=t.mouseEvent.dataTransfer.files[0].type,""===this.signatureModel.label&&(this.signatureModel.label=this.signatureModel.name),a.readAsDataURL(t.mouseEvent.dataTransfer.files[0]),a.onload=function(t){window.angularUserAdministrationComponent.componentAfterUpload(t.target.result),e.submitSignature()}}}},{key:"addBasketRedirection",value:function(t){var e=this,a=[];this.selectionBaskets.selected.forEach((function(e){a.push({actual_user_id:t.serialId,basket_id:e.basket_id,group_id:e.groupSerialId,originalOwner:null})})),confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.redirectBasket"))&&this.http.post("../rest/users/"+this.serialId+"/redirectedBaskets",a).subscribe((function(t){e.user.baskets=t.baskets,e.user.redirectedBaskets=t.redirectedBaskets,e.selectionBaskets.clear(),e.notify.success(e.translate.instant("lang.basketUpdated"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"reassignBasketRedirection",value:function(t,e,a){var n=this;confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.redirectBasket"))&&this.http.post("../rest/users/"+this.serialId+"/redirectedBaskets",[{actual_user_id:t.serialId,basket_id:e.basket_id,group_id:e.group_id,originalOwner:e.owner_user_id}]).subscribe((function(t){n.user.baskets=t.baskets,n.user.assignedBaskets.splice(a,1),n.notify.success(n.translate.instant("lang.basketUpdated"))}),(function(t){n.notify.error(t.error.errors)}))}},{key:"delBasketRedirection",value:function(t,e){var a=this;confirm(this.translate.instant("lang.confirmAction"))&&this.http.delete("../rest/users/"+this.serialId+"/redirectedBaskets?redirectedBasketIds[]="+t.id).subscribe((function(t){a.user.baskets=t.baskets,a.user.redirectedBaskets.splice(e,1),a.notify.success(a.translate.instant("lang.basketUpdated"))}),(function(t){a.notify.error(t.error.errors)}))}},{key:"delBasketAssignRedirection",value:function(t,e){var a=this;confirm(this.translate.instant("lang.confirmAction"))&&this.http.delete("../rest/users/"+this.serialId+"/redirectedBaskets?redirectedBasketIds[]="+t.id).subscribe((function(t){a.user.baskets=t.baskets,a.user.assignedBaskets.splice(e,1),a.notify.success(a.translate.instant("lang.basketUpdated"))}),(function(t){a.notify.error(t.error.errors)}))}},{key:"toggleBasket",value:function(t){var e=this,a=[];this.user.baskets.forEach((function(n){e.selectionBaskets.selected.forEach((function(e){n.basket_id===e.basket_id&&n.group_id===e.group_id&&n.allowed!==t&&(n.allowed=t,a.push({basketId:n.basket_id,groupSerialId:n.groupSerialId,allowed:t}))}))})),a.length>0&&this.http.put("../rest/users/"+this.serialId+"/baskets",{baskets:a}).subscribe((function(t){e.selectionBaskets.clear(),e.notify.success(e.translate.instant("lang.basketsUpdated"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"activateAbsence",value:function(){var t=this;this.http.put("../rest/users/"+this.serialId+"/status",{status:"ABS"}).subscribe((function(e){t.user.status=e.user.status,t.userAbsenceModel=[],t.notify.success(t.translate.instant("lang.absOn"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"desactivateAbsence",value:function(){var t=this;this.http.put("../rest/users/"+this.serialId+"/status",{status:"OK"}).subscribe((function(e){t.user.status=e.user.status,t.notify.success(t.translate.instant("lang.absOff"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"getErrorMessage",value:function(){return this.firstFormGroup.controls.retypePasswordCtrl.setErrors(this.firstFormGroup.controls.newPasswordCtrl.value!==this.firstFormGroup.controls.retypePasswordCtrl.value?{mismatch:!0}:null),this.firstFormGroup.controls.newPasswordCtrl.hasError("required")?this.translate.instant("lang.requiredField")+" !":this.firstFormGroup.controls.newPasswordCtrl.hasError("minlength")&&this.passwordRules.minLength.enabled?this.passwordRules.minLength.value+" "+this.translate.instant("lang.passwordminLength")+" !":null!=this.firstFormGroup.controls.newPasswordCtrl.errors&&void 0!==this.firstFormGroup.controls.newPasswordCtrl.errors.complexityUpper&&this.passwordRules.complexityUpper.enabled?this.translate.instant("lang.passwordcomplexityUpper")+" !":null!=this.firstFormGroup.controls.newPasswordCtrl.errors&&void 0!==this.firstFormGroup.controls.newPasswordCtrl.errors.complexityNumber&&this.passwordRules.complexityNumber.enabled?this.translate.instant("lang.passwordcomplexityNumber")+" !":null!=this.firstFormGroup.controls.newPasswordCtrl.errors&&void 0!==this.firstFormGroup.controls.newPasswordCtrl.errors.complexitySpecial&&this.passwordRules.complexitySpecial.enabled?this.translate.instant("lang.passwordcomplexitySpecial")+" !":(this.firstFormGroup.controls.newPasswordCtrl.setErrors(null),this.validPassword=!0,"")}},{key:"matchValidator",value:function(t){return t.controls.newPasswordCtrl.value!==t.controls.retypePasswordCtrl.value&&(t.controls.retypePasswordCtrl.setErrors({mismatch:!0}),{mismatch:!0})}},{key:"regexValidator",value:function(t,e){return function(a){return a.value?t.test(a.value)?null:e:null}}},{key:"changePasswd",value:function(){var t=this;this.http.get("../rest/passwordRules").subscribe((function(e){var a=[],n=[],i=[];a.push(c.I.required),e.rules.forEach((function(e){"minLength"===e.label?(t.passwordRules.minLength.enabled=e.enabled,t.passwordRules.minLength.value=e.value,e.enabled&&(a.push(c.I.minLength(t.passwordRules.minLength.value)),n.push(e.value+" "+t.translate.instant("lang.password"+e.label)))):"complexityUpper"===e.label?(t.passwordRules.complexityUpper.enabled=e.enabled,t.passwordRules.complexityUpper.value=e.value,e.enabled&&(a.push(t.regexValidator(new RegExp("[A-Z]"),{complexityUpper:""})),n.push(t.translate.instant("lang.password"+e.label)))):"complexityNumber"===e.label?(t.passwordRules.complexityNumber.enabled=e.enabled,t.passwordRules.complexityNumber.value=e.value,e.enabled&&(a.push(t.regexValidator(new RegExp("[0-9]"),{complexityNumber:""})),n.push(t.translate.instant("lang.password"+e.label)))):"complexitySpecial"===e.label?(t.passwordRules.complexitySpecial.enabled=e.enabled,t.passwordRules.complexitySpecial.value=e.value,e.enabled&&(a.push(t.regexValidator(new RegExp("[^A-Za-z0-9]"),{complexitySpecial:""})),n.push(t.translate.instant("lang.password"+e.label)))):"renewal"===e.label?(t.passwordRules.renewal.enabled=e.enabled,t.passwordRules.renewal.value=e.value,e.enabled&&i.push(t.translate.instant("lang.password"+e.label)+" <b>"+e.value+" "+t.translate.instant("lang.days")+"</b>. "+t.translate.instant("lang.password2"+e.label)+".")):"historyLastUse"===e.label&&(t.passwordRules.historyLastUse.enabled=e.enabled,t.passwordRules.historyLastUse.value=e.value,e.enabled&&i.push(t.translate.instant("lang.passwordhistoryLastUseDesc")+" <b>"+e.value+"</b> "+t.translate.instant("lang.passwordhistoryLastUseDesc2")+"."))})),t.ruleText=n.join(", "),t.otherRuleText=i.join("<br/>"),t.firstFormGroup.controls.newPasswordCtrl.setValidators(a)}),(function(e){t.notify.error(e.error.errors)})),this.firstFormGroup=this._formBuilder.group({newPasswordCtrl:[""],retypePasswordCtrl:["",c.I.compose([c.I.required])],currentPasswordCtrl:["",c.I.compose([c.I.required])]},{validator:this.matchValidator}),this.validPassword=!1,this.firstFormGroup.controls.currentPasswordCtrl.setErrors(null),this.firstFormGroup.controls.newPasswordCtrl.setErrors(null),this.firstFormGroup.controls.retypePasswordCtrl.setErrors(null),this.showPassword=!0,this.selectedTabIndex=0}},{key:"updatePassword",value:function(){var t=this;this.passwordModel.currentPassword=this.firstFormGroup.controls.currentPasswordCtrl.value,this.passwordModel.newPassword=this.firstFormGroup.controls.newPasswordCtrl.value,this.passwordModel.reNewPassword=this.firstFormGroup.controls.retypePasswordCtrl.value,this.http.put("../rest/users/"+this.serialId+"/password",this.passwordModel).subscribe((function(){t.showPassword=!1,t.passwordModel={currentPassword:"",newPassword:"",reNewPassword:""},t.notify.success(t.translate.instant("lang.passwordUpdated"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"onSubmit",value:function(){var t=this;if(this.creationMode){var e=!0;this.http.get("../rest/users/"+this.user.userId+"/status").subscribe((function(a){var n=!1;a.status&&"DEL"===a.status&&(e=confirm(t.translate.instant("lang.reactivateUserDeleted")),n=!0),e&&t.http.post("../rest/users",t.user).subscribe((function(e){t.notify.success(t.translate.instant(n?"lang.userUpdated":"lang.userAdded")),t.router.navigate(["/administration/users/"+e.id])}),(function(e){t.notify.error(e.error.errors)}))}),(function(e){t.notify.error(e.error.errors)}))}else{var a=Object.assign({},this.user);"rest"===this.user.mode&&(a.authorizedApi=""!==this.user.authorizedApi.split("\n")[0]?this.user.authorizedApi.split("\n"):[]),this.http.put("../rest/users/"+this.serialId,a).subscribe((function(e){t.headerService.user.id==t.serialId&&t.headerService.resfreshCurrentUser(),t.notify.success(t.translate.instant("lang.userUpdated"))}),(function(e){t.notify.error(e.error.errors)}))}}},{key:"setUserModeLogin",value:function(t){this.user.mode=t.checked?"rest":"standard"}},{key:"sendToMaarchParapheur",value:function(){var t=this;confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.createUserInMaarchParapheur"))&&this.http.put("../rest/users/"+this.serialId+"/maarchParapheur","").subscribe((function(e){t.notify.success(t.translate.instant("lang.userCreatedInMaarchParapheur")),t.user.external_id.maarchParapheur=e.externalId,t.user.canCreateMaarchParapheurUser=!1}),(function(e){t.notify.error(e.error.errors)}))}},{key:"setLowerUserId",value:function(){this.user.userId=this.user.userId.toLowerCase()}},{key:"syncMP",value:function(){var t=this;this.loadingSign=!0,this.http.put("../rest/users/"+this.user.id+"/externalSignatures",{}).subscribe((function(e){t.loadingSign=!1,t.notify.success(t.translate.instant("lang.signsSynchronized"))}),(function(e){t.loadingSign=!1,t.notify.error(e.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||pn)(u.Qb(p.e),u.Qb(f.b),u.Qb(o.a),u.Qb(o.c),u.Qb(u.C),u.Qb(y.a),u.Qb(N.b),u.Qb(m.a),u.Qb(c.h),u.Qb(g.a),u.Qb(h.a),u.Qb(u.T))},pn.\u0275cmp=u.Kb({type:pn,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(Ge,!0),u.Kc(qe,!0),u.Xc(Ke,!0),u.Xc(H.a,!0),u.Xc(B.a,!0)),2&t&&(u.yc(a=u.ec())&&(e.sidenavRight=a.first),u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.maarchTree=a.first),u.yc(a=u.ec())&&(e.paginator=a.first),u.yc(a=u.ec())&&(e.sort=a.first))},decls:27,vars:19,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",2,"overflow-x","hidden","max-width","500px",3,"mode","fixedInViewport","opened"],["snav2",""],["mat-subheader",""],[4,"ngFor","ngForOf"],[4,"ngIf"],["mat-list-item","",3,"click",4,"ngIf"],["mat-list-item","",3,"title","click",4,"ngIf"],["mat-list-item","",3,"click"],["color","warn","mat-list-icon","",1,"fa","fa-plane"],["mat-line",""],["color","accent","mat-list-icon","",1,"fa","fa-check"],["color","primary","mat-list-icon","",1,"fa","fa-paper-plane"],["color","primary","mat-list-icon","",1,"fa","fa-key"],["mat-list-item","",3,"title","click"],["color","primary","mat-list-icon","",1,"fa","fa-link"],["mat-line","","style","font-size:11px;color:red",4,"ngIf"],["mat-line","",2,"font-size","11px","color","red"],["color","primary","mat-list-icon","",1,"avatarAccount"],["mat-line","",1,"accountInfo"],["mat-icon-button","","color","warn",3,"title","click"],[1,"fas","fa-unlink"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[3,"selectedIndex","selectedIndexChange","selectedTabChange"],[3,"label"],["style","margin-bottom: 5%",4,"ngIf"],["class","text-warning","style","position: absolute;opacity: 0.25;font-size: 120px;transform: rotate(324deg);-webkit-transform: rotate(324deg);margin-left: 35%;margin-top: 90px;",4,"ngIf"],["class","form-horizontal",3,"ngSubmit",4,"ngIf"],[3,"label",4,"ngIf"],[3,"label","disabled",4,"ngIf"],[2,"margin-bottom","5%"],[3,"formGroup"],[1,"form-group"],[2,"padding","10px"],["matInput","","formControlName","currentPasswordCtrl","required","",3,"placeholder","type"],["matSuffix","",1,"fa","fa-2x",3,"ngClass","click"],[2,"text-align","center","color","rgba(0,0,0,0.54)","font-size","75%"],[1,"col-sm-6",2,"padding-left","0px","padding-right","0px"],["matInput","","formControlName","newPasswordCtrl","required","",3,"placeholder","type"],["inputPasswd",""],["matInput","","required","","formControlName","retypePasswordCtrl",3,"placeholder","type"],["inputPasswd2",""],["class","form-group",4,"ngIf"],[2,"text-align","center"],["mat-raised-button","","color","primary","type","button",3,"disabled","click"],["mat-raised-button","","color","default","type","button",3,"click"],["color","accent",1,"fa","fa-check"],["color","accent"],[1,"col-sm-12",2,"padding-left","0px","padding-right","0px"],["role","alert",1,"alert","alert-warning",2,"text-align","center",3,"innerHTML"],[1,"text-warning",2,"position","absolute","opacity","0.25","font-size","120px","transform","rotate(324deg)","-webkit-transform","rotate(324deg)","margin-left","35%","margin-top","90px"],[1,"form-horizontal",3,"ngSubmit"],["profileForm","ngForm"],[1,"col-sm-12"],[1,"pull-left"],[1,"avatar",2,"font-size","90px","text-align","center"],[1,"fa","fa-user",2,"font-size","90px","padding-top","5px"],[1,"input-group"],["matInput","","type","text","name","user_id","pattern","^[\\w.@-]*$","required","",3,"title","ngModel","placeholder","ngModelChange","keyup",4,"ngIf"],["matInput","","type","text","disabled","",3,"title","value","placeholder",4,"ngIf"],[1,"col-sm-5",2,"font-weight","bold"],["matInput","","type","text","id","lastname","name","lastname","required","",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","type","text","id","firstname","name","firstname","required","",3,"title","placeholder","ngModel","ngModelChange"],[1,"col-sm-2",2,"font-style","italic"],["matInput","","type","text","id","initials","name","initials",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","type","tel","id","phone","name","phone","pattern","\\+?((|\\ |\\.|\\(|\\)|\\-)?(\\d)*)*\\d$",3,"title","placeholder","ngModel","disabled","ngModelChange"],["matInput","","type","email","id","mail","name","mail","pattern","(^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$)","required","",3,"title","placeholder","ngModel","ngModelChange"],[3,"expanded"],[2,"color","rgba(0,0,0,0.54)"],["id","accountType","name","accountType","required","",3,"ngModel","disabled","ngModelChange"],[1,"form-group",2,"margin-top","10px"],["mat-raised-button","","color","primary","type","submit",3,"disabled",4,"ngIf"],["matInput","","type","text","name","user_id","pattern","^[\\w.@-]*$","required","",3,"title","ngModel","placeholder","ngModelChange","keyup"],["matInput","","type","text","disabled","",3,"title","value","placeholder"],[3,"value","disabled","title"],["matInput","","name","authorizedApi","placeholder","Ex : PUT/attachments/{id}",3,"ngModel","ngModelChange"],["target","_blank",3,"href"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["disableRipple","true",4,"ngFor","ngForOf"],["disableRipple","true"],["color","primary",3,"id","checked","disabled","change"],[3,"selectionPropagation","openState","afterSelectNode","afterDeselectNode"],["maarchTree",""],[1,"col-sm-6",2,"overflow","hidden"],["mat-list-icon","","color","primary"],["color","primary",3,"checked","matTooltip","change"],["mat-line","","style","opacity: 0.5;font-style: italic;font-size: 80%;margin-top:10px;",4,"ngIf"],["mat-line","","style","margin-top:10px;",4,"ngIf"],["mat-line","",2,"opacity","0.5","font-style","italic","font-size","80%","margin-top","10px"],["mat-line","",2,"margin-top","10px"],["mat-icon-button","",3,"matMenuTriggerFor","matTooltip"],[1,"fa","fa-reply"],[1,"vertical-divider",3,"vertical"],["color","warn","mat-icon-button","",3,"matTooltip","click"],[1,"fa","fa-ban"],["color","accent","mat-icon-button","",3,"matTooltip","click"],[1,"fa","fa-check"],[2,"width","200px !important"],["menu","matMenu"],["appearance","outline",3,"labelPlaceholder","routeDatas","targetSearchKey","subInfoKey","triggerEvent"],["style","cursor: pointer;",4,"ngIf"],[2,"cursor","pointer"],["mat-list-icon","","color","primary",4,"ngIf"],["mat-line","","color","primary",2,"display","flex","align-items","center"],[2,"flex","2","overflow","hidden","text-overflow","ellipsis",3,"matTooltip","ngStyle","click"],[1,"label","label-primary",2,"font-weight","normal"],["color","primary",3,"checked","click","change"],["mat-list-icon","","color","primary",1,"fa","fa-paper-plane",2,"margin-top","-60px"],["mat-line","","color","primary"],["type","text","color","warn","matInput","","disabled","",3,"value"],["mat-button","","color","warn","matSuffix","","mat-icon-button","","aria-label","Clear",3,"matTooltip","click"],["color","warn",1,"fa","fa-times","text-danger"],["mat-list-icon","","color","primary",1,"fa","fa-reply",2,"margin-top","-60px"],["appearance","outline",3,"labelPlaceholder","routeDatas","targetSearchKey","subInfoKey","triggerEvent",4,"ngIf"],["color","primary",1,"fa","fa-edit"],[3,"label","disabled"],["dnd-droppable","","class","dndFile",3,"matTooltip","dndFileHighlighted","click","dragover","dragleave","onDropSuccess",4,"ngIf"],[2,"display","flex","align-items","flex-start"],[2,"flex","1"],["class","col-md-3 col-sm-6 col-xm-12",4,"ngFor","ngForOf"],["mat-icon-button","","color","primary",3,"matTooltip","disabled","click",4,"ngIf"],[2,"display","none",3,"ngSubmit"],["signatureForm","ngForm"],[1,"col-md-11"],["type","text","id","signLabel","name","label","required","",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"form-inline","hide"],["type","file","name","files[]","id","uploadSignFile","accept","image/*",3,"change"],[1,"col-md-1",2,"margin-bottom","5px"],["type","submit",1,"form-control","btn","btn-sm","btn-success",3,"disabled"],[1,"fa","fa-plus"],[3,"ngClass"],[1,"upload-drop-zone",2,"cursor","pointer",3,"click"],[1,"fa","fa-upload","fa-2x"],["class","col-md-2",4,"ngIf"],["dnd-droppable","",1,"dndFile",3,"matTooltip","click","dragover","dragleave","onDropSuccess"],[1,"col-md-3","col-sm-6","col-xm-12"],[2,"margin-bottom","10px","overflow","hidden"],["floatLabel","never"],["matInput","","type","text","name","selectedSignatureLabel",3,"ngModel","placeholder","disabled","ngModelChange","change"],["mat-button","","matSuffix","","mat-icon-button","","color","warn",3,"matTooltip","disabled","click"],[1,"fa","fa-times"],["alt","Signature",2,"width","auto","height","60px",3,"src"],["mat-icon-button","","color","primary",3,"matTooltip","disabled","click"],[1,"fa","fa-sync-alt","fa-2x"],[1,"col-md-2"],["id","signaturePreview","alt","Invalid image",2,"width","100%",3,"src"],[1,"col-md-12"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"placeholder","keyup"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortActive","event_date","matSortDirection","desc",3,"dataSource"],["table",""],["matColumnDef","event_date"],["mat-sort-header","","style","flex:1;",4,"matHeaderCellDef"],["style","flex:1;",4,"matCellDef"],["matColumnDef","record_id"],["style","flex:1;",4,"matHeaderCellDef"],["matColumnDef","info"],["mat-sort-header","","style","flex:2;",4,"matHeaderCellDef"],["style","flex:2;",4,"matCellDef"],["matColumnDef","remote_ip"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"col-md-3","pull-right",2,"padding-top","10px"],["matInput","","disabled","",3,"ngModel","matDatepicker","placeholder","ngModelChange"],["matSuffix","",3,"for"],["startView","month",3,"startAt"],["picker",""],["mat-sort-header","",2,"flex","1"],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],["color","primary","mat-list-icon","",1,"fa","fa-users"],[2,"font-size","10px"],["matInput","","type","text","id","role","name","role",3,"title","placeholder","ngModel","ngModelChange","change"],[3,"matTooltip"],["color","primary","mat-list-icon","","class","fa fa-sitemap",4,"ngIf"],["color","primary","mat-list-icon","","class","fa fa-sitemap","style","position:relative;",4,"ngIf"],["mat-line","",3,"ngStyle","matTooltip"],["class","label label-primary","style","font-weight:normal",4,"ngIf"],["color","primary","mat-list-icon","",1,"fa","fa-sitemap"],["color","primary","mat-list-icon","",1,"fa","fa-sitemap",2,"position","relative"],["mat-icon-button","",2,"cursor","pointer","position","absolute","right","-20px","top","-20px","font-size","10px",3,"matTooltip","click"],[1,"fa","fa-arrow-up"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,oa,3,2,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,ra,2,0,"div",9),u.Oc(14,Ya,12,12,"mat-card",10),u.Vb(),u.Vb(),u.Vb(),u.Wb(15,"mat-sidenav",11,12),u.Wb(17,"mat-list"),u.Wb(18,"h3",13),u.Qc(19),u.ic(20,"translate"),u.Vb(),u.Oc(21,Za,12,12,"mat-list-item",14),u.Rb(22,"mat-divider"),u.Wb(23,"h3",13),u.Qc(24),u.ic(25,"translate"),u.Vb(),u.Oc(26,on,11,15,"mat-list-item",14),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading),u.Db(1),u.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!e.appService.getViewMode()&&!e.creationMode),u.Db(4),u.Rc(u.jc(20,15,"lang.groups")),u.Db(2),u.oc("ngForOf",e.user.groups),u.Db(3),u.Rc(u.jc(25,17,"lang.entities")),u.Db(2),u.oc("ngForOf",e.user.entities))},directives:[C.e,C.f,x.a,W.a,O.t,C.d,Rt.a,Rt.g,O.s,_.a,Rt.h,Rt.d,Tt.a,Rt.c,j.l,R.b,w.c,I.a,Ee.c,Ee.a,c.K,c.v,c.m,S.c,k.b,c.d,c.u,c.k,c.F,S.j,O.q,S.b,S.f,c.w,c.x,c.B,Ae.a,Ae.c,Ae.g,Ae.h,S.g,it.a,j.p,at.a,Ue.a,ze.a,Qt.b,$e.d,$e.e,Ft.a,O.w,Ne.d,I.d,H.a,q.o,B.a,q.c,q.i,q.b,q.k,q.n,He.h,He.j,He.f,q.h,B.b,q.a,q.j,q.m],pipes:[p.d,T.a,O.b,Be.a,O.f],styles:[".avatar[_ngcontent-%COMP%]{text-decoration:none;background:#135f7f;color:#fff;width:100px;height:100px;border-radius:5px;display:block;overflow:hidden;margin:5px}.form-group[_ngcontent-%COMP%]{margin:0}.vertical-divider[_ngcontent-%COMP%]{height:80%}.avatarAccount[_ngcontent-%COMP%]{border:3px solid #f99830;height:45px!important;width:45px!important;background-size:cover;background-repeat:no-repeat;background-position:50%}.accountInfo[_ngcontent-%COMP%]{margin-left:20px!important;display:flex!important}.accountInfo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;align-items:center;display:flex}"]}),pn),mn=((un=function(){function t(e,a,n){_classCallCheck(this,t),this.http=e,this.data=a,this.dialogRef=n,this.redirectUser="",this.processMode=""}return _createClass(t,[{key:"setRedirectUser",value:function(t){this.redirectUser=t}}]),t}()).\u0275fac=function(t){return new(t||un)(u.Qb(f.b),u.Qb(N.a),u.Qb(N.h))},un.\u0275cmp=u.Kb({type:un,selectors:[["ng-component"]],decls:30,vars:23,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["redirectConfForm","ngForm"],["class","alert-message alert-message-info","role","alert",3,"innerHTML",4,"ngIf"],[1,"input-group"],["id","processMode","name","processMode","color","primary",2,"display","inline-flex","flex-direction","column",3,"ngModel","ngModelChange"],["value","","checked","true","color","primary"],["value","delete","color","primary"],["value","reaffect","color","primary"],["singleMode","","required","",3,"labelPlaceholder","labelList","routeDatas","targetSearchKey","subInfoKey","triggerEvent",4,"ngIf"],["role","alert",1,"alert-message","alert-message-info",2,"max-width","inherit"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"divider-modal"],["mat-raised-button","","color","primary","type","submit",3,"disabled","click"],["role","alert",1,"alert-message","alert-message-info",3,"innerHTML"],["singleMode","","required","",3,"labelPlaceholder","labelList","routeDatas","targetSearchKey","subInfoKey","triggerEvent"],[3,"innerHTML"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"h1",1),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"mat-dialog-content"),u.Wb(5,"form",null,2),u.Oc(7,rn,2,3,"div",3),u.Oc(8,cn,2,3,"div",3),u.Wb(9,"div",4),u.Wb(10,"mat-radio-group",5),u.dc("ngModelChange",(function(t){return e.processMode=t})),u.Wb(11,"mat-radio-button",6),u.Qc(12),u.ic(13,"translate"),u.Vb(),u.Wb(14,"mat-radio-button",7),u.Qc(15),u.ic(16,"translate"),u.Vb(),u.Wb(17,"mat-radio-button",8),u.Qc(18),u.ic(19,"translate"),u.Vb(),u.Vb(),u.Oc(20,ln,3,10,"plugin-autocomplete",9),u.Wb(21,"div",10),u.Oc(22,sn,4,3,"span",11),u.Oc(23,dn,2,3,"span",12),u.Oc(24,bn,4,3,"span",11),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Rb(25,"span",13),u.Wb(26,"mat-dialog-actions"),u.Wb(27,"button",14),u.dc("click",(function(){return e.dialogRef.close({newUser:e.redirectUser,processMode:e.processMode})})),u.Qc(28),u.ic(29,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(2),u.Rc(u.jc(3,13,"lang.redirects")),u.Db(5),u.oc("ngIf",e.data.hasConfidentialityInstances),u.Db(1),u.oc("ngIf",e.data.hasListTemplates),u.Db(2),u.oc("ngModel",e.processMode),u.Db(2),u.Sc(" ",u.jc(13,15,"lang.doNothingRedirect")," "),u.Db(3),u.Sc(" ",u.jc(16,17,"lang.removeUserRedirect")," "),u.Db(3),u.Sc(" ",u.jc(19,19,"lang.reaffectUserRedirect")," "),u.Db(2),u.oc("ngIf","reaffect"==e.processMode),u.Db(2),u.oc("ngIf",""==e.processMode),u.Db(1),u.oc("ngIf","delete"==e.processMode),u.Db(1),u.oc("ngIf","reaffect"==e.processMode),u.Db(3),u.oc("disabled",!e.redirectUser&&"reaffect"==e.processMode),u.Db(1),u.Rc(u.jc(29,21,"lang.validate")))},directives:[N.i,N.f,c.K,c.v,c.w,O.t,Xe.b,c.u,c.x,Xe.a,N.c,R.b,Ft.a],pipes:[p.d],styles:[".mat-dialog-content[_ngcontent-%COMP%]{max-height: 65vh;width:600px;}"]}),un),gn=["snav2"],hn=["adminMenuTemplate"];function vn(t,e){1&t&&(u.Wb(0,"mat-nav-list"),u.Wb(1,"h3",11),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"a",12),u.Rb(5,"mat-icon",13),u.Wb(6,"p",14),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(2),u.Rc(u.jc(3,2,"lang.actions")),u.Db(5),u.Sc(" ",u.jc(8,4,"lang.add")," "))}function yn(t,e){1&t&&(u.Wb(0,"div",15),u.Rb(1,"mat-spinner",16),u.Vb())}function Dn(t,e){if(1&t&&(u.Wb(0,"mat-header-cell",37),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=u.hc(2);u.Ib("hide-for-mobile",a.appService.getViewMode()),u.Db(1),u.Rc(u.jc(2,3,"lang.id"))}}function Vn(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.Ib("hide-for-mobile",n.appService.getViewMode()),u.Db(1),u.Sc(" ",a.group_id," ")}}function Cn(t,e){1&t&&(u.Wb(0,"mat-header-cell",38),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc("",u.jc(2,1,"lang.description")," "))}function xn(t,e){if(1&t&&(u.Wb(0,"mat-cell",39),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.group_desc," ")}}function Mn(t,e){1&t&&u.Rb(0,"mat-header-cell",40)}function Wn(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-cell",41),u.Wb(1,"button",42),u.dc("click",(function(t){u.Dc(a);var n=e.$implicit,i=u.hc(2);return t.stopPropagation(),i.preDelete(n)})),u.ic(2,"translate"),u.Rb(3,"mat-icon",43),u.Vb(),u.Vb()}2&t&&(u.Db(1),u.pc("matTooltip",u.jc(2,1,"lang.delete")))}function On(t,e){1&t&&u.Rb(0,"mat-header-row")}function _n(t,e){1&t&&(u.Rb(0,"mat-row",44),u.ic(1,"translate")),2&t&&(u.qc("routerLink","/administration/groups/",e.$implicit.id,""),u.pc("matTooltip",u.jc(1,2,"lang.view")))}function Sn(t,e){if(1&t&&(u.Wb(0,"mat-card",17),u.Wb(1,"div",18),u.Wb(2,"div",19),u.Wb(3,"mat-form-field"),u.Rb(4,"input",20),u.ic(5,"translate"),u.Vb(),u.Vb(),u.Wb(6,"div",19),u.Rb(7,"mat-paginator",21,22),u.Vb(),u.Vb(),u.Wb(9,"mat-table",23,24),u.Ub(11,25),u.Oc(12,Dn,3,5,"mat-header-cell",26),u.Oc(13,Vn,2,3,"mat-cell",27),u.Tb(),u.Ub(14,28),u.Oc(15,Cn,3,3,"mat-header-cell",29),u.Oc(16,xn,2,1,"mat-cell",30),u.Tb(),u.Ub(17,31),u.Oc(18,Mn,1,0,"mat-header-cell",32),u.Oc(19,Wn,4,3,"mat-cell",33),u.Tb(),u.Oc(20,On,1,0,"mat-header-row",34),u.Oc(21,_n,2,4,"mat-row",35),u.Vb(),u.Wb(22,"div",36),u.Qc(23),u.ic(24,"translate"),u.Vb(),u.Vb()),2&t){var a=u.hc();u.Db(4),u.pc("placeholder",u.jc(5,10,"lang.filterBy")),u.oc("formControl",a.adminService.getFilterField()),u.Db(3),u.oc("length",100)("hidePageSize",!0)("pageSize",10),u.Db(2),u.oc("dataSource",a.adminService.getDataSource()),u.Db(11),u.oc("matHeaderRowDef",a.displayedColumns),u.Db(1),u.oc("matRowDefColumns",a.displayedColumns),u.Db(2),u.Tc(" ",a.groups.length," ",u.jc(24,12,"lang.groups"),"")}}function kn(t,e){if(1&t&&(u.Wb(0,"mat-list-item",11),u.Rb(1,"mat-icon",12),u.Rb(2,"h4",13),u.Wb(3,"p",13),u.Qc(4),u.Vb(),u.Vb()),2&t){var a=e.$implicit;u.Db(4),u.Tc(" ",a.firstname," ",a.lastname,"")}}function wn(t,e){if(1&t&&(u.Wb(0,"mat-option",14),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a.id),u.Db(1),u.Sc(" ",a.group_desc," ")}}var In,jn,Rn=((jn=function(){function t(e,a,n,i,o,r,c,l,s){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.dialog=i,this.headerService=o,this.appService=r,this.functions=c,this.adminService=l,this.viewContainerRef=s,this.loading=!1,this.config={},this.groups=[],this.groupsForAssign=[],this.displayedColumns=["group_id","group_desc","actions"],this.filterColumns=["group_id","group_desc"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.groups")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/groups").subscribe((function(e){t.groups=e.groups,t.loading=!1,setTimeout((function(){t.adminService.setDataSource("admin_groups",t.groups,t.sort,t.paginator,t.filterColumns)}),0)}),(function(e){t.notify.handleErrors(e)}))}},{key:"preDelete",value:function(t){var e=this;0===t.users.length?confirm(this.translate.instant("lang.reallyWantToDeleteThisGroup"))&&this.deleteGroup(t):(this.groupsForAssign=[],this.groups.forEach((function(a){t.group_id!==a.group_id&&e.groupsForAssign.push(a)})),this.config={panelClass:"maarch-modal",data:{id:t.id,group_desc:t.group_desc,groupsForAssign:this.groupsForAssign,users:t.users}},this.dialogRef=this.dialog.open(Tn,this.config),this.dialogRef.afterClosed().subscribe((function(a){a&&("_NO_REPLACEMENT"===a?e.deleteGroup(t):e.http.put("../rest/groups/"+t.id+"/reassign/"+a,{}).subscribe((function(a){e.deleteGroup(t)}),(function(t){e.notify.error(t.error.errors)}))),e.dialogRef=null})))}},{key:"deleteGroup",value:function(t){var e=this;this.http.delete("../rest/groups/"+t.id).subscribe((function(t){setTimeout((function(){e.groups=t.groups,e.adminService.setDataSource("admin_groups",e.groups,e.sort,e.paginator,e.filterColumns)}),0),e.notify.success(e.translate.instant("lang.groupDeleted"))}),(function(t){e.notify.error(t.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||jn)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(N.b),u.Qb(m.a),u.Qb(g.a),u.Qb(D.a),u.Qb(jt),u.Qb(u.T))},jn.\u0275cmp=u.Kb({type:jn,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(gn,!0),u.Kc(hn,!0),u.Xc(H.a,!0),u.Xc(B.a,!0)),2&t&&(u.yc(a=u.ec())&&(e.sidenavRight=a.first),u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.paginator=a.first),u.yc(a=u.ec())&&(e.sort=a.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/groups/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row",2,"margin","0px"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSortDisableClear","","matSort","",3,"dataSource"],["table",""],["matColumnDef","group_id"],["mat-sort-header","",3,"hide-for-mobile",4,"matHeaderCellDef"],[3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","group_desc"],["mat-sort-header","","style","flex:2;",4,"matHeaderCellDef"],["style","flex:2;",4,"matCellDef"],["matColumnDef","actions"],["style","flex:1;",4,"matHeaderCellDef"],["style","justify-content: flex-end;flex:1;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header",""],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],[2,"flex","1"],[2,"justify-content","flex-end","flex","1"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,vn,9,6,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,yn,2,0,"div",9),u.Oc(14,Sn,25,14,"mat-card",10),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading))},directives:[C.e,C.f,x.a,W.a,O.t,Rt.h,Rt.g,Rt.d,o.f,Tt.a,Rt.c,j.l,w.c,I.a,S.c,k.b,c.d,c.u,c.j,H.a,q.o,B.a,q.c,q.i,q.b,q.k,q.n,q.h,B.b,q.a,R.b,Qt.b,q.j,q.m,o.d],pipes:[p.d],encapsulation:2}),jn),Tn=((In=function t(e,a,n){_classCallCheck(this,t),this.http=e,this.data=a,this.dialogRef=n}).\u0275fac=function(t){return new(t||In)(u.Qb(f.b),u.Qb(N.a),u.Qb(N.h))},In.\u0275cmp=u.Kb({type:In,selectors:[["ng-component"]],decls:34,vars:30,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["changeGroupUsersForm","ngForm"],["role","alert",1,"alert-message","alert-message-info"],["style","height:25px;",4,"ngFor","ngForOf"],["id","groups_redirect","name","groups_redirect","required","",3,"title","placeholder","ngModel","ngModelChange"],["value","_NO_REPLACEMENT"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[1,"divider-modal"],["mat-raised-button","","color","primary","type","submit",3,"disabled","click"],[2,"height","25px"],["mat-list-icon","","color","primary",1,"fa","fa-user"],["mat-line",""],[3,"value"]],template:function(t,e){if(1&t&&(u.Wb(0,"div",0),u.Wb(1,"h2",1),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"mat-dialog-content"),u.Wb(5,"form",null,2),u.Wb(7,"div",3),u.Qc(8," Le groupe "),u.Wb(9,"b"),u.Qc(10),u.Vb(),u.Qc(11),u.ic(12,"translate"),u.Wb(13,"b"),u.Qc(14),u.Vb(),u.Qc(15),u.ic(16,"translate"),u.Wb(17,"mat-list"),u.Oc(18,kn,5,2,"mat-list-item",4),u.Vb(),u.Vb(),u.Wb(19,"mat-form-field"),u.Wb(20,"mat-select",5),u.dc("ngModelChange",(function(t){return e.data.group_redirect=t})),u.ic(21,"translate"),u.ic(22,"translate"),u.Wb(23,"mat-option",6),u.Qc(24),u.ic(25,"translate"),u.Vb(),u.Wb(26,"mat-optgroup",7),u.ic(27,"translate"),u.Oc(28,wn,2,2,"mat-option",8),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Rb(29,"span",9),u.Wb(30,"mat-dialog-actions"),u.Wb(31,"button",10),u.dc("click",(function(){return e.dialogRef.close(e.data.group_redirect)})),u.Qc(32),u.ic(33,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t){var a=u.zc(6);u.Db(2),u.Rc(u.jc(3,14,"lang.groupRedirect")),u.Db(8),u.Rc(e.data.group_desc),u.Db(1),u.Sc(" ",u.jc(12,16,"lang.isAssociatedTo")," "),u.Db(3),u.Rc(e.data.users.length),u.Db(1),u.Sc(" ",u.jc(16,18,"lang.usersAlt"),": "),u.Db(3),u.oc("ngForOf",e.data.users),u.Db(2),u.pc("title",u.jc(21,20,"lang.chooseRedirectGroup")),u.pc("placeholder",u.jc(22,22,"lang.chooseRedirectGroup")),u.oc("ngModel",e.data.group_redirect),u.Db(4),u.Sc("-- ",u.jc(25,24,"lang.noReplacement")," --"),u.Db(2),u.pc("label",u.jc(27,26,"lang.groups")),u.Db(2),u.oc("ngForOf",e.data.groupsForAssign),u.Db(3),u.oc("disabled",!a.form.valid),u.Db(1),u.Rc(u.jc(33,28,"lang.validate"))}},directives:[N.i,N.f,c.K,c.v,c.w,Rt.a,O.s,S.c,it.a,c.F,c.u,c.x,j.p,j.o,N.c,R.b,Rt.d,Tt.a,Rt.c,j.l],pipes:[p.d],encapsulation:2}),In),Pn=a("5+WD");function Qn(t,e){1&t&&(u.Wb(0,"div",19),u.Rb(1,"mat-spinner",20),u.Vb())}function Fn(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",21),u.Qc(1),u.ic(2,"translate"),u.Wb(3,"button",22),u.dc("click",(function(){u.Dc(a);var t=u.hc();return t.toggleIndex(!t.indexingInfo.canIndex)})),u.Qc(4),u.ic(5,"translate"),u.Vb(),u.Vb()}2&t&&(u.Db(1),u.Sc("",u.jc(2,2,"lang.warnIndex")," "),u.Db(3),u.Rc(u.jc(5,4,"lang.enableIndex")))}function Ln(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",23),u.dc("click",(function(){u.Dc(a);var t=u.hc();return t.toggleIndex(!t.indexingInfo.canIndex)})),u.Qc(1),u.ic(2,"translate"),u.Vb()}2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.disableIndex")))}function En(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-list-item",24),u.Wb(1,"div"),u.Rb(2,"i",25),u.Vb(),u.Wb(3,"div",26),u.Qc(4),u.Vb(),u.Wb(5,"div"),u.Wb(6,"button",27),u.dc("click",(function(){u.Dc(a);var t=e.index;return u.hc().removeAction(t)})),u.Rb(7,"mat-icon",28),u.Vb(),u.Vb(),u.Rb(8,"mat-divider"),u.Vb()}if(2&t){var n=e.$implicit;u.oc("cdkDragData",n),u.Db(4),u.Sc(" ",n.label_action,"")}}var An,Un=((An=function(){function t(e,a,n,i){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.dialog=i,this.loading=!0,this.resfreshShortcut=new u.o,this.keywordEntities=[],this.actionList=[],this.indexingInfo={canIndex:!1,actions:[],keywords:[],entities:[]},this.keywordEntities=[{id:"ALL_ENTITIES",keyword:"ALL_ENTITIES",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.allEntities")},{id:"ENTITIES_JUST_BELOW",keyword:"ENTITIES_JUST_BELOW",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.immediatelyBelowMyPrimaryEntity")},{id:"ENTITIES_BELOW",keyword:"ENTITIES_BELOW",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.belowAllMyEntities")},{id:"ALL_ENTITIES_BELOW",keyword:"ALL_ENTITIES_BELOW",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.belowMyPrimaryEntity")},{id:"MY_ENTITIES",keyword:"MY_ENTITIES",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.myEntities")},{id:"MY_PRIMARY_ENTITY",keyword:"MY_PRIMARY_ENTITY",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.myPrimaryEntity")},{id:"SAME_LEVEL_ENTITIES",keyword:"SAME_LEVEL_ENTITIES",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.sameLevelMyPrimaryEntity")},{id:"ENTITIES_JUST_UP",keyword:"ENTITIES_JUST_UP",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.immediatelySuperiorMyPrimaryEntity")}]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.getIndexingInformations().pipe(Object(kt.tap)((function(e){return t.indexingInfo.canIndex=e.group.canIndex})),Object(kt.tap)((function(e){return t.getActions(e.actions)})),Object(kt.tap)((function(e){return t.getSelectedActions(e.group.indexationParameters.actions)})),Object(s.a)((function(e){return t.getEntities(e)})),Object(s.a)((function(e){return t.getSelectedEntities(e)})),Object(kt.tap)((function(e){return t.initEntitiesTree(e)})),Object(Dt.a)((function(){return t.loading=!1}))).subscribe()}},{key:"initEntitiesTree",value:function(t){var e=this;$("#jstree").jstree({checkbox:{three_state:!1},core:{force_text:!0,themes:{name:"proton",responsive:!0},data:t},plugins:["checkbox","search"]});var a=!1;$("#jstree_search").keyup((function(){a&&clearTimeout(a),a=setTimeout((function(){var t=$("#jstree_search").val();$("#jstree").jstree(!0).search(t)}),250)})),$("#jstree").on("select_node.jstree",(function(t,a){isNaN(a.node.id)?e.addKeyword(a.node.id):e.addEntity(a.node.id)})).on("deselect_node.jstree",(function(t,a){isNaN(a.node.id)?e.removeKeyword(a.node.id):e.removeEntity(a.node.id)})).jstree()}},{key:"getEntities",value:function(t){return this.keywordEntities.forEach((function(e){e.state=t.group.indexationParameters.keywords.indexOf(e.id)>-1?{opened:!0,selected:!0}:{opened:!0,selected:!1}})),t.entities=this.keywordEntities.concat(t.entities),t}},{key:"getSelectedEntities",value:function(t){return this.indexingInfo.entities=_toConsumableArray(t.group.indexationParameters.entities),this.indexingInfo.keywords=_toConsumableArray(t.group.indexationParameters.keywords),t.entities}},{key:"getActions",value:function(t){this.actionList=t}},{key:"getIndexingInformations",value:function(){return this.http.get("../rest/groups/"+this.groupId+"/indexing")}},{key:"getSelectedActions",value:function(t){var e=this,a=-1;t.forEach((function(t){(a=e.actionList.findIndex((function(e){return e.id==t})))>-1&&(e.indexingInfo.actions.push(e.actionList[a]),e.actionList.splice(a,1))}))}},{key:"addEntity",value:function(t){var e=this,a=this.indexingInfo.entities.concat([t]);this.http.put("../rest/groups/"+this.groupId+"/indexing",{entities:a}).pipe(Object(kt.tap)((function(){e.indexingInfo.entities.push(t)})),Object(kt.tap)((function(){e.notify.success(e.translate.instant("lang.entityAdded"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe()}},{key:"removeEntity",value:function(t){var e=this,a=this.indexingInfo.entities.indexOf(t),n=_toConsumableArray(this.indexingInfo.entities);n.splice(a,1),this.http.put("../rest/groups/"+this.groupId+"/indexing",{entities:n}).pipe(Object(kt.tap)((function(){e.indexingInfo.entities.splice(a,1)})),Object(kt.tap)((function(){e.notify.success(e.translate.instant("lang.entityDeleted"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe()}},{key:"addKeyword",value:function(t){var e=this,a=this.indexingInfo.keywords.concat([t]);this.http.put("../rest/groups/"+this.groupId+"/indexing",{keywords:a}).pipe(Object(kt.tap)((function(){e.indexingInfo.keywords.push(t)})),Object(kt.tap)((function(){e.notify.success(e.translate.instant("lang.keywordAdded"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe()}},{key:"removeKeyword",value:function(t){var e=this,a=this.indexingInfo.keywords.indexOf(t),n=_toConsumableArray(this.indexingInfo.keywords);n.splice(a,1),this.http.put("../rest/groups/"+this.groupId+"/indexing",{keywords:n}).pipe(Object(kt.tap)((function(){e.indexingInfo.keywords.splice(a,1)})),Object(kt.tap)((function(){e.notify.success(e.translate.instant("lang.keywordDeleted"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe()}},{key:"addAction",value:function(t){var e=this,a=this.indexingInfo.actions.map((function(t){return t.id})).concat([t].map((function(t){return t.id})));this.http.put("../rest/groups/"+this.groupId+"/indexing",{actions:a}).pipe(Object(kt.tap)((function(){var a=e.actionList.findIndex((function(e){return e.id===t.id})),n=Object.assign({},e.actionList[a]);e.indexingInfo.actions.push(n),e.actionList.splice(a,1)})),Object(kt.tap)((function(){e.notify.success(e.translate.instant("lang.actionAdded"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe()}},{key:"removeAction",value:function(t){var e=this;this.dialogRef=this.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete"),msg:this.translate.instant("lang.confirmAction")}}),this.dialogRef.afterClosed().pipe(Object(J.a)((function(t){return"ok"===t})),Object(s.a)((function(){e.dialogRef=null;var a=_toConsumableArray(e.indexingInfo.actions);return a.splice(t,1),a.map((function(t){return t.id}))})),Object(Y.a)((function(t){return e.http.put("../rest/groups/"+e.groupId+"/indexing",{actions:t})})),Object(kt.tap)((function(){e.actionList.push(e.indexingInfo.actions[t]),e.indexingInfo.actions.splice(t,1)})),Object(kt.tap)((function(){e.notify.success(e.translate.instant("lang.actionDeleted"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe()}},{key:"toggleIndex",value:function(t){var e=this;this.http.put("../rest/groups/"+this.groupId+"/indexing",{canIndex:t}).pipe(Object(kt.tap)((function(){e.indexingInfo.canIndex=t,e.resfreshShortcut.emit()})),Object(kt.tap)((function(){e.notify.success(e.translate.instant(e.indexingInfo.canIndex?"lang.indexEnabled":"lang.indexDisabled"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe()}},{key:"drop",value:function(t){var e=this;if(t.previousContainer===t.container){Object(Pn.h)(t.container.data,t.previousIndex,t.currentIndex);var a=this.indexingInfo.actions.map((function(t){return t.id}));this.http.put("../rest/groups/"+this.groupId+"/indexing",{actions:a}).pipe(Object(kt.tap)((function(){e.notify.success(e.translate.instant("lang.actionAdded"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe()}}}]),t}()).\u0275fac=function(t){return new(t||An)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(N.b))},An.\u0275cmp=u.Kb({type:An,selectors:[["app-indexing-administration"]],inputs:{groupId:"groupId"},outputs:{resfreshShortcut:"resfreshShortcut"},decls:25,vars:18,consts:[["class","loading",4,"ngIf"],[1,"row",2,"margin","0px"],[1,"col-md-12"],["class","alert-message alert-message-danger","role","alert","style","margin-top: 30px;",4,"ngIf"],["color","warn","mat-raised-button","",3,"click",4,"ngIf"],[1,"col-md-8",2,"margin-top","20px"],[1,"formType"],[1,"formType-title"],[1,"infoActions",3,"innerHTML"],["appearance","outline",3,"labelPlaceholder","datas","targetSearchKey","triggerEvent"],["cdkDropList","","role","list",1,"selectedActionList",3,"cdkDropListData","cdkDropListDropped"],["class","selectedAction","role","listitem","cdkDrag","","cdkDragLockAxis","y",3,"cdkDragData",4,"ngFor","ngForOf"],[1,"col-md-4",2,"margin-top","20px"],[1,"formType","jstreeEntities"],["appearance","outline"],["color","primary","matPrefix","",1,"fa","fa-search"],["matInput","","id","jstree_search","name","jstree_search","type","text",3,"placeholder"],["id","jstree"],["jstree",""],[1,"loading"],[2,"margin","auto"],["role","alert",1,"alert-message","alert-message-danger",2,"margin-top","30px"],["mat-raised-button","",3,"click"],["color","warn","mat-raised-button","",3,"click"],["role","listitem","cdkDrag","","cdkDragLockAxis","y",1,"selectedAction",3,"cdkDragData"],["color","primary","cdkDragHandle","",1,"fas","fa-bars","fa-2x",2,"cursor","move"],[1,"actionLabel"],["mat-icon-button","","color","warn",3,"click"],[1,"fa","fa-trash"]],template:function(t,e){1&t&&(u.Oc(0,Qn,2,0,"div",0),u.Wb(1,"div",1),u.Wb(2,"div",2),u.Oc(3,Fn,6,6,"div",3),u.Oc(4,Ln,3,3,"button",4),u.Vb(),u.Wb(5,"div",5),u.Wb(6,"div",6),u.Wb(7,"div",7),u.Qc(8),u.ic(9,"translate"),u.Vb(),u.Rb(10,"mat-hint",8),u.Wb(11,"plugin-autocomplete",9),u.dc("triggerEvent",(function(t){return e.addAction(t)})),u.Vb(),u.Wb(12,"mat-list",10),u.dc("cdkDropListDropped",(function(t){return e.drop(t)})),u.Oc(13,En,9,2,"mat-list-item",11),u.Vb(),u.Vb(),u.Vb(),u.Wb(14,"div",12),u.Wb(15,"div",13),u.Wb(16,"div",7),u.Qc(17),u.ic(18,"translate"),u.Vb(),u.Wb(19,"mat-form-field",14),u.Rb(20,"mat-icon",15),u.Rb(21,"input",16),u.ic(22,"translate"),u.Vb(),u.Rb(23,"div",17,18),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.oc("ngIf",e.loading),u.Db(3),u.oc("ngIf",!e.indexingInfo.canIndex),u.Db(1),u.oc("ngIf",e.indexingInfo.canIndex),u.Db(4),u.Sc(" ",u.jc(9,12,"lang.availableIndexingActions")," "),u.Db(2),u.oc("innerHTML",e.translate.instant("lang.actionsInfo"),u.Ec),u.Db(1),u.oc("labelPlaceholder",e.translate.instant("lang.linkNewAction"))("datas",e.actionList)("targetSearchKey","label_action"),u.Db(1),u.oc("cdkDropListData",e.indexingInfo.actions),u.Db(1),u.oc("ngForOf",e.indexingInfo.actions),u.Db(4),u.Sc(" ",u.jc(18,14,"lang.authorizedEntities")," "),u.Db(4),u.pc("placeholder",u.jc(22,16,"lang.searchEntities")))},directives:[O.t,S.f,Ft.a,Rt.a,Pn.e,O.s,S.c,Tt.a,S.i,k.b,w.c,R.b,Rt.d,Pn.a,Pn.b,_.a],pipes:[p.d],styles:[".loading[_ngcontent-%COMP%]{display:flex;height:100%;position:absolute;background:#fff;z-index:2}.loading[_ngcontent-%COMP%], .selectedActionList[_ngcontent-%COMP%]{width:100%}.infoActions[_ngcontent-%COMP%]{font-size:80%}.selectedAction[_ngcontent-%COMP%]{height:70px}.selectedAction[_ngcontent-%COMP%]   .actionLabel[_ngcontent-%COMP%]{padding-left:10px;flex:1}.formType[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:10px;border-radius:4px;border:1px solid #ccc;position:relative;padding:10px}.formType-title[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;max-width:85%;text-overflow:ellipsis;z-index:1;font-size:20px;font-weight:700;background:#fff;position:absolute;top:-18px;left:10px;padding:0;margin:0;color:#135f7f}.alert-message[_ngcontent-%COMP%]{max-width:100%}a[_ngcontent-%COMP%]{cursor:pointer}.jstreeEntities[_ngcontent-%COMP%]   .mat-form-field-appearance-outline[_ngcontent-%COMP%]{font-size:11px}.cdk-drag-preview[_ngcontent-%COMP%]{background:#fff;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-preview[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%], .cdk-drag-preview[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{visibility:hidden}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.selectedAction[_ngcontent-%COMP%]:last-child{border:none}.selectedAction.cdk-drop-list-dragging[_ngcontent-%COMP%]   .selectedAction[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]}),An),zn=a("8N1J"),$n=["snav2"],Nn=["paginatorBaskets"],Hn=["sortBaskets"],Bn=["sortUsers"];function Xn(t,e){1&t&&(u.Wb(0,"div",13),u.Rb(1,"mat-spinner",14),u.Vb())}function Gn(t,e){if(1&t){var a=u.Xb();u.Wb(0,"input",28),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).group.group_id=t})),u.ic(1,"translate"),u.Vb()}if(2&t){var n=u.hc(2);u.pc("placeholder",u.jc(1,2,"lang.id")),u.oc("ngModel",n.group.group_id)}}function qn(t,e){if(1&t){var a=u.Xb();u.Wb(0,"input",29),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).group.group_id=t})),u.ic(1,"translate"),u.ic(2,"translate"),u.Vb()}if(2&t){var n=u.hc(2);u.pc("placeholder",u.jc(1,3,"lang.id")),u.pc("title",u.jc(2,5,"lang.id")),u.oc("ngModel",n.group.group_id)}}function Kn(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-list-item"),u.Wb(1,"mat-slide-toggle",37),u.dc("change",(function(t){u.Dc(a);var n=e.$implicit;return u.hc(4).toggleService(t,n)})),u.ic(2,"translate"),u.Qc(3),u.ic(4,"translate"),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit,i=u.hc(4);u.Db(1),u.pc("name",n.label),u.pc("matTooltip",u.jc(2,4,n.comment)),u.oc("checked",i.group.privileges.indexOf(n.id)>-1),u.Db(2),u.Sc(" ",u.jc(4,6,n.label),"")}}function Jn(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",41),u.dc("click",(function(t){u.Dc(a);var e=u.hc().$implicit,n=u.hc(4);return t.stopPropagation(),n.openUserParams(e.id)})),u.Rb(1,"mat-icon",42),u.Vb()}if(2&t){var n=u.hc().$implicit,i=u.hc(4);u.Ib("active",i.panelMode===n.id),u.oc("title",i.translate.instant("lang.goToAdminParams"))("disabled",-1===i.group.privileges.indexOf(n.id))}}function Yn(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",38),u.Wb(1,"mat-slide-toggle",39),u.dc("ngModelChange",(function(t){return u.Dc(a),e.$implicit.checked=t}))("change",(function(t){u.Dc(a);var n=e.$implicit;return u.hc(4).toggleService(t,n)})),u.ic(2,"translate"),u.Qc(3),u.ic(4,"translate"),u.Vb(),u.Oc(5,Jn,2,4,"button",40),u.Vb()}if(2&t){var n=e.$implicit;u.Db(1),u.pc("name",n.label),u.pc("matTooltip",u.jc(2,6,n.comment)),u.oc("ngModel",n.checked)("checked",n.checked),u.Db(2),u.Sc("",u.jc(4,8,n.label)," "),u.Db(2),u.oc("ngIf",n.hasParams)}}function Zn(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-list-item"),u.Wb(1,"mat-slide-toggle",37),u.dc("change",(function(t){u.Dc(a);var n=e.$implicit;return u.hc(6).toggleService(t,n)})),u.ic(2,"translate"),u.Qc(3),u.ic(4,"translate"),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit,i=u.hc(6);u.Db(1),u.pc("name",n.label),u.pc("matTooltip",u.jc(2,4,n.comment)),u.oc("checked",i.group.privileges.indexOf(n.id)>-1),u.Db(2),u.Sc("",u.jc(4,6,n.label)," ")}}function ti(t,e){if(1&t&&(u.Ub(0),u.Wb(1,"mat-list"),u.Oc(2,Zn,5,8,"mat-list-item",30),u.ic(3,"filterList"),u.ic(4,"sortBy"),u.Vb(),u.Tb()),2&t){var a=u.hc().$implicit;u.hc();var n=u.zc(19);u.Db(2),u.oc("ngForOf",u.lc(3,1,u.kc(4,5,a.services,"label"),n.value,"label"))}}function ei(t,e){if(1&t&&(u.Wb(0,"mat-option",51),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a.id),u.Db(1),u.Rc(u.jc(2,2,a.label))}}function ai(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-list-item",45),u.Rb(1,"span",46),u.Wb(2,"mat-form-field",47),u.Wb(3,"mat-select",48),u.dc("ngModelChange",(function(t){return u.Dc(a),e.$implicit.current=t}))("selectionChange",(function(t){u.Dc(a);var n=e.$implicit;return u.hc(6).changeDifflistPrivilege(t,n.id)})),u.Wb(4,"mat-option",49),u.Qc(5),u.ic(6,"translate"),u.Vb(),u.Oc(7,ei,3,4,"mat-option",50),u.Vb(),u.Vb(),u.Qc(8,". "),u.Vb()}if(2&t){var n=e.$implicit;u.Db(1),u.oc("innerHTML",n.label,u.Ec),u.Db(2),u.oc("ngModel",n.current),u.Db(2),u.Rc(u.jc(6,4,"lang.noRole")),u.Db(2),u.oc("ngForOf",n.services)}}function ni(t,e){if(1&t&&(u.Ub(0),u.Oc(1,ai,9,6,"mat-list-item",44),u.Tb()),2&t){var a=u.hc().$implicit;u.Db(1),u.oc("ngForOf",a.services)}}function ii(t,e){if(1&t&&(u.Wb(0,"mat-option",51),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a.id),u.Db(1),u.Rc(u.jc(2,2,a.label))}}function oi(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-list-item",45),u.Rb(1,"span",46),u.Wb(2,"mat-form-field",52),u.Wb(3,"mat-select",48),u.dc("ngModelChange",(function(t){return u.Dc(a),e.$implicit.current=t}))("selectionChange",(function(t){return u.Dc(a),u.hc(6).changePersonalDataPrivilege(t)})),u.Wb(4,"mat-option",49),u.Qc(5),u.ic(6,"translate"),u.Vb(),u.Oc(7,ii,3,4,"mat-option",50),u.Vb(),u.Vb(),u.Qc(8,". "),u.Vb()}if(2&t){var n=e.$implicit;u.Db(1),u.oc("innerHTML",n.label,u.Ec),u.Db(2),u.oc("ngModel",n.current),u.Db(2),u.Rc(u.jc(6,4,"lang.notVisible")),u.Db(2),u.oc("ngForOf",n.services)}}function ri(t,e){if(1&t&&(u.Ub(0),u.Oc(1,oi,9,6,"mat-list-item",44),u.Tb()),2&t){var a=u.hc().$implicit;u.Db(1),u.oc("ngForOf",a.services)}}var ci=function(){return["diffusionList","confidentialityAndSecurity"]};function li(t,e){if(1&t&&(u.Wb(0,"mat-expansion-panel",43),u.ic(1,"filterList"),u.Wb(2,"mat-expansion-panel-header"),u.Wb(3,"mat-panel-title"),u.Qc(4),u.Vb(),u.Vb(),u.Oc(5,ti,5,8,"ng-container",12),u.Oc(6,ni,2,1,"ng-container",12),u.Oc(7,ri,2,1,"ng-container",12),u.Vb()),2&t){var a=e.$implicit;u.hc();var n=u.zc(19);u.Ib("emptyExpansionPanel",0==u.lc(1,6,a.services,n.value,"label").length),u.Db(4),u.Sc(" ",a.label," "),u.Db(1),u.oc("ngIf",-1===u.uc(10,ci).indexOf(a.id)),u.Db(1),u.oc("ngIf","diffusionList"===a.id),u.Db(1),u.oc("ngIf","confidentialityAndSecurity"===a.id)}}function si(t,e){if(1&t&&(u.Wb(0,"mat-tab-group"),u.Wb(1,"mat-tab",16),u.ic(2,"translate"),u.Wb(3,"mat-list"),u.Oc(4,Kn,5,8,"mat-list-item",30),u.ic(5,"sortBy"),u.Vb(),u.Vb(),u.Wb(6,"mat-tab",16),u.ic(7,"translate"),u.Wb(8,"mat-form-field",31),u.Rb(9,"input",32,33),u.ic(11,"translate"),u.Vb(),u.Oc(12,Yn,6,10,"div",34),u.ic(13,"filterList"),u.ic(14,"sortBy"),u.Vb(),u.Wb(15,"mat-tab",16),u.ic(16,"translate"),u.Wb(17,"mat-form-field",31),u.Rb(18,"input",32,35),u.ic(20,"translate"),u.Vb(),u.Oc(21,li,8,11,"mat-expansion-panel",36),u.ic(22,"sortBy"),u.Vb(),u.Vb()),2&t){var a=u.zc(10),n=u.hc(3);u.Db(1),u.pc("label",u.jc(2,8,"lang.menus")),u.Db(3),u.oc("ngForOf",u.kc(5,10,n.privilegeService.getMenus(),"label")),u.Db(2),u.pc("label",u.jc(7,13,"lang.administrationServices")),u.Db(3),u.pc("placeholder",u.jc(11,15,"lang.filterBy")),u.Db(3),u.oc("ngForOf",u.lc(13,17,u.kc(14,21,n.administrationPrivileges,"label"),a.value,"label")),u.Db(3),u.pc("label",u.jc(16,24,"lang.functionnalities")),u.Db(3),u.pc("placeholder",u.jc(20,26,"lang.filterBy")),u.Db(3),u.oc("ngForOf",u.kc(22,28,n.unitPrivileges,"label"))}}function di(t,e){if(1&t&&(u.Wb(0,"mat-tab",16),u.ic(1,"translate"),u.Oc(2,si,23,31,"mat-tab-group",12),u.Vb()),2&t){var a=u.hc(2);u.pc("label",u.jc(1,2,"lang.privileges")),u.Db(2),u.oc("ngIf",!a.creationMode)}}function bi(t,e){if(1&t){var a=u.Xb();u.Wb(0,"app-indexing-administration",54),u.dc("resfreshShortcut",(function(){return u.Dc(a),u.hc(3).resfreshShortcut()})),u.Vb()}if(2&t){var n=u.hc(3);u.oc("groupId",n.group.id)}}function ui(t,e){1&t&&(u.Wb(0,"mat-tab",16),u.ic(1,"translate"),u.Oc(2,bi,1,1,"ng-template",53),u.Vb()),2&t&&u.pc("label",u.jc(1,1,"lang.indexation"))}var pi=function(){return["/rest/autocomplete/users/administration"]};function fi(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",69),u.Wb(1,"plugin-autocomplete",70),u.dc("triggerEvent",(function(t){return u.Dc(a),u.hc(3).linkUser(t)})),u.Vb(),u.Rb(2,"hr"),u.Vb()}if(2&t){var n=u.hc(3);u.Db(1),u.oc("labelPlaceholder",n.translate.instant("lang.linkUser"))("labelList",n.translate.instant("lang.availableUsers"))("routeDatas",u.uc(4,pi))("targetSearchKey","idToDisplay")}}function mi(t,e){1&t&&(u.Wb(0,"mat-header-cell",71),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.firstname")))}function gi(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.firstname," ")}}function hi(t,e){1&t&&(u.Wb(0,"mat-header-cell",71),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.lastname")))}function vi(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.lastname," ")}}function yi(t,e){1&t&&u.Rb(0,"mat-header-row")}var Di=function(t,e){return{cursor:t,opacity:e}};function Vi(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-row",72),u.dc("click",(function(){u.Dc(a);var t=e.$implicit;return u.hc(3).goToUserAdmin(t)})),u.ic(1,"translate"),u.Vb()}if(2&t){var n=e.$implicit;u.pc("matTooltip",u.jc(1,3,"lang.view")),u.oc("matTooltipDisabled",!n.allowed)("ngStyle",u.wc(5,Di,n.allowed?"pointer":"",n.allowed?"1":"0.6"))}}function Ci(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-tab",16),u.ic(1,"translate"),u.Wb(2,"div",55),u.Oc(3,fi,3,5,"div",56),u.Wb(4,"div",57),u.Wb(5,"mat-form-field"),u.Wb(6,"input",58),u.dc("keyup",(function(t){return u.Dc(a),u.hc(2).applyFilter(t.target.value)})),u.ic(7,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(8,"div",57),u.Rb(9,"mat-paginator",59,60),u.Vb(),u.Vb(),u.Wb(11,"mat-table",61,62),u.Ub(13,63),u.Oc(14,mi,3,3,"mat-header-cell",64),u.Oc(15,gi,2,1,"mat-cell",65),u.Tb(),u.Ub(16,66),u.Oc(17,hi,3,3,"mat-header-cell",64),u.Oc(18,vi,2,1,"mat-cell",65),u.Tb(),u.Oc(19,yi,1,0,"mat-header-row",67),u.Oc(20,Vi,2,8,"mat-row",68),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.pc("label",u.jc(1,9,"lang.relatedUsers")),u.Db(3),u.oc("ngIf",n.group.canAdminUsers),u.Db(3),u.pc("placeholder",u.jc(7,11,"lang.filterBy")),u.Db(3),u.oc("length",100)("hidePageSize",!0)("pageSize",10),u.Db(2),u.oc("dataSource",n.usersDataSource),u.Db(8),u.oc("matHeaderRowDef",n.usersDisplayedColumns),u.Db(1),u.oc("matRowDefColumns",n.usersDisplayedColumns)}}function xi(t,e){1&t&&(u.Wb(0,"mat-header-cell",71),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.label")))}function Mi(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.basket_name," ")}}function Wi(t,e){1&t&&(u.Wb(0,"mat-header-cell",71),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc("",u.jc(2,1,"lang.description")," "))}function Oi(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.basket_desc," ")}}function _i(t,e){1&t&&u.Rb(0,"mat-header-row")}function Si(t,e){1&t&&(u.Rb(0,"mat-row",79),u.ic(1,"translate")),2&t&&(u.qc("routerLink","/administration/baskets/",e.$implicit.basket_id,""),u.pc("matTooltip",u.jc(1,2,"lang.view")))}function ki(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-tab",16),u.ic(1,"translate"),u.Wb(2,"div",55),u.Wb(3,"div",57),u.Wb(4,"mat-form-field"),u.Wb(5,"input",58),u.dc("keyup",(function(t){return u.Dc(a),u.hc(2).applyBasketsFilter(t.target.value)})),u.ic(6,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(7,"div",57),u.Rb(8,"mat-paginator",59,73),u.Vb(),u.Vb(),u.Wb(10,"mat-table",74,75),u.Ub(12,76),u.Oc(13,xi,3,3,"mat-header-cell",64),u.Oc(14,Mi,2,1,"mat-cell",65),u.Tb(),u.Ub(15,77),u.Oc(16,Wi,3,3,"mat-header-cell",64),u.Oc(17,Oi,2,1,"mat-cell",65),u.Tb(),u.Oc(18,_i,1,0,"mat-header-row",67),u.Oc(19,Si,2,4,"mat-row",78),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.pc("label",u.jc(1,8,"lang.relatedBaskets")),u.Db(5),u.pc("placeholder",u.jc(6,10,"lang.filterBy")),u.Db(3),u.oc("length",100)("hidePageSize",!0)("pageSize",10),u.Db(2),u.oc("dataSource",n.basketsDataSource),u.Db(8),u.oc("matHeaderRowDef",n.basketsDisplayedColumns),u.Db(1),u.oc("matRowDefColumns",n.basketsDisplayedColumns)}}function wi(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-card",15),u.Wb(1,"mat-tab-group"),u.Wb(2,"mat-tab",16),u.ic(3,"translate"),u.Wb(4,"form",17,18),u.dc("ngSubmit",(function(){return u.Dc(a),u.hc().onSubmit()})),u.Wb(6,"mat-form-field"),u.Oc(7,Gn,2,4,"input",19),u.Oc(8,qn,3,7,"input",20),u.Vb(),u.Wb(9,"mat-form-field"),u.Wb(10,"input",21),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().group.group_desc=t})),u.ic(11,"translate"),u.ic(12,"translate"),u.Vb(),u.Vb(),u.Wb(13,"mat-form-field"),u.Wb(14,"input",22),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().group.security.maarch_comment=t})),u.ic(15,"translate"),u.ic(16,"translate"),u.Vb(),u.Vb(),u.Wb(17,"mat-form-field"),u.Wb(18,"textarea",23),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().group.security.where_clause=t})),u.ic(19,"translate"),u.ic(20,"translate"),u.Vb(),u.Wb(21,"mat-icon",24),u.dc("click",(function(){u.Dc(a);var t=u.hc(),e=u.zc(14);return t.panelMode="keywordInfos",e.toggle()})),u.ic(22,"translate"),u.Vb(),u.Vb(),u.Wb(23,"div",25),u.Wb(24,"button",26),u.Qc(25),u.ic(26,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Oc(27,di,3,4,"mat-tab",27),u.Oc(28,ui,3,3,"mat-tab",27),u.Oc(29,Ci,21,13,"mat-tab",27),u.Oc(30,ki,20,12,"mat-tab",27),u.Vb(),u.Vb()}if(2&t){var n=u.zc(5),i=u.hc();u.Db(2),u.pc("label",u.jc(3,19,"lang.informations")),u.Db(5),u.oc("ngIf",i.creationMode),u.Db(1),u.oc("ngIf",!i.creationMode),u.Db(2),u.pc("title",u.jc(11,21,"lang.label")),u.pc("placeholder",u.jc(12,23,"lang.label")),u.oc("ngModel",i.group.group_desc),u.Db(4),u.pc("title",u.jc(15,25,"lang.description")),u.pc("placeholder",u.jc(16,27,"lang.description")),u.oc("ngModel",i.group.security.maarch_comment),u.Db(4),u.pc("title",u.jc(19,29,"lang.clauseGroup")),u.pc("placeholder",u.jc(20,31,"lang.clauseGroup")),u.oc("ngModel",i.group.security.where_clause),u.Db(3),u.pc("matTooltip",u.jc(22,33,"lang.keywordHelper")),u.Db(3),u.oc("disabled",!n.form.valid),u.Db(1),u.Rc(u.jc(26,35,"lang.save")),u.Db(2),u.oc("ngIf",!i.creationMode),u.Db(1),u.oc("ngIf",!i.creationMode),u.Db(1),u.oc("ngIf",!i.creationMode),u.Db(1),u.oc("ngIf",!i.creationMode)}}function Ii(t,e){1&t&&(u.Ub(0),u.Wb(1,"mat-nav-list"),u.Wb(2,"h3",80),u.Qc(3),u.ic(4,"translate"),u.Vb(),u.Vb(),u.Wb(5,"mat-list",81),u.Wb(6,"p",82),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Wb(9,"div",83),u.Wb(10,"b"),u.Qc(11,"DESTINATION = @my_primary_entity or DESTINATION in (@subentities[@my_primary_entity])"),u.Vb(),u.Vb(),u.Wb(12,"h4",84),u.Qc(13,"@user :"),u.Vb(),u.Wb(14,"p",85),u.Qc(15),u.ic(16,"translate"),u.Vb(),u.Wb(17,"h4",84),u.Qc(18,"@user_id :"),u.Vb(),u.Wb(19,"p",85),u.Qc(20),u.ic(21,"translate"),u.Vb(),u.Wb(22,"h4",84),u.Qc(23,"@email :"),u.Vb(),u.Wb(24,"p",85),u.Qc(25),u.ic(26,"translate"),u.Vb(),u.Wb(27,"h4",84),u.Qc(28,"@my_entities :"),u.Vb(),u.Wb(29,"p",85),u.Qc(30),u.ic(31,"translate"),u.Vb(),u.Wb(32,"h4",84),u.Qc(33,"@my_entities_id :"),u.Vb(),u.Wb(34,"p",85),u.Qc(35),u.ic(36,"translate"),u.Vb(),u.Wb(37,"h4",84),u.Qc(38,"@my_primary_entity :"),u.Vb(),u.Wb(39,"p",85),u.Qc(40),u.ic(41,"translate"),u.Vb(),u.Wb(42,"h4",84),u.Qc(43,"@my_primary_entity_id :"),u.Vb(),u.Wb(44,"p",85),u.Qc(45),u.ic(46,"translate"),u.Vb(),u.Wb(47,"h4",84),u.Qc(48,"@subentities[('entity_1',...,'entity_n')] : "),u.Vb(),u.Wb(49,"p",85),u.Qc(50),u.ic(51,"translate"),u.Vb(),u.Wb(52,"h4",84),u.Qc(53,"@parent_entity['entity_id'] :"),u.Vb(),u.Wb(54,"p",85),u.Qc(55),u.ic(56,"translate"),u.Vb(),u.Wb(57,"h4",84),u.Qc(58,"@sisters_entities['entity_id'] :"),u.Vb(),u.Wb(59,"p",85),u.Qc(60),u.ic(61,"translate"),u.Vb(),u.Wb(62,"h4",84),u.Qc(63,"@entity_type['type'] :"),u.Vb(),u.Wb(64,"p",85),u.Qc(65),u.ic(66,"translate"),u.Vb(),u.Wb(67,"h4",84),u.Qc(68,"@all_entities :"),u.Vb(),u.Wb(69,"p",85),u.Qc(70),u.ic(71,"translate"),u.Vb(),u.Wb(72,"h4",84),u.Qc(73,"@immediate_children['entity_1',..., 'entity_id'] : "),u.Vb(),u.Wb(74,"p",85),u.Qc(75),u.ic(76,"translate"),u.Vb(),u.Vb(),u.Tb()),2&t&&(u.Db(3),u.Rc(u.jc(4,15,"lang.keywordHelp")),u.Db(4),u.Rc(u.jc(8,17,"lang.keywordHelpDesc_11")),u.Db(8),u.Rc(u.jc(16,19,"lang.keywordHelpDesc_1")),u.Db(5),u.Rc(u.jc(21,21,"lang.keywordHelpDesc_12")),u.Db(5),u.Rc(u.jc(26,23,"lang.keywordHelpDesc_2")),u.Db(5),u.Rc(u.jc(31,25,"lang.keywordHelpDesc_3")),u.Db(5),u.Rc(u.jc(36,27,"lang.keywordHelpDesc_13")),u.Db(5),u.Rc(u.jc(41,29,"lang.keywordHelpDesc_4")),u.Db(5),u.Rc(u.jc(46,31,"lang.keywordHelpDesc_14")),u.Db(5),u.Rc(u.jc(51,33,"lang.keywordHelpDesc_5")),u.Db(5),u.Rc(u.jc(56,35,"lang.keywordHelpDesc_6")),u.Db(5),u.Rc(u.jc(61,37,"lang.keywordHelpDesc_7")),u.Db(5),u.Rc(u.jc(66,39,"lang.keywordHelpDesc_8")),u.Db(5),u.Rc(u.jc(71,41,"lang.keywordHelpDesc_9")),u.Db(5),u.Rc(u.jc(76,43,"lang.keywordHelpDesc_10")))}function ji(t,e){if(1&t&&(u.Wb(0,"mat-list-option",90),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("selected",a.checked)("value",a.id),u.Db(1),u.Sc(" ",a.label," ")}}function Ri(t,e){if(1&t){var a=u.Xb();u.Ub(0),u.Wb(1,"mat-nav-list"),u.Wb(2,"h3",80),u.Qc(3),u.ic(4,"translate"),u.Vb(),u.Vb(),u.Wb(5,"mat-list",81),u.Wb(6,"p",86),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Wb(9,"mat-selection-list",87,88),u.dc("selectionChange",(function(){u.Dc(a);var t=u.zc(10);return u.hc().updatePrivilegeParams(t.selectedOptions.selected)})),u.Oc(11,ji,2,3,"mat-list-option",89),u.Vb(),u.Vb(),u.Tb()}if(2&t){var n=u.hc();u.Db(3),u.Rc(u.jc(4,3,"lang.adminParamsUsers")),u.Db(4),u.Sc(" ",u.jc(8,5,"lang.chooseAllowedGroups")," : "),u.Db(4),u.oc("ngForOf",n.authorizedGroupsUserParams)}}var Ti,Pi=((Ti=function(){function t(e,a,n,i,o,r,c,l,s){_classCallCheck(this,t),this.translate=e,this.http=a,this.route=n,this.router=i,this.notify=o,this.headerService=r,this.appService=c,this.privilegeService=l,this.dialog=s,this.loading=!1,this.paramsLoading=!1,this.group={security:{}},this.menus={},this.usersDisplayedColumns=["firstname","lastname"],this.basketsDisplayedColumns=["basket_name","basket_desc"],this.unitPrivileges=[],this.administrationPrivileges=[],this.authorizedGroupsUserParams=[],this.panelMode="keywordInfos"}return _createClass(t,[{key:"applyFilter",value:function(t){t=(t=t.trim()).toLowerCase(),this.usersDataSource.filter=t}},{key:"applyBasketsFilter",value:function(t){t=(t=t.trim()).toLowerCase(),this.basketsDataSource.filter=t}},{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.route.params.subscribe((function(e){void 0===e.id?(t.headerService.setHeader(t.translate.instant("lang.groupCreation")),t.creationMode=!0,t.loading=!1):(t.creationMode=!1,t.http.get("../rest/groups/"+e.id+"/details").subscribe((function(e){t.group=e.group,t.administrationPrivileges=t.privilegeService.getAdministrations(),t.administrationPrivileges=t.administrationPrivileges.map((function(e){return Object.assign(Object.assign({},e),{checked:t.group.privileges.indexOf(e.id)>-1})})),t.privilegeService.getUnitsPrivileges().forEach((function(e){var a=t.privilegeService.getPrivilegesByUnit(e);if("diffusionList"===e)a=[{id:"indexing_diffList",label:t.translate.instant("lang.diffListPrivilegeMsgIndexing"),current:void 0!==t.group.privileges.filter((function(t){return["update_diffusion_indexing","update_diffusion_except_recipient_indexing"].indexOf(t)>-1}))[0]?t.group.privileges.filter((function(t){return["update_diffusion_indexing","update_diffusion_except_recipient_indexing"].indexOf(t)>-1}))[0]:"",services:t.privilegeService.getPrivileges(["update_diffusion_indexing","update_diffusion_except_recipient_indexing"])},{id:"process_diffList",label:t.translate.instant("lang.diffListPrivilegeMsgProcess"),current:void 0!==t.group.privileges.filter((function(t){return["update_diffusion_process","update_diffusion_except_recipient_process"].indexOf(t)>-1}))[0]?t.group.privileges.filter((function(t){return["update_diffusion_process","update_diffusion_except_recipient_process"].indexOf(t)>-1}))[0]:"",services:t.privilegeService.getPrivileges(["update_diffusion_process","update_diffusion_except_recipient_process"])},{id:"details_diffList",label:t.translate.instant("lang.diffListPrivilegeMsgDetails"),current:void 0!==t.group.privileges.filter((function(t){return["update_diffusion_details","update_diffusion_except_recipient_details"].indexOf(t)>-1}))[0]?t.group.privileges.filter((function(t){return["update_diffusion_details","update_diffusion_except_recipient_details"].indexOf(t)>-1}))[0]:"",services:t.privilegeService.getPrivileges(["update_diffusion_details","update_diffusion_except_recipient_details"])}];else if("confidentialityAndSecurity"===e){var n="";t.group.privileges.filter((function(t){return"manage_personal_data"===t}))[0]?n="manage_personal_data":t.group.privileges.filter((function(t){return"view_personal_data"===t}))[0]&&(n="view_personal_data"),a=[{id:"confidentialityAndSecurity_personal_data",label:t.translate.instant("lang.personalDataMsg"),current:n,services:t.privilegeService.getPrivileges(["view_personal_data","manage_personal_data"])}]}t.unitPrivileges.push({id:e,label:t.translate.instant("lang."+e),services:a})})),t.headerService.setHeader(t.translate.instant("lang.groupModification"),t.group.group_desc),t.loading=!1,setTimeout((function(){t.usersDataSource=new q.p(t.group.users),t.usersDataSource.paginator=t.paginator,t.usersDataSource.sort=t.sortUsers,t.basketsDataSource=new q.p(t.group.baskets),t.basketsDataSource.paginator=t.paginatorBaskets,t.basketsDataSource.sort=t.sortBaskets}),0)}),(function(e){t.notify.handleErrors(e)})))}))}},{key:"changeDifflistPrivilege",value:function(t,e){"indexing_diffList"===e?"update_diffusion_indexing"===t.value?this.manageServices(["update_diffusion_indexing","update_diffusion_except_recipient_indexing"]):"update_diffusion_except_recipient_indexing"===t.value?this.manageServices(["update_diffusion_except_recipient_indexing","update_diffusion_indexing"]):this.manageServices(["update_diffusion_indexing","update_diffusion_except_recipient_indexing"],"deleteAll"):"process_diffList"===e?"update_diffusion_process"===t.value?this.manageServices(["update_diffusion_process","update_diffusion_except_recipient_process"]):"update_diffusion_except_recipient_process"===t.value?this.manageServices(["update_diffusion_except_recipient_process","update_diffusion_process"]):this.manageServices(["update_diffusion_process","update_diffusion_except_recipient_process"],"deleteAll"):"update_diffusion_details"===t.value?this.manageServices(["update_diffusion_details","update_diffusion_except_recipient_details"]):"update_diffusion_except_recipient_details"===t.value?this.manageServices(["update_diffusion_except_recipient_details","update_diffusion_details"]):this.manageServices(["update_diffusion_details","update_diffusion_except_recipient_details"],"deleteAll")}},{key:"manageServices",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"deleteAll"!==a?this.http.post("../rest/groups/".concat(this.group.id,"/privileges/").concat(t[0]),{}).pipe(Object(d.a)((function(){e.group.privileges.push(t[0])})),Object(Y.a)((function(){return e.http.delete("../rest/groups/".concat(e.group.id,"/privileges/").concat(t[1]))})),Object(d.a)((function(){e.group.privileges.splice(e.group.privileges.indexOf(t[1]),1),e.headerService.resfreshCurrentUser(),e.notify.success(e.translate.instant("lang.groupServicesUpdated"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe():this.http.delete("../rest/groups/".concat(this.group.id,"/privileges/").concat(t[0])).pipe(Object(d.a)((function(){e.group.privileges.splice(e.group.privileges.indexOf(t[0]),1)})),Object(Y.a)((function(){return e.http.delete("../rest/groups/".concat(e.group.id,"/privileges/").concat(t[1]))})),Object(d.a)((function(){e.group.privileges.splice(e.group.privileges.indexOf(t[1]),1),e.headerService.resfreshCurrentUser(),e.notify.success(e.translate.instant("lang.groupServicesUpdated"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe()}},{key:"changePersonalDataPrivilege",value:function(t){var e=this;"view_personal_data"===t.value?this.manageServices(["view_personal_data","manage_personal_data"]):"manage_personal_data"===t.value?this.http.post("../rest/groups/".concat(this.group.id,"/privileges/view_personal_data"),{}).pipe(Object(d.a)((function(){e.group.privileges.push("view_personal_data")})),Object(Y.a)((function(){return e.http.post("../rest/groups/".concat(e.group.id,"/privileges/manage_personal_data"),{})})),Object(d.a)((function(){e.group.privileges.splice(e.group.privileges.indexOf("manage_personal_data"),1),e.headerService.resfreshCurrentUser(),e.notify.success(e.translate.instant("lang.groupServicesUpdated"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe():this.manageServices(["view_personal_data","manage_personal_data"],"deleteAll")}},{key:"resfreshShortcut",value:function(){return Object(yt.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.headerService.resfreshCurrentUser();case 2:this.privilegeService.resfreshUserShortcuts();case 3:case"end":return t.stop()}}),t,this)})))}},{key:"getCurrentPrivListDiff",value:function(t){return this.group.privileges.indexOf(t)>-1}},{key:"onSubmit",value:function(){var t=this;this.creationMode?this.http.post("../rest/groups",this.group).subscribe((function(e){t.notify.success(t.translate.instant("lang.groupAdded")),t.router.navigate(["/administration/groups/"+e.group])}),(function(e){t.notify.error(e.error.errors)})):this.http.put("../rest/groups/"+this.group.id,{description:this.group.group_desc,security:this.group.security}).subscribe((function(){t.notify.success(t.translate.instant("lang.groupUpdated"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"toggleService",value:function(t,e){var a=this;t.checked?"admin_groups"===e.id?this.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.confirmAction"),msg:this.translate.instant("lang.enableGroupMsg")}}).afterClosed().pipe(Object(d.a)((function(t){"ok"!==t&&(e.checked=!1)})),Object(J.a)((function(t){return"ok"===t})),Object(d.a)((function(){a.addService(e)})),Object(b.a)((function(t){return a.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe():this.addService(e):(this.sidenavRight.close(),this.removeService(e))}},{key:"addService",value:function(t){var e=this;this.http.post("../rest/groups/".concat(this.group.id,"/privileges/").concat(t.id),{}).pipe(Object(d.a)((function(){e.group.privileges.push(t.id),e.headerService.resfreshCurrentUser(),e.notify.success(e.translate.instant("lang.groupServicesUpdated"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe()}},{key:"removeService",value:function(t){var e=this;this.http.delete("../rest/groups/".concat(this.group.id,"/privileges/").concat(t.id)).pipe(Object(d.a)((function(){e.group.privileges.splice(e.group.privileges.indexOf(t.id),1),e.headerService.resfreshCurrentUser(),e.notify.success(e.translate.instant("lang.groupServicesUpdated"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe()}},{key:"linkUser",value:function(t){var e=this;this.http.post("../rest/users/"+t.id+"/groups",{groupId:this.group.group_id,role:this.group.role}).subscribe((function(){var a=t.idToDisplay.split(" ");e.group.users.push({id:t.id,user_id:t.otherInfo,firstname:a[0],lastname:a[1],allowed:!0}),e.usersDataSource=new q.p(e.group.users),e.usersDataSource.paginator=e.paginator,e.usersDataSource.sort=e.sortUsers,e.notify.success(e.translate.instant("lang.userAdded"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"openUserParams",value:function(t){var e=this;this.sidenavRight.toggle(),this.sidenavRight.opened?(this.panelMode=t,this.paramsLoading=!0,this.http.get("../rest/groups").pipe(Object(s.a)((function(t){return t.groups=t.groups.map((function(t){return{id:t.id,label:t.group_desc}})),t})),Object(d.a)((function(t){e.authorizedGroupsUserParams=t.groups})),Object(Y.a)((function(){return e.http.get("../rest/groups/".concat(e.group.id,"/privileges/").concat(e.panelMode,"/parameters?parameter=groups"))})),Object(d.a)((function(t){var a=t;e.authorizedGroupsUserParams.forEach((function(t){t.checked=a.indexOf(t.id)>-1}))})),Object(Dt.a)((function(){return e.paramsLoading=!1})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe()):this.panelMode=""}},{key:"updatePrivilegeParams",value:function(t){var e=this,a={};"admin_users"===this.panelMode&&(a={groups:t.map((function(t){return t.value}))}),this.http.put("../rest/groups/".concat(this.group.id,"/privileges/").concat(this.panelMode,"/parameters"),{parameters:a}).pipe(Object(d.a)((function(){e.notify.success(e.translate.instant("lang.parameterUpdated"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe()}},{key:"goToUserAdmin",value:function(t){t.allowed&&this.router.navigate(["/administration/users/"+t.id])}}]),t}()).\u0275fac=function(t){return new(t||Ti)(u.Qb(p.e),u.Qb(f.b),u.Qb(o.a),u.Qb(o.c),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a),u.Qb(h.a),u.Qb(N.b))},Ti.\u0275cmp=u.Kb({type:Ti,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc($n,!0),u.Xc(Nn,!0),u.Kc(Hn,!0),u.Xc(H.a,!0),u.Kc(Bn,!0)),2&t&&(u.yc(a=u.ec())&&(e.sidenavRight=a.first),u.yc(a=u.ec())&&(e.paginatorBaskets=a.first),u.yc(a=u.ec())&&(e.sortBaskets=a.first),u.yc(a=u.ec())&&(e.paginator=a.first),u.yc(a=u.ec())&&(e.sortUsers=a.first))},decls:17,vars:13,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",3,"mode","fixedInViewport","opened"],["snav2",""],[4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[3,"label"],[1,"form-horizontal",3,"ngSubmit"],["groupForm","ngForm"],["matInput","","name","identifier","pattern","^[\\w.-]*$","maxlength","32","required","",3,"placeholder","ngModel","ngModelChange",4,"ngIf"],["matInput","","name","identifier","disabled","",3,"placeholder","title","ngModel","ngModelChange",4,"ngIf"],["matInput","","name","description","maxlength","255","required","",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","name","comment",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","name","clause","required","","matTextareaAutosize","","matAutosizeMinRows","1","matAutosizeMaxRows","5",3,"title","placeholder","ngModel","ngModelChange"],["color","primary","matSuffix","",1,"fa","fa-info-circle",2,"cursor","pointer",3,"matTooltip","click"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary",3,"disabled"],[3,"label",4,"ngIf"],["matInput","","name","identifier","pattern","^[\\w.-]*$","maxlength","32","required","",3,"placeholder","ngModel","ngModelChange"],["matInput","","name","identifier","disabled","",3,"placeholder","title","ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["floatLabel","never","appearance","outline",1,"basketsFilter",2,"padding-left","20px","padding-right","20px","font-size","11px"],["matInput","",3,"placeholder"],["listFilterAdmin",""],["class","col-md-3","style","padding:10px;",4,"ngFor","ngForOf"],["listFilter",""],["expanded","",3,"emptyExpansionPanel",4,"ngFor","ngForOf"],["color","primary",3,"name","checked","matTooltip","change"],[1,"col-md-3",2,"padding","10px"],["color","primary",3,"name","ngModel","checked","matTooltip","ngModelChange","change"],["mat-icon-button","","color","primary",3,"active","title","disabled","click",4,"ngIf"],["mat-icon-button","","color","primary",3,"title","disabled","click"],[1,"fa","fa-cogs"],["expanded",""],["color","primary","style","font-size: 16px;",4,"ngFor","ngForOf"],["color","primary",2,"font-size","16px"],[3,"innerHTML"],[2,"width","250px !important","padding-left","10px","padding-right","10px"],[3,"ngModel","ngModelChange","selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[2,"width","300px !important","padding-left","10px","padding-right","10px"],["matTabContent",""],[3,"groupId","resfreshShortcut"],[1,"row",2,"margin","0px"],["class","col-md-12","style","padding:5px;",4,"ngIf"],[1,"col-md-6","col-xs-6"],["matInput","",3,"placeholder","keyup"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortActive","lastname","matSortDirection","asc",3,"dataSource"],["sortUsers","matSort"],["matColumnDef","firstname"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","lastname"],[4,"matHeaderRowDef"],[3,"matTooltip","matTooltipDisabled","ngStyle","click",4,"matRowDef","matRowDefColumns"],[1,"col-md-12",2,"padding","5px"],[3,"labelPlaceholder","labelList","routeDatas","targetSearchKey","triggerEvent"],["mat-sort-header",""],[3,"matTooltip","matTooltipDisabled","ngStyle","click"],["paginatorBaskets",""],["matSort","","matSortActive","basket_name","matSortDirection","asc",3,"dataSource"],["sortBaskets","matSort"],["matColumnDef","basket_name"],["matColumnDef","basket_desc"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[2,"cursor","pointer",3,"routerLink","matTooltip"],["mat-subheader",""],["role","list",2,"width","400px","padding","5px"],[2,"font-size","10px"],[2,"border","1px black solid","padding","3px","font-size","10px"],["mat-line","",2,"font-weight","bold","font-size","10px"],["mat-line","",2,"font-size","10px"],["color","primary"],[3,"selectionChange"],["paramsList",""],["color","primary","style","font-size: 13px;","checkboxPosition","before",3,"selected","value",4,"ngFor","ngForOf"],["color","primary","checkboxPosition","before",2,"font-size","13px",3,"selected","value"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Wb(1,"mat-sidenav-content"),u.Wb(2,"div",1),u.Wb(3,"div",2),u.Wb(4,"div",3),u.Rb(5,"header-left"),u.Vb(),u.Wb(6,"div",4),u.Rb(7,"header-right"),u.Vb(),u.Vb(),u.Rb(8,"div",5),u.Vb(),u.Wb(9,"div",6),u.Wb(10,"div",7),u.Oc(11,Xn,2,0,"div",8),u.Oc(12,wi,31,37,"mat-card",9),u.Vb(),u.Vb(),u.Vb(),u.Wb(13,"mat-sidenav",10,11),u.Oc(15,Ii,77,45,"ng-container",12),u.Oc(16,Ri,12,7,"ng-container",12),u.Vb(),u.Vb()),2&t&&(u.Db(3),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading),u.Db(1),u.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",(e.appService.getViewMode(),!1)),u.Db(2),u.oc("ngIf","keywordInfos"===e.panelMode),u.Db(1),u.oc("ngIf","admin_users"===e.panelMode))},directives:[C.e,C.f,x.a,W.a,O.t,C.d,w.c,I.a,Ee.c,Ee.a,c.K,c.v,c.w,S.c,k.b,c.d,c.p,c.F,c.u,c.x,k.d,Tt.a,S.j,Qt.b,R.b,c.B,Rt.a,O.s,Rt.d,at.a,Ae.c,Ae.g,Ae.h,it.a,j.p,Ee.b,Un,H.a,q.o,B.a,q.c,q.i,q.b,q.k,q.n,Ft.a,q.h,B.b,q.a,q.j,q.m,O.w,o.d,Rt.h,Rt.g,j.l,Rt.i,Rt.f],pipes:[p.d,T.a,zn.a],styles:["textarea.mat-input-element[_ngcontent-%COMP%]{padding:0;margin:0}.active[_ngcontent-%COMP%]{color:#f99830}.emptyExpansionPanel[_ngcontent-%COMP%]{height:0}"]}),Ti),Qi=["snav2"],Fi=["adminMenuTemplate"];function Li(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-nav-list"),u.Wb(1,"h3",16),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"a",17),u.Rb(5,"mat-icon",18),u.Wb(6,"p",19),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Wb(9,"a",20),u.dc("click",(function(){return u.Dc(a),u.hc(),u.zc(16).toggle()})),u.Rb(10,"mat-icon",21),u.Wb(11,"p",19),u.Qc(12),u.ic(13,"translate"),u.Vb(),u.Vb(),u.Vb()}2&t&&(u.Db(2),u.Rc(u.jc(3,3,"lang.actions")),u.Db(5),u.Sc(" ",u.jc(8,5,"lang.add")," "),u.Db(5),u.Sc(" ",u.jc(13,7,"lang.basketsOrder")," "))}function Ei(t,e){1&t&&(u.Wb(0,"div",22),u.Rb(1,"mat-spinner",23),u.Vb())}function Ai(t,e){if(1&t&&(u.Wb(0,"mat-header-cell",45),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=u.hc(2);u.Ib("hide-for-mobile",a.appService.getViewMode()),u.Db(1),u.Rc(u.jc(2,3,"lang.id"))}}function Ui(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.Ib("hide-for-mobile",n.appService.getViewMode()),u.Db(1),u.Sc(" ",a.basket_id," ")}}function zi(t,e){1&t&&(u.Wb(0,"mat-header-cell",45),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.label")))}function $i(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.basket_name," ")}}function Ni(t,e){if(1&t&&(u.Wb(0,"mat-header-cell",45),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=u.hc(2);u.Ib("hide-for-mobile",a.appService.getViewMode()),u.Db(1),u.Sc("",u.jc(2,3,"lang.description")," ")}}function Hi(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.Ib("hide-for-mobile",n.appService.getViewMode()),u.Db(1),u.Sc(" ",a.basket_desc," ")}}function Bi(t,e){1&t&&u.Rb(0,"mat-header-cell")}function Xi(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-cell",46),u.Wb(1,"button",47),u.dc("click",(function(t){u.Dc(a);var n=e.$implicit,i=u.hc(2);return t.stopPropagation(),i.delete(n)})),u.ic(2,"translate"),u.Rb(3,"mat-icon",48),u.Vb(),u.Vb()}2&t&&(u.Db(1),u.pc("matTooltip",u.jc(2,1,"lang.delete")))}function Gi(t,e){1&t&&u.Rb(0,"mat-header-row")}function qi(t,e){1&t&&(u.Rb(0,"mat-row",49),u.ic(1,"translate")),2&t&&(u.qc("routerLink","/administration/baskets/",e.$implicit.basket_id,""),u.pc("matTooltip",u.jc(1,2,"lang.view")))}function Ki(t,e){if(1&t&&(u.Wb(0,"mat-card",24),u.Wb(1,"div",25),u.Wb(2,"div",26),u.Wb(3,"mat-form-field"),u.Rb(4,"input",27),u.ic(5,"translate"),u.Vb(),u.Vb(),u.Wb(6,"div",26),u.Rb(7,"mat-paginator",28,29),u.Vb(),u.Vb(),u.Wb(9,"mat-table",30,31),u.Ub(11,32),u.Oc(12,Ai,3,5,"mat-header-cell",33),u.Oc(13,Ui,2,3,"mat-cell",34),u.Tb(),u.Ub(14,35),u.Oc(15,zi,3,3,"mat-header-cell",36),u.Oc(16,$i,2,1,"mat-cell",37),u.Tb(),u.Ub(17,38),u.Oc(18,Ni,3,5,"mat-header-cell",33),u.Oc(19,Hi,2,3,"mat-cell",34),u.Tb(),u.Ub(20,39),u.Oc(21,Bi,1,0,"mat-header-cell",40),u.Oc(22,Xi,4,3,"mat-cell",41),u.Tb(),u.Oc(23,Gi,1,0,"mat-header-row",42),u.Oc(24,qi,2,4,"mat-row",43),u.Vb(),u.Wb(25,"div",44),u.Qc(26),u.ic(27,"translate"),u.Vb(),u.Vb()),2&t){var a=u.hc();u.Db(4),u.pc("placeholder",u.jc(5,10,"lang.filterBy")),u.oc("formControl",a.adminService.getFilterField()),u.Db(3),u.oc("length",100)("hidePageSize",!0)("pageSize",10),u.Db(2),u.oc("dataSource",a.adminService.getDataSource()),u.Db(14),u.oc("matHeaderRowDef",a.displayedColumns),u.Db(1),u.oc("matRowDefColumns",a.displayedColumns),u.Db(2),u.Tc(" ",a.baskets.length," ",u.jc(27,12,"lang.baskets"),"")}}function Ji(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-list-item",50),u.dc("onDropSuccess",(function(){u.Dc(a);var t=e.$implicit;return u.hc().updateBasketOrder(t)})),u.ic(1,"translate"),u.Rb(2,"mat-icon",51),u.Wb(3,"p",19),u.Qc(4),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit,i=e.index;u.pc("title",u.jc(1,4,"lang.move")),u.oc("sortableIndex",i),u.Db(4),u.Tc("",i+1," - ",n.basket_name,"")}}var Yi,Zi=function(){return["boxers-zone"]},to=((Yi=function(){function t(e,a,n,i,o,r,c,l){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.headerService=i,this.appService=o,this.functions=r,this.adminService=c,this.viewContainerRef=l,this.loading=!1,this.baskets=[],this.basketsOrder=[],this.displayedColumns=["basket_id","basket_name","basket_desc","actions"],this.filterColumns=["basket_id","basket_name","basket_desc"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.baskets")),this.loading=!0,this.getSortedBasket(),this.http.get("../rest/baskets").subscribe((function(e){t.baskets=e.baskets,t.loading=!1,setTimeout((function(){t.adminService.setDataSource("admin_baskets",t.baskets,t.sort,t.paginator,t.filterColumns)}),0)}),(function(e){t.notify.handleErrors(e)}))}},{key:"getSortedBasket",value:function(){var t=this;this.http.get("../rest/sortedBaskets").pipe(Object(d.a)((function(e){t.basketsOrder=e.baskets})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"delete",value:function(t){var e=this;confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+t.basket_name+" \xbb")&&this.http.delete("../rest/baskets/"+t.basket_id).subscribe((function(t){e.notify.success(e.translate.instant("lang.basketDeleted")),e.baskets=t.baskets,e.adminService.setDataSource("admin_baskets",e.baskets,e.sort,e.paginator,e.filterColumns),e.getSortedBasket()}),(function(t){e.notify.error(t.error.errors)}))}},{key:"updateBasketOrder",value:function(t){var e=this;this.http.put("../rest/sortedBaskets/"+t.basket_id,this.basketsOrder).subscribe((function(t){e.baskets=t.baskets,e.notify.success(e.translate.instant("lang.modificationSaved"))}),(function(t){e.notify.error(t.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||Yi)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a),u.Qb(D.a),u.Qb(jt),u.Qb(u.T))},Yi.\u0275cmp=u.Kb({type:Yi,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(Qi,!0),u.Kc(Fi,!0),u.Xc(H.a,!0),u.Xc(B.a,!0)),2&t&&(u.yc(a=u.ec())&&(e.sidenavRight=a.first),u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.paginator=a.first),u.yc(a=u.ec())&&(e.sort=a.first))},decls:23,vars:18,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",3,"mode","fixedInViewport","opened"],["snav2",""],[2,"font-size","15px","padding","10px"],["dnd-sortable-container","",3,"dropZones","sortableData"],["disableRipple","true","dnd-sortable","",3,"title","sortableIndex","onDropSuccess",4,"ngFor","ngForOf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/baskets/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],["mat-list-item","",3,"click"],["color","primary","mat-list-icon","",1,"fa","fa-list-ol"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSortDisableClear","","matSort","",3,"dataSource"],["table",""],["matColumnDef","basket_id"],["mat-sort-header","",3,"hide-for-mobile",4,"matHeaderCellDef"],[3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","basket_name"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","basket_desc"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header",""],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"],["disableRipple","true","dnd-sortable","",3,"title","sortableIndex","onDropSuccess"],["color","primary","mat-list-icon","",1,"fa","fa-inbox"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,Li,14,9,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,Ei,2,0,"div",9),u.Oc(14,Ki,28,14,"mat-card",10),u.Vb(),u.Vb(),u.Vb(),u.Wb(15,"mat-sidenav",11,12),u.Wb(17,"p",13),u.Qc(18),u.ic(19,"translate"),u.Vb(),u.Wb(20,"mat-list"),u.Wb(21,"span",14),u.Oc(22,Ji,5,6,"mat-list-item",15),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading),u.Db(1),u.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",(e.appService.getViewMode(),!1)),u.Db(3),u.Sc(" ",u.jc(19,15,"lang.basketHelpDesc")," "),u.Db(3),u.oc("dropZones",u.uc(17,Zi))("sortableData",e.basketsOrder),u.Db(1),u.oc("ngForOf",e.basketsOrder))},directives:[C.e,C.f,x.a,W.a,O.t,C.d,Rt.a,Ne.f,O.s,Rt.h,Rt.g,Rt.d,o.f,Tt.a,Rt.c,j.l,w.c,I.a,S.c,k.b,c.d,c.u,c.j,H.a,q.o,B.a,q.c,q.i,q.b,q.k,q.n,q.h,B.b,q.a,R.b,Qt.b,q.j,q.m,o.d,Ne.e],pipes:[p.d],encapsulation:2}),Yi),eo=a("A5z7"),ao=a("/1cH"),no=a("TU8p");function io(t,e){if(1&t&&(u.Wb(0,"mat-option",31),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a.value),u.Db(1),u.Sc(" ",u.jc(2,2,"lang."+a.id)," ")}}function oo(t,e){if(1&t&&(u.Wb(0,"mat-option",31),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a.id),u.Db(1),u.Sc(" ",a.label," ")}}function ro(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",32),u.Wb(1,"div",33),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"mat-form-field",0),u.Wb(5,"mat-label"),u.Qc(6),u.ic(7,"translate"),u.Vb(),u.Wb(8,"mat-select",34),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().selectedProcessTool.defaultTab=t})),u.Oc(9,oo,2,2,"mat-option",2),u.ic(10,"sortBy"),u.Vb(),u.Vb(),u.Wb(11,"div",35),u.Wb(12,"mat-slide-toggle",36),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().selectedProcessTool.canUpdateData=t}))("change",(function(t){return u.Dc(a),u.hc().toggleCanUpdate(t.checked)})),u.Qc(13),u.ic(14,"translate"),u.Vb(),u.Vb(),u.Wb(15,"div",35),u.Wb(16,"mat-slide-toggle",37),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().selectedProcessTool.canUpdateModel=t})),u.Qc(17),u.ic(18,"translate"),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc();u.Db(2),u.Sc(" ",u.jc(3,9,"lang.options")," "),u.Db(4),u.Rc(u.jc(7,11,"lang.tabProcessPosition")),u.Db(2),u.oc("ngModel",n.selectedProcessTool.defaultTab),u.Db(1),u.oc("ngForOf",u.kc(10,13,n.processTool,"label")),u.Db(3),u.oc("ngModel",n.selectedProcessTool.canUpdateData),u.Db(1),u.Rc(u.jc(14,16,"lang.canUpdateData")),u.Db(3),u.oc("ngModel",n.selectedProcessTool.canUpdateModel)("disabled",!n.selectedProcessTool.canUpdateData),u.Db(1),u.Sc("",u.jc(18,18,"lang.canUpdateIndexingModel")," ")}}function co(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",32),u.Wb(1,"div",33),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"div",35),u.Wb(5,"mat-slide-toggle",38),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().selectedProcessTool.canUpdateDocuments=t})),u.Qc(6),u.ic(7,"translate"),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc();u.Db(2),u.Sc(" ",u.jc(3,3,"lang.options")," "),u.Db(3),u.oc("ngModel",n.selectedProcessTool.canUpdateDocuments),u.Db(1),u.Sc(" ",u.jc(7,5,"lang.canUpdateResourcesInSignatureBook"),"")}}function lo(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",39),u.dc("click",(function(){return u.Dc(a),u.hc().toggleData()})),u.ic(1,"translate"),u.Rb(2,"mat-icon",40),u.Vb()}2&t&&u.pc("title",u.jc(1,1,"lang.preview"))}function so(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",39),u.dc("click",(function(){return u.Dc(a),u.hc().toggleData()})),u.ic(1,"translate"),u.Rb(2,"mat-icon",41),u.Vb()}2&t&&u.pc("title",u.jc(1,1,"lang.edition"))}function bo(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",42),u.dc("click",(function(){u.Dc(a);var t=e.$implicit;return u.hc().selectedTemplateDisplayedSecondaryData=t})),u.Qc(1),u.Vb()}if(2&t){var n=e.$implicit;u.Db(1),u.Sc("",n," colonne(s)")}}function uo(t,e){if(1&t&&(u.Wb(0,"mat-option",43),u.Wb(1,"span",44),u.Wb(2,"span",45),u.Rb(3,"i",46),u.Vb(),u.Wb(4,"span",47),u.Qc(5),u.Vb(),u.Vb(),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a),u.Db(3),u.Gb("fa ",a.icon," fa-2x"),u.Db(2),u.Sc(" ",a.label," ")}}function po(t,e){if(1&t&&(u.Wb(0,"button",61),u.Rb(1,"mat-icon",62),u.Vb()),2&t){u.hc();var a=u.zc(3);u.oc("matMenuTriggerFor",a)}}function fo(t,e){if(1&t){var a=u.Xb();u.Wb(0,"span",51),u.Oc(1,po,2,1,"button",52),u.Wb(2,"mat-menu",null,8),u.Wb(4,"button",42),u.dc("click",(function(){u.Dc(a);var t=u.hc(),e=t.$implicit,n=t.index;return u.hc(2).removeData(e,n)})),u.Rb(5,"mat-icon",53),u.Wb(6,"span"),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Rb(9,"mat-divider"),u.Wb(10,"button",42),u.dc("click",(function(){u.Dc(a);var t=u.hc().$implicit;return u.hc(2).setStyle(t,"boldFontData")})),u.Rb(11,"mat-icon",54),u.Wb(12,"span"),u.Qc(13),u.ic(14,"translate"),u.Vb(),u.Vb(),u.Wb(15,"button",42),u.dc("click",(function(){u.Dc(a);var t=u.hc().$implicit;return u.hc(2).setStyle(t,"align_leftData")})),u.Rb(16,"mat-icon",55),u.Wb(17,"span"),u.Qc(18),u.ic(19,"translate"),u.Vb(),u.Vb(),u.Wb(20,"button",42),u.dc("click",(function(){u.Dc(a);var t=u.hc().$implicit;return u.hc(2).setStyle(t,"align_centerData")})),u.Rb(21,"mat-icon",56),u.Wb(22,"span"),u.Qc(23),u.ic(24,"translate"),u.Vb(),u.Vb(),u.Wb(25,"button",42),u.dc("click",(function(){u.Dc(a);var t=u.hc().$implicit;return u.hc(2).setStyle(t,"align_rightData")})),u.Rb(26,"mat-icon",57),u.Wb(27,"span"),u.Qc(28),u.ic(29,"translate"),u.Vb(),u.Vb(),u.Wb(30,"button",42),u.dc("click",(function(){u.Dc(a);var t=u.hc().$implicit;return u.hc(2).setStyle(t,"bigFontData")})),u.Rb(31,"mat-icon",58),u.Wb(32,"span"),u.Qc(33),u.ic(34,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(35,"span",59),u.Rb(36,"i"),u.Qc(37,"\xa0 "),u.Rb(38,"span",60),u.Vb(),u.Vb()}if(2&t){var n=u.hc().$implicit,i=u.hc(2);u.Db(1),u.oc("ngIf","label"==i.displayMode),u.Db(6),u.Rc(u.jc(8,23,"lang.delete")),u.Db(3),u.Ib("isSelectedMenu",n.cssClasses.indexOf("boldFontData")>-1),u.Db(3),u.Rc(u.jc(14,25,"lang.fontBold")),u.Db(2),u.Ib("isSelectedMenu",n.cssClasses.indexOf("align_leftData")>-1),u.Db(3),u.Rc(u.jc(19,27,"lang.alignLeft")),u.Db(2),u.Ib("isSelectedMenu",n.cssClasses.indexOf("align_centerData")>-1),u.Db(3),u.Rc(u.jc(24,29,"lang.alignCenter")),u.Db(2),u.Ib("isSelectedMenu",n.cssClasses.indexOf("align_rightData")>-1),u.Db(3),u.Rc(u.jc(29,31,"lang.alignRight")),u.Db(2),u.Ib("isSelectedMenu",n.cssClasses.indexOf("bigFontData")>-1),u.Db(3),u.Rc(u.jc(34,33,"lang.fontBig")),u.Db(2),u.Fb(n.cssClasses.join(" ")),u.Db(1),u.Gb("fa ",n.icon,""),u.Db(2),u.oc("innerHTML",n[i.displayMode],u.Ec)}}function mo(t,e){if(1&t&&(u.Ub(0),u.Oc(1,fo,39,35,"span",50),u.Tb()),2&t){var a=e.$implicit;u.Db(1),u.oc("ngIf","getFolders"!=a.value)}}function go(t,e){if(1&t){var a=u.Xb();u.Ub(0),u.Wb(1,"mat-toolbar",48),u.dc("cdkDropListDropped",(function(t){return u.Dc(a),u.hc().drop(t)})),u.Oc(2,mo,2,1,"ng-container",49),u.Vb(),u.Tb()}if(2&t){var n=u.hc();u.Db(1),u.Gb("secondaryInformations example-list column-",n.selectedTemplateDisplayedSecondaryData,"-list"),u.oc("cdkDropListData",n.displayedSecondaryData),u.Db(1),u.oc("ngForOf",n.displayedSecondaryData)}}function ho(t,e){1&t&&u.Rb(0,"mat-icon",67)}function vo(t,e){1&t&&u.Rb(0,"mat-icon",68)}function yo(t,e){if(1&t&&(u.Wb(0,"span"),u.Oc(1,ho,1,0,"mat-icon",64),u.Oc(2,vo,1,0,"mat-icon",65),u.Rb(3,"br"),u.Wb(4,"span",66),u.Qc(5),u.Vb(),u.Vb()),2&t){var a=u.hc().$implicit,n=u.hc();u.Db(1),u.oc("ngIf","label"==n.displayMode),u.Db(1),u.oc("ngIf","sample"==n.displayMode),u.Db(3),u.Rc(a[n.displayMode])}}function Do(t,e){if(1&t&&(u.Wb(0,"span"),u.Qc(1),u.Vb()),2&t){var a=u.hc().$implicit,n=u.hc();u.Db(1),u.Sc(" ",a[n.displayMode]," ")}}function Vo(t,e){if(1&t&&(u.Wb(0,"span",63),u.Oc(1,yo,6,3,"span",17),u.Oc(2,Do,2,1,"span",17),u.Vb()),2&t){var a=e.index;u.Fb(e.$implicit.cssClasses.join(" ")),u.Db(1),u.oc("ngIf",0==a),u.Db(1),u.oc("ngIf",1==a)}}function Co(t,e){if(1&t&&(u.Wb(0,"button",61),u.Rb(1,"mat-icon",62),u.Vb()),2&t){u.hc();var a=u.zc(3);u.oc("matMenuTriggerFor",a)}}function xo(t,e){if(1&t){var a=u.Xb();u.Ub(0),u.Oc(1,Co,2,1,"button",52),u.Wb(2,"mat-menu",null,8),u.Wb(4,"button",42),u.dc("click",(function(){u.Dc(a);var t=u.hc(),e=t.$implicit,n=t.index;return u.hc().removeData(e,n)})),u.Rb(5,"mat-icon",53),u.Wb(6,"span"),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(9,"span",70),u.Rb(10,"i",71),u.Qc(11),u.Vb(),u.Tb()}if(2&t){var n=u.hc().$implicit,i=u.hc();u.Db(1),u.oc("ngIf","label"==i.displayMode),u.Db(6),u.Rc(u.jc(8,3,"lang.delete")),u.Db(4),u.Sc(" ",n[i.displayMode],"")}}function Mo(t,e){if(1&t&&(u.Wb(0,"div",69),u.Oc(1,xo,12,5,"ng-container",17),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.oc("ngIf","getFolders"==a.value)}}var Wo,Oo=((Wo=function(){function t(e,a,n){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.loading=!1,this.displayedMainData=[{value:"chronoNumberShort",label:this.translate.instant("lang.chronoNumberShort"),sample:"MAARCH/2019A/1",cssClasses:["align_centerData","normalData"],icon:""},{value:"object",label:this.translate.instant("lang.object"),sample:this.translate.instant("lang.objectSample"),cssClasses:["longData"],icon:""}],this.availableData=[{value:"getPriority",label:this.translate.instant("lang.getPriority"),sample:this.translate.instant("lang.getPrioritySample"),cssClasses:["align_leftData"],icon:"fa-traffic-light"},{value:"getCategory",label:this.translate.instant("lang.getCategory"),sample:this.translate.instant("lang.incoming"),cssClasses:["align_leftData"],icon:"fa-exchange-alt"},{value:"getDoctype",label:this.translate.instant("lang.getDoctype"),sample:this.translate.instant("lang.getDoctypeSample"),cssClasses:["align_leftData"],icon:"fa-suitcase"},{value:"getAssignee",label:this.translate.instant("lang.getAssignee"),sample:this.translate.instant("lang.getAssigneeSample"),cssClasses:["align_leftData"],icon:"fa-sitemap"},{value:"getRecipients",label:this.translate.instant("lang.getRecipients"),sample:"Patricia PETIT",cssClasses:["align_leftData"],icon:"fa-user"},{value:"getSenders",label:this.translate.instant("lang.getSenders"),sample:"Alain DUBOIS (MAARCH)",cssClasses:["align_leftData"],icon:"fa-book"},{value:"getCreationAndProcessLimitDates",label:this.translate.instant("lang.getCreationAndProcessLimitDates"),sample:this.translate.instant("lang.getCreationAndProcessLimitDatesSample"),cssClasses:["align_leftData"],icon:"fa-calendar"},{value:"getVisaWorkflow",label:this.translate.instant("lang.getVisaWorkflow"),sample:'<i color="accent" class="fa fa-check"></i> Barbara BAIN -> <i class="fa fa-hourglass-half"></i> <b>Bruno BOULE</b> -> <i class="fa fa-hourglass-half"></i> Patricia PETIT',cssClasses:["align_leftData"],icon:"fa-list-ol"},{value:"getSignatories",label:this.translate.instant("lang.getSignatories"),sample:"Denis DAULL, Patricia PETIT",cssClasses:["align_leftData"],icon:"fa-certificate"},{value:"getModificationDate",label:this.translate.instant("lang.getModificationDate"),sample:"01-01-2019",cssClasses:["align_leftData"],icon:"fa-calendar-check"},{value:"getOpinionLimitDate",label:this.translate.instant("lang.getOpinionLimitDate"),sample:"01-01-2019",cssClasses:["align_leftData"],icon:"fa-stopwatch"},{value:"getParallelOpinionsNumber",label:this.translate.instant("lang.getParallelOpinionsNumber"),sample:this.translate.instant("lang.getParallelOpinionsNumberSample"),cssClasses:["align_leftData"],icon:"fa-comment-alt"},{value:"getFolders",label:this.translate.instant("lang.getFolders"),sample:this.translate.instant("lang.getFoldersSample"),cssClasses:["align_leftData"],icon:"fa-folder"},{value:"getResId",label:this.translate.instant("lang.getResId"),sample:this.translate.instant("lang.getResIdSample"),cssClasses:["align_leftData"],icon:"fa-envelope"},{value:"getBarcode",label:this.translate.instant("lang.getBarcode"),sample:this.translate.instant("lang.getBarcodeSample"),cssClasses:["align_leftData"],icon:"fa-barcode"},{value:"getRegisteredMailRecipient",label:this.translate.instant("lang.registeredMailRecipient"),sample:this.translate.instant("lang.registeredMailRecipientSample"),cssClasses:["align_leftData"],icon:"fa-user"},{value:"getRegisteredMailReference",label:this.translate.instant("lang.registeredMailReference"),sample:this.translate.instant("lang.registeredMailReferenceSample"),cssClasses:["align_leftData"],icon:"fa-hashtag"},{value:"getRegisteredMailIssuingSite",label:this.translate.instant("lang.issuingSite"),sample:this.translate.instant("lang.issuingSiteSample"),cssClasses:["align_leftData"],icon:"fas fa-warehouse"}],this.availableDataClone=[],this.displayedSecondaryData=[],this.displayedSecondaryDataClone=[],this.displayMode="label",this.dataControl=new c.i,this.listEvent=[{id:"detailDoc",value:"documentDetails"},{id:"eventVisaMail",value:"signatureBookAction"},{id:"eventProcessDoc",value:"processDocument"},{id:"eventViewDoc",value:"viewDoc"}],this.templateDisplayedSecondaryData=[1,2,3,4,5,6,7],this.selectedTemplateDisplayedSecondaryData=7,this.selectedTemplateDisplayedSecondaryDataClone=7,this.selectedListEvent=null,this.selectedListEventClone=null,this.processTool=[{id:"dashboard",icon:"fas fa-columns",label:this.translate.instant("lang.newsFeed")},{id:"history",icon:"fas fa-history",label:this.translate.instant("lang.history")},{id:"notes",icon:"fas fa-pen-square",label:this.translate.instant("lang.notesAlt")},{id:"attachments",icon:"fas fa-paperclip",label:this.translate.instant("lang.attachments")},{id:"linkedResources",icon:"fas fa-link",label:this.translate.instant("lang.links")},{id:"diffusionList",icon:"fas fa-share-alt",label:this.translate.instant("lang.diffusionList")},{id:"emails",icon:"fas fa-envelope",label:this.translate.instant("lang.mailsSentAlt")},{id:"visaCircuit",icon:"fas fa-list-ol",label:this.translate.instant("lang.visaWorkflow")},{id:"opinionCircuit",icon:"fas fa-comment-alt",label:this.translate.instant("lang.avis")},{id:"info",icon:"fas fa-info-circle",label:this.translate.instant("lang.informations")}],this.selectedProcessTool={defaultTab:null,canUpdateData:!1,canUpdateModel:!1,canUpdateDocuments:!1},this.selectedProcessToolClone=null,this.refreshBasketGroup=new u.o}return _createClass(t,[{key:"ngOnInit",value:function(){return Object(yt.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initCustomFields();case 2:this.filteredDataOptions=this.dataControl.valueChanges.pipe(Object(l.a)(""),Object(s.a)((function(t){return a._filterData(t)}))),this.availableDataClone=JSON.parse(JSON.stringify(this.availableData)),this.displayedSecondaryData=[],e=0,this.selectedTemplateDisplayedSecondaryData=this.basketGroup.list_display.templateColumns,this.selectedTemplateDisplayedSecondaryDataClone=this.selectedTemplateDisplayedSecondaryData,this.basketGroup.list_display.subInfos.forEach((function(t){e=a.availableData.map((function(t){return t.value})).indexOf(t.value),a.availableData[e].cssClasses=t.cssClasses,a.displayedSecondaryData.push(a.availableData[e]),a.availableData.splice(e,1)})),this.selectedListEvent=this.basketGroup.list_event,this.selectedListEventClone=this.selectedListEvent,"processDocument"===this.basketGroup.list_event?(this.selectedProcessTool.defaultTab=null===this.basketGroup.list_event_data?"dashboard":this.basketGroup.list_event_data.defaultTab,this.selectedProcessTool.canUpdateData=null!==this.basketGroup.list_event_data&&this.basketGroup.list_event_data.canUpdateData,this.selectedProcessTool.canUpdateModel=null!==this.basketGroup.list_event_data&&this.basketGroup.list_event_data.canUpdateModel):"signatureBookAction"===this.basketGroup.list_event&&(this.selectedProcessTool.canUpdateDocuments=null!==this.basketGroup.list_event_data&&this.basketGroup.list_event_data.canUpdateDocuments),this.selectedProcessToolClone=JSON.parse(JSON.stringify(this.selectedProcessTool)),this.displayedSecondaryDataClone=JSON.parse(JSON.stringify(this.displayedSecondaryData));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"initCustomFields",value:function(){var t=this;return new Promise((function(e,a){t.http.get("../rest/customFields").pipe(Object(s.a)((function(e){return e.customFields=e.customFields.map((function(e){return{value:"indexingCustomField_"+e.id,label:e.label,sample:t.translate.instant("lang.customField")+e.id,cssClasses:["align_leftData"],icon:"fa-hashtag"}})),e.customFields})),Object(d.a)((function(a){console.log(a),t.availableData=t.availableData.concat(a),e(!0)})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(X.of)(!1)}))).subscribe()}))}},{key:"toggleData",value:function(){this.dataControl.disabled?this.dataControl.enable():this.dataControl.disable(),this.displayMode="label"===this.displayMode?"sample":"label"}},{key:"setStyle",value:function(t,e){var a=e.split("_");2===a.length&&t.cssClasses.forEach((function(n,i){n.includes(a[0])&&n!==e&&t.cssClasses.splice(i,1)}));var n=t.cssClasses.indexOf(e);-1===n?t.cssClasses.push(e):t.cssClasses.splice(n,1)}},{key:"addData",value:function(t){var e=this.availableData.map((function(t){return t.value})).indexOf(t.option.value.value);this.displayedSecondaryData.push(t.option.value),this.availableData.splice(e,1),$("#availableData").blur(),this.dataControl.setValue("")}},{key:"removeData",value:function(t,e){this.availableData.push(t),this.displayedSecondaryData.splice(e,1),this.dataControl.setValue("")}},{key:"removeAllData",value:function(){this.availableData=this.availableData.concat(this.displayedSecondaryData),this.displayedSecondaryData=[],this.dataControl.setValue("")}},{key:"drop",value:function(t){t.previousContainer===t.container&&Object(Pn.h)(t.container.data,t.previousIndex,t.currentIndex)}},{key:"saveTemplate",value:function(){var t,e=this,a=[];this.displayedSecondaryData.forEach((function(t){a.push({value:t.value,cssClasses:t.cssClasses,icon:t.icon})})),t={templateColumns:this.selectedTemplateDisplayedSecondaryData,subInfos:a},this.http.put("../rest/baskets/"+this.basketGroup.basket_id+"/groups/"+this.basketGroup.group_id,{list_display:t,list_event:this.selectedListEvent,list_event_data:this.selectedProcessTool}).subscribe((function(){e.displayedSecondaryDataClone=JSON.parse(JSON.stringify(e.displayedSecondaryData)),e.basketGroup.list_display=a,e.basketGroup.list_event=e.selectedListEvent,e.selectedListEventClone=e.selectedListEvent,e.basketGroup.list_event_data=e.selectedProcessTool,e.selectedProcessToolClone=JSON.parse(JSON.stringify(e.selectedProcessTool)),e.selectedTemplateDisplayedSecondaryDataClone=JSON.parse(JSON.stringify(e.selectedTemplateDisplayedSecondaryData)),e.notify.success(e.translate.instant("lang.modificationsProcessed")),e.refreshBasketGroup.emit(e.basketGroup)}),(function(t){e.notify.error(t.error.errors)}))}},{key:"_filterData",value:function(t){var e="";return"string"==typeof t?e=t.toLowerCase():null!==t&&(e=t.label.toLowerCase()),this.availableData.filter((function(t){return t.label.toLowerCase().includes(e)}))}},{key:"checkModif",value:function(){return JSON.stringify(this.displayedSecondaryData)===JSON.stringify(this.displayedSecondaryDataClone)&&this.selectedListEvent===this.selectedListEventClone&&JSON.stringify(this.selectedProcessTool)===JSON.stringify(this.selectedProcessToolClone)&&JSON.stringify(this.selectedTemplateDisplayedSecondaryData)===JSON.stringify(this.selectedTemplateDisplayedSecondaryDataClone)}},{key:"cancelModification",value:function(){var t=this;this.displayedSecondaryData=JSON.parse(JSON.stringify(this.displayedSecondaryDataClone)),this.selectedListEvent=this.selectedListEventClone,this.selectedProcessTool=JSON.parse(JSON.stringify(this.selectedProcessToolClone)),this.availableData=JSON.parse(JSON.stringify(this.availableDataClone)),this.selectedTemplateDisplayedSecondaryData=JSON.parse(JSON.stringify(this.selectedTemplateDisplayedSecondaryDataClone));var e=0;this.displayedSecondaryData.forEach((function(a){e=t.availableData.map((function(t){return t.value})).indexOf(a.value),t.availableData.splice(e,1)})),this.dataControl.setValue("")}},{key:"hasFolder",value:function(){return this.displayedSecondaryData.map((function(t){return t.value})).indexOf("getFolders")>-1}},{key:"changeEventList",value:function(t){this.selectedProcessTool="processDocument"===t.value?{defaultTab:"dashboard"}:{}}},{key:"toggleCanUpdate",value:function(t){t||(this.selectedProcessTool.canUpdateModel=t)}}]),t}()).\u0275fac=function(t){return new(t||Wo)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a))},Wo.\u0275cmp=u.Kb({type:Wo,selectors:[["list-administration"]],inputs:{basketGroup:["currentBasketGroup","basketGroup"]},outputs:{refreshBasketGroup:"refreshBasketGroup"},decls:59,vars:56,consts:[["appearance","outline",1,"eventList"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["class","formType ratio-2 col-sm-12",4,"ngIf"],[1,"editorTool"],["color","primary","mat-icon-button","",3,"title","click",4,"ngIf"],["color","primary","mat-button","",3,"title","matMenuTriggerFor"],[1,"fas","fa-columns"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"area"],["appearance","outline","floatLabel","never"],["id","availableData","name","availableData","type","text","matInput","",3,"formControl","placeholder","matAutocomplete"],[3,"optionSelected"],["auto","matAutocomplete"],["class","dataList",3,"value",4,"ngFor","ngForOf"],["color","warn","mat-button","",2,"float","right",3,"disabled","click"],[4,"ngIf"],[1,"resultRow","newRow"],["class","resultCol",3,"class",4,"ngFor","ngForOf"],["multiple","",1,"actions"],["color","primary","mat-icon-button","",3,"title","disabled"],["fontSet","fas","matBadge","2","fontIcon","fa-comments fa-2x",3,"matBadgeHidden"],["fontSet","fas","matBadge","7","fontIcon","fa-paperclip fa-2x",3,"matBadgeHidden"],["fontSet","fas","fontIcon","fa-sitemap fa-2x"],["fontSet","fas","fontIcon","fa-info-circle fa-2x"],["class","folder-info",4,"ngFor","ngForOf"],[1,"row"],[1,"col-md-12","text-center",2,"margin-top","30px"],["color","primary","mat-raised-button","",3,"disabled","click"],["color","default","mat-raised-button","",3,"disabled","click"],[3,"value"],[1,"formType","ratio-2","col-sm-12"],[1,"formType-title"],[3,"ngModel","ngModelChange"],[2,"padding","10px"],["color","primary",3,"ngModel","ngModelChange","change"],["color","primary",3,"ngModel","disabled","ngModelChange"],["color","primary",3,"ngModel","ngModelChange"],["color","primary","mat-icon-button","",3,"title","click"],["fontSet","fas","fontIcon","fa-eye"],["fontSet","fas","fontIcon","fa-edit"],["mat-menu-item","",3,"click"],[1,"dataList",3,"value"],[1,"optionContent"],[1,"dataIcon"],["color","primary"],[1,"dataLabel"],["cdkDropListOrientation","horizontal","cdkDropList","",3,"cdkDropListData","cdkDropListDropped"],[4,"ngFor","ngForOf"],["class","example-box","cdkDrag","",4,"ngIf"],["cdkDrag","",1,"example-box"],["color","primary","mat-icon-button","",3,"matMenuTriggerFor",4,"ngIf"],["color","warn","fontSet","fas","fontIcon","fa-trash fa-2x",1,"secondaryInformations_icon"],["fontSet","fas","fontIcon","fa-bold fa-2x",1,"secondaryInformations_icon"],["fontSet","fas","fontIcon","fa-align-left fa-2x",1,"secondaryInformations_icon"],["fontSet","fas","fontIcon","fa-align-center fa-2x",1,"secondaryInformations_icon"],["fontSet","fas","fontIcon","fa-align-right fa-2x",1,"secondaryInformations_icon"],["fontSet","fas","fontIcon","fa-text-height fa-2x",1,"secondaryInformations_icon"],[2,"width","100%"],[1,"secondaryInformations_label",3,"innerHTML"],["color","primary","mat-icon-button","",3,"matMenuTriggerFor"],["fontSet","fas","fontIcon","fa-ellipsis-v fa-2x"],[1,"resultCol"],["color","primary","class","fm fm-letter fm-2x",4,"ngIf"],["color","warn","class","fm fm-letter-status-inprogress fm-2x",4,"ngIf"],[1,"resultCol_chrono"],["color","primary",1,"fm","fm-letter","fm-2x"],["color","warn",1,"fm","fm-letter-status-inprogress","fm-2x"],[1,"folder-info"],[1,"badge","badge-folder"],[1,"fa","fa-folder"]],template:function(t,e){if(1&t&&(u.Wb(0,"mat-form-field",0),u.Wb(1,"mat-label"),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"mat-select",1),u.dc("ngModelChange",(function(t){return e.selectedListEvent=t}))("selectionChange",(function(t){return e.changeEventList(t)})),u.Oc(5,io,3,4,"mat-option",2),u.Vb(),u.Vb(),u.Oc(6,ro,19,20,"div",3),u.Oc(7,co,8,7,"div",3),u.Rb(8,"hr"),u.Wb(9,"mat-toolbar",4),u.Wb(10,"span"),u.Oc(11,lo,3,3,"button",5),u.Oc(12,so,3,3,"button",5),u.Wb(13,"button",6),u.ic(14,"translate"),u.Qc(15),u.Rb(16,"i",7),u.Vb(),u.Wb(17,"mat-menu",null,8),u.Oc(19,bo,2,1,"button",9),u.Vb(),u.Vb(),u.Wb(20,"span",10),u.Wb(21,"form"),u.Wb(22,"mat-form-field",11),u.Rb(23,"input",12),u.ic(24,"translate"),u.Wb(25,"mat-autocomplete",13,14),u.dc("optionSelected",(function(t){return e.addData(t)})),u.Oc(27,uo,6,5,"mat-option",15),u.ic(28,"async"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(29,"span"),u.Wb(30,"button",16),u.dc("click",(function(){return e.removeAllData()})),u.Qc(31),u.ic(32,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(33,"mat-card"),u.Oc(34,go,3,5,"ng-container",17),u.Wb(35,"div",18),u.Oc(36,Vo,3,4,"span",19),u.Wb(37,"mat-button-toggle-group",20),u.Wb(38,"button",21),u.ic(39,"translate"),u.Rb(40,"mat-icon",22),u.Vb(),u.Wb(41,"button",21),u.ic(42,"translate"),u.Rb(43,"mat-icon",23),u.Vb(),u.Wb(44,"button",21),u.ic(45,"translate"),u.Rb(46,"mat-icon",24),u.Vb(),u.Wb(47,"button",21),u.ic(48,"translate"),u.Rb(49,"mat-icon",25),u.Vb(),u.Vb(),u.Vb(),u.Oc(50,Mo,2,1,"div",26),u.Vb(),u.Wb(51,"div",27),u.Wb(52,"div",28),u.Wb(53,"button",29),u.dc("click",(function(){return e.saveTemplate()})),u.Qc(54),u.ic(55,"translate"),u.Vb(),u.Wb(56,"button",30),u.dc("click",(function(){return e.cancelModification()})),u.Qc(57),u.ic(58,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t){var a=u.zc(18),n=u.zc(26);u.Db(2),u.Rc(u.jc(3,34,"lang.eventList")),u.Db(2),u.oc("ngModel",e.selectedListEvent),u.Db(1),u.oc("ngForOf",e.listEvent),u.Db(1),u.oc("ngIf","processDocument"===e.selectedListEvent),u.Db(1),u.oc("ngIf","signatureBookAction"===e.selectedListEvent),u.Db(4),u.oc("ngIf","label"==e.displayMode),u.Db(1),u.oc("ngIf","sample"==e.displayMode),u.Db(1),u.oc("title",u.jc(14,36,"lang.templateUsed"))("matMenuTriggerFor",a),u.Db(2),u.Sc(" ",e.selectedTemplateDisplayedSecondaryData," "),u.Db(4),u.oc("ngForOf",e.templateDisplayedSecondaryData),u.Db(4),u.pc("placeholder",u.jc(24,38,"lang.availableDatas")),u.oc("formControl",e.dataControl)("matAutocomplete",n),u.Db(4),u.oc("ngForOf",u.jc(28,40,e.filteredDataOptions)),u.Db(3),u.oc("disabled","sample"==e.displayMode),u.Db(1),u.Sc(" ",u.jc(32,42,"lang.eraseAll")," "),u.Db(3),u.oc("ngIf",e.displayedSecondaryData.length>0&&"sample"==e.displayMode||"label"==e.displayMode),u.Db(2),u.oc("ngForOf",e.displayedMainData),u.Db(2),u.pc("title",u.jc(39,44,"lang.notes")),u.oc("disabled","label"==e.displayMode),u.Db(2),u.oc("matBadgeHidden","label"==e.displayMode),u.Db(1),u.pc("title",u.jc(42,46,"lang.attachments")),u.oc("disabled","label"==e.displayMode),u.Db(2),u.oc("matBadgeHidden","label"==e.displayMode),u.Db(1),u.pc("title",u.jc(45,48,"lang.diffusionList")),u.oc("disabled","label"==e.displayMode),u.Db(3),u.pc("title",u.jc(48,50,"lang.linkDetails")),u.oc("disabled","label"==e.displayMode),u.Db(3),u.oc("ngForOf",e.displayedSecondaryData),u.Db(3),u.oc("disabled",e.checkModif()),u.Db(1),u.Sc(" ",u.jc(55,52,"lang.validate")," "),u.Db(2),u.oc("disabled",e.checkModif()),u.Db(1),u.Sc(" ",u.jc(58,54,"lang.cancel")," ")}},directives:[S.c,S.g,it.a,c.u,c.x,O.s,O.t,et.a,R.b,$e.d,$e.e,c.K,c.v,c.w,k.b,c.d,ao.d,c.j,ao.a,I.a,Pt.b,Tt.a,no.a,j.p,at.a,$e.b,Pn.e,Pn.a,_.a],pipes:[p.d,O.b,T.a],styles:[".availableData[_ngcontent-%COMP%]{margin:10px;display:flex}.secondaryInformations[_ngcontent-%COMP%]{border:1px solid rgba(249,152,48,.4);font-size:10px;height:30px;color:#666}.secondaryInformations_icon[_ngcontent-%COMP%]{height:auto}.secondaryInformations_label[_ngcontent-%COMP%]{width:100%}.resultRow[_ngcontent-%COMP%]{align-items:center;display:flex;padding:5px}.resultRow-mobile[_ngcontent-%COMP%]{font-size:80%}.resultCol[_ngcontent-%COMP%]{flex:1;overflow:hidden;text-overflow:ellipsis}.resultCol-mobile[_ngcontent-%COMP%]{overflow:inherit;text-overflow:inherit;word-break:break-all}.resultCol_chrono[_ngcontent-%COMP%]{color:rgba(0,0,0,.4);font-size:90%}.actions[_ngcontent-%COMP%]{text-align:right;box-shadow:none;border:none;flex:1;justify-content:flex-end;overflow:inherit}.elemToDrag[_ngcontent-%COMP%]{flex:1;border:1px dashed;padding:10px;height:10px;line-height:0;cursor:move;margin-right:5px;margin-left:5px}.columns[_ngcontent-%COMP%]{width:100%;height:90px;padding:20px 10px;border-bottom:1px solid #ccc;color:rgba(0,0,0,.87);display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;background:#fff;font-size:14px}.mat-badge-content[_ngcontent-%COMP%]{background:#f99830}.example-list[_ngcontent-%COMP%]{display:grid;gap:10px;height:auto;max-width:100%;border-radius:4px;border:1px solid rgba(249,152,48,.4);font-size:10px;background:#f5f5f5}.example-box[_ngcontent-%COMP%]{color:#666;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;background:#f5f5f5;flex-grow:1;flex-basis:0;height:20px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.editorTool[_ngcontent-%COMP%]{display:flex;height:44px;font-size:10px;margin-bottom:30px}.editorTool[_ngcontent-%COMP%]   .area[_ngcontent-%COMP%]{flex:1}.editorTool[_ngcontent-%COMP%]   .area[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.editorTool[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{border-left:1px solid #666;height:70%;margin-left:10px;margin-right:10px}.editorTool[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{height:35px}.editorTool[_ngcontent-%COMP%]     .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{background:inherit}.editorTool[_ngcontent-%COMP%]     .mat-form-field-outline{background:#fff}.optionContent[_ngcontent-%COMP%]{display:flex!important}.optionContent[_ngcontent-%COMP%]   .dataIcon[_ngcontent-%COMP%]{width:30px}.optionContent[_ngcontent-%COMP%]   .dataIcon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.optionContent[_ngcontent-%COMP%]   .dataLabel[_ngcontent-%COMP%]{flex:1}.isSelectedMenu[_ngcontent-%COMP%]{background:rgba(249,152,48,.14)}.align_leftData[_ngcontent-%COMP%]{text-align:left}.align_centerData[_ngcontent-%COMP%]{text-align:center}.align_rightData[_ngcontent-%COMP%]{text-align:right}.boldFontData[_ngcontent-%COMP%]{font-weight:700}.bigFontData[_ngcontent-%COMP%]{font-size:14px}.smallFontData[_ngcontent-%COMP%]{font-size:10px}.normalData[_ngcontent-%COMP%]{flex:1}.longData[_ngcontent-%COMP%]{flex:3}.eventList[_ngcontent-%COMP%]{padding-top:10px}.badge-folder[_ngcontent-%COMP%]{cursor:default;background:#135f7f;margin:5px;font-size:8px;max-width:250px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.formType[_ngcontent-%COMP%]{align-items:center;margin-bottom:10px;border-radius:4px;border:1px solid #ccc;position:relative;padding:10px}.formType-title[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;max-width:85%;text-overflow:ellipsis;z-index:1;font-size:10px;font-weight:700;background:#fff;position:absolute;top:-7px;left:10px;padding:0;margin:0;color:#135f7f}"]}),Wo),_o=["snav2"],So=["adminMenuTemplate"],ko=function(t){return{opacity:t}};function wo(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-nav-list"),u.Wb(1,"h3",13),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"a",20),u.dc("click",(function(){return u.Dc(a),u.hc(2).linkGroup()})),u.Rb(5,"mat-icon",21),u.Wb(6,"p",22),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Rb(9,"mat-divider"),u.Wb(10,"a",23),u.ic(11,"translate"),u.Wb(12,"mat-icon",24),u.Wb(13,"mat-slide-toggle",25),u.dc("change",(function(){u.Dc(a);var t=u.hc(2);return t.toggleIsSearchBasket(t.basket),!1})),u.Vb(),u.Vb(),u.Wb(14,"p",26),u.dc("click",(function(){u.Dc(a);var t=u.hc(2);return t.toggleIsSearchBasket(t.basket),!1})),u.Qc(15),u.ic(16,"translate"),u.Vb(),u.Vb(),u.Wb(17,"a",23),u.ic(18,"translate"),u.Wb(19,"mat-icon",24),u.Wb(20,"mat-slide-toggle",25),u.dc("change",(function(){u.Dc(a);var t=u.hc(2);return t.toggleFlagNotif(t.basket),!1})),u.Vb(),u.Vb(),u.Wb(21,"p",26),u.dc("click",(function(){u.Dc(a);var t=u.hc(2);return t.toggleFlagNotif(t.basket),!1})),u.Qc(22),u.ic(23,"translate"),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.Db(2),u.Rc(u.jc(3,10,"lang.actions")),u.Db(5),u.Sc(" ",u.jc(8,12,"lang.linkGroup")," "),u.Db(3),u.pc("matTooltip",u.jc(11,14,"lang.isSearchBasketInfo")),u.Db(3),u.oc("checked",n.basket.isSearchBasket),u.Db(1),u.oc("ngStyle",u.vc(22,ko,n.basket.isSearchBasket?"":"0.3")),u.Db(1),u.Sc(" ",u.jc(16,16,"lang.isSearchBasket")," "),u.Db(2),u.pc("matTooltip",u.jc(18,18,"lang.basketNotification")),u.Db(3),u.oc("checked",n.basket.flagNotif),u.Db(1),u.oc("ngStyle",u.vc(24,ko,n.basket.flagNotif?"":"0.3")),u.Db(1),u.Sc(" ",u.jc(23,20,"lang.activateNotification")," ")}}function Io(t,e){if(1&t&&u.Oc(0,wo,24,26,"mat-nav-list",19),2&t){var a=u.hc();u.oc("ngIf",!a.creationMode)}}function jo(t,e){1&t&&(u.Wb(0,"div",27),u.Rb(1,"mat-spinner",28),u.Vb())}function Ro(t,e){if(1&t){var a=u.Xb();u.Wb(0,"input",49),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).basket.id=t}))("blur",(function(){return u.Dc(a),u.hc(2).isAvailable()})),u.ic(1,"translate"),u.Vb()}if(2&t){var n=u.hc(2);u.pc("placeholder",u.jc(1,2,"lang.id")),u.oc("ngModel",n.basket.id)}}function To(t,e){if(1&t){var a=u.Xb();u.Wb(0,"input",50),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).basket.id=t})),u.ic(1,"translate"),u.ic(2,"translate"),u.Vb()}if(2&t){var n=u.hc(2);u.pc("placeholder",u.jc(1,3,"lang.id")),u.pc("title",u.jc(2,5,"lang.id")),u.oc("ngModel",n.basket.id)}}function Po(t,e){if(1&t&&(u.Wb(0,"mat-option",58),u.Qc(1),u.Vb()),2&t){var a=e.$implicit,n=u.hc(3);u.oc("value",a),u.Db(1),u.Sc(" ",n.langVarName[n.orderColumns.indexOf(a)],"")}}function Qo(t,e){if(1&t&&(u.Wb(0,"mat-option",58),u.Qc(1),u.Vb()),2&t){var a=e.$implicit,n=u.hc(3);u.oc("value",a),u.Db(1),u.Sc(" ",n.langOrderName[n.orderByColumns.indexOf(a)],"")}}function Fo(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",59),u.dc("click",(function(){return u.Dc(a),u.hc(3).addLine()})),u.Rb(1,"mat-icon",60),u.Vb()}if(2&t){var n=u.hc(3);u.oc("disabled",2==n.orderColumnsSelected.length)}}function Lo(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",36),u.Wb(1,"div",51),u.Wb(2,"mat-form-field"),u.Wb(3,"mat-select",52),u.dc("ngModelChange",(function(t){u.Dc(a);var n=e.index;return u.hc(2).orderColumnsSelected[n].column=t})),u.ic(4,"translate"),u.Oc(5,Po,2,2,"mat-option",53),u.Vb(),u.Vb(),u.Vb(),u.Wb(6,"div",51),u.Wb(7,"mat-form-field"),u.Wb(8,"mat-select",52),u.dc("ngModelChange",(function(t){return u.Dc(a),e.$implicit.order=t})),u.ic(9,"translate"),u.Oc(10,Qo,2,2,"mat-option",53),u.Vb(),u.Vb(),u.Vb(),u.Wb(11,"div",54),u.Wb(12,"button",55),u.dc("click",(function(){u.Dc(a);var t=e.index;return u.hc(2).removeLine(t)})),u.Rb(13,"mat-icon",56),u.Vb(),u.Oc(14,Fo,2,1,"button",57),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit,i=e.index,o=u.hc(2);u.Db(3),u.rc("placeholder","",u.jc(4,11,"lang.defaultSort")," ",i+1,""),u.qc("name","basket_res_order",i,""),u.oc("ngModel",o.orderColumnsSelected[i].column),u.Db(2),u.oc("ngForOf",o.orderColumns),u.Db(3),u.pc("placeholder",u.jc(9,13,"lang.orderBy")),u.qc("name","order_by_select",i,""),u.oc("ngModel",n.order),u.Db(2),u.oc("ngForOf",o.orderByColumns),u.Db(2),u.oc("disabled",1==o.orderColumnsSelected.length),u.Db(2),u.oc("ngIf",o.orderColumnsSelected.length==i+1)}}function Eo(t,e){if(1&t){var a=u.Xb();u.Wb(0,"span"),u.Qc(1),u.Vb(),u.Wb(2,"mat-icon",62),u.dc("click",(function(){u.Dc(a);var t=u.hc().index;return u.hc(2).unlinkGroup(t)})),u.ic(3,"translate"),u.Vb()}if(2&t){var n=u.hc().$implicit;u.Db(1),u.Rc(n.group_desc),u.Db(1),u.pc("matTooltip",u.jc(3,2,"lang.unlinkGroup"))}}function Ao(t,e){1&t&&(u.Wb(0,"small"),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc("(",u.jc(2,1,"lang.default"),")"))}function Uo(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-icon",85),u.dc("click",(function(t){return u.Dc(a),t.stopPropagation()})),u.ic(1,"translate"),u.Vb()}2&t&&u.pc("matTooltip",u.jc(1,1,"lang.delete"))}var zo=function(t){return{"font-weight":t}};function $o(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-chip",81),u.dc("click",(function(){u.Dc(a);var t=u.hc().$implicit,e=u.hc(2).$implicit;return u.hc(2).openSettings(e,t)}))("removed",(function(){u.Dc(a);var t=u.hc().$implicit,e=u.hc(2).$implicit;return u.hc(2).unlinkAction(e,t)})),u.Qc(1," \xa0 "),u.Wb(2,"span"),u.Qc(3),u.Vb(),u.Qc(4,"\xa0 "),u.Oc(5,Ao,3,3,"small",19),u.Rb(6,"span",82),u.Wb(7,"button",83),u.dc("click",(function(t){u.Dc(a);var e=u.hc().$implicit,n=u.hc(2).$implicit,i=u.hc(2);return t.stopPropagation(),i.setDefaultAction(n,e)})),u.Qc(8),u.ic(9,"translate"),u.Vb(),u.Oc(10,Uo,2,3,"mat-icon",84),u.Vb()}if(2&t){var n=u.hc().$implicit;u.qc("matTooltip","id : ",n.id,""),u.oc("ngStyle",u.vc(9,zo,1==n.default_action_list?"bold":"")),u.Db(3),u.Rc(n.label_action),u.Db(2),u.oc("ngIf",1==n.default_action_list),u.Db(2),u.oc("disabled",n.default_action_list),u.Db(1),u.Rc(u.jc(9,7,"lang.setByDefault")),u.Db(2),u.oc("ngIf",1!=n.default_action_list)}}function No(t,e){if(1&t&&(u.Wb(0,"span",79),u.Oc(1,$o,11,11,"mat-chip",80),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.oc("ngIf",1==a.checked)}}function Ho(t,e){1&t&&u.Rb(0,"mat-header-cell")}function Bo(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-cell",86),u.Wb(1,"mat-checkbox",87),u.dc("change",(function(){u.Dc(a);var t=u.hc(2).$implicit;return u.hc(2).addAction(t)}))("ngModelChange",(function(t){return u.Dc(a),e.$implicit.checked=t})),u.Wb(2,"span"),u.Qc(3),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit;u.qc("matTooltip","id : ",n.id,""),u.Db(1),u.oc("disabled",1==n.default_action_list)("ngModel",n.checked),u.Db(2),u.Rc(n.label_action)}}function Xo(t,e){1&t&&u.Rb(0,"mat-header-cell")}function Go(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-cell",88),u.Wb(1,"button",89),u.Rb(2,"mat-icon",90),u.Vb(),u.Wb(3,"mat-menu",null,91),u.Wb(5,"button",92),u.dc("click",(function(){u.Dc(a);var t=e.$implicit,n=u.hc(2).$implicit;return u.hc(2).setDefaultAction(n,t)})),u.Rb(6,"mat-icon",93),u.Wb(7,"span"),u.Qc(8),u.ic(9,"translate"),u.Vb(),u.Vb(),u.Wb(10,"button",94),u.dc("click",(function(){u.Dc(a);var t=e.$implicit,n=u.hc(2).$implicit;return u.hc(2).openSettings(n,t)})),u.Rb(11,"mat-icon",95),u.Wb(12,"span"),u.Qc(13),u.ic(14,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit,i=u.zc(4);u.qc("matTooltip","id : ",n.id,""),u.Db(1),u.oc("matMenuTriggerFor",i)("disabled",!n.checked),u.Db(4),u.oc("disabled",1==n.default_action_list),u.Db(3),u.Rc(u.jc(9,6,"lang.defaultAction")),u.Db(5),u.Rc(u.jc(14,8,"lang.moreOptions"))}}function qo(t,e){1&t&&u.Rb(0,"mat-row")}function Ko(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-tab-group"),u.Wb(1,"mat-tab",31),u.ic(2,"translate"),u.Wb(3,"div",63),u.Wb(4,"h5"),u.Qc(5),u.ic(6,"translate"),u.Vb(),u.Wb(7,"mat-chip-list",64,65),u.Oc(9,No,2,1,"span",66),u.ic(10,"sortBy"),u.Vb(),u.Vb(),u.Wb(11,"div",63),u.Wb(12,"mat-accordion",67),u.Wb(13,"mat-expansion-panel",68),u.dc("opened",(function(){u.Dc(a);var t=u.hc().index;return u.hc(2).initAction(t)})),u.Wb(14,"mat-expansion-panel-header"),u.Wb(15,"mat-panel-title"),u.Qc(16),u.ic(17,"translate"),u.Vb(),u.Vb(),u.Wb(18,"div"),u.Wb(19,"mat-form-field"),u.Wb(20,"input",69),u.dc("keyup",(function(t){return u.Dc(a),u.hc(3).applyFilter(t.target.value)})),u.ic(21,"translate"),u.Vb(),u.Vb(),u.Wb(22,"mat-table",70,71),u.Ub(24,72),u.Oc(25,Ho,1,0,"mat-header-cell",73),u.Oc(26,Bo,4,4,"mat-cell",74),u.Tb(),u.Ub(27,75),u.Oc(28,Xo,1,0,"mat-header-cell",73),u.Oc(29,Go,15,10,"mat-cell",76),u.Tb(),u.Oc(30,qo,1,0,"mat-row",77),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(31,"mat-tab",31),u.ic(32,"translate"),u.Wb(33,"list-administration",78),u.dc("refreshBasketGroup",(function(t){u.Dc(a);var e=u.hc().$implicit;return u.hc(2).updateGroupInfo(e,t)})),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc().$implicit,i=u.hc(2);u.Db(1),u.pc("label",u.jc(2,9,"lang.actions")),u.Db(4),u.Rc(u.jc(6,11,"lang.actionChosen")),u.Db(4),u.oc("ngForOf",u.kc(10,13,n.groupActions,"label_action")),u.Db(7),u.Sc(" ",u.jc(17,16,"lang.actionAvailable")," "),u.Db(4),u.pc("placeholder",u.jc(21,18,"lang.filterBy")),u.Db(2),u.oc("dataSource",i.dataSource),u.Db(8),u.oc("matRowDefColumns",i.displayedColumns),u.Db(1),u.pc("label",u.jc(32,20,"lang.resultPage")),u.Db(2),u.oc("currentBasketGroup",n)}}function Jo(t,e){if(1&t&&(u.Wb(0,"mat-tab",31),u.Oc(1,Eo,4,4,"ng-template",61),u.Oc(2,Ko,34,22,"mat-tab-group",19),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.pc("label",a.group_desc),u.Db(2),u.oc("ngIf",n.selectedIndex>0)}}var Yo=function(t){return{color:t}};function Zo(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-card",29),u.Wb(1,"mat-tab-group",30),u.dc("selectedIndexChange",(function(t){return u.Dc(a),u.hc().selectedIndex=t})),u.Wb(2,"mat-tab",31),u.ic(3,"translate"),u.Wb(4,"form",32,33),u.dc("ngSubmit",(function(){return u.Dc(a),u.hc().onSubmit()})),u.Wb(6,"mat-form-field"),u.Oc(7,Ro,2,4,"input",34),u.Oc(8,To,3,7,"input",35),u.Vb(),u.Wb(9,"div",36),u.Wb(10,"div",37),u.Wb(11,"mat-form-field"),u.Wb(12,"input",38),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().basket.basket_name=t})),u.ic(13,"translate"),u.ic(14,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(15,"div",39),u.Wb(16,"mat-form-field"),u.Wb(17,"input",40),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().basket.color=t})),u.ic(18,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(19,"mat-form-field"),u.Wb(20,"input",41),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().basket.basket_desc=t})),u.ic(21,"translate"),u.ic(22,"translate"),u.Vb(),u.Vb(),u.Wb(23,"mat-form-field"),u.Wb(24,"textarea",42),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().basket.clause=t})),u.ic(25,"translate"),u.ic(26,"translate"),u.Vb(),u.Wb(27,"mat-icon",43),u.dc("click",(function(){return u.Dc(a),u.hc(),u.zc(16).toggle()})),u.ic(28,"translate"),u.Vb(),u.Vb(),u.Wb(29,"div",44),u.Oc(30,Lo,15,15,"div",45),u.Vb(),u.Wb(31,"div",46),u.Wb(32,"button",47),u.Qc(33),u.ic(34,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Oc(35,Jo,3,2,"mat-tab",48),u.Vb(),u.Vb()}if(2&t){var n=u.zc(5),i=u.hc();u.Db(1),u.oc("selectedIndex",i.selectedIndex),u.Db(1),u.pc("label",u.jc(3,21,"lang.informations")),u.Db(5),u.oc("ngIf",i.creationMode),u.Db(1),u.oc("ngIf",!i.creationMode),u.Db(4),u.pc("title",u.jc(13,23,"lang.label")),u.pc("placeholder",u.jc(14,25,"lang.label")),u.oc("ngModel",i.basket.basket_name)("ngStyle",u.vc(41,Yo,i.basket.color)),u.Db(5),u.pc("matTooltip",u.jc(18,27,"lang.chooseColor")),u.oc("ngModel",i.basket.color),u.Db(3),u.pc("title",u.jc(21,29,"lang.description")),u.pc("placeholder",u.jc(22,31,"lang.description")),u.oc("ngModel",i.basket.basket_desc),u.Db(4),u.pc("title",u.jc(25,33,"lang.clause")),u.pc("placeholder",u.jc(26,35,"lang.clause")),u.oc("ngModel",i.basket.clause),u.Db(3),u.pc("matTooltip",u.jc(28,37,"lang.keywordHelper")),u.Db(3),u.oc("ngForOf",i.orderColumnsSelected),u.Db(2),u.oc("disabled",!n.form.valid||0==i.orderColumnsSelected.length),u.Db(1),u.Rc(u.jc(34,39,"lang.save")),u.Db(2),u.oc("ngForOf",i.basketGroups)}}var tr=["statusInput"];function er(t,e){1&t&&(u.Qc(0),u.ic(1,"translate")),2&t&&u.Sc(" ",u.jc(1,1,"lang.redirects")," ")}function ar(t,e){1&t&&u.Oc(0,er,2,3,"ng-template",21)}function nr(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-expansion-panel",17),u.dc("opened",(function(){return u.Dc(a),u.hc(2).initService2()})),u.Wb(1,"mat-expansion-panel-header"),u.Wb(2,"mat-panel-title"),u.Qc(3),u.ic(4,"translate"),u.Vb(),u.Vb(),u.Wb(5,"mat-form-field"),u.Rb(6,"input",22),u.ic(7,"translate"),u.Vb(),u.Rb(8,"div",23),u.Vb()}2&t&&(u.Db(3),u.Sc(" ",u.jc(4,2,"lang.toUsersEntities")," "),u.Db(3),u.pc("placeholder",u.jc(7,4,"lang.searchEntities")))}function ir(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-tab"),u.Oc(1,ar,1,0,void 0,7),u.Wb(2,"mat-accordion"),u.Wb(3,"mat-expansion-panel",17),u.dc("opened",(function(){return u.Dc(a),u.hc().initService()})),u.Wb(4,"mat-expansion-panel-header"),u.Wb(5,"mat-panel-title"),u.Qc(6),u.ic(7,"translate"),u.Vb(),u.Vb(),u.Wb(8,"mat-form-field"),u.Rb(9,"input",18),u.ic(10,"translate"),u.Vb(),u.Rb(11,"div",19),u.Vb(),u.Oc(12,nr,9,6,"mat-expansion-panel",20),u.Vb(),u.Vb()}if(2&t){var n=u.hc();u.Db(1),u.oc("ngIf","redirect"==n.data.action.keyword),u.Db(5),u.Sc(" ",u.jc(7,4,"lang.toEntities")," "),u.Db(3),u.pc("placeholder",u.jc(10,6,"lang.searchEntities")),u.Db(3),u.oc("ngIf","redirect"==n.data.action.keyword)}}function or(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-list-item",4),u.dc("click",(function(){u.Dc(a);var t=u.hc().$implicit;return u.hc().validateForm(t)})),u.Qc(1),u.Vb()}if(2&t){var n=u.hc().$implicit;u.Db(1),u.Sc(" ",n.group_desc," ")}}function rr(t,e){if(1&t&&(u.Wb(0,"span"),u.Oc(1,or,2,1,"mat-list-item",3),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.oc("ngIf",0==a.isUsed)}}var cr,lr,sr,dr=((sr=function(){function t(e,a,n,i,o,r,c,l,s){_classCallCheck(this,t),this.translate=e,this.http=a,this.route=n,this.router=i,this.notify=o,this.dialog=r,this.headerService=c,this.appService=l,this.viewContainerRef=s,this.selectedIndex=0,this.loading=!1,this.config={},this.basket={},this.basketClone={},this.basketGroups=[],this.allGroups=[],this.actionsList=[],this.list_display=[],this.displayedColumns=["label_action","actions"],this.orderColumns=["alt_identifier","creation_date","process_limit_date","res_id","priority"],this.orderByColumns=["asc","desc"],this.langVarName=[this.translate.instant("lang.chrono"),this.translate.instant("lang.creationDate"),this.translate.instant("lang.processLimitDate"),this.translate.instant("lang.id"),this.translate.instant("lang.priority")],this.langOrderName=[this.translate.instant("lang.ascending"),this.translate.instant("lang.descending")],this.orderColumnsSelected=[{column:"res_id",order:"asc"}]}return _createClass(t,[{key:"applyFilter",value:function(t){t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t}},{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.route.params.subscribe((function(e){void 0===e.id?(t.headerService.setHeader(t.translate.instant("lang.basketCreation")),t.creationMode=!0,t.basketIdAvailable=!1,t.loading=!1):(t.orderColumnsSelected=[],t.creationMode=!1,t.basketIdAvailable=!0,t.id=e.id,t.http.get("../rest/baskets/"+t.id).subscribe((function(e){if(t.headerService.setHeader(t.translate.instant("lang.basketModification"),e.basket.basket_name),t.basket=e.basket,t.basket.id=e.basket.basket_id,t.basket.name=e.basket.basket_name,t.basket.description=e.basket.basket_desc,t.basket.clause=e.basket.basket_clause,t.basket.isSearchBasket="Y"!==e.basket.is_visible,t.basket.flagNotif="Y"===e.basket.flag_notif,""===t.basket.basket_res_order||null==t.basket.basket_res_order)t.orderColumnsSelected=[];else for(var a=t.basket.basket_res_order.split(", "),n=0;n<a.length;n++){var i=a[n].split(" ");i[1]||(i[1]="desc"),t.orderColumnsSelected.push({column:i[0],order:i[1]})}t.basketClone=JSON.parse(JSON.stringify(t.basket)),t.http.get("../rest/baskets/"+t.id+"/groups").subscribe((function(e){t.allGroups=e.allGroups,t.allGroups.forEach((function(t){t.isUsed=!1,e.groups.forEach((function(e){t.group_id===e.group_id&&(t.isUsed=!0)}))})),e.groups.forEach((function(t){t.groupActions.forEach((function(t){t.used_in_basketlist="Y"===t.used_in_basketlist,t.used_in_action_page="Y"===t.used_in_action_page,t.default_action_list="Y"===t.default_action_list}))})),t.basketGroups=e.groups,t.loading=!1}),(function(e){t.notify.handleErrors(e)}))}),(function(e){t.notify.handleErrors(e)})))}))}},{key:"openSettings",value:function(t,e){var a=this;this.config={panelClass:"maarch-modal",data:{group:t,action:e}},this.dialogRef=this.dialog.open(br,this.config),this.dialogRef.afterClosed().subscribe((function(n){n&&a.http.put("../rest/baskets/"+a.id+"/groups/"+n.group.group_id+"/actions",{groupActions:n.group.groupActions}).subscribe((function(){a.dialogRef=null,a.notify.success(a.translate.instant("lang.basketUpdated"))}),(function(n){a.dialogRef=null,a.openSettings(t,e),a.notify.error(n.error.errors)}))}))}},{key:"isAvailable",value:function(){var t=this;this.basket.id?this.http.get("../rest/baskets/"+this.basket.id).subscribe((function(){t.basketIdAvailable=!1}),(function(e){t.basketIdAvailable=!1,e.error.errors===t.translate.instant("lang.basketNotFound")&&(t.basketIdAvailable=!0)})):this.basketIdAvailable=!1}},{key:"onSubmit",value:function(){var t=this;if(null!==this.orderColumnsSelected&&this.orderColumnsSelected.length>0){for(var e=[],a=0;a<this.orderColumnsSelected.length;a++)e[a]=this.orderColumnsSelected[a].column+" "+this.orderColumnsSelected[a].order;this.basket.basket_res_order=e.join(", ")}else this.basket.basket_res_order="";this.creationMode?this.http.post("../rest/baskets",this.basket).subscribe((function(){t.notify.success(t.translate.instant("lang.basketAdded")),t.router.navigate(["/administration/baskets/"+t.basket.id])}),(function(e){t.notify.error(e.error.errors)})):this.http.put("../rest/baskets/"+this.id,this.basket).subscribe((function(){t.notify.success(t.translate.instant("lang.basketUpdated")),t.router.navigate(["/administration/baskets"])}),(function(e){t.notify.error(e.error.errors)}))}},{key:"addLine",value:function(){this.orderColumnsSelected.push(JSON.parse(JSON.stringify(this.orderColumnsSelected[0])))}},{key:"removeLine",value:function(t){this.orderColumnsSelected.splice(t,1)}},{key:"initAction",value:function(t){this.dataSource=new q.p(this.basketGroups[t].groupActions),this.dataSource.sort=this.sort}},{key:"setDefaultAction",value:function(t,e){t.groupActions.forEach((function(t){t.default_action_list=t.id===e.id})),this.addAction(t)}},{key:"unlinkGroup",value:function(t){var e=this;confirm(this.translate.instant("lang.unlinkGroup")+" ?")&&this.http.delete("../rest/baskets/"+this.id+"/groups/"+this.basketGroups[t].group_id).subscribe((function(){e.allGroups.forEach((function(a){a.group_id===e.basketGroups[t].group_id&&(a.isUsed=!1)})),e.basketGroups.splice(t,1),e.notify.success(e.translate.instant("lang.basketUpdated")),e.selectedIndex=0}),(function(t){e.notify.error(t.error.errors)}))}},{key:"linkGroup",value:function(){var t=this;this.config={panelClass:"maarch-modal",data:{basketId:this.basket.id,groups:this.allGroups,linkedGroups:this.basketGroups}},this.dialogRef=this.dialog.open(ur,this.config),this.dialogRef.afterClosed().subscribe((function(e){e&&(e.list_display=t.basketGroups.length>0?t.basketGroups[t.basketGroups.length-1].list_display:{subInfos:[],templateColumns:0},t.http.post("../rest/baskets/"+t.id+"/groups",e).subscribe((function(){t.basketGroups.push(e),t.allGroups.forEach((function(t){t.group_id===e.group_id&&(t.isUsed=!0)})),t.notify.success(t.translate.instant("lang.basketUpdated")),t.selectedIndex=t.basketGroups.length}),(function(e){t.notify.error(e.error.errors)}))),t.dialogRef=null}))}},{key:"addAction",value:function(t){var e=this;this.http.put("../rest/baskets/"+this.id+"/groups/"+t.group_id+"/actions",{groupActions:t.groupActions}).subscribe((function(){e.notify.success(e.translate.instant("lang.actionsGroupBasketUpdated"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"toggleIsSearchBasket",value:function(t){var e=this;t.isSearchBasket=!t.isSearchBasket,this.basketClone.isSearchBasket=t.isSearchBasket,this.http.put("../rest/baskets/"+this.id,this.basketClone).subscribe((function(){e.notify.success(e.translate.instant("lang.basketUpdated"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"toggleFlagNotif",value:function(t){var e=this;t.flagNotif=!t.flagNotif,this.basketClone.flagNotif=t.flagNotif,this.http.put("../rest/baskets/"+this.id,this.basketClone).subscribe((function(){e.notify.success(e.translate.instant("lang.basketUpdated"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"unlinkAction",value:function(t,e){var a=this;confirm(this.translate.instant("lang.unlinkAction")+" ?")&&(e.checked=!1,this.http.put("../rest/baskets/"+this.id+"/groups/"+t.group_id+"/actions",{groupActions:t.groupActions}).subscribe((function(){a.notify.success(a.translate.instant("lang.actionsGroupBasketUpdated"))}),(function(t){a.notify.error(t.error.errors)})))}},{key:"updateGroupInfo",value:function(t,e){}}]),t}()).\u0275fac=function(t){return new(t||sr)(u.Qb(p.e),u.Qb(f.b),u.Qb(o.a),u.Qb(o.c),u.Qb(y.a),u.Qb(N.b),u.Qb(m.a),u.Qb(g.a),u.Qb(u.T))},sr.\u0275cmp=u.Kb({type:sr,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(_o,!0),u.Kc(So,!0),u.Xc(H.a,!0),u.Xc(B.a,!0)),2&t&&(u.yc(a=u.ec())&&(e.sidenavRight=a.first),u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.paginator=a.first),u.yc(a=u.ec())&&(e.sort=a.first))},decls:93,vars:56,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",3,"mode","fixedInViewport","opened"],["snav2",""],["mat-subheader",""],["role","list",2,"width","300px","padding","5px"],[2,"font-size","10px"],[2,"border","1px black solid","padding","3px","font-size","10px"],["mat-line","",2,"font-weight","bold","font-size","10px"],["mat-line","",2,"font-size","10px"],[4,"ngIf"],["mat-list-item","",3,"click"],["color","primary","mat-list-icon","",1,"fa","fa-link"],["mat-line",""],["mat-list-item","","disableRipple","true",3,"matTooltip"],["color","primary","mat-list-icon",""],["color","primary",3,"checked","change"],["mat-line","",3,"ngStyle","click"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[3,"selectedIndex","selectedIndexChange"],[3,"label"],[1,"form-horizontal",3,"ngSubmit"],["basketForm","ngForm"],["matInput","","name","identifier","maxlength","32","pattern","^[\\w.-]*$","required","",3,"placeholder","ngModel","ngModelChange","blur",4,"ngIf"],["matInput","","name","identifier","required","","disabled","",3,"placeholder","title","ngModel","ngModelChange",4,"ngIf"],[1,"row"],[1,"col-md-11","col-xs-10"],["matInput","","name","label","maxlength","255","required","",3,"title","placeholder","ngModel","ngStyle","ngModelChange"],[1,"col-md-1","col-xs-2"],["matInput","","type","color","name","color",3,"matTooltip","ngModel","ngModelChange"],["matInput","","name","description","maxlength","255","required","",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","name","clause","matTextareaAutosize","","matAutosizeMinRows","1","required","",3,"title","placeholder","ngModel","ngModelChange"],["color","primary","matSuffix","",1,"fa","fa-info-circle",2,"cursor","pointer",3,"matTooltip","click"],["id","listOrder"],["class","row",4,"ngFor","ngForOf"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary",3,"disabled"],[3,"label",4,"ngFor","ngForOf"],["matInput","","name","identifier","maxlength","32","pattern","^[\\w.-]*$","required","",3,"placeholder","ngModel","ngModelChange","blur"],["matInput","","name","identifier","required","","disabled","",3,"placeholder","title","ngModel","ngModelChange"],[1,"col-md-5","col-xs-5","text-center"],["required","",3,"placeholder","ngModel","name","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-2","col-xs-2","text-left"],["color","warn","mat-icon-button","","type","button",3,"disabled","click"],[1,"fa","fa-minus-square","fa-2x"],["color","primary","mat-icon-button","","type","button",3,"disabled","click",4,"ngIf"],[3,"value"],["color","primary","mat-icon-button","","type","button",3,"disabled","click"],[1,"fa","fa-plus-square","fa-2x"],["mat-tab-label",""],["color","warn",1,"fa","fa-times",3,"matTooltip","click"],[1,"col-md-6"],[1,"mat-chip-list-stacked"],["chipList",""],["style","width:100%;",4,"ngFor","ngForOf"],[1,"basketActionsList"],[3,"opened"],["matInput","",3,"placeholder","keyup"],[3,"dataSource"],["table",""],["matColumnDef","label_action"],[4,"matHeaderCellDef"],["style","flex:6;",3,"matTooltip",4,"matCellDef"],["matColumnDef","actions"],["style","text-align:right",3,"matTooltip",4,"matCellDef"],[4,"matRowDef","matRowDefColumns"],[3,"currentBasketGroup","refreshBasketGroup"],[2,"width","100%"],["color","primary","style","cursor:pointer;margin:5px;border-radius:0px;display:flex;","selectable","true","removable","true",3,"matTooltip","ngStyle","click","removed",4,"ngIf"],["color","primary","selectable","true","removable","true",2,"cursor","pointer","margin","5px","border-radius","0px","display","flex",3,"matTooltip","ngStyle","click","removed"],[2,"flex","1 1 auto"],["mat-raised-button","",3,"disabled","click"],["matChipRemove","","color","warn","class","fa fa-times",3,"matTooltip","click",4,"ngIf"],["matChipRemove","","color","warn",1,"fa","fa-times",3,"matTooltip","click"],[2,"flex","6",3,"matTooltip"],["color","primary",3,"disabled","ngModel","change","ngModelChange"],[2,"text-align","right",3,"matTooltip"],["mat-icon-button","",3,"matMenuTriggerFor","disabled"],[1,"fa","fa-bars"],["menu","matMenu"],["mat-menu-item","",3,"disabled","click"],[1,"fa","fa-check-circle"],["mat-menu-item","",3,"click"],[1,"fa","fa-cogs"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,Io,1,1,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,jo,2,0,"div",9),u.Oc(14,Zo,36,43,"mat-card",10),u.Vb(),u.Vb(),u.Vb(),u.Wb(15,"mat-sidenav",11,12),u.Wb(17,"mat-nav-list"),u.Wb(18,"h3",13),u.Qc(19),u.ic(20,"translate"),u.Vb(),u.Vb(),u.Wb(21,"mat-list",14),u.Wb(22,"p",15),u.Qc(23),u.ic(24,"translate"),u.Vb(),u.Wb(25,"div",16),u.Wb(26,"b"),u.Qc(27,"DESTINATION = @my_primary_entity or DESTINATION in (@subentities[@my_primary_entity])"),u.Vb(),u.Vb(),u.Wb(28,"h4",17),u.Qc(29,"@user :"),u.Vb(),u.Wb(30,"p",18),u.Qc(31),u.ic(32,"translate"),u.Vb(),u.Wb(33,"h4",17),u.Qc(34,"@user_id :"),u.Vb(),u.Wb(35,"p",18),u.Qc(36),u.ic(37,"translate"),u.Vb(),u.Wb(38,"h4",17),u.Qc(39,"@email :"),u.Vb(),u.Wb(40,"p",18),u.Qc(41),u.ic(42,"translate"),u.Vb(),u.Wb(43,"h4",17),u.Qc(44,"@my_entities :"),u.Vb(),u.Wb(45,"p",18),u.Qc(46),u.ic(47,"translate"),u.Vb(),u.Wb(48,"h4",17),u.Qc(49,"@my_entities_id :"),u.Vb(),u.Wb(50,"p",18),u.Qc(51),u.ic(52,"translate"),u.Vb(),u.Wb(53,"h4",17),u.Qc(54,"@my_primary_entity :"),u.Vb(),u.Wb(55,"p",18),u.Qc(56),u.ic(57,"translate"),u.Vb(),u.Wb(58,"h4",17),u.Qc(59,"@my_primary_entity_id :"),u.Vb(),u.Wb(60,"p",18),u.Qc(61),u.ic(62,"translate"),u.Vb(),u.Wb(63,"h4",17),u.Qc(64,"@subentities[('entity_1',...,'entity_n')] :"),u.Vb(),u.Wb(65,"p",18),u.Qc(66),u.ic(67,"translate"),u.Vb(),u.Wb(68,"h4",17),u.Qc(69,"@parent_entity['entity_id'] :"),u.Vb(),u.Wb(70,"p",18),u.Qc(71),u.ic(72,"translate"),u.Vb(),u.Wb(73,"h4",17),u.Qc(74,"@sisters_entities['entity_id'] :"),u.Vb(),u.Wb(75,"p",18),u.Qc(76),u.ic(77,"translate"),u.Vb(),u.Wb(78,"h4",17),u.Qc(79,"@entity_type['type'] :"),u.Vb(),u.Wb(80,"p",18),u.Qc(81),u.ic(82,"translate"),u.Vb(),u.Wb(83,"h4",17),u.Qc(84,"@all_entities :"),u.Vb(),u.Wb(85,"p",18),u.Qc(86),u.ic(87,"translate"),u.Vb(),u.Wb(88,"h4",17),u.Qc(89,"@immediate_children['entity_1',..., 'entity_id'] :"),u.Vb(),u.Wb(90,"p",18),u.Qc(91),u.ic(92,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading),u.Db(1),u.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",(e.appService.getViewMode(),!1)),u.Db(4),u.Rc(u.jc(20,26,"lang.keywordHelp")),u.Db(4),u.Rc(u.jc(24,28,"lang.keywordHelpDesc_11")),u.Db(8),u.Rc(u.jc(32,30,"lang.keywordHelpDesc_1")),u.Db(5),u.Rc(u.jc(37,32,"lang.keywordHelpDesc_12")),u.Db(5),u.Rc(u.jc(42,34,"lang.keywordHelpDesc_2")),u.Db(5),u.Rc(u.jc(47,36,"lang.keywordHelpDesc_3")),u.Db(5),u.Rc(u.jc(52,38,"lang.keywordHelpDesc_13")),u.Db(5),u.Rc(u.jc(57,40,"lang.keywordHelpDesc_4")),u.Db(5),u.Rc(u.jc(62,42,"lang.keywordHelpDesc_14")),u.Db(5),u.Rc(u.jc(67,44,"lang.keywordHelpDesc_5")),u.Db(5),u.Rc(u.jc(72,46,"lang.keywordHelpDesc_6")),u.Db(5),u.Rc(u.jc(77,48,"lang.keywordHelpDesc_7")),u.Db(5),u.Rc(u.jc(82,50,"lang.keywordHelpDesc_8")),u.Db(5),u.Rc(u.jc(87,52,"lang.keywordHelpDesc_9")),u.Db(5),u.Rc(u.jc(92,54,"lang.keywordHelpDesc_10")))},directives:[C.e,C.f,x.a,W.a,O.t,C.d,Rt.h,Rt.g,Rt.a,j.l,Rt.d,Tt.a,Rt.c,_.a,Qt.b,at.a,O.w,w.c,I.a,Ee.c,Ee.a,c.K,c.v,c.w,S.c,k.b,c.d,c.p,c.F,c.u,c.x,k.d,S.j,O.s,R.b,c.B,it.a,j.p,Ee.d,eo.d,Ae.a,Ae.c,Ae.g,Ae.h,q.o,q.c,q.i,q.b,q.n,Oo,eo.a,eo.e,q.h,q.a,ze.a,$e.d,$e.e,$e.b,q.m],pipes:[p.d,T.a],styles:[".basketActionsList[_ngcontent-%COMP%]    .mat-expansion-panel-body{height:400px;overflow:auto}.mat-chip[_ngcontent-%COMP%]{padding:25px!important}textarea.mat-input-element[_ngcontent-%COMP%]{padding:0;margin:0}"]}),sr),br=((lr=function(){function t(e,a,n,i,o){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.data=i,this.dialogRef=o,this.allEntities=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.http.get("../rest/entities").subscribe((function(e){[{id:"ALL_ENTITIES",keyword:"ALL_ENTITIES",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:t.translate.instant("lang.allEntities")},{id:"ENTITIES_JUST_BELOW",keyword:"ENTITIES_JUST_BELOW",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:t.translate.instant("lang.immediatelyBelowMyPrimaryEntity")},{id:"ENTITIES_BELOW",keyword:"ENTITIES_BELOW",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:t.translate.instant("lang.belowAllMyEntities")},{id:"ALL_ENTITIES_BELOW",keyword:"ALL_ENTITIES_BELOW",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:t.translate.instant("lang.belowMyPrimaryEntity")},{id:"MY_ENTITIES",keyword:"MY_ENTITIES",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:t.translate.instant("lang.myEntities")},{id:"MY_PRIMARY_ENTITY",keyword:"MY_PRIMARY_ENTITY",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:t.translate.instant("lang.myPrimaryEntity")},{id:"SAME_LEVEL_ENTITIES",keyword:"SAME_LEVEL_ENTITIES",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:t.translate.instant("lang.sameLevelMyPrimaryEntity")},{id:"ENTITIES_JUST_UP",keyword:"ENTITIES_JUST_UP",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:t.translate.instant("lang.immediatelySuperiorMyPrimaryEntity")}].forEach((function(e){t.allEntities.push(e)})),e.entities.forEach((function(e){t.allEntities.push(e)}))}),(function(e){t.notify.handleErrors(e)}))}},{key:"initService",value:function(){var t=this;this.allEntities.forEach((function(e){e.state={opened:!1,selected:!1},t.data.action.redirects.forEach((function(t){(e.id===t.keyword&&"ENTITY"===t.redirect_mode||e.id===t.entity_id&&"ENTITY"===t.redirect_mode)&&(e.state={opened:!0,selected:!0})}))})),$("#jstree").jstree({checkbox:{three_state:!1},core:{force_text:!0,themes:{name:"proton",responsive:!0},data:this.allEntities},plugins:["checkbox","search"]}),$("#jstree").on("select_node.jstree",(function(e,a){t.data.action.redirects.push(a.node.original.keyword?{action_id:t.data.action.id,entity_id:"",keyword:a.node.id,redirect_mode:"ENTITY"}:{action_id:t.data.action.id,entity_id:a.node.id,keyword:"",redirect_mode:"ENTITY"})})).on("deselect_node.jstree",(function(e,a){t.data.action.redirects.forEach((function(e){if(a.node.original.keyword){if(e.keyword===a.node.original.keyword){var n=t.data.action.redirects.indexOf(e);t.data.action.redirects.splice(n,1)}}else if(e.entity_id===a.node.id){var i=t.data.action.redirects.indexOf(e);t.data.action.redirects.splice(i,1)}}))})).jstree();var e=!1;$("#jstree_search").keyup((function(){e&&clearTimeout(e),e=setTimeout((function(){var t=$("#jstree_search").val();$("#jstree").jstree(!0).search(t)}),250)}))}},{key:"initService2",value:function(){var t=this;this.allEntities.forEach((function(e){e.state={opened:!1,selected:!1},t.data.action.redirects.forEach((function(t){(e.id===t.keyword&&"USERS"===t.redirect_mode||e.id===t.entity_id&&"USERS"===t.redirect_mode)&&(e.state={opened:!0,selected:!0})}))})),$("#jstree2").jstree({checkbox:{three_state:!1},core:{force_text:!0,themes:{name:"proton",responsive:!0},data:this.allEntities},plugins:["checkbox","search"]}),$("#jstree2").on("select_node.jstree",(function(e,a){t.data.action.redirects.push(a.node.original.keyword?{action_id:t.data.action.id,entity_id:"",keyword:a.node.id,redirect_mode:"USERS"}:{action_id:t.data.action.id,entity_id:a.node.id,keyword:"",redirect_mode:"USERS"})})).on("deselect_node.jstree",(function(e,a){t.data.action.redirects.forEach((function(e){if(a.node.original.keyword){if(e.keyword===a.node.original.keyword){var n=t.data.action.redirects.indexOf(e);t.data.action.redirects.splice(n,1)}}else if(e.entity_id===a.node.id){var i=t.data.action.redirects.indexOf(e);t.data.action.redirects.splice(i,1)}}))})).jstree();var e=!1;$("#jstree_search2").keyup((function(){e&&clearTimeout(e),e=setTimeout((function(){var t=$("#jstree_search2").val();$("#jstree2").jstree(!0).search(t)}),250)}))}},{key:"saveSettings",value:function(){this.dialogRef.close(this.data)}}]),t}()).\u0275fac=function(t){return new(t||lr)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(N.a),u.Qb(N.h))},lr.\u0275cmp=u.Kb({type:lr,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&u.Kc(tr,!0),2&t&&u.yc(a=u.ec())&&(e.statusInput=a.first)},decls:109,vars:72,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["settingGroupsBasket","ngForm"],[1,"container-fluid"],[1,"col-md-6"],["id","usedInActionPage","name","usedInActionPage","color","primary",3,"ngModel","ngModelChange"],["id","usedInBasketlist","name","usedInBasketlist","color","primary",3,"ngModel","ngModelChange"],[4,"ngIf"],[3,"label"],["matInput","","name","clause","matTextareaAutosize","","matAutosizeMinRows","1",3,"title","placeholder","ngModel","ngModelChange"],["role","list",2,"width","400px","padding","5px"],[2,"font-size","10px"],[2,"border","1px black solid","padding","3px","font-size","10px"],["mat-line","",2,"font-weight","bold","font-size","10px"],["mat-line","",2,"font-size","10px"],[1,"divider-modal"],["mat-raised-button","","type","submit","color","primary",2,"margin","auto",3,"disabled","click"],[3,"opened"],["matInput","","id","jstree_search","name","jstree_search","type","text",3,"placeholder"],["id","jstree"],[3,"opened",4,"ngIf"],["mat-tab-label",""],["matInput","","id","jstree_search2","name","jstree_search2","type","text",3,"placeholder"],["id","jstree2"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"h2",1),u.Qc(2),u.ic(3,"translate"),u.Wb(4,"small"),u.Qc(5),u.Vb(),u.Vb(),u.Wb(6,"mat-dialog-content"),u.Wb(7,"form",null,2),u.Wb(9,"div",3),u.Wb(10,"div",4),u.Wb(11,"mat-checkbox",5),u.dc("ngModelChange",(function(t){return e.data.action.used_in_action_page=t})),u.Qc(12),u.ic(13,"translate"),u.Vb(),u.Vb(),u.Wb(14,"div",4),u.Wb(15,"mat-checkbox",6),u.dc("ngModelChange",(function(t){return e.data.action.used_in_basketlist=t})),u.Qc(16),u.ic(17,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(18,"mat-tab-group"),u.Oc(19,ir,13,8,"mat-tab",7),u.Wb(20,"mat-tab",8),u.ic(21,"translate"),u.Wb(22,"mat-form-field"),u.Wb(23,"textarea",9),u.dc("ngModelChange",(function(t){return e.data.action.where_clause=t})),u.ic(24,"translate"),u.ic(25,"translate"),u.Vb(),u.Vb(),u.Wb(26,"mat-accordion"),u.Wb(27,"mat-expansion-panel"),u.Wb(28,"mat-expansion-panel-header"),u.Wb(29,"mat-panel-title"),u.Qc(30),u.ic(31,"translate"),u.Vb(),u.Vb(),u.Wb(32,"mat-list",10),u.Wb(33,"p",11),u.Qc(34),u.ic(35,"translate"),u.Vb(),u.Wb(36,"div",12),u.Wb(37,"b"),u.Qc(38,"DESTINATION = @my_primary_entity or DESTINATION in (@subentities[@my_primary_entity])"),u.Vb(),u.Vb(),u.Wb(39,"h4",13),u.Qc(40,"@user :"),u.Vb(),u.Wb(41,"p",14),u.Qc(42),u.ic(43,"translate"),u.Vb(),u.Wb(44,"h4",13),u.Qc(45,"@user_id :"),u.Vb(),u.Wb(46,"p",14),u.Qc(47),u.ic(48,"translate"),u.Vb(),u.Wb(49,"h4",13),u.Qc(50,"@email :"),u.Vb(),u.Wb(51,"p",14),u.Qc(52),u.ic(53,"translate"),u.Vb(),u.Wb(54,"h4",13),u.Qc(55,"@my_entities :"),u.Vb(),u.Wb(56,"p",14),u.Qc(57),u.ic(58,"translate"),u.Vb(),u.Wb(59,"h4",13),u.Qc(60,"@my_entities_id :"),u.Vb(),u.Wb(61,"p",14),u.Qc(62),u.ic(63,"translate"),u.Vb(),u.Wb(64,"h4",13),u.Qc(65,"@my_primary_entity :"),u.Vb(),u.Wb(66,"p",14),u.Qc(67),u.ic(68,"translate"),u.Vb(),u.Wb(69,"h4",13),u.Qc(70,"@my_primary_entity_id :"),u.Vb(),u.Wb(71,"p",14),u.Qc(72),u.ic(73,"translate"),u.Vb(),u.Wb(74,"h4",13),u.Qc(75," @subentities[('entity_1',...,'entity_n')] :"),u.Vb(),u.Wb(76,"p",14),u.Qc(77),u.ic(78,"translate"),u.Vb(),u.Wb(79,"h4",13),u.Qc(80,"@parent_entity['entity_id'] :"),u.Vb(),u.Wb(81,"p",14),u.Qc(82),u.ic(83,"translate"),u.Vb(),u.Wb(84,"h4",13),u.Qc(85,"@sisters_entities['entity_id'] : "),u.Vb(),u.Wb(86,"p",14),u.Qc(87),u.ic(88,"translate"),u.Vb(),u.Wb(89,"h4",13),u.Qc(90,"@entity_type['type'] :"),u.Vb(),u.Wb(91,"p",14),u.Qc(92),u.ic(93,"translate"),u.Vb(),u.Wb(94,"h4",13),u.Qc(95,"@all_entities :"),u.Vb(),u.Wb(96,"p",14),u.Qc(97),u.ic(98,"translate"),u.Vb(),u.Wb(99,"h4",13),u.Qc(100," @immediate_children['entity_1',..., 'entity_id'] :"),u.Vb(),u.Wb(101,"p",14),u.Qc(102),u.ic(103,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Rb(104,"span",15),u.Wb(105,"mat-dialog-actions"),u.Wb(106,"button",16),u.dc("click",(function(){return e.saveSettings()})),u.Qc(107),u.ic(108,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(2),u.Sc("",u.jc(3,28,"lang.actionParameters")," "),u.Db(3),u.Rc(e.data.action.label_action),u.Db(6),u.oc("ngModel",e.data.action.used_in_action_page),u.Db(1),u.Sc(" ",u.jc(13,30,"lang.usedInActionPage"),""),u.Db(3),u.oc("ngModel",e.data.action.used_in_basketlist),u.Db(1),u.Sc(" ",u.jc(17,32,"lang.usedInBasketlist"),""),u.Db(3),u.oc("ngIf","redirect"==e.data.action.keyword),u.Db(1),u.pc("label",u.jc(21,34,"lang.otherParameters")),u.Db(3),u.pc("title",u.jc(24,36,"lang.whereClauseAction")),u.pc("placeholder",u.jc(25,38,"lang.whereClauseAction")),u.oc("ngModel",e.data.action.where_clause),u.Db(7),u.Sc(" ",u.jc(31,40,"lang.keywordHelp")," "),u.Db(4),u.Rc(u.jc(35,42,"lang.keywordHelpDesc_11")),u.Db(8),u.Rc(u.jc(43,44,"lang.keywordHelpDesc_1")),u.Db(5),u.Rc(u.jc(48,46,"lang.keywordHelpDesc_12")),u.Db(5),u.Rc(u.jc(53,48,"lang.keywordHelpDesc_2")),u.Db(5),u.Rc(u.jc(58,50,"lang.keywordHelpDesc_3")),u.Db(5),u.Rc(u.jc(63,52,"lang.keywordHelpDesc_13")),u.Db(5),u.Rc(u.jc(68,54,"lang.keywordHelpDesc_4")),u.Db(5),u.Rc(u.jc(73,56,"lang.keywordHelpDesc_14")),u.Db(5),u.Rc(u.jc(78,58,"lang.keywordHelpDesc_5")),u.Db(5),u.Rc(u.jc(83,60,"lang.keywordHelpDesc_6")),u.Db(5),u.Rc(u.jc(88,62,"lang.keywordHelpDesc_7")),u.Db(5),u.Rc(u.jc(93,64,"lang.keywordHelpDesc_8")),u.Db(5),u.Rc(u.jc(98,66,"lang.keywordHelpDesc_9")),u.Db(5),u.Rc(u.jc(103,68,"lang.keywordHelpDesc_10")),u.Db(4),u.oc("disabled",!e.data.action.used_in_basketlist&&!e.data.action.used_in_action_page),u.Db(1),u.Rc(u.jc(108,70,"lang.validate")))},directives:[N.i,N.f,c.K,c.v,c.w,ze.a,c.u,c.x,Ee.c,O.t,Ee.a,S.c,k.b,k.d,c.d,Ae.a,Ae.c,Ae.g,Ae.h,Rt.a,j.l,N.c,R.b,Ee.d],pipes:[p.d],styles:[".mat-dialog-content[_ngcontent-%COMP%]{height: 65vh;}"]}),lr),ur=((cr=function(){function t(e,a,n,i){_classCallCheck(this,t),this.http=e,this.notify=a,this.data=n,this.dialogRef=i,this.actionAll=[],this.newBasketGroup={}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.http.get("../rest/actions").subscribe((function(e){e.actions.forEach((function(e){e.where_clause="",e.used_in_basketlist=!1,e.default_action_list=!1,e.used_in_action_page=!0,e.statuses=[],e.redirects=[],e.checked=!1,t.actionAll.push(e)}))}),(function(e){t.notify.handleErrors(e)})),this.data.groups.forEach((function(e){t.data.linkedGroups.forEach((function(a){if(e.group_id===a.group_id){var n=t.data.groups.indexOf(e);t.data.groups.splice(n,1)}}))}))}},{key:"validateForm",value:function(t){0===this.data.linkedGroups.length?(this.actionAll[0].used_in_action_page=!0,this.actionAll[0].default_action_list=!0,this.actionAll[0].used_in_basketlist=!0,this.actionAll[0].checked=!0,this.newBasketGroup.groupActions=this.actionAll):this.newBasketGroup=JSON.parse(JSON.stringify(this.data.linkedGroups[this.data.linkedGroups.length-1])),this.newBasketGroup.basket_id=this.data.basketId,this.newBasketGroup.group_id=t.group_id,this.newBasketGroup.group_desc=t.group_desc,this.dialogRef.close(this.newBasketGroup)}}]),t}()).\u0275fac=function(t){return new(t||cr)(u.Qb(f.b),u.Qb(y.a),u.Qb(N.a),u.Qb(N.h))},cr.\u0275cmp=u.Kb({type:cr,selectors:[["ng-component"]],decls:7,vars:4,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title","","color","primary"],[4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[3,"click"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"h2",1),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"mat-dialog-content"),u.Wb(5,"mat-nav-list"),u.Oc(6,rr,2,1,"span",2),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(2),u.Rc(u.jc(3,2,"lang.linkGroup")),u.Db(4),u.oc("ngForOf",e.data.groups))},directives:[N.i,N.f,Rt.h,O.s,O.t,Rt.d],pipes:[p.d],styles:[".mat-dialog-content[_ngcontent-%COMP%]{height: 65vh;}"]}),cr),pr=["snav2"],fr=["adminMenuTemplate"];function mr(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-nav-list"),u.Wb(1,"h3",14),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"a",15),u.dc("click",(function(){return u.Dc(a),u.hc().prepareDoctypeAdd("firstLevel")})),u.Wb(5,"mat-icon",16),u.Rb(6,"i",17),u.Rb(7,"i",18),u.Vb(),u.Wb(8,"p",19),u.Qc(9),u.ic(10,"translate"),u.Vb(),u.Vb(),u.Wb(11,"a",15),u.dc("click",(function(){return u.Dc(a),u.hc().prepareDoctypeAdd("secondLevel")})),u.Wb(12,"mat-icon",16),u.Rb(13,"i",17),u.Rb(14,"i",18),u.Vb(),u.Wb(15,"p",19),u.Qc(16),u.ic(17,"translate"),u.Vb(),u.Vb(),u.Wb(18,"a",15),u.dc("click",(function(){return u.Dc(a),u.hc().prepareDoctypeAdd("doctype")})),u.Wb(19,"mat-icon",16),u.Rb(20,"i",20),u.Rb(21,"i",18),u.Vb(),u.Wb(22,"p",19),u.Qc(23),u.ic(24,"translate"),u.Vb(),u.Vb(),u.Vb()}2&t&&(u.Db(2),u.Rc(u.jc(3,4,"lang.actions")),u.Db(7),u.Sc(" ",u.jc(10,6,"lang.addFirstLevel")," "),u.Db(7),u.Sc(" ",u.jc(17,8,"lang.addSecondLevel")," "),u.Db(7),u.Sc(" ",u.jc(24,10,"lang.addDoctype")," "))}function gr(t,e){1&t&&(u.Wb(0,"div",21),u.Rb(1,"mat-spinner",22),u.Vb())}function hr(t,e){if(1&t&&(u.Wb(0,"mat-card",23),u.Wb(1,"mat-form-field"),u.Rb(2,"input",24),u.ic(3,"translate"),u.Vb(),u.Rb(4,"div",25),u.Wb(5,"div",26),u.Qc(6),u.ic(7,"translate"),u.Vb(),u.Vb()),2&t){var a=u.hc();u.Db(2),u.pc("placeholder",u.jc(3,3,"lang.search")),u.Db(4),u.Tc(" ",a.doctypes.length," ",u.jc(7,5,"lang.documentTypesAlt"),"")}}function vr(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",31),u.Wb(1,"div",32),u.Wb(2,"mat-form-field"),u.Wb(3,"input",38),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).currentFirstLevel.doctypes_first_level_id=t})),u.ic(4,"translate"),u.ic(5,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.Db(3),u.pc("title",u.jc(4,4,"lang.id")),u.pc("placeholder",u.jc(5,6,"lang.id")),u.oc("ngModel",n.currentFirstLevel.doctypes_first_level_id)("disabled",!n.creationMode)}}function yr(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",39),u.dc("click",(function(){return u.Dc(a),u.hc(2).removeFirstLevel()})),u.Qc(1),u.ic(2,"translate"),u.Vb()}if(2&t){u.hc();var n=u.zc(3),i=u.hc();u.oc("disabled",!n.form.valid||i.currentFirstLevel.hasChildren),u.Db(1),u.Rc(u.jc(2,2,"lang.delete"))}}function Dr(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",40),u.dc("click",(function(){return u.Dc(a),u.hc(2).readMode()})),u.Qc(1),u.ic(2,"translate"),u.Vb()}2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.cancel")))}function Vr(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-tab",27),u.ic(1,"translate"),u.Wb(2,"form",28,29),u.Oc(4,vr,6,8,"div",30),u.Wb(5,"div",31),u.Wb(6,"div",32),u.Wb(7,"mat-form-field"),u.Wb(8,"input",33),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().currentFirstLevel.doctypes_first_level_label=t})),u.ic(9,"translate"),u.ic(10,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(11,"div",31),u.Wb(12,"div",34),u.Wb(13,"button",35),u.dc("click",(function(){return u.Dc(a),u.hc().saveFirstLevel()})),u.Qc(14),u.ic(15,"translate"),u.Vb(),u.Oc(16,yr,3,4,"button",36),u.Oc(17,Dr,3,3,"button",37),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.zc(3),i=u.hc();u.pc("label",u.jc(1,9,"lang.firstLevelDoctype")),u.Db(4),u.oc("ngIf",!i.creationMode),u.Db(4),u.pc("title",u.jc(9,11,"lang.label")),u.pc("placeholder",u.jc(10,13,"lang.label")),u.oc("ngModel",i.currentFirstLevel.doctypes_first_level_label),u.Db(5),u.oc("disabled",!n.form.valid),u.Db(1),u.Rc(u.jc(15,15,"lang.save")),u.Db(2),u.oc("ngIf",!i.creationMode),u.Db(1),u.oc("ngIf",i.creationMode)}}function Cr(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",31),u.Wb(1,"div",32),u.Wb(2,"mat-form-field"),u.Wb(3,"input",47),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).currentSecondLevel.doctypes_second_level_id=t})),u.ic(4,"translate"),u.ic(5,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.Db(3),u.pc("title",u.jc(4,4,"lang.id")),u.pc("placeholder",u.jc(5,6,"lang.id")),u.oc("ngModel",n.currentSecondLevel.doctypes_second_level_id)("disabled",!n.creationMode)}}function xr(t,e){if(1&t&&(u.Wb(0,"mat-option",48),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a.doctypes_first_level_id),u.Db(1),u.Sc(" ",a.doctypes_first_level_label," ")}}function Mr(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",49),u.dc("click",(function(){return u.Dc(a),u.hc(2).removeSecondLevel()})),u.Qc(1),u.ic(2,"translate"),u.Vb()}if(2&t){u.hc();var n=u.zc(3),i=u.hc();u.oc("disabled",!n.form.valid||i.currentSecondLevel.hasChildren),u.Db(1),u.Rc(u.jc(2,2,"lang.delete"))}}function Wr(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",50),u.dc("click",(function(){return u.Dc(a),u.hc(2).readMode()})),u.Qc(1),u.ic(2,"translate"),u.Vb()}2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.cancel")))}function Or(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-tab",27),u.ic(1,"translate"),u.Wb(2,"form",28,41),u.Oc(4,Cr,6,8,"div",30),u.Wb(5,"div",31),u.Wb(6,"div",32),u.Wb(7,"mat-form-field"),u.Wb(8,"input",42),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().currentSecondLevel.doctypes_second_level_label=t})),u.ic(9,"translate"),u.ic(10,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(11,"div",31),u.Wb(12,"div",32),u.Wb(13,"mat-form-field"),u.Wb(14,"mat-select",43),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().currentSecondLevel.doctypes_first_level_id=t})),u.ic(15,"translate"),u.ic(16,"translate"),u.Oc(17,xr,2,2,"mat-option",44),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(18,"div",31),u.Wb(19,"div",34),u.Wb(20,"button",35),u.dc("click",(function(){return u.Dc(a),u.hc().saveSecondLevel()})),u.Qc(21),u.ic(22,"translate"),u.Vb(),u.Oc(23,Mr,3,4,"button",45),u.Oc(24,Wr,3,3,"button",46),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.zc(3),i=u.hc();u.pc("label",u.jc(1,13,"lang.secondLevelDoctype")),u.Db(4),u.oc("ngIf",!i.creationMode),u.Db(4),u.pc("title",u.jc(9,15,"lang.label")),u.pc("placeholder",u.jc(10,17,"lang.label")),u.oc("ngModel",i.currentSecondLevel.doctypes_second_level_label),u.Db(6),u.pc("title",u.jc(15,19,"lang.firstLevelAttached")),u.pc("placeholder",u.jc(16,21,"lang.firstLevelAttached")),u.oc("ngModel",i.currentSecondLevel.doctypes_first_level_id),u.Db(3),u.oc("ngForOf",i.firstLevels),u.Db(3),u.oc("disabled",!n.form.valid),u.Db(1),u.Rc(u.jc(22,23,"lang.save")),u.Db(2),u.oc("ngIf",!i.creationMode),u.Db(1),u.oc("ngIf",i.creationMode)}}function _r(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",31),u.Wb(1,"div",32),u.Wb(2,"mat-form-field"),u.Wb(3,"input",66),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).currentType.type_id=t})),u.ic(4,"translate"),u.ic(5,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.Db(3),u.pc("title",u.jc(4,4,"lang.id")),u.pc("placeholder",u.jc(5,6,"lang.id")),u.oc("ngModel",n.currentType.type_id)("disabled",!n.creationMode)}}function Sr(t,e){if(1&t&&(u.Wb(0,"mat-option",48),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a.doctypes_second_level_id),u.Db(1),u.Sc(" ",a.doctypes_second_level_label," ")}}function kr(t,e){if(1&t&&(u.Wb(0,"mat-option",48),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a),u.Db(1),u.Sc(" ",a," ")}}function wr(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",67),u.dc("click",(function(){return u.Dc(a),u.hc(2).removeType()})),u.ic(1,"translate"),u.Qc(2),u.ic(3,"translate"),u.Vb()}if(2&t){u.hc();var n=u.zc(3);u.pc("matTooltip",u.jc(1,3,"lang.toolTipDeleteDoctype")),u.oc("disabled",!n.form.valid),u.Db(2),u.Rc(u.jc(3,5,"lang.delete"))}}function Ir(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",50),u.dc("click",(function(){return u.Dc(a),u.hc(2).readMode()})),u.Qc(1),u.ic(2,"translate"),u.Vb()}2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.cancel")))}function jr(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-tab",27),u.ic(1,"translate"),u.Wb(2,"form",28,51),u.Oc(4,_r,6,8,"div",30),u.Wb(5,"div",31),u.Wb(6,"div",32),u.Wb(7,"mat-form-field"),u.Wb(8,"input",52),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().currentType.description=t})),u.ic(9,"translate"),u.ic(10,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(11,"div",31),u.Wb(12,"div",32),u.Wb(13,"mat-form-field"),u.Wb(14,"mat-select",53),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().currentType.doctypes_second_level_id=t})),u.ic(15,"translate"),u.ic(16,"translate"),u.Oc(17,Sr,2,2,"mat-option",44),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(18,"div",31),u.Wb(19,"div",32),u.Wb(20,"mat-form-field"),u.Wb(21,"input",54),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().currentType.process_delay=t})),u.ic(22,"translate"),u.ic(23,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(24,"div",31),u.Wb(25,"div",32),u.Wb(26,"mat-form-field"),u.Wb(27,"input",55),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().currentType.delay1=t})),u.ic(28,"translate"),u.ic(29,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(30,"div",31),u.Wb(31,"div",32),u.Wb(32,"mat-form-field"),u.Wb(33,"input",56),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().currentType.delay2=t})),u.ic(34,"translate"),u.ic(35,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(36,"div",31),u.Wb(37,"div",32),u.Wb(38,"mat-form-field"),u.Wb(39,"mat-select",57),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().currentType.process_mode=t})),u.ic(40,"translate"),u.ic(41,"translate"),u.Oc(42,kr,2,2,"mat-option",44),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(43,"mat-accordion"),u.Wb(44,"mat-expansion-panel"),u.Wb(45,"mat-expansion-panel-header"),u.Wb(46,"mat-panel-title"),u.Qc(47),u.ic(48,"translate"),u.Vb(),u.Vb(),u.Wb(49,"div",31),u.Wb(50,"div",32),u.Wb(51,"mat-form-field"),u.Wb(52,"mat-select",58),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().currentType.retention_final_disposition=t})),u.ic(53,"translate"),u.ic(54,"translate"),u.Rb(55,"mat-option",59),u.Wb(56,"mat-option",60),u.Qc(57),u.ic(58,"translate"),u.Vb(),u.Wb(59,"mat-option",61),u.Qc(60),u.ic(61,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(62,"div",31),u.Wb(63,"div",62),u.Wb(64,"mat-form-field"),u.Wb(65,"input",63),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().currentType.retention_rule=t})),u.ic(66,"translate"),u.ic(67,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(68,"div",62),u.Wb(69,"mat-form-field"),u.Wb(70,"input",64),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().currentType.duration_current_use=t})),u.ic(71,"translate"),u.ic(72,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(73,"div",31),u.Wb(74,"div",34),u.Wb(75,"button",35),u.dc("click",(function(){return u.Dc(a),u.hc().saveType()})),u.Qc(76),u.ic(77,"translate"),u.Vb(),u.Oc(78,wr,4,7,"button",65),u.Oc(79,Ir,3,3,"button",46),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.zc(3),i=u.hc();u.pc("label",u.jc(1,38,"lang.doctype")),u.Db(4),u.oc("ngIf",!i.creationMode),u.Db(4),u.pc("title",u.jc(9,40,"lang.label")),u.pc("placeholder",u.jc(10,42,"lang.label")),u.oc("ngModel",i.currentType.description),u.Db(6),u.pc("title",u.jc(15,44,"lang.secondLevelAttached")),u.pc("placeholder",u.jc(16,46,"lang.secondLevelAttached")),u.oc("ngModel",i.currentType.doctypes_second_level_id),u.Db(3),u.oc("ngForOf",i.secondLevels),u.Db(4),u.pc("title",u.jc(22,48,"lang.processDelayDay")),u.pc("placeholder",u.jc(23,50,"lang.processDelayDay")),u.oc("ngModel",i.currentType.process_delay),u.Db(6),u.pc("title",u.jc(28,52,"lang.delay1")),u.pc("placeholder",u.jc(29,54,"lang.delay1")),u.oc("ngModel",i.currentType.delay1),u.Db(6),u.pc("title",u.jc(34,56,"lang.delay2")),u.pc("placeholder",u.jc(35,58,"lang.delay2")),u.oc("ngModel",i.currentType.delay2),u.Db(6),u.pc("title",u.jc(40,60,"lang.processMode")),u.pc("placeholder",u.jc(41,62,"lang.processMode")),u.oc("ngModel",i.currentType.process_mode),u.Db(3),u.oc("ngForOf",i.processModes),u.Db(5),u.Sc(" ",u.jc(48,64,"lang.archival")," "),u.Db(5),u.pc("title",u.jc(53,66,"lang.retentionFinalDisposition")),u.pc("placeholder",u.jc(54,68,"lang.retentionFinalDisposition")),u.oc("ngModel",i.currentType.retention_final_disposition),u.Db(5),u.Rc(u.jc(58,70,"lang.destruction")),u.Db(3),u.Rc(u.jc(61,72,"lang.conservation")),u.Db(5),u.pc("title",u.jc(66,74,"lang.retentionRule")),u.pc("placeholder",u.jc(67,76,"lang.retentionRule")),u.oc("ngModel",i.currentType.retention_rule),u.Db(5),u.pc("title",u.jc(71,78,"lang.durationCurrentUse")),u.pc("placeholder",u.jc(72,80,"lang.durationCurrentUse")),u.oc("ngModel",i.currentType.duration_current_use),u.Db(5),u.oc("disabled",!n.form.valid),u.Db(1),u.Rc(u.jc(77,82,"lang.save")),u.Db(2),u.oc("ngIf",!i.creationMode),u.Db(1),u.oc("ngIf",i.creationMode)}}function Rr(t,e){if(1&t&&(u.Wb(0,"mat-option",9),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("disabled",a.disabled)("value",a.type_id),u.Db(1),u.Sc(" ",a.description," ")}}var Tr,Pr,Qr=((Pr=function(){function t(e,a,n,i,o,r,c){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.dialog=i,this.headerService=o,this.appService=r,this.viewContainerRef=c,this.config={},this.doctypes=[],this.currentType=!1,this.currentSecondLevel=!1,this.currentFirstLevel=!1,this.firstLevels=!1,this.types=!1,this.secondLevels=!1,this.processModes=!1,this.loading=!1,this.creationMode=!1,this.newSecondLevel=!1,this.newFirstLevel=!1,this.displayedColumns=["label","use","mandatory","column"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.documentTypes")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/doctypes").subscribe((function(e){t.doctypes=e.structure,setTimeout((function(){$("#jstree").jstree({checkbox:{three_state:!1},core:{force_text:!0,themes:{name:"proton",responsive:!0},multiple:!1,data:t.doctypes,check_callback:function(t,e,a,n,i){if("move_node"===t)return void 0===i.ref||(!isNaN(parseFloat(e.id))&&isFinite(e.id)&&0===i.ref.id.indexOf("secondlevel_")||0===e.id.indexOf("secondlevel_")&&0===i.ref.id.indexOf("firstlevel_"))&&!(i.ref.children.indexOf(e.id)>-1)}},dnd:{is_draggable:function(t){return this.secondLevelSelected=t[0].id.replace("secondlevel_",""),!!(!isNaN(parseFloat(this.secondLevelSelected))&&isFinite(this.secondLevelSelected)||!isNaN(parseFloat(t[0].id))&&isFinite(t[0].id))}},plugins:["search","dnd","contextmenu"]});var e=!1;$("#jstree_search").keyup((function(){e&&clearTimeout(e),e=setTimeout((function(){var t=$("#jstree_search").val();$("#jstree").jstree(!0).search(t)}),250)})),$("#jstree").on("select_node.jstree",(function(e,a){!1===t.sidenavRight.opened&&t.sidenavRight.open(),t.loadDoctype(a,!1)})).on("move_node.jstree",(function(e,a){t.loadDoctype(a,!0)})).jstree()}),0),$("#jstree").jstree("select_node",t.doctypes[0]),t.loading=!1}),(function(e){t.notify.handleErrors(e)}))}},{key:"loadDoctype",value:function(t,e){var a=this;this.creationMode=!1,t.node.original.type_id?(this.currentFirstLevel=!1,this.currentSecondLevel=!1,this.http.get("../rest/doctypes/types/"+t.node.original.type_id).subscribe((function(n){a.currentType=n.doctype,a.secondLevels=n.secondLevel,a.processModes=["NORMAL","SVA","SVR"],e&&(a.currentType?(a.newSecondLevel=t.parent.replace("secondlevel_",""),!isNaN(parseFloat(a.newSecondLevel))&&isFinite(a.newSecondLevel)?a.currentType.doctypes_second_level_id!==a.newSecondLevel&&(a.currentType.doctypes_second_level_id=a.newSecondLevel,a.saveType()):alert(a.translate.instant("lang.cantMoveDoctype"))):alert(a.translate.instant("lang.noDoctypeSelected")))}),(function(t){a.notify.error(t.error.errors)}))):t.node.original.doctypes_second_level_id?(this.currentFirstLevel=!1,this.currentType=!1,this.http.get("../rest/doctypes/secondLevel/"+t.node.original.doctypes_second_level_id).subscribe((function(n){a.currentSecondLevel=n.secondLevel,a.firstLevels=n.firstLevel,e&&(a.currentSecondLevel?(a.newFirstLevel=t.parent.replace("firstlevel_",""),!isNaN(parseFloat(a.newFirstLevel))&&isFinite(a.newFirstLevel)?a.currentSecondLevel.doctypes_first_level_id!==a.newFirstLevel&&(a.currentSecondLevel.doctypes_first_level_id=a.newFirstLevel,a.saveSecondLevel()):alert(a.translate.instant("lang.cantMoveFirstLevel"))):alert(a.translate.instant("lang.noFirstLevelSelected")))}),(function(t){a.notify.error(t.error.errors)}))):(this.currentSecondLevel=!1,this.currentType=!1,this.http.get("../rest/doctypes/firstLevel/"+t.node.original.doctypes_first_level_id).subscribe((function(t){a.currentFirstLevel=t.firstLevel}),(function(t){a.notify.error(t.error.errors)})))}},{key:"resetDatas",value:function(){this.currentFirstLevel=!1,this.currentSecondLevel=!1,this.currentType=!1}},{key:"refreshTree",value:function(){$("#jstree").jstree(!0).settings.core.data=this.doctypes,$("#jstree").jstree("refresh")}},{key:"saveFirstLevel",value:function(){var t=this;this.creationMode?this.http.post("../rest/doctypes/firstLevel",this.currentFirstLevel).subscribe((function(e){t.resetDatas(),t.readMode(),t.doctypes=e.doctypeTree,t.refreshTree(),t.notify.success(t.translate.instant("lang.firstLevelAdded"))}),(function(e){t.notify.error(e.error.errors)})):this.http.put("../rest/doctypes/firstLevel/"+this.currentFirstLevel.doctypes_first_level_id,this.currentFirstLevel).subscribe((function(e){t.doctypes=e.doctypeTree,t.refreshTree(),t.notify.success(t.translate.instant("lang.firstLevelUpdated"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"saveSecondLevel",value:function(){var t=this;this.creationMode?this.http.post("../rest/doctypes/secondLevel",this.currentSecondLevel).subscribe((function(e){t.resetDatas(),t.readMode(),t.doctypes=e.doctypeTree,t.refreshTree(),t.notify.success(t.translate.instant("lang.secondLevelAdded"))}),(function(e){t.notify.error(e.error.errors)})):this.http.put("../rest/doctypes/secondLevel/"+this.currentSecondLevel.doctypes_second_level_id,this.currentSecondLevel).subscribe((function(e){t.doctypes=e.doctypeTree,t.refreshTree(),t.notify.success(t.translate.instant("lang.secondLevelUpdated"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"saveType",value:function(){var t=this;this.creationMode?this.http.post("../rest/doctypes/types",this.currentType).subscribe((function(e){t.resetDatas(),t.readMode(),t.doctypes=e.doctypeTree,t.refreshTree(),t.notify.success(t.translate.instant("lang.documentTypeAdded"))}),(function(e){t.notify.error(e.error.errors)})):this.http.put("../rest/doctypes/types/"+this.currentType.type_id,this.currentType).subscribe((function(e){t.doctypes=e.doctypeTree,t.refreshTree(),t.notify.success(t.translate.instant("lang.documentTypeUpdated"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"readMode",value:function(){this.creationMode=!1,$("#jstree").jstree("deselect_all"),$("#jstree").jstree("select_node",this.doctypes[0])}},{key:"removeFirstLevel",value:function(){var t=this;confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+this.currentFirstLevel.doctypes_first_level_label+" \xbb")&&this.http.delete("../rest/doctypes/firstLevel/"+this.currentFirstLevel.doctypes_first_level_id).subscribe((function(e){t.resetDatas(),t.readMode(),t.doctypes=e.doctypeTree,t.refreshTree(),t.doctypes[0]?$("#jstree").jstree("select_node",t.doctypes[0]):!0===t.sidenavRight.opened&&t.sidenavRight.close(),t.notify.success(t.translate.instant("lang.firstLevelDeleted"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"removeSecondLevel",value:function(){var t=this;confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+this.currentSecondLevel.doctypes_second_level_label+" \xbb")&&this.http.delete("../rest/doctypes/secondLevel/"+this.currentSecondLevel.doctypes_second_level_id).subscribe((function(e){t.resetDatas(),t.readMode(),t.doctypes=e.doctypeTree,t.refreshTree(),$("#jstree").jstree("select_node",t.doctypes[0]),t.notify.success(t.translate.instant("lang.secondLevelDeleted"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"removeType",value:function(){var t=this;confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+this.currentType.description+" \xbb")&&this.http.delete("../rest/doctypes/types/"+this.currentType.type_id).subscribe((function(e){0===e.deleted?(t.resetDatas(),t.readMode(),t.doctypes=e.doctypeTree,t.refreshTree(),$("#jstree").jstree("select_node",t.doctypes[0]),t.notify.success(t.translate.instant("lang.documentTypeDeleted"))):(t.config={panelClass:"maarch-modal",data:{count:e.deleted,types:e.doctypes}},t.dialogRef=t.dialog.open(Fr,t.config),t.dialogRef.afterClosed().subscribe((function(e){e&&t.http.put("../rest/doctypes/types/"+t.currentType.type_id+"/redirect",e).subscribe((function(e){t.resetDatas(),t.readMode(),t.doctypes=e.doctypeTree,t.refreshTree(),$("#jstree").jstree("select_node",t.doctypes[0]),t.notify.success(t.translate.instant("lang.documentTypeDeleted"))}),(function(e){t.notify.error(e.error.errors)})),t.dialogRef=null})))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"prepareDoctypeAdd",value:function(t){var e=this;this.currentFirstLevel=!1,this.currentSecondLevel=!1,this.currentType=!1,"firstLevel"===t&&(this.currentFirstLevel={}),"secondLevel"===t&&(this.currentSecondLevel={}),"doctype"===t&&(this.currentType={}),!1===this.sidenavRight.opened&&this.sidenavRight.open(),$("#jstree").jstree("deselect_all"),this.http.get("../rest/administration/doctypes/new").subscribe((function(t){e.firstLevels=t.firstLevel,e.secondLevels=t.secondLevel,e.processModes=["NORMAL","SVA","SVR"]}),(function(t){e.notify.error(t.error.errors)})),this.creationMode=t}}]),t}()).\u0275fac=function(t){return new(t||Pr)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(N.b),u.Qb(m.a),u.Qb(g.a),u.Qb(u.T))},Pr.\u0275cmp=u.Kb({type:Pr,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(pr,!0),u.Kc(fr,!0),u.Xc(H.a,!0),u.Xc(B.a,!0)),2&t&&(u.yc(a=u.ec())&&(e.sidenavRight=a.first),u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.paginator=a.first),u.yc(a=u.ec())&&(e.sort=a.first))},decls:22,vars:14,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",1,"col-md-4","col-sm-12",3,"mode","fixedInViewport","opened"],["snav2",""],[3,"label",4,"ngIf"],["mat-subheader",""],["mat-list-item","",3,"click"],["color","primary","mat-list-icon","",1,"fa-stack","fa-fw",2,"margin-left","-3px","font-size","18px"],[1,"fa","fa-folder"],[1,"fa","fa-plus",2,"position","absolute"],["mat-line",""],[1,"fa","fa-file"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],["matInput","","id","jstree_search","name","jstree_search","type","text",3,"placeholder"],["id","jstree"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],[3,"label"],[1,"form-horizontal",2,"overflow","hidden"],["firstLevelForm","ngForm"],["class","form-group",4,"ngIf"],[1,"form-group"],[1,"col-sm-12"],["matInput","","required","","name","doctypes_first_level_label","id","doctypes_first_level_label","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary",3,"disabled","click"],["type","button","mat-raised-button","","color","warn",3,"disabled","click",4,"ngIf"],["type","button","mat-raised-button","","color","default",3,"click",4,"ngIf"],["matInput","","required","","name","doctypes_first_level_id","id","doctypes_first_level_id","type","text","maxlength","255",3,"ngModel","title","placeholder","disabled","ngModelChange"],["type","button","mat-raised-button","","color","warn",3,"disabled","click"],["type","button","mat-raised-button","","color","default",3,"click"],["secondLevelForm","ngForm"],["matInput","","required","","name","doctypes_second_level_label","id","doctypes_second_level_label","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["id","doctypes_first_level_id","name","doctypes_first_level_id","required","",3,"title","placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","warn",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","default",3,"click",4,"ngIf"],["matInput","","required","","name","doctypes_second_level_id","id","doctypes_second_level_id","type","text","maxlength","255",3,"ngModel","title","placeholder","disabled","ngModelChange"],[3,"value"],["mat-raised-button","","color","warn",3,"disabled","click"],["mat-raised-button","","color","default",3,"click"],["typeForm","ngForm"],["matInput","","required","","name","description","id","description","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["id","doctypes_second_level_id","name","doctypes_second_level_id","required","",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","required","","name","process_delay","id","process_delay","type","number","pattern","^[0-9]*$",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","required","","name","delay1","id","delay1","type","number","pattern","^[0-9]*$",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","required","","name","delay2","id","delay2","type","number","maxlength","255","pattern","^[0-9]*$",3,"ngModel","title","placeholder","ngModelChange"],["id","process_mode","name","process_mode","required","",3,"title","placeholder","ngModel","ngModelChange"],["id","retention_final_disposition","name","retention_final_disposition",3,"title","placeholder","ngModel","ngModelChange"],["value",""],["value","destruction"],["value","conservation"],[1,"col-sm-6"],["matInput","","name","retention_rule","id","retention_rule","type","text","maxlength","15",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","duration_current_use","id","duration_current_use","type","text","pattern","^[0-9]*$",3,"ngModel","title","placeholder","ngModelChange"],["mat-raised-button","","color","warn",3,"disabled","matTooltip","click",4,"ngIf"],["matInput","","required","","name","type_id","id","type_id","type","text","maxlength","255",3,"ngModel","title","placeholder","disabled","ngModelChange"],["mat-raised-button","","color","warn",3,"disabled","matTooltip","click"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,mr,25,12,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,gr,2,0,"div",9),u.Oc(14,hr,8,7,"mat-card",10),u.Vb(),u.Vb(),u.Vb(),u.Wb(15,"mat-sidenav",11,12),u.Wb(17,"mat-nav-list"),u.Wb(18,"mat-tab-group"),u.Oc(19,Vr,18,17,"mat-tab",13),u.Oc(20,Or,25,25,"mat-tab",13),u.Oc(21,jr,80,84,"mat-tab",13),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading),u.Db(1),u.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!1),u.Db(4),u.oc("ngIf",e.currentFirstLevel||"firstLevel"==e.creationMode),u.Db(1),u.oc("ngIf",e.currentSecondLevel||"secondeLevel"==e.creationMode),u.Db(1),u.oc("ngIf",e.currentType||"doctype"==e.creationMode))},directives:[C.e,C.f,x.a,W.a,O.t,C.d,Rt.h,Ee.c,Rt.g,Rt.d,Tt.a,Rt.c,j.l,w.c,I.a,S.c,k.b,Ee.a,c.K,c.v,c.w,c.d,c.F,c.p,c.u,c.x,R.b,it.a,O.s,j.p,c.A,c.B,Ae.a,Ae.c,Ae.g,Ae.h,Qt.b],pipes:[p.d],encapsulation:2}),Pr),Fr=((Tr=function t(e,a,n){_classCallCheck(this,t),this.http=e,this.data=a,this.dialogRef=n}).\u0275fac=function(t){return new(t||Tr)(u.Qb(f.b),u.Qb(N.a),u.Qb(N.h))},Tr.\u0275cmp=u.Kb({type:Tr,selectors:[["ng-component"]],decls:25,vars:19,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["changeDoctypeForm","ngForm"],["role","alert",1,"alert-message","alert-message-info"],["color","primary","mat-list-icon","",1,"fa","fa-file","fa-2x"],["mat-line",""],["id","new_type_id","name","new_type_id","required","",3,"title","placeholder","ngModel","ngModelChange"],[3,"disabled","value",4,"ngFor","ngForOf"],["mat-raised-button","","color","warn","type","submit",3,"disabled","click"],[3,"disabled","value"]],template:function(t,e){if(1&t&&(u.Wb(0,"div",0),u.Wb(1,"h2",1),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"mat-dialog-content"),u.Wb(5,"form",null,2),u.Wb(7,"div",3),u.Wb(8,"mat-list"),u.Wb(9,"mat-list-item"),u.Rb(10,"mat-icon",4),u.Wb(11,"p",5),u.Wb(12,"b"),u.Qc(13),u.Vb(),u.Qc(14),u.ic(15,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(16,"mat-form-field"),u.Wb(17,"mat-select",6),u.dc("ngModelChange",(function(t){return e.data.new_type_id=t})),u.ic(18,"translate"),u.ic(19,"translate"),u.Oc(20,Rr,2,3,"mat-option",7),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(21,"mat-dialog-actions"),u.Wb(22,"button",8),u.dc("click",(function(){return e.dialogRef.close(e.data)})),u.Qc(23),u.ic(24,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t){var a=u.zc(6);u.Db(2),u.Rc(u.jc(3,9,"lang.documentTypeReplacement")),u.Db(11),u.Rc(e.data.count),u.Db(1),u.Sc(" ",u.jc(15,11,"lang.documents")," "),u.Db(3),u.pc("title",u.jc(18,13,"lang.transferToDoctype")),u.pc("placeholder",u.jc(19,15,"lang.transferToDoctype")),u.oc("ngModel",e.data.new_type_id),u.Db(3),u.oc("ngForOf",e.data.types),u.Db(2),u.oc("disabled",!a.form.valid),u.Db(1),u.Rc(u.jc(24,17,"lang.delete"))}},directives:[N.i,N.f,c.K,c.v,c.w,Rt.a,Rt.d,Tt.a,Rt.c,j.l,S.c,it.a,c.F,c.u,c.x,O.s,N.c,R.b,j.p],pipes:[p.d],encapsulation:2}),Tr),Lr=["adminMenuTemplate"];function Er(t,e){1&t&&(u.Wb(0,"mat-nav-list"),u.Wb(1,"h3",11),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"a",12),u.Rb(5,"mat-icon",13),u.Wb(6,"p",14),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(2),u.Rc(u.jc(3,2,"lang.actions")),u.Db(5),u.Sc(" ",u.jc(8,4,"lang.add")," "))}function Ar(t,e){1&t&&(u.Wb(0,"div",15),u.Rb(1,"mat-spinner",16),u.Vb())}function Ur(t,e){1&t&&(u.Wb(0,"mat-header-cell",38),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.label")))}function zr(t,e){if(1&t&&(u.Wb(0,"mat-cell",39),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.title," ")}}function $r(t,e){if(1&t&&(u.Wb(0,"mat-header-cell",38),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=u.hc(2);u.Ib("hide-for-mobile",a.appService.getViewMode()),u.Db(1),u.Rc(u.jc(2,3,"lang.description"))}}function Nr(t,e){if(1&t&&(u.Wb(0,"mat-cell",39),u.Qc(1),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.Ib("hide-for-mobile",n.appService.getViewMode()),u.Db(1),u.Sc(" ",a.description," ")}}function Hr(t,e){1&t&&(u.Wb(0,"mat-header-cell",38),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.type")))}function Br(t,e){if(1&t&&(u.Wb(0,"mat-cell",39),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.typeLabel," ")}}function Xr(t,e){1&t&&u.Rb(0,"mat-header-cell",40)}function Gr(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-cell",41),u.Wb(1,"button",42),u.dc("click",(function(t){u.Dc(a);var n=e.$implicit,i=u.hc(2);return t.stopPropagation(),i.delete(n)})),u.ic(2,"translate"),u.Rb(3,"mat-icon",43),u.Vb(),u.Vb()}2&t&&(u.Db(1),u.pc("matTooltip",u.jc(2,1,"lang.delete")))}function qr(t,e){1&t&&u.Rb(0,"mat-header-row")}function Kr(t,e){1&t&&(u.Rb(0,"mat-row",44),u.ic(1,"translate")),2&t&&(u.qc("routerLink","/administration/diffusionModels/",e.$implicit.id,""),u.pc("matTooltip",u.jc(1,2,"lang.view")))}function Jr(t,e){if(1&t&&(u.Wb(0,"mat-card",17),u.Wb(1,"div",18),u.Wb(2,"div",19),u.Wb(3,"mat-form-field"),u.Rb(4,"input",20),u.ic(5,"translate"),u.Vb(),u.Vb(),u.Wb(6,"div",19),u.Rb(7,"mat-paginator",21,22),u.Vb(),u.Vb(),u.Wb(9,"mat-table",23,24),u.Ub(11,25),u.Oc(12,Ur,3,3,"mat-header-cell",26),u.Oc(13,zr,2,1,"mat-cell",27),u.Tb(),u.Ub(14,28),u.Oc(15,$r,3,5,"mat-header-cell",29),u.Oc(16,Nr,2,3,"mat-cell",30),u.Tb(),u.Ub(17,31),u.Oc(18,Hr,3,3,"mat-header-cell",26),u.Oc(19,Br,2,1,"mat-cell",27),u.Tb(),u.Ub(20,32),u.Oc(21,Xr,1,0,"mat-header-cell",33),u.Oc(22,Gr,4,3,"mat-cell",34),u.Tb(),u.Oc(23,qr,1,0,"mat-header-row",35),u.Oc(24,Kr,2,4,"mat-row",36),u.Vb(),u.Wb(25,"div",37),u.Qc(26),u.ic(27,"translate"),u.Vb(),u.Vb()),2&t){var a=u.hc();u.Db(4),u.pc("placeholder",u.jc(5,10,"lang.filterBy")),u.oc("formControl",a.adminService.getFilterField()),u.Db(3),u.oc("length",100)("hidePageSize",!0)("pageSize",10),u.Db(2),u.oc("dataSource",a.adminService.getDataSource()),u.Db(14),u.oc("matHeaderRowDef",a.displayedColumns),u.Db(1),u.oc("matRowDefColumns",a.displayedColumns),u.Db(2),u.Tc("",a.listTemplates.length," ",u.jc(27,12,"lang.workflowModels"),"")}}var Yr,Zr=((Yr=function(){function t(e,a,n,i,o,r,c,l,s){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.dialog=i,this.headerService=o,this.appService=r,this.functions=c,this.adminService=l,this.viewContainerRef=s,this.loading=!1,this.listTemplates=[],this.listTemplatesForAssign=[],this.displayedColumns=["title","description","typeLabel","actions"],this.filterColumns=["title","description","typeLabel"]}return _createClass(t,[{key:"ngOnInit",value:function(){return Object(yt.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.workflowModels")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,t.next=5,this.getListemplates();case 5:this.loadList(),this.loading=!1;case 7:case"end":return t.stop()}}),t,this)})))}},{key:"getListemplates",value:function(){var t=this;return new Promise((function(e,a){t.http.get("../rest/listTemplates").pipe(Object(s.a)((function(e){return e.listTemplates=e.listTemplates.filter((function(t){return null===t.entityId&&["visaCircuit","opinionCircuit"].indexOf(t.type)>-1})).map((function(e){return Object.assign(Object.assign({},e),{typeLabel:t.translate.instant("lang."+e.type)})})),e.listTemplates})),Object(kt.tap)((function(a){t.listTemplates=a,e(!0)})),Object(Dt.a)((function(){return t.loading=!1})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(X.of)(!1)}))).subscribe()}))}},{key:"loadList",value:function(){var t=this;setTimeout((function(){t.adminService.setDataSource("admin_listmodels",t.listTemplates,t.sort,t.paginator,t.filterColumns)}),0)}},{key:"delete",value:function(t){var e=this;this.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete"),msg:this.translate.instant("lang.confirmAction")}}).afterClosed().pipe(Object(J.a)((function(t){return"ok"===t})),Object(Y.a)((function(){return e.http.delete("../rest/listTemplates/"+t.id)})),Object(kt.tap)((function(){e.listTemplates=e.listTemplates.filter((function(e){return e.id!==t.id})),e.notify.success(e.translate.instant("lang.diffusionModelDeleted")),e.loadList()})),Object(b.a)((function(t){return e.notify.handleSoftErrors(t),Object(X.of)(!1)}))).subscribe()}}]),t}()).\u0275fac=function(t){return new(t||Yr)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(N.b),u.Qb(m.a),u.Qb(g.a),u.Qb(D.a),u.Qb(jt),u.Qb(u.T))},Yr.\u0275cmp=u.Kb({type:Yr,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(Lr,!0),u.Xc(H.a,!0),u.Xc(B.a,!0)),2&t&&(u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.paginator=a.first),u.yc(a=u.ec())&&(e.sort=a.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/diffusionModels/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row",2,"margin","0px"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSortDisableClear","","matSort","",3,"dataSource"],["table",""],["matColumnDef","title"],["mat-sort-header","","style","flex:2;",4,"matHeaderCellDef"],["style","flex:2;",4,"matCellDef"],["matColumnDef","description"],["mat-sort-header","","style","flex:2;",3,"hide-for-mobile",4,"matHeaderCellDef"],["style","flex:2;",3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","typeLabel"],["matColumnDef","actions"],["style","flex:1;",4,"matHeaderCellDef"],["style","justify-content: flex-end;flex:1;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],[2,"flex","1"],[2,"justify-content","flex-end","flex","1"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,Er,9,6,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,Ar,2,0,"div",9),u.Oc(14,Jr,28,14,"mat-card",10),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading))},directives:[C.e,C.f,x.a,W.a,O.t,Rt.h,Rt.g,Rt.d,o.f,Tt.a,Rt.c,j.l,w.c,I.a,S.c,k.b,c.d,c.u,c.j,H.a,q.o,B.a,q.c,q.i,q.b,q.k,q.n,q.h,B.b,q.a,R.b,Qt.b,q.j,q.m,o.d],pipes:[p.d],encapsulation:2}),Yr),tc=a("jbvq"),ec=a("XkWp"),ac=["snav2"],nc=["appVisaWorkflow"],ic=["appAvisWorkflow"];function oc(t,e){1&t&&(u.Wb(0,"div",15),u.Rb(1,"mat-spinner",16),u.Vb())}function rc(t,e){if(1&t&&(u.Wb(0,"mat-option",27),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a.id),u.Db(1),u.Sc(" ",a.label," ")}}function cc(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",28),u.dc("click",(function(){return u.Dc(a),u.hc(2).cancelModification()})),u.Qc(1),u.ic(2,"translate"),u.Vb()}2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.cancel")))}function lc(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-card",17),u.Wb(1,"mat-tab-group"),u.Wb(2,"mat-tab",12),u.ic(3,"translate"),u.Wb(4,"form",18,19),u.dc("ngSubmit",(function(){return u.Dc(a),u.hc().onSubmit()})),u.Wb(6,"mat-form-field"),u.Wb(7,"mat-select",20),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().diffusionModel.type=t})),u.ic(8,"translate"),u.Oc(9,rc,2,2,"mat-option",21),u.Vb(),u.Vb(),u.Wb(10,"mat-form-field"),u.Wb(11,"input",22),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().diffusionModel.title=t})),u.ic(12,"translate"),u.ic(13,"translate"),u.Vb(),u.Vb(),u.Wb(14,"mat-form-field"),u.Wb(15,"textarea",23),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().diffusionModel.description=t})),u.ic(16,"translate"),u.ic(17,"translate"),u.Vb(),u.Vb(),u.Wb(18,"div",24),u.Wb(19,"button",25),u.Qc(20),u.ic(21,"translate"),u.Vb(),u.Oc(22,cc,3,3,"button",26),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc();u.Db(2),u.pc("label",u.jc(3,14,"lang.informations")),u.Db(5),u.pc("placeholder",u.jc(8,16,"lang.diffusionType")),u.oc("ngModel",n.diffusionModel.type)("disabled",!n.creationMode),u.Db(2),u.oc("ngForOf",n.itemTypeList),u.Db(2),u.pc("title",u.jc(12,18,"lang.label")),u.pc("placeholder",u.jc(13,20,"lang.label")),u.oc("ngModel",n.diffusionModel.title),u.Db(4),u.pc("title",u.jc(16,22,"lang.description")),u.pc("placeholder",u.jc(17,24,"lang.description")),u.oc("ngModel",n.diffusionModel.description),u.Db(4),u.oc("disabled",!n.isValidForm()),u.Db(1),u.Rc(u.jc(21,26,"lang.save")),u.Db(2),u.oc("ngIf",!n.creationMode)}}function sc(t,e){1&t&&u.Rb(0,"app-visa-workflow",29,30),2&t&&u.oc("showListModels",!1)("showComment",!1)("adminMode",!0)}function dc(t,e){1&t&&u.Rb(0,"app-avis-workflow",31,32),2&t&&u.oc("showListModels",!1)("adminMode",!0)}var bc,uc=((bc=function(){function t(e,a,n,i,o,r,c){_classCallCheck(this,t),this.translate=e,this.http=a,this.route=n,this.router=i,this.notify=o,this.headerService=r,this.appService=c,this.loading=!0,this.diffusionModel={title:"",description:"",type:"opinionCircuit",items:[]},this.diffusionModelClone={},this.itemTypeList=[{id:"visaCircuit",label:this.translate.instant("lang.visaCircuit")},{id:"opinionCircuit",label:this.translate.instant("lang.opinionCircuit")}],this.listDiffModified=!1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.route.params.subscribe((function(e){return Object(yt.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e.id){t.next=4;break}this.headerService.setHeader(this.translate.instant("lang.diffusionModelCreation")),this.creationMode=!0,this.loading=!1,t.next=8;break;case 4:return this.creationMode=!1,t.next=7,this.getTemplate(e.id);case 7:"visaCircuit"===this.diffusionModel.type?this.loadVisaCircuit():this.loadOpinionCircuit();case 8:case"end":return t.stop()}}),t,this)})))}))}},{key:"getTemplate",value:function(t){var e=this;return new Promise((function(a,n){e.http.get("../rest/listTemplates/"+t).pipe(Object(d.a)((function(n){e.diffusionModel=n.listTemplate,e.diffusionModel.id=t,a(!0)})),Object(Dt.a)((function(){return e.loading=!1})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(r.a)(!1)}))).subscribe()}))}},{key:"loadVisaCircuit",value:function(){var t=this,e={id:this.diffusionModel.id,type:"entity"};setTimeout((function(){return Object(yt.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.appVisaWorkflow.resetWorkflow(),t.next=3,this.appVisaWorkflow.addItemToWorkflow(e,!1);case 3:this.diffusionModel.items=this.appVisaWorkflow.getWorkflow(),this.diffusionModelClone=JSON.parse(JSON.stringify(this.diffusionModel));case 5:case"end":return t.stop()}}),t,this)})))}),0)}},{key:"loadOpinionCircuit",value:function(){var t=this,e={id:this.diffusionModel.id,type:"entity"};setTimeout((function(){return Object(yt.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.appAvisWorkflow.resetWorkflow(),t.next=3,this.appAvisWorkflow.addItemToWorkflow(e);case 3:this.diffusionModel.items=this.appAvisWorkflow.getWorkflow(),this.diffusionModelClone=JSON.parse(JSON.stringify(this.diffusionModel));case 5:case"end":return t.stop()}}),t,this)})))}),0)}},{key:"onSubmit",value:function(){this.creationMode?this.createTemplate():this.updateTemplate()}},{key:"createTemplate",value:function(){var t=this;this.http.post("../rest/listTemplates?admin=true",this.formatCircuit()).pipe(Object(d.a)((function(){t.router.navigate(["/administration/diffusionModels"]),t.notify.success(t.translate.instant("lang.diffusionModelAdded"))})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(r.a)(!1)}))).subscribe()}},{key:"updateTemplate",value:function(){var t=this;this.http.put("../rest/listTemplates/"+this.diffusionModel.id,this.formatCircuit()).pipe(Object(d.a)((function(){t.router.navigate(["/administration/diffusionModels"]),t.notify.success(t.translate.instant("lang.diffusionModelUpdated"))})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(r.a)(!1)}))).subscribe()}},{key:"formatCircuit",value:function(){return"visaCircuit"===this.diffusionModel.type?(this.diffusionModel.items=this.appVisaWorkflow.getWorkflow().map((function(t,e){return{id:t.item_id,type:"user",mode:t.requested_signature?"sign":"visa",sequence:e}})),this.diffusionModel):(this.diffusionModel.items=this.appAvisWorkflow.getWorkflow().map((function(t,e){return{id:t.item_id,type:"user",mode:"avis",sequence:e}})),this.diffusionModel)}},{key:"checkPrivileges",value:function(t){var e=!0;return t.forEach((function(t){t.hasPrivilege||(e=!1)})),e}},{key:"isValidForm",value:function(){return"visaCircuit"===this.diffusionModel.type?void 0!==this.appVisaWorkflow&&this.appVisaWorkflow.getWorkflow().length>0&&""!==this.diffusionModel.title&&this.checkPrivileges(this.appVisaWorkflow.getWorkflow()):void 0!==this.appAvisWorkflow&&this.appAvisWorkflow.getWorkflow().length>0&&""!==this.diffusionModel.title&&this.checkPrivileges(this.appAvisWorkflow.getWorkflow())}},{key:"cancelModification",value:function(){this.diffusionModel=JSON.parse(JSON.stringify(this.diffusionModelClone)),"visaCircuit"===this.diffusionModel.type?this.loadVisaCircuit():this.loadOpinionCircuit()}}]),t}()).\u0275fac=function(t){return new(t||bc)(u.Qb(p.e),u.Qb(f.b),u.Qb(o.a),u.Qb(o.c),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a))},bc.\u0275cmp=u.Kb({type:bc,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(ac,!0),u.Xc(nc,!0),u.Xc(ic,!0)),2&t&&(u.yc(a=u.ec())&&(e.sidenavRight=a.first),u.yc(a=u.ec())&&(e.appVisaWorkflow=a.first),u.yc(a=u.ec())&&(e.appAvisWorkflow=a.first))},decls:21,vars:16,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",1,"col-md-4","col-xs-11",3,"mode","fixedInViewport","opened"],["snav2",""],[3,"label"],[3,"showListModels","showComment","adminMode",4,"ngIf"],[3,"showListModels","adminMode",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[3,"ngSubmit"],["diffusionModelForm","ngForm"],["id","type","name","type",3,"placeholder","ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","name","title","maxlength","255","required","",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","name","description","matTextareaAutosize","","matAutosizeMinRows","1","matAutosizeMaxRows","5","maxlength","255",3,"title","placeholder","ngModel","ngModelChange"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary",3,"disabled"],["mat-raised-button","","type","button","color","default",3,"click",4,"ngIf"],[3,"value"],["mat-raised-button","","type","button","color","default",3,"click"],[3,"showListModels","showComment","adminMode"],["appVisaWorkflow",""],[3,"showListModels","adminMode"],["appAvisWorkflow",""]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Wb(1,"mat-sidenav-content"),u.Wb(2,"div",1),u.Wb(3,"div",2),u.Wb(4,"div",3),u.Rb(5,"header-left"),u.Vb(),u.Wb(6,"div",4),u.Rb(7,"header-right"),u.Vb(),u.Vb(),u.Rb(8,"div",5),u.Vb(),u.Wb(9,"div",6),u.Wb(10,"div",7),u.Oc(11,oc,2,0,"div",8),u.Oc(12,lc,23,28,"mat-card",9),u.Vb(),u.Vb(),u.Vb(),u.Wb(13,"mat-sidenav",10,11),u.Wb(15,"mat-nav-list"),u.Wb(16,"mat-tab-group"),u.Wb(17,"mat-tab",12),u.ic(18,"translate"),u.Oc(19,sc,2,3,"app-visa-workflow",13),u.Oc(20,dc,2,2,"app-avis-workflow",14),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(3),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading),u.Db(1),u.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!e.appService.getViewMode()),u.Db(4),u.pc("label",u.jc(18,14,"lang."+e.diffusionModel.type)),u.Db(2),u.oc("ngIf","visaCircuit"===e.diffusionModel.type),u.Db(1),u.oc("ngIf","opinionCircuit"===e.diffusionModel.type))},directives:[C.e,C.f,x.a,W.a,O.t,C.d,Rt.h,Ee.c,Ee.a,w.c,I.a,c.K,c.v,c.w,S.c,it.a,c.u,c.x,O.s,k.b,c.d,c.p,c.F,k.d,R.b,j.p,tc.a,ec.a],pipes:[p.d],styles:[".mat-list-item[draggable=false][_ngcontent-%COMP%]:hover{background:inherit}.mat-list-item[draggable=false][_ngcontent-%COMP%]{cursor:not-allowed!important}.mat-list-item[draggable=true][_ngcontent-%COMP%]{cursor:pointer}.mat-list-item[draggable=true][_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:move}.primaryColor[_ngcontent-%COMP%]{color:#135f7f}.redColor[_ngcontent-%COMP%]{color:#e4342b}"]}),bc),pc=["listFilter"];function fc(t,e){1&t&&(u.Wb(0,"div",13),u.Rb(1,"mat-spinner"),u.Vb())}function mc(t,e){if(1&t&&(u.Wb(0,"mat-option",14),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a),u.Db(1),u.Sc(" ",a," ")}}function gc(t,e){if(1&t&&(u.Wb(0,"mat-option",14),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a),u.Db(1),u.Sc(" ",a," ")}}function hc(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",15),u.Wb(1,"mat-form-field",5),u.Wb(2,"mat-label"),u.Qc(3),u.ic(4,"translate"),u.Vb(),u.Wb(5,"mat-select",16),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().exportModel.delimiter=t})),u.ic(6,"translate"),u.Oc(7,gc,2,2,"mat-option",7),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc();u.Db(3),u.Rc(u.jc(4,5,"lang.delimiter")),u.Db(2),u.pc("placeholder",u.jc(6,7,"lang.delimiter")),u.oc("ngModel",n.exportModel.delimiter)("disabled","csv"!=n.exportModel.format),u.Db(2),u.oc("ngForOf",n.delimiters)}}var vc,yc=((vc=function(){function t(e,a,n,i,o,r){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.data=i,this.localStorage=o,this.headerService=r,this.loading=!1,this.loadingExport=!1,this.delimiters=[";",",","TAB"],this.formats=["csv"],this.exportModel={delimiter:";",format:"csv"}}return _createClass(t,[{key:"ngOnInit",value:function(){return Object(yt.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.setConfiguration();case 1:case"end":return t.stop()}}),t,this)})))}},{key:"exportData",value:function(){var t=this;this.localStorage.save("exportEntities_"+this.headerService.user.id,JSON.stringify(this.exportModel)),this.loadingExport=!0,this.http.put("../rest/entities/export",this.exportModel,{responseType:"blob"}).pipe(Object(d.a)((function(e){if("text/html"!==e.type){var a,n,i,o,r=document.createElement("a");r.href=window.URL.createObjectURL(e),n=(a=new Date).getDate(),i=a.getMonth()+1,o=a.getFullYear(),n<10&&(n="0"+n),i<10&&(i="0"+i),a=n+"-"+i+"-"+o,r.setAttribute("download","export_entities_maarch_"+a+"."+t.exportModel.format.toLowerCase()),document.body.appendChild(r),r.click()}else alert(t.translate.instant("lang.tooMuchDatas"))})),Object(Dt.a)((function(){return t.loadingExport=!1})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"setConfiguration",value:function(){null!==this.localStorage.get("exportEntitiesFields_"+this.headerService.user.id)&&(this.exportModel.delimiter=JSON.parse(this.localStorage.get("exportEntitiesFields_"+this.headerService.user.id)).delimiter)}}]),t}()).\u0275fac=function(t){return new(t||vc)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(N.a),u.Qb(tt.a),u.Qb(m.a))},vc.\u0275cmp=u.Kb({type:vc,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&u.Kc(pc,!0),2&t&&u.yc(a=u.ec())&&(e.listFilter=a.first)},decls:24,vars:23,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["mat-dialog-content",""],["class","loader",4,"ngIf"],[1,"row"],["appearance","outline"],[3,"placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","col-md-9",4,"ngIf"],[1,"divider-modal"],["mat-dialog-actions","",1,"actions"],["mat-raised-button","","mat-button","","color","primary",3,"click"],["mat-raised-button","","mat-button","",3,"mat-dialog-close"],[1,"loader"],[3,"value"],[1,"col-md-9"],[3,"placeholder","ngModel","disabled","ngModelChange"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"h1",1),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"div",2),u.Oc(5,fc,2,0,"div",3),u.Wb(6,"div",4),u.Wb(7,"div"),u.Wb(8,"mat-form-field",5),u.Wb(9,"mat-label"),u.Qc(10),u.ic(11,"translate"),u.Vb(),u.Wb(12,"mat-select",6),u.dc("ngModelChange",(function(t){return e.exportModel.format=t})),u.ic(13,"translate"),u.Oc(14,mc,2,2,"mat-option",7),u.Vb(),u.Vb(),u.Vb(),u.Oc(15,hc,8,9,"div",8),u.Vb(),u.Vb(),u.Rb(16,"span",9),u.Wb(17,"div",10),u.Wb(18,"button",11),u.dc("click",(function(){return e.exportData()})),u.Qc(19),u.ic(20,"translate"),u.Vb(),u.Wb(21,"button",12),u.Qc(22),u.ic(23,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(2),u.Rc(u.jc(3,13,"lang.exportDatas")),u.Db(3),u.oc("ngIf",e.loadingExport),u.Db(2),u.Ib("col-md-12","csv"!=e.exportModel.format)("col-md-3","csv"==e.exportModel.format),u.Db(3),u.Rc(u.jc(11,15,"lang.format")),u.Db(2),u.pc("placeholder",u.jc(13,17,"lang.format")),u.oc("ngModel",e.exportModel.format),u.Db(2),u.oc("ngForOf",e.formats),u.Db(1),u.oc("ngIf","csv"==e.exportModel.format),u.Db(4),u.Rc(u.jc(20,19,"lang.toExport")),u.Db(3),u.Rc(u.jc(23,21,"lang.cancel")))},directives:[N.i,N.f,O.t,S.c,S.g,it.a,c.u,c.x,O.s,N.c,R.b,N.d,w.c,j.p],pipes:[p.d],styles:[".mat-dialog-container{position:relative}.mat-dialog-content[_ngcontent-%COMP%]{min-height:150px;padding-bottom:10px;overflow-x:hidden}.actions[_ngcontent-%COMP%], .loader[_ngcontent-%COMP%]{justify-content:center}.loader[_ngcontent-%COMP%]{position:absolute;display:flex;width:100%;left:0;top:0;height:100%;background:hsla(0,0%,100%,.6);z-index:1;align-items:center}"]}),vc),Dc=a("y9tK"),Vc=["snav2"],Cc=["adminMenuTemplate"],xc=["paginatorUsers"],Mc=["paginatorTemplates"],Wc=["tableUsers"],Oc=["tableTemplates"],_c=["appDiffusionsList"],Sc=["appVisaWorkflow"],kc=["appAvisWorkflow"];function wc(t,e){if(1&t){var a=u.Xb();u.Wb(0,"a",47),u.dc("click",(function(){u.Dc(a);var t=u.hc(2);return u.zc(16).open(),t.prepareEntityAdd()})),u.Rb(1,"mat-icon",50),u.Wb(2,"p",49),u.Qc(3),u.ic(4,"translate"),u.Vb(),u.Vb()}2&t&&(u.Db(3),u.Sc(" ",u.jc(4,1,"lang.add")," "))}var Ic=function(t){return{opacity:t}};function jc(t,e){if(1&t){var a=u.Xb();u.Wb(0,"a",52),u.Wb(1,"mat-icon",53),u.Wb(2,"mat-slide-toggle",54),u.dc("click",(function(){u.Dc(a);var t=u.hc().$implicit;return u.hc(2).toggleRole(t),!1})),u.Vb(),u.Vb(),u.Wb(3,"p",55),u.dc("click",(function(){u.Dc(a);var t=u.hc().$implicit;return u.hc(2).toggleRole(t),!1})),u.Qc(4),u.Vb(),u.Vb()}if(2&t){var n=u.hc().$implicit;u.Db(2),u.oc("checked",n.available),u.Db(1),u.oc("ngStyle",u.vc(3,Ic,n.available?"":"0.5")),u.Db(1),u.Sc(" ",n.label," ")}}function Rc(t,e){if(1&t&&(u.Ub(0),u.Oc(1,jc,5,5,"a",51),u.Tb()),2&t){var a=e.$implicit;u.Db(1),u.oc("ngIf","dest"!=a.id&&"cc"!=a.id)}}function Tc(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-nav-list"),u.Wb(1,"h3",45),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Oc(4,wc,5,3,"a",46),u.Wb(5,"a",47),u.dc("click",(function(){return u.Dc(a),u.hc().openExportModal()})),u.Rb(6,"mat-icon",48),u.Wb(7,"p",49),u.Qc(8),u.ic(9,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Rb(10,"mat-divider"),u.Wb(11,"mat-nav-list"),u.Wb(12,"h3",45),u.Qc(13),u.ic(14,"translate"),u.Vb(),u.Oc(15,Rc,2,1,"ng-container",21),u.Vb()}if(2&t){var n=u.hc();u.Db(2),u.Rc(u.jc(3,5,"lang.actions")),u.Db(2),u.oc("ngIf",!n.creationMode),u.Db(4),u.Sc(" ",u.jc(9,7,"lang.toExport")," "),u.Db(5),u.Rc(u.jc(14,9,"lang.additionalRoles")),u.Db(2),u.oc("ngForOf",n.listTemplateRoles)}}function Pc(t,e){1&t&&(u.Wb(0,"div",56),u.Rb(1,"mat-spinner",57),u.Vb())}function Qc(t,e){1&t&&(u.Wb(0,"mat-hint"),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.entityTreeInfo")))}function Fc(t,e){1&t&&(u.Wb(0,"mat-hint"),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.entityTreeInfoCreation")))}function Lc(t,e){if(1&t&&(u.Wb(0,"mat-card",58),u.Wb(1,"mat-form-field"),u.Rb(2,"input",59),u.ic(3,"translate"),u.Oc(4,Qc,3,3,"mat-hint",60),u.Oc(5,Fc,3,3,"mat-hint",60),u.Vb(),u.Rb(6,"div",61),u.Wb(7,"div",62),u.Qc(8),u.ic(9,"translate"),u.Vb(),u.Vb()),2&t){var a=u.hc();u.Db(2),u.pc("placeholder",u.jc(3,5,"lang.searchEntities")),u.Db(2),u.oc("ngIf",!a.creationMode),u.Db(1),u.oc("ngIf",a.creationMode),u.Db(3),u.Tc(" ",a.entities.length," ",u.jc(9,7,"lang.entities"),"")}}function Ec(t,e){if(1&t&&(u.Wb(0,"mat-option",64),u.Qc(1),u.Vb()),2&t){var a=u.hc().$implicit;u.oc("value",a.entity_id),u.Db(1),u.Sc(" ",a.entity_label," ")}}function Ac(t,e){if(1&t&&(u.Ub(0),u.Oc(1,Ec,2,2,"mat-option",63),u.Tb()),2&t){var a=e.$implicit,n=u.hc();u.Db(1),u.oc("ngIf",!a.state.disabled&&a.entity_id!=n.currentEntity.entity_id||n.currentEntity.parent_entity_id==a.entity_id)}}function Uc(t,e){if(1&t&&(u.Wb(0,"mat-option",64),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a.id),u.Db(1),u.Sc(" ",a.label," ")}}function zc(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",16),u.Wb(1,"div",17),u.Wb(2,"mat-form-field"),u.Wb(3,"input",65),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().currentEntity.id=t})),u.ic(4,"translate"),u.ic(5,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc();u.Db(3),u.pc("title",u.jc(4,3,"lang.technicalId")),u.pc("placeholder",u.jc(5,5,"lang.technicalId")),u.oc("ngModel",n.currentEntity.id)}}function $c(t,e){1&t&&(u.Rb(0,"input",69),u.ic(1,"translate"),u.ic(2,"translate")),2&t&&(u.pc("title",u.jc(1,2,"lang.siretCode")),u.pc("placeholder",u.jc(2,4,"lang.siretCode")))}function Nc(t,e){if(1&t){var a=u.Xb();u.Wb(0,"input",70),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).currentEntity.business_id=t})),u.ic(1,"translate"),u.ic(2,"translate"),u.Vb()}if(2&t){var n=u.hc(2);u.pc("title",u.jc(1,3,"lang.siretCode")),u.pc("placeholder",u.jc(2,5,"lang.siretCode")),u.oc("ngModel",n.currentEntity.business_id)}}function Hc(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",71),u.dc("click",(function(){return u.Dc(a),u.hc(2).addEntityToAnnuary()})),u.Rb(1,"mat-icon",72),u.Vb()}}function Bc(t,e){if(1&t&&(u.Wb(0,"div",16),u.Wb(1,"div",17),u.Wb(2,"mat-form-field"),u.Oc(3,$c,3,6,"input",66),u.Oc(4,Nc,3,7,"input",67),u.Oc(5,Hc,2,0,"button",68),u.Vb(),u.Vb(),u.Vb()),2&t){var a=u.hc();u.Db(3),u.oc("ngIf",!a.currentEntity.canSynchronizeSiret),u.Db(1),u.oc("ngIf",a.currentEntity.canSynchronizeSiret),u.Db(1),u.oc("ngIf",a.currentEntity.canSynchronizeSiret)}}function Xc(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",73),u.dc("click",(function(){return u.Dc(a),u.hc().removeEntity()})),u.Qc(1),u.ic(2,"translate"),u.Vb()}if(2&t){var n=u.hc(),i=u.zc(21);u.oc("disabled",!i.form.valid||n.currentEntity.hasChildren),u.Db(1),u.Rc(u.jc(2,2,"lang.delete"))}}function Gc(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",74),u.dc("click",(function(){return u.Dc(a),u.hc().readMode()})),u.Qc(1),u.ic(2,"translate"),u.Vb()}2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.cancel")))}function qc(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",81),u.dc("click",(function(){return u.Dc(a),u.hc(3).deleteDiffList()})),u.Qc(1),u.ic(2,"translate"),u.Vb()}2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.delete")))}function Kc(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",16),u.Wb(1,"div",40),u.Wb(2,"button",41),u.dc("click",(function(){return u.Dc(a),u.hc(2).saveDiffList()})),u.Qc(3),u.ic(4,"translate"),u.Vb(),u.Wb(5,"button",79),u.dc("click",(function(){u.Dc(a),u.hc();var t=u.zc(5),e=u.hc();return t.loadListModel(e.currentEntity.id)})),u.Qc(6),u.ic(7,"translate"),u.Vb(),u.Oc(8,qc,3,3,"button",80),u.Vb(),u.Vb()}if(2&t){u.hc();var n=u.zc(5),i=u.hc();u.Db(2),u.oc("disabled",n.hasEmptyDest()||!n.isModified()),u.Db(1),u.Rc(u.jc(4,5,"lang.save")),u.Db(2),u.oc("disabled",!n.isModified()),u.Db(1),u.Rc(u.jc(7,7,"lang.cancel")),u.Db(2),u.oc("ngIf",!n.isEmptyList()&&i.currentEntity.listTemplate.id)}}function Jc(t,e){if(1&t&&(u.Wb(0,"mat-tab",13),u.ic(1,"translate"),u.Wb(2,"div",75),u.Wb(3,"div",76),u.Rb(4,"app-diffusions-list",77,78),u.Vb(),u.Oc(6,Kc,9,9,"div",24),u.Vb(),u.Vb()),2&t){var a=u.hc();u.pc("label",u.jc(1,4,"lang.diffusionList")),u.Db(4),u.oc("adminMode",!0)("target","redirect"),u.Db(2),u.oc("ngIf",a.currentEntity.entity_id)}}function Yc(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",16),u.Wb(1,"div",40),u.Wb(2,"button",41),u.dc("click",(function(){return u.Dc(a),u.hc(2).saveDiffListVisa()})),u.Qc(3),u.ic(4,"translate"),u.Vb(),u.Wb(5,"button",79),u.dc("click",(function(){u.Dc(a),u.hc();var t=u.zc(5),e=u.hc();return t.loadListModel(e.currentEntity.id)})),u.Qc(6),u.ic(7,"translate"),u.Vb(),u.Vb(),u.Vb()}if(2&t){u.hc();var n=u.zc(5);u.Db(2),u.oc("disabled",!n.isModified()),u.Db(1),u.Rc(u.jc(4,4,"lang.save")),u.Db(2),u.oc("disabled",!n.isModified()),u.Db(1),u.Rc(u.jc(7,6,"lang.cancel"))}}function Zc(t,e){if(1&t&&(u.Wb(0,"mat-tab",13),u.ic(1,"translate"),u.Wb(2,"div",82),u.Wb(3,"div",76),u.Rb(4,"app-visa-workflow",83,84),u.Vb(),u.Oc(6,Yc,8,8,"div",24),u.Vb(),u.Vb()),2&t){var a=u.hc();u.pc("label",u.jc(1,5,"lang.visaWorkflow")),u.Db(4),u.oc("adminMode",!0)("showListModels",!1)("showComment",!1),u.Db(2),u.oc("ngIf",a.currentEntity.entity_id)}}function tl(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",16),u.Wb(1,"div",40),u.Wb(2,"button",41),u.dc("click",(function(){return u.Dc(a),u.hc(2).saveDiffListOpinion()})),u.Qc(3),u.ic(4,"translate"),u.Vb(),u.Wb(5,"button",79),u.dc("click",(function(){u.Dc(a),u.hc();var t=u.zc(5),e=u.hc();return t.loadListModel(e.currentEntity.id)})),u.Qc(6),u.ic(7,"translate"),u.Vb(),u.Vb(),u.Vb()}if(2&t){u.hc();var n=u.zc(5);u.Db(2),u.oc("disabled",!n.isModified()),u.Db(1),u.Rc(u.jc(4,4,"lang.save")),u.Db(2),u.oc("disabled",!n.isModified()),u.Db(1),u.Rc(u.jc(7,6,"lang.cancel"))}}function el(t,e){if(1&t&&(u.Wb(0,"mat-tab",13),u.ic(1,"translate"),u.Wb(2,"div",85),u.Wb(3,"div",76),u.Rb(4,"app-avis-workflow",86,87),u.Vb(),u.Oc(6,tl,8,8,"div",24),u.Vb(),u.Vb()),2&t){var a=u.hc();u.pc("label",u.jc(1,4,"lang.avis")),u.Db(4),u.oc("adminMode",!0)("showListModels",!1),u.Db(2),u.oc("ngIf",a.currentEntity.entity_id)}}var al=function(){return["/rest/autocomplete/users/administration"]};function nl(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",101),u.Wb(1,"plugin-autocomplete",102),u.dc("triggerEvent",(function(t){return u.Dc(a),u.hc(2).linkUser(t)})),u.Vb(),u.Rb(2,"hr"),u.Vb()}if(2&t){var n=u.hc(2);u.Db(1),u.oc("labelPlaceholder",n.translate.instant("lang.linkUser"))("labelList",n.translate.instant("lang.availableUsers"))("routeDatas",u.uc(5,al))("targetSearchKey","idToDisplay")("subInfoKey","descriptionToDisplay")}}function il(t,e){1&t&&(u.Wb(0,"mat-header-cell",103),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.firstname")))}function ol(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.firstname," ")}}function rl(t,e){1&t&&(u.Wb(0,"mat-header-cell",103),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.lastname")))}function cl(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.lastname," ")}}function ll(t,e){1&t&&u.Rb(0,"mat-header-row")}function sl(t,e){1&t&&(u.Rb(0,"mat-row",104),u.ic(1,"translate")),2&t&&(u.qc("routerLink","/administration/users/",e.$implicit.id,""),u.pc("matTooltip",u.jc(1,2,"lang.view")))}function dl(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-tab",13),u.ic(1,"translate"),u.Wb(2,"div",75),u.Oc(3,nl,3,6,"div",88),u.Wb(4,"div",89),u.Wb(5,"mat-form-field"),u.Wb(6,"input",90),u.dc("keyup",(function(t){return u.Dc(a),u.hc().applyFilterUsers(t.target.value)})),u.ic(7,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(8,"div",89),u.Rb(9,"mat-paginator",91,92),u.Vb(),u.Vb(),u.Wb(11,"mat-table",93,94),u.Ub(13,95),u.Oc(14,il,3,3,"mat-header-cell",96),u.Oc(15,ol,2,1,"mat-cell",97),u.Tb(),u.Ub(16,98),u.Oc(17,rl,3,3,"mat-header-cell",96),u.Oc(18,cl,2,1,"mat-cell",97),u.Tb(),u.Oc(19,ll,1,0,"mat-header-row",99),u.Oc(20,sl,2,4,"mat-row",100),u.Vb(),u.Vb()}if(2&t){var n=u.hc();u.pc("label",u.jc(1,9,"lang.users")),u.Db(3),u.oc("ngIf",n.currentEntity.canAdminUsers),u.Db(3),u.pc("placeholder",u.jc(7,11,"lang.filterBy")),u.Db(3),u.oc("length",100)("hidePageSize",!0)("pageSize",10),u.Db(2),u.oc("dataSource",n.dataSourceUsers),u.Db(8),u.oc("matHeaderRowDef",n.displayedColumnsUsers),u.Db(1),u.oc("matRowDefColumns",n.displayedColumnsUsers)}}function bl(t,e){1&t&&(u.Wb(0,"mat-header-cell",115),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc("",u.jc(2,1,"lang.templateName")," "))}function ul(t,e){if(1&t&&(u.Wb(0,"mat-cell",116),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.pc("matTooltip",a.template_comment),u.Db(1),u.Sc(" ",a.template_label," ")}}function pl(t,e){1&t&&(u.Wb(0,"mat-header-cell",117),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc("",u.jc(2,1,"lang.templateTarget")," "))}function fl(t,e){if(1&t&&(u.Wb(0,"mat-cell",118),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",u.jc(2,1,"lang."+a.template_target)," ")}}function ml(t,e){1&t&&u.Rb(0,"mat-header-row")}var gl=function(t){return{cursor:t}};function hl(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-row",119),u.dc("click",(function(){u.Dc(a);var t=e.$implicit;return u.hc(2).showTemplate(t.template_id)})),u.Vb()}if(2&t){var n=u.hc(2);u.oc("ngStyle",u.vc(1,gl,n.currentEntity.canAdminTemplates?"pointer":"position"))}}function vl(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-tab",13),u.ic(1,"translate"),u.Wb(2,"div",75),u.Wb(3,"div",89),u.Wb(4,"mat-form-field"),u.Wb(5,"input",90),u.dc("keyup",(function(t){return u.Dc(a),u.hc().applyFilterTemplates(t.target.value)})),u.ic(6,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(7,"div",89),u.Rb(8,"mat-paginator",91,105),u.Vb(),u.Vb(),u.Wb(10,"mat-table",106,107),u.Ub(12,108),u.Oc(13,bl,3,3,"mat-header-cell",109),u.Oc(14,ul,2,2,"mat-cell",110),u.Tb(),u.Ub(15,111),u.Oc(16,pl,3,3,"mat-header-cell",112),u.Oc(17,fl,3,3,"mat-cell",113),u.Tb(),u.Oc(18,ml,1,0,"mat-header-row",99),u.Oc(19,hl,1,3,"mat-row",114),u.Vb(),u.Vb()}if(2&t){var n=u.hc();u.pc("label",u.jc(1,8,"lang.templates")),u.Db(5),u.pc("placeholder",u.jc(6,10,"lang.filterBy")),u.Db(3),u.oc("length",100)("hidePageSize",!0)("pageSize",10),u.Db(2),u.oc("dataSource",n.dataSourceTemplates),u.Db(8),u.oc("matHeaderRowDef",n.displayedColumnsTemplates),u.Db(1),u.oc("matRowDefColumns",n.displayedColumnsTemplates)}}function yl(t,e){if(1&t&&(u.Wb(0,"mat-list-item"),u.Rb(1,"mat-icon",7),u.Wb(2,"p",8),u.Wb(3,"b"),u.Qc(4),u.Vb(),u.Qc(5),u.ic(6,"translate"),u.Wb(7,"b"),u.Qc(8),u.Vb(),u.Qc(9),u.ic(10,"translate"),u.Vb(),u.Vb()),2&t){var a=u.hc();u.Db(4),u.Rc(a.data.entity.entity_label),u.Db(1),u.Sc(" ",u.jc(6,4,"lang.isDestTo")," "),u.Db(3),u.Rc(a.data.entity.documents),u.Db(1),u.Sc(" ",u.jc(10,6,"lang.documents"),"")}}function Dl(t,e){if(1&t&&(u.Wb(0,"mat-list-item"),u.Rb(1,"mat-icon",9),u.Wb(2,"p",8),u.Wb(3,"b"),u.Qc(4),u.Vb(),u.Qc(5),u.ic(6,"translate"),u.Wb(7,"b"),u.Qc(8),u.Vb(),u.Qc(9),u.ic(10,"translate"),u.Vb(),u.Vb()),2&t){var a=u.hc();u.Db(4),u.Rc(a.data.entity.entity_label),u.Db(1),u.Sc(" ",u.jc(6,4,"lang.isCopyTo")," "),u.Db(3),u.Rc(a.data.entity.instances),u.Db(1),u.Sc(" ",u.jc(10,6,"lang.documents"),"")}}function Vl(t,e){if(1&t&&(u.Wb(0,"mat-list-item"),u.Rb(1,"mat-icon",10),u.Wb(2,"p",8),u.Wb(3,"b"),u.Qc(4),u.Vb(),u.Qc(5),u.ic(6,"lowercase"),u.ic(7,"translate"),u.Wb(8,"b"),u.Qc(9),u.Vb(),u.Qc(10),u.ic(11,"lowercase"),u.ic(12,"translate"),u.Vb(),u.Vb()),2&t){var a=u.hc();u.Db(4),u.Rc(a.data.entity.entity_label),u.Db(1),u.Sc(" ",u.jc(6,4,u.jc(7,6,"lang.isLinkedTo"))," "),u.Db(4),u.Rc(a.data.entity.users.length),u.Db(1),u.Sc(" ",u.jc(11,8,u.jc(12,10,"lang.usersAlt")),"")}}function Cl(t,e){if(1&t&&(u.Wb(0,"mat-list-item"),u.Rb(1,"mat-icon",11),u.Wb(2,"p",8),u.Wb(3,"b"),u.Qc(4),u.Vb(),u.Qc(5),u.ic(6,"lowercase"),u.ic(7,"translate"),u.Wb(8,"b"),u.Qc(9),u.Vb(),u.Qc(10),u.ic(11,"lowercase"),u.ic(12,"translate"),u.Vb(),u.Vb()),2&t){var a=u.hc();u.Db(4),u.Rc(a.data.entity.entity_label),u.Db(1),u.Sc(" ",u.jc(6,4,u.jc(7,6,"lang.isLinkedTo"))," "),u.Db(4),u.Rc(a.data.entity.templates.length),u.Db(1),u.Sc(" ",u.jc(11,8,u.jc(12,10,"lang.templates")),"")}}var xl,Ml,Wl=function(){return["/rest/autocomplete/entities"]},Ol=((Ml=function(){function t(e,a,n,i,o,r,c,l,s){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.dialog=i,this.headerService=o,this.router=r,this.appService=c,this.functions=l,this.viewContainerRef=s,this.loading=!1,this.entities=[],this.listTemplateRoles=[],this.entityTypeList=[],this.currentEntity={},this.isDraggable=!0,this.newEntity=!1,this.creationMode=!1,this.visaCircuitModified=!1,this.opinionCircuitModified=!1,this.config={},this.dataSourceUsers=new q.p(this.currentEntity.users),this.dataSourceTemplates=new q.p(this.currentEntity.templates),this.displayedColumnsUsers=["firstname","lastname"],this.displayedColumnsTemplates=["template_label","template_target"]}return _createClass(t,[{key:"applyFilterUsers",value:function(t){t=(t=t.trim()).toLowerCase(),this.dataSourceUsers.filter=t}},{key:"applyFilterTemplates",value:function(t){t=(t=t.trim()).toLowerCase(),this.dataSourceTemplates.filter=t}},{key:"ngOnInit",value:function(){return Object(yt.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.entities")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,t.next=5,this.getEntityTypes();case 5:return t.next=7,this.getRoles();case 7:return t.next=9,this.getEntities();case 9:this.loading=!1,this.initEntitiesTree();case 11:case"end":return t.stop()}}),t,this)})))}},{key:"initEntitiesTree",value:function(){var t=this;setTimeout((function(){$("#jstree").jstree({checkbox:{deselect_all:!0,three_state:!1},core:{force_text:!0,themes:{name:"proton",responsive:!0},multiple:!1,data:t.entities,check_callback:function(t,e,a,n,i){if("move_node"===t)return"#"!==a.id&&!!a.original.allowed}},dnd:{is_draggable:function(t){for(var e=0,a=t.length;e<a;e++)if(!t[e].original.allowed)return!1;return!0}},plugins:["checkbox","search","dnd","sort"]}),$("#jstree").jstree("select_node",t.entities[0]);var e=!1;$("#jstree_search").keyup((function(){e&&clearTimeout(e),e=setTimeout((function(){var t=$("#jstree_search").val();$("#jstree").jstree(!0).search(t)}),250)})),$("#jstree").on("select_node.jstree",(function(e,a){!1===t.sidenavRight.opened&&t.sidenavRight.open(),!0===t.creationMode?t.currentEntity.parent_entity_id=a.node.id:!0===t.newEntity?(t.loadEntity(t.currentEntity.entity_id),t.newEntity=!1):t.loadEntity(a.node.id)})).on("deselect_node.jstree",(function(e,a){t.sidenavRight.close()})).on("move_node.jstree",(function(e,a){t.currentEntity.parent_entity_id!==t.currentEntity.entity_id&&(t.currentEntity.parent_entity_id=a.parent),t.moveEntity()})).jstree(),$(document).on("dnd_start.vakata",(function(t,e){$("#jstree").jstree("deselect_all"),$("#jstree").jstree("select_node",e.data.nodes[0])}))}),0)}},{key:"getEntityTypes",value:function(){var t=this;return new Promise((function(e,a){t.http.get("../rest/entityTypes").pipe(Object(d.a)((function(a){t.entityTypeList=a.types,e(!0)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}))}},{key:"getRoles",value:function(){var t=this;return new Promise((function(e,a){t.http.get("../rest/listTemplates/types/entity_id/roles").pipe(Object(d.a)((function(a){t.listTemplateRoles=a.roles,e(!0)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}))}},{key:"getEntities",value:function(){var t=this;return new Promise((function(e,a){t.http.get("../rest/entities").pipe(Object(d.a)((function(a){t.entities=a.entities,e(!0)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}))}},{key:"loadEntity",value:function(t){var e=this;this.visaCircuitModified=!1,this.opinionCircuitModified=!1,this.http.get("../rest/entities/"+t+"/details").subscribe((function(t){e.currentEntity=t.entity,e.appDiffusionsList.loadListModel(e.currentEntity.id),e.appVisaWorkflow.loadListModel(e.currentEntity.id),e.appAvisWorkflow.loadListModel(e.currentEntity.id),e.idVisaCircuit=e.currentEntity.visaCircuit?e.currentEntity.visaCircuit.id:null,e.idOpinionCircuit=e.currentEntity.opinionCircuit?e.currentEntity.opinionCircuit.id:null,e.dataSourceUsers=new q.p(e.currentEntity.users),e.dataSourceUsers.paginator=e.paginatorUsers,e.dataSourceUsers.sort=e.sortUsers,e.dataSourceTemplates=new q.p(e.currentEntity.templates),e.dataSourceTemplates.paginator=e.paginatorTemplates,e.dataSourceTemplates.sort=e.sortTemplates,e.currentEntity.listTemplate.items||(e.currentEntity.listTemplate.items=[]),e.listTemplateRoles.forEach((function(t){t.available&&!e.currentEntity.listTemplate.items[t.id]&&(e.currentEntity.listTemplate.items[t.id]=[])}))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"addElemListModelVisa",value:function(t){this.visaCircuitModified=!0;var e={id:t.id,type:"user",mode:"sign",idToDisplay:t.idToDisplay,descriptionToDisplay:t.otherInfo};this.currentEntity.visaCircuit.items||(this.currentEntity.visaCircuit.items=[]),this.currentEntity.visaCircuit.items.push(e),this.currentEntity.visaCircuit.items.length>1&&(this.currentEntity.visaCircuit.items[this.currentEntity.visaCircuit.items.length-2].mode="visa")}},{key:"addElemListModelOpinion",value:function(t){this.opinionCircuitModified=!0;var e={id:t.id,type:"user",mode:"avis",idToDisplay:t.idToDisplay,descriptionToDisplay:t.otherInfo};this.currentEntity.opinionCircuit.items||(this.currentEntity.opinionCircuit.items=[]),this.currentEntity.opinionCircuit.items.push(e)}},{key:"saveEntity",value:function(){var t=this;"#"===this.currentEntity.parent_entity_id&&(this.currentEntity.parent_entity_id="");var e=!0;""===this.currentEntity.parent_entity_id&&(e=confirm(this.translate.instant("lang.entityWithoutParentMessage"))),e&&(this.creationMode?this.http.post("../rest/entities",this.currentEntity).subscribe((function(e){t.currentEntity.listTemplate=[],t.entities=e.entities,t.creationMode=!1,t.newEntity=!0,$("#jstree").jstree(!0).settings.core.data=t.entities,$("#jstree").jstree(!0).refresh(),$("#jstree").on("refresh.jstree",(function(e){$("#jstree").jstree("deselect_all"),$("#jstree").jstree("select_node",t.currentEntity.entity_id)})),t.notify.success(t.translate.instant("lang.entityAdded"))}),(function(e){t.notify.error(e.error.errors)})):this.http.put("../rest/entities/"+this.currentEntity.entity_id,this.currentEntity).subscribe((function(e){t.entities=e.entities,$("#jstree").jstree(!0).settings.core.data=t.entities,$("#jstree").jstree("refresh"),t.notify.success(t.translate.instant("lang.entityUpdated"))}),(function(e){t.notify.error(e.error.errors)})))}},{key:"moveEntity",value:function(){var t=this;this.http.put("../rest/entities/"+this.currentEntity.entity_id,this.currentEntity).subscribe((function(){t.notify.success(t.translate.instant("lang.entityUpdated"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"readMode",value:function(){if(this.creationMode=!1,this.isDraggable=!0,$("#jstree").jstree("deselect_all"),this.currentEntity.parent_entity_id){for(var t=0;t<this.entities.length;t++)if(this.entities[t].entity_id===this.currentEntity.parent_entity_id){$("#jstree").jstree("select_node",this.entities[t]);break}}else this.sidenavRight.close()}},{key:"selectParentEntity",value:function(t){this.creationMode&&($("#jstree").jstree("deselect_all"),$("#jstree").jstree("select_node",t))}},{key:"removeEntity",value:function(){var t=this;this.currentEntity.documents>0||this.currentEntity.redirects>0||this.currentEntity.instances>0||this.currentEntity.users.length>0||this.currentEntity.templates.length>0?(this.config={panelClass:"maarch-modal",data:{entity:this.currentEntity}},this.dialogRef=this.dialog.open(_l,this.config),this.dialogRef.afterClosed().subscribe((function(e){e&&(t.currentEntity.listTemplate.id&&t.http.delete("../rest/listTemplates/"+t.currentEntity.listTemplate.id).subscribe((function(e){t.currentEntity.listTemplate.id=e.id,t.http.get("../rest/listTemplates/types/entity_id/roles").subscribe((function(e){t.listTemplateRoles=e.roles}),(function(e){t.notify.error(e.error.errors)}))}),(function(e){t.notify.error(e.error.errors)})),t.idVisaCircuit&&t.http.delete("../rest/listTemplates/"+t.idVisaCircuit).subscribe((function(){t.idVisaCircuit=null}),(function(e){t.notify.error(e.error.errors)})),t.http.put("../rest/entities/"+e.entity_id+"/reassign/"+e.redirectEntity,{}).subscribe((function(e){t.entities=e.entities,$("#jstree").jstree(!0).settings.core.data=t.entities,$("#jstree").jstree("refresh"),t.sidenavRight.close(),t.notify.success(t.translate.instant(void 0===e.deleted||e.deleted?"lang.entityDeleted":"lang.entityDeletedButAnnuaryUnreachable"))}),(function(e){t.notify.error(e.error.errors)}))),t.dialogRef=null}))):confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+this.currentEntity.entity_label+" \xbb")&&(this.currentEntity.listTemplate.id&&this.http.delete("../rest/listTemplates/"+this.currentEntity.listTemplate.id).subscribe((function(e){t.currentEntity.listTemplate.id=e.id,t.http.get("../rest/listTemplates/types/entity_id/roles").subscribe((function(e){t.listTemplateRoles=e.roles}),(function(e){t.notify.error(e.error.errors)}))}),(function(e){t.notify.error(e.error.errors)})),this.idVisaCircuit&&this.http.delete("../rest/listTemplates/"+this.idVisaCircuit).subscribe((function(){t.idVisaCircuit=null}),(function(e){t.notify.error(e.error.errors)})),this.http.delete("../rest/entities/"+this.currentEntity.entity_id).subscribe((function(e){t.entities=e.entities,$("#jstree").jstree(!0).settings.core.data=t.entities,$("#jstree").jstree("refresh"),t.sidenavRight.close(),t.notify.success(t.translate.instant(void 0===e.deleted||e.deleted?"lang.entityDeleted":"lang.entityDeletedButAnnuaryUnreachable"))}),(function(e){t.notify.error(e.error.errors)})))}},{key:"prepareEntityAdd",value:function(){if(this.creationMode=!0,this.isDraggable=!1,this.currentEntity.entity_id){for(var t=0;t<this.entities.length;t++)if(this.entities[t].entity_id===this.currentEntity.entity_id){this.currentEntity={entity_type:this.entityTypeList[0].id},this.currentEntity.parent_entity_id=this.entities[t].entity_id;break}}else this.currentEntity={entity_type:this.entityTypeList[0].id},$("#jstree").jstree("deselect_all"),this.sidenavRight.open()}},{key:"updateStatus",value:function(t,e){var a=this;this.http.put("../rest/entities/"+t.entity_id+"/status",{method:e}).subscribe((function(t){a.notify.success("")}),(function(t){a.notify.error(t.error.errors)}))}},{key:"saveDiffList",value:function(){var t=this,e={title:this.currentEntity.entity_id,description:this.currentEntity.entity_id,type:"diffusionList",entityId:this.currentEntity.id,items:this.appDiffusionsList.getCurrentListinstance().map((function(t){return{id:t.item_id,type:t.item_type,mode:t.item_mode}}))};this.functions.empty(this.currentEntity.listTemplate.id)?this.http.post("../rest/listTemplates?admin=true",e).pipe(Object(d.a)((function(e){t.currentEntity.listTemplate.id=e.id,t.notify.success(t.translate.instant("lang.diffusionModelUpdated")),t.appDiffusionsList.loadListModel(t.currentEntity.id)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe():this.http.put("../rest/listTemplates/"+this.currentEntity.listTemplate.id,e).pipe(Object(d.a)((function(){t.notify.success(t.translate.instant("lang.diffusionModelUpdated")),t.appDiffusionsList.loadListModel(t.currentEntity.id)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"deleteDiffList",value:function(){var t=this;this.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete"),msg:this.translate.instant("lang.confirmAction")}}).afterClosed().pipe(Object(J.a)((function(t){return"ok"===t})),Object(Y.a)((function(){return t.http.delete("../rest/listTemplates/"+t.currentEntity.listTemplate.id)})),Object(d.a)((function(){t.currentEntity.listTemplate.id=null,t.notify.success(t.translate.instant("lang.diffusionModelDeleted")),t.appDiffusionsList.loadListModel(t.currentEntity.id)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"saveDiffListVisa",value:function(){var t=this,e={title:this.currentEntity.entity_id,description:this.currentEntity.entity_id,type:"visaCircuit",entityId:this.currentEntity.id,items:this.appVisaWorkflow.getWorkflow().map((function(t,e){return{id:t.item_id,type:t.item_type,mode:t.requested_signature?"sign":"visa",sequence:e}}))};this.appVisaWorkflow.isValidWorkflow()||this.functions.empty(e.items)?this.functions.empty(e.items)?this.http.delete("../rest/listTemplates/"+this.idVisaCircuit).pipe(Object(d.a)((function(){t.idVisaCircuit=null,t.notify.success(t.translate.instant("lang.diffusionModelDeleted")),t.appVisaWorkflow.loadListModel(t.currentEntity.id)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe():this.functions.empty(this.idVisaCircuit)?this.http.post("../rest/listTemplates?admin=true",e).pipe(Object(d.a)((function(e){t.idVisaCircuit=e.id,t.notify.success(t.translate.instant("lang.diffusionModelUpdated")),t.appVisaWorkflow.loadListModel(t.currentEntity.id)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe():this.http.put("../rest/listTemplates/"+this.idVisaCircuit,e).pipe(Object(d.a)((function(){t.notify.success(t.translate.instant("lang.diffusionModelUpdated")),t.appVisaWorkflow.loadListModel(t.currentEntity.id)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe():this.notify.error(this.appVisaWorkflow.getError())}},{key:"saveDiffListOpinion",value:function(){var t=this,e={title:this.currentEntity.entity_id,description:this.currentEntity.entity_id,type:"opinionCircuit",entityId:this.currentEntity.id,items:this.appAvisWorkflow.getWorkflow().map((function(t,e){return{id:t.item_id,type:t.item_type,mode:"avis",sequence:e}}))};this.functions.empty(e.items)?this.http.delete("../rest/listTemplates/"+this.idOpinionCircuit).pipe(Object(d.a)((function(){t.idOpinionCircuit=null,t.notify.success(t.translate.instant("lang.diffusionModelDeleted")),t.appAvisWorkflow.loadListModel(t.currentEntity.id)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe():this.functions.empty(this.idOpinionCircuit)?this.http.post("../rest/listTemplates?admin=true",e).pipe(Object(d.a)((function(e){t.idOpinionCircuit=e.id,t.notify.success(t.translate.instant("lang.diffusionModelUpdated")),t.appAvisWorkflow.loadListModel(t.currentEntity.id)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe():this.http.put("../rest/listTemplates/"+this.idOpinionCircuit,e).pipe(Object(d.a)((function(){t.notify.success(t.translate.instant("lang.diffusionModelUpdated")),t.appAvisWorkflow.loadListModel(t.currentEntity.id)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"removeDiffListOpinion",value:function(t,e){this.opinionCircuitModified=!0,this.currentEntity.opinionCircuit.items.splice(e,1)}},{key:"toggleRole",value:function(t){var e=this;t.usedIn.length>0?this.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,data:{title:this.translate.instant("lang.confirmAction"),msg:this.translate.instant("lang.roleUsedInTemplateInfo")+" : <b>"+t.usedIn.join(", ")+"</b><br/>"+this.translate.instant("lang.roleUsedInTemplateInfo2")}}).afterClosed().subscribe((function(a){"ok"===a&&(t.available=!t.available,e.http.put("../rest/listTemplates/types/entity_id/roles",{roles:e.listTemplateRoles}).subscribe((function(){t.usedIn=[],e.currentEntity.listTemplate&&(e.currentEntity.listTemplate.items[t.id]=[]),e.notify.success(e.translate.instant("lang.listTemplatesRolesUpdated"))}),(function(t){e.notify.error(t.error.errors)})))})):(t.available=!t.available,this.http.put("../rest/listTemplates/types/entity_id/roles",{roles:this.listTemplateRoles}).subscribe((function(){e.currentEntity.listTemplate&&(e.currentEntity.listTemplate.items[t.id]=[],e.http.get("../rest/listTemplates/types/entity_id/roles").subscribe((function(t){e.listTemplateRoles=t.roles}),(function(t){e.notify.error(t.error.errors)}))),e.notify.success(e.translate.instant("lang.listTemplatesRolesUpdated"))}),(function(t){e.notify.error(t.error.errors)})))}},{key:"linkUser",value:function(t){var e=this;this.http.post("../rest/users/"+t.id+"/entities",{entityId:this.currentEntity.entity_id,role:""}).subscribe((function(a){var n=t.idToDisplay.split(" ");e.currentEntity.users.push({id:t.id,user_id:t.otherInfo,firstname:n[0],lastname:n[1]}),e.dataSourceUsers=new q.p(e.currentEntity.users),e.dataSourceUsers.paginator=e.paginatorUsers,e.dataSourceUsers.sort=e.sortUsers,e.notify.success(e.translate.instant("lang.userAdded"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"showTemplate",value:function(t){this.currentEntity.canAdminTemplates&&this.router.navigate(["/administration/templates/"+t])}},{key:"addEntityToAnnuary",value:function(){var t=this;this.http.put("../rest/entities/"+this.currentEntity.id+"/annuaries",this.currentEntity).subscribe((function(e){t.currentEntity.business_id=e.entitySiret,t.notify.success(t.translate.instant(void 0===e.synchronized?"lang.siretGenerated":e.synchronized?"lang.siretGeneratedAndSynchronizationDone":"lang.siretGeneratedButAnnuaryUnreachable"))}),(function(e){t.notify.handleErrors(e)}))}},{key:"openExportModal",value:function(){this.dialog.open(yc,{panelClass:"maarch-modal",width:"800px",autoFocus:!1})}}]),t}()).\u0275fac=function(t){return new(t||Ml)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(N.b),u.Qb(m.a),u.Qb(o.c),u.Qb(g.a),u.Qb(D.a),u.Qb(u.T))},Ml.\u0275cmp=u.Kb({type:Ml,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(Vc,!0),u.Kc(Cc,!0),u.Xc(xc,!0),u.Xc(Mc,!0),u.Xc(Wc,!0),u.Xc(Oc,!0),u.Xc(_c,!0),u.Xc(Sc,!0),u.Xc(kc,!0)),2&t&&(u.yc(a=u.ec())&&(e.sidenavRight=a.first),u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.paginatorUsers=a.first),u.yc(a=u.ec())&&(e.paginatorTemplates=a.first),u.yc(a=u.ec())&&(e.sortUsers=a.first),u.yc(a=u.ec())&&(e.sortTemplates=a.first),u.yc(a=u.ec())&&(e.appDiffusionsList=a.first),u.yc(a=u.ec())&&(e.appVisaWorkflow=a.first),u.yc(a=u.ec())&&(e.appAvisWorkflow=a.first))},decls:132,vars:142,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",1,"col-md-5","col-xs-11",3,"mode","fixedInViewport","opened"],["snav2",""],[3,"label"],[1,"form-horizontal",2,"overflow","hidden"],["entityForm","ngForm"],[1,"form-group"],[1,"col-sm-12"],["id","parent_entity_id","name","parent_entity_id",3,"title","placeholder","ngModel","ngModelChange","selectionChange"],["value",""],[2,"opacity","0.5","text-align","center"],[4,"ngFor","ngForOf"],["id","entity_type","name","entity_type","maxlength","32","required","",3,"title","placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","form-group",4,"ngIf"],["matInput","","required","","name","entity_id","id","entity_id","type","text","maxlength","32","pattern","^[\\w-]*$",3,"ngModel","title","placeholder","disabled","ngModelChange"],["matInput","","required","","name","entity_label","id","entity_label","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","required","","name","short_label","id","short_label","type","text","maxlength","50",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","email","id","email","type","text","maxlength","255","pattern","(^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$)",3,"ngModel","title","placeholder","ngModelChange"],[1,"col-sm-4"],["matInput","","name","adrs_1","id","adrs_1","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","adrs_2","id","adrs_2","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","adrs_3","id","adrs_3","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","zipcode","id","zipcode","type","text","maxlength","32",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","city","id","city","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","country","id","country","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","entity_full_name","id","entity_full_name","matTextareaAutosize","","matAutosizeMinRows","1","matAutosizeMaxRows","5",3,"ngModel","placeholder","title","ngModelChange"],[1,"col-sm-6"],["matInput","","name","archival_agency","id","archival_agency","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","archival_agreement","id","archival_agreement","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","warn",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","default",3,"click",4,"ngIf"],[3,"label",4,"ngIf"],["mat-subheader",""],["mat-list-item","",3,"click",4,"ngIf"],["mat-list-item","",3,"click"],["color","primary","mat-list-icon","",1,"fas","fa-file-export"],["mat-line",""],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-list-item","","disableRipple","true",4,"ngIf"],["mat-list-item","","disableRipple","true"],["color","primary","mat-list-icon",""],["color","primary",3,"checked","click"],["mat-line","",3,"ngStyle","click"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],["matInput","","id","jstree_search","name","jstree_search","type","text",3,"placeholder"],[4,"ngIf"],["id","jstree"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],[3,"value",4,"ngIf"],[3,"value"],["matInput","","name","id","id","id","type","text","disabled","",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","value","Param\xe8tre SIRET manquant","type","text","maxlength","255","disabled","",3,"title","placeholder",4,"ngIf"],["matInput","","name","business_id","id","business_id","type","text","maxlength","255","disabled","",3,"ngModel","title","placeholder","ngModelChange",4,"ngIf"],["color","primary","mat-icon-button","","matSuffix","","title","G\xe9n\xe9rer un num\xe9ro SIRET",3,"click",4,"ngIf"],["matInput","","value","Param\xe8tre SIRET manquant","type","text","maxlength","255","disabled","",3,"title","placeholder"],["matInput","","name","business_id","id","business_id","type","text","maxlength","255","disabled","",3,"ngModel","title","placeholder","ngModelChange"],["color","primary","mat-icon-button","","matSuffix","","title","G\xe9n\xe9rer un num\xe9ro SIRET",3,"click"],[1,"fas","fa-compress-arrows-alt"],["mat-raised-button","","color","warn",3,"disabled","click"],["mat-raised-button","","color","default",3,"click"],[1,"row",2,"margin","0px"],[1,"col-md-12"],[3,"adminMode","target"],["appDiffusionsList",""],["mat-raised-button","","color","default",3,"disabled","click"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],["id","visaCircuitContent",1,"row",2,"margin","0px"],[3,"adminMode","showListModels","showComment"],["appVisaWorkflow",""],["id","opinionCircuitContent",1,"row",2,"margin","0px"],[3,"adminMode","showListModels"],["appAvisWorkflow",""],["class","col-md-12","style","padding:5px;",4,"ngIf"],[1,"col-md-6","col-xs-6"],["matInput","",3,"placeholder","keyup"],[3,"length","hidePageSize","pageSize"],["paginatorUsers",""],["matSort","","matSortActive","lastname","matSortDirection","asc",3,"dataSource"],["tableUsers","matSort"],["matColumnDef","firstname"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","lastname"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"col-md-12",2,"padding","5px"],[3,"labelPlaceholder","labelList","routeDatas","targetSearchKey","subInfoKey","triggerEvent"],["mat-sort-header",""],[2,"cursor","pointer",3,"routerLink","matTooltip"],["paginatorTemplates",""],["matSort","","matSortActive","template_label","matSortDirection","asc",3,"dataSource"],["tableTemplates","matSort"],["matColumnDef","template_label"],["mat-sort-header","","style","flex:2;",4,"matHeaderCellDef"],["style","flex:2;",3,"matTooltip",4,"matCellDef"],["matColumnDef","template_target"],["mat-sort-header","","style","flex:1;",4,"matHeaderCellDef"],["style","flex:1;",4,"matCellDef"],[3,"ngStyle","click",4,"matRowDef","matRowDefColumns"],["mat-sort-header","",2,"flex","2"],[2,"flex","2",3,"matTooltip"],["mat-sort-header","",2,"flex","1"],[2,"flex","1"],[3,"ngStyle","click"]],template:function(t,e){if(1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,Tc,16,11,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,Pc,2,0,"div",9),u.Oc(14,Lc,10,9,"mat-card",10),u.Vb(),u.Vb(),u.Vb(),u.Wb(15,"mat-sidenav",11,12),u.Wb(17,"mat-nav-list"),u.Wb(18,"mat-tab-group"),u.Wb(19,"mat-tab",13),u.Wb(20,"form",14,15),u.Wb(22,"div",16),u.Wb(23,"div",17),u.Wb(24,"mat-form-field"),u.Wb(25,"mat-select",18),u.dc("ngModelChange",(function(t){return e.currentEntity.parent_entity_id=t}))("selectionChange",(function(){return e.selectParentEntity(e.currentEntity.parent_entity_id)})),u.ic(26,"translate"),u.ic(27,"translate"),u.Wb(28,"mat-option",19),u.Wb(29,"i",20),u.Qc(30),u.ic(31,"translate"),u.Vb(),u.Vb(),u.Oc(32,Ac,2,1,"ng-container",21),u.ic(33,"sortBy"),u.Vb(),u.Vb(),u.Wb(34,"mat-form-field"),u.Wb(35,"mat-select",22),u.dc("ngModelChange",(function(t){return e.currentEntity.entity_type=t})),u.ic(36,"translate"),u.ic(37,"translate"),u.Oc(38,Uc,2,2,"mat-option",23),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Oc(39,zc,6,7,"div",24),u.Wb(40,"div",16),u.Wb(41,"div",17),u.Wb(42,"mat-form-field"),u.Wb(43,"input",25),u.dc("ngModelChange",(function(t){return e.currentEntity.entity_id=t})),u.ic(44,"translate"),u.ic(45,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(46,"div",16),u.Wb(47,"div",17),u.Wb(48,"mat-form-field"),u.Wb(49,"input",26),u.dc("ngModelChange",(function(t){return e.currentEntity.entity_label=t})),u.ic(50,"translate"),u.ic(51,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(52,"div",16),u.Wb(53,"div",17),u.Wb(54,"mat-form-field"),u.Wb(55,"input",27),u.dc("ngModelChange",(function(t){return e.currentEntity.short_label=t})),u.ic(56,"translate"),u.ic(57,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(58,"div",16),u.Wb(59,"div",17),u.Wb(60,"mat-form-field"),u.Wb(61,"input",28),u.dc("ngModelChange",(function(t){return e.currentEntity.email=t})),u.ic(62,"translate"),u.ic(63,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(64,"mat-accordion"),u.Wb(65,"mat-expansion-panel"),u.Wb(66,"mat-expansion-panel-header"),u.Wb(67,"mat-panel-title"),u.Qc(68),u.ic(69,"translate"),u.Vb(),u.Vb(),u.Wb(70,"div",16),u.Wb(71,"div",29),u.Wb(72,"mat-form-field"),u.Wb(73,"input",30),u.dc("ngModelChange",(function(t){return e.currentEntity.adrs_1=t})),u.ic(74,"translate"),u.ic(75,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(76,"div",29),u.Wb(77,"mat-form-field"),u.Wb(78,"input",31),u.dc("ngModelChange",(function(t){return e.currentEntity.adrs_2=t})),u.ic(79,"translate"),u.ic(80,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(81,"div",29),u.Wb(82,"mat-form-field"),u.Wb(83,"input",32),u.dc("ngModelChange",(function(t){return e.currentEntity.adrs_3=t})),u.ic(84,"translate"),u.ic(85,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(86,"div",16),u.Wb(87,"div",29),u.Wb(88,"mat-form-field"),u.Wb(89,"input",33),u.dc("ngModelChange",(function(t){return e.currentEntity.zipcode=t})),u.ic(90,"translate"),u.ic(91,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(92,"div",29),u.Wb(93,"mat-form-field"),u.Wb(94,"input",34),u.dc("ngModelChange",(function(t){return e.currentEntity.city=t})),u.ic(95,"translate"),u.ic(96,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(97,"div",29),u.Wb(98,"mat-form-field"),u.Wb(99,"input",35),u.dc("ngModelChange",(function(t){return e.currentEntity.country=t})),u.ic(100,"translate"),u.ic(101,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(102,"div",16),u.Wb(103,"div",17),u.Wb(104,"mat-form-field"),u.Wb(105,"textarea",36),u.dc("ngModelChange",(function(t){return e.currentEntity.entity_full_name=t})),u.ic(106,"translate"),u.ic(107,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Oc(108,Bc,6,3,"div",24),u.Wb(109,"div",16),u.Wb(110,"div",37),u.Wb(111,"mat-form-field"),u.Wb(112,"input",38),u.dc("ngModelChange",(function(t){return e.currentEntity.archival_agency=t})),u.ic(113,"translate"),u.ic(114,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(115,"div",37),u.Wb(116,"mat-form-field"),u.Wb(117,"input",39),u.dc("ngModelChange",(function(t){return e.currentEntity.archival_agreement=t})),u.ic(118,"translate"),u.ic(119,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(120,"div",16),u.Wb(121,"div",40),u.Wb(122,"button",41),u.dc("click",(function(){return e.saveEntity()})),u.Qc(123),u.ic(124,"translate"),u.Vb(),u.Oc(125,Xc,3,4,"button",42),u.Oc(126,Gc,3,3,"button",43),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Oc(127,Jc,7,6,"mat-tab",44),u.Oc(128,Zc,7,7,"mat-tab",44),u.Oc(129,el,7,6,"mat-tab",44),u.Oc(130,dl,21,13,"mat-tab",44),u.Oc(131,vl,20,12,"mat-tab",44),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t){var a=u.zc(21);u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading),u.Db(1),u.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!1),u.Db(4),u.oc("label",e.translate.instant(e.creationMode?"lang.createNewEntity":"lang.informations")),u.Db(6),u.pc("title",u.jc(26,73,"lang.isLinkedTo")),u.pc("placeholder",u.jc(27,75,"lang.isLinkedTo")),u.oc("ngModel",e.currentEntity.parent_entity_id),u.Db(5),u.Sc("- ",u.jc(31,77,"lang.noEntity")," -"),u.Db(2),u.oc("ngForOf",u.kc(33,79,e.entities,"entity_label")),u.Db(3),u.pc("title",u.jc(36,82,"lang.entityType")),u.pc("placeholder",u.jc(37,84,"lang.entityType")),u.oc("ngModel",e.currentEntity.entity_type),u.Db(3),u.oc("ngForOf",e.entityTypeList),u.Db(1),u.oc("ngIf",!e.creationMode),u.Db(4),u.pc("title",u.jc(44,86,"lang.id")),u.pc("placeholder",u.jc(45,88,"lang.id")),u.oc("ngModel",e.currentEntity.entity_id)("disabled",!e.creationMode),u.Db(6),u.pc("title",u.jc(50,90,"lang.label")),u.pc("placeholder",u.jc(51,92,"lang.label")),u.oc("ngModel",e.currentEntity.entity_label),u.Db(6),u.pc("title",u.jc(56,94,"lang.shortLabel")),u.pc("placeholder",u.jc(57,96,"lang.shortLabel")),u.oc("ngModel",e.currentEntity.short_label),u.Db(6),u.pc("title",u.jc(62,98,"lang.email")),u.pc("placeholder",u.jc(63,100,"lang.email")),u.oc("ngModel",e.currentEntity.email),u.Db(7),u.Sc(" ",u.jc(69,102,"lang.otherInformations")," "),u.Db(5),u.qc("title","",u.jc(74,104,"lang.address"),"1"),u.qc("placeholder","",u.jc(75,106,"lang.address"),"1"),u.oc("ngModel",e.currentEntity.adrs_1),u.Db(5),u.qc("title","",u.jc(79,108,"lang.address"),"2"),u.qc("placeholder","",u.jc(80,110,"lang.address"),"2"),u.oc("ngModel",e.currentEntity.adrs_2),u.Db(5),u.qc("title","",u.jc(84,112,"lang.address"),"3"),u.qc("placeholder","",u.jc(85,114,"lang.address"),"3"),u.oc("ngModel",e.currentEntity.adrs_3),u.Db(6),u.pc("title",u.jc(90,116,"lang.zipcode")),u.pc("placeholder",u.jc(91,118,"lang.zipcode")),u.oc("ngModel",e.currentEntity.zipcode),u.Db(5),u.pc("title",u.jc(95,120,"lang.city")),u.pc("placeholder",u.jc(96,122,"lang.city")),u.oc("ngModel",e.currentEntity.city),u.Db(5),u.pc("title",u.jc(100,124,"lang.country")),u.pc("placeholder",u.jc(101,126,"lang.country")),u.oc("ngModel",e.currentEntity.country),u.Db(6),u.pc("placeholder",u.jc(106,128,"lang.entityFullName")),u.pc("title",u.jc(107,130,"lang.entityFullName")),u.oc("ngModel",e.currentEntity.entity_full_name),u.Db(3),u.oc("ngIf",!e.creationMode),u.Db(4),u.pc("title",u.jc(113,132,"lang.archivalAgency")),u.pc("placeholder",u.jc(114,134,"lang.archivalAgency")),u.oc("ngModel",e.currentEntity.archival_agency),u.Db(5),u.pc("title",u.jc(118,136,"lang.archivalAgreement")),u.pc("placeholder",u.jc(119,138,"lang.archivalAgreement")),u.oc("ngModel",e.currentEntity.archival_agreement),u.Db(5),u.oc("disabled",!a.form.valid),u.Db(1),u.Rc(u.jc(124,140,"lang.save")),u.Db(2),u.oc("ngIf",!e.creationMode),u.Db(1),u.oc("ngIf",e.creationMode),u.Db(1),u.oc("ngIf",!e.creationMode),u.Db(1),u.oc("ngIf",!e.creationMode),u.Db(1),u.oc("ngIf",!e.creationMode),u.Db(1),u.oc("ngIf",!e.creationMode),u.Db(1),u.oc("ngIf",!e.creationMode)}},directives:[C.e,C.f,x.a,W.a,O.t,C.d,Rt.h,Ee.c,Ee.a,c.K,c.v,c.w,S.c,it.a,c.u,c.x,j.p,O.s,c.p,c.F,k.b,c.d,c.B,Ae.a,Ae.c,Ae.g,Ae.h,k.d,R.b,Rt.g,Rt.d,Tt.a,Rt.c,j.l,_.a,at.a,O.w,w.c,I.a,S.f,S.j,Dc.a,tc.a,ec.a,H.a,q.o,B.a,q.c,q.i,q.b,q.k,q.n,Ft.a,q.h,B.b,q.a,q.j,q.m,o.d,Qt.b],pipes:[p.d,T.a],styles:[".mat-list-item[draggable=false][_ngcontent-%COMP%]:hover{background:inherit}.mat-list-item[draggable=false][_ngcontent-%COMP%]{cursor:not-allowed!important}.mat-list-item[draggable=true][_ngcontent-%COMP%]{cursor:pointer}.mat-list-item[draggable=true][_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:move}"]}),Ml),_l=((xl=function(){function t(e,a,n,i){_classCallCheck(this,t),this.translate=e,this.http=a,this.data=n,this.dialogRef=i,console.log(this.data.entity.redirectEntity)}return _createClass(t,[{key:"setRedirectEntity",value:function(t){this.data.entity.redirectEntity=t.id}}]),t}()).\u0275fac=function(t){return new(t||xl)(u.Qb(p.e),u.Qb(f.b),u.Qb(N.a),u.Qb(N.h))},xl.\u0275cmp=u.Kb({type:xl,selectors:[["ng-component"]],decls:17,vars:17,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["role","alert",1,"alert-message","alert-message-info"],[4,"ngIf"],["singleMode","","required","",3,"labelPlaceholder","labelList","routeDatas","targetSearchKey","subInfoKey","triggerEvent"],[1,"divider-modal"],["mat-raised-button","","color","warn","type","submit",1,"btn","btn-danger",3,"disabled","click"],["color","primary","mat-list-icon","",1,"fa","fa-file","fa-2x"],["mat-line",""],["color","primary","mat-list-icon","",1,"fa","fa-sitemap","fa-2x"],["color","primary","mat-list-icon","",1,"fa","fa-user","fa-2x"],["color","primary","mat-list-icon","",1,"fa","fa-file-alt","fa-2x"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"h2",1),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"mat-dialog-content"),u.Wb(5,"div",2),u.Wb(6,"mat-list"),u.Oc(7,yl,11,8,"mat-list-item",3),u.Oc(8,Dl,11,8,"mat-list-item",3),u.Oc(9,Vl,13,12,"mat-list-item",3),u.Oc(10,Cl,13,12,"mat-list-item",3),u.Vb(),u.Vb(),u.Wb(11,"plugin-autocomplete",4),u.dc("triggerEvent",(function(t){return e.setRedirectEntity(t)})),u.Vb(),u.Vb(),u.Rb(12,"span",5),u.Wb(13,"mat-dialog-actions"),u.Wb(14,"button",6),u.dc("click",(function(){return e.dialogRef.close(e.data.entity)})),u.Qc(15),u.ic(16,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(2),u.Rc(u.jc(3,12,"lang.entityReplacement")),u.Db(5),u.oc("ngIf",e.data.entity.documents>0),u.Db(1),u.oc("ngIf",e.data.entity.instances>0),u.Db(1),u.oc("ngIf",e.data.entity.users.length>0),u.Db(1),u.oc("ngIf",e.data.entity.templates.length>0),u.Db(1),u.oc("labelPlaceholder",e.translate.instant("lang.chooseEntity"))("labelList",e.translate.instant("lang.availableEntities"))("routeDatas",u.uc(16,Wl))("targetSearchKey","idToDisplay")("subInfoKey","descriptionToDisplay"),u.Db(3),u.oc("disabled",void 0===e.data.entity.redirectEntity||e.data.entity.redirectEntity==e.data.entity.entity_id),u.Db(1),u.Rc(u.jc(16,14,"lang.delete")))},directives:[N.i,N.f,Rt.a,O.t,Ft.a,N.c,R.b,Rt.d,Tt.a,Rt.c,j.l],pipes:[p.d,O.p],styles:[".alert-message[_ngcontent-%COMP%] { max-width: inherit; }"]}),xl),Sl=["adminMenuTemplate"];function kl(t,e){1&t&&(u.Wb(0,"mat-nav-list"),u.Wb(1,"h3",11),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"a",12),u.Rb(5,"mat-icon",13),u.Wb(6,"p",14),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(2),u.Rc(u.jc(3,2,"lang.actions")),u.Db(5),u.Sc(" ",u.jc(8,4,"lang.add")," "))}function wl(t,e){1&t&&(u.Wb(0,"div",15),u.Rb(1,"mat-spinner",16),u.Vb())}function Il(t,e){1&t&&(u.Wb(0,"mat-header-cell"),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.imgRelated")))}function jl(t,e){if(1&t&&u.Rb(0,"mat-icon",41),2&t){var a=u.hc().$implicit;u.Gb("fm ",a.img_filename," fm-2x")}}function Rl(t,e){if(1&t&&u.Rb(0,"mat-icon",41),2&t){var a=u.hc().$implicit;u.Gb("fa ",a.img_filename," fa-2x")}}function Tl(t,e){if(1&t&&(u.Wb(0,"mat-cell",39),u.Oc(1,jl,1,3,"mat-icon",40),u.Oc(2,Rl,1,3,"mat-icon",40),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.oc("ngIf",0==a.img_filename.indexOf("fm")),u.Db(1),u.oc("ngIf",0==a.img_filename.indexOf("fa"))}}function Pl(t,e){if(1&t&&(u.Wb(0,"mat-header-cell",42),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=u.hc(2);u.Ib("hide-for-mobile",a.appService.getViewMode()),u.Db(1),u.Rc(u.jc(2,3,"lang.id"))}}function Ql(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.Ib("hide-for-mobile",n.appService.getViewMode()),u.Db(1),u.Sc(" ",a.id," ")}}function Fl(t,e){1&t&&(u.Wb(0,"mat-header-cell",42),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.statusName")))}function Ll(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.label_status," ")}}function El(t,e){1&t&&u.Rb(0,"mat-header-cell")}function Al(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-cell",43),u.Wb(1,"button",44),u.dc("click",(function(t){u.Dc(a);var n=e.$implicit,i=u.hc(2);return t.stopPropagation(),i.deleteStatus(n)})),u.ic(2,"translate"),u.Rb(3,"mat-icon",45),u.Vb(),u.Vb()}2&t&&(u.Db(1),u.pc("matTooltip",u.jc(2,1,"lang.delete")))}function Ul(t,e){1&t&&u.Rb(0,"mat-header-row")}function zl(t,e){1&t&&(u.Rb(0,"mat-row",46),u.ic(1,"translate")),2&t&&(u.qc("routerLink","/administration/statuses/",e.$implicit.identifier,""),u.pc("matTooltip",u.jc(1,2,"lang.view")))}function $l(t,e){if(1&t&&(u.Wb(0,"mat-card",17),u.Wb(1,"div",18),u.Wb(2,"div",19),u.Wb(3,"mat-form-field"),u.Rb(4,"input",20),u.ic(5,"translate"),u.Vb(),u.Vb(),u.Wb(6,"div",19),u.Rb(7,"mat-paginator",21,22),u.Vb(),u.Vb(),u.Wb(9,"mat-table",23,24),u.Ub(11,25),u.Oc(12,Il,3,3,"mat-header-cell",26),u.Oc(13,Tl,3,2,"mat-cell",27),u.Tb(),u.Ub(14,28),u.Oc(15,Pl,3,5,"mat-header-cell",29),u.Oc(16,Ql,2,3,"mat-cell",30),u.Tb(),u.Ub(17,31),u.Oc(18,Fl,3,3,"mat-header-cell",32),u.Oc(19,Ll,2,1,"mat-cell",33),u.Tb(),u.Ub(20,34),u.Oc(21,El,1,0,"mat-header-cell",26),u.Oc(22,Al,4,3,"mat-cell",35),u.Tb(),u.Oc(23,Ul,1,0,"mat-header-row",36),u.Oc(24,zl,2,4,"mat-row",37),u.Vb(),u.Wb(25,"div",38),u.Qc(26),u.ic(27,"translate"),u.Vb(),u.Vb()),2&t){var a=u.hc();u.Db(4),u.pc("placeholder",u.jc(5,10,"lang.filterBy")),u.oc("formControl",a.adminService.getFilterField()),u.Db(3),u.oc("length",100)("hidePageSize",!0)("pageSize",10),u.Db(2),u.oc("dataSource",a.adminService.getDataSource()),u.Db(14),u.oc("matHeaderRowDef",a.displayedColumns),u.Db(1),u.oc("matRowDefColumns",a.displayedColumns),u.Db(2),u.Tc(" ",a.statuses.length," ",u.jc(27,12,"lang.statuses"),"")}}var Nl,Hl=((Nl=function(){function t(e,a,n,i,o,r,c,l){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.headerService=i,this.appService=o,this.functions=r,this.adminService=c,this.viewContainerRef=l,this.loading=!1,this.statuses=[],this.displayedColumns=["img_filename","id","label_status","identifier"],this.filterColumns=["id","label_status"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.statuses")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/statuses").subscribe((function(e){t.statuses=e.statuses,t.loading=!1,setTimeout((function(){t.adminService.setDataSource("admin_status",t.statuses,t.sort,t.paginator,t.filterColumns)}),0)}),(function(e){t.notify.error(e.error.errors)}))}},{key:"deleteStatus",value:function(t){var e=this;confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+t.id+" \xbb")&&this.http.delete("../rest/statuses/"+t.identifier).subscribe((function(t){e.statuses=t.statuses,e.adminService.setDataSource("admin_status",e.statuses,e.sort,e.paginator,e.filterColumns),e.notify.success(e.translate.instant("lang.statusDeleted"))}),(function(t){e.notify.error(t.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||Nl)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a),u.Qb(D.a),u.Qb(jt),u.Qb(u.T))},Nl.\u0275cmp=u.Kb({type:Nl,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(Sl,!0),u.Xc(H.a,!0),u.Xc(B.a,!0)),2&t&&(u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.paginator=a.first),u.yc(a=u.ec())&&(e.sort=a.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/statuses/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","img_filename"],[4,"matHeaderCellDef"],["color","primary",4,"matCellDef"],["matColumnDef","id"],["mat-sort-header","",3,"hide-for-mobile",4,"matHeaderCellDef"],[3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","label_status"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","identifier"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["color","primary"],["aria-hidden","true",3,"class",4,"ngIf"],["aria-hidden","true"],["mat-sort-header",""],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,kl,9,6,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,wl,2,0,"div",9),u.Oc(14,$l,28,14,"mat-card",10),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading))},directives:[C.e,C.f,x.a,W.a,O.t,Rt.h,Rt.g,Rt.d,o.f,Tt.a,Rt.c,j.l,w.c,I.a,S.c,k.b,c.d,c.u,c.j,H.a,q.o,B.a,q.c,q.i,q.b,q.k,q.n,q.h,q.a,B.b,R.b,Qt.b,q.j,q.m,o.d],pipes:[p.d],encapsulation:2}),Nl);function Bl(t,e){1&t&&(u.Wb(0,"div",10),u.Rb(1,"mat-spinner",11),u.Vb())}function Xl(t,e){if(1&t){var a=u.Xb();u.Wb(0,"input",31),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).status.id=t}))("blur",(function(){return u.Dc(a),u.hc(2).isAvailable()})),u.ic(1,"translate"),u.ic(2,"translate"),u.Vb()}if(2&t){var n=u.hc(2);u.pc("title",u.jc(1,4,"lang.id")),u.pc("placeholder",u.jc(2,6,"lang.id")),u.oc("formControl",n.statusId)("ngModel",n.status.id)}}function Gl(t,e){if(1&t){var a=u.Xb();u.Wb(0,"input",32),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).status.id=t})),u.ic(1,"translate"),u.ic(2,"translate"),u.Vb()}if(2&t){var n=u.hc(2);u.pc("title",u.jc(1,3,"lang.id")),u.pc("placeholder",u.jc(2,5,"lang.id")),u.oc("ngModel",n.status.id)}}function ql(t,e){if(1&t&&(u.Wb(0,"mat-error"),u.Qc(1),u.Vb()),2&t){var a=u.hc(2);u.Db(1),u.Rc(a.getErrorMessage())}}var Kl=function(t){return[t]};function Jl(t,e){if(1&t&&(u.Wb(0,"mat-option",33),u.Rb(1,"i",34),u.Qc(2),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a.image_name),u.Db(1),u.Fb(a.image_name),u.oc("ngClass",u.vc(6,Kl,0==a.image_name.indexOf("fm")?"fm":"fa")),u.Db(1),u.Sc(" ",a.image_name," ")}}function Yl(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-card",12),u.Wb(1,"form",13,14),u.dc("ngSubmit",(function(){return u.Dc(a),u.hc().submitStatus()})),u.Wb(3,"div",15),u.Wb(4,"div",16),u.Wb(5,"mat-form-field"),u.Oc(6,Xl,3,8,"input",17),u.Oc(7,Gl,3,7,"input",18),u.Oc(8,ql,2,1,"mat-error",19),u.Vb(),u.Vb(),u.Vb(),u.Wb(9,"div",15),u.Wb(10,"div",16),u.Wb(11,"mat-form-field"),u.Wb(12,"input",20),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().status.label_status=t})),u.ic(13,"translate"),u.ic(14,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(15,"div",15),u.Wb(16,"div",21),u.Wb(17,"mat-slide-toggle",22),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().status.can_be_searched=t})),u.ic(18,"translate"),u.Qc(19),u.ic(20,"translate"),u.Vb(),u.Vb(),u.Wb(21,"div",21),u.Wb(22,"mat-slide-toggle",23),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().status.can_be_modified=t})),u.ic(23,"translate"),u.Qc(24),u.ic(25,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(26,"div",15),u.Wb(27,"div",24),u.Rb(28,"mat-icon",25),u.Vb(),u.Wb(29,"div",26),u.Wb(30,"mat-form-field"),u.Wb(31,"mat-select",27),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().status.img_filename=t})),u.ic(32,"translate"),u.Oc(33,Jl,3,8,"mat-option",28),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(34,"div",15),u.Wb(35,"div",29),u.Wb(36,"button",30),u.Qc(37),u.ic(38,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.zc(2),i=u.hc();u.Db(6),u.oc("ngIf",i.creationMode),u.Db(1),u.oc("ngIf",!i.creationMode),u.Db(1),u.oc("ngIf",i.statusId.invalid),u.Db(4),u.pc("title",u.jc(13,23,"lang.label")),u.pc("placeholder",u.jc(14,25,"lang.label")),u.oc("ngModel",i.status.label_status),u.Db(5),u.pc("matTooltip",u.jc(18,27,"lang.tooltipSearchStatus")),u.oc("ngModel",i.status.can_be_searched)("checked",1==i.status.can_be_searched),u.Db(2),u.Sc(" ",u.jc(20,29,"lang.canBeSearched")," "),u.Db(3),u.pc("matTooltip",u.jc(23,31,"lang.tooltipIndexStatus")),u.oc("ngModel",i.status.can_be_modified)("checked",1==i.status.can_be_modified),u.Db(2),u.Sc(" ",u.jc(25,33,"lang.canBeModified")," "),u.Db(4),u.Fb(i.status.img_filename),u.oc("ngClass",u.vc(39,Kl,0==i.status.img_filename.indexOf("fm")?"fm fm-2x":"fa fa-2x")),u.Db(3),u.pc("placeholder",u.jc(32,35,"lang.imgRelated")),u.oc("ngModel",i.status.img_filename),u.Db(2),u.oc("ngForOf",i.statusImages),u.Db(3),u.oc("disabled",!n.form.valid),u.Db(1),u.Rc(u.jc(38,37,"lang.save"))}}var Zl,ts=((Zl=function(){function t(e,a,n,i,o,r,l){_classCallCheck(this,t),this.translate=e,this.http=a,this.route=n,this.router=i,this.notify=o,this.headerService=r,this.appService=l,this.status={id:null,label_status:null,can_be_searched:null,can_be_modified:null,img_filename:"fm-letter"},this.statusImages="",this.loading=!1,this.statusId=new c.i("",[c.I.required,c.I.pattern(/^[\w.-]*$/)])}return _createClass(t,[{key:"getErrorMessage",value:function(){return this.statusId.hasError("required")?this.translate.instant("lang.enterValue"):this.statusId.hasError("pattern")?this.translate.instant("lang.patternId"):""}},{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.route.params.subscribe((function(e){void 0===e.identifier?(t.headerService.setHeader(t.translate.instant("lang.statusCreation")),t.http.get("../rest/administration/statuses/new").subscribe((function(e){t.status.img_filename="fm-letter",t.status.can_be_searched=!0,t.status.can_be_modified=!0,t.statusImages=e.statusImages,t.creationMode=!0,t.loading=!1})),t.statusIdAvailable=!1):(t.creationMode=!1,t.statusIdentifier=e.identifier,t.http.get("../rest/statuses/"+e.identifier).subscribe((function(e){t.status=e.status[0],t.headerService.setHeader(t.translate.instant("lang.statusModification"),t.status.label_status),t.status.can_be_searched="Y"===t.status.can_be_searched,t.status.can_be_modified="Y"===t.status.can_be_modified,t.statusImages=e.statusImages,t.statusIdAvailable=!0,t.loading=!1}),(function(e){t.notify.error(e.error.errors)})))}))}},{key:"isAvailable",value:function(){var t=this;this.status.id?this.http.get("../rest/status/"+this.status.id).subscribe((function(){t.statusIdAvailable=!1}),(function(e){t.statusIdAvailable=!1,"id not found"===e.error.errors&&(t.statusIdAvailable=!0)})):this.statusIdAvailable=!1}},{key:"submitStatus",value:function(){var t=this;!0===this.creationMode?this.http.post("../rest/statuses",this.status).subscribe((function(){t.notify.success(t.translate.instant("lang.statusAdded")),t.router.navigate(["administration/statuses"])}),(function(e){t.notify.error(e.error.errors)})):!1===this.creationMode&&this.http.put("../rest/statuses/"+this.statusIdentifier,this.status).subscribe((function(){t.notify.success(t.translate.instant("lang.statusUpdated")),t.router.navigate(["administration/statuses"])}),(function(e){t.notify.error(e.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||Zl)(u.Qb(p.e),u.Qb(f.b),u.Qb(o.a),u.Qb(o.c),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a))},Zl.\u0275cmp=u.Kb({type:Zl,selectors:[["ng-component"]],decls:13,vars:8,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"form-horizontal",3,"ngSubmit"],["statusFormUp","ngForm"],[1,"form-group"],[1,"col-sm-12"],["matInput","","maxlength","10","name","id","id","id","type","text","pattern","^[\\w.-]*$","required","",3,"formControl","ngModel","title","placeholder","ngModelChange","blur",4,"ngIf"],["matInput","","maxlength","10","name","id","id","id","required","","disabled","",3,"ngModel","title","placeholder","ngModelChange",4,"ngIf"],[4,"ngIf"],["matInput","","name","label_status","id","label_status","maxlength","50","type","text","required","",3,"ngModel","title","placeholder","ngModelChange"],[1,"col-sm-6",2,"white-space","nowrap","text-align","center"],["id","can_be_search","name","can_be_search","color","primary",3,"matTooltip","ngModel","checked","ngModelChange"],["id","can_be_modified","name","can_be_modified","color","primary",3,"matTooltip","ngModel","checked","ngModelChange"],[1,"col-sm-1",2,"text-align","right"],["aria-hidden","true","color","primary",3,"ngClass"],[1,"col-sm-11"],["id","status","name","status","required","",3,"ngModel","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-12",2,"text-align","center"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["matInput","","maxlength","10","name","id","id","id","type","text","pattern","^[\\w.-]*$","required","",3,"formControl","ngModel","title","placeholder","ngModelChange","blur"],["matInput","","maxlength","10","name","id","id","id","required","","disabled","",3,"ngModel","title","placeholder","ngModelChange"],[3,"value"],["color","primary",3,"ngClass"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Wb(1,"mat-sidenav-content"),u.Wb(2,"div",1),u.Wb(3,"div",2),u.Wb(4,"div",3),u.Rb(5,"header-left"),u.Vb(),u.Wb(6,"div",4),u.Rb(7,"header-right"),u.Vb(),u.Vb(),u.Rb(8,"div",5),u.Vb(),u.Wb(9,"div",6),u.Wb(10,"div",7),u.Oc(11,Bl,2,0,"div",8),u.Oc(12,Yl,39,41,"mat-card",9),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(3),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading))},directives:[C.e,C.f,x.a,W.a,O.t,w.c,I.a,c.K,c.v,c.w,S.c,k.b,c.d,c.p,c.F,c.u,c.x,at.a,Qt.b,Tt.a,O.q,it.a,O.s,R.b,c.B,c.j,S.b,j.p],pipes:[p.d],encapsulation:2}),Zl),es=["snav2"],as=["adminMenuTemplate"];function ns(t,e){1&t&&(u.Wb(0,"mat-nav-list"),u.Wb(1,"h3",11),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"a",12),u.Rb(5,"mat-icon",13),u.Wb(6,"p",14),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(2),u.Rc(u.jc(3,2,"lang.actions")),u.Db(5),u.Sc(" ",u.jc(8,4,"lang.add")," "))}function is(t,e){1&t&&(u.Wb(0,"div",15),u.Rb(1,"mat-spinner",16),u.Vb())}function os(t,e){if(1&t&&(u.Wb(0,"mat-header-cell",38),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=u.hc(2);u.Ib("hide-for-mobile",a.appService.getViewMode()),u.Db(1),u.Rc(u.jc(2,3,"lang.id"))}}function rs(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.Ib("hide-for-mobile",n.appService.getViewMode()),u.Db(1),u.Sc(" ",a.id," ")}}function cs(t,e){1&t&&(u.Wb(0,"mat-header-cell",38),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.actionName")))}function ls(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.label_action," ")}}function ss(t,e){if(1&t&&(u.Wb(0,"mat-header-cell",38),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=u.hc(2);u.Ib("hide-for-mobile",a.appService.getViewMode()),u.Db(1),u.Sc("",u.jc(2,3,"lang.actionHistory")," ")}}function ds(t,e){1&t&&(u.Wb(0,"span"),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc(" ",u.jc(2,1,"lang.no")," "))}function bs(t,e){1&t&&(u.Wb(0,"span"),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc(" ",u.jc(2,1,"lang.yes")," "))}function us(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Oc(1,ds,3,3,"span",39),u.Oc(2,bs,3,3,"span",39),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.Ib("hide-for-mobile",n.appService.getViewMode()),u.Db(1),u.oc("ngIf","N"==a.history),u.Db(1),u.oc("ngIf","Y"==a.history)}}function ps(t,e){1&t&&u.Rb(0,"mat-header-cell")}function fs(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-cell",40),u.Wb(1,"button",41),u.dc("click",(function(t){u.Dc(a);var n=e.$implicit,i=u.hc(2);return t.stopPropagation(),i.deleteAction(n)})),u.ic(2,"translate"),u.Rb(3,"mat-icon",42),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit;u.Db(1),u.pc("matTooltip",u.jc(2,2,"lang.delete")),u.oc("disabled","Y"==n.is_system)}}function ms(t,e){1&t&&u.Rb(0,"mat-header-row")}function gs(t,e){1&t&&(u.Rb(0,"mat-row",43),u.ic(1,"translate")),2&t&&(u.qc("routerLink","/administration/actions/",e.$implicit.id,""),u.pc("matTooltip",u.jc(1,2,"lang.view")))}function hs(t,e){if(1&t&&(u.Wb(0,"mat-card",17),u.Wb(1,"div",18),u.Wb(2,"div",19),u.Wb(3,"mat-form-field"),u.Rb(4,"input",20),u.ic(5,"translate"),u.Vb(),u.Vb(),u.Wb(6,"div",19),u.Rb(7,"mat-paginator",21,22),u.Vb(),u.Vb(),u.Wb(9,"mat-table",23,24),u.Ub(11,25),u.Oc(12,os,3,5,"mat-header-cell",26),u.Oc(13,rs,2,3,"mat-cell",27),u.Tb(),u.Ub(14,28),u.Oc(15,cs,3,3,"mat-header-cell",29),u.Oc(16,ls,2,1,"mat-cell",30),u.Tb(),u.Ub(17,31),u.Oc(18,ss,3,5,"mat-header-cell",26),u.Oc(19,us,3,4,"mat-cell",27),u.Tb(),u.Ub(20,32),u.Oc(21,ps,1,0,"mat-header-cell",33),u.Oc(22,fs,4,4,"mat-cell",34),u.Tb(),u.Oc(23,ms,1,0,"mat-header-row",35),u.Oc(24,gs,2,4,"mat-row",36),u.Vb(),u.Wb(25,"div",37),u.Qc(26),u.ic(27,"translate"),u.Vb(),u.Vb()),2&t){var a=u.hc();u.Db(4),u.pc("placeholder",u.jc(5,10,"lang.filterBy")),u.oc("formControl",a.adminService.getFilterField()),u.Db(3),u.oc("length",100)("hidePageSize",!0)("pageSize",10),u.Db(2),u.oc("dataSource",a.adminService.getDataSource()),u.Db(14),u.oc("matHeaderRowDef",a.displayedColumns),u.Db(1),u.oc("matRowDefColumns",a.displayedColumns),u.Db(2),u.Tc(" ",a.actions.length," ",u.jc(27,12,"lang.actions"),"")}}var vs,ys=((vs=function(){function t(e,a,n,i,o,r,c,l){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.headerService=i,this.appService=o,this.adminService=r,this.functions=c,this.viewContainerRef=l,this.search=null,this.actions=[],this.titles=[],this.loading=!1,this.displayedColumns=["id","label_action","history","actions"],this.filterColumns=["id","label_action"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/actions").subscribe((function(e){t.actions=e.actions,t.headerService.setHeader(t.translate.instant("lang.administration")+" "+t.translate.instant("lang.actions")),t.loading=!1,setTimeout((function(){t.adminService.setDataSource("admin_actions",t.actions,t.sort,t.paginator,t.filterColumns)}),0)}),(function(e){t.notify.handleErrors(e)}))}},{key:"deleteAction",value:function(t){var e=this;confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+t.label_action+" \xbb")&&this.http.delete("../rest/actions/"+t.id).subscribe((function(t){e.actions=t.actions,e.adminService.setDataSource("admin_actions",e.actions,e.sort,e.paginator,e.filterColumns),e.notify.success(e.translate.instant("lang.actionDeleted"))}),(function(t){e.notify.error(t.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||vs)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a),u.Qb(jt),u.Qb(D.a),u.Qb(u.T))},vs.\u0275cmp=u.Kb({type:vs,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(es,!0),u.Kc(as,!0),u.Xc(H.a,!0),u.Xc(B.a,!0)),2&t&&(u.yc(a=u.ec())&&(e.sidenavRight=a.first),u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.paginator=a.first),u.yc(a=u.ec())&&(e.sort=a.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/actions/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"placeholder","formControl"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","id"],["mat-sort-header","",3,"hide-for-mobile",4,"matHeaderCellDef"],[3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","label_action"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","history"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header",""],[4,"ngIf"],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"disabled","matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,ns,9,6,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,is,2,0,"div",9),u.Oc(14,hs,28,14,"mat-card",10),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading))},directives:[C.e,C.f,x.a,W.a,O.t,Rt.h,Rt.g,Rt.d,o.f,Tt.a,Rt.c,j.l,w.c,I.a,S.c,k.b,c.d,c.u,c.j,H.a,q.o,B.a,q.c,q.i,q.b,q.k,q.n,q.h,B.b,q.a,R.b,Qt.b,q.j,q.m,o.d],pipes:[p.d],encapsulation:2}),vs),Ds=a("fBaO"),Vs=["snav2"];function Cs(t,e){1&t&&(u.Wb(0,"div",10),u.Rb(1,"mat-spinner",11),u.Vb())}function xs(t,e){1&t&&(u.Wb(0,"div",28),u.Wb(1,"b"),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Qc(4),u.ic(5,"translate"),u.Vb()),2&t&&(u.Db(2),u.Sc("",u.jc(3,2,"lang.isSytemAction")," !"),u.Db(2),u.Sc(" ",u.jc(5,4,"lang.doNotModifyUnlessExpert")," "))}function Ms(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-chip",32),u.dc("removed",(function(){u.Dc(a);var t=e.index;return u.hc(3).removeSelectedFields(t)})),u.Qc(1),u.Rb(2,"mat-icon",33),u.Vb()}if(2&t){var n=e.$implicit;u.oc("removable",!0),u.Db(1),u.Sc(" ",n," ")}}function Ws(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",16),u.Wb(1,"div",17),u.Wb(2,"plugin-select-search",29),u.dc("afterSelected",(function(){return u.Dc(a),u.hc(2).getSelectedFields()})),u.Vb(),u.Wb(3,"mat-chip-list",30),u.Oc(4,Ms,3,2,"mat-chip",31),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.Db(2),u.Fb(""),u.oc("showLabel",!0)("label",n.translate.instant("lang.checkEmptyFields"))("placeholderLabel",n.translate.instant("lang.checkEmptyFields"))("formControlSelect",n.customFieldsFormControl)("datas",n.availableCustomFields),u.Db(2),u.oc("ngForOf",n.selectedFieldsValue)}}function Os(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",16),u.Wb(1,"div",17),u.Wb(2,"mat-form-field"),u.Wb(3,"mat-select",34),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).arMode=t})),u.ic(4,"translate"),u.ic(5,"translate"),u.Wb(6,"mat-option",35),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Wb(9,"mat-option",36),u.Qc(10),u.ic(11,"translate"),u.Vb(),u.Wb(12,"mat-option",37),u.Qc(13),u.ic(14,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.Db(3),u.pc("title",u.jc(4,7,"lang.generateARMode")),u.pc("placeholder",u.jc(5,9,"lang.generateARMode")),u.oc("required","create_acknowledgement_receipt"==n.action.actionPageId)("ngModel",n.arMode),u.Db(4),u.Rc(u.jc(8,11,"lang.autoAR")),u.Db(3),u.Rc(u.jc(11,13,"lang.manualAR")),u.Db(3),u.Rc(u.jc(14,15,"lang.bothAR"))}}function _s(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",16),u.Wb(1,"div",17),u.Wb(2,"plugin-select-search",29),u.dc("afterSelected",(function(){u.Dc(a);var t=u.hc(2);return t.action.id_status=t.selectStatusId.value})),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.Db(2),u.Fb(""),u.oc("showLabel",!0)("label",n.translate.instant("lang.associatedStatus"))("placeholderLabel",n.translate.instant("lang.associatedStatus"))("formControlSelect",n.selectStatusId)("datas",n.statuses)}}function Ss(t,e){if(1&t&&(u.Wb(0,"mat-option",38),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a.value),u.Db(1),u.Sc(" ",a.label," ")}}function ks(t,e){if(1&t&&(u.Wb(0,"mat-option",39),u.Qc(1),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.oc("value",a.id)("disabled","registeredMail"!==a.id&&"registeredMail"===n.action.actionPageGroup),u.Db(1),u.Sc(" ",a.label," ")}}function ws(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-card",12),u.Oc(1,xs,6,6,"div",13),u.Wb(2,"form",14,15),u.dc("ngSubmit",(function(){return u.Dc(a),u.hc().onSubmit()})),u.Wb(4,"div",16),u.Wb(5,"div",17),u.Wb(6,"mat-form-field"),u.Wb(7,"input",18),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().action.label_action=t})),u.ic(8,"translate"),u.ic(9,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(10,"div",16),u.Wb(11,"div",17),u.Wb(12,"plugin-select-search",19),u.dc("afterSelected",(function(){return u.Dc(a),u.hc().getCustomFields()})),u.Vb(),u.Vb(),u.Vb(),u.Oc(13,Ws,5,8,"div",20),u.Oc(14,Os,15,17,"div",20),u.Oc(15,_s,3,7,"div",20),u.Wb(16,"div",16),u.Wb(17,"div",17),u.Wb(18,"mat-form-field"),u.Wb(19,"mat-select",21),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().action.keyword=t})),u.ic(20,"translate"),u.ic(21,"translate"),u.Oc(22,Ss,2,2,"mat-option",22),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(23,"div",16),u.Wb(24,"div",23),u.Wb(25,"mat-slide-toggle",24),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().action.history=t})),u.ic(26,"translate"),u.Qc(27),u.ic(28,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(29,"div",16),u.Wb(30,"div",17),u.Wb(31,"mat-form-field"),u.Wb(32,"mat-select",25),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().action.actionCategories=t})),u.ic(33,"translate"),u.ic(34,"translate"),u.Oc(35,ks,2,3,"mat-option",26),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(36,"div",16),u.Wb(37,"div",23),u.Wb(38,"button",27),u.Qc(39),u.ic(40,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.zc(3),i=u.hc();u.Db(1),u.oc("ngIf",1==i.action.is_system),u.Db(6),u.pc("title",u.jc(8,30,"lang.label")),u.pc("placeholder",u.jc(9,32,"lang.label")),u.oc("ngModel",i.action.label_action),u.Db(5),u.Fb(""),u.oc("showLabel",!0)("label",i.translate.instant("lang.actionCarriedOut"))("placeholderLabel",i.translate.instant("lang.actionCarriedOut"))("formControlSelect",i.selectActionPageId)("datas",i.actionPages)("optGroupList",i.group)("optGroupTarget","category"),u.Db(1),u.oc("ngIf",!i.functions.empty(i.availableCustomFields)&&"close_mail"==i.action.actionPageId),u.Db(1),u.oc("ngIf","create_acknowledgement_receipt"==i.action.actionPageId),u.Db(1),u.oc("ngIf","reconcile"!=i.action.actionPageId),u.Db(4),u.pc("title",u.jc(20,34,"lang.keyword")),u.pc("placeholder",u.jc(21,36,"lang.keyword")),u.oc("ngModel",i.action.keyword),u.Db(3),u.oc("ngForOf",i.keywordsList),u.Db(3),u.pc("title",u.jc(26,38,"lang.actionHistoryDesc")),u.oc("ngModel",i.action.history)("checked","Y"==i.action.history),u.Db(2),u.Sc(" ",u.jc(28,40,"lang.actionHistory"),""),u.Db(5),u.pc("title",u.jc(33,42,"lang.chooseCategoryAssociation")),u.pc("placeholder",u.jc(34,44,"lang.chooseCategoryAssociation")),u.oc("ngModel",i.action.actionCategories),u.Db(3),u.oc("ngForOf",i.categoriesList),u.Db(3),u.oc("disabled",!n.form.valid),u.Db(1),u.Rc(u.jc(40,46,"lang.save"))}}var Is,js=((Is=function(){function t(e,a,n,i,o,r,l,s){_classCallCheck(this,t),this.translate=e,this.http=a,this.route=n,this.router=i,this.notify=o,this.headerService=r,this.appService=l,this.functions=s,this.action={},this.statuses=[],this.actionPages=[],this.categoriesList=[],this.keywordsList=[],this.group=[],this.loading=!1,this.availableCustomFields=[],this.customFieldsFormControl=new c.i({value:"",disabled:!1}),this.selectedFieldsValue=[],this.selectedFieldsId=[],this.selectActionPageId=new c.i,this.selectStatusId=new c.i}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.route.params.subscribe((function(e){void 0===e.id?(t.creationMode=!0,t.http.get("../rest/initAction").subscribe((function(e){t.action=e.action,t.selectActionPageId.setValue(t.action.actionPageId),t.selectStatusId.setValue(t.action.id_status),t.categoriesList=e.categoriesList,t.statuses=e.statuses.map((function(t){return{id:t.id,label:t.label_status}})),t.actionPages=e.actionPages,t.actionPages.map((function(t){return t.category})).filter((function(t,e,a){return a.indexOf(t)===e})).forEach((function(e){t.group.push({id:e,label:t.translate.instant("lang."+e)})})),t.keywordsList=e.keywordsList,t.headerService.setHeader(t.translate.instant("lang.actionCreation")),t.loading=!1}))):(t.creationMode=!1,t.http.get("../rest/actions/"+e.id).subscribe((function(e){return Object(yt.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){var a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.action=e.action,this.selectActionPageId.setValue(this.action.actionPageId),this.selectStatusId.setValue(this.action.id_status),this.categoriesList=e.categoriesList,this.statuses=e.statuses.map((function(t){return{id:t.id,label:t.label_status}})),this.actionPages=e.actionPages,this.actionPages.map((function(t){return t.category})).filter((function(t,e,a){return a.indexOf(t)===e})).forEach((function(t){a.group.push({id:t,label:a.translate.instant("lang."+t)})})),this.keywordsList=e.keywordsList,this.headerService.setHeader(this.translate.instant("lang.actionCreation"),e.action.label_action),t.next=11,this.getCustomFields();case 11:this.loading=!1,"close_mail"===this.action.actionPageId?(this.customFieldsFormControl=new c.i({value:this.action.parameters.requiredFields,disabled:!1}),this.selectedFieldsId=[],this.action.parameters.requiredFields&&(this.selectedFieldsId=this.action.parameters.requiredFields),this.selectedFieldsId.forEach((function(t){a.availableCustomFields.forEach((function(e){e.id===t&&a.selectedFieldsValue.push(e.label)}))}))):"create_acknowledgement_receipt"===this.action.actionPageId&&(this.arMode=this.action.parameters.mode);case 13:case"end":return t.stop()}}),t,this)})))})))}))}},{key:"getCustomFields",value:function(){var t=this;return this.action.actionPageId=this.selectActionPageId.value,this.action.actionPageGroup=this.actionPages.filter((function(e){return e.id===t.action.actionPageId}))[0].category,"registeredMail"===this.action.actionPageGroup&&(this.action.actionCategories=["registeredMail"]),new Promise((function(e,a){"close_mail"===t.action.actionPageId&&t.functions.empty(t.availableCustomFields)?t.http.get("../rest/customFields").pipe(Object(d.a)((function(a){return t.availableCustomFields=a.customFields.map((function(t){return t.id="indexingCustomField_"+t.id,t})),e(!0)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe():e(!0)}))}},{key:"getSelectedFields",value:function(){var t=this;this.availableCustomFields.forEach((function(e){e.id===t.customFieldsFormControl.value&&(t.selectedValue=e)})),this.selectedFieldsId.indexOf(this.customFieldsFormControl.value)<0&&(this.selectedFieldsValue.push(this.selectedValue.label),this.selectedFieldsId.push(this.customFieldsFormControl.value)),this.customFieldsFormControl.reset()}},{key:"removeSelectedFields",value:function(t){this.selectedFieldsValue.splice(t,1),this.selectedFieldsId.splice(t,1)}},{key:"onSubmit",value:function(){var t=this;"close_mail"===this.action.actionPageId?this.action.parameters={requiredFields:this.selectedFieldsId}:"create_acknowledgement_receipt"===this.action.actionPageId&&(this.action.parameters={mode:this.arMode}),this.creationMode?this.http.post("../rest/actions",this.action).subscribe((function(){t.router.navigate(["/administration/actions"]),t.notify.success(t.translate.instant("lang.actionAdded"))}),(function(e){t.notify.error(e.error.errors)})):this.http.put("../rest/actions/"+this.action.id,this.action).subscribe((function(){t.router.navigate(["/administration/actions"]),t.notify.success(t.translate.instant("lang.actionUpdated"))}),(function(e){t.notify.error(e.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||Is)(u.Qb(p.e),u.Qb(f.b),u.Qb(o.a),u.Qb(o.c),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a),u.Qb(D.a))},Is.\u0275cmp=u.Kb({type:Is,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&u.Kc(Vs,!0),2&t&&u.yc(a=u.ec())&&(e.sidenavRight=a.first)},decls:13,vars:8,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"form-horizontal",3,"ngSubmit"],["actionsFormUp","ngForm"],[1,"form-group"],[1,"col-sm-12"],["matInput","","required","","name","action_name","id","action_name","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],[2,"width","100%",3,"showLabel","label","placeholderLabel","formControlSelect","datas","optGroupList","optGroupTarget","afterSelected"],["class","form-group",4,"ngIf"],["id","keyword","name","keyword",3,"title","placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-12",2,"text-align","center"],["name","history","id","history","color","primary",3,"title","ngModel","checked","ngModelChange"],["id","categorieslist","name","categorieslist","multiple","","required","",3,"title","placeholder","ngModel","ngModelChange"],[3,"value","disabled",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["role","alert",1,"alert","alert-danger"],[2,"width","100%",3,"showLabel","label","placeholderLabel","formControlSelect","datas","afterSelected"],[1,"checkbox-selected-list"],["selected","",3,"removable","removed",4,"ngFor","ngForOf"],["selected","",3,"removable","removed"],["matChipRemove","",1,"fa","fa-times-circle"],["id","generateARmode","name","generateARmode",3,"required","title","placeholder","ngModel","ngModelChange"],["value","auto"],["value","manual"],["value","both"],[3,"value"],[3,"value","disabled"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Wb(1,"mat-sidenav-content"),u.Wb(2,"div",1),u.Wb(3,"div",2),u.Wb(4,"div",3),u.Rb(5,"header-left"),u.Vb(),u.Wb(6,"div",4),u.Rb(7,"header-right"),u.Vb(),u.Vb(),u.Rb(8,"div",5),u.Vb(),u.Wb(9,"div",6),u.Wb(10,"div",7),u.Oc(11,Cs,2,0,"div",8),u.Oc(12,ws,41,48,"mat-card",9),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(3),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading))},directives:[C.e,C.f,x.a,W.a,O.t,w.c,I.a,c.K,c.v,c.w,S.c,k.b,c.d,c.F,c.p,c.u,c.x,Ds.a,it.a,O.s,at.a,R.b,eo.d,eo.a,Tt.a,eo.e,j.p],pipes:[p.d],encapsulation:2}),Is);function Rs(t,e){1&t&&(u.Wb(0,"div",10),u.Rb(1,"mat-spinner",11),u.Vb())}function Ts(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-form-field"),u.Wb(1,"input",27),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).parameter.param_value_string=t})),u.ic(2,"translate"),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.Db(1),u.pc("placeholder",u.jc(2,2,"lang.value")),u.oc("ngModel",n.parameter.param_value_string)}}function Ps(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-form-field"),u.Wb(1,"input",28),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).parameter.param_value_int=t})),u.ic(2,"translate"),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.Db(1),u.pc("placeholder",u.jc(2,2,"lang.value")),u.oc("ngModel",n.parameter.param_value_int)}}function Qs(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-form-field"),u.Wb(1,"input",29),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).parameter.param_value_date=t})),u.ic(2,"translate"),u.Vb(),u.Rb(3,"mat-datepicker-toggle",30),u.Rb(4,"mat-datepicker",31,32),u.Vb()}if(2&t){var n=u.zc(5),i=u.hc(2);u.Db(1),u.pc("placeholder",u.jc(2,4,"lang.date")),u.oc("ngModel",i.parameter.param_value_date)("matDatepicker",n),u.Db(2),u.oc("for",n)}}function Fs(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-card",12),u.Wb(1,"form",13,14),u.dc("ngSubmit",(function(){return u.Dc(a),u.hc().onSubmit()})),u.Wb(3,"div",15),u.Wb(4,"div",16),u.Wb(5,"mat-form-field"),u.Wb(6,"input",17),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().parameter.id=t})),u.ic(7,"translate"),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(9,"div",15),u.Wb(10,"div",16),u.Wb(11,"mat-form-field"),u.Wb(12,"input",18),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().parameter.description=t})),u.ic(13,"translate"),u.ic(14,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(15,"div",15),u.Wb(16,"div",19),u.Wb(17,"mat-form-field"),u.Wb(18,"mat-select",20),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().type=t})),u.ic(19,"translate"),u.Wb(20,"mat-option",21),u.Qc(21),u.ic(22,"translate"),u.Vb(),u.Wb(23,"mat-option",22),u.Qc(24),u.ic(25,"translate"),u.Vb(),u.Wb(26,"mat-option",23),u.Qc(27),u.ic(28,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(29,"div",19),u.Oc(30,Ts,3,4,"mat-form-field",24),u.Oc(31,Ps,3,4,"mat-form-field",24),u.Oc(32,Qs,6,6,"mat-form-field",24),u.Vb(),u.Vb(),u.Wb(33,"div",15),u.Wb(34,"div",25),u.Wb(35,"button",26),u.Qc(36),u.ic(37,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.zc(2),i=u.hc();u.Db(6),u.pc("title",u.jc(7,18,"lang.id")),u.pc("placeholder",u.jc(8,20,"lang.id")),u.oc("ngModel",i.parameter.id)("disabled",!i.creationMode),u.Db(6),u.pc("title",u.jc(13,22,"lang.description")),u.pc("placeholder",u.jc(14,24,"lang.description")),u.oc("ngModel",i.parameter.description),u.Db(6),u.pc("placeholder",u.jc(19,26,"lang.type")),u.oc("ngModel",i.type)("disabled",!i.creationMode),u.Db(3),u.Sc(" ",u.jc(22,28,"lang.stringInput")," "),u.Db(3),u.Sc(" ",u.jc(25,30,"lang.integer")," "),u.Db(3),u.Sc(" ",u.jc(28,32,"lang.date")," "),u.Db(3),u.oc("ngIf","string"==i.type),u.Db(1),u.oc("ngIf","int"==i.type),u.Db(1),u.oc("ngIf","date"==i.type),u.Db(3),u.oc("disabled",!n.form.valid),u.Db(1),u.Rc(u.jc(37,34,"lang.save"))}}var Ls,Es=((Ls=function(){function t(e,a,n,i,o,r,c){_classCallCheck(this,t),this.translate=e,this.http=a,this.route=n,this.router=i,this.notify=o,this.headerService=r,this.appService=c,this.loading=!1,this.parameter={}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.route.params.subscribe((function(e){void 0===e.id?(t.headerService.setHeader(t.translate.instant("lang.parameterCreation")),t.creationMode=!0,t.loading=!1):(t.creationMode=!1,t.http.get("../rest/parameters/"+e.id).subscribe((function(e){t.parameter=e.parameter,t.headerService.setHeader(t.translate.instant("lang.parameterModification"),t.parameter.id),t.type="number"==typeof t.parameter.param_value_int?"int":t.parameter.param_value_date?"date":"string",t.loading=!1}),(function(e){t.notify.handleErrors(e)})))}))}},{key:"onSubmit",value:function(){var t=this;"date"===this.type?(this.parameter.param_value_int=null,this.parameter.param_value_string=null):"int"===this.type?(this.parameter.param_value_date=null,this.parameter.param_value_string=null):"string"===this.type&&(this.parameter.param_value_date=null,this.parameter.param_value_int=null),!0===this.creationMode?this.http.post("../rest/parameters",this.parameter).subscribe((function(){t.router.navigate(["administration/parameters"]),t.notify.success(t.translate.instant("lang.parameterAdded"))}),(function(e){t.notify.error(e.error.errors)})):!1===this.creationMode&&this.http.put("../rest/parameters/"+this.parameter.id,this.parameter).subscribe((function(){t.router.navigate(["administration/parameters"]),t.notify.success(t.translate.instant("lang.parameterUpdated"))}),(function(e){t.notify.error(e.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||Ls)(u.Qb(p.e),u.Qb(f.b),u.Qb(o.a),u.Qb(o.c),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a))},Ls.\u0275cmp=u.Kb({type:Ls,selectors:[["ng-component"]],decls:13,vars:8,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"form-horizontal",3,"ngSubmit"],["parameterForm","ngForm"],[1,"form-group"],[1,"col-sm-12"],["matInput","","name","id","type","text","pattern","^[\\w-]*$","required","",3,"ngModel","disabled","title","placeholder","ngModelChange"],["matInput","","name","description","id","description","type","text",3,"ngModel","title","placeholder","ngModelChange"],[1,"col-sm-6"],["name","type","required","",3,"placeholder","ngModel","disabled","ngModelChange"],["value","string"],["value","int"],["value","date"],[4,"ngIf"],[1,"col-sm-12",2,"text-align","center"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["matInput","","name","paramValueString","type","text","required","",3,"ngModel","placeholder","ngModelChange"],["matInput","","name","paramValueInt","type","number","pattern","^[0-9]*$","required","",3,"ngModel","placeholder","ngModelChange"],["matInput","","name","paramValueDate","required","",3,"ngModel","matDatepicker","placeholder","ngModelChange"],["matSuffix","",3,"for"],["startView","month"],["picker",""]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Wb(1,"mat-sidenav-content"),u.Wb(2,"div",1),u.Wb(3,"div",2),u.Wb(4,"div",3),u.Rb(5,"header-left"),u.Vb(),u.Wb(6,"div",4),u.Rb(7,"header-right"),u.Vb(),u.Vb(),u.Rb(8,"div",5),u.Vb(),u.Wb(9,"div",6),u.Wb(10,"div",7),u.Oc(11,Rs,2,0,"div",8),u.Oc(12,Fs,38,36,"mat-card",9),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(3),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading))},directives:[C.e,C.f,x.a,W.a,O.t,w.c,I.a,c.K,c.v,c.w,S.c,k.b,c.d,c.B,c.F,c.u,c.x,it.a,j.p,R.b,c.A,He.h,He.j,S.j,He.f],pipes:[p.d],encapsulation:2}),Ls),As=a("Kj3r"),Us=a("jhN1");function zs(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-card",17),u.dc("click",(function(){u.Dc(a);var t=e.$implicit;return u.hc().selectBg(t.url)})),u.Vb()}if(2&t){var n=e.$implicit,i=u.hc();u.Lc("background","url("+n.url+")"),u.Ib("selected",n.url===i.stepFormGroup.controls.bodyImage.value)("disabled",i.stepFormGroup.controls.bodyImage.disabled)}}function $s(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-card",18),u.dc("click",(function(){return u.Dc(a),u.zc(2).click()})),u.Wb(1,"input",19,20),u.dc("change",(function(t){return u.Dc(a),u.hc().uploadTrigger(t,"bg")})),u.Vb(),u.Rb(3,"i",21),u.Vb()}}var Ns,Hs=((Ns=function(){function t(e,a,n,i,o,r){_classCallCheck(this,t),this.translate=e,this._formBuilder=a,this.notify=n,this.sanitizer=i,this.scanPipe=o,this.http=r,this.readonlyState=!1,this.backgroundList=[],c.I.pattern(/^[a-zA-Z0-9_\-]*$/),this.stepFormGroup=this._formBuilder.group({applicationName:["",c.I.required],loginpage_message:[""],homepage_message:[""],traffic_record_summary_sheet:[""],bodyImage:["../rest/images?image=loginPage"],logo:["../rest/images?image=logo"]}),this.backgroundList=Array.from({length:16}).map((function(t,e){return{filename:e+1+".jpg",url:"assets/".concat(e+1,".jpg")}}))}return _createClass(t,[{key:"ngOnInit",value:function(){return Object(yt.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getParameters();case 2:case"end":return t.stop()}}),t,this)})))}},{key:"getParameters",value:function(){var t=this;return new Promise((function(e){t.http.get("../rest/parameters").pipe(Object(d.a)((function(e){t.stepFormGroup.controls.homepage_message.setValue(e.parameters.filter((function(t){return"homepage_message"===t.id}))[0].value),t.stepFormGroup.controls.loginpage_message.setValue(e.parameters.filter((function(t){return"loginpage_message"===t.id}))[0].value),t.stepFormGroup.controls.traffic_record_summary_sheet.setValue(e.parameters.filter((function(t){return"traffic_record_summary_sheet"===t.id}))[0].value)})),Object(Y.a)((function(){return t.http.get("../rest/authenticationInformations")})),Object(d.a)((function(e){t.stepFormGroup.controls.applicationName.setValue(e.applicationName),setTimeout((function(){t.stepFormGroup.controls.applicationName.valueChanges.pipe(Object(As.a)(1e3),Object(d.a)((function(){return t.saveParameter("applicationName")}))).subscribe(),t.stepFormGroup.controls.homepage_message.valueChanges.pipe(Object(As.a)(100),Object(d.a)((function(){return t.saveParameter("homepage_message")}))).subscribe(),t.stepFormGroup.controls.loginpage_message.valueChanges.pipe(Object(As.a)(100),Object(d.a)((function(){return t.saveParameter("loginpage_message")}))).subscribe(),t.stepFormGroup.controls.traffic_record_summary_sheet.valueChanges.pipe(Object(As.a)(100),Object(d.a)((function(){return t.saveParameter("traffic_record_summary_sheet")}))).subscribe(),t.initMce()}),100)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}))}},{key:"isValidStep",value:function(){return void 0!==this.stepFormGroup&&this.stepFormGroup.valid}},{key:"initMce",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a={selector:"#loginpage_message",setup:function(e){e.on("Blur",(function(e){t.stepFormGroup.controls[e.target.id].setValue(tinymce.get(e.target.id).getContent())}))},base_url:"../node_modules/tinymce/",height:"200",suffix:".min",language:this.translate.instant("lang.langISO").replace("-","_"),language_url:"../node_modules/tinymce-i18n/langs/".concat(this.translate.instant("lang.langISO").replace("-","_"),".js"),menubar:!1,statusbar:!1,readonly:e,plugins:["autolink","table","code"],external_plugins:{maarch_b64image:"../../src/frontend/plugins/tinymce/maarch_b64image/plugin.min.js"},table_toolbar:"",table_sizing_mode:"relative",table_resize_bars:!1,toolbar_sticky:!0,toolbar_drawer:"floating",table_style_by_css:!0,content_style:"table td { padding: 1px; vertical-align: top; }",forced_root_block:!1,toolbar:e?"":"undo redo | fontselect fontsizeselect | bold italic underline strikethrough forecolor | table maarch_b64image |         alignleft aligncenter alignright alignjustify         bullist numlist outdent indent | removeformat code"};tinymce.init(a),a.selector="#homepage_message",tinymce.init(a),a.selector="#traffic_record_summary_sheet",a.height="500",tinymce.init(a)}},{key:"uploadTrigger",value:function(t,e){var a=this;if(t.target.files&&t.target.files[0]){var n=this.canUploadFile(t.target.files[0],e);if(!0===n){var i=new FileReader;i.readAsDataURL(t.target.files[0]),i.onload=function(t){if("logo"===e)a.stepFormGroup.controls.logo.setValue(t.target.result),a.saveParameter("logo");else{var n=new Image;n.onload=function(e){e.target.width<1920||e.target.height<1080?a.notify.error(a.translate.instant("lang.badImageResolution",{value1:"1920x1080"})):(a.backgroundList.push({filename:t.target.result,url:t.target.result}),a.stepFormGroup.controls.bodyImage.setValue(t.target.result),a.saveParameter("bodyImage"))},n.src=t.target.result}}}else this.notify.error(n)}}},{key:"canUploadFile",value:function(t,e){var a="logo"!==e?["image/jpg","image/jpeg"]:["image/svg+xml"];if("logo"===e){if(t.size>5e6)return this.translate.instant("lang.maxFileSizeExceeded",{value1:"5mo"});if(-1===a.indexOf(t.type))return this.translate.instant("lang.onlyExtensionsAllowed",{value1:a.join(", ")})}else{if(t.size>1e7)return this.translate.instant("lang.maxFileSizeExceeded",{value1:"10mo"});if(-1===a.indexOf(t.type))return this.translate.instant("lang.onlyExtensionsAllowed",{value1:a.join(", ")})}return!0}},{key:"logoURL",value:function(){return this.sanitizer.bypassSecurityTrustUrl(this.stepFormGroup.controls.logo.value)}},{key:"selectBg",value:function(t){this.stepFormGroup.controls.bodyImage.disabled||(this.stepFormGroup.controls.bodyImage.setValue(t),this.saveParameter("bodyImage"))}},{key:"clickLogoButton",value:function(t){this.stepFormGroup.controls.logo.disabled||t.click()}},{key:"saveParameter",value:function(t){var e=this,a={};"logo"===t||"bodyImage"===t?a.image=this.stepFormGroup.controls[t].value:"applicationName"===t?a.applicationName=this.stepFormGroup.controls[t].value:a={param_value_string:this.stepFormGroup.controls[t].value},this.http.put("../rest/parameters/"+t,a).subscribe((function(){e.notify.success(e.translate.instant("lang.parameterUpdated")),"logo"===t&&setTimeout((function(){window.location.reload()}),500)}),(function(t){e.notify.error(t.error.errors)}))}},{key:"ngOnDestroy",value:function(){tinymce.remove()}}]),t}()).\u0275fac=function(t){return new(t||Ns)(u.Qb(p.e),u.Qb(c.h),u.Qb(y.a),u.Qb(Us.b),u.Qb(v.o),u.Qb(f.b))},Ns.\u0275cmp=u.Kb({type:Ns,selectors:[["app-parameters-customization"]],features:[u.Cb([v.o])],decls:44,vars:30,consts:[[2,"display","contents",3,"formGroup"],[1,"col-md-6"],["appearance","outline"],["matInput","","formControlName","applicationName"],["name","loginpage_message","id","loginpage_message","formControlName","loginpage_message",2,"padding-top","10px"],["name","homepage_message","id","homepage_message","formControlName","homepage_message",2,"padding-top","10px"],["matRipple","",2,"width","350px","background-size","100%","cursor","pointer"],[2,"width","100%",3,"src","click"],["type","file","name","files[]","accept","image/svg+xml",2,"display","none",3,"change"],["uploadLogo",""],[1,"backgroundList"],[1,"backgroundItem",2,"background","url(../rest/images?image=loginPage)","background-size","cover"],[1,"backgroundItem",2,"background","url(assets/bodylogin.jpg)","background-size","cover",3,"click"],["style","opacity: 0.3;","class","backgroundItem",3,"selected","disabled","background","click",4,"ngFor","ngForOf"],["style","opacity: 0.3;display: flex;align-items: center;justify-content: center;","class","backgroundItem",3,"click",4,"ngIf"],[1,"col-md-10",2,"margin-top","20px"],["name","traffic_record_summary_sheet","id","traffic_record_summary_sheet","formControlName","traffic_record_summary_sheet",2,"padding-top","10px"],[1,"backgroundItem",2,"opacity","0.3",3,"click"],[1,"backgroundItem",2,"opacity","0.3","display","flex","align-items","center","justify-content","center",3,"click"],["type","file","name","files[]","accept","image/jpeg",2,"display","none",3,"change"],["uploadFile",""],[1,"fa","fa-plus",2,"font-size","30px","color","#666"]],template:function(t,e){if(1&t){var a=u.Xb();u.Wb(0,"form",0),u.Wb(1,"div",1),u.Wb(2,"mat-form-field",2),u.Wb(3,"mat-label"),u.Qc(4),u.ic(5,"translate"),u.Vb(),u.Rb(6,"input",3),u.Vb(),u.Wb(7,"div"),u.Qc(8),u.ic(9,"translate"),u.Vb(),u.Rb(10,"textarea",4),u.Rb(11,"br"),u.Rb(12,"br"),u.Wb(13,"div"),u.Qc(14),u.ic(15,"translate"),u.Vb(),u.Rb(16,"textarea",5),u.Rb(17,"br"),u.Rb(18,"br"),u.Vb(),u.Wb(19,"div",1),u.Wb(20,"div"),u.Qc(21),u.ic(22,"translate"),u.Vb(),u.Wb(23,"div"),u.Wb(24,"mat-card",6),u.Wb(25,"img",7),u.dc("click",(function(){u.Dc(a);var t=u.zc(27);return e.clickLogoButton(t)})),u.Vb(),u.Wb(26,"input",8,9),u.dc("change",(function(t){return e.uploadTrigger(t,"logo")})),u.Vb(),u.Vb(),u.Vb(),u.Rb(28,"br"),u.Wb(29,"div"),u.Qc(30),u.ic(31,"translate"),u.Vb(),u.Wb(32,"div",10),u.Rb(33,"mat-card",11),u.Wb(34,"mat-card",12),u.dc("click",(function(){return e.selectBg("assets/bodylogin.jpg")})),u.Vb(),u.Oc(35,zs,1,6,"mat-card",13),u.Oc(36,$s,4,0,"mat-card",14),u.Vb(),u.Vb(),u.Wb(37,"div",15),u.Wb(38,"div"),u.Qc(39),u.ic(40,"translate"),u.Vb(),u.Rb(41,"textarea",16),u.Rb(42,"br"),u.Rb(43,"br"),u.Vb(),u.Vb()}2&t&&(u.oc("formGroup",e.stepFormGroup),u.Db(4),u.Rc(u.jc(5,18,"lang.applicationName")),u.Db(4),u.Sc("",u.jc(9,20,"lang.loginMsg")," : "),u.Db(6),u.Sc("",u.jc(15,22,"lang.homeMsg")," : "),u.Db(7),u.Sc("",u.jc(22,24,"lang.chooseLogo")," : "),u.Db(4),u.oc("src",e.logoURL(),u.Gc),u.Db(5),u.Sc("",u.jc(31,26,"lang.chooseLoginBg")," : "),u.Db(3),u.Ib("disabled",e.stepFormGroup.controls.bodyImage.disabled)("selected","../rest/images?image=loginPage"===e.stepFormGroup.controls.bodyImage.value),u.Db(1),u.Ib("disabled",e.stepFormGroup.controls.bodyImage.disabled)("selected","assets/bodylogin.jpg"===e.stepFormGroup.controls.bodyImage.value),u.Db(1),u.oc("ngForOf",e.backgroundList),u.Db(1),u.oc("ngIf",!e.stepFormGroup.controls.bodyImage.disabled),u.Db(3),u.Sc("",u.jc(40,28,"lang.trafficRecordSummarySheetParameters")," : "))},directives:[c.K,c.v,c.m,S.c,S.g,k.b,c.d,c.u,c.k,I.a,j.u,O.s,O.t],pipes:[p.d],styles:[".backgroundList[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);grid-gap:10px}.selected[_ngcontent-%COMP%]{transition:all .3s;opacity:1!important;border:10px solid #f99830!important}.backgroundItem[_ngcontent-%COMP%]{border:0 solid #f99830;opacity:.5;transition:all .3s;cursor:pointer;height:120px;background-size:cover!important}.disabled[_ngcontent-%COMP%]{cursor:default!important}.backgroundItem[_ngcontent-%COMP%]:not(.disabled):hover{transition:all .3s;opacity:1!important}"]}),Ns),Bs=["adminMenuTemplate"];function Xs(t,e){1&t&&(u.Wb(0,"mat-nav-list"),u.Wb(1,"h3",11),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"a",12),u.Rb(5,"mat-icon",13),u.Wb(6,"p",14),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(2),u.Rc(u.jc(3,2,"lang.actions")),u.Db(5),u.Sc(" ",u.jc(8,4,"lang.add")," "))}function Gs(t,e){1&t&&(u.Wb(0,"div",15),u.Rb(1,"mat-spinner",16),u.Vb())}function qs(t,e){1&t&&(u.Wb(0,"mat-header-cell",40),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc("",u.jc(2,1,"lang.id")," "))}function Ks(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.id," ")}}function Js(t,e){if(1&t&&(u.Wb(0,"mat-header-cell",40),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=u.hc(2);u.Ib("hide-for-mobile",a.appService.getViewMode()),u.Db(1),u.Sc(" ",u.jc(2,3,"lang.description")," ")}}function Ys(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.Ib("hide-for-mobile",n.appService.getViewMode()),u.Db(1),u.Sc(" ",a.description," ")}}function Zs(t,e){1&t&&(u.Wb(0,"mat-header-cell",40),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc("",u.jc(2,1,"lang.value")," "))}function td(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.value," ")}}function ed(t,e){1&t&&u.Rb(0,"mat-header-cell")}function ad(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-cell",41),u.Wb(1,"button",42),u.dc("click",(function(t){u.Dc(a);var n=e.$implicit,i=u.hc(2);return t.stopPropagation(),i.deleteParameter(n.id)})),u.ic(2,"translate"),u.Rb(3,"mat-icon",43),u.Vb(),u.Vb()}2&t&&(u.Db(1),u.pc("matTooltip",u.jc(2,1,"lang.delete")))}function nd(t,e){1&t&&u.Rb(0,"mat-header-row")}function id(t,e){1&t&&(u.Rb(0,"mat-row",44),u.ic(1,"translate")),2&t&&(u.qc("routerLink","/administration/parameters/",e.$implicit.id,""),u.pc("matTooltip",u.jc(1,2,"lang.view")))}function od(t,e){1&t&&u.Rb(0,"app-parameters-customization")}function rd(t,e){if(1&t&&(u.Wb(0,"mat-card",17),u.Wb(1,"mat-tab-group"),u.Wb(2,"mat-tab",18),u.ic(3,"translate"),u.Wb(4,"div",19),u.Wb(5,"div",20),u.Wb(6,"mat-form-field"),u.Rb(7,"input",21),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Wb(9,"div",20),u.Rb(10,"mat-paginator",22,23),u.Vb(),u.Vb(),u.Wb(12,"mat-table",24,25),u.Ub(14,26),u.Oc(15,qs,3,3,"mat-header-cell",27),u.Oc(16,Ks,2,1,"mat-cell",28),u.Tb(),u.Ub(17,29),u.Oc(18,Js,3,5,"mat-header-cell",30),u.Oc(19,Ys,2,3,"mat-cell",31),u.Tb(),u.Ub(20,32),u.Oc(21,Zs,3,3,"mat-header-cell",27),u.Oc(22,td,2,1,"mat-cell",28),u.Tb(),u.Ub(23,33),u.Oc(24,ed,1,0,"mat-header-cell",34),u.Oc(25,ad,4,3,"mat-cell",35),u.Tb(),u.Oc(26,nd,1,0,"mat-header-row",36),u.Oc(27,id,2,4,"mat-row",37),u.Vb(),u.Wb(28,"div",38),u.Qc(29),u.ic(30,"translate"),u.Vb(),u.Vb(),u.Wb(31,"mat-tab",18),u.ic(32,"translate"),u.Oc(33,od,1,0,"ng-template",39),u.Vb(),u.Vb(),u.Vb()),2&t){var a=u.hc();u.Db(2),u.oc("label",u.jc(3,12,"lang.technicalParameters")),u.Db(5),u.pc("placeholder",u.jc(8,14,"lang.filterBy")),u.oc("formControl",a.adminService.getFilterField()),u.Db(3),u.oc("length",100)("hidePageSize",!0)("pageSize",10),u.Db(2),u.oc("dataSource",a.adminService.getDataSource()),u.Db(14),u.oc("matHeaderRowDef",a.displayedColumns),u.Db(1),u.oc("matRowDefColumns",a.displayedColumns),u.Db(2),u.Tc(" ",a.parameters.length," ",u.jc(30,16,"lang.parameters"),""),u.Db(2),u.oc("label",u.jc(32,18,"lang.customization"))}}var cd,ld=((cd=function(){function t(e,a,n,i,o,r,c,l){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.headerService=i,this.appService=o,this.functions=r,this.adminService=c,this.viewContainerRef=l,this.parameters={},this.loading=!1,this.displayedColumns=["id","description","value","actions"],this.filterColumns=["id","description","value"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.parameters")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/parameters").subscribe((function(e){t.parameters=e.parameters.filter((function(t){return-1===["homepage_message","loginpage_message","traffic_record_summary_sheet"].indexOf(t.id)})),t.loading=!1,setTimeout((function(){t.adminService.setDataSource("admin_parameters",t.parameters,t.sort,t.paginator,t.filterColumns)}),0)}))}},{key:"deleteParameter",value:function(t){var e=this;confirm(this.translate.instant("lang.deleteMsg"))&&this.http.delete("../rest/parameters/"+t).subscribe((function(t){e.parameters=t.parameters.filter((function(t){return-1===["homepage_message","loginpage_message","traffic_record_summary_sheet"].indexOf(t.id)})),e.adminService.setDataSource("admin_parameters",e.parameters,e.sort,e.paginator,e.filterColumns),e.notify.success(e.translate.instant("lang.parameterDeleted"))}),(function(t){e.notify.error(t.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||cd)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a),u.Qb(D.a),u.Qb(jt),u.Qb(u.T))},cd.\u0275cmp=u.Kb({type:cd,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(Bs,!0),u.Xc(H.a,!0),u.Xc(B.a,!0)),2&t&&(u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.paginator=a.first),u.yc(a=u.ec())&&(e.sort=a.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/parameters/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[3,"label"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","description"],["mat-sort-header","",3,"hide-for-mobile",4,"matHeaderCellDef"],[3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","value"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["matTabContent",""],["mat-sort-header",""],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,Xs,9,6,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,Gs,2,0,"div",9),u.Oc(14,rd,34,20,"mat-card",10),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading))},directives:[C.e,C.f,x.a,W.a,O.t,Rt.h,Rt.g,Rt.d,o.f,Tt.a,Rt.c,j.l,w.c,I.a,Ee.c,Ee.a,S.c,k.b,c.d,c.u,c.j,H.a,q.o,B.a,q.c,q.i,q.b,q.k,q.n,Ee.b,q.h,B.b,q.a,R.b,Qt.b,q.j,q.m,o.d,Hs],pipes:[p.d],encapsulation:2}),cd),sd=["snav2"],dd=["adminMenuTemplate"];function bd(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-nav-list"),u.Wb(1,"h3",16),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"a",17),u.Rb(5,"mat-icon",18),u.Wb(6,"p",19),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Wb(9,"a",20),u.dc("click",(function(){return u.Dc(a),u.hc(),u.zc(16).toggle()})),u.Rb(10,"mat-icon",21),u.Wb(11,"p",19),u.Qc(12),u.ic(13,"translate"),u.Vb(),u.Vb(),u.Vb()}2&t&&(u.Db(2),u.Rc(u.jc(3,3,"lang.actions")),u.Db(5),u.Sc(" ",u.jc(8,5,"lang.add")," "),u.Db(5),u.Sc(" ",u.jc(13,7,"lang.prioritiesOrder")," "))}function ud(t,e){1&t&&(u.Wb(0,"div",22),u.Rb(1,"mat-spinner",23),u.Vb())}function pd(t,e){1&t&&(u.Wb(0,"mat-header-cell",45),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc("",u.jc(2,1,"lang.technicalId")," "))}function fd(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-cell",46),u.Wb(1,"span",47),u.dc("click",(function(t){return u.Dc(a),t.stopPropagation()})),u.Qc(2),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit;u.Db(2),u.Sc(" ",n.id," ")}}function md(t,e){1&t&&(u.Wb(0,"mat-header-cell",45),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc("",u.jc(2,1,"lang.label")," "))}function gd(t,e){if(1&t&&(u.Wb(0,"mat-cell",46),u.Rb(1,"input",48),u.Qc(2),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.pc("value",a.color),u.Db(1),u.Sc(" ",a.label," ")}}function hd(t,e){if(1&t&&(u.Wb(0,"mat-header-cell",45),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=u.hc(2);u.Ib("hide-for-mobile",a.appService.getViewMode()),u.Db(1),u.Sc(" ",u.jc(2,3,"lang.processDelayDay"),"")}}function vd(t,e){if(1&t&&(u.Wb(0,"mat-cell",46),u.Wb(1,"span"),u.Qc(2),u.Vb(),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.Ib("hide-for-mobile",n.appService.getViewMode()),u.Db(2),u.Sc(" ",a.delays," ")}}function yd(t,e){1&t&&u.Rb(0,"mat-header-cell")}function Dd(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-cell",49),u.Wb(1,"button",50),u.dc("click",(function(t){u.Dc(a);var n=e.$implicit,i=u.hc(2);return t.stopPropagation(),i.deletePriority(n.id)})),u.ic(2,"translate"),u.Rb(3,"mat-icon",51),u.Vb(),u.Vb()}2&t&&(u.Db(1),u.pc("matTooltip",u.jc(2,1,"lang.delete")))}function Vd(t,e){1&t&&u.Rb(0,"mat-header-row")}function Cd(t,e){1&t&&(u.Rb(0,"mat-row",52),u.ic(1,"translate")),2&t&&(u.qc("routerLink","/administration/priorities/",e.$implicit.id,""),u.pc("matTooltip",u.jc(1,2,"lang.view")))}function xd(t,e){if(1&t&&(u.Wb(0,"mat-card",24),u.Wb(1,"div",25),u.Wb(2,"div",26),u.Wb(3,"mat-form-field"),u.Rb(4,"input",27),u.ic(5,"translate"),u.Vb(),u.Vb(),u.Wb(6,"div",26),u.Rb(7,"mat-paginator",28,29),u.Vb(),u.Vb(),u.Wb(9,"mat-table",30,31),u.Ub(11,32),u.Oc(12,pd,3,3,"mat-header-cell",33),u.Oc(13,fd,3,1,"mat-cell",34),u.Tb(),u.Ub(14,35),u.Oc(15,md,3,3,"mat-header-cell",33),u.Oc(16,gd,3,2,"mat-cell",34),u.Tb(),u.Ub(17,36),u.Oc(18,hd,3,5,"mat-header-cell",37),u.Oc(19,vd,3,3,"mat-cell",38),u.Tb(),u.Ub(20,39),u.Oc(21,yd,1,0,"mat-header-cell",40),u.Oc(22,Dd,4,3,"mat-cell",41),u.Tb(),u.Oc(23,Vd,1,0,"mat-header-row",42),u.Oc(24,Cd,2,4,"mat-row",43),u.Vb(),u.Wb(25,"div",44),u.Qc(26),u.ic(27,"translate"),u.Vb(),u.Vb()),2&t){var a=u.hc();u.Db(4),u.pc("placeholder",u.jc(5,10,"lang.filterBy")),u.oc("formControl",a.adminService.getFilterField()),u.Db(3),u.oc("length",100)("hidePageSize",!0)("pageSize",10),u.Db(2),u.oc("dataSource",a.adminService.getDataSource()),u.Db(14),u.oc("matHeaderRowDef",a.displayedColumns),u.Db(1),u.oc("matRowDefColumns",a.displayedColumns),u.Db(2),u.Tc(" ",a.priorities.length," ",u.jc(27,12,"lang.priorities"),"")}}function Md(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-list-item",53),u.dc("onDropSuccess",(function(){return u.Dc(a),u.hc().updatePrioritiesOrder()})),u.ic(1,"translate"),u.Rb(2,"mat-icon",54),u.Wb(3,"p",19),u.Qc(4),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit,i=e.index;u.pc("title",u.jc(1,4,"lang.move")),u.oc("sortableIndex",i),u.Db(4),u.Tc("",i+1," - ",n.label,"")}}var Wd,Od=function(){return["boxers-zone"]},_d=((Wd=function(){function t(e,a,n,i,o,r,c,l){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.headerService=i,this.appService=o,this.functions=r,this.adminService=c,this.viewContainerRef=l,this.loading=!1,this.priorities=[],this.prioritiesOrder=[],this.displayedColumns=["id","label","delays","actions"],this.filterColumns=["id","label","delays"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.prioritiesAlt")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/priorities").subscribe((function(e){t.priorities=e.priorities,t.loading=!1,t.http.get("../rest/sortedPriorities").subscribe((function(e){t.prioritiesOrder=e.priorities}),(function(e){t.notify.handleErrors(e)})),setTimeout((function(){t.adminService.setDataSource("admin_priorities",t.priorities,t.sort,t.paginator,t.filterColumns)}),0)}),(function(e){t.notify.handleErrors(e)}))}},{key:"deletePriority",value:function(t){var e=this;confirm(this.translate.instant("lang.deleteMsg"))&&this.http.delete("../rest/priorities/"+t).subscribe((function(t){e.priorities=t.priorities,e.adminService.setDataSource("admin_priorities",e.priorities,e.sort,e.paginator,e.filterColumns),e.notify.success(e.translate.instant("lang.priorityDeleted"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"updatePrioritiesOrder",value:function(){var t=this;this.http.put("../rest/sortedPriorities",this.prioritiesOrder).subscribe((function(e){t.prioritiesOrder=e.priorities,t.notify.success(t.translate.instant("lang.modificationSaved"))}),(function(e){t.notify.error(e.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||Wd)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a),u.Qb(D.a),u.Qb(jt),u.Qb(u.T))},Wd.\u0275cmp=u.Kb({type:Wd,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(sd,!0),u.Kc(dd,!0),u.Xc(H.a,!0),u.Xc(B.a,!0)),2&t&&(u.yc(a=u.ec())&&(e.sidenavRight=a.first),u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.paginator=a.first),u.yc(a=u.ec())&&(e.sort=a.first))},decls:23,vars:18,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",3,"mode","fixedInViewport","opened"],["snav2",""],[2,"font-size","15px","padding","5px"],["dnd-sortable-container","",3,"dropZones","sortableData"],["disableRipple","true","dnd-sortable","",3,"title","sortableIndex","onDropSuccess",4,"ngFor","ngForOf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/priorities/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],["mat-list-item","",3,"click"],["color","primary","mat-list-icon","",1,"fa","fa-list-ol"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","id"],["mat-sort-header","","style","flex:2;",4,"matHeaderCellDef"],["style","flex:2;",4,"matCellDef"],["matColumnDef","label"],["matColumnDef","delays"],["mat-sort-header","","style","flex:2;",3,"hide-for-mobile",4,"matHeaderCellDef"],["style","flex:2;",3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],[3,"click"],["type","color","disabled","",2,"background","none","border","none","width","45px",3,"value"],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"],["disableRipple","true","dnd-sortable","",3,"title","sortableIndex","onDropSuccess"],["color","primary","mat-list-icon","",1,"fa","fa-inbox"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,bd,14,9,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,ud,2,0,"div",9),u.Oc(14,xd,28,14,"mat-card",10),u.Vb(),u.Vb(),u.Vb(),u.Wb(15,"mat-sidenav",11,12),u.Wb(17,"p",13),u.Qc(18),u.ic(19,"translate"),u.Vb(),u.Wb(20,"mat-list"),u.Wb(21,"span",14),u.Oc(22,Md,5,6,"mat-list-item",15),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading),u.Db(1),u.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",(e.appService.getViewMode(),!1)),u.Db(3),u.Sc(" ",u.jc(19,15,"lang.prioritiesHelpDesc")," "),u.Db(3),u.oc("dropZones",u.uc(17,Od))("sortableData",e.prioritiesOrder),u.Db(1),u.oc("ngForOf",e.prioritiesOrder))},directives:[C.e,C.f,x.a,W.a,O.t,C.d,Rt.a,Ne.f,O.s,Rt.h,Rt.g,Rt.d,o.f,Tt.a,Rt.c,j.l,w.c,I.a,S.c,k.b,c.d,c.u,c.j,H.a,q.o,B.a,q.c,q.i,q.b,q.k,q.n,q.h,B.b,q.a,R.b,Qt.b,q.j,q.m,o.d,Ne.e],pipes:[p.d],encapsulation:2}),Wd);function Sd(t,e){1&t&&(u.Wb(0,"div",10),u.Rb(1,"mat-spinner",11),u.Vb())}function kd(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-card",12),u.Wb(1,"form",13,14),u.dc("ngSubmit",(function(){return u.Dc(a),u.hc().onSubmit()})),u.Wb(3,"div",15),u.Wb(4,"div",16),u.Wb(5,"div",17),u.Wb(6,"mat-form-field"),u.Wb(7,"input",18),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().priority.color=t})),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(9,"div",19),u.Wb(10,"mat-form-field"),u.Wb(11,"input",20),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().priority.label=t})),u.ic(12,"translate"),u.ic(13,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(14,"div",15),u.Wb(15,"div",21),u.Wb(16,"mat-form-field"),u.Wb(17,"input",22),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().priority.delays=t})),u.ic(18,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(19,"div",15),u.Wb(20,"div",23),u.Wb(21,"button",24),u.Qc(22),u.ic(23,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.zc(2),i=u.hc();u.Db(7),u.pc("matTooltip",u.jc(8,9,"lang.chooseColor")),u.oc("ngModel",i.priority.color),u.Db(4),u.pc("title",u.jc(12,11,"lang.label")),u.pc("placeholder",u.jc(13,13,"lang.label")),u.oc("ngModel",i.priority.label),u.Db(6),u.pc("placeholder",u.jc(18,15,"lang.processDelayDay")),u.oc("ngModel",i.priority.delays),u.Db(4),u.oc("disabled",!n.form.valid),u.Db(1),u.Rc(u.jc(23,17,"lang.save"))}}var wd,Id=((wd=function(){function t(e,a,n,i,o,r,c){_classCallCheck(this,t),this.translate=e,this.http=a,this.route=n,this.router=i,this.notify=o,this.headerService=r,this.appService=c,this.loading=!1,this.priority={color:"#135f7f",delays:"0"}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.route.params.subscribe((function(e){void 0===e.id?(t.headerService.setHeader(t.translate.instant("lang.priorityCreation")),t.creationMode=!0,t.loading=!1):(t.creationMode=!1,t.id=e.id,t.http.get("../rest/priorities/"+t.id).subscribe((function(e){t.priority=e.priority,t.headerService.setHeader(t.translate.instant("lang.priorityModification"),t.priority.label),t.loading=!1}),(function(e){t.notify.handleErrors(e)})))}))}},{key:"onSubmit",value:function(){var t=this;this.creationMode?this.http.post("../rest/priorities",this.priority).subscribe((function(){t.notify.success(t.translate.instant("lang.priorityAdded")),t.router.navigate(["/administration/priorities"])}),(function(e){t.notify.error(e.error.errors)})):this.http.put("../rest/priorities/"+this.id,this.priority).subscribe((function(){t.notify.success(t.translate.instant("lang.priorityUpdated")),t.router.navigate(["/administration/priorities"])}),(function(e){t.notify.error(e.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||wd)(u.Qb(p.e),u.Qb(f.b),u.Qb(o.a),u.Qb(o.c),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a))},wd.\u0275cmp=u.Kb({type:wd,selectors:[["ng-component"]],decls:13,vars:8,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"form-horizontal",3,"ngSubmit"],["priorityForm","ngForm"],[1,"form-group"],[1,"row",2,"margin","0px"],[1,"col-md-1","col-xs-2"],["matInput","","type","color","name","color","required","",3,"matTooltip","ngModel","ngModelChange"],[1,"col-md-11","col-xs-10"],["matInput","","type","text","name","label","maxlength","128","required","",3,"title","placeholder","ngModel","ngModelChange"],[1,"col-md-4"],["matInput","","type","number","name","delays","required","","pattern","^\\d+$",3,"placeholder","ngModel","ngModelChange"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary",3,"disabled"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Wb(1,"mat-sidenav-content"),u.Wb(2,"div",1),u.Wb(3,"div",2),u.Wb(4,"div",3),u.Rb(5,"header-left"),u.Vb(),u.Wb(6,"div",4),u.Rb(7,"header-right"),u.Vb(),u.Vb(),u.Rb(8,"div",5),u.Vb(),u.Wb(9,"div",6),u.Wb(10,"div",7),u.Oc(11,Sd,2,0,"div",8),u.Oc(12,kd,24,19,"mat-card",9),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(3),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading))},directives:[C.e,C.f,x.a,W.a,O.t,w.c,I.a,c.K,c.v,c.w,S.c,k.b,c.d,c.F,Qt.b,c.u,c.x,c.p,c.A,c.B,R.b],pipes:[p.d],encapsulation:2}),wd),jd=["snav2"],Rd=["adminMenuTemplate"];function Td(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-nav-list"),u.Wb(1,"h3",14),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"a",35),u.Rb(5,"mat-icon",36),u.Wb(6,"p",37),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Wb(9,"a",38),u.dc("click",(function(){u.Dc(a);var t=u.hc(),e=u.zc(16);return t.loadCron(),e.toggle()}))("next",(function(){u.Dc(a);var t=u.hc();return u.zc(16).open(),t.paramCron()})),u.Rb(10,"mat-icon",39),u.Wb(11,"p",37),u.Qc(12),u.ic(13,"translate"),u.Vb(),u.Vb(),u.Vb()}2&t&&(u.Db(2),u.Rc(u.jc(3,3,"lang.actions")),u.Db(5),u.Sc(" ",u.jc(8,5,"lang.add")," "),u.Db(5),u.Sc(" ",u.jc(13,7,"lang.toSchedule")," "))}function Pd(t,e){1&t&&(u.Wb(0,"div",40),u.Rb(1,"mat-spinner",41),u.Vb())}function Qd(t,e){if(1&t&&(u.Wb(0,"mat-header-cell",64),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=u.hc(2);u.Ib("hide-for-mobile",a.appService.getViewMode()),u.Db(1),u.Rc(u.jc(2,3,"lang.id"))}}function Fd(t,e){if(1&t&&(u.Wb(0,"mat-cell",65),u.Qc(1),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.Ib("hide-for-mobile",n.appService.getViewMode()),u.Db(1),u.Sc(" ",a.notification_id," ")}}function Ld(t,e){1&t&&(u.Wb(0,"mat-header-cell",66),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc("",u.jc(2,1,"lang.description")," "))}function Ed(t,e){if(1&t&&(u.Wb(0,"mat-cell",67),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.description," ")}}function Ad(t,e){if(1&t&&(u.Wb(0,"mat-header-cell",64),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=u.hc(2);u.Ib("hide-for-mobile",a.appService.getViewMode()),u.Db(1),u.Rc(u.jc(2,3,"lang.status"))}}function Ud(t,e){1&t&&(u.Wb(0,"span",71),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.active")))}function zd(t,e){1&t&&(u.Wb(0,"span",72),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.suspended")))}function $d(t,e){if(1&t&&(u.Wb(0,"mat-cell",68),u.ic(1,"translate"),u.Oc(2,Ud,3,3,"span",69),u.Oc(3,zd,3,3,"span",70),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.Ib("hide-for-mobile",n.appService.getViewMode()),u.pc("matTooltip",u.jc(1,5,"lang.view")),u.Db(2),u.oc("ngIf","Y"==a.is_enabled),u.Db(1),u.oc("ngIf","N"==a.is_enabled)}}function Nd(t,e){1&t&&u.Rb(0,"mat-header-cell",65)}function Hd(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-cell",73),u.Wb(1,"button",74),u.dc("click",(function(t){u.Dc(a);var n=e.$implicit,i=u.hc(2);return t.stopPropagation(),i.deleteNotification(n)})),u.ic(2,"translate"),u.Rb(3,"mat-icon",75),u.Vb(),u.Vb()}2&t&&(u.Db(1),u.pc("matTooltip",u.jc(2,1,"lang.delete")))}function Bd(t,e){1&t&&u.Rb(0,"mat-header-row")}function Xd(t,e){if(1&t&&(u.Rb(0,"mat-row",76),u.ic(1,"translate")),2&t){var a=e.$implicit;u.qc("routerLink","/administration/notifications/",a.notification_sid,""),u.pc("matTooltip",u.jc(1,3,"lang.view")),u.oc("joyrideStep",a.notification_id+"_Tour")}}function Gd(t,e){if(1&t&&(u.Wb(0,"mat-card",42),u.Wb(1,"div",43),u.Wb(2,"div",44),u.Wb(3,"mat-form-field"),u.Rb(4,"input",45),u.ic(5,"translate"),u.Vb(),u.Vb(),u.Wb(6,"div",44),u.Rb(7,"mat-paginator",46,47),u.Vb(),u.Vb(),u.Wb(9,"mat-table",48,49),u.Ub(11,50),u.Oc(12,Qd,3,5,"mat-header-cell",51),u.Oc(13,Fd,2,3,"mat-cell",52),u.Tb(),u.Ub(14,53),u.Oc(15,Ld,3,3,"mat-header-cell",54),u.Oc(16,Ed,2,1,"mat-cell",55),u.Tb(),u.Ub(17,56),u.Oc(18,Ad,3,5,"mat-header-cell",51),u.Oc(19,$d,4,7,"mat-cell",57),u.Tb(),u.Ub(20,58),u.Oc(21,Nd,1,0,"mat-header-cell",59),u.Oc(22,Hd,4,3,"mat-cell",60),u.Tb(),u.Oc(23,Bd,1,0,"mat-header-row",61),u.Oc(24,Xd,2,5,"mat-row",62),u.Vb(),u.Wb(25,"div",63),u.Qc(26),u.ic(27,"translate"),u.Vb(),u.Vb()),2&t){var a=u.hc();u.Db(4),u.pc("placeholder",u.jc(5,10,"lang.filterBy")),u.oc("formControl",a.adminService.getFilterField()),u.Db(3),u.oc("length",100)("hidePageSize",!0)("pageSize",10),u.Db(2),u.oc("dataSource",a.adminService.getDataSource()),u.Db(14),u.oc("matHeaderRowDef",a.displayedColumns),u.Db(1),u.oc("matRowDefColumns",a.displayedColumns),u.Db(2),u.Tc(" ",a.notifications.length," ",u.jc(27,12,"lang.notifications"),"")}}function qd(t,e){if(1&t&&(u.Wb(0,"mat-option",77),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a.value),u.Db(1),u.Sc(" ",a.label," ")}}function Kd(t,e){if(1&t&&(u.Wb(0,"mat-option",77),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a.value),u.Db(1),u.Sc(" ",a.label," ")}}function Jd(t,e){if(1&t&&(u.Wb(0,"mat-option",77),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a.value),u.Db(1),u.Sc(" ",a.label," ")}}function Yd(t,e){if(1&t&&(u.Wb(0,"mat-option",77),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a.value),u.Db(1),u.Sc(" ",a.label," ")}}function Zd(t,e){if(1&t&&(u.Wb(0,"mat-option",77),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a.value),u.Db(1),u.Sc(" ",a.label," ")}}function tb(t,e){if(1&t&&(u.Wb(0,"mat-option",77),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a.path),u.Db(1),u.Sc(" ",a.description," ")}}function eb(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-chip",79),u.dc("removed",(function(){u.Dc(a);var t=u.hc().index;return u.hc().deleteCron(t)})),u.Qc(1),u.Rb(2,"span",80),u.Wb(3,"b"),u.Qc(4),u.Vb(),u.Rb(5,"mat-icon",81),u.ic(6,"translate"),u.Vb()}if(2&t){var n=u.hc().$implicit;u.Db(1),u.Sc(" ",n.description," "),u.Db(3),u.Wc("",n.m,"\xa0\xa0",n.h,"\xa0\xa0",n.dom,"\xa0\xa0",n.mon,"\xa0\xa0",n.dow,""),u.Db(1),u.pc("matTooltip",u.jc(6,7,"lang.delete"))}}function ab(t,e){if(1&t&&(u.Wb(0,"span"),u.Oc(1,eb,7,9,"mat-chip",78),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.oc("ngIf","normal"==a.state)}}var nb,ib=((nb=function(){function t(e,a,n,i,o,r,c,l){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.headerService=i,this.appService=o,this.functions=r,this.adminService=c,this.viewContainerRef=l,this.notifications=[],this.loading=!1,this.months=[],this.dom=[],this.dow=[],this.newCron={m:"",h:"",dom:"",mon:"",cmd:"",state:"normal"},this.displayedColumns=["notification_id","description","is_enabled","notifications"],this.filterColumns=["notification_id","description"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.notifications")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/notifications").subscribe((function(e){t.notifications=e.notifications,t.loading=!1,setTimeout((function(){t.adminService.setDataSource("admin_notif",t.notifications,t.sort,t.paginator,t.filterColumns)}),0)}),(function(e){t.notify.error(e.error.errors)}))}},{key:"deleteNotification",value:function(t){var e=this;confirm(this.translate.instant("lang.deleteMsg"))&&this.http.delete("../rest/notifications/"+t.notification_sid).subscribe((function(t){e.notifications=t.notifications,setTimeout((function(){e.adminService.setDataSource("admin_notif",e.notifications,e.sort,e.paginator,e.filterColumns)}),0),e.sidenavRight.close(),e.notify.success(e.translate.instant("lang.notificationDeleted"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"loadCron",value:function(){var t=this;return new Promise((function(e){t.hours=[{label:t.translate.instant("lang.eachHour"),value:"*"}],t.minutes=[{label:t.translate.instant("lang.eachMinute"),value:"*"}],t.months=[{label:t.translate.instant("lang.eachMonth"),value:"*"},{label:t.translate.instant("lang.january"),value:"1"},{label:t.translate.instant("lang.february"),value:"2"},{label:t.translate.instant("lang.march"),value:"3"},{label:t.translate.instant("lang.april"),value:"4"},{label:t.translate.instant("lang.may"),value:"5"},{label:t.translate.instant("lang.june"),value:"6"},{label:t.translate.instant("lang.july"),value:"7"},{label:t.translate.instant("lang.august"),value:"8"},{label:t.translate.instant("lang.september"),value:"9"},{label:t.translate.instant("lang.october"),value:"10"},{label:t.translate.instant("lang.november"),value:"11"},{label:t.translate.instant("lang.december"),value:"12"}],t.dom=[{label:t.translate.instant("lang.notUsed"),value:"*"}],t.dow=[{label:t.translate.instant("lang.eachDay"),value:"*"},{label:t.translate.instant("lang.monday"),value:"1"},{label:t.translate.instant("lang.tuesday"),value:"2"},{label:t.translate.instant("lang.wednesday"),value:"3"},{label:t.translate.instant("lang.thursday"),value:"4"},{label:t.translate.instant("lang.friday"),value:"5"},{label:t.translate.instant("lang.saturday"),value:"6"},{label:t.translate.instant("lang.sunday"),value:"7"}],t.newCron={m:"",h:"",dom:"",mon:"",cmd:"",state:"normal"};for(var a=0;a<=23;a++)t.hours.push({label:a,value:String(a)});for(var n=0;n<=59;n++)t.minutes.push({label:n,value:String(n)});for(var i=1;i<=31;i++)t.dom.push({label:i,value:String(i)});t.http.get("../rest/notifications/schedule").pipe(Object(kt.tap)((function(e){t.crontab=e.crontab,t.authorizedNotification=e.authorizedNotification})),Object(Dt.a)((function(){return e(!0)})),Object(G.catchError)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}))}},{key:"saveCron",value:function(){var t=this,e=this.newCron.cmd.split("/");this.newCron.description=e[e.length-1],this.crontab.push(this.newCron),this.http.post("../rest/notifications/schedule",this.crontab).subscribe((function(e){t.newCron={m:"",h:"",dom:"",mon:"",cmd:"",description:"",state:"normal"},t.notify.success(t.translate.instant("lang.notificationScheduleUpdated"))}),(function(e){t.crontab.pop(),t.notify.error(e.error.errors)}))}},{key:"deleteCron",value:function(t){var e=this;this.crontab[t].state="deleted",this.http.post("../rest/notifications/schedule",this.crontab).subscribe((function(a){e.crontab.splice(t,1),e.notify.success(e.translate.instant("lang.notificationScheduleUpdated"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"onNext",value:function(){return console.log("next"),this.sidenavRight.open(),!1}},{key:"paramCron",value:function(){return Object(yt.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadCron();case 2:e=this.authorizedNotification.filter((function(t){return t.path.indexOf("_BASKETS.sh")>-1}))[0],this.newCron={m:"0",h:"8",dom:"*",dow:"*",mon:"*",cmd:e.path,description:e.description,state:"normal"};case 4:case"end":return t.stop()}}),t,this)})))}}]),t}()).\u0275fac=function(t){return new(t||nb)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a),u.Qb(D.a),u.Qb(jt),u.Qb(u.T))},nb.\u0275cmp=u.Kb({type:nb,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(jd,!0),u.Kc(Rd,!0),u.Xc(H.a,!0),u.Xc(B.a,!0)),2&t&&(u.yc(a=u.ec())&&(e.sidenavRight=a.first),u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.paginator=a.first),u.yc(a=u.ec())&&(e.sort=a.first))},decls:76,vars:73,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",3,"mode","fixedInViewport","opened","next"],["snav2",""],["joyrideStep","notifTour3",3,"next"],["mat-subheader",""],[1,"form-horizontal",2,"overflow","hidden"],["notifForm","ngForm"],[1,"form-group",2,"padding-left","15px","padding-right","15px"],[1,"col-sm-4"],["name","hour","id","hour","required","",3,"title","placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","minute","id","minute","required","",3,"title","placeholder","ngModel","ngModelChange"],["name","day","id","day","required","",3,"title","placeholder","ngModel","ngModelChange"],[1,"col-sm-6"],["name","month","id","month","required","",3,"title","placeholder","ngModel","ngModelChange"],["name","dayM","id","dayM","required","",3,"title","placeholder","ngModel","ngModelChange"],[1,"col-sm-12"],["name","script","id","script","required","",3,"title","placeholder","ngModel","ngModelChange"],[1,"col-sm-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary",3,"disabled","click"],["role","alert",1,"alert","alert-info",2,"margin","15px"],["joyrideStep","notifTour4"],[1,"mat-chip-list-stacked"],["chipList",""],[4,"ngFor","ngForOf"],["mat-list-item","","routerLink","/administration/notifications/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],["mat-list-item","","joyrideStep","notifTour",3,"click","next"],["color","primary","mat-list-icon","",1,"fa","fa-clock"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","notification_id"],["mat-sort-header","","style","flex:1;",3,"hide-for-mobile",4,"matHeaderCellDef"],["style","flex:1;",3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","description"],["mat-sort-header","","style","flex:2;",4,"matHeaderCellDef"],["style","flex:2;",4,"matCellDef"],["matColumnDef","is_enabled"],["style","flex:1;",3,"matTooltip","hide-for-mobile",4,"matCellDef"],["matColumnDef","notifications"],["style","flex:1;",4,"matHeaderCellDef"],["style","justify-content: flex-end;flex:1;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip","joyrideStep",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header","",2,"flex","1"],[2,"flex","1"],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],[2,"flex","1",3,"matTooltip"],["color","primary","class","label",4,"ngIf"],["color","warn","class","label",4,"ngIf"],["color","primary",1,"label"],["color","warn",1,"label"],[2,"justify-content","flex-end","flex","1"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip","joyrideStep"],[3,"value"],["color","primary","style","margin:5px;border-radius:0px;display:flex;","selectable","false","removable","true",3,"removed",4,"ngIf"],["color","primary","selectable","false","removable","true",2,"margin","5px","border-radius","0px","display","flex",3,"removed"],[2,"flex","1 1 auto"],["matChipRemove","","color","warn",1,"fa","fa-times",3,"matTooltip"]],template:function(t,e){if(1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,Td,14,9,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,Pd,2,0,"div",9),u.Oc(14,Gd,28,14,"mat-card",10),u.Vb(),u.Vb(),u.Vb(),u.Wb(15,"mat-sidenav",11,12),u.dc("next",(function(){return e.paramCron()})),u.Wb(17,"mat-list",13),u.dc("next",(function(){return e.saveCron()})),u.Wb(18,"h3",14),u.Qc(19),u.ic(20,"translate"),u.Vb(),u.Wb(21,"form",15,16),u.Wb(23,"div",17),u.Wb(24,"div",18),u.Wb(25,"mat-form-field"),u.Wb(26,"mat-select",19),u.dc("ngModelChange",(function(t){return e.newCron.h=t})),u.ic(27,"translate"),u.ic(28,"translate"),u.Oc(29,qd,2,2,"mat-option",20),u.Vb(),u.Vb(),u.Vb(),u.Wb(30,"div",18),u.Wb(31,"mat-form-field"),u.Wb(32,"mat-select",21),u.dc("ngModelChange",(function(t){return e.newCron.m=t})),u.ic(33,"translate"),u.ic(34,"translate"),u.Oc(35,Kd,2,2,"mat-option",20),u.Vb(),u.Vb(),u.Vb(),u.Wb(36,"div",18),u.Wb(37,"mat-form-field"),u.Wb(38,"mat-select",22),u.dc("ngModelChange",(function(t){return e.newCron.dow=t})),u.ic(39,"translate"),u.ic(40,"translate"),u.Oc(41,Jd,2,2,"mat-option",20),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(42,"div",17),u.Wb(43,"div",23),u.Wb(44,"mat-form-field"),u.Wb(45,"mat-select",24),u.dc("ngModelChange",(function(t){return e.newCron.mon=t})),u.ic(46,"translate"),u.ic(47,"translate"),u.Oc(48,Yd,2,2,"mat-option",20),u.Vb(),u.Vb(),u.Vb(),u.Wb(49,"div",23),u.Wb(50,"mat-form-field"),u.Wb(51,"mat-select",25),u.dc("ngModelChange",(function(t){return e.newCron.dom=t})),u.ic(52,"translate"),u.ic(53,"translate"),u.Oc(54,Zd,2,2,"mat-option",20),u.Vb(),u.Vb(),u.Vb(),u.Wb(55,"div",26),u.Wb(56,"mat-form-field"),u.Wb(57,"mat-select",27),u.dc("ngModelChange",(function(t){return e.newCron.cmd=t})),u.ic(58,"translate"),u.ic(59,"translate"),u.Oc(60,tb,2,2,"mat-option",20),u.Vb(),u.Vb(),u.Vb(),u.Wb(61,"div",28),u.Wb(62,"button",29),u.dc("click",(function(){return e.saveCron()})),u.Qc(63),u.ic(64,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Rb(65,"mat-divider"),u.Wb(66,"div",30),u.Qc(67),u.ic(68,"translate"),u.Vb(),u.Wb(69,"mat-list",31),u.Wb(70,"h3",14),u.Qc(71),u.ic(72,"translate"),u.Vb(),u.Wb(73,"mat-chip-list",32,33),u.Oc(75,ab,2,1,"span",34),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t){var a=u.zc(22);u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading),u.Db(1),u.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",(e.appService.getViewMode(),!1)),u.Db(4),u.Rc(u.jc(20,41,"lang.notificationSchedule")),u.Db(7),u.pc("title",u.jc(27,43,"lang.hour")),u.pc("placeholder",u.jc(28,45,"lang.hour")),u.oc("ngModel",e.newCron.h),u.Db(3),u.oc("ngForOf",e.hours),u.Db(3),u.pc("title",u.jc(33,47,"lang.minute")),u.pc("placeholder",u.jc(34,49,"lang.minute")),u.oc("ngModel",e.newCron.m),u.Db(3),u.oc("ngForOf",e.minutes),u.Db(3),u.pc("title",u.jc(39,51,"lang.day")),u.pc("placeholder",u.jc(40,53,"lang.day")),u.oc("ngModel",e.newCron.dow),u.Db(3),u.oc("ngForOf",e.dow),u.Db(4),u.pc("title",u.jc(46,55,"lang.month")),u.pc("placeholder",u.jc(47,57,"lang.month")),u.oc("ngModel",e.newCron.mon),u.Db(3),u.oc("ngForOf",e.months),u.Db(3),u.pc("title",u.jc(52,59,"lang.dayOfMonth")),u.pc("placeholder",u.jc(53,61,"lang.dayOfMonth")),u.oc("ngModel",e.newCron.dom),u.Db(3),u.oc("ngForOf",e.dom),u.Db(3),u.pc("title",u.jc(58,63,"lang.script")),u.pc("placeholder",u.jc(59,65,"lang.script")),u.oc("ngModel",e.newCron.cmd),u.Db(3),u.oc("ngForOf",e.authorizedNotification),u.Db(2),u.oc("disabled",!a.form.valid),u.Db(1),u.Rc(u.jc(64,67,"lang.save")),u.Db(4),u.Sc(" ",u.jc(68,69,"lang.NotificationScheduleInfo")," "),u.Db(4),u.Rc(u.jc(72,71,"lang.activeCron")),u.Db(4),u.oc("ngForOf",e.crontab)}},directives:[C.e,C.f,x.a,W.a,O.t,C.d,Rt.a,M.a,Rt.g,c.K,c.v,c.w,S.c,it.a,c.F,c.u,c.x,O.s,R.b,_.a,eo.d,Rt.h,Rt.d,o.f,Tt.a,Rt.c,j.l,w.c,I.a,k.b,c.d,c.j,H.a,q.o,B.a,q.c,q.i,q.b,q.k,q.n,q.h,B.b,q.a,Qt.b,q.j,q.m,o.d,j.p,eo.a,eo.e],pipes:[p.d],encapsulation:2}),nb),ob=["adminMenuTemplate"];function rb(t,e){1&t&&(u.Wb(0,"h3",14),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.actions")))}function cb(t,e){if(1&t){var a=u.Xb();u.Wb(0,"a",15),u.dc("click",(function(){return u.Dc(a),u.hc(2).createScript()}))("next",(function(){return u.Dc(a),u.hc(2).createScript()})),u.Rb(1,"mat-icon",16),u.Wb(2,"p",17),u.Qc(3),u.ic(4,"translate"),u.Vb(),u.Vb()}2&t&&(u.Db(3),u.Sc(" ",u.jc(4,1,"lang.createScriptNotification")," "))}function lb(t,e){if(1&t){var a=u.Xb();u.Wb(0,"a",18),u.dc("click",(function(){return u.Dc(a),u.hc(2).toggleNotif()})),u.Rb(1,"mat-icon",19),u.Wb(2,"p",17),u.Qc(3),u.ic(4,"translate"),u.Vb(),u.Vb()}2&t&&(u.Db(3),u.Sc(" ",u.jc(4,1,"lang.activateNotification")," "))}function sb(t,e){if(1&t){var a=u.Xb();u.Wb(0,"a",18),u.dc("click",(function(){return u.Dc(a),u.hc(2).toggleNotif()})),u.Rb(1,"mat-icon",20),u.Wb(2,"p",17),u.Qc(3),u.ic(4,"translate"),u.Vb(),u.Vb()}2&t&&(u.Db(3),u.Sc(" ",u.jc(4,1,"lang.suspendNotification")," "))}function db(t,e){if(1&t&&(u.Wb(0,"mat-nav-list"),u.Oc(1,rb,3,3,"h3",11),u.Oc(2,cb,5,3,"a",12),u.Oc(3,lb,5,3,"a",13),u.Oc(4,sb,5,3,"a",13),u.Vb()),2&t){var a=u.hc();u.Db(1),u.oc("ngIf",!a.creationMode),u.Db(1),u.oc("ngIf",!a.creationMode&&!a.loading&&!a.notification.scriptcreated),u.Db(1),u.oc("ngIf",!a.creationMode&&!a.loading&&"N"==a.notification.is_enabled),u.Db(1),u.oc("ngIf",!a.creationMode&&!a.loading&&"Y"==a.notification.is_enabled)}}function bb(t,e){1&t&&(u.Wb(0,"div",21),u.Rb(1,"mat-spinner",22),u.Vb())}function ub(t,e){1&t&&(u.Wb(0,"div",46),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc(" ",u.jc(2,1,"lang.suspended"),""))}function pb(t,e){if(1&t&&(u.Wb(0,"mat-option",48),u.Rb(1,"mat-icon",49),u.Qc(2),u.Vb()),2&t){var a=u.hc().$implicit;u.oc("value",a.id),u.Db(2),u.Sc(" ",a.label_action," ")}}function fb(t,e){if(1&t&&(u.Ub(0),u.Oc(1,pb,3,2,"mat-option",47),u.Tb()),2&t){var a=e.$implicit,n=u.hc(2);u.Db(1),u.oc("ngIf",!n.isNumber(a.id))}}function mb(t,e){if(1&t&&(u.Wb(0,"mat-option",48),u.Rb(1,"mat-icon",50),u.Qc(2),u.Vb()),2&t){var a=u.hc().$implicit;u.oc("value",a.id),u.Db(2),u.Sc(" ",a.label_action," ")}}function gb(t,e){if(1&t&&(u.Ub(0),u.Oc(1,mb,3,2,"mat-option",47),u.Tb()),2&t){var a=e.$implicit,n=u.hc(2);u.Db(1),u.oc("ngIf",n.isNumber(a.id))}}function hb(t,e){if(1&t&&(u.Wb(0,"mat-option",48),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a.template_id),u.Db(1),u.Sc(" ",a.template_label," ")}}function vb(t,e){if(1&t&&(u.Wb(0,"mat-option",48),u.Qc(1),u.Vb()),2&t){var a=u.hc().$implicit;u.oc("value",a.id),u.Db(1),u.Rc(a.label)}}function yb(t,e){if(1&t&&(u.Ub(0),u.Oc(1,vb,2,2,"mat-option",47),u.Tb()),2&t){var a=e.$implicit;u.Db(1),u.oc("ngIf","dest_user"==a.id)}}function Db(t,e){if(1&t&&(u.Wb(0,"mat-optgroup",32),u.ic(1,"translate"),u.Oc(2,yb,2,1,"ng-container",33),u.Vb()),2&t){var a=u.hc(2);u.qc("label","",u.jc(1,2,"lang.memberUserDest")," :"),u.Db(2),u.oc("ngForOf",a.notification.data.diffusionType)}}function Vb(t,e){if(1&t&&(u.Wb(0,"mat-option",48),u.Qc(1),u.Vb()),2&t){var a=u.hc().$implicit;u.oc("value",a.id),u.Db(1),u.Rc(a.label)}}function Cb(t,e){if(1&t&&(u.Ub(0),u.Oc(1,Vb,2,2,"mat-option",47),u.Tb()),2&t){var a=e.$implicit;u.Db(1),u.oc("ngIf","copy_list"==a.id)}}function xb(t,e){if(1&t&&(u.Wb(0,"mat-optgroup",32),u.ic(1,"translate"),u.Oc(2,Cb,2,1,"ng-container",33),u.Vb()),2&t){var a=u.hc(2);u.qc("label","",u.jc(1,2,"lang.memberUsersCopy")," :"),u.Db(2),u.oc("ngForOf",a.notification.data.diffusionType)}}function Mb(t,e){if(1&t&&(u.Wb(0,"mat-option",48),u.Qc(1),u.Vb()),2&t){var a=u.hc().$implicit;u.oc("value",a.id),u.Db(1),u.Rc(a.label)}}function Wb(t,e){if(1&t&&(u.Ub(0),u.Oc(1,Mb,2,2,"mat-option",47),u.Tb()),2&t){var a=e.$implicit,n=u.hc(2);u.Db(1),u.oc("ngIf","group"==a.id||"entity"==a.id&&"baskets"!=n.notification.event_id||"user"==a.id&&"baskets"!=n.notification.event_id)}}function Ob(t,e){if(1&t&&(u.Wb(0,"mat-option",48),u.Qc(1),u.Vb()),2&t){var a=u.hc().$implicit;u.oc("value",a.id),u.Db(1),u.Rc(a.label)}}function _b(t,e){if(1&t&&(u.Ub(0),u.Oc(1,Ob,2,2,"mat-option",47),u.Tb()),2&t){var a=e.$implicit;u.Db(1),u.oc("ngIf","group"!=a.id&&"entity"!=a.id&&"user"!=a.id&&"copy_list"!=a.id&&"group"!=a.id&&"dest_user"!=a.id)}}function Sb(t,e){if(1&t&&(u.Wb(0,"mat-optgroup",32),u.ic(1,"translate"),u.Oc(2,_b,2,1,"ng-container",33),u.Vb()),2&t){var a=u.hc(2);u.qc("label","",u.jc(1,2,"lang.others")," :"),u.Db(2),u.oc("ngForOf",a.notification.data.diffusionType)}}function kb(t,e){if(1&t&&(u.Wb(0,"mat-option",48),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a.group_id),u.Db(1),u.Sc(" ",a.group_desc," ")}}function wb(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-form-field"),u.Wb(1,"mat-select",51),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).notification.diffusion_properties=t})),u.ic(2,"translate"),u.ic(3,"translate"),u.Oc(4,kb,2,2,"mat-option",36),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.Db(1),u.pc("title",u.jc(2,4,"lang.memberDiffTypeUsers")),u.pc("placeholder",u.jc(3,6,"lang.memberDiffTypeUsers")),u.oc("ngModel",n.notification.diffusion_properties),u.Db(3),u.oc("ngForOf",n.notification.data.groups)}}function Ib(t,e){if(1&t&&(u.Wb(0,"mat-option",48),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a.id),u.Db(1),u.Sc(" ",a.label," ")}}function jb(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-form-field"),u.Wb(1,"mat-select",51),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).notification.diffusion_properties=t})),u.ic(2,"translate"),u.ic(3,"translate"),u.Oc(4,Ib,2,2,"mat-option",36),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.Db(1),u.pc("title",u.jc(2,4,"lang.memberDiffTypeUsers")),u.pc("placeholder",u.jc(3,6,"lang.memberDiffTypeUsers")),u.oc("ngModel",n.notification.diffusion_properties),u.Db(3),u.oc("ngForOf",n.notification.data.users)}}function Rb(t,e){if(1&t&&(u.Wb(0,"mat-option",48),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a.entity_id),u.Db(1),u.Sc(" ",a.entity_label," ")}}function Tb(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-form-field"),u.Wb(1,"mat-select",51),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).notification.diffusion_properties=t})),u.ic(2,"translate"),u.ic(3,"translate"),u.Oc(4,Rb,2,2,"mat-option",36),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.Db(1),u.pc("title",u.jc(2,4,"lang.memberDiffTypeUsers")),u.pc("placeholder",u.jc(3,6,"lang.memberDiffTypeUsers")),u.oc("ngModel",n.notification.diffusion_properties),u.Db(3),u.oc("ngForOf",n.notification.data.entities)}}function Pb(t,e){if(1&t&&(u.Wb(0,"mat-option",48),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a.id),u.Db(1),u.Sc(" ",a.label_status," ")}}function Qb(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-form-field"),u.Wb(1,"mat-select",52),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).notification.diffusion_properties=t})),u.ic(2,"translate"),u.ic(3,"translate"),u.ic(4,"translate"),u.Oc(5,Pb,2,2,"mat-option",36),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.Db(1),u.qc("title","",u.jc(2,5,"lang.selectedDocumentStatus")," (optionnel)"),u.rc("placeholder","",u.jc(3,7,"lang.selectedDocumentStatus")," (",u.jc(4,9,"lang.optional"),")"),u.oc("ngModel",n.notification.diffusion_properties),u.Db(4),u.oc("ngForOf",n.notification.data.status)}}function Fb(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-card",23),u.Oc(1,ub,3,3,"div",24),u.Wb(2,"form",25,26),u.dc("ngSubmit",(function(){return u.Dc(a),u.hc().onSubmit()})),u.Wb(4,"div",27),u.Wb(5,"div",28),u.Wb(6,"mat-form-field"),u.Wb(7,"input",29),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().notification.notification_id=t})),u.ic(8,"translate"),u.ic(9,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(10,"div",27),u.Wb(11,"div",28),u.Wb(12,"mat-form-field"),u.Wb(13,"input",30),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().notification.description=t})),u.ic(14,"translate"),u.ic(15,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(16,"div",27),u.Wb(17,"div",28),u.Wb(18,"mat-form-field"),u.Wb(19,"mat-select",31),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().notification.event_id=t})),u.ic(20,"translate"),u.ic(21,"translate"),u.Wb(22,"mat-optgroup",32),u.ic(23,"translate"),u.Oc(24,fb,2,1,"ng-container",33),u.Vb(),u.Wb(25,"mat-optgroup",32),u.ic(26,"translate"),u.Oc(27,gb,2,1,"ng-container",33),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(28,"div",27),u.Wb(29,"div",34),u.Wb(30,"mat-form-field"),u.Wb(31,"mat-select",35),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().notification.template_id=t})),u.ic(32,"translate"),u.ic(33,"translate"),u.Oc(34,hb,2,2,"mat-option",36),u.Vb(),u.Vb(),u.Vb(),u.Wb(35,"div",37),u.Wb(36,"mat-form-field"),u.Wb(37,"mat-select",38),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().notification.attachfor_type=t})),u.ic(38,"translate"),u.ic(39,"translate"),u.Wb(40,"mat-option",39),u.Qc(41),u.ic(42,"translate"),u.Vb(),u.Wb(43,"mat-option",40),u.Qc(44),u.ic(45,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(46,"div",27),u.Wb(47,"div",37),u.Wb(48,"mat-form-field"),u.Wb(49,"mat-select",41),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().notification.diffusion_type=t})),u.ic(50,"translate"),u.ic(51,"translate"),u.Oc(52,Db,3,4,"mat-optgroup",42),u.Oc(53,xb,3,4,"mat-optgroup",42),u.Wb(54,"mat-optgroup",32),u.ic(55,"translate"),u.Oc(56,Wb,2,1,"ng-container",33),u.Vb(),u.Oc(57,Sb,3,4,"mat-optgroup",42),u.Vb(),u.Vb(),u.Vb(),u.Wb(58,"div",34),u.Oc(59,wb,5,8,"mat-form-field",43),u.Oc(60,jb,5,8,"mat-form-field",43),u.Oc(61,Tb,5,8,"mat-form-field",43),u.Oc(62,Qb,6,11,"mat-form-field",43),u.Vb(),u.Vb(),u.Wb(63,"div",27),u.Wb(64,"div",44),u.Wb(65,"button",45),u.Qc(66),u.ic(67,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.zc(3),i=u.hc();u.Db(1),u.oc("ngIf","N"==i.notification.is_enabled),u.Db(6),u.pc("title",u.jc(8,38,"lang.id")),u.pc("placeholder",u.jc(9,40,"lang.id")),u.oc("ngModel",i.notification.notification_id)("disabled",!i.creationMode),u.Db(6),u.pc("title",u.jc(14,42,"lang.description")),u.pc("placeholder",u.jc(15,44,"lang.description")),u.oc("ngModel",i.notification.description),u.Db(6),u.pc("title",u.jc(20,46,"lang.NotificationEvent")),u.pc("placeholder",u.jc(21,48,"lang.NotificationEvent")),u.oc("ngModel",i.notification.event_id),u.Db(3),u.qc("label","",u.jc(23,50,"lang.triggerSystem")," :"),u.Db(2),u.oc("ngForOf",i.notification.data.event),u.Db(1),u.qc("label","",u.jc(26,52,"lang.triggerAction")," :"),u.Db(2),u.oc("ngForOf",i.notification.data.event),u.Db(4),u.pc("title",u.jc(32,54,"lang.notificationModel")),u.pc("placeholder",u.jc(33,56,"lang.notificationModel")),u.oc("ngModel",i.notification.template_id),u.Db(3),u.oc("ngForOf",i.notification.data.template),u.Db(3),u.pc("title",u.jc(38,58,"lang.attachment")),u.pc("placeholder",u.jc(39,60,"lang.attachment")),u.oc("ngModel",i.notification.attachfor_type),u.Db(4),u.Sc(" ",u.jc(42,62,"lang.noAttachment")," "),u.Db(3),u.Sc(" ",u.jc(45,64,"lang.notificationJoinDocument")," "),u.Db(5),u.pc("title",u.jc(50,66,"lang.sendTo")),u.pc("placeholder",u.jc(51,68,"lang.sendTo")),u.oc("ngModel",i.notification.diffusion_type),u.Db(3),u.oc("ngIf","baskets"!=i.notification.event_id),u.Db(1),u.oc("ngIf","baskets"!=i.notification.event_id),u.Db(1),u.qc("label","",u.jc(55,70,"lang.memberAllUsers")," :"),u.Db(2),u.oc("ngForOf",i.notification.data.diffusionType),u.Db(1),u.oc("ngIf","baskets"!=i.notification.event_id),u.Db(2),u.oc("ngIf","group"==i.notification.diffusion_type),u.Db(1),u.oc("ngIf","user"==i.notification.diffusion_type),u.Db(1),u.oc("ngIf","entity"==i.notification.diffusion_type),u.Db(1),u.oc("ngIf","dest_user"==i.notification.diffusion_type||"copy_list"==i.notification.diffusion_type||"dest_entity"==i.notification.diffusion_type||"dest_user_visa"==i.notification.diffusion_type||"dest_user_sign"==i.notification.diffusion_type),u.Db(3),u.oc("disabled",!n.form.valid),u.Db(1),u.Rc(u.jc(67,72,"lang.save"))}}var Lb,Eb=((Lb=function(){function t(e,a,n,i,o,r,c,l){_classCallCheck(this,t),this.translate=e,this.http=a,this.route=n,this.router=i,this.notify=o,this.headerService=r,this.appService=c,this.viewContainerRef=l,this.notification={diffusionType_label:null},this.loading=!1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.route.params.subscribe((function(e){void 0===e.identifier?(t.headerService.setHeader(t.translate.instant("lang.notificationCreation")),t.creationMode=!0,t.http.get("../rest/administration/notifications/new").subscribe((function(e){t.notification=e.notification,t.notification.attachfor_properties=[],t.loading=!1}),(function(e){t.notify.error(e.error.errors)}))):(t.creationMode=!1,t.http.get("../rest/notifications/"+e.identifier).subscribe((function(e){t.headerService.setHeader(t.translate.instant("lang.notificationModification"),e.notification.description),t.notification=e.notification,t.notification.attachfor_properties=[],t.loading=!1}),(function(e){t.notify.error(e.error.errors)})))}))}},{key:"createScript",value:function(){var t=this;this.http.post("../rest/scriptNotification",this.notification).subscribe((function(e){t.notification.scriptcreated=e,t.notify.success(t.translate.instant("lang.scriptCreated"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"onSubmit",value:function(){var t=this;this.creationMode?(this.notification.is_enabled="Y",this.http.post("../rest/notifications",this.notification).subscribe((function(e){t.router.navigate(["/administration/notifications"]),t.notify.success(t.translate.instant("lang.notificationAdded"))}),(function(e){t.notify.error(e.error.errors)}))):this.http.put("../rest/notifications/"+this.notification.notification_sid,this.notification).subscribe((function(e){t.router.navigate(["/administration/notifications"]),t.notify.success(t.translate.instant("lang.notificationUpdated"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"toggleNotif",value:function(){var t=this;this.notification.is_enabled="Y"===this.notification.is_enabled?"N":"Y",this.http.put("../rest/notifications/"+this.notification.notification_sid,this.notification).subscribe((function(e){t.notify.success(t.translate.instant("lang.notificationUpdated"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"isNumber",value:function(t){return $.isNumeric(t)}}]),t}()).\u0275fac=function(t){return new(t||Lb)(u.Qb(p.e),u.Qb(f.b),u.Qb(o.a),u.Qb(o.c),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a),u.Qb(u.T))},Lb.\u0275cmp=u.Kb({type:Lb,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&u.Kc(ob,!0),2&t&&u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first)},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader","",4,"ngIf"],["mat-list-item","","joyrideStep","createScriptTour",3,"click","next",4,"ngIf"],["mat-list-item","",3,"click",4,"ngIf"],["mat-subheader",""],["mat-list-item","","joyrideStep","createScriptTour",3,"click","next"],["color","primary","mat-list-icon","",1,"fa","fa-terminal"],["mat-line",""],["mat-list-item","",3,"click"],["color","accent","mat-list-icon","",1,"fa","fa-play"],["color","warn","mat-list-icon","",1,"fa","fa-pause"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],["class","text-warning","style","position: absolute;opacity: 0.1;font-size: 120px;transform: rotate(324deg);-webkit-transform: rotate(324deg);margin-left: 25%;margin-top: 90px;",4,"ngIf"],[1,"form-horizontal",3,"ngSubmit"],["notificationsFormUp","ngForm"],[1,"form-group"],[1,"col-md-12"],["matInput","","required","","name","notification_id","id","notification_id","type","text","pattern","^[\\w.-]*$","maxlength","50",3,"ngModel","title","placeholder","disabled","ngModelChange"],["matInput","","required","","name","description","id","description","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["id","event_id","name","event_id","required","",3,"title","placeholder","ngModel","ngModelChange"],[3,"label"],[4,"ngFor","ngForOf"],[1,"col-md-8"],["id","template_id","name","template_id","required","",3,"title","placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4"],["id","attachfor_type","name","attachfor_type",3,"title","placeholder","ngModel","ngModelChange"],["value",""],["value","main_document"],["id","diffusion_type","name","diffusion_type","required","",3,"title","placeholder","ngModel","ngModelChange"],[3,"label",4,"ngIf"],[4,"ngIf"],[1,"col-sm-12",2,"text-align","center"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[1,"text-warning",2,"position","absolute","opacity","0.1","font-size","120px","transform","rotate(324deg)","-webkit-transform","rotate(324deg)","margin-left","25%","margin-top","90px"],[3,"value",4,"ngIf"],[3,"value"],["color","primary",1,"fa","fa-cog",2,"height","auto"],["color","primary",1,"fa","fa-exchange-alt",2,"height","auto"],["id","diffusion_properties","name","diffusion_properties","required","","multiple","",3,"title","placeholder","ngModel","ngModelChange"],["id","diffusion_properties","name","diffusion_properties","multiple","",3,"title","placeholder","ngModel","ngModelChange"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,db,5,4,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,bb,2,0,"div",9),u.Oc(14,Fb,68,74,"mat-card",10),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading))},directives:[C.e,C.f,x.a,W.a,O.t,Rt.h,Rt.g,Rt.d,M.a,Tt.a,Rt.c,j.l,w.c,I.a,c.K,c.v,c.w,S.c,k.b,c.d,c.F,c.B,c.p,c.u,c.x,it.a,j.o,O.s,j.p,R.b],pipes:[p.d],encapsulation:2}),Lb),Ab=a("VdM8"),Ub=["adminMenuTemplate"],zb=["appHistoryList"];function $b(t,e){if(1&t&&(u.Wb(0,"a",21),u.Rb(1,"mat-icon",22),u.Wb(2,"p",23),u.Qc(3),u.Vb(),u.Vb()),2&t){var a=e.$implicit;u.Ib("active",a.current),u.oc("routerLink",a.route),u.Db(1),u.Fb(a.icon),u.Db(2),u.Sc(" ",a.label," ")}}function Nb(t,e){if(1&t&&(u.Wb(0,"mat-nav-list"),u.Oc(1,$b,4,6,"a",20),u.Vb()),2&t){var a=u.hc();u.Db(1),u.oc("ngForOf",a.subMenus)}}function Hb(t,e){if(1&t&&u.Rb(0,"mat-datepicker-toggle",24),2&t){u.hc();var a=u.zc(19);u.oc("for",a)}}function Bb(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",25),u.dc("click",(function(t){u.Dc(a),u.hc();var e=u.zc(33);return t.stopPropagation(),e.startDateFilter="",e.filterStartDate()})),u.Rb(1,"mat-icon",26),u.Vb()}if(2&t){var n=u.hc();u.oc("title",n.translate.instant("lang.eraseValue"))}}function Xb(t,e){if(1&t&&u.Rb(0,"mat-datepicker-toggle",24),2&t){u.hc();var a=u.zc(28);u.oc("for",a)}}function Gb(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",25),u.dc("click",(function(t){u.Dc(a),u.hc();var e=u.zc(33);return t.stopPropagation(),e.endDateFilter="",e.filterEndDate()})),u.Rb(1,"mat-icon",26),u.Vb()}if(2&t){var n=u.hc();u.oc("title",n.translate.instant("lang.eraseValue"))}}var qb,Kb=((qb=function(){function t(e,a,n,i,o,r,c){_classCallCheck(this,t),this.translate=e,this.http=a,this.appService=n,this.functions=i,this.privilegeService=o,this.headerService=r,this.viewContainerRef=c,this.startDateFilter="",this.endDateFilter="",this.subMenus=[{icon:"fa fa-history",route:"/administration/history",label:this.translate.instant("lang.history"),current:!0},{icon:"fa fa-history",route:"/administration/history-batch",label:this.translate.instant("lang.historyBatch"),current:!1}]}return _createClass(t,[{key:"ngOnInit",value:function(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.history").toLowerCase(),"",""),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.subMenus=this.privilegeService.hasCurrentUserPrivilege("view_history_batch")?[{icon:"fa fa-history",route:"/administration/history",label:this.translate.instant("lang.history"),current:!0},{icon:"fa fa-history",route:"/administration/history-batch",label:this.translate.instant("lang.historyBatch"),current:!1}]:[{icon:"fa fa-history",route:"/administration/history",label:this.translate.instant("lang.history"),current:!0}]}}]),t}()).\u0275fac=function(t){return new(t||qb)(u.Qb(p.e),u.Qb(f.b),u.Qb(g.a),u.Qb(D.a),u.Qb(h.a),u.Qb(m.a),u.Qb(u.T))},qb.\u0275cmp=u.Kb({type:qb,selectors:[["admin-history"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(Ub,!0),u.Xc(zb,!0)),2&t&&(u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.appHistoryList=a.first))},decls:34,vars:26,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[2,"display","grid","grid-template-columns","repeat(2, 1fr)","grid-gap","10px","width","100%"],[1,"dateFilter",2,"cursor","pointer",3,"click"],[2,"color","white"],["matInput","","readonly","",2,"cursor","pointer",3,"ngModel","matDatepicker","placeholder","max","ngModelChange","dateChange"],["matSuffix","",3,"for",4,"ngIf"],[3,"touchUi"],["startPicker",""],["mat-button","","color","warn","matSuffix","","mat-icon-button","",3,"title","click",4,"ngIf"],["matInput","","readonly","",2,"cursor","pointer",3,"ngModel","matDatepicker","placeholder","min","ngModelChange","dateChange"],["endPicker",""],[1,"container"],[1,"container-content"],["appHistoryList",""],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],["mat-line",""],["matSuffix","",3,"for"],["mat-button","","color","warn","matSuffix","","mat-icon-button","",3,"title","click"],["color","warn",1,"fa","fa-calendar-times"]],template:function(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-sidenav-container",0),u.Oc(1,Nb,2,1,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Wb(10,"div",6),u.Wb(11,"div",7),u.Wb(12,"mat-form-field",8),u.dc("click",(function(){return u.Dc(a),u.zc(19).open()})),u.Wb(13,"mat-label",9),u.Qc(14),u.ic(15,"translate"),u.Vb(),u.Wb(16,"input",10),u.dc("ngModelChange",(function(t){return u.Dc(a),u.zc(33).startDateFilter=t}))("dateChange",(function(){return u.Dc(a),u.zc(33).filterStartDate()})),u.Vb(),u.Oc(17,Hb,1,1,"mat-datepicker-toggle",11),u.Rb(18,"mat-datepicker",12,13),u.Oc(20,Bb,2,1,"button",14),u.Vb(),u.Wb(21,"mat-form-field",8),u.dc("click",(function(){return u.Dc(a),u.zc(28).open()})),u.Wb(22,"mat-label",9),u.Qc(23),u.ic(24,"translate"),u.Vb(),u.Wb(25,"input",15),u.dc("ngModelChange",(function(t){return u.Dc(a),u.zc(33).endDateFilter=t}))("dateChange",(function(){return u.Dc(a),u.zc(33).filterEndDate()})),u.Vb(),u.Oc(26,Xb,1,1,"mat-datepicker-toggle",11),u.Rb(27,"mat-datepicker",12,16),u.Oc(29,Gb,2,1,"button",14),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(30,"div",17),u.Wb(31,"div",18),u.Rb(32,"app-history-list",null,19),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.zc(19),i=u.zc(28),o=u.zc(33);u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(4),u.Sc("",u.jc(15,22,"lang.since")," "),u.Db(2),u.oc("ngModel",o.startDateFilter)("matDatepicker",n)("placeholder",e.translate.instant("lang.since"))("max",o.endDateFilter),u.Db(1),u.oc("ngIf",!o.startDateFilter),u.Db(1),u.oc("touchUi",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",o.startDateFilter),u.Db(3),u.Sc("",u.jc(24,24,"lang.until")," "),u.Db(2),u.oc("ngModel",o.endDateFilter)("matDatepicker",i)("placeholder",e.translate.instant("lang.until"))("min",o.startDateFilter),u.Db(1),u.oc("ngIf",!o.endDateFilter),u.Db(1),u.oc("touchUi",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",o.endDateFilter),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode())}},directives:[C.e,C.f,x.a,W.a,S.c,S.g,k.b,c.d,He.h,c.u,c.x,O.t,He.f,Ab.a,Rt.h,O.s,Rt.d,o.f,Tt.a,Rt.c,j.l,He.j,S.j,R.b],pipes:[p.d],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}.paginatorResultList[_ngcontent-%COMP%]    .mat-paginator-range-label{justify-content:flex-end;display:flex}.filterList[_ngcontent-%COMP%]    .mat-optgroup-label{color:#135f7f;position:-webkit-sticky;position:sticky;top:0;background:#fff!important;z-index:1}.label[_ngcontent-%COMP%]{cursor:pointer;margin:5px}.bg-head-content[_ngcontent-%COMP%]     .mat-focused .mat-form-field-label{color:#fff!important}.bg-head-content[_ngcontent-%COMP%]    .mat-form-field-ripple, .bg-head-content[_ngcontent-%COMP%]    .mat-form-field-underline{background-color:#fff!important}.bg-head-content[_ngcontent-%COMP%]   .mat-datepicker-toggle[_ngcontent-%COMP%], .bg-head-content[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#fff}"]}),qb),Jb=a("XNiG"),Yb=a("VRyK"),Zb=a("1G5W"),tu=a("eIep"),eu=a("8IW6"),au=a("ZI/H"),nu=["adminMenuTemplate"],iu=["tableHistoryListSort"],ou=["autoCompleteInput"];function ru(t,e){if(1&t&&(u.Wb(0,"a",53),u.Rb(1,"mat-icon",54),u.Wb(2,"p",55),u.Qc(3),u.Vb(),u.Vb()),2&t){var a=e.$implicit;u.Ib("active",a.current),u.oc("routerLink",a.route),u.Db(1),u.Fb(a.icon),u.Db(2),u.Sc(" ",a.label," ")}}function cu(t,e){if(1&t&&(u.Wb(0,"mat-nav-list"),u.Oc(1,ru,4,6,"a",52),u.Vb()),2&t){var a=u.hc();u.Db(1),u.oc("ngForOf",a.subMenus)}}function lu(t,e){if(1&t&&u.Rb(0,"mat-datepicker-toggle",56),2&t){u.hc();var a=u.zc(19);u.oc("for",a)}}function su(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",57),u.dc("click",(function(t){u.Dc(a);var e=u.hc();return t.stopPropagation(),e.startDateFilter="",e.filterStartDate()})),u.Rb(1,"mat-icon",58),u.Vb()}if(2&t){var n=u.hc();u.oc("title",n.translate.instant("lang.eraseValue"))}}function du(t,e){if(1&t&&u.Rb(0,"mat-datepicker-toggle",56),2&t){u.hc();var a=u.zc(28);u.oc("for",a)}}function bu(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",57),u.dc("click",(function(t){u.Dc(a);var e=u.hc();return t.stopPropagation(),e.endDateFilter="",e.filterEndDate()})),u.Rb(1,"mat-icon",58),u.Vb()}if(2&t){var n=u.hc();u.oc("title",n.translate.instant("lang.eraseValue"))}}function uu(t,e){1&t&&u.Rb(0,"mat-spinner")}function pu(t,e){if(1&t&&(u.Wb(0,"div",59),u.Oc(1,uu,1,0,"mat-spinner",28),u.Vb()),2&t){var a=u.hc();u.Db(1),u.oc("ngIf",a.isLoadingResults)}}function fu(t,e){1&t&&(u.Wb(0,"mat-option",60),u.Wb(1,"div",61),u.Rb(2,"mat-spinner",62),u.Vb(),u.Vb())}function mu(t,e){if(1&t&&(u.Wb(0,"mat-option",66),u.Qc(1),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2).$implicit,i=u.hc(2);u.Lc("color",a.used?"":i.filterColor[n.key]),u.oc("id",n.key)("value",a)("disabled",a.used),u.Db(1),u.Sc(" ",a.label," ")}}function gu(t,e){if(1&t&&(u.Wb(0,"mat-optgroup",64),u.Oc(1,mu,2,6,"mat-option",65),u.ic(2,"sortBy"),u.ic(3,"async"),u.Vb()),2&t){var a=u.hc().$implicit,n=u.hc(2);u.oc("label",n.translate.instant("lang."+a.key)),u.Db(1),u.oc("ngForOf",u.kc(2,2,u.jc(3,5,n.filteredList[a.key]),"label"))}}function hu(t,e){if(1&t&&(u.Ub(0),u.Oc(1,gu,4,7,"mat-optgroup",63),u.ic(2,"async"),u.Tb()),2&t){var a,n=e.$implicit,i=u.hc(2);u.Db(1),u.oc("ngIf",(null==(a=u.jc(2,1,i.filteredList[n.key]))?null:a.length)>0)}}function vu(t,e){if(1&t&&(u.Ub(0),u.Oc(1,hu,3,3,"ng-container",34),u.ic(2,"keyvalue"),u.Tb()),2&t){var a=u.hc();u.Db(1),u.oc("ngForOf",u.jc(2,1,a.filterList))}}function yu(t,e){if(1&t){var a=u.Xb();u.Wb(0,"span",68),u.dc("click",(function(){u.Dc(a);var t=e.$implicit,n=e.index,i=u.hc(2).$implicit;return u.hc().removeItemFilter(t,i.key,n)})),u.Qc(1),u.Rb(2,"i",69),u.Vb()}if(2&t){var n=e.$implicit,i=u.hc(2).$implicit,o=u.hc();u.Lc("background",o.filterColor[i.key]),u.oc("title",o.translate.instant("lang."+i.key)),u.Db(1),u.Sc("",n.label," ")}}function Du(t,e){if(1&t&&(u.Ub(0),u.Oc(1,yu,3,4,"span",67),u.Tb()),2&t){var a=u.hc().$implicit,n=u.hc();u.Db(1),u.oc("ngForOf",n.filterUsed[a.key])}}var Vu=function(){return["startDate","endDate"]};function Cu(t,e){if(1&t&&(u.Ub(0),u.Oc(1,Du,2,1,"ng-container",28),u.Tb()),2&t){var a=e.$implicit;u.Db(1),u.oc("ngIf",-1===u.uc(1,Vu).indexOf(a.key))}}function xu(t,e){1&t&&(u.Wb(0,"mat-header-cell",70),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.event")))}function Mu(t,e){if(1&t&&(u.Wb(0,"mat-cell",71),u.ic(1,"fullDate"),u.Qc(2),u.ic(3,"ucfirst"),u.ic(4,"timeAgo"),u.Vb()),2&t){var a=e.$implicit;u.oc("title",u.jc(1,2,a.event_date)),u.Db(2),u.Sc(" ",u.jc(3,4,u.kc(4,6,a.event_date,"full"))," ")}}function Wu(t,e){1&t&&(u.Wb(0,"mat-header-cell",70),u.Qc(1),u.ic(2,"ucfirst"),u.ic(3,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc("",u.jc(2,1,u.jc(3,3,"lang.totalProcessed"))," "))}function Ou(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Ib("empty",0===a.total_processed),u.Db(1),u.Sc(" ",a.total_processed," ")}}function _u(t,e){1&t&&(u.Wb(0,"mat-header-cell",70),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc("",u.jc(2,1,"lang.totalErrors")," "))}function Su(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Ib("empty",0===a.total_errors)("error",a.total_errors>0),u.Db(1),u.Sc(" ",a.total_errors," ")}}function ku(t,e){1&t&&(u.Wb(0,"mat-header-cell",72),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc("",u.jc(2,1,"lang.information")," "))}function wu(t,e){if(1&t&&(u.Wb(0,"mat-cell",73),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.info," ")}}function Iu(t,e){1&t&&(u.Wb(0,"mat-header-cell",70),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc("",u.jc(2,1,"lang.module")," "))}function ju(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.module_name," ")}}function Ru(t,e){1&t&&u.Rb(0,"mat-header-row")}function Tu(t,e){1&t&&u.Rb(0,"mat-row")}var Pu,Qu=((Pu=function(){function t(e,a,n,i,o,r,l,s,d,b){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.headerService=i,this.appService=o,this.dialog=r,this.functions=l,this.latinisePipe=s,this.privilegeService=d,this.viewContainerRef=b,this.loading=!1,this.filtersChange=new u.o,this.displayedColumnsHistory=["event_date","total_processed","total_errors","info","module_name"],this.isLoadingResults=!0,this.routeUrl="../rest/batchHistory",this.resultsLength=0,this.searchHistory=new c.i,this.startDateFilter="",this.endDateFilter="",this.filterUrl="",this.filterList=null,this.filteredList={},this.filterUsed={},this.filterColor={startDate:"#b5cfd8",endDate:"#7393a7",totalErrors:"#fc6471",modules:"#009dc5"},this.loadingFilters=!0,this.destroy$=new Jb.a,this.subMenus=[]}return _createClass(t,[{key:"ngOnInit",value:function(){this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.subMenus=this.privilegeService.hasCurrentUserPrivilege("view_history")?[{icon:"fa fa-history",route:"/administration/history",label:this.translate.instant("lang.history"),current:!1},{icon:"fa fa-history",route:"/administration/history-batch",label:this.translate.instant("lang.historyBatch"),current:!0}]:[{icon:"fa fa-history",route:"/administration/history-batch",label:this.translate.instant("lang.historyBatch"),current:!0}],this.loading=!0,this.initHistoryList()}},{key:"initHistoryList",value:function(){var t=this;this.resultListDatabase=new Fu(this.http),this.paginator.pageIndex=0,this.sort.active="event_date",this.sort.direction="desc",this.sort.sortChange.subscribe((function(){return t.paginator.pageIndex=0})),Object(Yb.a)(this.sort.sortChange,this.paginator.page,this.filtersChange).pipe(Object(Zb.a)(this.destroy$),Object(l.a)({}),Object(tu.a)((function(){return t.isLoadingResults=!0,t.resultListDatabase.getRepoIssues(t.sort.active,t.sort.direction,t.paginator.pageIndex,t.routeUrl,t.filterUrl)})),Object(s.a)((function(e){return t.isLoadingResults=!1,e=t.processPostData(e),t.resultsLength=e.count,t.headerService.setHeader(t.translate.instant("lang.administration")+" "+t.translate.instant("lang.historyBatch").toLowerCase(),"",""),e.history})),Object(b.a)((function(e){return t.notify.handleErrors(e),t.isLoadingResults=!1,Object(r.a)([])}))).subscribe((function(e){return t.data=e}))}},{key:"processPostData",value:function(t){return t.history=t.history.map((function(t){return Object.assign(Object.assign({},t),{total_errors:null===t.total_errors?0:t.total_errors})})),t}},{key:"refreshDao",value:function(){this.paginator.pageIndex=0,this.filtersChange.emit()}},{key:"initFilterListHistory",value:function(){var t=this;null===this.filterList&&(this.filterList={},this.loadingFilters=!0,this.http.get("../rest/batchHistory/availableFilters").pipe(Object(s.a)((function(e){var a={modules:[{}],totalErrors:[{}]};return a.modules=e.modules,a.totalErrors=[{id:"errorElement",label:t.translate.instant("lang.totalErrors")}],a})),Object(d.a)((function(e){Object.keys(e).forEach((function(a){t.functions.empty(t.filterList[a])&&(t.filterList[a]=[],t.filteredList[a]=[]),e[a].forEach((function(e){t.filterList[a].push(e)})),t.filteredList[a]=t.searchHistory.valueChanges.pipe(Object(l.a)(""),Object(s.a)((function(e){return e?t.filter(e,a):t.filterList[a].slice()})))}))})),Object(Dt.a)((function(){return t.loadingFilters=!1})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(r.a)(!1)}))).subscribe())}},{key:"filterStartDate",value:function(){this.functions.empty(this.filterUsed.startDate)&&(this.filterUsed.startDate=[]),this.filterUsed.startDate[0]={id:this.functions.empty(this.startDateFilter)?"":this.functions.formatDateObjectToDateString(this.startDateFilter),label:this.functions.empty(this.startDateFilter)?"":this.functions.formatDateObjectToDateString(this.startDateFilter)},this.generateUrlFilter(),this.refreshDao()}},{key:"filterEndDate",value:function(){this.functions.empty(this.filterUsed.endDate)&&(this.filterUsed.endDate=[]),this.filterUsed.endDate[0]={id:this.functions.empty(this.endDateFilter)?"":this.functions.formatDateObjectToDateString(this.endDateFilter,!0),label:this.functions.empty(this.endDateFilter)?"":this.functions.formatDateObjectToDateString(this.endDateFilter)},this.generateUrlFilter(),this.refreshDao()}},{key:"addItemFilter",value:function(t){t.value.used=!0,this.functions.empty(this.filterUsed[t.id])&&(this.filterUsed[t.id]=[]),this.filterUsed[t.id].push(t.value),this.generateUrlFilter(),this.searchHistory.reset(),this.autoCompleteInput.nativeElement.blur(),this.refreshDao()}},{key:"removeItemFilter",value:function(t,e,a){t.used=!1,this.filterUsed[e].splice(a,1),this.generateUrlFilter(),this.refreshDao()}},{key:"generateUrlFilter",value:function(){var t=this;this.filterUrl="";var e=[];Object.keys(this.filterUsed).forEach((function(a){t.filterUsed[a].forEach((function(n){t.functions.empty(n.id)||(["startDate","endDate"].indexOf(a)>-1?e.push("".concat(a,"=").concat(n.id)):e.push("".concat(a,"[]=").concat(n.id)))}))})),e.length>0&&(this.filterUrl="&"+e.join("&"))}},{key:"filter",value:function(t,e){var a=this;if("string"==typeof t){var n=this.latinisePipe.transform(t.toLowerCase());return this.filterList[e].filter((function(t){return a.latinisePipe.transform(t.label.toLowerCase()).includes(n)}))}return this.filterList[e]}}]),t}()).\u0275fac=function(t){return new(t||Pu)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a),u.Qb(N.b),u.Qb(D.a),u.Qb(v.c),u.Qb(h.a),u.Qb(u.T))},Pu.\u0275cmp=u.Kb({type:Pu,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(nu,!0),u.Kc(H.a,!0),u.Kc(iu,!0),u.Kc(ou,!0)),2&t&&(u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.paginator=a.first),u.yc(a=u.ec())&&(e.sort=a.first),u.yc(a=u.ec())&&(e.autoCompleteInput=a.first))},decls:72,vars:45,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[2,"display","grid","grid-template-columns","repeat(2, 1fr)","grid-gap","10px","width","100%"],[1,"dateFilter",2,"cursor","pointer",3,"click"],[2,"color","white"],["matInput","","readonly","",2,"cursor","pointer",3,"ngModel","matDatepicker","placeholder","max","ngModelChange","dateChange"],["matSuffix","",3,"for",4,"ngIf"],[3,"touchUi"],["startPicker",""],["mat-button","","color","warn","matSuffix","","mat-icon-button","",3,"title","click",4,"ngIf"],["matInput","","readonly","",2,"cursor","pointer",3,"ngModel","matDatepicker","placeholder","min","ngModelChange","dateChange"],["endPicker",""],[1,"container"],[1,"container-content"],["class","example-loading-shade",4,"ngIf"],[1,"table-head"],[1,"table-head-result"],["floatLabel","never",2,"font-size","13px"],["type","text","matInput","","maxlength","128",3,"matAutocomplete","placeholder","formControl","click"],["autoCompleteInput",""],[3,"optionSelected","opened"],["auto","matAutocomplete"],["disabled","",4,"ngIf"],[4,"ngIf"],[1,"table-head-tool"],[1,"paginatorResultList",3,"length","hidePageSize","pageSize"],["paginatorHistoryList",""],[2,"height","90%","overflow","auto","position","absolute","width","100%"],[1,"filterBadges"],[4,"ngFor","ngForOf"],["id","history-list","matSort","","matSortActive","event_date","matSortDirection","desc",2,"width","100%",3,"dataSource"],["tableHistoryListSort","matSort"],["matColumnDef","event_date"],["mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",3,"title",4,"matCellDef"],["matColumnDef","total_processed"],[3,"empty",4,"matCellDef"],["matColumnDef","total_errors"],[3,"empty","error",4,"matCellDef"],["matColumnDef","info"],["mat-sort-header","","style","flex: 2;",4,"matHeaderCellDef"],["style","flex: 2;",4,"matCellDef"],["matColumnDef","module_name"],[4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],["mat-line",""],["matSuffix","",3,"for"],["mat-button","","color","warn","matSuffix","","mat-icon-button","",3,"title","click"],["color","warn",1,"fa","fa-calendar-times"],[1,"example-loading-shade"],["disabled",""],[2,"display","flex","justify-content","center"],["diameter","35"],["class","filterList",3,"label",4,"ngIf"],[1,"filterList",3,"label"],[3,"id","color","value","disabled",4,"ngFor","ngForOf"],[3,"id","value","disabled"],["class","label",3,"background","title","click",4,"ngFor","ngForOf"],[1,"label",3,"title","click"],[1,"fa","fa-times-circle"],["mat-sort-header",""],["mat-cell","",3,"title"],["mat-sort-header","",2,"flex","2"],[2,"flex","2"]],template:function(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-sidenav-container",0),u.Oc(1,cu,2,1,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Wb(10,"div",6),u.Wb(11,"div",7),u.Wb(12,"mat-form-field",8),u.dc("click",(function(){return u.Dc(a),u.zc(19).open()})),u.Wb(13,"mat-label",9),u.Qc(14),u.ic(15,"translate"),u.Vb(),u.Wb(16,"input",10),u.dc("ngModelChange",(function(t){return e.startDateFilter=t}))("dateChange",(function(){return e.filterStartDate()})),u.Vb(),u.Oc(17,lu,1,1,"mat-datepicker-toggle",11),u.Rb(18,"mat-datepicker",12,13),u.Oc(20,su,2,1,"button",14),u.Vb(),u.Wb(21,"mat-form-field",8),u.dc("click",(function(){return u.Dc(a),u.zc(28).open()})),u.Wb(22,"mat-label",9),u.Qc(23),u.ic(24,"translate"),u.Vb(),u.Wb(25,"input",15),u.dc("ngModelChange",(function(t){return e.endDateFilter=t}))("dateChange",(function(){return e.filterEndDate()})),u.Vb(),u.Oc(26,du,1,1,"mat-datepicker-toggle",11),u.Rb(27,"mat-datepicker",12,16),u.Oc(29,bu,2,1,"button",14),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(30,"div",17),u.Wb(31,"div",18),u.Oc(32,pu,2,1,"div",19),u.Wb(33,"div",20),u.Wb(34,"div",21),u.Wb(35,"mat-form-field",22),u.Wb(36,"input",23,24),u.dc("click",(function(t){return t.stopPropagation()})),u.Vb(),u.Wb(38,"mat-autocomplete",25,26),u.dc("optionSelected",(function(t){return e.addItemFilter(t.option)}))("opened",(function(){return e.initFilterListHistory()})),u.Oc(40,fu,3,0,"mat-option",27),u.Oc(41,vu,3,3,"ng-container",28),u.Vb(),u.Vb(),u.Vb(),u.Wb(42,"div",29),u.Rb(43,"mat-paginator",30,31),u.Vb(),u.Vb(),u.Wb(45,"div",32),u.Wb(46,"div",33),u.Oc(47,Cu,2,2,"ng-container",34),u.ic(48,"keyvalue"),u.Vb(),u.Wb(49,"mat-table",35,36),u.Ub(51,37),u.Oc(52,xu,3,3,"mat-header-cell",38),u.Oc(53,Mu,5,9,"mat-cell",39),u.Tb(),u.Ub(54,40),u.Oc(55,Wu,4,5,"mat-header-cell",38),u.Oc(56,Ou,2,3,"mat-cell",41),u.Tb(),u.Ub(57,42),u.Oc(58,_u,3,3,"mat-header-cell",38),u.Oc(59,Su,2,5,"mat-cell",43),u.Tb(),u.Ub(60,44),u.Oc(61,ku,3,3,"mat-header-cell",45),u.Oc(62,wu,2,1,"mat-cell",46),u.Tb(),u.Ub(63,47),u.Oc(64,Iu,3,3,"mat-header-cell",38),u.Oc(65,ju,2,1,"mat-cell",48),u.Tb(),u.Oc(66,Ru,1,0,"mat-header-row",49),u.Oc(67,Tu,1,0,"mat-row",50),u.Vb(),u.Wb(68,"div",51),u.Qc(69),u.ic(70,"translate"),u.Vb(),u.Vb(),u.Rb(71,"div",20),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.zc(19),i=u.zc(28),o=u.zc(39);u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(4),u.Sc("",u.jc(15,37,"lang.since")," "),u.Db(2),u.oc("ngModel",e.startDateFilter)("matDatepicker",n)("placeholder",e.translate.instant("lang.since"))("max",e.endDateFilter),u.Db(1),u.oc("ngIf",!e.startDateFilter),u.Db(1),u.oc("touchUi",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.startDateFilter),u.Db(3),u.Sc("",u.jc(24,39,"lang.until")," "),u.Db(2),u.oc("ngModel",e.endDateFilter)("matDatepicker",i)("placeholder",e.translate.instant("lang.until"))("min",e.startDateFilter),u.Db(1),u.oc("ngIf",!e.endDateFilter),u.Db(1),u.oc("touchUi",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.endDateFilter),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.isLoadingResults),u.Db(4),u.oc("matAutocomplete",o)("placeholder",e.translate.instant("lang.filterBy"))("formControl",e.searchHistory),u.Db(4),u.oc("ngIf",e.loadingFilters),u.Db(1),u.oc("ngIf",null!==e.filterList&&!e.loadingFilters),u.Db(2),u.oc("length",e.resultsLength)("hidePageSize",!0)("pageSize",10),u.Db(4),u.oc("ngForOf",u.jc(48,41,e.filterUsed)),u.Db(2),u.oc("dataSource",e.data),u.Db(17),u.oc("matHeaderRowDef",e.displayedColumnsHistory),u.Db(1),u.oc("matRowDefColumns",e.displayedColumnsHistory),u.Db(2),u.Tc(" ",e.resultsLength," ",u.jc(70,43,"lang.elements"),"")}},directives:[C.e,C.f,x.a,W.a,S.c,S.g,k.b,c.d,He.h,c.u,c.x,O.t,He.f,ao.d,c.p,c.j,ao.a,H.a,O.s,q.o,B.a,q.c,q.i,q.b,q.k,q.n,Rt.h,Rt.d,o.f,Tt.a,Rt.c,j.l,He.j,S.j,R.b,w.c,j.p,j.o,q.h,B.b,q.a,q.j,q.m],pipes:[p.d,O.l,O.b,T.a,eu.a,v.u,au.a],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}.paginatorResultList[_ngcontent-%COMP%]    .mat-paginator-range-label{justify-content:flex-end;display:flex}.filterList[_ngcontent-%COMP%]    .mat-optgroup-label{color:#135f7f;position:-webkit-sticky;position:sticky;top:0;background:#fff!important;z-index:1}.label[_ngcontent-%COMP%]{cursor:pointer;margin:5px}.bg-head-content[_ngcontent-%COMP%]     .mat-focused .mat-form-field-label{color:#fff!important}.bg-head-content[_ngcontent-%COMP%]    .mat-form-field-ripple, .bg-head-content[_ngcontent-%COMP%]    .mat-form-field-underline{background-color:#fff!important}.bg-head-content[_ngcontent-%COMP%]   .mat-datepicker-toggle[_ngcontent-%COMP%], .bg-head-content[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#fff}.empty[_ngcontent-%COMP%]{opacity:.5}.error[_ngcontent-%COMP%]{color:#8e3e52;font-weight:700}"]}),Pu),Fu=function(){function t(e){_classCallCheck(this,t),this.http=e}return _createClass(t,[{key:"getRepoIssues",value:function(t,e,a,n,i){return this.http.get("".concat(n,"?limit=10&offset=").concat(10*a,"&order=").concat(e,"&orderBy=").concat(t).concat(i))}}]),t}();function Lu(t,e){1&t&&(u.Wb(0,"div",10),u.Rb(1,"mat-spinner",11),u.Vb())}function Eu(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-chip",32),u.dc("removed",(function(){u.Dc(a);var t=e.$implicit;return u.hc(2).removeChrono(t)})),u.Wb(1,"span",33),u.Qc(2),u.Vb(),u.Qc(3),u.Rb(4,"mat-icon",34),u.Vb()}if(2&t){var n=e.$implicit,i=u.hc(2);u.oc("removable",!0),u.Db(2),u.Rc(i.chronoList.indexOf(n)+1),u.Db(1),u.Sc(" \xa0",n," ")}}function Au(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-chip",32),u.dc("removed",(function(){u.Dc(a);var t=e.$implicit;return u.hc(2).removeResId(t)})),u.Wb(1,"span",33),u.Qc(2),u.Vb(),u.Qc(3),u.Rb(4,"mat-icon",34),u.Vb()}if(2&t){var n=e.$implicit,i=u.hc(2);u.oc("removable",!0),u.Db(2),u.Rc(i.resIdList.indexOf(n)+1),u.Db(1),u.Sc(" \xa0",n," ")}}function Uu(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-card",12),u.Wb(1,"form",13,14),u.dc("ngSubmit",(function(){return u.Dc(a),u.hc().onSubmit()})),u.Wb(3,"mat-tab-group",15),u.dc("selectedTabChange",(function(t){return u.Dc(a),u.hc().resetInput(t)})),u.Wb(4,"mat-tab",16),u.ic(5,"translate"),u.Wb(6,"div",17),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Wb(9,"mat-form-field"),u.Wb(10,"input",18),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().chrono=t})),u.ic(11,"translate"),u.ic(12,"translate"),u.Vb(),u.Vb(),u.Wb(13,"div",19),u.Wb(14,"div",20),u.Wb(15,"div",21),u.Wb(16,"button",22),u.dc("click",(function(){return u.Dc(a),u.hc().addChrono()})),u.Qc(17),u.ic(18,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(19,"mat-chip-list",23,24),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().chronoList=t})),u.Oc(21,Eu,5,3,"mat-chip",25),u.Vb(),u.Vb(),u.Rb(22,"mat-divider"),u.Vb(),u.Wb(23,"mat-tab",16),u.ic(24,"translate"),u.Wb(25,"div",17),u.Qc(26),u.ic(27,"translate"),u.Vb(),u.Wb(28,"mat-form-field"),u.Wb(29,"input",26),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().resId=t})),u.ic(30,"translate"),u.ic(31,"translate"),u.Vb(),u.Vb(),u.Wb(32,"div",19),u.Wb(33,"div",20),u.Wb(34,"div",21),u.Wb(35,"button",27),u.dc("click",(function(){return u.Dc(a),u.hc().addResId()})),u.Qc(36),u.ic(37,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(38,"mat-chip-list",28,24),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().resIdList=t})),u.Oc(40,Au,5,3,"mat-chip",25),u.Vb(),u.Vb(),u.Rb(41,"mat-divider"),u.Vb(),u.Vb(),u.Wb(42,"plugin-autocomplete",29),u.dc("triggerEvent",(function(t){return u.Dc(a),u.hc().setStatus(t)})),u.Vb(),u.Wb(43,"div",20),u.Wb(44,"div",30),u.Wb(45,"button",31),u.Qc(46),u.ic(47,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc();u.Db(4),u.pc("label",u.jc(5,25,"lang.chronoNumber")),u.Db(3),u.Sc(" ",u.jc(8,27,"lang.updateStatusInformationsChrono")," "),u.Db(3),u.pc("title",u.jc(11,29,"lang.chronoNumber")),u.pc("placeholder",u.jc(12,31,"lang.chronoNumber")),u.oc("ngModel",n.chrono),u.Db(6),u.oc("disabled",!n.chrono),u.Db(1),u.Rc(u.jc(18,33,"lang.add")),u.Db(2),u.oc("ngModel",n.chronoList),u.Db(2),u.oc("ngForOf",n.chronoList),u.Db(2),u.pc("label",u.jc(24,35,"lang.resId")),u.Db(3),u.Sc(" ",u.jc(27,37,"lang.updateStatusInformationsGed")," "),u.Db(3),u.pc("title",u.jc(30,39,"lang.resId")),u.pc("placeholder",u.jc(31,41,"lang.resId")),u.oc("ngModel",n.resId),u.Db(6),u.oc("disabled",!n.resId),u.Db(1),u.Rc(u.jc(37,43,"lang.add")),u.Db(2),u.oc("ngModel",n.resIdList),u.Db(2),u.oc("ngForOf",n.resIdList),u.Db(2),u.oc("labelPlaceholder",n.translate.instant("lang.availableStatuses"))("labelList",n.translate.instant("lang.availableStatuses"))("datas",n.statuses)("targetSearchKey","idToDisplay")("subInfoKey","id"),u.Db(3),u.oc("disabled",0==n.resIdList.length&&0==n.chronoList.length||n.resIdList.length>0&&n.chronoList.length>0||!n.statusId),u.Db(1),u.Rc(u.jc(47,45,"lang.save"))}}var zu,$u=((zu=function(){function t(e,a,n,i,o){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.headerService=i,this.appService=o,this.loading=!1,this.statuses=[],this.statusId="",this.resId="",this.chrono="",this.resIdList=[],this.chronoList=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.updateStatus")),this.loading=!0,this.http.get("../rest/autocomplete/statuses").pipe(Object(kt.tap)((function(e){return t.statuses=e})),Object(kt.tap)((function(){return t.loading=!1}))).subscribe()}},{key:"onSubmit",value:function(){var t=this,e={status:this.statusId};this.resIdList.length>0?e.resId=this.resIdList:this.chronoList.length>0&&(e.chrono=this.chronoList),this.http.put("../rest/res/resource/status",e).subscribe((function(){t.resId="",t.chrono="",t.statusId="",t.resIdList=[],t.chronoList=[],t.notify.success(t.translate.instant("lang.modificationSaved"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"addResId",value:function(){-1===this.resIdList.indexOf(this.resId)&&this.resIdList.push(this.resId),this.resId=""}},{key:"addChrono",value:function(){-1===this.chronoList.indexOf(this.chrono)&&this.chronoList.push(this.chrono),this.chrono=""}},{key:"setStatus",value:function(t){this.statusId=t.id}},{key:"removeResId",value:function(t){var e=this.resIdList.indexOf(t);this.resIdList.splice(e,1)}},{key:"removeChrono",value:function(t){var e=this.chronoList.indexOf(t);this.chronoList.splice(e,1)}},{key:"resetInput",value:function(t){0===t.index?this.resId="":this.chrono=""}}]),t}()).\u0275fac=function(t){return new(t||zu)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a))},zu.\u0275cmp=u.Kb({type:zu,selectors:[["ng-component"]],decls:13,vars:8,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"form-horizontal",3,"ngSubmit"],["updateStatusForm","ngForm"],[3,"selectedTabChange"],[3,"label"],["role","alert",1,"alert","alert-info"],["matInput","","name","chrono",3,"title","placeholder","ngModel","ngModelChange"],[1,"row"],[1,"form-group"],[1,"col-md-12","text-left",2,"padding","10px"],["mat-raised-button","","type","button","color","primary",3,"disabled","click"],["name","chronoChips",3,"ngModel","ngModelChange"],["chipList",""],["color","primary",3,"removable","removed",4,"ngFor","ngForOf"],["type","number","id","","matInput","","name","resId",3,"title","placeholder","ngModel","ngModelChange"],["mat-raised-button","","color","primary","type","button",3,"disabled","click"],["name","resIdChips",3,"ngModel","ngModelChange"],["singleMode","","required","",3,"labelPlaceholder","labelList","datas","targetSearchKey","subInfoKey","triggerEvent"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary",3,"disabled"],["color","primary",3,"removable","removed"],[1,"badge","badge-pill","badge-dark"],["matChipRemove","",1,"fa","fa-times-circle"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Wb(1,"mat-sidenav-content"),u.Wb(2,"div",1),u.Wb(3,"div",2),u.Wb(4,"div",3),u.Rb(5,"header-left"),u.Vb(),u.Wb(6,"div",4),u.Rb(7,"header-right"),u.Vb(),u.Vb(),u.Rb(8,"div",5),u.Vb(),u.Wb(9,"div",6),u.Wb(10,"div",7),u.Oc(11,Lu,2,0,"div",8),u.Oc(12,Uu,48,47,"mat-card",9),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(3),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading))},directives:[C.e,C.f,x.a,W.a,O.t,w.c,I.a,c.K,c.v,c.w,Ee.c,Ee.a,S.c,k.b,c.d,c.u,c.x,R.b,eo.d,O.s,_.a,c.A,Ft.a,eo.a,Tt.a,eo.e],pipes:[p.d],styles:[".mat-tab-body{overflow-y:hidden!important}.row[_ngcontent-%COMP%]{margin-left:0}"]}),zu),Nu=["snav2"],Hu=["adminMenuTemplate"];function Bu(t,e){if(1&t&&(u.Wb(0,"a",18),u.Rb(1,"mat-icon",19),u.Wb(2,"p",16),u.Qc(3),u.Vb(),u.Vb()),2&t){var a=e.$implicit;u.Ib("active",a.current),u.oc("routerLink",a.route),u.Db(1),u.Fb(a.icon),u.Db(2),u.Sc(" ",a.label," ")}}function Xu(t,e){if(1&t&&(u.Wb(0,"mat-nav-list"),u.Wb(1,"h3",13),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"a",14),u.Rb(5,"mat-icon",15),u.Wb(6,"p",16),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Rb(9,"mat-divider"),u.Wb(10,"mat-nav-list"),u.Oc(11,Bu,4,6,"a",17),u.Vb()),2&t){var a=u.hc();u.Db(2),u.Rc(u.jc(3,3,"lang.actions")),u.Db(5),u.Sc(" ",u.jc(8,5,"lang.add")," "),u.Db(4),u.oc("ngForOf",a.subMenus)}}function Gu(t,e){1&t&&(u.Wb(0,"div",20),u.Rb(1,"mat-spinner",21),u.Vb())}function qu(t,e){if(1&t&&(u.Wb(0,"mat-header-cell",49),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=u.hc(2);u.Ib("hide-for-mobile",a.appService.getViewMode()),u.Db(1),u.Sc("",u.jc(2,3,"lang.label")," ")}}function Ku(t,e){if(1&t&&(u.Wb(0,"mat-cell",50),u.Qc(1),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.Ib("hide-for-mobile",n.appService.getViewMode()),u.Db(1),u.Rc(a.label)}}function Ju(t,e){1&t&&(u.Wb(0,"mat-header-cell",49),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc("",u.jc(2,1,"lang.description")," "))}function Yu(t,e){if(1&t&&(u.Wb(0,"mat-cell",50),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.description," ")}}function Zu(t,e){1&t&&(u.Wb(0,"mat-header-cell",51),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc(" ",u.jc(2,1,"lang.relatedContactNumber")," "))}function tp(t,e){if(1&t&&(u.Wb(0,"span"),u.Qc(1),u.Vb()),2&t){var a=u.hc().$implicit;u.Db(1),u.Rc(a.nbContacts)}}function ep(t,e){if(1&t&&(u.Wb(0,"span",55),u.Qc(1),u.Vb()),2&t){var a=u.hc().$implicit;u.Db(1),u.Rc(a.nbContacts)}}function ap(t,e){if(1&t&&(u.Wb(0,"mat-cell",52),u.Oc(1,tp,2,1,"span",53),u.Oc(2,ep,2,1,"span",54),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.oc("ngIf",0==a.nbContacts),u.Db(1),u.oc("ngIf",a.nbContacts>0)}}function np(t,e){if(1&t&&(u.Wb(0,"mat-header-cell",51),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=u.hc(2);u.Ib("hide-for-mobile",a.appService.getViewMode()),u.Db(1),u.Sc("",u.jc(2,3,"lang.public")," ")}}function ip(t,e){1&t&&(u.Wb(0,"span"),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc(" ",u.jc(2,1,"lang.no")," "))}function op(t,e){1&t&&(u.Wb(0,"span"),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc(" ",u.jc(2,1,"lang.yes")," "))}function rp(t,e){if(1&t&&(u.Wb(0,"mat-cell",52),u.Oc(1,ip,3,3,"span",53),u.Oc(2,op,3,3,"span",53),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.Ib("hide-for-mobile",n.appService.getViewMode()),u.Db(1),u.oc("ngIf",!a.public),u.Db(1),u.oc("ngIf",a.public)}}function cp(t,e){1&t&&(u.Wb(0,"mat-header-cell",51),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc("",u.jc(2,1,"lang.createdBy")," "))}function lp(t,e){if(1&t&&(u.Wb(0,"mat-cell",52),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.labelledOwner," ")}}function sp(t,e){1&t&&u.Rb(0,"mat-header-cell")}function dp(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-cell",56),u.Wb(1,"button",57),u.dc("click",(function(t){u.Dc(a);var n=e.$implicit,i=u.hc(2);return t.stopPropagation(),i.deleteContactsGroup(n.position)})),u.ic(2,"translate"),u.Rb(3,"mat-icon",58),u.Vb(),u.Vb()}2&t&&(u.Db(1),u.pc("matTooltip",u.jc(2,1,"lang.delete")))}function bp(t,e){1&t&&u.Rb(0,"mat-header-row")}function up(t,e){1&t&&(u.Rb(0,"mat-row",59),u.ic(1,"translate")),2&t&&(u.qc("routerLink","/administration/contacts/contacts-groups/",e.$implicit.id,""),u.pc("matTooltip",u.jc(1,2,"lang.view")))}function pp(t,e){if(1&t&&(u.Wb(0,"mat-card",22),u.Wb(1,"div",23),u.Wb(2,"div",24),u.Wb(3,"mat-form-field"),u.Rb(4,"input",25),u.ic(5,"translate"),u.Vb(),u.Vb(),u.Wb(6,"div",24),u.Rb(7,"mat-paginator",26,27),u.Vb(),u.Vb(),u.Wb(9,"mat-table",28,29),u.Ub(11,30),u.Oc(12,qu,3,5,"mat-header-cell",31),u.Oc(13,Ku,2,3,"mat-cell",32),u.Tb(),u.Ub(14,33),u.Oc(15,Ju,3,3,"mat-header-cell",34),u.Oc(16,Yu,2,1,"mat-cell",35),u.Tb(),u.Ub(17,36),u.Oc(18,Zu,3,3,"mat-header-cell",37),u.Oc(19,ap,3,2,"mat-cell",38),u.Tb(),u.Ub(20,39),u.Oc(21,np,3,5,"mat-header-cell",40),u.Oc(22,rp,3,4,"mat-cell",41),u.Tb(),u.Ub(23,42),u.Oc(24,cp,3,3,"mat-header-cell",37),u.Oc(25,lp,2,1,"mat-cell",38),u.Tb(),u.Ub(26,43),u.Oc(27,sp,1,0,"mat-header-cell",44),u.Oc(28,dp,4,3,"mat-cell",45),u.Tb(),u.Oc(29,bp,1,0,"mat-header-row",46),u.Oc(30,up,2,4,"mat-row",47),u.Vb(),u.Wb(31,"div",48),u.Qc(32),u.ic(33,"translate"),u.Vb(),u.Vb()),2&t){var a=u.hc();u.Db(4),u.pc("placeholder",u.jc(5,10,"lang.filterBy")),u.oc("formControl",a.adminService.getFilterField()),u.Db(3),u.oc("length",100)("hidePageSize",!0)("pageSize",10),u.Db(2),u.oc("dataSource",a.adminService.getDataSource()),u.Db(20),u.oc("matHeaderRowDef",a.displayedColumns),u.Db(1),u.oc("matRowDefColumns",a.displayedColumns),u.Db(2),u.Tc(" ",a.contactsGroups.length," ",u.jc(33,12,"lang.contactsGroupsAlt"),"")}}var fp,mp=((fp=function(){function t(e,a,n,i,o,r,c,l){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.headerService=i,this.appService=o,this.functions=r,this.adminService=c,this.viewContainerRef=l,this.search=null,this.contactsGroups=[],this.titles=[],this.loading=!1,this.subMenus=[{icon:"fa fa-book",route:"/administration/contacts/list",label:this.translate.instant("lang.contactsList"),current:!1},{icon:"fa fa-code",route:"/administration/contacts/contactsCustomFields",label:this.translate.instant("lang.customFieldsAdmin"),current:!1},{icon:"fa fa-cog",route:"/administration/contacts/contacts-parameters",label:this.translate.instant("lang.contactsParameters"),current:!1},{icon:"fa fa-users",route:"/administration/contacts/contacts-groups",label:this.translate.instant("lang.contactsGroups"),current:!0},{icon:"fas fa-magic",route:"/administration/contacts/duplicates",label:this.translate.instant("lang.duplicatesContactsAdmin"),current:!1}],this.displayedColumns=["label","description","nbContacts","public","owner","actions"],this.filterColumns=["label","description"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.contactsGroups")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/contactsGroups").subscribe((function(e){t.contactsGroups=e.contactsGroups,t.loading=!1,setTimeout((function(){t.adminService.setDataSource("admin_contacts_groups",t.contactsGroups,t.sort,t.paginator,t.filterColumns)}),0)}),(function(e){t.notify.handleErrors(e)}))}},{key:"deleteContactsGroup",value:function(t){var e=this,a=this.contactsGroups[t];confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+a.label+" \xbb")&&this.http.delete("../rest/contactsGroups/"+a.id).subscribe((function(){var a=e.contactsGroups.length-1;e.contactsGroups[t]=e.contactsGroups[a],e.contactsGroups[t].position=t,e.contactsGroups.splice(a,1),e.adminService.setDataSource("admin_contacts_groups",e.contactsGroups,e.sort,e.paginator,e.filterColumns),e.notify.success(e.translate.instant("lang.contactsGroupDeleted"))}),(function(t){e.notify.error(t.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||fp)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a),u.Qb(D.a),u.Qb(jt),u.Qb(u.T))},fp.\u0275cmp=u.Kb({type:fp,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(Nu,!0),u.Kc(Hu,!0),u.Xc(H.a,!0),u.Xc(B.a,!0)),2&t&&(u.yc(a=u.ec())&&(e.sidenavRight=a.first),u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.paginator=a.first),u.yc(a=u.ec())&&(e.sort=a.first))},decls:17,vars:10,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["position","end",3,"mode","fixedInViewport"],["snav2",""],["mat-subheader",""],["mat-list-item","","routerLink","/administration/contacts/contacts-groups/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSortDisableClear","","matSort","",3,"dataSource"],["table",""],["matColumnDef","label"],["mat-sort-header","","style","flex:2;",3,"hide-for-mobile",4,"matHeaderCellDef"],["style","flex:2;",3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","description"],["mat-sort-header","","style","flex:2;",4,"matHeaderCellDef"],["style","flex:2;",4,"matCellDef"],["matColumnDef","nbContacts"],["mat-sort-header","","style","flex:1;",4,"matHeaderCellDef"],["style","flex:1;",4,"matCellDef"],["matColumnDef","public"],["mat-sort-header","","style","flex:1;",3,"hide-for-mobile",4,"matHeaderCellDef"],["style","flex:1;",3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","owner"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],["mat-sort-header","",2,"flex","1"],[2,"flex","1"],[4,"ngIf"],["color","primary","style","font-weight:bold;",4,"ngIf"],["color","primary",2,"font-weight","bold"],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,Xu,12,7,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,Gu,2,0,"div",9),u.Oc(14,pp,34,14,"mat-card",10),u.Vb(),u.Vb(),u.Vb(),u.Rb(15,"mat-sidenav",11,12),u.Vb()),2&t&&(u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading),u.Db(1),u.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode()))},directives:[C.e,C.f,x.a,W.a,O.t,C.d,Rt.h,Rt.g,Rt.d,o.f,Tt.a,Rt.c,j.l,_.a,O.s,w.c,I.a,S.c,k.b,c.d,c.u,c.j,H.a,q.o,B.a,q.c,q.i,q.b,q.k,q.n,q.h,B.b,q.a,R.b,Qt.b,q.j,q.m,o.d],pipes:[p.d],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}"]}),fp),gp=a("/uUt"),hp=a("bv9b"),vp=["snav2"],yp=["adminMenuTemplate"],Dp=["paginatorContactList"],Vp=["paginatorAdded"],Cp=["tableAdded"];function xp(t,e){if(1&t&&(u.Wb(0,"a",31),u.Rb(1,"mat-icon",32),u.Wb(2,"p",33),u.Qc(3),u.Vb(),u.Vb()),2&t){var a=e.$implicit;u.Ib("active",a.current),u.oc("routerLink",a.route),u.Db(1),u.Fb(a.icon),u.Db(2),u.Sc(" ",a.label," ")}}function Mp(t,e){if(1&t&&(u.Wb(0,"mat-nav-list"),u.Oc(1,xp,4,6,"a",30),u.Vb()),2&t){var a=u.hc();u.Db(1),u.oc("ngForOf",a.subMenus)}}function Wp(t,e){1&t&&(u.Wb(0,"div",34),u.Rb(1,"mat-spinner",35),u.Vb())}function Op(t,e){if(1&t&&u.Rb(0,"div",60),2&t){var a=u.hc(3);u.oc("innerHTML",a.translate.instant("lang.limitDataReached_1000"),u.Ec)}}function _p(t,e){1&t&&u.Rb(0,"mat-progress-bar",61)}function Sp(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-header-cell",68),u.Wb(1,"mat-checkbox",69),u.dc("change",(function(t){u.Dc(a);var e=u.hc(4);return t?e.masterToggle(t):null})),u.Vb(),u.Vb()}if(2&t){var n=u.hc(4);u.Db(1),u.oc("checked",n.selection.hasValue())}}function kp(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-cell",68),u.Wb(1,"mat-checkbox",70),u.dc("click",(function(t){return u.Dc(a),t.stopPropagation()}))("change",(function(t){u.Dc(a);var n=e.$implicit,i=u.hc(4);return t?i.selection.toggle(n.id):null})),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit,i=u.hc(4);u.Db(1),u.qc("id","check_",n.id,""),u.oc("disabled",i.isInGrp(n))("checked",i.selection.isSelected(n.id))}}function wp(t,e){1&t&&(u.Wb(0,"mat-header-cell",71),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc("",u.jc(2,1,"lang.contact")," "))}function Ip(t,e){if(1&t&&(u.Wb(0,"mat-cell",71),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.contact," ")}}function jp(t,e){1&t&&(u.Wb(0,"mat-header-cell",71),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc("",u.jc(2,1,"lang.address")," "))}function Rp(t,e){if(1&t&&(u.Wb(0,"mat-cell",71),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.address," ")}}function Tp(t,e){1&t&&u.Rb(0,"mat-header-row")}var Pp=function(t){return{opacity:t}};function Qp(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-row",72),u.dc("click",(function(){u.Dc(a);var t=e.$implicit;return u.hc(4).selectContact(t.id)})),u.Vb()}if(2&t){var n=e.$implicit,i=u.hc(4);u.oc("ngStyle",u.vc(1,Pp,i.isInGrp(n)?"0.5":""))}}function Fp(t,e){if(1&t&&(u.Wb(0,"mat-table",62,63),u.Ub(2,64),u.Oc(3,Sp,2,1,"mat-header-cell",26),u.Oc(4,kp,2,3,"mat-cell",65),u.Tb(),u.Ub(5,21),u.Oc(6,wp,3,3,"mat-header-cell",66),u.Oc(7,Ip,2,1,"mat-cell",23),u.Tb(),u.Ub(8,24),u.Oc(9,jp,3,3,"mat-header-cell",66),u.Oc(10,Rp,2,1,"mat-cell",23),u.Tb(),u.Oc(11,Tp,1,0,"mat-header-row",28),u.Oc(12,Qp,1,3,"mat-row",67),u.Vb()),2&t){var a=u.hc(3);u.oc("dataSource",a.dataSource),u.Db(11),u.oc("matHeaderRowDef",a.displayedColumns),u.Db(1),u.oc("matRowDefColumns",a.displayedColumns)}}function Lp(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-tab",37),u.ic(1,"translate"),u.Wb(2,"div",14),u.Wb(3,"div",49),u.Wb(4,"mat-form-field",50),u.Wb(5,"span",51),u.Rb(6,"mat-icon",52),u.Qc(7,"\xa0\xa0 "),u.Vb(),u.Wb(8,"input",53),u.dc("keyup",(function(){return u.Dc(a),u.hc(2).launchLoading()})),u.ic(9,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(10,"div",15),u.Oc(11,Op,1,1,"div",54),u.Vb(),u.Wb(12,"div",15),u.Rb(13,"mat-paginator",17,55),u.Vb(),u.Vb(),u.Oc(15,_p,1,0,"mat-progress-bar",56),u.Oc(16,Fp,13,3,"mat-table",57),u.Wb(17,"div",40),u.Wb(18,"div",58),u.Wb(19,"button",59),u.dc("click",(function(t){return u.Dc(a),u.hc(2).saveContactsList(t.target)})),u.Qc(20),u.ic(21,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.pc("label",u.jc(1,11,"lang.addContacts")),u.Db(8),u.pc("placeholder",u.jc(9,13,"lang.linkContact")),u.oc("formControl",n.searchTerm),u.Db(3),u.oc("ngIf",n.dataSource&&1e3==n.dataSource.data.length),u.Db(2),u.oc("length",0)("hidePageSize",!0)("pageSize",10),u.Db(2),u.oc("ngIf",!n.dataSource&&!n.initAutoCompleteContact),u.Db(1),u.oc("ngIf",n.dataSource),u.Db(3),u.oc("disabled",0==n.selection.selected.length),u.Db(1),u.Rc(u.jc(21,15,"lang.add"))}}function Ep(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-card",36),u.Wb(1,"mat-tab-group"),u.Wb(2,"mat-tab",37),u.ic(3,"translate"),u.Wb(4,"form",38,39),u.dc("ngSubmit",(function(){return u.Dc(a),u.hc().onSubmit()})),u.Wb(6,"div",40),u.Wb(7,"div",41),u.Wb(8,"mat-form-field"),u.Wb(9,"input",42),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().contactsGroup.label=t})),u.ic(10,"translate"),u.ic(11,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(12,"div",40),u.Wb(13,"div",41),u.Wb(14,"mat-form-field"),u.Wb(15,"input",43),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().contactsGroup.description=t})),u.ic(16,"translate"),u.ic(17,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(18,"div",40),u.Wb(19,"div",44),u.Wb(20,"mat-slide-toggle",45),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().contactsGroup.public=t})),u.ic(21,"translate"),u.Qc(22),u.ic(23,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(24,"div",40),u.Wb(25,"div",46),u.Wb(26,"button",47),u.Qc(27),u.ic(28,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Oc(29,Lp,22,17,"mat-tab",48),u.Vb(),u.Vb()}if(2&t){var n=u.zc(5),i=u.hc();u.Db(2),u.pc("label",u.jc(3,14,"lang.informations")),u.Db(7),u.pc("title",u.jc(10,16,"lang.label")),u.pc("placeholder",u.jc(11,18,"lang.label")),u.oc("ngModel",i.contactsGroup.label),u.Db(6),u.pc("title",u.jc(16,20,"lang.description")),u.pc("placeholder",u.jc(17,22,"lang.description")),u.oc("ngModel",i.contactsGroup.description),u.Db(5),u.pc("title",u.jc(21,24,"lang.contactsGroupDesc")),u.oc("ngModel",i.contactsGroup.public)("checked",i.contactsGroup.public),u.Db(2),u.Rc(u.jc(23,26,"lang.public")),u.Db(4),u.oc("disabled",!n.form.valid),u.Db(1),u.Rc(u.jc(28,28,"lang.save")),u.Db(2),u.oc("ngIf",!i.creationMode)}}function Ap(t,e){1&t&&(u.Wb(0,"mat-header-cell",73),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc("",u.jc(2,1,"lang.contact")," "))}function Up(t,e){if(1&t&&(u.Wb(0,"mat-cell",71),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.contact," ")}}function zp(t,e){1&t&&(u.Wb(0,"mat-header-cell",73),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc("",u.jc(2,1,"lang.address")," "))}function $p(t,e){if(1&t&&(u.Wb(0,"mat-cell",71),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.address," ")}}function Np(t,e){1&t&&u.Rb(0,"mat-header-cell",68)}function Hp(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-cell",74),u.Wb(1,"button",75),u.dc("click",(function(t){u.Dc(a);var n=e.$implicit,i=u.hc();return t.stopPropagation(),i.preDelete(n.position)})),u.ic(2,"translate"),u.Rb(3,"mat-icon",76),u.Vb(),u.Vb()}2&t&&(u.Db(1),u.pc("matTooltip",u.jc(2,1,"lang.delete")))}function Bp(t,e){1&t&&u.Rb(0,"mat-header-row")}function Xp(t,e){1&t&&u.Rb(0,"mat-row")}var Gp,qp=((Gp=function(){function t(e,a,n,i,o,r,l,s){var d=this;_classCallCheck(this,t),this.translate=e,this.http=a,this.route=n,this.router=i,this.notify=o,this.headerService=r,this.appService=l,this.viewContainerRef=s,this.subMenus=[{icon:"fa fa-book",route:"/administration/contacts/list",label:this.translate.instant("lang.contactsList"),current:!1},{icon:"fa fa-code",route:"/administration/contacts/contactsCustomFields",label:this.translate.instant("lang.customFieldsAdmin"),current:!1},{icon:"fa fa-cog",route:"/administration/contacts/contacts-parameters",label:this.translate.instant("lang.contactsParameters"),current:!1},{icon:"fa fa-users",route:"/administration/contacts/contacts-groups",label:this.translate.instant("lang.contactsGroups"),current:!1},{icon:"fas fa-magic",route:"/administration/contacts/duplicates",label:this.translate.instant("lang.duplicatesContactsAdmin"),current:!1}],this.contactsGroup={},this.loading=!1,this.initAutoCompleteContact=!0,this.searchTerm=new c.i,this.searchResult=[],this.displayedColumns=["select","contact","address"],this.displayedColumnsAdded=["contact","address","actions"],this.selection=new Ie.c(!0,[]),this.searchTerm.valueChanges.pipe(Object(As.a)(500),Object(J.a)((function(t){return t.length>2})),Object(gp.a)(),Object(tu.a)((function(t){return d.http.get("../rest/autocomplete/contacts",{params:{search:t}})}))).subscribe((function(t){d.searchResult=t,d.dataSource=new q.p(d.searchResult),d.dataSource.paginator=d.paginator}))}return _createClass(t,[{key:"masterToggle",value:function(t){var e=this;t.checked?this.dataSource.data.forEach((function(t){$("#check_"+t.id+"-input").is(":disabled")||e.selection.select(t.id)})):this.selection.clear()}},{key:"applyFilter",value:function(t){t=(t=t.trim()).toLowerCase(),this.dataSourceAdded.filter=t}},{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.route.params.subscribe((function(e){void 0===e.id?(t.headerService.setHeader(t.translate.instant("lang.contactGroupCreation")),t.creationMode=!0,t.contactsGroup.public=!1,t.loading=!1):(t.creationMode=!1,t.http.get("../rest/contactsGroups/"+e.id).subscribe((function(e){t.contactsGroup=e.contactsGroup,t.headerService.setHeader(t.translate.instant("lang.contactsGroupModification"),t.contactsGroup.label),t.nbContact=t.contactsGroup.nbContacts,setTimeout((function(){t.dataSourceAdded=new q.p(t.contactsGroup.contacts),t.dataSourceAdded.paginator=t.paginatorAdded,t.dataSourceAdded.sort=t.sortAdded}),0),t.loading=!1})))}))}},{key:"saveContactsList",value:function(t){var e=this;t.textContent=this.translate.instant("lang.loading")+"...",t.disabled=!0,this.http.post("../rest/contactsGroups/"+this.contactsGroup.id+"/contacts",{contacts:this.selection.selected}).subscribe((function(a){e.notify.success(e.translate.instant("lang.contactAdded")),e.nbContact=e.nbContact+e.selection.selected.length,e.selection.clear(),t.textContent=e.translate.instant("lang.add"),e.contactsGroup=a.contactsGroup,setTimeout((function(){e.dataSourceAdded=new q.p(e.contactsGroup.contacts),e.dataSourceAdded.paginator=e.paginatorAdded,e.dataSourceAdded.sort=e.sortAdded}),0)}),(function(t){e.notify.error(t.error.errors)}))}},{key:"onSubmit",value:function(){var t=this;this.creationMode?this.http.post("../rest/contactsGroups",this.contactsGroup).subscribe((function(e){t.router.navigate(["/administration/contacts/contacts-groups/"+e.contactsGroup]),t.notify.success(t.translate.instant("lang.contactsGroupAdded"))}),(function(e){t.notify.error(e.error.errors)})):this.http.put("../rest/contactsGroups/"+this.contactsGroup.id,this.contactsGroup).subscribe((function(){t.router.navigate(["/administration/contacts-groups"]),t.notify.success(t.translate.instant("lang.contactsGroupUpdated"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"preDelete",value:function(t){confirm(this.translate.instant("lang.reallyWantToDeleteContactFromGroup"))&&this.removeContact(this.contactsGroup.contacts[t],t)}},{key:"removeContact",value:function(t,e){var a=this;this.http.delete("../rest/contactsGroups/"+this.contactsGroup.id+"/contacts/"+t.id).subscribe((function(){var t=a.contactsGroup.contacts.length-1;a.contactsGroup.contacts[e]=a.contactsGroup.contacts[t],a.contactsGroup.contacts[e].position=e,a.contactsGroup.contacts.splice(t,1),a.nbContact=a.nbContact-1,a.dataSourceAdded=new q.p(a.contactsGroup.contacts),a.dataSourceAdded.paginator=a.paginatorAdded,a.dataSourceAdded.sort=a.sortAdded,a.notify.success(a.translate.instant("lang.contactDeletedFromGroup"))}),(function(t){a.notify.error(t.error.errors)}))}},{key:"launchLoading",value:function(){this.searchTerm.value.length>2&&(this.dataSource=null,this.initAutoCompleteContact=!1)}},{key:"isInGrp",value:function(t){var e=!1;return this.contactsGroup.contacts.forEach((function(a){a.id==t.id&&(e=!0)})),e}},{key:"selectContact",value:function(t){$("#check_"+t+"-input").is(":disabled")||this.selection.toggle(t)}}]),t}()).\u0275fac=function(t){return new(t||Gp)(u.Qb(p.e),u.Qb(f.b),u.Qb(o.a),u.Qb(o.c),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a),u.Qb(u.T))},Gp.\u0275cmp=u.Kb({type:Gp,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(vp,!0),u.Kc(yp,!0),u.Kc(Dp,!0),u.Kc(Vp,!0),u.Kc(Cp,!0)),2&t&&(u.yc(a=u.ec())&&(e.sidenavRight=a.first),u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.paginator=a.first),u.yc(a=u.ec())&&(e.paginatorAdded=a.first),u.yc(a=u.ec())&&(e.sortAdded=a.first))},decls:42,vars:24,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["position","end",2,"overflow-x","hidden","width","40%",3,"mode","fixedInViewport","opened"],["snav2",""],["mat-subheader",""],[1,"row",2,"margin","0px"],[1,"col-md-6","col-xs-6"],["matInput","",3,"placeholder","keyup"],[3,"length","hidePageSize","pageSize"],["paginatorAdded",""],["matSort","","matSortActive","contact","matSortDirection","asc",3,"dataSource"],["tableAdded","matSort"],["matColumnDef","contact"],["mat-sort-header","","style","flex:3;",4,"matHeaderCellDef"],["style","flex:3;",4,"matCellDef"],["matColumnDef","address"],["matColumnDef","actions"],["style","flex:1;",4,"matHeaderCellDef"],["style","justify-content: flex-end;flex:1;",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[3,"label"],[1,"form-horizontal",3,"ngSubmit"],["contactsGroupFormUp","ngForm"],[1,"form-group"],[1,"col-sm-12"],["matInput","","required","","name","label","id","label","type","text","maxlength","32",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","required","","name","description","id","description","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],[1,"col-sm-6",2,"text-align","center"],["name","public","id","public","color","primary",3,"title","ngModel","checked","ngModelChange"],[1,"col-sm-12",2,"text-align","center"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[3,"label",4,"ngIf"],[1,"col-md-8",2,"padding","5px"],["hintLabel","3 caract\xe8res minium"],["matPrefix",""],["color","primary",1,"fa","fa-user-plus"],["type","text","matInput","","autocomplete","off","minlength","3",1,"autocompleteSearch",3,"placeholder","formControl","keyup"],["class","alert alert-danger",3,"innerHTML",4,"ngIf"],["paginatorContactList",""],["mode","indeterminate",4,"ngIf"],[3,"dataSource",4,"ngIf"],[1,"col-sm-12",2,"text-align","center","margin-top","30px"],["mat-raised-button","","color","primary","type","button",3,"disabled","click"],[1,"alert","alert-danger",3,"innerHTML"],["mode","indeterminate"],[3,"dataSource"],["tableContactList",""],["matColumnDef","select"],["style","flex:1;",4,"matCellDef"],["style","flex:3;",4,"matHeaderCellDef"],["style","cursor: pointer;",3,"ngStyle","click",4,"matRowDef","matRowDefColumns"],[2,"flex","1"],["color","primary",3,"checked","change"],["color","primary",3,"id","disabled","checked","click","change"],[2,"flex","3"],[2,"cursor","pointer",3,"ngStyle","click"],["mat-sort-header","",2,"flex","3"],[2,"justify-content","flex-end","flex","1"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,Mp,2,1,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,Wp,2,0,"div",9),u.Oc(14,Ep,30,30,"mat-card",10),u.Vb(),u.Vb(),u.Vb(),u.Wb(15,"mat-sidenav",11,12),u.Wb(17,"mat-list"),u.Wb(18,"h3",13),u.Qc(19),u.ic(20,"translate"),u.Vb(),u.Vb(),u.Wb(21,"div",14),u.Wb(22,"div",15),u.Wb(23,"mat-form-field"),u.Wb(24,"input",16),u.dc("keyup",(function(t){return e.applyFilter(t.target.value)})),u.ic(25,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(26,"div",15),u.Rb(27,"mat-paginator",17,18),u.Vb(),u.Vb(),u.Wb(29,"mat-table",19,20),u.Ub(31,21),u.Oc(32,Ap,3,3,"mat-header-cell",22),u.Oc(33,Up,2,1,"mat-cell",23),u.Tb(),u.Ub(34,24),u.Oc(35,zp,3,3,"mat-header-cell",22),u.Oc(36,$p,2,1,"mat-cell",23),u.Tb(),u.Ub(37,25),u.Oc(38,Np,1,0,"mat-header-cell",26),u.Oc(39,Hp,4,3,"mat-cell",27),u.Tb(),u.Oc(40,Bp,1,0,"mat-header-row",28),u.Oc(41,Xp,1,0,"mat-row",29),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading),u.Db(1),u.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!e.appService.getViewMode()&&!e.creationMode),u.Db(4),u.Tc("",e.nbContact," ",u.jc(20,20,"lang.relatedContacts")," : "),u.Db(5),u.pc("placeholder",u.jc(25,22,"lang.filterBy")),u.Db(3),u.oc("length",0)("hidePageSize",!0)("pageSize",10),u.Db(2),u.oc("dataSource",e.dataSourceAdded),u.Db(11),u.oc("matHeaderRowDef",e.displayedColumnsAdded),u.Db(1),u.oc("matRowDefColumns",e.displayedColumnsAdded))},directives:[C.e,C.f,x.a,W.a,O.t,C.d,Rt.a,Rt.g,S.c,k.b,H.a,q.o,B.a,q.c,q.i,q.b,q.k,q.n,Rt.h,O.s,Rt.d,o.f,Tt.a,Rt.c,j.l,w.c,I.a,Ee.c,Ee.a,c.K,c.v,c.w,c.d,c.F,c.p,c.u,c.x,at.a,R.b,S.i,c.q,c.j,hp.a,q.h,ze.a,q.a,q.j,q.m,O.w,B.b,Qt.b],pipes:[p.d],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}"]}),Gp),Kp=a("5RNC"),Jp=["adminMenuTemplate"];function Yp(t,e){1&t&&(u.Wb(0,"span"),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.disabledContactsFilling")))}function Zp(t,e){1&t&&(u.Wb(0,"span"),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.enabledContactsFilling")))}function tf(t,e){if(1&t&&(u.Wb(0,"a",18),u.Rb(1,"mat-icon",13),u.Wb(2,"p",19),u.Qc(3),u.Vb(),u.Vb()),2&t){var a=e.$implicit;u.Ib("active",a.current),u.oc("routerLink",a.route),u.Db(1),u.Fb(a.icon),u.Db(2),u.Sc(" ",a.label," ")}}var ef=function(t){return{opacity:t}};function af(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-nav-list"),u.Wb(1,"h3",11),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"a",12),u.Wb(5,"mat-icon",13),u.Wb(6,"mat-slide-toggle",14),u.dc("change",(function(){return u.Dc(a),u.hc().toggleFillingContact()})),u.Vb(),u.Vb(),u.Wb(7,"p",15),u.dc("click",(function(){return u.Dc(a),u.hc().toggleFillingContact()})),u.Oc(8,Yp,3,3,"span",16),u.Oc(9,Zp,3,3,"span",16),u.Vb(),u.Vb(),u.Vb(),u.Rb(10,"mat-divider"),u.Wb(11,"mat-nav-list"),u.Oc(12,tf,4,6,"a",17),u.Vb()}if(2&t){var n=u.hc();u.Db(2),u.Rc(u.jc(3,6,"lang.actions")),u.Db(4),u.oc("checked",n.contactsFilling.enable),u.Db(1),u.oc("ngStyle",u.vc(8,ef,n.contactsFilling.enable?"":"0.5")),u.Db(1),u.oc("ngIf",n.contactsFilling.enable),u.Db(1),u.oc("ngIf",!n.contactsFilling.enable),u.Db(3),u.oc("ngForOf",n.subMenus)}}function nf(t,e){1&t&&(u.Wb(0,"div",20),u.Rb(1,"mat-spinner",21),u.Vb())}function of(t,e){1&t&&(u.Wb(0,"mat-header-cell",42),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.label")))}function rf(t,e){if(1&t&&(u.Wb(0,"div"),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=u.hc().$implicit;u.Db(1),u.Rc(u.jc(2,1,"lang.contactsParameters_"+a.identifier))}}function cf(t,e){if(1&t&&(u.Wb(0,"div"),u.Qc(1),u.Vb()),2&t){var a=u.hc().$implicit;u.Db(1),u.Rc(a.label)}}function lf(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Oc(1,rf,3,3,"div",16),u.Oc(2,cf,2,1,"div",16),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.oc("ngIf",!a.label),u.Db(1),u.oc("ngIf",a.label)}}function sf(t,e){1&t&&(u.Wb(0,"mat-header-cell",42),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.mandatory")))}function df(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-cell"),u.Wb(1,"mat-slide-toggle",43),u.dc("change",(function(t){u.Dc(a);var n=e.$implicit;return u.hc(2).addCriteria(t,n,"mandatory")})),u.ic(2,"translate"),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit;u.Db(1),u.pc("title",u.jc(2,3,"lang.mandatory")),u.oc("disabled","lastname"==n.identifier||"company"==n.identifier)("checked",n.mandatory)}}function bf(t,e){1&t&&(u.Wb(0,"mat-header-cell",42),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc("",u.jc(2,1,"lang.contactsFillingCriteria")," "))}function uf(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-cell"),u.Wb(1,"mat-slide-toggle",44),u.dc("change",(function(t){u.Dc(a);var n=e.$implicit;return u.hc(2).addCriteria(t,n,"filling")})),u.ic(2,"translate"),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit;u.Db(1),u.pc("title",u.jc(2,2,"lang.contactsFillingCriteria")),u.oc("checked",n.filling)}}function pf(t,e){1&t&&(u.Wb(0,"mat-header-cell",42),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc("",u.jc(2,1,"lang.autocompletionSearchable")," "))}function ff(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-cell"),u.Wb(1,"mat-slide-toggle",43),u.dc("change",(function(t){u.Dc(a);var n=e.$implicit;return u.hc(2).addCriteria(t,n,"searchable")})),u.ic(2,"translate"),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit;u.Db(1),u.pc("title",u.jc(2,3,"lang.autocompletionSearchable")),u.oc("disabled","lastname"==n.identifier||"company"==n.identifier||"civility"==n.identifier)("checked",n.searchable)}}function mf(t,e){1&t&&(u.Wb(0,"mat-header-cell",42),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc("",u.jc(2,1,"lang.autocompletionDisplayable")," "))}function gf(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-cell"),u.Wb(1,"mat-slide-toggle",43),u.dc("change",(function(t){u.Dc(a);var n=e.$implicit;return u.hc(2).addCriteria(t,n,"displayable")})),u.ic(2,"translate"),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit;u.Db(1),u.pc("title",u.jc(2,3,"lang.autocompletionDisplayable")),u.oc("disabled","lastname"==n.identifier||"company"==n.identifier)("checked",n.displayable)}}function hf(t,e){1&t&&u.Rb(0,"mat-header-row")}function vf(t,e){1&t&&u.Rb(0,"mat-row")}var yf=function(t){return{color:t}};function Df(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-card",22),u.Wb(1,"div",23),u.Wb(2,"div",24),u.Wb(3,"mat-card",25),u.Wb(4,"mat-card-header"),u.Wb(5,"mat-card-title"),u.Qc(6),u.ic(7,"translate"),u.Vb(),u.Vb(),u.Wb(8,"p"),u.Qc(9),u.ic(10,"translate"),u.Wb(11,"b",26),u.Qc(12,"0%"),u.Vb(),u.Qc(13),u.ic(14,"translate"),u.Wb(15,"b",26),u.Qc(16),u.Vb(),u.Qc(17),u.ic(18,"translate"),u.Vb(),u.Wb(19,"mat-slider",27),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().contactsFilling.first_threshold=t}))("change",(function(){return u.Dc(a),u.hc().onSubmit()})),u.Vb(),u.Rb(20,"input",28),u.Vb(),u.Vb(),u.Wb(21,"div",24),u.Wb(22,"mat-card",25),u.Wb(23,"mat-card-header"),u.Wb(24,"mat-card-title"),u.Qc(25),u.ic(26,"translate"),u.Vb(),u.Vb(),u.Wb(27,"p"),u.Qc(28),u.ic(29,"translate"),u.Wb(30,"b",26),u.Qc(31),u.Vb(),u.Qc(32),u.ic(33,"translate"),u.Wb(34,"b",26),u.Qc(35),u.Vb(),u.Qc(36),u.ic(37,"translate"),u.Vb(),u.Wb(38,"mat-slider",29),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().contactsFilling.second_threshold=t}))("change",(function(){return u.Dc(a),u.hc().onSubmit()})),u.Vb(),u.Rb(39,"input",28),u.Vb(),u.Vb(),u.Wb(40,"div",24),u.Wb(41,"mat-card",25),u.Wb(42,"mat-card-header"),u.Wb(43,"mat-card-title"),u.Qc(44),u.ic(45,"translate"),u.Vb(),u.Vb(),u.Wb(46,"p"),u.Qc(47),u.ic(48,"translate"),u.Wb(49,"b",26),u.Qc(50),u.Vb(),u.Qc(51),u.ic(52,"translate"),u.Wb(53,"b",26),u.Qc(54,"100%"),u.Vb(),u.Qc(55),u.ic(56,"translate"),u.Vb(),u.Rb(57,"mat-slider",30),u.Rb(58,"input",28),u.Vb(),u.Vb(),u.Vb(),u.Wb(59,"mat-table",31,32),u.Ub(61,33),u.Oc(62,of,3,3,"mat-header-cell",34),u.Oc(63,lf,3,2,"mat-cell",35),u.Tb(),u.Ub(64,36),u.Oc(65,sf,3,3,"mat-header-cell",34),u.Oc(66,df,3,5,"mat-cell",35),u.Tb(),u.Ub(67,37),u.Oc(68,bf,3,3,"mat-header-cell",34),u.Oc(69,uf,3,4,"mat-cell",35),u.Tb(),u.Ub(70,38),u.Oc(71,pf,3,3,"mat-header-cell",34),u.Oc(72,ff,3,5,"mat-cell",35),u.Tb(),u.Ub(73,39),u.Oc(74,mf,3,3,"mat-header-cell",34),u.Oc(75,gf,3,5,"mat-cell",35),u.Tb(),u.Oc(76,hf,1,0,"mat-header-row",40),u.Oc(77,vf,1,0,"mat-row",41),u.Vb(),u.Vb()}if(2&t){var n=u.hc();u.Db(6),u.Rc(u.jc(7,31,"lang.contactsFillingStep1")),u.Db(3),u.Sc("",u.jc(10,33,"lang.fromRange")," "),u.Db(2),u.oc("ngStyle",u.vc(55,yf,n.fillingColor.first_threshold)),u.Db(2),u.Sc(" ",u.jc(14,35,"lang.toRange")," "),u.Db(2),u.oc("ngStyle",u.vc(57,yf,n.fillingColor.first_threshold)),u.Db(1),u.Sc("",n.contactsFilling.first_threshold,"%"),u.Db(1),u.Sc(" ",u.jc(18,37,"lang.contactsFillingStr"),""),u.Db(2),u.oc("ngModel",n.contactsFilling.first_threshold),u.Db(1),u.pc("value",n.fillingColor.first_threshold),u.Db(5),u.Rc(u.jc(26,39,"lang.contactsFillingStep2")),u.Db(3),u.Sc("",u.jc(29,41,"lang.fromRange")," "),u.Db(2),u.oc("ngStyle",u.vc(59,yf,n.fillingColor.second_threshold)),u.Db(1),u.Sc("",n.contactsFilling.first_threshold+1,"%"),u.Db(1),u.Sc(" ",u.jc(33,43,"lang.toRange")," "),u.Db(2),u.oc("ngStyle",u.vc(61,yf,n.fillingColor.second_threshold)),u.Db(1),u.Sc("",n.contactsFilling.second_threshold,"%"),u.Db(1),u.Sc(" ",u.jc(37,45,"lang.contactsFillingStr"),""),u.Db(2),u.oc("ngModel",n.contactsFilling.second_threshold)("min",n.contactsFilling.first_threshold+1),u.Db(1),u.pc("value",n.fillingColor.second_threshold),u.Db(5),u.Rc(u.jc(45,47,"lang.contactsFillingStep3")),u.Db(3),u.Sc("",u.jc(48,49,"lang.fromRange")," "),u.Db(2),u.oc("ngStyle",u.vc(63,yf,n.fillingColor.third_threshold)),u.Db(1),u.Sc("",n.contactsFilling.second_threshold+1,"%"),u.Db(1),u.Sc(" ",u.jc(52,51,"lang.toRange")," "),u.Db(2),u.oc("ngStyle",u.vc(65,yf,n.fillingColor.third_threshold)),u.Db(2),u.Sc(" ",u.jc(56,53,"lang.contactsFillingStr"),""),u.Db(3),u.pc("value",n.fillingColor.third_threshold),u.Db(1),u.oc("dataSource",n.dataSource),u.Db(17),u.oc("matHeaderRowDef",n.displayedColumns),u.Db(1),u.oc("matRowDefColumns",n.displayedColumns)}}var Vf,Cf=((Vf=function(){function t(e,a,n,i,o,r){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.headerService=i,this.appService=o,this.viewContainerRef=r,this.subMenus=[{icon:"fa fa-book",route:"/administration/contacts/list",label:this.translate.instant("lang.contactsList"),current:!1},{icon:"fa fa-code",route:"/administration/contacts/contactsCustomFields",label:this.translate.instant("lang.customFieldsAdmin"),current:!1},{icon:"fa fa-cog",route:"/administration/contacts/contacts-parameters",label:this.translate.instant("lang.contactsParameters"),current:!0},{icon:"fa fa-users",route:"/administration/contacts/contacts-groups",label:this.translate.instant("lang.contactsGroups"),current:!1},{icon:"fas fa-magic",route:"/administration/contacts/duplicates",label:this.translate.instant("lang.duplicatesContactsAdmin"),current:!1}],this.contactsFilling={enable:!1,first_threshold:"33",second_threshold:"66"},this.contactsParameters=[],this.arrRatingColumns=[],this.fillingColor={first_threshold:"#E81C2B",second_threshold:"#F4891E",third_threshold:"#0AA34F"},this.loading=!1,this.dataSource=new q.p(this.contactsParameters),this.displayedColumns=["identifier","mandatory","filling","searchable","displayable"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.headerService.setHeader(this.translate.instant("lang.contactsParameters")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.http.get("../rest/contactsParameters").subscribe((function(e){t.contactsFilling=e.contactsFilling,t.contactsParameters=e.contactsParameters,t.loading=!1,setTimeout((function(){t.dataSource=new q.p(t.contactsParameters),t.dataSource.paginator=t.paginator,t.dataSource.sort=t.sort}),0)}))}},{key:"addCriteria",value:function(t,e,a){var n=this;this.contactsParameters.forEach((function(i,o){i.id==e.id&&(n.contactsParameters[o][a]=t.checked)})),this.onSubmit()}},{key:"onSubmit",value:function(){var t=this;this.contactsFilling.first_threshold>=this.contactsFilling.second_threshold&&(this.contactsFilling.second_threshold=this.contactsFilling.first_threshold+1),this.http.put("../rest/contactsParameters",{contactsFilling:this.contactsFilling,contactsParameters:this.contactsParameters}).subscribe((function(){t.notify.success(t.translate.instant("lang.parameterUpdated"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"toggleFillingContact",value:function(){this.contactsFilling.enable=!0!==this.contactsFilling.enable,this.onSubmit()}}]),t}()).\u0275fac=function(t){return new(t||Vf)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a),u.Qb(u.T))},Vf.\u0275cmp=u.Kb({type:Vf,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(Jp,!0),u.Xc(H.a,!0),u.Xc(B.a,!0)),2&t&&(u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.paginator=a.first),u.yc(a=u.ec())&&(e.sort=a.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","disableRipple","true"],["color","primary","mat-list-icon",""],["color","primary",3,"checked","change"],["mat-line","",3,"ngStyle","click"],[4,"ngIf"],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-4","col-xs-12"],[2,"margin-bottom","5px"],[3,"ngStyle"],["color","primary","max","98","min","1","step","1","thumbLabel","true",2,"width","100%",3,"ngModel","ngModelChange","change"],["disabled","","matInput","","type","color","name","color",3,"value"],["color","primary","max","99","step","1","thumbLabel","true",2,"width","100%",3,"ngModel","min","ngModelChange","change"],["color","primary","max","100","min","100","step","1","thumbLabel","true","disabled","",2,"width","100%"],["matSort","",3,"dataSource"],["table",""],["matColumnDef","identifier"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","mandatory"],["matColumnDef","filling"],["matColumnDef","searchable"],["matColumnDef","displayable"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],["color","primary",2,"margin-left","11px",3,"disabled","title","checked","change"],["color","primary",2,"margin-left","11px",3,"title","checked","change"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,af,13,10,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,nf,2,0,"div",9),u.Oc(14,Df,78,67,"mat-card",10),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading))},directives:[C.e,C.f,x.a,W.a,O.t,Rt.h,Rt.g,Rt.d,Tt.a,Rt.c,at.a,j.l,O.w,_.a,O.s,o.f,w.c,I.a,I.f,I.m,Kp.a,c.u,c.x,k.b,q.o,B.a,q.c,q.i,q.b,q.k,q.n,q.h,B.b,q.a,q.j,q.m],pipes:[p.d],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}"]}),Vf),xf=["snav2"];function Mf(t,e){1&t&&(u.Wb(0,"div",15),u.Rb(1,"mat-spinner",16),u.Qc(2,"\xa0 "),u.Wb(3,"div"),u.Qc(4),u.ic(5,"translate"),u.Vb(),u.Vb()),2&t&&(u.Db(4),u.Sc(" ",u.jc(5,1,"lang.updateInProgress")," "))}function Wf(t,e){1&t&&(u.Wb(0,"div",17),u.Rb(1,"mat-spinner",18),u.Vb())}function Of(t,e){1&t&&(u.Wb(0,"div",24),u.Rb(1,"mat-icon",25),u.Wb(2,"span",26),u.Qc(3),u.ic(4,"translate"),u.Vb(),u.Rb(5,"mat-icon",27),u.Vb()),2&t&&(u.Db(3),u.Sc("",u.jc(4,1,"lang.appUpToDate")," !"))}function _f(t,e){if(1&t&&(u.Wb(0,"div",28),u.Rb(1,"mat-icon",29),u.Wb(2,"span",26),u.Qc(3),u.ic(4,"translate"),u.Wb(5,"a",30),u.Qc(6),u.Vb(),u.Vb(),u.Rb(7,"mat-icon",31),u.Vb()),2&t){var a=u.hc(2);u.Db(3),u.Sc(" ",u.jc(4,3,"lang.newVersionAvailable")," ! "),u.Db(2),u.qc("href","https://labs.maarch.org/maarch/MaarchCourrier/tags/",a.versions.lastAvailableMinorVersion,"",u.Gc),u.Db(1),u.Rc(a.versions.lastAvailableMinorVersion)}}function Sf(t,e){if(1&t&&u.Rb(0,"div",32),2&t){var a=u.hc(2);u.oc("innerHTML",a.translate.instant("lang.updateWarn")+a.versions.diffOutput.join("<br/>"),u.Ec)}}function kf(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",33),u.Wb(1,"button",34),u.dc("click",(function(){return u.Dc(a),u.hc(2).updateVersionAccess()})),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.Db(1),u.oc("disabled",!n.versions.canUpdate),u.Db(1),u.Rc(u.jc(3,2,"lang.makeUpdate"))}}function wf(t,e){if(1&t&&(u.Wb(0,"mat-card",19),u.Oc(1,Of,6,3,"div",20),u.Oc(2,_f,8,5,"div",21),u.Oc(3,Sf,1,1,"div",22),u.Oc(4,kf,4,4,"div",23),u.Vb()),2&t){var a=u.hc();u.Db(1),u.oc("ngIf",null==a.versions.lastAvailableMinorVersion),u.Db(1),u.oc("ngIf",null!=a.versions.lastAvailableMinorVersion),u.Db(1),u.oc("ngIf",!a.versions.canUpdate&&null!=a.versions.lastAvailableMinorVersion),u.Db(1),u.oc("ngIf",null!=a.versions.lastAvailableMinorVersion)}}function If(t,e){if(1&t&&(u.Wb(0,"div",35),u.Qc(1," Maarch Courrier\xa0"),u.Wb(2,"a",30),u.Qc(3),u.Vb(),u.Qc(4),u.ic(5,"translate"),u.Vb()),2&t){var a=u.hc();u.Db(2),u.qc("href","https://labs.maarch.org/maarch/MaarchCourrier/tags/",a.versions.lastAvailableMajorVersion,"",u.Gc),u.Db(1),u.Rc(a.versions.lastAvailableMajorVersion),u.Db(1),u.Sc("\xa0",u.jc(5,3,"lang.isAvailable")," ! ")}}var jf,Rf=((jf=function(){function t(e,a,n,i,o,r){_classCallCheck(this,t),this.translate=e,this.http=a,this.headerService=n,this.notify=i,this.dialog=o,this.appService=r,this.loading=!1,this.updateInprogress=!1,this.versions={}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.updateVersionControl")),this.loading=!0,this.http.get("../rest/versionsUpdate").pipe(Object(d.a)((function(e){t.versions=e})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(X.of)(!1)})),Object(d.a)((function(){t.loading=!1}))).subscribe()}},{key:"updateVersionAccess",value:function(){var t=this;this.dialogRef=this.dialog.open(K.a,{panelClass:"maarch-modal",data:{title:this.translate.instant("lang.confirm")+" ?",msg:this.translate.instant("lang.updateInfo")}}),this.dialogRef.afterClosed().pipe(Object(J.a)((function(e){return t.dialogRef=null,"ok"===e?(t.updateInprogress=!0,!0):(t.updateInprogress=!1,!1)})),Object(Y.a)((function(){return t.http.put("../rest/versionsUpdate",{})})),Object(d.a)((function(){t.dialogRef=t.dialog.open(Z.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:t.translate.instant("lang.updateOk"),msg:t.translate.instant("lang.saveInDocserversInfo")}})})),Object(Y.a)((function(){return t.dialogRef.afterClosed()})),Object(d.a)((function(){t.dialogRef=null,window.location.reload(!0)})),Object(b.a)((function(e){return t.dialogRef=t.dialog.open(Z.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:t.translate.instant("lang.updateKO"),msg:t.translate.instant("lang.saveInDocserversInfo")}}),t.notify.handleErrors(e),Object(X.of)(!1)})),Object(d.a)((function(){t.updateInprogress=!1}))).subscribe()}}]),t}()).\u0275fac=function(t){return new(t||jf)(u.Qb(p.e),u.Qb(f.b),u.Qb(m.a),u.Qb(y.a),u.Qb(N.b),u.Qb(g.a))},jf.\u0275cmp=u.Kb({type:jf,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&u.Kc(xf,!0),2&t&&u.yc(a=u.ec())&&(e.sidenavRight=a.first)},decls:24,vars:17,consts:[["class","updateInProgress",4,"ngIf"],["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",2,"overflow-x","hidden",3,"mode","fixedInViewport","opened"],["snav2",""],["class","alert-message alert-message-info","style","display: flex;",4,"ngIf"],["mat-subheader",""],[1,"updateInProgress"],["diameter","30"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],["class","alert alert-info","style","display: flex;",4,"ngIf"],["class","alert alert-success","style","display: flex;",4,"ngIf"],["class","alert-message alert-message-danger",3,"innerHTML",4,"ngIf"],["class","col-sm-12","style","text-align:center;",4,"ngIf"],[1,"alert","alert-info",2,"display","flex"],[1,"fa","fa-check","fa-2x",2,"flex","1","text-align","left"],[2,"flex","1","text-align","center"],[1,"fa","fa-check","fa-2x",2,"flex","1","text-align","right"],[1,"alert","alert-success",2,"display","flex"],[1,"fa","fa-info-circle","fa-2x",2,"flex","1","text-align","left"],["target","_blank",2,"font-weight","bold",3,"href"],[1,"fa","fa-info-circle","fa-2x",2,"flex","1","text-align","right"],[1,"alert-message","alert-message-danger",3,"innerHTML"],[1,"col-sm-12",2,"text-align","center"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"alert-message","alert-message-info",2,"display","flex"]],template:function(t,e){1&t&&(u.Oc(0,Mf,6,3,"div",0),u.Wb(1,"mat-sidenav-container",1),u.Wb(2,"mat-sidenav-content"),u.Wb(3,"div",2),u.Wb(4,"div",3),u.Wb(5,"div",4),u.Rb(6,"header-left"),u.Vb(),u.Wb(7,"div",5),u.Rb(8,"header-right"),u.Vb(),u.Vb(),u.Rb(9,"div",6),u.Vb(),u.Wb(10,"div",7),u.Wb(11,"div",8),u.Oc(12,Wf,2,0,"div",9),u.Oc(13,wf,5,4,"mat-card",10),u.Vb(),u.Vb(),u.Vb(),u.Wb(14,"mat-sidenav",11,12),u.Oc(16,If,6,5,"div",13),u.Wb(17,"mat-list"),u.Wb(18,"h3",14),u.Qc(19),u.ic(20,"translate"),u.Vb(),u.Wb(21,"mat-list-item"),u.Wb(22,"b"),u.Qc(23),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.oc("ngIf",e.updateInprogress),u.Db(4),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading),u.Db(1),u.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!e.appService.getViewMode()),u.Db(2),u.oc("ngIf",null!=e.versions.lastAvailableMajorVersion),u.Db(3),u.Rc(u.jc(20,15,"lang.currentVersion")),u.Db(4),u.Rc(e.versions.currentVersion))},directives:[O.t,C.e,C.f,x.a,W.a,C.d,Rt.a,Rt.g,Rt.d,w.c,I.a,Tt.a,R.b],pipes:[p.d],styles:[".updateInProgress[_ngcontent-%COMP%]{z-index:2;display:flex;position:fixed;top:0;left:0;width:100%;height:100%;background:hsla(0,0%,100%,.93);justify-content:center;align-items:center}.alert-message-danger[_ngcontent-%COMP%]{width:100%;max-width:100%}"]}),jf),Tf=["adminMenuTemplate"];function Pf(t,e){1&t&&(u.Wb(0,"mat-nav-list"),u.Wb(1,"h3",11),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"a",12),u.Rb(5,"mat-icon",13),u.Wb(6,"p",14),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(2),u.Rc(u.jc(3,2,"lang.actions")),u.Db(5),u.Sc(" ",u.jc(8,4,"lang.add")," "))}function Qf(t,e){1&t&&(u.Wb(0,"div",15),u.Rb(1,"mat-spinner",16),u.Vb())}function Ff(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",42),u.dc("click",(function(){u.Dc(a);var t=u.hc().$implicit;return u.hc(3).toggleDocserver(t)})),u.ic(1,"translate"),u.Rb(2,"mat-icon",43),u.Vb()}2&t&&u.pc("matTooltip",u.jc(1,1,"lang.lockDocserver"))}function Lf(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",44),u.dc("click",(function(){u.Dc(a);var t=u.hc().$implicit;return u.hc(3).toggleDocserver(t)})),u.ic(1,"translate"),u.Rb(2,"mat-icon",45),u.Vb()}2&t&&u.pc("matTooltip",u.jc(1,1,"lang.unlockDocserver"))}function Ef(t,e){if(1&t&&u.Rb(0,"mat-progress-spinner",46),2&t){var a=u.hc().$implicit;u.oc("value",a.percentage)}}function Af(t,e){if(1&t&&u.Rb(0,"mat-progress-spinner",47),2&t){var a=u.hc().$implicit;u.oc("value",a.percentage)}}function Uf(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",21),u.Wb(1,"mat-card"),u.Wb(2,"form",22,23),u.dc("ngSubmit",(function(){u.Dc(a);var t=e.$implicit,n=e.index;return u.hc(3).onSubmit(t,n)})),u.Oc(4,Ff,3,3,"button",24),u.Oc(5,Lf,3,3,"button",25),u.Wb(6,"div",26),u.Wb(7,"div",27),u.Wb(8,"mat-form-field"),u.Wb(9,"input",28),u.dc("ngModelChange",(function(t){return u.Dc(a),e.$implicit.device_label=t})),u.ic(10,"translate"),u.ic(11,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(12,"div",21),u.Oc(13,Ef,1,1,"mat-progress-spinner",29),u.Oc(14,Af,1,1,"mat-progress-spinner",30),u.Wb(15,"span",31),u.Qc(16),u.Vb(),u.Vb(),u.Wb(17,"div",32),u.Wb(18,"mat-form-field"),u.Wb(19,"input",33),u.dc("ngModelChange",(function(t){return u.Dc(a),e.$implicit.coll_id=t})),u.ic(20,"translate"),u.ic(21,"translate"),u.Vb(),u.Vb(),u.Wb(22,"mat-form-field"),u.Wb(23,"input",34),u.dc("ngModelChange",(function(t){return u.Dc(a),e.$implicit.docserver_id=t})),u.ic(24,"translate"),u.ic(25,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(26,"div",21),u.Wb(27,"mat-form-field"),u.Wb(28,"input",35),u.dc("ngModelChange",(function(t){return u.Dc(a),e.$implicit.limitSizeFormatted=t})),u.ic(29,"translate"),u.ic(30,"translate"),u.Vb(),u.Wb(31,"span",36),u.Qc(32," Go"),u.Vb(),u.Vb(),u.Vb(),u.Rb(33,"div",32),u.Wb(34,"div",27),u.Wb(35,"mat-form-field"),u.Wb(36,"input",37),u.dc("ngModelChange",(function(t){return u.Dc(a),e.$implicit.path_template=t})),u.ic(37,"translate"),u.ic(38,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(39,"div",38),u.Wb(40,"button",39),u.Qc(41),u.ic(42,"translate"),u.Vb(),u.Wb(43,"button",40),u.dc("click",(function(){u.Dc(a);var t=e.index,n=u.hc().$implicit;return u.hc(2).cancelModification(n.docserver_type_id,t)})),u.Qc(44),u.ic(45,"translate"),u.Vb(),u.Wb(46,"button",41),u.dc("click",(function(){u.Dc(a);var t=e.$implicit,n=e.index;return u.hc(3).delete(t,n)})),u.Qc(47),u.ic(48,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit,i=e.index,o=u.hc().$implicit,r=u.hc(2);u.Db(4),u.oc("ngIf",!n.is_readonly),u.Db(1),u.oc("ngIf",n.is_readonly),u.Db(4),u.pc("title",u.jc(10,29,"lang.label")),u.pc("placeholder",u.jc(11,31,"lang.label")),u.oc("ngModel",n.device_label)("disabled",n.is_readonly),u.Db(4),u.oc("ngIf",n.percentage<60),u.Db(1),u.oc("ngIf",n.percentage>=60),u.Db(1),u.pc("title",n.actualSizeFormatted),u.Db(1),u.Sc("",n.percentage,"%"),u.Db(3),u.pc("title",u.jc(20,33,"lang.collection")),u.pc("placeholder",u.jc(21,35,"lang.collection")),u.oc("ngModel",n.coll_id),u.Db(4),u.pc("title",u.jc(24,37,"lang.id")),u.pc("placeholder",u.jc(25,39,"lang.id")),u.oc("ngModel",n.docserver_id),u.Db(5),u.pc("title",u.jc(29,41,"lang.maxSize")),u.pc("placeholder",u.jc(30,43,"lang.maxSize")),u.oc("ngModel",n.limitSizeFormatted)("disabled",n.is_readonly),u.Db(8),u.pc("title",u.jc(37,45,"lang.path")),u.pc("placeholder",u.jc(38,47,"lang.path")),u.oc("ngModel",n.path_template)("disabled",n.is_readonly),u.Db(4),u.oc("disabled",r.checkModif(n,r.docserversClone[o.docserver_type_id][i])),u.Db(1),u.Rc(u.jc(42,49,"lang.update")),u.Db(2),u.oc("disabled",r.checkModif(n,r.docserversClone[o.docserver_type_id][i])),u.Db(1),u.Rc(u.jc(45,51,"lang.cancel")),u.Db(3),u.Rc(u.jc(48,53,"lang.delete"))}}function zf(t,e){if(1&t&&(u.Wb(0,"mat-expansion-panel"),u.Wb(1,"mat-expansion-panel-header"),u.Wb(2,"mat-panel-title"),u.Qc(3),u.Vb(),u.Wb(4,"mat-panel-description"),u.Qc(5),u.Vb(),u.Vb(),u.Wb(6,"div",19),u.Oc(7,Uf,49,55,"div",20),u.Vb(),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.Db(3),u.Sc(" ",a.docserver_type_label," "),u.Db(2),u.Sc(" ",a.docserver_type_id," "),u.Db(2),u.oc("ngForOf",n.docservers[a.docserver_type_id])}}function $f(t,e){if(1&t&&(u.Wb(0,"mat-card",17),u.Wb(1,"mat-accordion"),u.Oc(2,zf,8,3,"mat-expansion-panel",18),u.Vb(),u.Vb()),2&t){var a=u.hc();u.Db(2),u.oc("ngForOf",a.docserversTypes)}}var Nf,Hf=((Nf=function(){function t(e,a,n,i,o,r){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.headerService=i,this.appService=o,this.viewContainerRef=r,this.loading=!1,this.docservers=[],this.docserversClone=[],this.docserversTypes={}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.docservers")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/docservers").subscribe((function(e){t.docservers=e.docservers,t.docserversClone=JSON.parse(JSON.stringify(t.docservers)),t.docserversTypes=e.types,t.loading=!1}))}},{key:"toggleDocserver",value:function(t){t.is_readonly=!t.is_readonly}},{key:"cancelModification",value:function(t,e){this.docservers[t][e]=JSON.parse(JSON.stringify(this.docserversClone[t][e]))}},{key:"checkModif",value:function(t,e){return t.size_limit_number=1e9*t.limitSizeFormatted,JSON.stringify(t)===JSON.stringify(e)||!(t.size_limit_number>=t.actual_size_number&&t.limitSizeFormatted>0&&/^[\d]*$/.test(t.limitSizeFormatted))}},{key:"onSubmit",value:function(t,e){var a=this;t.size_limit_number=1e9*t.limitSizeFormatted,this.http.put("../rest/docservers/"+t.id,t).subscribe((function(n){a.docservers[t.docserver_type_id][e]=n.docserver,a.docserversClone[t.docserver_type_id][e]=JSON.parse(JSON.stringify(a.docservers[t.docserver_type_id][e])),a.notify.success(a.translate.instant("lang.docserverUpdated"))}),(function(t){a.notify.error(t.error.errors)}))}},{key:"delete",value:function(t,e){var a=this;(0===t.actual_size_number?confirm(this.translate.instant("lang.delete")+" ?"):confirm(this.translate.instant("lang.docserverdeleteWarning")))&&this.http.delete("../rest/docservers/"+t.id).subscribe((function(){a.docservers[t.docserver_type_id].splice(e,1),a.notify.success(a.translate.instant("lang.docserverDeleted"))}),(function(t){a.notify.error(t.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||Nf)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a),u.Qb(u.T))},Nf.\u0275cmp=u.Kb({type:Nf,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(Tf,!0),u.Xc(H.a,!0),u.Xc(B.a,!0)),2&t&&(u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.paginator=a.first),u.yc(a=u.ec())&&(e.sort=a.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/docservers/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[4,"ngFor","ngForOf"],[1,"row"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"form-horizontal",3,"ngSubmit"],["docserverFormUp","ngForm"],["mat-icon-button","","color","accent","style","position: absolute;top: 5px;right:10px;",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","color","warn","style","position: absolute;top: 5px;right:10px;",3,"matTooltip","click",4,"ngIf"],[1,"row",2,"margin-top","10px"],[1,"col-md-12"],["matInput","","required","","name","label","id","label","type","text","maxlength","255",3,"title","placeholder","ngModel","disabled","ngModelChange"],["name","percent_val","id","percent_val","color","primary","mode","determinate","style","margin:auto;",3,"value",4,"ngIf"],["name","percent_val","id","percent_val","color","warn","mode","determinate","style","margin:auto;",3,"value",4,"ngIf"],[2,"position","absolute","font-weight","bold","left","50%","transform","translateX(-50%)","top","40%","font-weight","bold",3,"title"],[1,"col-md-8"],["matInput","","required","","name","collection","id","collection","type","text","disabled","",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","required","","name","identifier","id","identifier","type","text","disabled","",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","required","","name","max_size","id","max_size","type","number",3,"title","placeholder","ngModel","disabled","ngModelChange"],["matSuffix",""],["matInput","","required","","name","path","id","path","type","text",3,"title","placeholder","ngModel","disabled","ngModelChange"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-raised-button","","color","default",3,"disabled","click"],["mat-raised-button","","type","button","color","warn",3,"click"],["mat-icon-button","","color","accent",2,"position","absolute","top","5px","right","10px",3,"matTooltip","click"],[1,"fa","fa-lock-open"],["mat-icon-button","","color","warn",2,"position","absolute","top","5px","right","10px",3,"matTooltip","click"],[1,"fa","fa-lock"],["name","percent_val","id","percent_val","color","primary","mode","determinate",2,"margin","auto",3,"value"],["name","percent_val","id","percent_val","color","warn","mode","determinate",2,"margin","auto",3,"value"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,Pf,9,6,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,Qf,2,0,"div",9),u.Oc(14,$f,3,1,"mat-card",10),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading))},directives:[C.e,C.f,x.a,W.a,O.t,Rt.h,Rt.g,Rt.d,o.f,Tt.a,Rt.c,j.l,w.c,I.a,Ae.a,O.s,Ae.c,Ae.g,Ae.h,Ae.f,c.K,c.v,c.w,S.c,k.b,c.d,c.F,c.p,c.u,c.x,c.A,S.j,R.b,Qt.b,w.a],pipes:[p.d],encapsulation:2}),Nf);function Bf(t,e){1&t&&(u.Wb(0,"div",10),u.Rb(1,"mat-spinner",11),u.Vb())}function Xf(t,e){if(1&t&&(u.Wb(0,"mat-option",30),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a.docserver_type_id),u.Db(1),u.Sc(" ",a.docserver_type_label," ")}}function Gf(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-card",12),u.Wb(1,"form",13,14),u.dc("ngSubmit",(function(){u.Dc(a);var t=u.hc();return t.onSubmit(t.docserver)})),u.Wb(3,"div",15),u.Wb(4,"div",16),u.Wb(5,"mat-form-field"),u.Wb(6,"mat-select",17),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().docserver.docserver_type_id=t})),u.ic(7,"translate"),u.ic(8,"translate"),u.Oc(9,Xf,2,2,"mat-option",18),u.Vb(),u.Vb(),u.Wb(10,"mat-form-field"),u.Wb(11,"input",19),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().docserver.docserver_id=t})),u.ic(12,"translate"),u.ic(13,"translate"),u.Vb(),u.Vb(),u.Wb(14,"mat-form-field"),u.Wb(15,"input",20),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().docserver.device_label=t})),u.ic(16,"translate"),u.ic(17,"translate"),u.Vb(),u.Vb(),u.Wb(18,"mat-form-field"),u.Wb(19,"mat-select",21),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().docserver.coll_id=t})),u.ic(20,"translate"),u.ic(21,"translate"),u.Wb(22,"mat-option",22),u.Qc(23," letterbox_coll "),u.Vb(),u.Wb(24,"mat-option",23),u.Qc(25," attachments_coll "),u.Vb(),u.Wb(26,"mat-option",24),u.Qc(27," archive_transfer_coll "),u.Vb(),u.Vb(),u.Vb(),u.Wb(28,"mat-form-field"),u.Wb(29,"input",25),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().docserver.limitSizeFormatted=t})),u.ic(30,"translate"),u.ic(31,"translate"),u.Vb(),u.Wb(32,"span",26),u.Qc(33," Go"),u.Vb(),u.Vb(),u.Wb(34,"mat-form-field"),u.Wb(35,"input",27),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().docserver.path_template=t})),u.ic(36,"translate"),u.ic(37,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(38,"div",28),u.Wb(39,"button",29),u.Qc(40),u.ic(41,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.zc(2),i=u.hc();u.Db(6),u.pc("title",u.jc(7,23,"lang.docserverType")),u.pc("placeholder",u.jc(8,25,"lang.docserverType")),u.oc("ngModel",i.docserver.docserver_type_id),u.Db(3),u.oc("ngForOf",i.docserversTypes),u.Db(2),u.pc("title",u.jc(12,27,"lang.id")),u.pc("placeholder",u.jc(13,29,"lang.id")),u.oc("ngModel",i.docserver.docserver_id),u.Db(4),u.pc("title",u.jc(16,31,"lang.label")),u.pc("placeholder",u.jc(17,33,"lang.label")),u.oc("ngModel",i.docserver.device_label),u.Db(4),u.pc("title",u.jc(20,35,"lang.collection")),u.pc("placeholder",u.jc(21,37,"lang.collection")),u.oc("ngModel",i.docserver.coll_id),u.Db(10),u.pc("title",u.jc(30,39,"lang.maxSize")),u.pc("placeholder",u.jc(31,41,"lang.maxSize")),u.oc("ngModel",i.docserver.limitSizeFormatted)("disabled",i.docserver.is_readonly),u.Db(6),u.pc("title",u.jc(36,43,"lang.path")),u.pc("placeholder",u.jc(37,45,"lang.path")),u.oc("ngModel",i.docserver.path_template)("disabled",i.docserver.is_readonly),u.Db(4),u.oc("disabled",!n.form.valid),u.Db(1),u.Rc(u.jc(41,47,"lang.add"))}}var qf,Kf=((qf=function(){function t(e,a,n,i,o,r){_classCallCheck(this,t),this.translate=e,this.http=a,this.router=n,this.notify=i,this.headerService=o,this.appService=r,this.loading=!1,this.docserver={coll_id:"letterbox_coll",docserver_type_id:"DOC",limitSizeFormatted:"50"},this.docserversTypes=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.docserverCreation")),this.loading=!0,this.http.get("../rest/docserverTypes").subscribe((function(e){t.docserversTypes=e.docserverTypes,t.loading=!1}))}},{key:"onSubmit",value:function(t){var e=this;t.size_limit_number=1e9*t.limitSizeFormatted,this.http.post("../rest/docservers",t).subscribe((function(t){e.notify.success(e.translate.instant("lang.docserverAdded")),e.router.navigate(["/administration/docservers/"])}),(function(t){e.notify.error(t.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||qf)(u.Qb(p.e),u.Qb(f.b),u.Qb(o.c),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a))},qf.\u0275cmp=u.Kb({type:qf,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Xc(H.a,!0),u.Xc(B.a,!0)),2&t&&(u.yc(a=u.ec())&&(e.paginator=a.first),u.yc(a=u.ec())&&(e.sort=a.first))},decls:13,vars:8,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"form-horizontal",3,"ngSubmit"],["docserverForm","ngForm"],[1,"row",2,"margin-top","10px"],[1,"col-md-12"],["required","","name","docserver_type","id","docserver_type",3,"title","placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","required","","name","identifier","id","identifier","type","text","maxlength","32","pattern","^[\\w.-]*$",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","required","","name","label","id","label","type","text","maxlength","255",3,"title","placeholder","ngModel","ngModelChange"],["required","","name","collection","id","collection",3,"title","placeholder","ngModel","ngModelChange"],["value","letterbox_coll","selected",""],["value","attachments_coll"],["value","archive_transfer_coll"],["matInput","","required","","name","max_size","id","max_size","type","number","pattern","^\\d+$",3,"title","placeholder","ngModel","disabled","ngModelChange"],["matSuffix",""],["matInput","","required","","name","path","id","path","type","text",3,"title","placeholder","ngModel","disabled","ngModelChange"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[3,"value"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Wb(1,"mat-sidenav-content"),u.Wb(2,"div",1),u.Wb(3,"div",2),u.Wb(4,"div",3),u.Rb(5,"header-left"),u.Vb(),u.Wb(6,"div",4),u.Rb(7,"header-right"),u.Vb(),u.Vb(),u.Rb(8,"div",5),u.Vb(),u.Wb(9,"div",6),u.Wb(10,"div",7),u.Oc(11,Bf,2,0,"div",8),u.Oc(12,Gf,42,49,"mat-card",9),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(3),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading))},directives:[C.e,C.f,x.a,W.a,O.t,w.c,I.a,c.K,c.v,c.w,S.c,it.a,c.F,c.u,c.x,O.s,k.b,c.d,c.p,c.B,j.p,c.A,S.j,R.b],pipes:[p.d],encapsulation:2}),qf),Jf=["adminMenuTemplate"];function Yf(t,e){1&t&&(u.Wb(0,"mat-nav-list"),u.Wb(1,"h3",11),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"a",12),u.Rb(5,"mat-icon",13),u.Wb(6,"p",14),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(2),u.Rc(u.jc(3,2,"lang.actions")),u.Db(5),u.Sc(" ",u.jc(8,4,"lang.add")," "))}function Zf(t,e){1&t&&(u.Wb(0,"div",15),u.Rb(1,"mat-spinner",16),u.Vb())}function tm(t,e){1&t&&(u.Wb(0,"mat-header-cell",44),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc("",u.jc(2,1,"lang.technicalId")," "))}function em(t,e){if(1&t&&(u.Wb(0,"mat-cell",45),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.template_id," ")}}function am(t,e){1&t&&(u.Wb(0,"mat-header-cell",46),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc("",u.jc(2,1,"lang.templateName")," "))}function nm(t,e){if(1&t&&(u.Wb(0,"mat-cell",47),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.template_label," ")}}function im(t,e){if(1&t&&(u.Wb(0,"mat-header-cell",46),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=u.hc(2);u.Ib("hide-for-mobile",a.appService.getViewMode()),u.Db(1),u.Sc("",u.jc(2,3,"lang.description")," ")}}function om(t,e){if(1&t&&(u.Wb(0,"mat-cell",47),u.Qc(1),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.Ib("hide-for-mobile",n.appService.getViewMode()),u.Db(1),u.Sc(" ",a.template_comment," ")}}function rm(t,e){if(1&t&&(u.Wb(0,"mat-header-cell",44),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=u.hc(2);u.Ib("hide-for-mobile",a.appService.getViewMode()),u.Db(1),u.Sc(" ",u.jc(2,3,"lang.templateTarget"),"")}}function cm(t,e){if(1&t&&(u.Wb(0,"mat-cell",45),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.Ib("hide-for-mobile",n.appService.getViewMode()),u.Db(1),u.Sc(" ",u.jc(2,3,"lang."+a.template_target)," ")}}function lm(t,e){if(1&t&&(u.Wb(0,"mat-header-cell",44),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=u.hc(2);u.Ib("hide-for-mobile",a.appService.getViewMode()),u.Db(1),u.Sc("",u.jc(2,3,"lang.templateType")," ")}}function sm(t,e){if(1&t&&(u.Wb(0,"mat-cell",45),u.Qc(1),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.Ib("hide-for-mobile",n.appService.getViewMode()),u.Db(1),u.Sc(" ",a.template_type," ")}}function dm(t,e){1&t&&u.Rb(0,"mat-header-cell")}function bm(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-cell",48),u.Wb(1,"button",49),u.dc("click",(function(t){u.Dc(a);var n=e.$implicit,i=u.hc(2);return t.stopPropagation(),i.deleteTemplate(n)})),u.ic(2,"translate"),u.Rb(3,"mat-icon",50),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit;u.Db(1),u.pc("matTooltip",u.jc(2,2,"lang.delete")),u.oc("disabled","Y"==n.is_system)}}function um(t,e){1&t&&u.Rb(0,"mat-header-row")}function pm(t,e){1&t&&(u.Rb(0,"mat-row",51),u.ic(1,"translate")),2&t&&(u.qc("routerLink","/administration/templates/",e.$implicit.template_id,""),u.pc("matTooltip",u.jc(1,2,"lang.view")))}function fm(t,e){if(1&t&&(u.Wb(0,"mat-card",17),u.Wb(1,"div",18),u.Wb(2,"div",19),u.Wb(3,"mat-form-field"),u.Rb(4,"input",20),u.ic(5,"translate"),u.Vb(),u.Vb(),u.Wb(6,"div",19),u.Rb(7,"mat-paginator",21,22),u.Vb(),u.Vb(),u.Wb(9,"mat-table",23,24),u.Ub(11,25),u.Oc(12,tm,3,3,"mat-header-cell",26),u.Oc(13,em,2,1,"mat-cell",27),u.Tb(),u.Ub(14,28),u.Oc(15,am,3,3,"mat-header-cell",29),u.Oc(16,nm,2,1,"mat-cell",30),u.Tb(),u.Ub(17,31),u.Oc(18,im,3,5,"mat-header-cell",32),u.Oc(19,om,2,3,"mat-cell",33),u.Tb(),u.Ub(20,34),u.Oc(21,rm,3,5,"mat-header-cell",35),u.Oc(22,cm,3,5,"mat-cell",36),u.Tb(),u.Ub(23,37),u.Oc(24,lm,3,5,"mat-header-cell",35),u.Oc(25,sm,2,3,"mat-cell",36),u.Tb(),u.Ub(26,38),u.Oc(27,dm,1,0,"mat-header-cell",39),u.Oc(28,bm,4,4,"mat-cell",40),u.Tb(),u.Oc(29,um,1,0,"mat-header-row",41),u.Oc(30,pm,2,4,"mat-row",42),u.Vb(),u.Wb(31,"div",43),u.Qc(32),u.ic(33,"translate"),u.Vb(),u.Vb()),2&t){var a=u.hc();u.Db(4),u.pc("placeholder",u.jc(5,10,"lang.filterBy")),u.oc("formControl",a.adminService.getFilterField()),u.Db(3),u.oc("length",100)("hidePageSize",!0)("pageSize",10),u.Db(2),u.oc("dataSource",a.adminService.getDataSource()),u.Db(20),u.oc("matHeaderRowDef",a.displayedColumns),u.Db(1),u.oc("matRowDefColumns",a.displayedColumns),u.Db(2),u.Tc(" ",a.templates.length," ",u.jc(33,12,"lang.templates"),"")}}var mm,gm=((mm=function(){function t(e,a,n,i,o,r,c,l){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.headerService=i,this.appService=o,this.functions=r,this.adminService=c,this.viewContainerRef=l,this.search=null,this.templates=[],this.titles=[],this.loading=!1,this.displayedColumns=["template_id","template_label","template_comment","template_type","template_target","actions"],this.filterColumns=["template_label","template_comment","template_type","template_target"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.templates")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/templates").subscribe((function(e){t.templates=e.templates,t.loading=!1,setTimeout((function(){t.adminService.setDataSource("admin_templates",t.templates,t.sort,t.paginator,t.filterColumns)}),0)}),(function(e){t.notify.handleErrors(e)}))}},{key:"deleteTemplate",value:function(t){var e=this;confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+t.template_label+" \xbb")&&this.http.delete("../rest/templates/"+t.template_id).subscribe((function(){for(var a in e.templates)e.templates[a].template_id===t.template_id&&e.templates.splice(Number(a),1);e.adminService.setDataSource("admin_templates",e.templates,e.sort,e.paginator,e.filterColumns),e.notify.success(e.translate.instant("lang.templateDeleted"))}),(function(t){e.notify.error(t.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||mm)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a),u.Qb(D.a),u.Qb(jt),u.Qb(u.T))},mm.\u0275cmp=u.Kb({type:mm,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(Jf,!0),u.Xc(H.a,!0),u.Xc(B.a,!0)),2&t&&(u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.paginator=a.first),u.yc(a=u.ec())&&(e.sort=a.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/templates/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","template_id"],["mat-sort-header","","style","flex:1;",4,"matHeaderCellDef"],["style","flex:1;",4,"matCellDef"],["matColumnDef","template_label"],["mat-sort-header","","style","flex:2;",4,"matHeaderCellDef"],["style","flex:2;",4,"matCellDef"],["matColumnDef","template_comment"],["mat-sort-header","","style","flex:2;",3,"hide-for-mobile",4,"matHeaderCellDef"],["style","flex:2;",3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","template_target"],["mat-sort-header","","style","flex:1;",3,"hide-for-mobile",4,"matHeaderCellDef"],["style","flex:1;",3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","template_type"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header","",2,"flex","1"],[2,"flex","1"],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"disabled","matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,Yf,9,6,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,Zf,2,0,"div",9),u.Oc(14,fm,34,14,"mat-card",10),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading))},directives:[C.e,C.f,x.a,W.a,O.t,Rt.h,Rt.g,Rt.d,o.f,Tt.a,Rt.c,j.l,w.c,I.a,S.c,k.b,c.d,c.u,c.j,H.a,q.o,B.a,q.c,q.i,q.b,q.k,q.n,q.h,B.b,q.a,R.b,Qt.b,q.j,q.m,o.d],pipes:[p.d],encapsulation:2}),mm),hm=a("Dxa7"),vm=a("+AL4"),ym=a("IOqN"),Dm=["onlyofficeViewer"],Vm=["collaboraOnlineViewer"];function Cm(t,e){if(1&t){var a=u.Xb();u.Wb(0,"onlyoffice-viewer",8,9),u.dc("triggerAfterUpdatedDoc",(function(){return u.Dc(a),u.hc().close()}))("triggerCloseEditor",(function(){return u.Dc(a),u.hc().dialogRef.close("")}))("triggerModifiedDocument",(function(){return u.Dc(a),u.hc().documentIsModified=!0})),u.Vb()}if(2&t){var n=u.hc();u.oc("hideCloseEditor",!0)("params",n.editorOptions)("file",n.file)("editMode",!0)}}function xm(t,e){if(1&t){var a=u.Xb();u.Wb(0,"app-collabora-online-viewer",10,11),u.dc("triggerAfterUpdatedDoc",(function(){return u.Dc(a),u.hc().close()}))("triggerCloseEditor",(function(){return u.Dc(a),u.hc().dialogRef.close("")}))("triggerModifiedDocument",(function(){return u.Dc(a),u.hc().documentIsModified=!0})),u.Vb()}if(2&t){var n=u.hc();u.oc("params",n.editorOptions)("file",n.file)("editMode",!0)}}var Mm,Wm=((Mm=function(){function t(e,a,n){_classCallCheck(this,t),this.translate=e,this.dialogRef=a,this.data=n,this.loading=!1,this.editorOptions=null,this.file=null,this.editorType=null,this.documentIsModified=!1}return _createClass(t,[{key:"ngOnInit",value:function(){this.editorOptions=this.data.editorOptions,this.file=this.data.file,this.editorType=this.data.editorType}},{key:"close",value:function(){var t=this;"onlyoffice"===this.editorType?this.onlyofficeViewer.getFile().pipe(Object(hm.take)(1),Object(kt.tap)((function(e){t.dialogRef.close(e)}))).subscribe():"collaboraonline"===this.editorType?this.collaboraOnlineViewer.getFile().pipe(Object(hm.take)(1),Object(kt.tap)((function(e){t.dialogRef.close(e)}))).subscribe():this.dialogRef.close()}}]),t}()).\u0275fac=function(t){return new(t||Mm)(u.Qb(p.e),u.Qb(N.h),u.Qb(N.a))},Mm.\u0275cmp=u.Kb({type:Mm,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Xc(Dm,!0),u.Xc(Vm,!0)),2&t&&(u.yc(a=u.ec())&&(e.onlyofficeViewer=a.first),u.yc(a=u.ec())&&(e.collaboraOnlineViewer=a.first))},decls:12,vars:10,consts:[[1,"mat-dialog-content-container"],[2,"padding","0px"],["style","height:100%;width:100%;",3,"hideCloseEditor","params","file","editMode","triggerAfterUpdatedDoc","triggerCloseEditor","triggerModifiedDocument",4,"ngIf"],["style","height:100%;width:100%;",3,"params","file","editMode","triggerAfterUpdatedDoc","triggerCloseEditor","triggerModifiedDocument",4,"ngIf"],[1,"divider-modal"],["mat-dialog-actions","",1,"actions"],["mat-raised-button","","mat-button","","color","primary",3,"disabled","click"],["mat-raised-button","","mat-button","",3,"disabled","mat-dialog-close"],[2,"height","100%","width","100%",3,"hideCloseEditor","params","file","editMode","triggerAfterUpdatedDoc","triggerCloseEditor","triggerModifiedDocument"],["onlyofficeViewer",""],[2,"height","100%","width","100%",3,"params","file","editMode","triggerAfterUpdatedDoc","triggerCloseEditor","triggerModifiedDocument"],["collaboraOnlineViewer",""]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"mat-dialog-content",1),u.Oc(2,Cm,2,4,"onlyoffice-viewer",2),u.Oc(3,xm,2,3,"app-collabora-online-viewer",3),u.Vb(),u.Rb(4,"span",4),u.Wb(5,"div",5),u.Wb(6,"button",6),u.dc("click",(function(){return e.close()})),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Wb(9,"button",7),u.Qc(10),u.ic(11,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(2),u.oc("ngIf","onlyoffice"===e.editorType),u.Db(1),u.oc("ngIf","collaboraonline"===e.editorType),u.Db(3),u.oc("disabled",!e.documentIsModified),u.Db(1),u.Rc(u.jc(8,6,"lang.validate")),u.Db(2),u.oc("disabled",e.loading),u.Db(1),u.Rc(u.jc(11,8,"lang.cancel")))},directives:[N.f,O.t,N.c,R.b,N.d,vm.a,ym.a],pipes:[p.d],styles:[""]}),Mm),Om=["snav2"],_m=["adminMenuTemplate"],Sm=["maarchTree"];function km(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-nav-list"),u.Wb(1,"h3",13),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"a",17),u.dc("click",(function(){return u.Dc(a),u.hc(2).duplicateTemplate()})),u.Rb(5,"mat-icon",18),u.Wb(6,"p",19),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.Db(2),u.Rc(u.jc(3,5,"lang.actions")),u.Db(2),u.Ib("disabled",n.lockFound||"acknowledgementReceipt"==n.template.target),u.oc("disableRipple",n.lockFound||"acknowledgementReceipt"==n.template.target),u.Db(3),u.Sc(" ",u.jc(8,7,"lang.duplicate")," ")}}function wm(t,e){if(1&t&&u.Oc(0,km,9,9,"mat-nav-list",16),2&t){var a=u.hc();u.oc("ngIf",!a.creationMode&&!a.loading)}}function Im(t,e){1&t&&(u.Wb(0,"div",20),u.Rb(1,"mat-spinner",21),u.Vb())}function jm(t,e){if(1&t&&(u.Wb(0,"div",27),u.Wb(1,"div",25),u.Wb(2,"mat-form-field"),u.Rb(3,"input",34),u.ic(4,"translate"),u.ic(5,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t){var a=u.hc(2);u.Db(3),u.pc("title",u.jc(4,3,"lang.technicalId")),u.pc("value",a.template.id),u.pc("placeholder",u.jc(5,5,"lang.technicalId"))}}function Rm(t,e){if(1&t&&(u.Wb(0,"mat-option",35),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a),u.Db(1),u.Sc(" ",u.jc(2,2,"lang."+a),"")}}function Tm(t,e){if(1&t&&(u.Wb(0,"mat-option",35),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a.id),u.Db(1),u.Sc(" ",a.label," ")}}function Pm(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",27),u.Wb(1,"div",25),u.Wb(2,"mat-form-field"),u.Wb(3,"mat-select",36),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).template.template_attachment_type=t})),u.ic(4,"translate"),u.ic(5,"translate"),u.Wb(6,"mat-option",37),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Oc(9,Tm,2,2,"mat-option",31),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.Db(3),u.pc("title",u.jc(4,5,"lang.attachmentType")),u.pc("placeholder",u.jc(5,7,"lang.attachmentType")),u.oc("ngModel",n.template.template_attachment_type),u.Db(4),u.Rc(u.jc(8,9,"lang.allAttachments")),u.Db(2),u.oc("ngForOf",n.attachmentTypesList)}}function Qm(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",27),u.Wb(1,"div",25),u.Wb(2,"mat-form-field"),u.Wb(3,"mat-select",38),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).template.template_attachment_type=t})),u.ic(4,"translate"),u.ic(5,"translate"),u.Wb(6,"mat-option",39),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Wb(9,"mat-option",40),u.Qc(10),u.ic(11,"translate"),u.Vb(),u.Wb(12,"mat-option",41),u.Qc(13),u.ic(14,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.Db(3),u.pc("title",u.jc(4,7,"lang.acknowledgementReceiptType")),u.pc("placeholder",u.jc(5,9,"lang.acknowledgementReceiptType")),u.oc("disabled",!n.creationMode)("ngModel",n.template.template_attachment_type),u.Db(4),u.Rc(u.jc(8,11,"lang.ARsimple")),u.Db(3),u.Rc(u.jc(11,13,"lang.ARsva")),u.Db(3),u.Rc(u.jc(14,15,"lang.ARsvr"))}}function Fm(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",27),u.Wb(1,"div",25),u.Wb(2,"mat-form-field"),u.Wb(3,"input",42),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).template.subject=t})),u.ic(4,"translate"),u.ic(5,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.Db(3),u.pc("title",u.jc(4,3,"lang.emailSubject")),u.pc("placeholder",u.jc(5,5,"lang.emailSubject")),u.oc("ngModel",n.template.subject)}}function Lm(t,e){if(1&t&&(u.Wb(0,"mat-radio-button",45),u.Qc(1),u.Vb()),2&t){var a=e.$implicit,n=u.hc(3);u.oc("value",a)("checked",n.template.type===a),u.Db(1),u.Sc(" ",a,"")}}function Em(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",27),u.Wb(1,"div",25),u.Wb(2,"mat-radio-group",43),u.dc("change",(function(t){return u.Dc(a),u.hc(2).changeType(t)})),u.Oc(3,Lm,2,3,"mat-radio-button",44),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.Db(2),u.oc("disabled",!n.creationMode),u.Db(1),u.oc("ngForOf",n.availableTypes)}}function Am(t,e){if(1&t&&(u.Wb(0,"mat-option",35),u.Qc(1),u.Vb()),2&t){var a=u.hc().$implicit;u.rc("value","",a.fileExt,": ",a.fileName,""),u.Db(1),u.Tc(" ",a.fileExt,": ",a.fileName," ")}}function Um(t,e){if(1&t&&(u.Ub(0),u.Oc(1,Am,2,4,"mat-option",57),u.Tb()),2&t){var a=e.$implicit,n=u.hc().$implicit;u.Db(1),u.oc("ngIf",n==a.fileExt)}}function zm(t,e){if(1&t&&(u.Ub(0),u.Wb(1,"mat-optgroup",53),u.Oc(2,Um,2,1,"ng-container",56),u.Vb(),u.Tb()),2&t){var a=e.$implicit,n=u.hc(4);u.Db(1),u.qc("label","",a," :"),u.Db(1),u.oc("ngForOf",n.defaultTemplatesList)}}function $m(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-form-field"),u.Wb(1,"mat-select",52),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(3).selectedModelFile=t}))("selectionChange",(function(){return u.Dc(a),u.hc(3).changeModel()})),u.ic(2,"translate"),u.ic(3,"translate"),u.Wb(4,"mat-optgroup",53),u.ic(5,"translate"),u.Wb(6,"mat-option",54),u.dc("click",(function(){return u.Dc(a),u.hc(),u.zc(5).click()})),u.Rb(7,"mat-icon",55),u.Qc(8),u.Vb(),u.Vb(),u.Oc(9,zm,3,2,"ng-container",56),u.Vb(),u.Vb()}if(2&t){var n=u.hc(3);u.Db(1),u.pc("title",u.jc(2,9,"lang.defaultTemplate")),u.pc("placeholder",u.jc(3,11,"lang.chosenModel")),u.oc("disabled",!n.creationMode)("ngModel",n.selectedModelFile)("required","acknowledgementReceipt"!=n.template.target),u.Db(3),u.qc("label","",u.jc(5,13,"lang.loadedFile")," :"),u.Db(2),u.oc("value",n.template.file.name),u.Db(2),u.Sc(" ",n.functionsService.empty(n.template.file)||n.functionsService.empty(n.template.file.name)?n.translate.instant("lang.importFile"):n.template.file.name," "),u.Db(1),u.oc("ngForOf",n.extensionModels)}}function Nm(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",58),u.dc("click",(function(t){u.Dc(a);var e=u.hc(3);return t.stopPropagation(),e.editFile()})),u.Qc(1),u.ic(2,"translate"),u.Vb()}if(2&t){var n=u.hc(3);u.oc("disabled",n.lockFound),u.Db(1),u.Rc(u.jc(2,2,"lang.templateEdition"))}}function Hm(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",58),u.dc("click",(function(t){u.Dc(a),u.hc();var e=u.zc(5);return t.stopPropagation(),e.click()})),u.Qc(1),u.ic(2,"translate"),u.Vb()}if(2&t){var n=u.hc(3);u.oc("disabled",n.lockFound),u.Db(1),u.Rc(u.jc(2,2,"lang.importFile"))}}function Bm(t,e){if(1&t&&u.Rb(0,"iframe",59),2&t){var a=u.hc(3);u.oc("src",a.templateDocView,u.Fc)}}function Xm(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",27),u.Wb(1,"div",46),u.Wb(2,"div",47),u.Wb(3,"div",27),u.Wb(4,"input",48,49),u.dc("change",(function(t){return u.Dc(a),u.hc(2).uploadFileTrigger(t)})),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(6,"div",25),u.Oc(7,$m,10,15,"mat-form-field",16),u.Oc(8,Nm,3,4,"button",50),u.Oc(9,Hm,3,4,"button",50),u.Vb(),u.Oc(10,Bm,1,1,"iframe",51),u.Vb()}if(2&t){var n=u.hc(2);u.Db(7),u.oc("ngIf",n.creationMode||n.template.file.name),u.Db(1),u.oc("ngIf",n.creationMode&&n.selectedModelFile||!n.creationMode),u.Db(1),u.oc("ngIf",n.creationMode&&!n.selectedModelFile||!n.creationMode&&!n.functionsService.empty(n.template.file.name)&&"java"!==n.headerService.user.preferences.documentEdition),u.Db(1),u.oc("ngIf",null!==n.templateDocView)}}function Gm(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",27),u.Wb(1,"div",25),u.Wb(2,"mat-form-field"),u.Wb(3,"textarea",60),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).template.file.content=t})),u.ic(4,"translate"),u.ic(5,"translate"),u.Qc(6,"                                    "),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.Db(3),u.pc("placeholder",u.jc(4,4,"lang.contentTxtTemplate")),u.pc("title",u.jc(5,6,"lang.contentTxtTemplate")),u.oc("ngModel",n.template.file.content)("required","acknowledgementReceipt"!=n.template.target)}}function qm(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",27),u.Wb(1,"div",25),u.Wb(2,"div",61),u.Wb(3,"textarea",62),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).template.file.content=t})),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.Db(3),u.oc("ngModel",n.template.file.content)("required","acknowledgementReceipt"!=n.template.target)}}function Km(t,e){if(1&t&&(u.Wb(0,"mat-option",35),u.Qc(1),u.Vb()),2&t){var a=u.hc().$implicit;u.oc("value",a.id),u.Db(1),u.Rc(a.label)}}function Jm(t,e){if(1&t&&(u.Ub(0),u.Oc(1,Km,2,2,"mat-option",57),u.Tb()),2&t){var a=e.$implicit,n=u.hc(3);u.Db(1),u.oc("ngIf",n.displayDatasources(a))}}function Ym(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",27),u.Wb(1,"div",25),u.Wb(2,"mat-form-field"),u.Wb(3,"mat-select",63),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).template.datasource=t})),u.ic(4,"translate"),u.ic(5,"translate"),u.Wb(6,"mat-option",64),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Oc(9,Jm,2,1,"ng-container",56),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.Db(3),u.pc("title",u.jc(4,5,"lang.templateDatasource")),u.pc("placeholder",u.jc(5,7,"lang.templateDatasource")),u.oc("ngModel",n.template.datasource),u.Db(4),u.Rc(u.jc(8,9,"lang.noDatasource")),u.Db(2),u.oc("ngForOf",n.datasourcesList)}}function Zm(t,e){if(1&t&&(u.Wb(0,"mat-option",35),u.Qc(1),u.Vb()),2&t){var a=u.hc().$implicit;u.rc("value","",a.fileExt,": ",a.fileName,""),u.Db(1),u.Tc(" ",a.fileExt,": ",a.fileName," ")}}function tg(t,e){if(1&t&&(u.Ub(0),u.Oc(1,Zm,2,4,"mat-option",57),u.Tb()),2&t){var a=e.$implicit,n=u.hc().$implicit;u.Db(1),u.oc("ngIf",n==a.fileExt)}}function eg(t,e){if(1&t&&(u.Ub(0),u.Wb(1,"mat-optgroup",53),u.Oc(2,tg,2,1,"ng-container",56),u.Vb(),u.Tb()),2&t){var a=e.$implicit,n=u.hc(3);u.Db(1),u.qc("label","",a," :"),u.Db(1),u.oc("ngForOf",n.defaultTemplatesList)}}function ag(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",58),u.dc("click",(function(t){u.Dc(a);var e=u.hc(3);return t.stopPropagation(),e.editFile()})),u.Qc(1),u.ic(2,"translate"),u.Vb()}if(2&t){var n=u.hc(3);u.oc("disabled",n.lockFound),u.Db(1),u.Rc(u.jc(2,2,"lang.templateEdition"))}}function ng(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",58),u.dc("click",(function(t){u.Dc(a),u.hc();var e=u.zc(13);return t.stopPropagation(),e.click()})),u.Qc(1),u.ic(2,"translate"),u.Vb()}if(2&t){var n=u.hc(3);u.oc("disabled",n.lockFound),u.Db(1),u.Rc(u.jc(2,2,"lang.importFile"))}}function ig(t,e){if(1&t&&u.Rb(0,"iframe",59),2&t){var a=u.hc(3);u.oc("src",a.templateDocView,u.Fc)}}function og(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",27),u.Wb(1,"mat-tab-group",65),u.dc("selectedTabChange",(function(t){return u.Dc(a),u.hc(2).loadTab(t)})),u.Wb(2,"mat-tab",53),u.ic(3,"translate"),u.Wb(4,"div",25),u.Wb(5,"div",61),u.Wb(6,"textarea",66),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).template.file.electronic.content=t})),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(7,"mat-tab",53),u.ic(8,"translate"),u.Wb(9,"div",46),u.Wb(10,"div",47),u.Wb(11,"div",27),u.Wb(12,"input",48,67),u.dc("change",(function(t){return u.Dc(a),u.hc(2).uploadFileTrigger(t)})),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(14,"div",25),u.Wb(15,"mat-form-field"),u.Wb(16,"mat-select",68),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).selectedModelFile=t})),u.ic(17,"translate"),u.ic(18,"translate"),u.Wb(19,"mat-optgroup",53),u.ic(20,"translate"),u.Wb(21,"mat-option",69),u.dc("click",(function(){return u.Dc(a),u.zc(13).click()})),u.Rb(22,"mat-icon",55),u.Qc(23),u.Vb(),u.Vb(),u.Oc(24,eg,3,2,"ng-container",56),u.Vb(),u.Vb(),u.Oc(25,ag,3,4,"button",50),u.Oc(26,ng,3,4,"button",50),u.Vb(),u.Oc(27,ig,1,1,"iframe",51),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.Db(2),u.pc("label",u.jc(3,16,"lang.electronicTemplate")),u.Db(4),u.oc("ngModel",n.template.file.electronic.content)("required","acknowledgementReceipt"!=n.template.target),u.Db(1),u.pc("label",u.jc(8,18,"lang.paperTemplate")),u.Db(9),u.pc("title",u.jc(17,20,"lang.defaultTemplate")),u.pc("placeholder",u.jc(18,22,"lang.chosenModel")),u.oc("disabled",!n.creationMode&&null!==n.template.file.paper.name)("ngModel",n.selectedModelFile)("required","acknowledgementReceipt"!=n.template.target),u.Db(3),u.qc("label","",u.jc(20,24,"lang.loadedFile")," :"),u.Db(2),u.oc("value",n.template.file.paper.name),u.Db(2),u.Sc(" ",n.functionsService.empty(n.template.file.paper)||n.functionsService.empty(n.template.file.paper.name)?n.translate.instant("lang.importFile"):n.template.file.paper.name," "),u.Db(1),u.oc("ngForOf",n.extensionModels),u.Db(1),u.oc("ngIf",n.creationMode&&n.selectedModelFile||!n.creationMode&&!n.functionsService.empty(n.template.file.paper.name)),u.Db(1),u.oc("ngIf",!n.selectedModelFile||!n.creationMode&&"java"!==n.headerService.user.preferences.documentEdition),u.Db(1),u.oc("ngIf",null!==n.templateDocView)}}function rg(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-card",22),u.Wb(1,"form",23,24),u.dc("ngSubmit",(function(){return u.Dc(a),u.hc().onSubmit()})),u.Wb(3,"div",25),u.Oc(4,jm,6,7,"div",26),u.Wb(5,"div",27),u.Wb(6,"div",25),u.Wb(7,"mat-form-field"),u.Wb(8,"input",28),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().template.label=t})),u.ic(9,"translate"),u.ic(10,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(11,"div",27),u.Wb(12,"div",25),u.Wb(13,"mat-form-field"),u.Wb(14,"textarea",29),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().template.description=t})),u.ic(15,"translate"),u.ic(16,"translate"),u.Qc(17,"                                    "),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(18,"div",27),u.Wb(19,"div",25),u.Wb(20,"mat-form-field"),u.Wb(21,"mat-select",30),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().template.target=t}))("selectionChange",(function(){return u.Dc(a),u.hc().updateTemplateType()})),u.ic(22,"translate"),u.ic(23,"translate"),u.Oc(24,Rm,3,4,"mat-option",31),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Oc(25,Pm,10,11,"div",26),u.Oc(26,Qm,15,17,"div",26),u.Oc(27,Fm,6,7,"div",26),u.Oc(28,Em,4,2,"div",26),u.Oc(29,Xm,11,4,"div",26),u.Oc(30,Gm,7,8,"div",26),u.Oc(31,qm,4,2,"div",26),u.Oc(32,Ym,10,11,"div",26),u.Oc(33,og,28,26,"div",26),u.Vb(),u.Wb(34,"div",32),u.Wb(35,"button",33),u.Qc(36),u.ic(37,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.zc(2),i=u.hc();u.Db(4),u.oc("ngIf",!i.creationMode),u.Db(4),u.pc("title",u.jc(9,23,"lang.templateName")),u.pc("placeholder",u.jc(10,25,"lang.templateName")),u.oc("ngModel",i.template.label),u.Db(6),u.pc("placeholder",u.jc(15,27,"lang.description")),u.pc("title",u.jc(16,29,"lang.description")),u.oc("ngModel",i.template.description),u.Db(7),u.pc("title",u.jc(22,31,"lang.templateTarget")),u.pc("placeholder",u.jc(23,33,"lang.templateTarget")),u.oc("disabled",!i.creationMode)("ngModel",i.template.target),u.Db(3),u.oc("ngForOf",i.targetTypes),u.Db(1),u.oc("ngIf","attachments"==i.template.target),u.Db(1),u.oc("ngIf","acknowledgementReceipt"==i.template.target),u.Db(1),u.oc("ngIf","sendmail"==i.template.target),u.Db(1),u.oc("ngIf",i.availableTypes.length>1),u.Db(1),u.oc("ngIf","OFFICE"==i.template.type),u.Db(1),u.oc("ngIf","TXT"==i.template.type),u.Db(1),u.oc("ngIf","HTML"==i.template.type),u.Db(1),u.oc("ngIf","notifications"==i.template.target),u.Db(1),u.oc("ngIf","OFFICE_HTML"==i.template.type),u.Db(2),u.oc("disabled",!n.form.valid||i.lockFound),u.Db(1),u.Rc(u.jc(37,35,"lang.save"))}}function cg(t,e){if(1&t&&(u.Wb(0,"mat-list-item"),u.Wb(1,"mat-icon",5),u.Rb(2,"i",6),u.Vb(),u.Wb(3,"span",7),u.Qc(4),u.Vb(),u.Vb()),2&t){var a=e.$implicit;u.Db(4),u.Sc(" ",a.entity_label," ")}}var lg,sg,dg=((sg=function(){function t(e,a,n,i,o,r,c,l,s,d,b){_classCallCheck(this,t),this.http=e,this.sanitizer=a,this.route=n,this.router=i,this.notify=o,this.headerService=r,this.dialog=c,this.appService=l,this.viewContainerRef=s,this.functionsService=d,this.translate=b,this.loading=!1,this.template={id:0,label:"",description:"",datasource:"letterbox_attachment",target:"",type:"",file:null},this.targetTypes=["acknowledgementReceipt","notes","sendmail","indexingFile","notifications","attachments"],this.allowedExtensions=["doc","docx","dotx","odt","ott","html","xlsl","xlsx","xltx","ods","ots","csv"],this.selectedModelFile=null,this.availableTypes=[],this.statuses=[],this.categoriesList=[],this.keywordsList=[],this.jnlpValue={},this.extensionModels=[],this.buttonFileName=this.translate.instant("lang.importFile"),this.lockFound=!1,this.templateDocView=null,this.data=[],this.config={}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.route.params.subscribe((function(e){void 0===e.id?(t.headerService.setHeader(t.translate.instant("lang.templateCreation")),t.creationMode=!0,t.http.get("../rest/administration/templates/new").subscribe((function(e){t.setInitialValue(e),t.loading=!1}))):(t.creationMode=!1,t.http.get("../rest/templates/"+e.id+"/details").subscribe((function(e){t.setInitialValue(e),t.template={id:e.template.template_id,label:e.template.template_label,description:e.template.template_comment,datasource:e.template.template_datasource,target:e.template.template_target,type:e.template.template_type,subject:e.template.subject,file:{}},t.updateTemplateType(),t.selectedModelFile=e.template.template_file_name,t.template.template_attachment_type=e.template.template_attachment_type,"HTML"===t.template.type||"TXT"===t.template.type?t.template.file.content=e.template.template_content:"OFFICE"===t.template.type?(t.template.file.format=e.template.template_file_name.split(".").pop(),t.template.file.name=e.template.template_file_name,t.getViewTemplateContent()):"acknowledgementReceipt"===t.template.target&&(t.functionsService.empty(e.template.template_file_name)||(t.template.file.paper.format=e.template.template_file_name.split(".").pop()),t.template.file.paper.name=e.template.template_file_name,t.template.file.electronic.content=e.template.template_content,t.getViewTemplateContent()),t.headerService.setHeader(t.translate.instant("lang.templateModification"),t.template.template_label),t.loading=!1}))),t.template.template_attachment_type||(t.template.template_attachment_type="all")}))}},{key:"getViewTemplateContent",value:function(){var t=this;this.http.get("../rest/templates/".concat(this.template.id,"/content")).pipe(Object(d.a)((function(e){t.templateDocView=t.sanitizer.bypassSecurityTrustResourceUrl("data:application/pdf;base64,"+e.encodedDocument)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"initMce",value:function(t){var e=this;setTimeout((function(){tinymce.remove("textarea"),tinymce.baseURL="../node_modules/tinymce",tinymce.suffix=".min",tinymce.init({selector:t,statusbar:!1,language:e.translate.instant("lang.langISO").replace("-","_"),language_url:"../node_modules/tinymce-i18n/langs/".concat(e.translate.instant("lang.langISO").replace("-","_"),".js"),height:"200",plugins:["autoresize","code"],external_plugins:{maarch_b64image:"../../src/frontend/plugins/tinymce/maarch_b64image/plugin.min.js"},menubar:!1,toolbar:"undo | bold italic underline | alignleft aligncenter alignright | maarch_b64image | forecolor | code",theme_buttons1_add:"fontselect,fontsizeselect",theme_buttons2_add_before:"cut,copy,paste,pastetext,pasteword,separator,search,replace,separator",theme_buttons2_add:"separator,insertdate,inserttime,preview,separator,forecolor,backcolor",theme_buttons3_add_before:"tablecontrols,separator",theme_buttons3_add:"separator,print,separator,ltr,rtl,separator,fullscreen,separator,insertlayer,moveforward,movebackward,absolut",theme_toolbar_align:"left",theme_advanced_toolbar_location:"top",theme_styles:"Header 1=header1;Header 2=header2;Header 3=header3;Table Row=tableRow1",setup:function(t){t.on("keyup",(function(t){"HTML"===e.template.type&&null!=tinymce.get("templateHtml")&&(e.template.file.content=tinymce.get("templateHtml").getContent()),"OFFICE_HTML"===e.template.type&&null!=tinymce.get("templateOfficeHtml")&&(e.template.file.electronic.content=tinymce.get("templateOfficeHtml").getContent())}))}})}),20)}},{key:"setInitialValue",value:function(t){var e=this;this.extensionModels=[],t.templatesModels.forEach((function(t){-1===e.extensionModels.indexOf(t.fileExt)&&e.extensionModels.push(t.fileExt)})),this.defaultTemplatesList=t.templatesModels,this.attachmentTypesList=t.attachmentTypes,this.datasourcesList=t.datasources,this.maarchTree.initData(t.entities.map((function(t){return Object.assign(Object.assign({},t),{id:t.serialId})})))}},{key:"getBase64Document",value:function(t){var e=new Uint8Array(t).reduce((function(t,e){return t+String.fromCharCode(e)}),"");return btoa(e)}},{key:"uploadFileTrigger",value:function(t){var e=this;if(t.target.files&&t.target.files[0]&&this.isExtensionAllowed(t.target.files[0])){var a=new FileReader;"acknowledgementReceipt"===this.template.target?(this.template.file.paper={name:"",type:"",content:""},this.template.file.paper.name=t.target.files[0].name,this.selectedModelFile=this.template.file.paper.name,this.template.file.paper.type=t.target.files[0].type,this.template.file.paper.format=this.template.file.paper.name.split(".").pop()):(this.template.file={name:"",type:"",content:""},this.template.file.name=t.target.files[0].name,this.selectedModelFile=this.template.file.name,this.template.file.type=t.target.files[0].type,this.template.file.format=this.template.file.name.split(".").pop()),a.readAsArrayBuffer(t.target.files[0]),a.onload=function(t){"acknowledgementReceipt"===e.template.target?e.template.file.paper.content=e.getBase64Document(t.target.result):e.template.file.content=e.getBase64Document(t.target.result),e.getViewTemplateFile()}}}},{key:"isExtensionAllowed",value:function(t){var e=t.name.toLowerCase().split(".").pop();return 0!==this.allowedExtensions.filter((function(t){return t.toLowerCase()===e.toLowerCase()})).length||(this.dialog.open(Z.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.notAllowedExtension")+" !",msg:this.translate.instant("lang.file")+" : <b>"+t.name+"</b>, "+this.translate.instant("lang.type")+" : <b>"+t.type+"</b><br/><br/><u>"+this.translate.instant("lang.allowedExtensions")+"</u> : <br/>"+this.allowedExtensions.filter((function(t,e,a){return e===a.indexOf(t)})).join(", ")}}),!1)}},{key:"editFile",value:function(){var t={docUrl:"rest/onlyOffice/mergedFile"};if(this.creationMode){if("acknowledgementReceipt"!==this.template.target)if(this.functionsService.empty(this.template.file.content)){t.objectType="templateCreation";var e,a=_createForOfIteratorHelper(this.defaultTemplatesList);try{for(a.s();!(e=a.n()).done;){var n=e.value;this.selectedModelFile===n.fileExt+": "+n.fileName&&(t.objectId=n.filePath)}}catch(d){a.e(d)}finally{a.f()}t.extension=t.objectId.toLowerCase().split(".").pop()}else t.objectType="encodedResource",t.objectId=this.template.file.content,t.extension=this.template.file.format;else if("acknowledgementReceipt"===this.template.target)if(this.functionsService.empty(this.template.file.paper.content)){t.objectType="templateCreation";var i,o=_createForOfIteratorHelper(this.defaultTemplatesList);try{for(o.s();!(i=o.n()).done;){var r=i.value;this.selectedModelFile===r.fileExt+": "+r.fileName&&(t.objectId=r.filePath)}}catch(d){o.e(d)}finally{o.f()}t.extension=t.objectId.toLowerCase().split(".").pop()}else t.objectType="encodedResource",t.objectId=this.template.file.paper.content,t.extension=this.template.file.paper.format}else"acknowledgementReceipt"!==this.template.target?this.functionsService.empty(this.template.file.content)?(t.objectType="templateModification",t.objectId=this.template.id,t.extension=this.template.file.name.toLowerCase().split(".").pop()):(t.objectType="encodedResource",t.objectId=this.template.file.content,t.extension=this.template.file.format):"acknowledgementReceipt"===this.template.target&&(this.functionsService.empty(this.template.file.paper.content)?(t.objectType="templateModification",t.objectId=this.template.id,t.extension=this.template.file.paper.name.toLowerCase().split(".").pop()):(t.objectType="encodedResource",t.objectId=this.template.file.paper.content,t.extension=this.template.file.paper.format));if("java"===this.headerService.user.preferences.documentEdition){if(this.creationMode){t.objectId="",t.objectType="templateCreation";var c,l=_createForOfIteratorHelper(this.defaultTemplatesList);try{for(l.s();!(c=l.n()).done;){var s=c.value;this.selectedModelFile===s.fileExt+": "+s.fileName&&(t.objectId=s.filePath)}}catch(d){l.e(d)}finally{l.f()}if(this.functionsService.empty(t.objectId))return alert(this.translate.instant("lang.canNotEditImportedDocumentWhenJava")),!1}else t.objectType="templateModification",t.objectId=this.template.id;this.launchJavaEditor(t)}else"java"!==this.headerService.user.preferences.documentEdition&&this.launchIntegratedEditor(t,this.headerService.user.preferences.documentEdition)}},{key:"launchJavaEditor",value:function(t){var e=this;this.http.post("../rest/jnlp",t).pipe(Object(d.a)((function(a){window.location.href="../rest/jnlp/"+a.generatedJnlp,e.checkLockFile(a.jnlpUniqueId,t.extension)})),Object(b.a)((function(t){return e.notify.handleSoftErrors(t),Object(X.of)(!1)}))).subscribe()}},{key:"launchIntegratedEditor",value:function(t,e){var a=this;this.dialogRef=this.dialog.open(Wm,{autoFocus:!1,panelClass:"maarch-full-height-modal",minWidth:"80%",disableClose:!0,data:{title:this.template.template_style,editorOptions:t,file:{format:t.extension},editorType:e}}),this.dialogRef.afterClosed().pipe(Object(J.a)((function(t){return!a.functionsService.empty(t)})),Object(d.a)((function(e){"acknowledgementReceipt"===a.template.target?(a.template.file.paper.name=a.selectedModelFile,a.template.file.paper.format=t.extension,a.template.file.paper.content=e.content):(a.template.file.name=a.selectedModelFile,a.template.file.format=t.extension,a.template.file.content=e.content),a.getViewTemplateFile()})),Object(b.a)((function(t){return a.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe()}},{key:"getViewTemplateFile",value:function(){var t=this;this.http.post("../rest/convertedFile/encodedFile",{encodedFile:"acknowledgementReceipt"===this.template.target?this.template.file.paper.content:this.template.file.content,format:"acknowledgementReceipt"===this.template.target?this.template.file.paper.format:this.template.file.format}).pipe(Object(d.a)((function(e){t.templateDocView=t.sanitizer.bypassSecurityTrustResourceUrl("data:application/pdf;base64,"+e.encodedResource)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"checkLockFile",value:function(t,e){var a=this;this.intervalLockFile=setInterval((function(){a.http.get("../rest/jnlp/lock/"+t).pipe(Object(d.a)((function(t){a.lockFound=t.lockFileFound,a.lockFound||(clearInterval(a.intervalLockFile),a.loadTmpFile("".concat(t.fileTrunk,".").concat(e)))}))).subscribe()}),1e3)}},{key:"loadTmpFile",value:function(t){var e=this;this.http.get("../rest/convertedFile/".concat(t,"?convert=true")).pipe(Object(d.a)((function(a){"acknowledgementReceipt"===e.template.target?(e.template.file.paper.name=e.selectedModelFile,e.template.file.paper.format=t.toLowerCase().split(".").pop(),e.template.file.paper.content=a.encodedResource):(e.template.file.name=e.selectedModelFile,e.template.file.format=t.toLowerCase().split(".").pop(),e.template.file.content=a.encodedResource),e.templateDocView=e.sanitizer.bypassSecurityTrustResourceUrl("data:application/pdf;base64,"+a.encodedConvertedResource)}))).subscribe()}},{key:"duplicateTemplate",value:function(){var t=this;this.lockFound||"acknowledgementReceipt"===this.template.target||confirm(this.translate.instant("lang.confirmDuplicate"))&&this.http.post("../rest/templates/"+this.template.id+"/duplicate",{id:this.template.id}).subscribe((function(e){t.notify.success(t.translate.instant("lang.templateDuplicated")),t.router.navigate(["/administration/templates/"+e.id])}),(function(e){t.notify.error(e.error.errors)}))}},{key:"onSubmit",value:function(){var t=this;this.isValidTemplate()&&(this.creationMode?this.http.post("../rest/templates",this.formatTemplate()).pipe(Object(d.a)((function(e){e.checkEntities?(t.config={panelClass:"maarch-modal",data:{entitiesList:e.checkEntities,template_attachment_type:t.template.template_attachment_type}},t.dialog.open(bg,t.config)):(t.router.navigate(["/administration/templates"]),t.notify.success(t.translate.instant("lang.templateAdded")))})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe():this.http.put("../rest/templates/"+this.template.id,this.formatTemplate()).pipe(Object(d.a)((function(e){!t.functionsService.empty(e)&&e.checkEntities?(t.config={panelClass:"maarch-modal",data:{entitiesList:e.checkEntities,template_attachment_type:t.template.template_attachment_type}},t.dialogRef=t.dialog.open(bg,t.config)):(t.router.navigate(["/administration/templates"]),t.notify.success(t.translate.instant("lang.templateUpdated")))})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe())}},{key:"formatTemplate",value:function(){var t=Object.assign({},this.template);return t.entities=this.maarchTree.getSelectedNodes().map((function(t){return t.entity_id})),t}},{key:"isValidTemplate",value:function(){return"acknowledgementReceipt"===this.template.target&&this.functionsService.empty(this.template.file.paper.name)&&this.functionsService.empty(this.template.file.electronic.content)?(alert(this.translate.instant("lang.mustCompleteAR")),!1):"acknowledgementReceipt"===this.template.target||"OFFICE"!==this.template.type||!this.functionsService.empty(this.template.file.name)||(alert(this.translate.instant("lang.editModelFirst")),!1)}},{key:"displayDatasources",value:function(t){return"notification"===t.target&&"notifications"===this.template.target||"document"===t.target&&"notifications"!==this.template.target}},{key:"updateTemplateType",value:function(){this.template.file={name:"",type:"",content:""},this.templateDocView=null,["attachments","indexingFile"].indexOf(this.template.target)>-1?(this.template.type="OFFICE",this.availableTypes=["OFFICE"]):["notifications","sendmail"].indexOf(this.template.target)>-1?(this.template.type="HTML",this.availableTypes=["HTML","TXT"],this.initMce("textarea#templateHtml")):"notes"===this.template.target?(this.template.type="TXT",this.availableTypes=["TXT"]):"acknowledgementReceipt"===this.template.target&&(this.template.file={electronic:{name:"",type:"",content:""},paper:{name:"",type:"",content:""}},this.template.type="OFFICE_HTML",this.availableTypes=[],this.template.template_attachment_type="",this.initMce("textarea#templateOfficeHtml"))}},{key:"changeType",value:function(t){"HTML"===t.value?this.initMce("textarea#templateHtml"):tinymce.remove("textarea"),this.template.type=t.value}},{key:"changeModel",value:function(){this.template.file={name:"",type:"",content:""},this.template.file={electronic:{name:"",type:"",content:""}}}},{key:"loadTab",value:function(t){0===t.index?this.initMce("textarea#templateOfficeHtml"):(tinymce.remove("textarea"),null==this.template.template_file_name&&null==this.template.template_style&&(this.buttonFileName=this.translate.instant("lang.importFile")))}},{key:"ngOnDestroy",value:function(){tinymce.remove("textarea"),this.intervalLockFile&&clearInterval(this.intervalLockFile)}}]),t}()).\u0275fac=function(t){return new(t||sg)(u.Qb(f.b),u.Qb(Us.b),u.Qb(o.a),u.Qb(o.c),u.Qb(y.a),u.Qb(m.a),u.Qb(N.b),u.Qb(g.a),u.Qb(u.T),u.Qb(D.a),u.Qb(p.e))},sg.\u0275cmp=u.Kb({type:sg,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(Om,!0),u.Kc(_m,!0),u.Kc(Sm,!0)),2&t&&(u.yc(a=u.ec())&&(e.sidenavRight=a.first),u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.maarchTree=a.first))},decls:24,vars:14,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content",2,"padding","10px 10px 0px 10px"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content","style","display: contents;",4,"ngIf"],["fixedTopGap","56","position","end",2,"overflow-x","hidden","width","400px",3,"mode","fixedInViewport","opened"],["snav2",""],["mat-subheader",""],[2,"padding","10px"],["maarchTree",""],[4,"ngIf"],["mat-list-item","",3,"disableRipple","click"],["color","primary","mat-list-icon","",1,"fa","fa-copy"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content",2,"display","contents"],[1,"form-horizontal",2,"display","contents",3,"ngSubmit"],["templatesFormUp","ngForm"],[1,"col-sm-12"],["class","form-group",4,"ngIf"],[1,"form-group"],["matInput","","name","label","type","text","maxlength","255","required","",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","description","name","template_comment","matTextareaAutosize","","matAutosizeMinRows","2","matAutosizeMaxRows","5","required","",3,"ngModel","placeholder","title","ngModelChange"],["name","target","required","",3,"disabled","title","placeholder","ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-12",2,"background","white","position","sticky","bottom","0px","text-align","center"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["matInput","","type","number","disabled","",3,"title","value","placeholder"],[3,"value"],["id","template_attachment_type","name","template_attachment_type",3,"title","placeholder","ngModel","ngModelChange"],["value","all"],["id","template_attachment_type","name","template_attachment_type","required","",3,"disabled","title","placeholder","ngModel","ngModelChange"],["value","simple"],["value","sva"],["value","svr"],["matInput","","name","subject","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["required","","name","type",3,"disabled","change"],["style","margin-left:10px","color","primary","name","type",3,"value","checked",4,"ngFor","ngForOf"],["color","primary","name","type",2,"margin-left","10px",3,"value","checked"],[1,"col-md-12",2,"display","none"],[1,"form-inline","hide"],["type","file","name","files[]","accept","application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml\u200c.slideshow,application/vnd.oasis.opendocument.text,application/vnd.oasis.opendocument.presentation,application/vnd.oasis.opendocument.spreadsheet",3,"change"],["uploadSignFileOffice",""],["mat-raised-button","","color","default","type","button",3,"disabled","click",4,"ngIf"],["style","width:100%;height:800px;",3,"src",4,"ngIf"],["id","template_style","name","template_style",3,"disabled","title","placeholder","ngModel","required","ngModelChange","selectionChange"],[3,"label"],[1,"selectFile",3,"value","click"],["color","primary",1,"fa","fa-paperclip",2,"height","auto"],[4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],["mat-raised-button","","color","default","type","button",3,"disabled","click"],[2,"width","100%","height","800px",3,"src"],["matInput","","name","templateTxt","id","templateTxt","matTextareaAutosize","","matAutosizeMinRows","5","matAutosizeMaxRows","5",3,"ngModel","placeholder","title","required","ngModelChange"],["id","html_mode",2,"display","block","width","100%"],["name","templateHtml","id","templateHtml","rows","15","cols","60",2,"width","100%",3,"ngModel","required","ngModelChange"],["id","datasource","name","datasource",3,"title","placeholder","ngModel","ngModelChange"],["value",""],[3,"selectedTabChange"],["name","templateOfficeHtml","id","templateOfficeHtml","rows","15","cols","60",2,"width","100%",3,"ngModel","required","ngModelChange"],["uploadSignFileOfficeHtml",""],["id","template_style","name","template_style",3,"disabled","title","placeholder","ngModel","required","ngModelChange"],[2,"text-align","center",3,"value","click"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,wm,1,1,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,Im,2,0,"div",9),u.Oc(14,rg,38,37,"mat-card",10),u.Vb(),u.Vb(),u.Vb(),u.Wb(15,"mat-sidenav",11,12),u.Wb(17,"mat-list"),u.Wb(18,"h3",13),u.Qc(19),u.ic(20,"translate"),u.Vb(),u.Wb(21,"div",14),u.Rb(22,"app-maarch-flat-tree",null,15),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading),u.Db(1),u.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!e.appService.getViewMode()),u.Db(4),u.Rc(u.jc(20,12,"lang.chooseEntityAssociationModel")))},directives:[C.e,C.f,x.a,W.a,O.t,C.d,Rt.a,Rt.g,Ue.a,Rt.h,Rt.d,Tt.a,Rt.c,j.l,w.c,I.a,c.K,c.v,c.w,S.c,k.b,c.d,c.p,c.F,c.u,c.x,k.d,it.a,O.s,R.b,j.p,Xe.b,Xe.a,j.o,Ee.c,Ee.a],pipes:[p.d],styles:[".mat-list-item.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:default}.mat-list-item.disabled[_ngcontent-%COMP%]:active, .mat-list-item.disabled[_ngcontent-%COMP%]:focus, .mat-list-item.disabled[_ngcontent-%COMP%]:hover{background:initial}.selectFile[_ngcontent-%COMP%]{text-align:center}.selectFile[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex!important;align-items:center;justify-content:center}"]}),sg),bg=((lg=function t(e,a,n){_classCallCheck(this,t),this.http=e,this.data=a,this.dialogRef=n}).\u0275fac=function(t){return new(t||lg)(u.Qb(f.b),u.Qb(N.a),u.Qb(N.h))},lg.\u0275cmp=u.Kb({type:lg,selectors:[["ng-component"]],decls:18,vars:13,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["role","alert",1,"alert-message","alert-message-info"],[4,"ngFor","ngForOf"],["mat-raised-button","","color","primary","type","submit",3,"click"],["mat-list-icon",""],["color","primary",1,"fa","fa-share-alt"],["mat-line",""]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"h1",1),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"mat-dialog-content"),u.Wb(5,"div",2),u.Wb(6,"p"),u.Qc(7),u.ic(8,"translate"),u.Wb(9,"b"),u.Qc(10),u.ic(11,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(12,"mat-list"),u.Oc(13,cg,5,1,"mat-list-item",3),u.Vb(),u.Vb(),u.Wb(14,"mat-dialog-actions"),u.Wb(15,"button",4),u.dc("click",(function(){return e.dialogRef.close()})),u.Qc(16),u.ic(17,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(2),u.Rc(u.jc(3,5,"lang.templateAssociateEntities")),u.Db(5),u.Rc(u.jc(8,7,"lang.templateCheckEntities")),u.Db(3),u.Rc(u.jc(11,9,"lang.AR"+e.data.template_attachment_type)),u.Db(3),u.oc("ngForOf",e.data.entitiesList),u.Db(3),u.Rc(u.jc(17,11,"lang.close")))},directives:[N.i,N.f,Rt.a,O.s,N.c,R.b,Rt.d,Tt.a,Rt.c,j.l],pipes:[p.d],styles:[".alert-message[_ngcontent-%COMP%]{max-width:inherit}"]}),lg);function ug(t,e){1&t&&(u.Wb(0,"div",10),u.Rb(1,"mat-spinner",11),u.Vb())}function pg(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-card",12),u.Wb(1,"mat-tab-group"),u.Wb(2,"mat-tab",13),u.ic(3,"translate"),u.Wb(4,"form",14,15),u.dc("ngSubmit",(function(){return u.Dc(a),u.hc().onSubmit()})),u.Wb(6,"mat-list"),u.Wb(7,"p",16),u.Wb(8,"mat-slide-toggle",17),u.dc("change",(function(){u.Dc(a);var t=u.hc();return t.toggleRule(t.passwordRules.complexityUpper)})),u.Qc(9),u.Vb(),u.Wb(10,"mat-slide-toggle",17),u.dc("change",(function(){u.Dc(a);var t=u.hc();return t.toggleRule(t.passwordRules.complexityNumber)})),u.Qc(11),u.Vb(),u.Wb(12,"mat-slide-toggle",17),u.dc("change",(function(){u.Dc(a);var t=u.hc();return t.toggleRule(t.passwordRules.complexitySpecial)})),u.Qc(13),u.Vb(),u.Vb(),u.Wb(14,"mat-list-item",18),u.Wb(15,"mat-icon",19),u.Wb(16,"mat-slide-toggle",20),u.dc("change",(function(){u.Dc(a);var t=u.hc();return t.toggleRule(t.passwordRules.minLength)})),u.Vb(),u.Vb(),u.Wb(17,"p",21),u.Wb(18,"mat-form-field"),u.Wb(19,"input",22),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().passwordRules.minLength.value=t})),u.Vb(),u.Wb(20,"span",23),u.Qc(21),u.ic(22,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(23,"mat-list-item",18),u.Wb(24,"mat-icon",19),u.Wb(25,"mat-slide-toggle",20),u.dc("change",(function(){u.Dc(a);var t=u.hc();return t.toggleRule(t.passwordRules.lockAttempts)})),u.Vb(),u.Vb(),u.Wb(26,"p",24),u.Wb(27,"mat-form-field",25),u.Wb(28,"input",22),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().passwordRules.lockAttempts.value=t})),u.Vb(),u.Vb(),u.Wb(29,"mat-form-field",26),u.Wb(30,"input",22),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().passwordRules.lockTime.value=t})),u.Vb(),u.Wb(31,"span",23),u.Qc(32),u.ic(33,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(34,"mat-list-item",18),u.Wb(35,"mat-icon",19),u.Wb(36,"mat-slide-toggle",20),u.dc("change",(function(){u.Dc(a);var t=u.hc();return t.toggleRule(t.passwordRules.renewal)})),u.Vb(),u.Vb(),u.Wb(37,"p",21),u.Wb(38,"mat-form-field"),u.Wb(39,"input",22),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().passwordRules.renewal.value=t})),u.Vb(),u.Wb(40,"span",23),u.Qc(41),u.ic(42,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(43,"mat-list-item",18),u.Wb(44,"mat-icon",19),u.Wb(45,"mat-slide-toggle",20),u.dc("change",(function(){u.Dc(a);var t=u.hc();return t.toggleRule(t.passwordRules.historyLastUse)})),u.Vb(),u.Vb(),u.Wb(46,"p",21),u.Wb(47,"mat-form-field"),u.Wb(48,"input",22),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().passwordRules.historyLastUse.value=t})),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(49,"div",27),u.Wb(50,"button",28),u.Qc(51),u.ic(52,"translate"),u.Vb(),u.Wb(53,"button",29),u.dc("click",(function(){return u.Dc(a),u.hc().cancelModification()})),u.Qc(54),u.ic(55,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.zc(5),i=u.hc();u.Db(2),u.pc("label",u.jc(3,41,"lang.password")),u.Db(6),u.oc("name",i.passwordRules.complexityUpper.label)("checked",i.passwordRules.complexityUpper.enabled),u.Db(1),u.Sc(" ",i.passwordRules.complexityUpper.label,""),u.Db(1),u.oc("name",i.passwordRules.complexityNumber.label)("checked",i.passwordRules.complexityNumber.enabled),u.Db(1),u.Sc(" ",i.passwordRules.complexityNumber.label,""),u.Db(1),u.oc("name",i.passwordRules.complexitySpecial.label)("checked",i.passwordRules.complexitySpecial.enabled),u.Db(1),u.Sc(" ",i.passwordRules.complexitySpecial.label,""),u.Db(3),u.oc("checked",i.passwordRules.minLength.enabled),u.Db(3),u.pc("placeholder",i.passwordRules.minLength.label),u.oc("disabled",!i.passwordRules.minLength.enabled)("name",i.passwordRules.minLength.label)("ngModel",i.passwordRules.minLength.value),u.Db(2),u.Sc("\xa0",u.jc(22,43,"lang.chars"),""),u.Db(4),u.oc("checked",i.passwordRules.lockAttempts.enabled),u.Db(3),u.pc("placeholder",i.passwordRules.lockAttempts.label),u.oc("disabled",!i.passwordRules.lockAttempts.enabled)("name",i.passwordRules.lockAttempts.label)("ngModel",i.passwordRules.lockAttempts.value),u.Db(2),u.pc("placeholder",i.passwordRules.lockTime.label),u.oc("disabled",!i.passwordRules.lockTime.enabled)("name",i.passwordRules.lockTime.label)("ngModel",i.passwordRules.lockTime.value),u.Db(2),u.Sc("\xa0",u.jc(33,45,"lang.minutes"),""),u.Db(4),u.oc("checked",i.passwordRules.renewal.enabled),u.Db(3),u.pc("placeholder",i.passwordRules.renewal.label),u.oc("disabled",!i.passwordRules.renewal.enabled)("name",i.passwordRules.renewal.label)("ngModel",i.passwordRules.renewal.value),u.Db(2),u.Sc("\xa0",u.jc(42,47,"lang.days"),""),u.Db(4),u.oc("checked",i.passwordRules.historyLastUse.enabled),u.Db(3),u.pc("placeholder",i.passwordRules.historyLastUse.label),u.oc("disabled",!i.passwordRules.historyLastUse.enabled)("name",i.passwordRules.historyLastUse.label)("ngModel",i.passwordRules.historyLastUse.value),u.Db(2),u.oc("disabled",!n.valid&&!i.disabledForm()||i.checkModif()),u.Db(1),u.Rc(u.jc(52,49,"lang.validate")),u.Db(2),u.oc("disabled",i.checkModif()),u.Db(1),u.Rc(u.jc(55,51,"lang.cancel"))}}var fg,mg=((fg=function(){function t(e,a,n,i,o){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.headerService=i,this.appService=o,this.loading=!1,this.passwordRules={minLength:{enabled:!1,value:0},complexityUpper:{enabled:!1,value:0},complexityNumber:{enabled:!1,value:0},complexitySpecial:{enabled:!1,value:0},renewal:{enabled:!1,value:0},historyLastUse:{enabled:!1,value:0},lockTime:{enabled:!1,value:0},lockAttempts:{enabled:!1,value:0}},this.passwordRulesClone={},this.passwordRulesList=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.securitiesAdministration")),this.loading=!0,this.http.get("../rest/passwordRules").subscribe((function(e){t.passwordRulesList=e.rules,e.rules.forEach((function(e){t.passwordRules[e.label].enabled=e.enabled,t.passwordRules[e.label].value=e.value,t.passwordRules[e.label].label=t.translate.instant("lang.password"+e.label+"Required"),t.passwordRules[e.label].id=e.label,t.loading=!1})),t.passwordRulesClone=JSON.parse(JSON.stringify(t.passwordRules))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"cancelModification",value:function(){var t=this;this.passwordRules=JSON.parse(JSON.stringify(this.passwordRulesClone)),this.passwordRulesList.forEach((function(e){e.enabled=t.passwordRules[e.label].enabled,e.value=t.passwordRules[e.label].value}))}},{key:"checkModif",value:function(){return JSON.stringify(this.passwordRules)===JSON.stringify(this.passwordRulesClone)}},{key:"disabledForm",value:function(){return!(this.passwordRules.lockTime.enabled||this.passwordRules.minLength.enabled||this.passwordRules.lockAttempts.enabled||this.passwordRules.renewal.enabled||this.passwordRules.historyLastUse.enabled)}},{key:"toggleRule",value:function(t){var e=this;t.enabled=!t.enabled,this.passwordRulesList.forEach((function(a){"lockAttempts"!==t.id||"lockTime"!==a.label&&"lockAttempts"!==a.label?t.id===a.label&&(a.enabled=t.enabled):(a.enabled=t.enabled,e.passwordRules.lockTime.enabled=t.enabled)}))}},{key:"onSubmit",value:function(){var t=this;this.passwordRulesList.forEach((function(e){e.enabled=t.passwordRules[e.label].enabled,e.value=t.passwordRules[e.label].value})),this.http.put("../rest/passwordRules",{rules:this.passwordRulesList}).subscribe((function(e){t.passwordRulesClone=JSON.parse(JSON.stringify(t.passwordRules)),t.notify.success(t.translate.instant("lang.passwordRulesUpdated"))}),(function(e){t.notify.error(e.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||fg)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a))},fg.\u0275cmp=u.Kb({type:fg,selectors:[["ng-component"]],decls:13,vars:8,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[3,"label"],[3,"ngSubmit"],["passwordForm","ngForm"],[2,"margin-bottom","40px","text-align","center"],["color","primary",2,"padding-left","10px","padding-right","10px",3,"name","checked","change"],[2,"margin-top","15px","margin-bottom","15px"],["mat-list-icon",""],["color","primary",2,"position","relative","top","-10px",3,"checked","change"],["mat-line",""],["type","number","min","1","pattern","^[1-9][0-9]*","matInput","","required","",3,"disabled","name","ngModel","placeholder","ngModelChange"],["matSuffix",""],["mat-line","",2,"display","flex"],[2,"flex","1","padding-right","10px"],[2,"flex","1"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","type","submit","color","primary",3,"disabled"],["mat-raised-button","","type","button","color","default",3,"disabled","click"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Wb(1,"mat-sidenav-content"),u.Wb(2,"div",1),u.Wb(3,"div",2),u.Wb(4,"div",3),u.Rb(5,"header-left"),u.Vb(),u.Wb(6,"div",4),u.Rb(7,"header-right"),u.Vb(),u.Vb(),u.Rb(8,"div",5),u.Vb(),u.Wb(9,"div",6),u.Wb(10,"div",7),u.Oc(11,ug,2,0,"div",8),u.Oc(12,pg,56,53,"mat-card",9),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(3),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading))},directives:[C.e,C.f,x.a,W.a,O.t,w.c,I.a,Ee.c,Ee.a,c.K,c.v,c.w,Rt.a,at.a,Rt.d,Tt.a,Rt.c,j.l,S.c,c.A,k.b,c.d,c.B,c.F,c.u,c.x,S.j,R.b],pipes:[p.d],encapsulation:2}),fg),gg=["snav2"],hg=["adminMenuTemplate"],vg=["sendmailForm"];function yg(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-nav-list"),u.Wb(1,"h3",14),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"a",22),u.dc("click",(function(){return u.Dc(a),u.hc(),u.zc(16).toggle()})),u.Rb(5,"mat-icon",23),u.Wb(6,"p",24),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Vb()}2&t&&(u.Db(2),u.Rc(u.jc(3,2,"lang.actions")),u.Db(5),u.Sc(" ",u.jc(8,4,"lang.checkSendmail")," "))}function Dg(t,e){1&t&&(u.Wb(0,"div",25),u.Rb(1,"mat-spinner",26),u.Vb())}function Vg(t,e){if(1&t&&(u.Wb(0,"mat-option",49),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a.id),u.Db(1),u.Sc(" ",a.label," ")}}function Cg(t,e){if(1&t&&(u.Wb(0,"mat-option",49),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a.id),u.Db(1),u.Sc(" ",a.label," ")}}var xg=function(){return["smtp","mail"]},Mg=function(t){return[t]};function Wg(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-card",27),u.Wb(1,"mat-tab-group"),u.Wb(2,"mat-tab",28),u.ic(3,"translate"),u.Wb(4,"form",29,30),u.dc("ngSubmit",(function(){return u.Dc(a),u.hc().onSubmit()})),u.Wb(6,"div",15),u.Wb(7,"div",31),u.Wb(8,"mat-form-field"),u.Wb(9,"mat-select",32,33),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().sendmail.type=t})),u.ic(11,"translate"),u.Oc(12,Vg,2,2,"mat-option",34),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(13,"div",15),u.Wb(14,"div",35),u.Wb(15,"mat-form-field"),u.Wb(16,"mat-select",36),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().sendmail.secure=t})),u.ic(17,"translate"),u.Oc(18,Cg,2,2,"mat-option",34),u.Vb(),u.Vb(),u.Vb(),u.Wb(19,"div",37),u.Wb(20,"mat-form-field"),u.Wb(21,"input",38),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().sendmail.host=t})),u.ic(22,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(23,"div",39),u.Wb(24,"mat-form-field"),u.Wb(25,"input",40),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().sendmail.port=t})),u.ic(26,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(27,"div",15),u.Wb(28,"div",16),u.Wb(29,"mat-slide-toggle",41),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().sendmail.auth=t}))("change",(function(t){return u.Dc(a),u.hc().cleanAuthInfo(t)})),u.Qc(30),u.ic(31,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(32,"div",15),u.Wb(33,"div",16),u.Wb(34,"mat-form-field"),u.Wb(35,"input",42),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().sendmail.user=t})),u.ic(36,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(37,"div",16),u.Wb(38,"mat-form-field"),u.Wb(39,"input",43),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().sendmail.password=t})),u.Vb(),u.Wb(40,"mat-icon",44),u.dc("click",(function(){u.Dc(a);var t=u.hc();return t.hidePassword=!t.hidePassword})),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(41,"div",15),u.Wb(42,"div",16),u.Wb(43,"mat-form-field"),u.Wb(44,"input",45),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().sendmail.from=t})),u.ic(45,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(46,"div",46),u.Wb(47,"button",47),u.Qc(48),u.ic(49,"translate"),u.Vb(),u.Wb(50,"button",48),u.dc("click",(function(){return u.Dc(a),u.hc().cancelModification()})),u.Qc(51),u.ic(52,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.zc(5),i=u.hc();u.Db(2),u.pc("label",u.jc(3,38,"lang.informations")),u.Db(7),u.pc("placeholder",u.jc(11,40,"lang.configurationType")),u.oc("ngModel",i.sendmail.type),u.Db(3),u.oc("ngForOf",i.smtpTypeList),u.Db(1),u.Lc("opacity",u.uc(58,xg).indexOf(i.sendmail.type)>-1?"1":"0.5"),u.Db(3),u.pc("placeholder",u.jc(17,42,"lang.smtpAuth")),u.oc("disabled",-1==u.uc(59,xg).indexOf(i.sendmail.type))("ngModel",i.sendmail.secure),u.Db(2),u.oc("ngForOf",i.smtpSecList),u.Db(3),u.pc("placeholder",u.jc(22,44,"lang.host")),u.oc("disabled",-1==u.uc(60,xg).indexOf(i.sendmail.type))("ngModel",i.sendmail.host),u.Db(4),u.pc("placeholder",u.jc(26,46,"lang.port")),u.oc("ngModel",i.sendmail.port)("disabled",-1==u.uc(61,xg).indexOf(i.sendmail.type)),u.Db(2),u.Lc("opacity",u.uc(62,xg).indexOf(i.sendmail.type)>-1?"1":"0.5"),u.Db(2),u.oc("ngModel",i.sendmail.auth)("disabled",-1==u.uc(63,xg).indexOf(i.sendmail.type)),u.Db(1),u.Rc(u.jc(31,48,"lang.enableAuth")),u.Db(2),u.Lc("opacity",u.uc(64,xg).indexOf(i.sendmail.type)>-1?"1":"0.5"),u.Db(3),u.pc("placeholder",u.jc(36,50,"lang.id")),u.oc("ngModel",i.sendmail.user)("disabled",!i.sendmail.auth||-1==u.uc(65,xg).indexOf(i.sendmail.type)),u.Db(4),u.oc("type",i.hidePassword?"password":"text")("ngModel",i.sendmail.password)("disabled",!i.sendmail.auth||-1==u.uc(66,xg).indexOf(i.sendmail.type))("placeholder",i.translate.instant(!0===i.sendmail.passwordAlreadyExists?"lang.passwordModification":"lang.password"))("required",!i.sendmail.passwordAlreadyExists),u.Db(1),u.oc("ngClass",u.vc(67,Mg,i.hidePassword?"fa-eye-slash":"fa-eye")),u.Db(4),u.pc("placeholder",u.jc(45,52,"lang.mailFrom")),u.oc("ngModel",i.sendmail.from),u.Db(3),u.oc("disabled",i.checkModif()||!n.valid),u.Db(1),u.Rc(u.jc(49,54,"lang.validate")),u.Db(2),u.oc("disabled",i.checkModif()),u.Db(1),u.Rc(u.jc(52,56,"lang.cancel"))}}function Og(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-icon",50),u.dc("click",(function(){return u.Dc(a),u.hc().testEmailSend()})),u.ic(1,"translate"),u.Vb()}2&t&&u.pc("title",u.jc(1,1,"lang.beginSendTest"))}function _g(t,e){if(1&t&&(u.Wb(0,"mat-list-item"),u.Rb(1,"mat-icon",51),u.Wb(2,"p",24),u.Qc(3),u.Vb(),u.Vb()),2&t){var a=u.hc();u.Db(1),u.Gb("fas ",a.emailSendResult.icon," fa-2x"),u.Db(2),u.Sc(" ",a.emailSendResult.msg," ")}}function Sg(t,e){if(1&t&&(u.Wb(0,"div",52),u.Qc(1),u.Vb()),2&t){var a=u.hc();u.Db(1),u.Sc(" ",a.emailSendResult.debug," ")}}var kg,wg=((kg=function(){function t(e,a,n,i,o,r){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.headerService=i,this.appService=o,this.viewContainerRef=r,this.loading=!1,this.sendmail={type:"smtp",host:"",auth:!0,user:"",password:"",secure:"ssl",port:"465",charset:"utf-8",from:""},this.smtpTypeList=[{id:"smtp",label:this.translate.instant("lang.smtpclient")},{id:"sendmail",label:this.translate.instant("lang.smtprelay")},{id:"qmail",label:this.translate.instant("lang.qmail")},{id:"mail",label:this.translate.instant("lang.phpmail")}],this.smtpSecList=[{id:"",label:this.translate.instant("lang.none")},{id:"ssl",label:"ssl"},{id:"tls",label:"tls"}],this.sendmailClone={},this.hidePassword=!0,this.serverConnectionLoading=!1,this.emailSendLoading=!1,this.emailSendResult={icon:"",msg:"",debug:""},this.currentUser={},this.recipientTest="",this.passwordLabel=""}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.sendmailShort")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/configurations/admin_email_server").subscribe((function(e){t.sendmail=e.configuration.value,t.sendmailClone=JSON.parse(JSON.stringify(t.sendmail)),t.loading=!1}),(function(e){t.notify.handleErrors(e)}))}},{key:"cancelModification",value:function(){this.sendmail=JSON.parse(JSON.stringify(this.sendmailClone))}},{key:"onSubmit",value:function(){var t=this;this.sendmailFormCpt.invalid?this.notify.handleErrors({error:{errors:this.translate.instant("lang.notSavedBecauseInvalid")}}):this.http.put("../rest/configurations/admin_email_server",this.sendmail).subscribe((function(e){t.sendmailClone=JSON.parse(JSON.stringify(t.sendmail)),t.notify.success(t.translate.instant("lang.configurationUpdated"))}),(function(e){t.notify.handleErrors(e)}))}},{key:"checkModif",value:function(){return JSON.stringify(this.sendmailClone)===JSON.stringify(this.sendmail)}},{key:"initEmailSend",value:function(){var t=this;this.emailSendResult={icon:"",msg:"",debug:""},void 0===this.currentUser.mail&&this.http.get("../rest/currentUser/profile").subscribe((function(e){t.currentUser=e,t.recipientTest=e.mail}))}},{key:"testEmailSend",value:function(){var t=this;JSON.stringify(this.sendmailClone)!==JSON.stringify(this.sendmail)&&this.onSubmit(),this.emailSendResult={icon:"fa-paper-plane primary",msg:this.translate.instant("lang.emailSendInProgress"),debug:""};var e={sender:{email:this.currentUser.mail},recipients:[this.recipientTest],object:"["+this.translate.instant("lang.doNotReply")+"] "+this.translate.instant("lang.emailSendTest"),status:"EXPRESS",body:this.translate.instant("lang.emailSendTest"),isHtml:!1};this.emailSendLoading=!0,this.http.post("../rest/emails",e).subscribe((function(e){t.emailSendLoading=!1,t.emailSendResult={icon:"fa-check green",msg:t.translate.instant("lang.emailSendSuccess"),debug:""}}),(function(e){t.emailSendLoading=!1,t.emailSendResult={icon:"fa-times red",msg:t.translate.instant("lang.emailSendFailed"),debug:e.error.errors}}))}},{key:"cleanAuthInfo",value:function(t){this.sendmail.passwordAlreadyExists=!1,this.sendmail.user="",this.sendmail.password=""}}]),t}()).\u0275fac=function(t){return new(t||kg)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a),u.Qb(u.T))},kg.\u0275cmp=u.Kb({type:kg,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(gg,!0),u.Kc(hg,!0),u.Xc(vg,!0)),2&t&&(u.yc(a=u.ec())&&(e.sidenavRight=a.first),u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.sendmailFormCpt=a.first))},decls:31,vars:22,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],["joyrideStep","emailTour",1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",2,"overflow-x","hidden","width","500px",3,"mode","fixedInViewport","opened"],["snav2",""],["disableRipple","true",2,"display","flex","flex-direction","column"],["mat-subheader",""],[1,"form-group"],[1,"col-md-12"],["testSendmailForm","ngForm"],["name","recipientTest","matInput","","pattern","(^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$)",3,"placeholder","ngModel","disabled","ngModelChange"],["color","primary","style","cursor: pointer;","matSuffix","","class","fa fa-paper-plane fa-2x",3,"title","click",4,"ngIf"],[4,"ngIf"],["class","bash",4,"ngIf"],["mat-list-item","","joyrideStep","emailTour2",3,"click"],["color","primary","mat-list-icon","",1,"fas","fa-signal"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[3,"label"],[3,"ngSubmit"],["sendmailForm","ngForm"],[1,"col-md-12",2,"margin-bottom","20px"],["name","smtpType","required","",3,"placeholder","ngModel","ngModelChange"],["smtpType",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-2"],["name","SMTPSecure",3,"placeholder","disabled","ngModel","ngModelChange"],[1,"col-md-9"],["matInput","","name","host","required","",3,"disabled","ngModel","placeholder","ngModelChange"],[1,"col-md-1"],["name","port","type","number","matInput","","required","",3,"ngModel","disabled","placeholder","ngModelChange"],["color","primary","name","SMTPAuth",3,"ngModel","disabled","ngModelChange","change"],["name","user","matInput","","required","",3,"ngModel","disabled","placeholder","ngModelChange"],["name","password","matInput","",3,"type","ngModel","disabled","placeholder","required","ngModelChange"],["color","primary","matSuffix","",1,"fa","fa-2x",2,"cursor","pointer",3,"ngClass","click"],["name","mailFrom","required","","matInput","","pattern","(^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$)",3,"ngModel","placeholder","ngModelChange"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","type","submit","color","primary",3,"disabled"],["mat-raised-button","","type","button","color","default",3,"disabled","click"],[3,"value"],["color","primary","matSuffix","",1,"fa","fa-paper-plane","fa-2x",2,"cursor","pointer",3,"title","click"],["mat-list-icon",""],[1,"bash"]],template:function(t,e){if(1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,yg,9,6,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,Dg,2,0,"div",9),u.Oc(14,Wg,53,69,"mat-card",10),u.Vb(),u.Vb(),u.Vb(),u.Wb(15,"mat-sidenav",11,12),u.dc("opened",(function(){return e.onSubmit(),e.initEmailSend()})),u.Wb(17,"mat-nav-list",13),u.Wb(18,"h3",14),u.Qc(19),u.ic(20,"translate"),u.Vb(),u.Wb(21,"div",15),u.Wb(22,"div",16),u.Wb(23,"form",null,17),u.Wb(25,"mat-form-field"),u.Wb(26,"input",18),u.dc("ngModelChange",(function(t){return e.recipientTest=t})),u.ic(27,"translate"),u.Vb(),u.Oc(28,Og,2,3,"mat-icon",19),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Oc(29,_g,4,4,"mat-list-item",20),u.Vb(),u.Oc(30,Sg,2,1,"div",21),u.Vb(),u.Vb()),2&t){var a=u.zc(24);u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading),u.Db(1),u.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",(e.appService.getViewMode(),!1)),u.Db(4),u.Rc(u.jc(20,18,"lang.emailSendTest")),u.Db(7),u.pc("placeholder",u.jc(27,20,"lang.mailTo")),u.oc("ngModel",e.recipientTest)("disabled",e.emailSendLoading),u.Db(2),u.oc("ngIf",!e.emailSendLoading&&a.valid),u.Db(1),u.oc("ngIf",""!=e.emailSendResult.msg),u.Db(1),u.oc("ngIf",e.emailSendResult.msg===e.translate.instant("lang.emailSendFailed"))}},directives:[C.e,C.f,x.a,W.a,M.a,O.t,C.d,Rt.h,Rt.g,c.K,c.v,c.w,S.c,k.b,c.d,c.B,c.u,c.x,Rt.d,Tt.a,Rt.c,j.l,w.c,I.a,Ee.c,Ee.a,it.a,c.F,O.s,c.A,at.a,S.j,O.q,R.b,j.p],pipes:[p.d],styles:[".mat-list-item[_ngcontent-%COMP%]:hover{background:inherit}.green[_ngcontent-%COMP%]{color:green}.primary[_ngcontent-%COMP%]{color:#135f7f}.red[_ngcontent-%COMP%]{color:red}.bash[_ngcontent-%COMP%]{background:#34495e;height:310px;border-radius:5px;top:40px;display:absolute;color:#fff;padding:10px;margin:10px}"]}),kg),Ig=["adminMenuTemplate"];function jg(t,e){1&t&&(u.Wb(0,"mat-nav-list"),u.Wb(1,"h3",11),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"a",12),u.Rb(5,"mat-icon",13),u.Wb(6,"p",14),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(2),u.Rc(u.jc(3,2,"lang.actions")),u.Db(5),u.Sc(" ",u.jc(8,4,"lang.add")," "))}function Rg(t,e){1&t&&(u.Wb(0,"div",15),u.Rb(1,"mat-spinner",16),u.Vb())}function Tg(t,e){if(1&t&&(u.Wb(0,"mat-header-cell",38),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=u.hc(2);u.Ib("hide-for-mobile",a.appService.getViewMode()),u.Db(1),u.Rc(u.jc(2,3,"lang.label"))}}function Pg(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.Ib("hide-for-mobile",n.appService.getViewMode()),u.Db(1),u.Sc(" ",a.label," ")}}function Qg(t,e){1&t&&(u.Wb(0,"mat-header-cell",38),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.description")))}function Fg(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.description," ")}}function Lg(t,e){1&t&&(u.Wb(0,"mat-header-cell",38),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.mailevaAccount")))}function Eg(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.accountid," ")}}function Ag(t,e){1&t&&u.Rb(0,"mat-header-cell")}function Ug(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-cell",39),u.Wb(1,"button",40),u.dc("click",(function(t){u.Dc(a);var n=e.$implicit,i=u.hc(2);return t.stopPropagation(),i.deleteShipping(n.id)})),u.ic(2,"translate"),u.Rb(3,"mat-icon",41),u.Vb(),u.Vb()}2&t&&(u.Db(1),u.pc("matTooltip",u.jc(2,1,"lang.delete")))}function zg(t,e){1&t&&u.Rb(0,"mat-header-row")}function $g(t,e){1&t&&(u.Rb(0,"mat-row",42),u.ic(1,"translate")),2&t&&(u.qc("routerLink","/administration/shippings/",e.$implicit.id,""),u.pc("matTooltip",u.jc(1,2,"lang.view")))}function Ng(t,e){if(1&t&&(u.Wb(0,"mat-card",17),u.Wb(1,"div",18),u.Wb(2,"div",19),u.Wb(3,"mat-form-field"),u.Rb(4,"input",20),u.ic(5,"translate"),u.Vb(),u.Vb(),u.Wb(6,"div",19),u.Rb(7,"mat-paginator",21,22),u.Vb(),u.Vb(),u.Wb(9,"mat-table",23,24),u.Ub(11,25),u.Oc(12,Tg,3,5,"mat-header-cell",26),u.Oc(13,Pg,2,3,"mat-cell",27),u.Tb(),u.Ub(14,28),u.Oc(15,Qg,3,3,"mat-header-cell",29),u.Oc(16,Fg,2,1,"mat-cell",30),u.Tb(),u.Ub(17,31),u.Oc(18,Lg,3,3,"mat-header-cell",29),u.Oc(19,Eg,2,1,"mat-cell",30),u.Tb(),u.Ub(20,32),u.Oc(21,Ag,1,0,"mat-header-cell",33),u.Oc(22,Ug,4,3,"mat-cell",34),u.Tb(),u.Oc(23,zg,1,0,"mat-header-row",35),u.Oc(24,$g,2,4,"mat-row",36),u.Vb(),u.Wb(25,"div",37),u.Qc(26),u.ic(27,"translate"),u.Vb(),u.Vb()),2&t){var a=u.hc();u.Db(4),u.pc("placeholder",u.jc(5,10,"lang.filterBy")),u.oc("formControl",a.adminService.getFilterField()),u.Db(3),u.oc("length",100)("hidePageSize",!0)("pageSize",10),u.Db(2),u.oc("dataSource",a.adminService.getDataSource()),u.Db(14),u.oc("matHeaderRowDef",a.displayedColumns),u.Db(1),u.oc("matRowDefColumns",a.displayedColumns),u.Db(2),u.Tc(" ",a.shippings.length," ",u.jc(27,12,"lang.shippings"),"")}}var Hg,Bg=((Hg=function(){function t(e,a,n,i,o,r,c,l){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.headerService=i,this.appService=o,this.functions=r,this.adminService=c,this.viewContainerRef=l,this.shippings=[],this.loading=!1,this.displayedColumns=["label","description","accountid","actions"],this.filterColumns=["label","description","accountid"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.shippings")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/administration/shippings").subscribe((function(e){t.shippings=e.shippings,setTimeout((function(){t.adminService.setDataSource("admin_shippings",t.shippings,t.sort,t.paginator,t.filterColumns)}),0),t.loading=!1}))}},{key:"deleteShipping",value:function(t){var e=this;confirm(this.translate.instant("lang.deleteMsg"))&&this.http.delete("../rest/administration/shippings/"+t).subscribe((function(t){e.shippings=t.shippings,e.adminService.setDataSource("admin_shippings",e.shippings,e.sort,e.paginator,e.filterColumns),e.notify.success(e.translate.instant("lang.shippingDeleted"))}),(function(t){e.notify.error(t.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||Hg)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a),u.Qb(D.a),u.Qb(jt),u.Qb(u.T))},Hg.\u0275cmp=u.Kb({type:Hg,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(Ig,!0),u.Xc(H.a,!0),u.Xc(B.a,!0)),2&t&&(u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.paginator=a.first),u.yc(a=u.ec())&&(e.sort=a.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/shippings/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","label"],["mat-sort-header","",3,"hide-for-mobile",4,"matHeaderCellDef"],[3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","description"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","accountid"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header",""],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,jg,9,6,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,Rg,2,0,"div",9),u.Oc(14,Ng,28,14,"mat-card",10),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading))},directives:[C.e,C.f,x.a,W.a,O.t,Rt.h,Rt.g,Rt.d,o.f,Tt.a,Rt.c,j.l,w.c,I.a,S.c,k.b,c.d,c.u,c.j,H.a,q.o,B.a,q.c,q.i,q.b,q.k,q.n,q.h,B.b,q.a,R.b,Qt.b,q.j,q.m,o.d],pipes:[p.d],encapsulation:2}),Hg),Xg=["snav2"],Gg=["maarchTree"];function qg(t,e){1&t&&(u.Wb(0,"div",16),u.Rb(1,"mat-spinner",17),u.Vb())}function Kg(t,e){if(1&t&&u.Rb(0,"div",54),2&t){var a=u.hc(2);u.oc("innerHTML",a.translate.instant("lang.shippingUnavailable"),u.Ec)}}function Jg(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-list-item",55),u.Wb(1,"mat-slide-toggle",56),u.dc("change",(function(){u.Dc(a);var t=e.$implicit;return u.hc(2).toggleShapingOption(t)})),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit,i=u.hc(2);u.Db(1),u.pc("name",n),u.oc("checked",i.shipping.options.shapingOptions.indexOf(n)>-1),u.Db(1),u.Rc(u.jc(3,3,"lang.maileva_"+n))}}function Yg(t,e){if(1&t&&u.Rb(0,"div",57),2&t){var a=u.hc(2);u.oc("innerHTML",a.translate.instant("lang.warnShapingOption"),u.Ec)}}function Zg(t,e){if(1&t&&(u.Wb(0,"mat-radio-button",58),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=e.$implicit;u.pc("name",a),u.oc("value",a),u.Db(1),u.Sc(" ",u.jc(2,3,"lang.maileva_"+a)," ")}}var th=function(t){return[t]};function eh(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-card",18),u.Oc(1,Kg,1,1,"div",19),u.Wb(2,"form",20,21),u.dc("ngSubmit",(function(){return u.Dc(a),u.hc().onSubmit()})),u.Wb(4,"div",22),u.Wb(5,"div",23),u.Wb(6,"mat-form-field"),u.Wb(7,"input",24),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().shipping.label=t})),u.ic(8,"translate"),u.ic(9,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(10,"div",22),u.Wb(11,"div",23),u.Wb(12,"mat-form-field"),u.Wb(13,"input",25),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().shipping.description=t})),u.ic(14,"translate"),u.ic(15,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(16,"div",26),u.Wb(17,"div",27),u.Wb(18,"div",28),u.Qc(19),u.ic(20,"translate"),u.Vb(),u.Wb(21,"mat-list",29),u.Oc(22,Jg,4,5,"mat-list-item",30),u.Oc(23,Yg,1,1,"div",31),u.Vb(),u.Vb(),u.Wb(24,"div",32),u.Wb(25,"div",28),u.Qc(26),u.ic(27,"translate"),u.Vb(),u.Wb(28,"mat-radio-group",33),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().shipping.options.sendMode=t})),u.Oc(29,Zg,3,5,"mat-radio-button",34),u.Vb(),u.Vb(),u.Vb(),u.Wb(30,"div",26),u.Wb(31,"div",35),u.Wb(32,"div",28),u.Qc(33),u.ic(34,"translate"),u.Vb(),u.Wb(35,"div",36),u.Wb(36,"label",37),u.Qc(37),u.ic(38,"translate"),u.Vb(),u.Wb(39,"mat-form-field",38),u.Wb(40,"input",39),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().shipping.fee.firstPagePrice=t})),u.ic(41,"translate"),u.Vb(),u.Wb(42,"span",40),u.Qc(43,"\xa0\u20ac"),u.Vb(),u.Vb(),u.Vb(),u.Wb(44,"div",36),u.Wb(45,"label",41),u.Qc(46),u.ic(47,"translate"),u.Vb(),u.Wb(48,"mat-form-field",38),u.Wb(49,"input",42),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().shipping.fee.nextPagePrice=t})),u.ic(50,"translate"),u.Vb(),u.Wb(51,"span",40),u.Qc(52,"\xa0\u20ac"),u.Vb(),u.Vb(),u.Vb(),u.Wb(53,"div",36),u.Wb(54,"label",43),u.Qc(55),u.ic(56,"translate"),u.Vb(),u.Wb(57,"mat-form-field",38),u.Wb(58,"input",44),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().shipping.fee.postagePrice=t})),u.ic(59,"translate"),u.Vb(),u.Wb(60,"span",40),u.Qc(61,"\xa0\u20ac"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(62,"div",45),u.Wb(63,"div",28),u.Qc(64),u.ic(65,"translate"),u.Vb(),u.Wb(66,"div",46),u.Qc(67),u.ic(68,"translate"),u.Vb(),u.Wb(69,"div",23),u.Wb(70,"mat-form-field"),u.Wb(71,"input",47),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().shipping.account.id=t})),u.ic(72,"translate"),u.ic(73,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(74,"div",23),u.Wb(75,"mat-form-field"),u.Wb(76,"input",48),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().shipping.account.password=t})),u.Vb(),u.Wb(77,"mat-icon",49),u.dc("click",(function(){u.Dc(a);var t=u.hc();return t.hidePassword=!t.hidePassword})),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(78,"div",50),u.Wb(79,"div",51),u.Wb(80,"button",52),u.Qc(81),u.ic(82,"translate"),u.Vb(),u.Wb(83,"button",53),u.dc("click",(function(){return u.Dc(a),u.hc().cancelModification()})),u.Qc(84),u.ic(85,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.zc(3),i=u.hc();u.Db(1),u.oc("ngIf",!i.shippingAvailable),u.Db(6),u.pc("title",u.jc(8,37,"lang.label")),u.pc("placeholder",u.jc(9,39,"lang.label")),u.oc("ngModel",i.shipping.label),u.Db(6),u.pc("title",u.jc(14,41,"lang.description")),u.pc("placeholder",u.jc(15,43,"lang.description")),u.oc("ngModel",i.shipping.description),u.Db(6),u.Sc(" ",u.jc(20,45,"lang.shapingOptions")," "),u.Db(3),u.oc("ngForOf",i.shapingOptions),u.Db(1),u.oc("ngIf",-1==i.shipping.options.shapingOptions.indexOf("addressPage")),u.Db(3),u.Sc(" ",u.jc(27,47,"lang.sendModes")," "),u.Db(2),u.oc("ngModel",i.shipping.options.sendMode),u.Db(1),u.oc("ngForOf",i.sendModes),u.Db(4),u.Sc(" ",u.jc(34,49,"lang.pricesInformations")," "),u.Db(4),u.Sc(" ",u.jc(38,51,"lang.maileva_firstPagePrice")," "),u.Db(3),u.pc("title",u.jc(41,53,"lang.maileva_firstPagePrice")),u.oc("ngModel",i.shipping.fee.firstPagePrice),u.Db(6),u.Sc(" ",u.jc(47,55,"lang.maileva_nextPagePrice")," "),u.Db(3),u.pc("title",u.jc(50,57,"lang.maileva_nextPagePrice")),u.oc("ngModel",i.shipping.fee.nextPagePrice),u.Db(6),u.Sc(" ",u.jc(56,59,"lang.maileva_postagePrice")," "),u.Db(3),u.pc("title",u.jc(59,61,"lang.maileva_postagePrice")),u.oc("ngModel",i.shipping.fee.postagePrice),u.Db(6),u.Sc(" ",u.jc(65,63,"lang.mailevaAccount")," "),u.Db(3),u.Rc(u.jc(68,65,"lang.infoMailevaAccount")),u.Db(4),u.pc("title",u.jc(72,67,"lang.login")),u.pc("placeholder",u.jc(73,69,"lang.id")),u.oc("ngModel",i.shipping.account.id),u.Db(5),u.oc("type",i.hidePassword?"password":"text")("ngModel",i.shipping.account.password)("placeholder",i.translate.instant(!1===i.creationMode?"lang.passwordModification":"lang.password"))("required",i.creationMode),u.Db(1),u.oc("ngClass",u.vc(75,th,i.hidePassword?"fa-eye-slash":"fa-eye")),u.Db(3),u.oc("disabled",i.checkModif()||!n.valid),u.Db(1),u.Rc(u.jc(82,71,"lang.validate")),u.Db(2),u.oc("disabled",i.checkModif()),u.Db(1),u.Rc(u.jc(85,73,"lang.cancel"))}}var ah,nh=((ah=function(){function t(e,a,n,i,o,r,c){_classCallCheck(this,t),this.translate=e,this.http=a,this.route=n,this.router=i,this.notify=o,this.headerService=r,this.appService=c,this.loading=!1,this.creationMode=!0,this.shipping={label:"",description:"",options:{shapingOptions:["addressPage"],sendMode:"fast"},fee:{firstPagePrice:0,nextPagePrice:0,postagePrice:0},account:{id:"",password:""},entities:[]},this.entities=[],this.entitiesClone=null,this.shippingClone=null,this.shapingOptions=["color","duplexPrinting","addressPage"],this.sendModes=["fast","economic"],this.hidePassword=!0,this.shippingAvailable=!1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.http.get("../rest/externalConnectionsEnabled").pipe(Object(d.a)((function(e){t.shippingAvailable=!0===e.connection.maileva})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(X.of)(!1)}))).subscribe(),this.route.params.subscribe((function(e){void 0===e.id?(t.headerService.setHeader(t.translate.instant("lang.shippingCreation")),t.creationMode=!0,t.http.get("../rest/administration/shippings/new").subscribe((function(e){t.entities=e.entities.map((function(t){return Object.assign(Object.assign({},t),{id:parseInt(t.id)})})),t.entitiesClone=JSON.parse(JSON.stringify(t.entities)),t.initEntitiesTree(t.entities),t.shippingClone=JSON.parse(JSON.stringify(t.shipping)),t.loading=!1}),(function(e){t.notify.handleErrors(e)})),t.loading=!1):(t.headerService.setHeader(t.translate.instant("lang.shippingModification")),t.creationMode=!1,t.http.get("../rest/administration/shippings/"+e.id).subscribe((function(e){t.shipping=e.shipping,t.entities=e.entities,t.entitiesClone=JSON.parse(JSON.stringify(t.entities)),t.initEntitiesTree(t.entities),t.shippingClone=JSON.parse(JSON.stringify(t.shipping)),t.loading=!1}),(function(e){t.notify.handleErrors(e)})))}))}},{key:"initEntitiesTree",value:function(t){this.maarchTree.initData(t)}},{key:"updateSelectedEntities",value:function(){this.shipping.entities=this.maarchTree.getSelectedNodes().map((function(t){return t.id}))}},{key:"onSubmit",value:function(){var t=this;this.creationMode?this.http.post("../rest/administration/shippings",this.shipping).subscribe((function(e){t.shippingClone=JSON.parse(JSON.stringify(t.shipping)),t.notify.success(t.translate.instant("lang.shippingAdded")),t.router.navigate(["/administration/shippings"])}),(function(e){t.notify.handleErrors(e)})):this.http.put("../rest/administration/shippings/"+this.shipping.id,this.shipping).subscribe((function(e){t.shippingClone=JSON.parse(JSON.stringify(t.shipping)),t.notify.success(t.translate.instant("lang.shippingUpdated")),t.router.navigate(["/administration/shippings"])}),(function(e){t.notify.handleErrors(e)}))}},{key:"checkModif",value:function(){return JSON.stringify(this.shippingClone)===JSON.stringify(this.shipping)}},{key:"toggleShapingOption",value:function(t){var e=this.shipping.options.shapingOptions.indexOf(t);e>-1?this.shipping.options.shapingOptions.splice(e,1):this.shipping.options.shapingOptions.push(t)}},{key:"cancelModification",value:function(){this.shipping=JSON.parse(JSON.stringify(this.shippingClone)),this.entities=JSON.parse(JSON.stringify(this.entitiesClone)),this.initEntitiesTree(this.entities)}}]),t}()).\u0275fac=function(t){return new(t||ah)(u.Qb(p.e),u.Qb(f.b),u.Qb(o.a),u.Qb(o.c),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a))},ah.\u0275cmp=u.Kb({type:ah,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(Xg,!0),u.Kc(Gg,!0)),2&t&&(u.yc(a=u.ec())&&(e.sidenavRight=a.first),u.yc(a=u.ec())&&(e.maarchTree=a.first))},decls:22,vars:14,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",2,"overflow-x","hidden","width","400px",3,"mode","fixedInViewport","opened"],["snav2",""],["mat-subheader",""],[2,"padding","10px"],[3,"afterSelectNode","afterDeselectNode"],["maarchTree",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],["class","alert-message alert-message-danger","role","alert","style","max-width: 100%",3,"innerHTML",4,"ngIf"],[1,"form-horizontal",3,"ngSubmit"],["shippingForm","ngForm"],[1,"form-group"],[1,"col-sm-12"],["matInput","","required","","name","label","id","label","type","text","maxlength","64",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","required","","name","description","id","description","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],[1,"form-group",2,"flex-direction","row","flex-wrap","wrap"],[1,"formType","ratio-2","col-sm-12"],[1,"formType-title"],["role","list"],["role","listitem",4,"ngFor","ngForOf"],["class","alert-message alert-message-danger","role","alert","style","margin-top: 30px;max-width: none;",3,"innerHTML",4,"ngIf"],[1,"formType","ratio-1","col-sm-12"],["name","sendMode",1,"radio-group",3,"ngModel","ngModelChange"],["color","primary",3,"name","value",4,"ngFor","ngForOf"],[1,"formType","ratio-2",2,"flex-direction","column"],[1,"priceContent"],["for","firstPagePrice",1,"priceContent-label"],["appearance","outline"],["matInput","","required","","name","firstPagePrice","id","firstPagePrice","type","number","maxlength","255","min","0","step","0.1","pattern","^(?=.+)(?:[1-9]\\d*|0)?(?:\\.\\d+)?$",3,"ngModel","title","ngModelChange"],["matSuffix",""],["for","nextPagePrice",1,"priceContent-label"],["matInput","","required","","name","nextPagePrice","id","nextPagePrice","type","number","maxlength","255","min","0","step","0.1","pattern","^(?=.+)(?:[1-9]\\d*|0)?(?:\\.\\d+)?$",3,"ngModel","title","ngModelChange"],["for","postagePrice",1,"priceContent-label"],["matInput","","required","","name","postagePrice","id","postagePrice","type","number","maxlength","255","min","0","step","0.1","pattern","^(?=.+)(?:[1-9]\\d*|0)?(?:\\.\\d+)?$",3,"ngModel","title","ngModelChange"],[1,"formType","ratio-1",2,"flex-direction","column","justify-content","center"],[1,"alert-message","alert-message-info",2,"max-width","none"],["matInput","","required","","name","login","id","login","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["name","password","matInput","",3,"type","ngModel","placeholder","required","ngModelChange"],["color","primary","matSuffix","","maxlength","255",1,"fa","fa-2x",2,"cursor","pointer",3,"ngClass","click"],[1,"form-group",2,"flex-direction","row","align-items","center"],[1,"col-sm-12","text-center",2,"padding","10px"],["mat-raised-button","","type","submit","color","primary",3,"disabled"],["mat-raised-button","","type","button","color","default",3,"disabled","click"],["role","alert",1,"alert-message","alert-message-danger",2,"max-width","100%",3,"innerHTML"],["role","listitem"],["color","primary",3,"name","checked","change"],["role","alert",1,"alert-message","alert-message-danger",2,"margin-top","30px","max-width","none",3,"innerHTML"],["color","primary",3,"name","value"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Wb(1,"mat-sidenav-content"),u.Wb(2,"div",1),u.Wb(3,"div",2),u.Wb(4,"div",3),u.Rb(5,"header-left"),u.Vb(),u.Wb(6,"div",4),u.Rb(7,"header-right"),u.Vb(),u.Vb(),u.Rb(8,"div",5),u.Vb(),u.Wb(9,"div",6),u.Wb(10,"div",7),u.Oc(11,qg,2,0,"div",8),u.Oc(12,eh,86,77,"mat-card",9),u.Vb(),u.Vb(),u.Vb(),u.Wb(13,"mat-sidenav",10,11),u.Wb(15,"mat-list"),u.Wb(16,"h3",12),u.Qc(17),u.ic(18,"translate"),u.Vb(),u.Wb(19,"div",13),u.Wb(20,"app-maarch-flat-tree",14,15),u.dc("afterSelectNode",(function(){return e.updateSelectedEntities()}))("afterDeselectNode",(function(){return e.updateSelectedEntities()})),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(3),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading),u.Db(1),u.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!e.appService.getViewMode()),u.Db(4),u.Rc(u.jc(18,12,"lang.chooseEntityAssociationModel")))},directives:[C.e,C.f,x.a,W.a,O.t,C.d,Rt.a,Rt.g,Ue.a,w.c,I.a,c.K,c.v,c.w,S.c,k.b,c.d,c.F,c.p,c.u,c.x,O.s,Xe.b,c.A,c.B,S.j,Tt.a,O.q,R.b,Rt.d,at.a,Xe.a],pipes:[p.d],styles:[".radio-group[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column}.radio-group[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]{padding:10px}.form-group[_ngcontent-%COMP%], .formType[_ngcontent-%COMP%]{display:flex}.formType[_ngcontent-%COMP%]{align-items:center;margin:10px;border-radius:4px;border:1px solid #ccc;position:relative;padding:10px}.formType-title[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;max-width:85%;text-overflow:ellipsis;z-index:1;font-size:10px;font-weight:700;background:#fff;position:absolute;top:-7px;left:10px;padding:0;margin:0;color:#135f7f}.formType[_ngcontent-%COMP%]    .mat-slide-toggle-label{color:#666;font-weight:700}.formType[_ngcontent-%COMP%]    .mat-radio-button, .formType[_ngcontent-%COMP%]    .mat-slide-toggle{opacity:.5;color:#666;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.formType[_ngcontent-%COMP%]    .mat-checked, .formType[_ngcontent-%COMP%]    .mat-radio-checked{opacity:1;color:#135f7f}.formType[_ngcontent-%COMP%]    .mat-checked .mat-slide-toggle-label{color:#135f7f}.formType[_ngcontent-%COMP%]    .mat-form-field-suffix{color:#f99830;font-size:15px;top:0}.ratio-1[_ngcontent-%COMP%], .ratio-2[_ngcontent-%COMP%]{flex:1}.priceContent[_ngcontent-%COMP%]{display:flex;align-items:first baseline;width:100%}.priceContent-label[_ngcontent-%COMP%]{text-align:right;color:#135f7f;flex:1;justify-content:flex-end;display:flex;padding-right:10px}.priceContent[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:90px!important}.priceContent[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-weight:700;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.priceInfo[_ngcontent-%COMP%]{font-size:10px;font-weight:700;opacity:.5}label[_ngcontent-%COMP%]{cursor:pointer}"]}),ah),ih=["snav2"];function oh(t,e){1&t&&(u.Wb(0,"div",14),u.Rb(1,"mat-spinner",15),u.Vb())}function rh(t,e){if(1&t&&u.Rb(0,"div",19),2&t){var a=u.hc(2);u.oc("innerHTML",a.translate.instant("lang.noCustomFieldInfo"),u.Ec)}}function ch(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",31),u.dc("click",(function(){u.Dc(a);var t=u.hc().$implicit;return u.hc(2).switchSQLMode(t)})),u.Rb(1,"mat-icon",32),u.Vb()}}function lh(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",41),u.dc("click",(function(){u.Dc(a);var t=u.hc(3).$implicit;return u.hc(2).sortValues(t)})),u.Rb(1,"mat-icon",42),u.Vb()}if(2&t){var n=u.hc(5);u.oc("title",n.translate.instant("lang.orderValues"))}}function sh(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-form-field",43),u.Wb(1,"input",44),u.dc("ngModelChange",(function(t){return u.Dc(a),e.$implicit.label=t})),u.Vb(),u.Wb(2,"button",45),u.dc("click",(function(){u.Dc(a);var t=e.index,n=u.hc(3).$implicit;return u.hc(2).removeValue(n,t)})),u.Rb(3,"mat-icon",46),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit,i=u.hc(5);u.Db(1),u.oc("ngModel",n.label)("placeholder",i.translate.instant("lang.newValue")),u.Db(1),u.oc("title",i.translate.instant("lang.delete"))}}function dh(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-expansion-panel",35),u.Wb(1,"mat-expansion-panel-header"),u.Wb(2,"mat-panel-title",36),u.Qc(3),u.ic(4,"translate"),u.Vb(),u.Vb(),u.Wb(5,"div",37),u.Wb(6,"div",33),u.Wb(7,"button",38),u.dc("click",(function(){u.Dc(a);var t=u.hc(2).index;return u.hc(2).addValue(t)})),u.Qc(8),u.ic(9,"translate"),u.Vb(),u.Vb(),u.Wb(10,"div"),u.Oc(11,lh,2,1,"button",39),u.Vb(),u.Vb(),u.Wb(12,"div",21),u.Oc(13,sh,4,3,"mat-form-field",40),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2).$implicit;u.Db(2),u.oc("matBadge",n.values.length),u.Db(1),u.Sc(" ",u.jc(4,5,"lang.valuesList")," "),u.Db(5),u.Sc(" ",u.jc(9,7,"lang.addValue"),""),u.Db(3),u.oc("ngIf",n.values.length>0),u.Db(2),u.oc("ngForOf",n.values)}}function bh(t,e){if(1&t&&(u.Wb(0,"div",33),u.Oc(1,dh,14,9,"mat-expansion-panel",34),u.Vb()),2&t){var a=u.hc().$implicit;u.Db(1),u.oc("ngIf",!a.SQLMode)}}function uh(t,e){if(1&t&&(u.Ub(0),u.Qc(1),u.ic(2,"translate"),u.Tb()),2&t){var a=u.hc().$implicit;u.Db(1),u.Sc(" (",u.jc(2,1,"lang."+a.key),") ")}}function ph(t,e){if(1&t&&(u.Wb(0,"mat-option",54),u.Qc(1),u.Oc(2,uh,3,3,"ng-container",52),u.Vb()),2&t){var a=e.$implicit,n=u.hc(5);u.oc("value",a.key),u.Db(1),u.Sc(" ",a.key," "),u.Db(1),u.oc("ngIf",!n.functionsService.empty(n.translate.instant("lang."+a.key)))}}function fh(t,e){if(1&t){var a=u.Xb();u.Wb(0,"span"),u.Wb(1,"input",61),u.dc("ngModelChange",(function(t){return u.Dc(a),e.$implicit.delimiterStart=t})),u.Vb(),u.Wb(2,"mat-chip",62),u.dc("removed",(function(){u.Dc(a);var t=e.index,n=u.hc(4).$implicit;return u.hc(2).removeColumnLabel(n.values.label,t)})),u.Qc(3),u.Rb(4,"mat-icon",63),u.Vb(),u.Wb(5,"input",61),u.dc("ngModelChange",(function(t){return u.Dc(a),e.$implicit.delimiterEnd=t})),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit;u.Db(1),u.Lc("width",8*(n.delimiterStart.length+1),"px"),u.oc("ngModel",n.delimiterStart),u.Db(2),u.Sc(" ",n.column," "),u.Db(2),u.Lc("width",8*(n.delimiterEnd.length+1),"px"),u.oc("ngModel",n.delimiterEnd)}}function mh(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",64),u.dc("click",(function(){u.Dc(a);var t=e.$implicit,n=u.hc(4).$implicit;return u.hc(2).addColumnLabel(n.values.label,t)})),u.Qc(1),u.Vb()}if(2&t){var n=e.$implicit;u.Db(1),u.Rc(n)}}function gh(t,e){if(1&t&&(u.Wb(0,"div",55),u.Wb(1,"mat-label",56),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Oc(4,fh,6,7,"span",18),u.Wb(5,"button",57),u.Rb(6,"i",58),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Wb(9,"mat-menu",null,59),u.Oc(11,mh,2,1,"button",60),u.Vb(),u.Vb()),2&t){var a=u.zc(10),n=u.hc(3).$implicit,i=u.hc(2);u.Db(2),u.Sc(" ",u.jc(3,5,"lang.targetLabel")," *"),u.Db(2),u.oc("ngForOf",n.values.label),u.Db(1),u.oc("matMenuTriggerFor",a),u.Db(2),u.Sc(" ",u.jc(8,7,"lang.addColumn")," "),u.Db(4),u.oc("ngForOf",i.availaibleTables[n.values.table])}}function hh(t,e){if(1&t&&(u.Wb(0,"mat-option",54),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a),u.Db(1),u.Sc(" ",a," ")}}function vh(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-form-field"),u.Wb(1,"mat-label"),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"mat-select",49),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(3).$implicit.values.key=t})),u.Oc(5,hh,2,2,"mat-option",50),u.Vb(),u.Vb()}if(2&t){var n=u.hc(3).$implicit,i=u.hc(2);u.Db(2),u.Rc(u.jc(3,3,"lang.targetIdentifier")),u.Db(2),u.oc("ngModel",n.values.key),u.Db(1),u.oc("ngForOf",i.availaibleTables[n.values.table])}}var yh=function(){return["string","integer","date"]};function Dh(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-expansion-panel",35),u.Wb(1,"mat-expansion-panel-header"),u.Wb(2,"mat-panel-title"),u.Qc(3),u.ic(4,"translate"),u.Vb(),u.Vb(),u.Wb(5,"div",21),u.Wb(6,"div",48),u.Wb(7,"mat-form-field"),u.Wb(8,"mat-label"),u.Qc(9),u.ic(10,"translate"),u.Vb(),u.Wb(11,"mat-select",49),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).$implicit.values.table=t})),u.Oc(12,ph,3,3,"mat-option",50),u.ic(13,"keyvalue"),u.Vb(),u.Vb(),u.Oc(14,gh,12,9,"div",51),u.Oc(15,vh,6,5,"mat-form-field",52),u.Vb(),u.Wb(16,"mat-form-field"),u.Wb(17,"mat-label"),u.Qc(18),u.ic(19,"translate"),u.Vb(),u.Wb(20,"textarea",53),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).$implicit.values.clause=t})),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2).$implicit,i=u.hc(2);u.Db(3),u.Sc(" ",u.jc(4,8,"lang.database")," "),u.Db(6),u.Rc(u.jc(10,10,"lang.targetTable")),u.Db(2),u.oc("ngModel",n.values.table),u.Db(1),u.oc("ngForOf",u.jc(13,12,i.availaibleTables)),u.Db(2),u.oc("ngIf",-1===u.uc(16,yh).indexOf(n.type)&&n.values.table),u.Db(1),u.oc("ngIf",n.values.table),u.Db(3),u.Rc(u.jc(19,14,"lang.clause")),u.Db(2),u.oc("ngModel",n.values.clause)}}function Vh(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",24),u.Wb(1,"div"),u.Wb(2,"button",31),u.dc("click",(function(){u.Dc(a);var t=u.hc().$implicit;return u.hc(2).switchSQLMode(t)})),u.Rb(3,"mat-icon",47),u.Vb(),u.Vb(),u.Wb(4,"div",33),u.Oc(5,Dh,21,17,"mat-expansion-panel",34),u.Vb(),u.Vb()}if(2&t){var n=u.hc().$implicit;u.Db(5),u.oc("ngIf",n.SQLMode)}}var Ch=function(){return["banAutocomplete","contact"]},xh=function(){return["select","radio","checkbox"]};function Mh(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-expansion-panel"),u.Wb(1,"mat-expansion-panel-header"),u.Wb(2,"mat-panel-title",20),u.Qc(3),u.Vb(),u.Wb(4,"mat-panel-description"),u.Qc(5),u.ic(6,"translate"),u.Vb(),u.Vb(),u.Wb(7,"div",21),u.Wb(8,"mat-form-field"),u.Wb(9,"input",22),u.dc("ngModelChange",(function(t){return u.Dc(a),e.$implicit.id=t})),u.Vb(),u.Vb(),u.Wb(10,"mat-form-field"),u.Wb(11,"input",23),u.dc("ngModelChange",(function(t){return u.Dc(a),e.$implicit.label=t})),u.Vb(),u.Vb(),u.Vb(),u.Wb(12,"div",24),u.Wb(13,"div"),u.Oc(14,ch,2,0,"button",25),u.Vb(),u.Oc(15,bh,2,1,"div",26),u.Vb(),u.Oc(16,Vh,6,1,"div",27),u.Wb(17,"div",28),u.Wb(18,"button",29),u.dc("click",(function(){u.Dc(a);var t=e.$implicit,n=e.index;return u.hc(2).updateCustomField(t,n)})),u.Qc(19),u.ic(20,"translate"),u.Vb(),u.Wb(21,"button",30),u.dc("click",(function(){u.Dc(a);var t=e.index;return u.hc(2).removeCustomField(t)})),u.Qc(22),u.ic(23,"translate"),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit,i=e.index,o=u.hc(2);u.Db(3),u.Sc(" ",n.label," "),u.Db(2),u.Sc(" ",u.jc(6,14,"lang."+n.type+"Input")," "),u.Db(4),u.oc("ngModel",n.id)("placeholder",o.translate.instant("lang.technicalId"))("value",n.id),u.Db(2),u.oc("ngModel",n.label)("placeholder",o.translate.instant("lang.label"))("value",n.label),u.Db(3),u.oc("ngIf",!n.SQLMode&&-1===u.uc(20,Ch).indexOf(n.type)),u.Db(1),u.oc("ngIf",u.uc(21,xh).indexOf(n.type)>-1),u.Db(1),u.oc("ngIf",n.SQLMode),u.Db(2),u.oc("disabled",o.isModified(n,i)||!o.isValidField(n)),u.Db(1),u.Rc(u.jc(20,16,"lang.update")),u.Db(3),u.Rc(u.jc(23,18,"lang.delete"))}}function Wh(t,e){if(1&t&&(u.Wb(0,"mat-card",16),u.Wb(1,"mat-tab-group"),u.Wb(2,"mat-tab",12),u.Oc(3,rh,1,1,"div",17),u.Wb(4,"mat-accordion"),u.Oc(5,Mh,24,22,"mat-expansion-panel",18),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t){var a=u.hc();u.Db(2),u.oc("label",a.translate.instant("lang.usableFields")),u.Db(1),u.oc("ngIf",0===a.customFields.length),u.Db(2),u.oc("ngForOf",a.customFields)}}function Oh(t,e){if(1&t&&(u.Ub(0),u.Wb(1,"mat-form-field",70),u.Rb(2,"textarea",71),u.Vb(),u.Tb()),2&t){var a=u.hc().$implicit,n=u.hc();u.Db(2),u.oc("placeholder",n.translate.instant("lang."+a.type+"Input"))}}function _h(t,e){if(1&t&&(u.Ub(0),u.Wb(1,"mat-form-field",70),u.Rb(2,"input",72),u.Vb(),u.Tb()),2&t){var a=u.hc().$implicit,n=u.hc();u.Db(2),u.oc("placeholder",n.translate.instant("lang."+a.type+"Input"))}}function Sh(t,e){if(1&t&&(u.Wb(0,"mat-option",54),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a),u.Db(1),u.Tc(" ",u.jc(2,3,"lang.choice")," ",a," ")}}function kh(t,e){if(1&t&&(u.Ub(0),u.Wb(1,"mat-form-field",70),u.Wb(2,"mat-select",73),u.Oc(3,Sh,3,5,"mat-option",50),u.Vb(),u.Vb(),u.Tb()),2&t){var a=u.hc().$implicit,n=u.hc();u.Db(2),u.oc("placeholder",n.translate.instant("lang."+a.type+"Input")),u.Db(1),u.oc("ngForOf",n.sampleIncrement)}}function wh(t,e){if(1&t){var a=u.Xb();u.Ub(0),u.Wb(1,"mat-form-field",70),u.Wb(2,"input",74),u.dc("click",(function(){return u.Dc(a),u.zc(5).open()})),u.Vb(),u.Rb(3,"mat-datepicker-toggle",75),u.Rb(4,"mat-datepicker",null,76),u.Vb(),u.Tb()}if(2&t){var n=u.zc(5),i=u.hc().$implicit,o=u.hc();u.Db(2),u.oc("matDatepicker",n)("placeholder",o.translate.instant("lang."+i.type+"Input")),u.Db(1),u.oc("for",n)}}function Ih(t,e){if(1&t&&(u.Wb(0,"mat-radio-button",54),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a),u.Db(1),u.Tc(" ",u.jc(2,3,"lang.choice")," ",a," ")}}function jh(t,e){if(1&t&&(u.Ub(0),u.Wb(1,"mat-radio-group",77),u.Oc(2,Ih,3,5,"mat-radio-button",50),u.Vb(),u.Tb()),2&t){var a=u.hc(2);u.Db(2),u.oc("ngForOf",a.sampleIncrement)}}function Rh(t,e){if(1&t&&(u.Wb(0,"mat-list-option",83),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a),u.Db(1),u.Tc(" ",u.jc(2,3,"lang.choice")," ",a," ")}}function Th(t,e){1&t&&(u.Wb(0,"mat-chip"),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc(" ",u.jc(2,1,"lang.selectedValue")," "))}function Ph(t,e){if(1&t&&(u.Ub(0),u.Wb(1,"div",78),u.Wb(2,"mat-selection-list",79,80),u.Oc(4,Rh,3,5,"mat-list-option",81),u.Vb(),u.Vb(),u.Wb(5,"mat-chip-list",82),u.Oc(6,Th,3,3,"mat-chip",18),u.Vb(),u.Tb()),2&t){var a=u.zc(3),n=u.hc(2);u.Db(4),u.oc("ngForOf",n.sampleIncrement),u.Db(2),u.oc("ngForOf",a.selectedOptions.selected)}}var Qh=function(){return["string","banAutocomplete","contact"]};function Fh(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",65),u.Wb(1,"div",66),u.Wb(2,"button",67),u.dc("click",(function(){u.Dc(a);var t=e.$implicit;return u.hc().addCustomField(t)})),u.Rb(3,"mat-icon",68),u.Vb(),u.Vb(),u.Wb(4,"div",33),u.Wb(5,"div",69),u.Qc(6),u.Vb(),u.Oc(7,Oh,3,1,"ng-container",52),u.Oc(8,_h,3,1,"ng-container",52),u.Oc(9,kh,4,2,"ng-container",52),u.Oc(10,wh,6,3,"ng-container",52),u.Oc(11,jh,3,1,"ng-container",52),u.Oc(12,Ph,7,2,"ng-container",52),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit,i=u.hc();u.Db(2),u.oc("title",i.translate.instant("lang.add")),u.Db(4),u.Sc("",n.label," :"),u.Db(1),u.oc("ngIf",u.uc(8,Qh).indexOf(n.type)>-1),u.Db(1),u.oc("ngIf","integer"===n.type),u.Db(1),u.oc("ngIf","select"===n.type),u.Db(1),u.oc("ngIf","date"===n.type),u.Db(1),u.oc("ngIf","radio"===n.type),u.Db(1),u.oc("ngIf","checkbox"===n.type)}}var Lh,Eh=((Lh=function(){function t(e,a,n,i,o,r,c,l){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.dialog=i,this.headerService=o,this.appService=r,this.sortPipe=c,this.functionsService=l,this.loading=!0,this.customFieldsTypes=[{label:this.translate.instant("lang.stringInput"),type:"string"},{label:this.translate.instant("lang.integerInput"),type:"integer"},{label:this.translate.instant("lang.selectInput"),type:"select"},{label:this.translate.instant("lang.dateInput"),type:"date"},{label:this.translate.instant("lang.radioInput"),type:"radio"},{label:this.translate.instant("lang.checkboxInput"),type:"checkbox"},{label:this.translate.instant("lang.banAutocompleteInput"),type:"banAutocomplete"},{label:this.translate.instant("lang.contactInput"),type:"contact"}],this.customFields=[],this.customFieldsClone=[],this.incrementCreation=1,this.sampleIncrement=[1,2,3,4],this.SQLMode=!1,this.availaibleTables={}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.customFieldsAdmin")),this.getTables(),this.http.get("../rest/customFields?admin=true").pipe(Object(s.a)((function(e){return e.customFields.forEach((function(e){t.functionsService.empty(e.values.key)?(e.SQLMode=!1,e.values=Object.values(e.values).map((function(t){return{label:t}}))):e.SQLMode=!0})),e})),Object(d.a)((function(e){t.customFields=e.customFields,t.customFieldsClone=JSON.parse(JSON.stringify(t.customFields))})),Object(Dt.a)((function(){return t.loading=!1})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"addCustomField",value:function(t){var e=this,a={};this.dialogRef=this.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.add"),msg:this.translate.instant("lang.confirmAction")}}),this.dialogRef.afterClosed().pipe(Object(J.a)((function(t){return"ok"===t})),Object(d.a)((function(){a={label:e.translate.instant("lang.newField")+" "+e.incrementCreation,type:t.type,values:[]}})),Object(Y.a)((function(t){return e.http.post("../rest/customFields",a)})),Object(d.a)((function(t){a.id=t.customFieldId,e.customFields.push(a),e.notify.success(e.translate.instant("lang.customFieldAdded")),e.incrementCreation++})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe()}},{key:"addValue",value:function(t){this.customFields[t].values.push({label:""})}},{key:"removeValue",value:function(t,e){t.values.splice(e,1)}},{key:"removeCustomField",value:function(t){var e=this;this.dialogRef=this.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete")+' "'+this.customFields[t].label+'"',msg:this.translate.instant("lang.confirmAction")}}),this.dialogRef.afterClosed().pipe(Object(J.a)((function(t){return"ok"===t})),Object(Y.a)((function(){return e.http.delete("../rest/customFields/"+e.customFields[t].id)})),Object(d.a)((function(){e.customFields.splice(t,1),e.notify.success(e.translate.instant("lang.customFieldDeleted"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe()}},{key:"updateCustomField",value:function(t,e){var a=this,n=Object.assign({},t);if(t.SQLMode)["string","integer","date"].indexOf(t.type)>-1&&(t.values.label=[{column:t.values.key,delimiterEnd:"",delimiterStart:""}]);else if(t.values=t.values.filter((function(t,e,a){return a.map((function(t){return t.label})).indexOf(t.label)===e})),n.values=t.values.map((function(t){return t.label})),this.customFields.filter((function(t){return t.label===n.label})).length>1)return this.notify.handleErrors(this.translate.instant("lang.customFieldAlreadyExists")),Object(X.of)(!1);this.http.put("../rest/customFields/"+t.id,n).pipe(Object(d.a)((function(){a.customFieldsClone[e]=JSON.parse(JSON.stringify(t)),a.notify.success(a.translate.instant("lang.customFieldUpdated"))})),Object(b.a)((function(t){return a.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe()}},{key:"sortValues",value:function(t){t.values=this.sortPipe.transform(t.values,"label")}},{key:"isModified",value:function(t,e){return!(JSON.stringify(t)!==JSON.stringify(this.customFieldsClone[e])&&""!==t.label&&!this.SQLMode)}},{key:"switchSQLMode",value:function(t){t.SQLMode=!t.SQLMode,t.values=t.SQLMode?{key:"id",label:[{column:"id",delimiterEnd:"",delimiterStart:""}],table:"users",clause:"1=1"}:[]}},{key:"getTables",value:function(){var t=this;this.http.get("../rest/customFieldsWhiteList").pipe(Object(d.a)((function(e){e.allowedTables.forEach((function(e){t.availaibleTables[e.name]=e.columns}))})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"addColumnLabel",value:function(t,e){t.push({delimiterStart:"",delimiterEnd:"",column:e})}},{key:"removeColumnLabel",value:function(t,e){t.splice(e,1)}},{key:"isValidField",value:function(t){return!t.SQLMode||!(this.functionsService.empty(t.values.key)||this.functionsService.empty(t.values.label)||this.functionsService.empty(t.values.table)||this.functionsService.empty(t.values.clause))}}]),t}()).\u0275fac=function(t){return new(t||Lh)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(N.b),u.Qb(m.a),u.Qb(g.a),u.Qb(T.a),u.Qb(D.a))},Lh.\u0275cmp=u.Kb({type:Lh,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&u.Kc(ih,!0),2&t&&u.yc(a=u.ec())&&(e.sidenavRight=a.first)},features:[u.Cb([T.a])],decls:18,vars:12,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end","opened","",1,"col-md-4","col-sm-12","customFielsdPanel",3,"mode","fixedInViewport"],["snav2",""],[3,"label"],["class","customFieldsTypesItem",4,"ngFor","ngForOf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],["class","alert-message alert-message-info","role","alert",3,"innerHTML",4,"ngIf"],[4,"ngFor","ngForOf"],["role","alert",1,"alert-message","alert-message-info",3,"innerHTML"],["color","primary"],[1,"col-md-12"],["matInput","","name","id","disabled","",3,"ngModel","placeholder","value","ngModelChange"],["matInput","","name","label",3,"ngModel","placeholder","value","ngModelChange"],[1,"col-md-12",2,"display","flex","align-items","center"],["mat-mini-fab","","color","primary",3,"click",4,"ngIf"],["style","flex:1;",4,"ngIf"],["class","col-md-12","style","display: flex;align-items: center;",4,"ngIf"],[1,"col-md-12","text-center"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","warn",3,"click"],["mat-mini-fab","","color","primary",3,"click"],[1,"fas","fa-database",2,"height","auto"],[2,"flex","1"],["class","customFieldValues","opened","",4,"ngIf"],["opened","",1,"customFieldValues"],["matBadgeSize","small",3,"matBadge"],[1,"actionValuesCustom"],["mat-raised-button","","color","primary",3,"click"],["mat-mini-fab","","color","default",3,"title","click",4,"ngIf"],["floatLabel","never",4,"ngFor","ngForOf"],["mat-mini-fab","","color","default",3,"title","click"],["color","primary",1,"fas","fa-sort-alpha-down",2,"height","auto"],["floatLabel","never"],["matInput","",3,"ngModel","placeholder","ngModelChange"],["color","warn","mat-icon-button","","matSuffix","",3,"title","click"],[1,"fa","fa-trash"],[1,"fas","fa-list-ol",2,"height","auto"],[2,"display","flex","flex-direction","column"],["required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["style","width:100%;padding-bottom: 20px;",4,"ngIf"],[4,"ngIf"],["matInput","","placeholder","Ex. status='OK'","required","",3,"ngModel","ngModelChange"],[3,"value"],[2,"width","100%","padding-bottom","20px"],[2,"font-size","75%","color","rgba(0,0,0,0.54)","width","100%","display","block"],["mat-button","","color","primary",3,"matMenuTriggerFor"],[1,"fa","fa-plus-circle"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[2,"min-width","8px",3,"ngModel","ngModelChange"],[3,"removed"],["matChipRemove","",1,"fa","fa-times-circle"],["mat-menu-item","",3,"click"],[1,"customFieldsTypesItem"],[1,"addCustomFieldTypeContainer"],["mat-icon-button","","color","primary",3,"title","click"],[1,"fas","fa-plus-circle","fa-2x"],[2,"color","rgba(0,0,0,0.54)"],["floatLabel","never",1,"input-form"],["matInput","","matTextareaAutosize","","matAutosizeMinRows","1","cdkAutosizeMaxRows","6","disabled","",3,"placeholder"],["type","number","matInput","","disabled","",3,"placeholder"],["disabled","",3,"placeholder"],["matInput","","disabled","",3,"matDatepicker","placeholder","click"],["matSuffix","",3,"for"],["picker",""],["color","primary","disabled","",1,"radio-form"],[1,"input-form","checkbox-form"],["disabled","",1,"div-list"],["sampleList",""],["checkboxPosition","before",3,"value",4,"ngFor","ngForOf"],[1,"checkbox-selected-list"],["checkboxPosition","before",3,"value"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Wb(1,"mat-sidenav-content"),u.Wb(2,"div",1),u.Wb(3,"div",2),u.Wb(4,"div",3),u.Rb(5,"header-left"),u.Vb(),u.Wb(6,"div",4),u.Rb(7,"header-right"),u.Vb(),u.Vb(),u.Rb(8,"div",5),u.Vb(),u.Wb(9,"div",6),u.Wb(10,"div",7),u.Oc(11,oh,2,0,"div",8),u.Oc(12,Wh,6,3,"mat-card",9),u.Vb(),u.Vb(),u.Vb(),u.Wb(13,"mat-sidenav",10,11),u.Wb(15,"mat-tab-group"),u.Wb(16,"mat-tab",12),u.Oc(17,Fh,13,9,"div",13),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(3),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading),u.Db(1),u.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode()),u.Db(3),u.oc("label",e.translate.instant("lang.customFieldsTypesAvailable")),u.Db(1),u.oc("ngForOf",e.customFieldsTypes))},directives:[C.e,C.f,x.a,W.a,O.t,C.d,Ee.c,Ee.a,O.s,w.c,I.a,Ae.a,Ae.c,Ae.g,Ae.h,Ae.f,S.c,k.b,c.d,c.u,c.x,R.b,Tt.a,no.a,S.j,S.g,it.a,c.F,j.p,$e.d,$e.e,eo.a,eo.e,$e.b,k.d,He.h,He.j,He.f,Xe.b,Xe.a,Rt.i,eo.d,Rt.f],pipes:[p.d,O.l],styles:[".mat-divider[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.customFielsdPanel[_ngcontent-%COMP%], .customFielsdPanel[_ngcontent-%COMP%]    .mat-tab-body-wrapper{padding-left:0}.mat-expansion-panel-header-description[_ngcontent-%COMP%]{flex-direction:row-reverse}.customFieldValues[_ngcontent-%COMP%]{box-shadow:none;border:1px solid rgba(0,0,0,.12)}.mat-expansion-panel[_ngcontent-%COMP%]{margin:5px}.mat-accordion[_ngcontent-%COMP%]{padding:5px}.mat-tab-body-content[_ngcontent-%COMP%], .mat-tab-body-wrapper[_ngcontent-%COMP%], .mat-tab-group[_ngcontent-%COMP%]{height:100%}.actionsCustomFields[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.actionValuesCustom[_ngcontent-%COMP%]{display:flex}.alert-message-info[_ngcontent-%COMP%]{margin-top:30px;max-width:100%}.addCustomFieldTypeContainer[_ngcontent-%COMP%]{justify-content:center;display:flex;align-items:center;width:60px}.customFieldsTypesItem[_ngcontent-%COMP%]{display:flex;padding-top:10px;padding-bottom:10px}.mat-badge-content[_ngcontent-%COMP%]{top:2px!important}",".banner[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:30px;border-radius:20px;border:1px solid #ccc;position:relative;padding:20px;width:100%}.banner[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;max-width:85%;text-overflow:ellipsis;z-index:1;font-size:20px;font-weight:700;letter-spacing:2px;position:absolute;top:-18px;left:20px;padding:0;margin:0;color:#135f7f}.banner[_ngcontent-%COMP%]   .title-divider[_ngcontent-%COMP%]{position:absolute;width:99%;z-index:-1;top:17px;background:#fff;height:1px}.banner[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:50%;padding-right:10px}.banner[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{font-size:16px}.fieldRow[_ngcontent-%COMP%]{display:flex;padding-top:10px;padding-bottom:10px}.fieldLabel[_ngcontent-%COMP%]{color:#4a4a4a}.fieldLabel[_ngcontent-%COMP%]   .cdk-drag-handle[_ngcontent-%COMP%]{margin-right:10px}.fieldState[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px;width:40px;justify-content:center;align-items:normal!important;padding-top:15px}.fieldState[_ngcontent-%COMP%]   .fieldRequired[_ngcontent-%COMP%]{font-size:5px;color:#135f7f}.fieldState[_ngcontent-%COMP%]   .fieldError[_ngcontent-%COMP%]{font-size:15px;color:#f99830}.fieldState[_ngcontent-%COMP%]   .fieldFull[_ngcontent-%COMP%]{font-size:15px;color:green}.fieldInput[_ngcontent-%COMP%]{position:relative}.fieldInput[_ngcontent-%COMP%], .fieldLabel[_ngcontent-%COMP%]{font-size:13px;flex:1}@media (max-width:768px){.fieldInput[_ngcontent-%COMP%], .fieldLabel[_ngcontent-%COMP%]{font-size:1em}}.fieldInput[_ngcontent-%COMP%], .fieldLabel[_ngcontent-%COMP%], .fieldState[_ngcontent-%COMP%]{align-items:center;display:flex}.input-form[_ngcontent-%COMP%]{font-size:13px;color:#666;width:500px}.input-form[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{color:#135f7f;padding-left:20px}.input-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.input-form[_ngcontent-%COMP%]    .mat-select-value-text{padding-left:20px;color:#135f7f}.input-form[_ngcontent-%COMP%]    .mat-form-field-label{top:15px;left:20px}.input-form[_ngcontent-%COMP%]    .mat-form-field-infix{display:flex;padding-top:0;padding-bottom:5px}.input-form[_ngcontent-%COMP%]    .mat-form-field-label-wrapper{top:-13px}.input-form[_ngcontent-%COMP%]    .mat-form-field-flex{background:#fff;height:40px;border-radius:10px;border:1px solid #135f7f}.input-form[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.input-form[_ngcontent-%COMP%]    .mat-form-field-suffix{margin-right:20px}.input-form[_ngcontent-%COMP%]    .mat-select-arrow-wrapper{padding-right:20px}.input-form[_ngcontent-%COMP%]    .mat-list-option{color:rgba(0,0,0,.54)}.input-form[_ngcontent-%COMP%]    .mat-form-field-wrapper{padding:0}.input-form[_ngcontent-%COMP%]    .mat-datepicker-toggle-default-icon{height:auto}.input-form.search-select[_ngcontent-%COMP%]    .mat-form-field-label-wrapper{top:-15px}.input-form.input-date[_ngcontent-%COMP%]    .mat-form-field-flex{align-items:center}.input-form.input-date[_ngcontent-%COMP%]    .mat-date-range-input-start-wrapper{flex:1}.input-form.input-date[_ngcontent-%COMP%]    .mat-date-range-input-inner{color:#135f7f}.input-form-filled[_ngcontent-%COMP%]{color:#fff;width:500px;transition:all .1s}.input-form-filled[_ngcontent-%COMP%]:hover    .mat-form-field-flex, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-form-field-flex{background:#fff!important;border:1px solid #fff!important;color:#135f7f!important;transition:all .1s}.input-form-filled[_ngcontent-%COMP%]:hover    .mat-form-field-label, .input-form-filled[_ngcontent-%COMP%]:hover    .mat-select-placeholder, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-form-field-label, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-select-placeholder{color:#135f7f!important}.input-form-filled[_ngcontent-%COMP%]:hover    .mat-select-arrow, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-select-arrow{color:rgba(19,95,127,.54)}.input-form-filled[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{color:#135f7f;padding-left:20px}.input-form-filled[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-select-value{text-align:left;font-weight:400}.input-form-filled[_ngcontent-%COMP%]    .mat-select-value-text{padding-left:20px;color:#fff}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-label{color:#fff;left:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-infix{padding-bottom:15px}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-flex{background:#135f7f;border-radius:30px;border:1px solid #fff}.input-form-filled[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-suffix{margin-right:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-select-arrow-wrapper{padding-right:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-select-arrow{color:hsla(0,0%,100%,.54)}.input-form-filled[_ngcontent-%COMP%]    .mat-select-placeholder{color:#fff}.input-form-filled[_ngcontent-%COMP%]    .mat-list-option{color:rgba(0,0,0,.54)}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-wrapper{padding:0}.input-form-filled[_ngcontent-%COMP%]   textarea.cdk-textarea-autosize-measuring[_ngcontent-%COMP%]{padding:4px 0!important}.input-form-filled[_ngcontent-%COMP%]    .mat-datepicker-toggle-default-icon{height:auto}.input-form.mat-form-field-disabled[_ngcontent-%COMP%]    .mat-input-element{cursor:not-allowed;padding-left:20px}.input-form.mat-form-field-disabled[_ngcontent-%COMP%]    .mat-form-field-flex{cursor:not-allowed;border:1px dashed #353232}.opt-group[_ngcontent-%COMP%]{font-weight:700}.smallInput[_ngcontent-%COMP%]{font-size:11px;padding-left:20px;padding-right:20px}.smallInput[_ngcontent-%COMP%]    .mat-form-field-infix{padding:0 0 5px}.button-form-primary[_ngcontent-%COMP%]{background:#fff;border:1px solid #135f7f;color:#135f7f;border-radius:30px;padding-left:20px;padding-right:20px;width:240px;height:45px;transition:all .1s}@media (max-width:768px){.button-form-primary[_ngcontent-%COMP%]{width:auto}}.button-form-primary[_ngcontent-%COMP%]:hover, .button-form-primary[aria-expanded=true][_ngcontent-%COMP%]{background:#135f7f!important;border:1px solid #fff!important;color:#fff!important;transition:all .1s}.button-form-primary[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;align-items:center;justify-content:center;width:100%}.button-form-primary[_ngcontent-%COMP%]    .mat-button-wrapper .menu-label{display:flex;flex:1;overflow:hidden;text-overflow:ellipsis;margin-right:10px}.button-form-primary[_ngcontent-%COMP%]    .mat-button-wrapper .menu-icon{display:flex}.button-form-primary-filled[_ngcontent-%COMP%]{background:#135f7f;border:1px solid #fff;color:#fff;border-radius:30px;padding-left:20px;padding-right:20px;width:240px;height:45px;transition:all .1s}@media (max-width:768px){.button-form-primary-filled[_ngcontent-%COMP%]{width:auto}}.button-form-primary-filled[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;align-items:center;justify-content:center;width:100%}.button-form-primary-filled[_ngcontent-%COMP%]    .mat-button-wrapper .menu-label{display:flex;flex:1;overflow:hidden;text-overflow:ellipsis;margin-right:10px}.button-form-primary-filled[_ngcontent-%COMP%]    .mat-button-wrapper .menu-icon{display:flex}.button-form-primary-alt[_ngcontent-%COMP%]{font-size:13px;background:#135f7f;border:1px solid #fff;color:#fff;border-radius:30px;padding:5px 20px;width:240px;transition:all .1s}@media (max-width:768px){.button-form-primary-alt[_ngcontent-%COMP%]{font-size:1em}}.button-form-primary-alt[_ngcontent-%COMP%]:hover, .button-form-primary-alt[aria-expanded=true][_ngcontent-%COMP%]{background:#fff!important;border:1px solid #fff!important;color:#135f7f!important;transition:all .1s}.button-form-primary-alt[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;align-items:center;justify-content:center;width:100%}.button-form-primary-alt[_ngcontent-%COMP%]    .mat-button-wrapper .menu-label{display:flex;flex:1}.button-form-primary-alt[_ngcontent-%COMP%]    .mat-button-wrapper .menu-icon{display:flex}.button-form-primary[aria-expanded=true][_ngcontent-%COMP%]{color:#135f7f;background:#fff;transition:all .1s;border:1px solid #135f7f}.button-form[_ngcontent-%COMP%]{background:#fff;color:#135f7f;border-radius:30px;padding:5px 20px;width:240px;transition:all .1s}.button-form[aria-expanded=true][_ngcontent-%COMP%]{transition:all .1s;border-bottom-left-radius:0;border-bottom-right-radius:0;border-top-left-radius:30px;border-top-right-radius:30px} .menuForm{width:240px;border-radius:30px;border:1px solid #fff;min-height:auto} .menuForm .mat-menu-content{padding-top:0;padding-bottom:0} .menuForm .mat-menu-content .mat-menu-item{transition:all .1s;font-size:13px;color:#666}@media (max-width:768px){ .menuForm .mat-menu-content .mat-menu-item{font-size:1em}} .menuForm .mat-menu-content .mat-menu-item:hover{transition:all .1s;color:#fff;background:#1a80ab} .parametersFieldsMenu{min-height:auto}.div-list[_ngcontent-%COMP%]{padding:0;max-height:150px;overflow:auto}.div-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{font-size:13px}@media (max-width:768px){.div-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{font-size:1em}}.checkbox-form[_ngcontent-%COMP%]{width:100%;padding:0;border:1px solid #135f7f;border-radius:30px;overflow:hidden}.checkbox-selected-list[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:center}.checkbox-selected-list[_ngcontent-%COMP%]    .mat-chip-list-wrapper{justify-content:center}.checkbox-selected-list[_ngcontent-%COMP%]   .mat-chip[_ngcontent-%COMP%]{font-size:13px}@media (max-width:768px){.checkbox-selected-list[_ngcontent-%COMP%]   .mat-chip[_ngcontent-%COMP%]{font-size:1em}}.radio-form[_ngcontent-%COMP%]{padding-left:20px;display:grid;grid-template-columns:repeat(2,1fr);width:100%}.radio-form[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]{flex:1}.radio-form[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]    .mat-radio-label-content{font-weight:400;color:rgba(0,0,0,.54)}.radio-form[_ngcontent-%COMP%]   .mat-radio-disabled[_ngcontent-%COMP%]{opacity:.5}.input-radio[_ngcontent-%COMP%]    .mat-form-field-infix{overflow:auto;padding-top:0}.input-radio[_ngcontent-%COMP%]    .mat-form-field-flex{height:auto}.input-radio[_ngcontent-%COMP%]    .mat-form-field-label{top:0;font-size:12px}.disabled[_ngcontent-%COMP%]{opacity:.2}.customFieldRow[_ngcontent-%COMP%]{display:flex;padding-top:20px;padding-bottom:20px}.customFieldDrag[_ngcontent-%COMP%]{cursor:move;width:50px;display:flex;align-items:center;justify-content:center}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drag-preview[_ngcontent-%COMP%]{background:#fff;box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.indexingModelsCustomFieldsList.cdk-drop-list-dragging[_ngcontent-%COMP%]   .indexingModelsCustomFieldsList[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.advancedInput[_ngcontent-%COMP%]{flex-direction:column}.noMandatory[_ngcontent-%COMP%]{visibility:hidden}.checkboxInput[_ngcontent-%COMP%]{display:block}.categoryLabel[_ngcontent-%COMP%]{letter-spacing:1px;font-size:13px;color:#135f7f;font-weight:700}@media (max-width:768px){.categoryLabel[_ngcontent-%COMP%]{font-size:1em}}.textareaInput[_ngcontent-%COMP%]    .mat-form-field{line-height:normal}.textareaInput[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{padding:0;margin:0;color:#135f7f}.textareaInput[_ngcontent-%COMP%]    .mat-form-field-flex{padding-left:20px;height:auto!important;min-height:40px!important}.textareaInput[_ngcontent-%COMP%]    .mat-form-field-label{left:0}"]}),Lh),Ah=a("87bG"),Uh=a("enVo"),zh=a("sTim"),$h=["snav2"],Nh=["indexingForm"];function Hh(t,e){1&t&&(u.Wb(0,"div",15),u.Rb(1,"mat-spinner",16),u.Vb())}function Bh(t,e){if(1&t&&(u.Wb(0,"mat-option",30),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a.id),u.Db(1),u.Sc(" ",a.label," ")}}function Xh(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-card",17),u.Wb(1,"div",18),u.Wb(2,"mat-form-field"),u.Wb(3,"mat-label"),u.Qc(4),u.ic(5,"translate"),u.Vb(),u.Wb(6,"mat-select",19),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().indexingModel.category=t}))("selectionChange",(function(t){return u.Dc(a),u.hc().changeCategory(t)})),u.Oc(7,Bh,2,2,"mat-option",20),u.Vb(),u.Vb(),u.Vb(),u.Wb(8,"div",18),u.Wb(9,"div",21),u.Wb(10,"mat-form-field",22),u.Wb(11,"mat-label"),u.Qc(12),u.ic(13,"translate"),u.Vb(),u.Wb(14,"input",23),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().indexingModel.label=t})),u.Vb(),u.Vb(),u.Vb(),u.Wb(15,"div",24),u.Wb(16,"mat-slide-toggle",25),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().indexingModel.default=t})),u.Qc(17),u.ic(18,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(19,"mat-tab-group"),u.Wb(20,"mat-tab",12),u.Rb(21,"app-indexing-form",26,27),u.Wb(23,"div",28),u.Wb(24,"button",29),u.dc("click",(function(){return u.Dc(a),u.hc().onSubmit()})),u.Qc(25),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.zc(22),i=u.hc();u.Db(4),u.Rc(u.jc(5,13,"lang.category_id")),u.Db(2),u.oc("ngModel",i.indexingModel.category)("placeholder",i.translate.instant("lang.category_id")),u.Db(1),u.oc("ngForOf",i.categoriesList),u.Db(5),u.Rc(u.jc(13,15,"lang.modelName")),u.Db(2),u.oc("ngModel",i.indexingModel.label),u.Db(2),u.oc("ngModel",i.indexingModel.default),u.Db(1),u.Sc(" ",u.jc(18,17,"lang.defaultModel")," "),u.Db(3),u.oc("label",i.translate.instant("lang.indexingForm")),u.Db(1),u.oc("indexingFormId",i.indexingModel.id)("admin",!0),u.Db(3),u.oc("disabled",!n.isModified()&&!i.isModified()||""===i.indexingModel.label),u.Db(1),u.Rc(i.translate.instant(i.creationMode?"lang.save":"lang.update"))}}function Gh(t,e){if(1&t&&u.Rb(0,"app-field-list",31),2&t){var a=u.hc();u.oc("dataFields",a.indexingForm.getAvailableFields())}}function qh(t,e){if(1&t&&u.Rb(0,"app-field-list",32),2&t){var a=u.hc();u.oc("dataCustomFields",a.indexingForm.getAvailableCustomFields())}}var Kh,Jh=((Kh=function(){function t(e,a,n,i,o,r,c,l){_classCallCheck(this,t),this.translate=e,this.http=a,this.route=n,this.router=i,this.notify=o,this.dialog=r,this.headerService=c,this.appService=l,this.loading=!0,this.indexingModel={id:0,label:"",category:"incoming",default:!1,owner:0,private:!1},this.indexingModelsCustomFields=[],this.creationMode=!0}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.route.params.subscribe((function(e){void 0===e.id?(t.creationMode=!0,t.headerService.setHeader(t.translate.instant("lang.indexingModelCreation")),t.http.get("../rest/categories").pipe(Object(d.a)((function(e){t.categoriesList=e.categories})),Object(d.a)((function(e){t.loading=!1,setTimeout((function(){t.indexingForm.changeCategory(t.indexingModel.category)}),0)})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(X.of)(!1)}))).subscribe(),t.indexingModelClone=JSON.parse(JSON.stringify(t.indexingModel))):(t.creationMode=!1,t.http.get("../rest/indexingModels/"+e.id).pipe(Object(d.a)((function(e){t.indexingModel=e.indexingModel,t.headerService.setHeader(t.translate.instant("lang.indexingModelModification"),t.indexingModel.label),t.indexingModelClone=JSON.parse(JSON.stringify(t.indexingModel))})),Object(Y.a)((function(){return t.http.get("../rest/categories")})),Object(d.a)((function(e){t.categoriesList=e.categories})),Object(Dt.a)((function(){return t.loading=!1})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(X.of)(!1)}))).subscribe())}))}},{key:"onSubmit",value:function(){var t=this,e=this.indexingForm.getDatas();e.forEach((function(t,a){e[a].default_value=["string","integer","date"].indexOf(e[a].type)>-1&&e[a].SQLMode?null:e[a].default_value,delete e[a].event,delete e[a].label,delete e[a].system,delete e[a].type,delete e[a].values})),this.indexingModel.fields=e,this.creationMode?this.http.post("../rest/indexingModels",this.indexingModel).pipe(Object(d.a)((function(e){t.indexingForm.setModification(),t.setModification(),t.router.navigate(["/administration/indexingModels"]),t.notify.success(t.translate.instant("lang.indexingModelAdded"))})),Object(Dt.a)((function(){return t.loading=!1})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(X.of)(!1)}))).subscribe():this.http.put("../rest/indexingModels/"+this.indexingModel.id,this.indexingModel).pipe(Object(d.a)((function(e){t.indexingForm.setModification(),t.setModification(),t.router.navigate(["/administration/indexingModels"]),t.notify.success(t.translate.instant("lang.indexingModelUpdated"))})),Object(Dt.a)((function(){return t.loading=!1})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"isModified",value:function(){return JSON.stringify(this.indexingModel)!==JSON.stringify(this.indexingModelClone)}},{key:"setModification",value:function(){this.indexingModelClone=JSON.parse(JSON.stringify(this.indexingModel))}},{key:"changeCategory",value:function(t){this.indexingForm.changeCategory(t.value)}}]),t}()).\u0275fac=function(t){return new(t||Kh)(u.Qb(p.e),u.Qb(f.b),u.Qb(o.a),u.Qb(o.c),u.Qb(y.a),u.Qb(N.b),u.Qb(m.a),u.Qb(g.a))},Kh.\u0275cmp=u.Kb({type:Kh,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc($h,!0),u.Xc(Nh,!0)),2&t&&(u.yc(a=u.ec())&&(e.sidenavRight=a.first),u.yc(a=u.ec())&&(e.indexingForm=a.first))},features:[u.Cb([g.a,T.a])],decls:20,vars:14,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end","opened","",1,"col-md-4","col-sm-12",3,"mode","fixedInViewport"],["snav2",""],[3,"label"],[3,"dataFields",4,"ngIf"],[3,"dataCustomFields",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[2,"display","flex"],["name","category","required","",3,"ngModel","placeholder","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[2,"flex","1"],["appearance","outline",1,"indexingModelLabel"],["matInput","","name","label",3,"ngModel","ngModelChange"],[1,"defaultModel"],["color","primary","name","default",3,"ngModel","ngModelChange"],[3,"indexingFormId","admin"],["indexingForm",""],[1,"col-md-12","text-center"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"],[3,"dataFields"],[3,"dataCustomFields"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Wb(1,"mat-sidenav-content"),u.Wb(2,"div",1),u.Wb(3,"div",2),u.Wb(4,"div",3),u.Rb(5,"header-left"),u.Vb(),u.Wb(6,"div",4),u.Rb(7,"header-right"),u.Vb(),u.Vb(),u.Rb(8,"div",5),u.Vb(),u.Wb(9,"div",6),u.Wb(10,"div",7),u.Oc(11,Hh,2,0,"div",8),u.Oc(12,Xh,26,19,"mat-card",9),u.Vb(),u.Vb(),u.Vb(),u.Wb(13,"mat-sidenav",10,11),u.Wb(15,"mat-tab-group"),u.Wb(16,"mat-tab",12),u.Oc(17,Gh,1,1,"app-field-list",13),u.Vb(),u.Wb(18,"mat-tab",12),u.Oc(19,qh,1,1,"app-field-list",14),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(3),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading),u.Db(1),u.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode()),u.Db(3),u.oc("label",e.translate.instant("lang.availableFields")),u.Db(1),u.oc("ngIf",void 0!==e.indexingForm),u.Db(1),u.oc("label",e.translate.instant("lang.availableCustomFields")),u.Db(1),u.oc("ngIf",void 0!==e.indexingForm))},directives:[C.e,C.f,x.a,W.a,O.t,C.d,Ee.c,Ee.a,w.c,I.a,S.c,S.g,it.a,c.F,c.u,c.x,O.s,k.b,c.d,at.a,Uh.a,R.b,j.p,zh.a],pipes:[p.d],styles:[".indexingModelLabel[_ngcontent-%COMP%]    .mat-form-field-wrapper{padding:0}.defaultModel[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding-left:10px}",".banner[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:30px;border-radius:20px;border:1px solid #ccc;position:relative;padding:20px;width:100%}.banner[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;max-width:85%;text-overflow:ellipsis;z-index:1;font-size:20px;font-weight:700;letter-spacing:2px;position:absolute;top:-18px;left:20px;padding:0;margin:0;color:#135f7f}.banner[_ngcontent-%COMP%]   .title-divider[_ngcontent-%COMP%]{position:absolute;width:99%;z-index:-1;top:17px;background:#fff;height:1px}.banner[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:50%;padding-right:10px}.banner[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{font-size:16px}.fieldRow[_ngcontent-%COMP%]{display:flex;padding-top:10px;padding-bottom:10px}.fieldLabel[_ngcontent-%COMP%]{color:#4a4a4a}.fieldLabel[_ngcontent-%COMP%]   .cdk-drag-handle[_ngcontent-%COMP%]{margin-right:10px}.fieldState[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px;width:40px;justify-content:center;align-items:normal!important;padding-top:15px}.fieldState[_ngcontent-%COMP%]   .fieldRequired[_ngcontent-%COMP%]{font-size:5px;color:#135f7f}.fieldState[_ngcontent-%COMP%]   .fieldError[_ngcontent-%COMP%]{font-size:15px;color:#f99830}.fieldState[_ngcontent-%COMP%]   .fieldFull[_ngcontent-%COMP%]{font-size:15px;color:green}.fieldInput[_ngcontent-%COMP%]{position:relative}.fieldInput[_ngcontent-%COMP%], .fieldLabel[_ngcontent-%COMP%]{font-size:13px;flex:1}@media (max-width:768px){.fieldInput[_ngcontent-%COMP%], .fieldLabel[_ngcontent-%COMP%]{font-size:1em}}.fieldInput[_ngcontent-%COMP%], .fieldLabel[_ngcontent-%COMP%], .fieldState[_ngcontent-%COMP%]{align-items:center;display:flex}.input-form[_ngcontent-%COMP%]{font-size:13px;color:#666;width:500px}.input-form[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{color:#135f7f;padding-left:20px}.input-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.input-form[_ngcontent-%COMP%]    .mat-select-value-text{padding-left:20px;color:#135f7f}.input-form[_ngcontent-%COMP%]    .mat-form-field-label{top:15px;left:20px}.input-form[_ngcontent-%COMP%]    .mat-form-field-infix{display:flex;padding-top:0;padding-bottom:5px}.input-form[_ngcontent-%COMP%]    .mat-form-field-label-wrapper{top:-13px}.input-form[_ngcontent-%COMP%]    .mat-form-field-flex{background:#fff;height:40px;border-radius:10px;border:1px solid #135f7f}.input-form[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.input-form[_ngcontent-%COMP%]    .mat-form-field-suffix{margin-right:20px}.input-form[_ngcontent-%COMP%]    .mat-select-arrow-wrapper{padding-right:20px}.input-form[_ngcontent-%COMP%]    .mat-list-option{color:rgba(0,0,0,.54)}.input-form[_ngcontent-%COMP%]    .mat-form-field-wrapper{padding:0}.input-form[_ngcontent-%COMP%]    .mat-datepicker-toggle-default-icon{height:auto}.input-form.search-select[_ngcontent-%COMP%]    .mat-form-field-label-wrapper{top:-15px}.input-form.input-date[_ngcontent-%COMP%]    .mat-form-field-flex{align-items:center}.input-form.input-date[_ngcontent-%COMP%]    .mat-date-range-input-start-wrapper{flex:1}.input-form.input-date[_ngcontent-%COMP%]    .mat-date-range-input-inner{color:#135f7f}.input-form-filled[_ngcontent-%COMP%]{color:#fff;width:500px;transition:all .1s}.input-form-filled[_ngcontent-%COMP%]:hover    .mat-form-field-flex, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-form-field-flex{background:#fff!important;border:1px solid #fff!important;color:#135f7f!important;transition:all .1s}.input-form-filled[_ngcontent-%COMP%]:hover    .mat-form-field-label, .input-form-filled[_ngcontent-%COMP%]:hover    .mat-select-placeholder, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-form-field-label, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-select-placeholder{color:#135f7f!important}.input-form-filled[_ngcontent-%COMP%]:hover    .mat-select-arrow, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-select-arrow{color:rgba(19,95,127,.54)}.input-form-filled[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{color:#135f7f;padding-left:20px}.input-form-filled[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-select-value{text-align:left;font-weight:400}.input-form-filled[_ngcontent-%COMP%]    .mat-select-value-text{padding-left:20px;color:#fff}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-label{color:#fff;left:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-infix{padding-bottom:15px}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-flex{background:#135f7f;border-radius:30px;border:1px solid #fff}.input-form-filled[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-suffix{margin-right:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-select-arrow-wrapper{padding-right:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-select-arrow{color:hsla(0,0%,100%,.54)}.input-form-filled[_ngcontent-%COMP%]    .mat-select-placeholder{color:#fff}.input-form-filled[_ngcontent-%COMP%]    .mat-list-option{color:rgba(0,0,0,.54)}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-wrapper{padding:0}.input-form-filled[_ngcontent-%COMP%]   textarea.cdk-textarea-autosize-measuring[_ngcontent-%COMP%]{padding:4px 0!important}.input-form-filled[_ngcontent-%COMP%]    .mat-datepicker-toggle-default-icon{height:auto}.input-form.mat-form-field-disabled[_ngcontent-%COMP%]    .mat-input-element{cursor:not-allowed;padding-left:20px}.input-form.mat-form-field-disabled[_ngcontent-%COMP%]    .mat-form-field-flex{cursor:not-allowed;border:1px dashed #353232}.opt-group[_ngcontent-%COMP%]{font-weight:700}.smallInput[_ngcontent-%COMP%]{font-size:11px;padding-left:20px;padding-right:20px}.smallInput[_ngcontent-%COMP%]    .mat-form-field-infix{padding:0 0 5px}.button-form-primary[_ngcontent-%COMP%]{background:#fff;border:1px solid #135f7f;color:#135f7f;border-radius:30px;padding-left:20px;padding-right:20px;width:240px;height:45px;transition:all .1s}@media (max-width:768px){.button-form-primary[_ngcontent-%COMP%]{width:auto}}.button-form-primary[_ngcontent-%COMP%]:hover, .button-form-primary[aria-expanded=true][_ngcontent-%COMP%]{background:#135f7f!important;border:1px solid #fff!important;color:#fff!important;transition:all .1s}.button-form-primary[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;align-items:center;justify-content:center;width:100%}.button-form-primary[_ngcontent-%COMP%]    .mat-button-wrapper .menu-label{display:flex;flex:1;overflow:hidden;text-overflow:ellipsis;margin-right:10px}.button-form-primary[_ngcontent-%COMP%]    .mat-button-wrapper .menu-icon{display:flex}.button-form-primary-filled[_ngcontent-%COMP%]{background:#135f7f;border:1px solid #fff;color:#fff;border-radius:30px;padding-left:20px;padding-right:20px;width:240px;height:45px;transition:all .1s}@media (max-width:768px){.button-form-primary-filled[_ngcontent-%COMP%]{width:auto}}.button-form-primary-filled[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;align-items:center;justify-content:center;width:100%}.button-form-primary-filled[_ngcontent-%COMP%]    .mat-button-wrapper .menu-label{display:flex;flex:1;overflow:hidden;text-overflow:ellipsis;margin-right:10px}.button-form-primary-filled[_ngcontent-%COMP%]    .mat-button-wrapper .menu-icon{display:flex}.button-form-primary-alt[_ngcontent-%COMP%]{font-size:13px;background:#135f7f;border:1px solid #fff;color:#fff;border-radius:30px;padding:5px 20px;width:240px;transition:all .1s}@media (max-width:768px){.button-form-primary-alt[_ngcontent-%COMP%]{font-size:1em}}.button-form-primary-alt[_ngcontent-%COMP%]:hover, .button-form-primary-alt[aria-expanded=true][_ngcontent-%COMP%]{background:#fff!important;border:1px solid #fff!important;color:#135f7f!important;transition:all .1s}.button-form-primary-alt[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;align-items:center;justify-content:center;width:100%}.button-form-primary-alt[_ngcontent-%COMP%]    .mat-button-wrapper .menu-label{display:flex;flex:1}.button-form-primary-alt[_ngcontent-%COMP%]    .mat-button-wrapper .menu-icon{display:flex}.button-form-primary[aria-expanded=true][_ngcontent-%COMP%]{color:#135f7f;background:#fff;transition:all .1s;border:1px solid #135f7f}.button-form[_ngcontent-%COMP%]{background:#fff;color:#135f7f;border-radius:30px;padding:5px 20px;width:240px;transition:all .1s}.button-form[aria-expanded=true][_ngcontent-%COMP%]{transition:all .1s;border-bottom-left-radius:0;border-bottom-right-radius:0;border-top-left-radius:30px;border-top-right-radius:30px} .menuForm{width:240px;border-radius:30px;border:1px solid #fff;min-height:auto} .menuForm .mat-menu-content{padding-top:0;padding-bottom:0} .menuForm .mat-menu-content .mat-menu-item{transition:all .1s;font-size:13px;color:#666}@media (max-width:768px){ .menuForm .mat-menu-content .mat-menu-item{font-size:1em}} .menuForm .mat-menu-content .mat-menu-item:hover{transition:all .1s;color:#fff;background:#1a80ab} .parametersFieldsMenu{min-height:auto}.div-list[_ngcontent-%COMP%]{padding:0;max-height:150px;overflow:auto}.div-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{font-size:13px}@media (max-width:768px){.div-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{font-size:1em}}.checkbox-form[_ngcontent-%COMP%]{width:100%;padding:0;border:1px solid #135f7f;border-radius:30px;overflow:hidden}.checkbox-selected-list[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:center}.checkbox-selected-list[_ngcontent-%COMP%]    .mat-chip-list-wrapper{justify-content:center}.checkbox-selected-list[_ngcontent-%COMP%]   .mat-chip[_ngcontent-%COMP%]{font-size:13px}@media (max-width:768px){.checkbox-selected-list[_ngcontent-%COMP%]   .mat-chip[_ngcontent-%COMP%]{font-size:1em}}.radio-form[_ngcontent-%COMP%]{padding-left:20px;display:grid;grid-template-columns:repeat(2,1fr);width:100%}.radio-form[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]{flex:1}.radio-form[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]    .mat-radio-label-content{font-weight:400;color:rgba(0,0,0,.54)}.radio-form[_ngcontent-%COMP%]   .mat-radio-disabled[_ngcontent-%COMP%]{opacity:.5}.input-radio[_ngcontent-%COMP%]    .mat-form-field-infix{overflow:auto;padding-top:0}.input-radio[_ngcontent-%COMP%]    .mat-form-field-flex{height:auto}.input-radio[_ngcontent-%COMP%]    .mat-form-field-label{top:0;font-size:12px}.disabled[_ngcontent-%COMP%]{opacity:.2}.customFieldRow[_ngcontent-%COMP%]{display:flex;padding-top:20px;padding-bottom:20px}.customFieldDrag[_ngcontent-%COMP%]{cursor:move;width:50px;display:flex;align-items:center;justify-content:center}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drag-preview[_ngcontent-%COMP%]{background:#fff;box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.indexingModelsCustomFieldsList.cdk-drop-list-dragging[_ngcontent-%COMP%]   .indexingModelsCustomFieldsList[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.advancedInput[_ngcontent-%COMP%]{flex-direction:column}.noMandatory[_ngcontent-%COMP%]{visibility:hidden}.checkboxInput[_ngcontent-%COMP%]{display:block}.categoryLabel[_ngcontent-%COMP%]{letter-spacing:1px;font-size:13px;color:#135f7f;font-weight:700}@media (max-width:768px){.categoryLabel[_ngcontent-%COMP%]{font-size:1em}}.textareaInput[_ngcontent-%COMP%]    .mat-form-field{line-height:normal}.textareaInput[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{padding:0;margin:0;color:#135f7f}.textareaInput[_ngcontent-%COMP%]    .mat-form-field-flex{padding-left:20px;height:auto!important;min-height:40px!important}.textareaInput[_ngcontent-%COMP%]    .mat-form-field-label{left:0}"]}),Kh);function Yh(t,e){if(1&t&&(u.Wb(0,"li"),u.Wb(1,"b"),u.Qc(2),u.Vb(),u.Qc(3),u.ic(4,"translate"),u.Wb(5,"b"),u.Qc(6),u.Vb(),u.Vb()),2&t){var a=e.$implicit;u.Db(2),u.Rc(a.count),u.Db(1),u.Sc(" ",u.jc(4,3,"lang.mailsWithStatus")," "),u.Db(3),u.Rc(a.status)}}function Zh(t,e){if(1&t&&(u.Wb(0,"mat-option",14),u.Qc(1),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.oc("value",a.id)("disabled",a.id===n.mainIndexingModel.id),u.Db(1),u.Sc(" ",a.label," ")}}function tv(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div"),u.Wb(1,"mat-form-field",11),u.Wb(2,"mat-select",12),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().modelIds=t}))("selectionChange",(function(t){return u.Dc(a),u.hc().changeModel(t)})),u.Oc(3,Zh,2,3,"mat-option",13),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc();u.Db(2),u.oc("ngModel",n.modelIds)("placeholder",n.translate.instant("lang.indexingModel")),u.Db(1),u.oc("ngForOf",n.indexingModels)}}function ev(t,e){if(1&t&&(u.Wb(0,"li"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.label," ")}}function av(t,e){if(1&t&&(u.Wb(0,"div",15),u.Qc(1),u.ic(2,"translate"),u.Wb(3,"ul"),u.Oc(4,ev,2,1,"li",4),u.Vb(),u.Qc(5),u.ic(6,"translate"),u.Vb()),2&t){var a=u.hc();u.Db(1),u.Sc(" ",u.jc(2,3,"lang.indexingModelFieldsReset")," "),u.Db(3),u.oc("ngForOf",a.resetFields),u.Db(1),u.Sc(" ",u.jc(6,5,"lang.confirmAction")," ")}}var nv,iv=((nv=function(){function t(e,a,n,i,o,r){_classCallCheck(this,t),this.translate=e,this.data=a,this.dialogRef=n,this.http=i,this.notify=o,this.sortPipe=r,this.indexingModels=[],this.modelIds=[],this.resetFields=[],this.statuses=[],this.customFields=[],this.availableFields=[{identifier:"doctype",label:this.translate.instant("lang.doctype")},{identifier:"subject",label:this.translate.instant("lang.subject")},{identifier:"recipients",label:this.translate.instant("lang.getRecipients")},{identifier:"priority",label:this.translate.instant("lang.priority")},{identifier:"confidentiality",label:this.translate.instant("lang.confidential")},{identifier:"initiator",label:this.translate.instant("lang.initiatorEntityAlt")},{identifier:"departureDate",label:this.translate.instant("lang.departureDate")},{identifier:"processLimitDate",label:this.translate.instant("lang.processLimitDate")},{identifier:"tags",label:this.translate.instant("lang.tags")},{identifier:"senders",label:this.translate.instant("lang.getSenders")},{identifier:"destination",label:this.translate.instant("lang.destination")},{identifier:"folders",label:this.translate.instant("lang.folders")},{identifier:"documentDate",label:this.translate.instant("lang.docDate")},{identifier:"arrivalDate",label:this.translate.instant("lang.arrivalDate")}],this.loading=!1,this.mainIndexingModel=a.indexingModel}return _createClass(t,[{key:"ngOnInit",value:function(){return Object(yt.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.loadIndexingModels(),this.loadStatuses(),this.loadCustomFields(),this.loadIndexingModelFields();case 1:case"end":return t.stop()}}),t,this)})))}},{key:"loadIndexingModels",value:function(){var t=this;this.http.get("../rest/indexingModels").pipe(Object(s.a)((function(t){return t.indexingModels.filter((function(t){return!1===t.private}))})),Object(d.a)((function(e){t.indexingModels=e,t.sortPipe.transform(t.indexingModels,"label"),t.modelIds=t.indexingModels.map((function(t){return t.id}))})),Object(Dt.a)((function(){return t.loading=!1})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"loadIndexingModelFields",value:function(){var t=this;this.http.get("../rest/indexingModels/"+this.mainIndexingModel.id).pipe(Object(d.a)((function(e){t.mainIndexingModelFields=e.indexingModel.fields,t.mainIndexingModelFields=t.mainIndexingModelFields.map((function(e){var a=t.availableFields.find((function(t){return t.identifier===e.identifier}));return e.label=void 0===a?t.translate.instant("lang.undefined"):a.label,e}))})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"loadStatuses",value:function(){var t=this;this.http.get("../rest/statuses").pipe(Object(d.a)((function(e){t.statuses=e.statuses,t.mainIndexingModel.used.forEach((function(e){var a=t.statuses.find((function(t){return t.id===e.status}));void 0!==a&&(e.status=a.label_status)}))})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"loadCustomFields",value:function(){var t=this;this.http.get("../rest/customFields").pipe(Object(d.a)((function(e){e.customFields=e.customFields.map((function(t){return{identifier:"indexingCustomField_"+t.id,label:t.label}})),e.customFields.forEach((function(e){t.availableFields.push(e)})),t.sortPipe.transform(t.availableFields,"label"),t.loadIndexingModelFields()})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"changeModel",value:function(t){var e=this;this.selectedModelId=t.value,this.http.get("../rest/indexingModels/"+this.selectedModelId).pipe(Object(d.a)((function(t){e.selectedModelFields=t.indexingModel.fields,e.resetFields=e.mainIndexingModelFields.filter((function(t){return void 0===e.selectedModelFields.find((function(e){return e.identifier===t.identifier}))})),e.sortPipe.transform(e.resetFields,"label")})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe()}},{key:"onSubmit",value:function(){var t=this;this.http.request("DELETE","../rest/indexingModels/"+this.mainIndexingModel.id,{body:{targetId:this.selectedModelId}}).pipe(Object(d.a)((function(){t.notify.success(t.translate.instant("lang.indexingModelDeleted")),t.dialogRef.close("ok")})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}}]),t}()).\u0275fac=function(t){return new(t||nv)(u.Qb(p.e),u.Qb(N.a),u.Qb(N.h),u.Qb(f.b),u.Qb(y.a),u.Qb(T.a))},nv.\u0275cmp=u.Kb({type:nv,selectors:[["ng-component"]],features:[u.Cb([T.a])],decls:22,vars:19,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"alert-message","alert-message-info"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","alert-message alert-message-danger",4,"ngIf"],[1,"divider-modal"],["mat-dialog-actions",""],["color","primary","mat-raised-button","",1,"actions",3,"disabled","click"],["color","","mat-raised-button","",1,"actions",3,"click"],[2,"padding","10px","margin-top","15px"],["name","model","required","",3,"ngModel","placeholder","ngModelChange","selectionChange"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"],[1,"alert-message","alert-message-danger"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"h1",1),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Qc(6),u.ic(7,"translate"),u.Wb(8,"ul"),u.Oc(9,Yh,7,5,"li",4),u.Vb(),u.Qc(10),u.ic(11,"translate"),u.Vb(),u.Oc(12,tv,4,3,"div",5),u.Oc(13,av,7,7,"div",6),u.Rb(14,"span",7),u.Wb(15,"div",8),u.Wb(16,"button",9),u.dc("click",(function(){return e.onSubmit()})),u.Qc(17),u.ic(18,"translate"),u.Vb(),u.Wb(19,"button",10),u.dc("click",(function(){return e.dialogRef.close("")})),u.Qc(20),u.ic(21,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(2),u.Rc(u.jc(3,9,"lang.indexingModelReassign")),u.Db(4),u.Sc(" ",u.jc(7,11,"lang.indexingModelUsedBy")," "),u.Db(3),u.oc("ngForOf",e.mainIndexingModel.used),u.Db(1),u.Sc(" ",u.jc(11,13,"lang.indexingModelReplaceToDelete")," "),u.Db(2),u.oc("ngIf",!e.loading),u.Db(1),u.oc("ngIf",0!==e.resetFields.length),u.Db(3),u.oc("disabled",void 0===e.selectedModelId),u.Db(1),u.Rc(u.jc(18,15,"lang.validate")),u.Db(3),u.Rc(u.jc(21,17,"lang.cancel")))},directives:[N.i,N.f,O.s,O.t,N.c,R.b,S.c,it.a,c.F,c.u,c.x,j.p],pipes:[p.d],styles:[".alert-message-info[_ngcontent-%COMP%]{margin:0;font-size:16px}"]}),nv),ov=["adminMenuTemplate"];function rv(t,e){1&t&&(u.Wb(0,"mat-nav-list"),u.Wb(1,"h3",11),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"a",12),u.Rb(5,"mat-icon",13),u.Wb(6,"p",14),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(2),u.Rc(u.jc(3,2,"lang.actions")),u.Db(5),u.Sc(" ",u.jc(8,4,"lang.add")," "))}function cv(t,e){1&t&&(u.Wb(0,"div",15),u.Rb(1,"mat-spinner",16),u.Vb())}function lv(t,e){1&t&&(u.Wb(0,"mat-header-cell",41),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.technicalId")))}function sv(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.id," ")}}function dv(t,e){1&t&&(u.Wb(0,"mat-header-cell",41),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.category_id")))}function bv(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",u.jc(2,1,"lang."+a.category)," ")}}function uv(t,e){1&t&&(u.Wb(0,"mat-header-cell",42),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.label")))}function pv(t,e){if(1&t&&(u.Wb(0,"mat-cell",43),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.label," ")}}function fv(t,e){1&t&&(u.Wb(0,"mat-header-cell",41),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.perimeter")))}var mv=function(t,e){return{dataLabelWarn:t,dataLabelPrimary:e}};function gv(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Wb(1,"span",44),u.Qc(2),u.Vb(),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.Db(1),u.oc("ngClass",u.wc(2,mv,a.private,!a.private)),u.Db(1),u.Rc(n.translate.instant(a.private?"lang.private":"lang.public"))}}function hv(t,e){1&t&&(u.Wb(0,"mat-header-cell",41),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.default")))}function vv(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Wb(1,"span",44),u.Qc(2),u.Vb(),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.Db(1),u.oc("ngClass",u.wc(2,mv,!a.default,a.default)),u.Db(1),u.Rc(n.translate.instant(a.default?"lang.yes":"lang.no"))}}function yv(t,e){1&t&&(u.Wb(0,"mat-header-cell",41),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.status")))}function Dv(t,e){1&t&&(u.Wb(0,"span",47),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.active")))}function Vv(t,e){1&t&&(u.Wb(0,"span",48),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.inactive")))}function Cv(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Oc(1,Dv,3,3,"span",45),u.Oc(2,Vv,3,3,"span",46),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.oc("ngIf",a.enabled),u.Db(1),u.oc("ngIf",!a.enabled)}}function xv(t,e){1&t&&u.Rb(0,"mat-header-cell")}function Mv(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",54),u.dc("click",(function(t){u.Dc(a);var e=u.hc().$implicit,n=u.hc(2);return t.stopPropagation(),n.disableIndexingModel(e)})),u.ic(1,"translate"),u.Rb(2,"mat-icon",55),u.Vb()}if(2&t){var n=u.hc().$implicit;u.pc("matTooltip",u.jc(1,2,"lang.suspend")),u.oc("disabled",n.default)}}function Wv(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",56),u.dc("click",(function(t){u.Dc(a);var e=u.hc().$implicit,n=u.hc(2);return t.stopPropagation(),n.enableIndexingModel(e)})),u.ic(1,"translate"),u.Rb(2,"mat-icon",57),u.Vb()}2&t&&u.pc("matTooltip",u.jc(1,1,"lang.authorize"))}function Ov(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-cell",49),u.Oc(1,Mv,3,4,"button",50),u.Oc(2,Wv,3,3,"button",51),u.Wb(3,"button",52),u.dc("click",(function(t){u.Dc(a);var n=e.$implicit,i=u.hc(2);return t.stopPropagation(),i.delete(n)})),u.ic(4,"translate"),u.Rb(5,"mat-icon",53),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit;u.Db(1),u.oc("ngIf",n.enabled),u.Db(1),u.oc("ngIf",!n.enabled),u.Db(1),u.pc("matTooltip",u.jc(4,4,"lang.delete")),u.oc("disabled",n.default)}}function _v(t,e){1&t&&u.Rb(0,"mat-header-row")}function Sv(t,e){1&t&&(u.Rb(0,"mat-row",58),u.ic(1,"translate")),2&t&&(u.qc("routerLink","/administration/indexingModels/",e.$implicit.id,""),u.pc("matTooltip",u.jc(1,2,"lang.view")))}function kv(t,e){if(1&t&&(u.Wb(0,"mat-card",17),u.Wb(1,"div",18),u.Wb(2,"div",19),u.Wb(3,"mat-form-field"),u.Rb(4,"input",20),u.ic(5,"translate"),u.Vb(),u.Vb(),u.Wb(6,"div",19),u.Rb(7,"mat-paginator",21,22),u.Vb(),u.Vb(),u.Wb(9,"mat-table",23,24),u.Ub(11,25),u.Oc(12,lv,3,3,"mat-header-cell",26),u.Oc(13,sv,2,1,"mat-cell",27),u.Tb(),u.Ub(14,28),u.Oc(15,dv,3,3,"mat-header-cell",26),u.Oc(16,bv,3,3,"mat-cell",27),u.Tb(),u.Ub(17,29),u.Oc(18,uv,3,3,"mat-header-cell",30),u.Oc(19,pv,2,1,"mat-cell",31),u.Tb(),u.Ub(20,32),u.Oc(21,fv,3,3,"mat-header-cell",26),u.Oc(22,gv,3,5,"mat-cell",27),u.Tb(),u.Ub(23,33),u.Oc(24,hv,3,3,"mat-header-cell",26),u.Oc(25,vv,3,5,"mat-cell",27),u.Tb(),u.Ub(26,34),u.Oc(27,yv,3,3,"mat-header-cell",26),u.Oc(28,Cv,3,2,"mat-cell",27),u.Tb(),u.Ub(29,35),u.Oc(30,xv,1,0,"mat-header-cell",36),u.Oc(31,Ov,6,6,"mat-cell",37),u.Tb(),u.Oc(32,_v,1,0,"mat-header-row",38),u.Oc(33,Sv,2,4,"mat-row",39),u.Vb(),u.Wb(34,"div",40),u.Qc(35),u.ic(36,"translate"),u.Vb(),u.Vb()),2&t){var a=u.hc();u.Db(4),u.pc("placeholder",u.jc(5,10,"lang.filterBy")),u.oc("formControl",a.adminService.getFilterField()),u.Db(3),u.oc("length",100)("hidePageSize",!0)("pageSize",10),u.Db(2),u.oc("dataSource",a.adminService.getDataSource()),u.Db(23),u.oc("matHeaderRowDef",a.displayedColumns),u.Db(1),u.oc("matRowDefColumns",a.displayedColumns),u.Db(2),u.Tc(" ",a.indexingModels.length," ",u.jc(36,12,"lang.indexingModels"),"")}}var wv,Iv=((wv=function(){function t(e,a,n,i,o,r,c,l,s){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.headerService=i,this.appService=o,this.dialog=r,this.functions=c,this.adminService=l,this.viewContainerRef=s,this.search=null,this.indexingModels=[],this.loading=!1,this.displayedColumns=["id","category","label","private","default","enabled","actions"],this.filterColumns=["id","label"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/indexingModels?showDisabled=true").pipe(Object(s.a)((function(t){return t.indexingModels.filter((function(t){return!1===t.private}))})),Object(d.a)((function(e){t.indexingModels=e,t.headerService.setHeader(t.translate.instant("lang.administration")+" "+t.translate.instant("lang.indexingModels")),setTimeout((function(){t.adminService.setDataSource("admin_indexing_models",t.indexingModels,t.sort,t.paginator,t.filterColumns)}),0)})),Object(Dt.a)((function(){return t.loading=!1})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"delete",value:function(t){var e=this;0===t.used.length?(this.dialogRef=this.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete"),msg:this.translate.instant("lang.confirmAction")}}),this.dialogRef.afterClosed().pipe(Object(J.a)((function(t){return"ok"===t})),Object(Y.a)((function(){return e.http.delete("../rest/indexingModels/"+t.id)})),Object(d.a)((function(){for(var a in e.indexingModels)e.indexingModels[a].id===t.id&&e.indexingModels.splice(Number(a),1);e.adminService.setDataSource("admin_indexing_models",e.indexingModels,e.sort,e.paginator,e.filterColumns),e.notify.success(e.translate.instant("lang.indexingModelDeleted"))})),Object(b.a)((function(t){return e.notify.handleSoftErrors(t),Object(X.of)(!1)}))).subscribe()):(this.dialogRef=this.dialog.open(iv,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete"),msg:this.translate.instant("lang.confirmAction"),indexingModel:t}}),this.dialogRef.afterClosed().pipe(Object(J.a)((function(t){return"ok"===t})),Object(d.a)((function(){for(var a in e.indexingModels)e.indexingModels[a].id===t.id&&e.indexingModels.splice(Number(a),1);e.adminService.setDataSource("admin_indexing_models",e.indexingModels,e.sort,e.paginator,e.filterColumns)})),Object(b.a)((function(t){return e.notify.handleSoftErrors(t),Object(X.of)(!1)}))).subscribe())}},{key:"disableIndexingModel",value:function(t){var e=this;this.dialogRef=this.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.disable"),msg:this.translate.instant("lang.confirmAction")}}),this.dialogRef.afterClosed().pipe(Object(J.a)((function(t){return"ok"===t})),Object(Y.a)((function(){return e.http.request("PUT","../rest/indexingModels/"+t.id+"/disable")})),Object(d.a)((function(a){for(var n in e.indexingModels)e.indexingModels[n].id===t.id&&(e.indexingModels[n].enabled=!1);e.notify.success(e.translate.instant("lang.indexingModelDisabled"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe()}},{key:"enableIndexingModel",value:function(t){var e=this;this.dialogRef=this.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.enable"),msg:this.translate.instant("lang.confirmAction")}}),this.dialogRef.afterClosed().pipe(Object(J.a)((function(t){return"ok"===t})),Object(Y.a)((function(){return e.http.request("PUT","../rest/indexingModels/"+t.id+"/enable")})),Object(d.a)((function(a){for(var n in e.indexingModels)e.indexingModels[n].id===t.id&&(e.indexingModels[n].enabled=!0);e.notify.success(e.translate.instant("lang.indexingModelEnabled"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe()}}]),t}()).\u0275fac=function(t){return new(t||wv)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a),u.Qb(N.b),u.Qb(D.a),u.Qb(jt),u.Qb(u.T))},wv.\u0275cmp=u.Kb({type:wv,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(ov,!0),u.Xc(H.a,!0),u.Xc(B.a,!0)),2&t&&(u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.paginator=a.first),u.yc(a=u.ec())&&(e.sort=a.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/indexingModels/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSortDisableClear","","matSort","",3,"dataSource"],["table",""],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","category"],["matColumnDef","label"],["mat-sort-header","","style","flex:2",4,"matHeaderCellDef"],["style","flex:2",4,"matCellDef"],["matColumnDef","private"],["matColumnDef","default"],["matColumnDef","enabled"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header",""],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],[1,"label",3,"ngClass"],["class","label dataLabelPrimary",4,"ngIf"],["class","label dataLabelWarn",4,"ngIf"],[1,"label","dataLabelPrimary"],[1,"label","dataLabelWarn"],[2,"justify-content","flex-end"],["mat-icon-button","","color","primary",3,"matTooltip","disabled","click",4,"ngIf"],["mat-icon-button","","color","accent",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","color","warn",3,"matTooltip","disabled","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],["mat-icon-button","","color","primary",3,"matTooltip","disabled","click"],["aria-hidden","true",1,"fa","fa-pause","fa-2x"],["mat-icon-button","","color","accent",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-check","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,rv,9,6,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,cv,2,0,"div",9),u.Oc(14,kv,37,14,"mat-card",10),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading))},directives:[C.e,C.f,x.a,W.a,O.t,Rt.h,Rt.g,Rt.d,o.f,Tt.a,Rt.c,j.l,w.c,I.a,S.c,k.b,c.d,c.u,c.j,H.a,q.o,B.a,q.c,q.i,q.b,q.k,q.n,q.h,B.b,q.a,O.q,R.b,Qt.b,q.j,q.m,o.d],pipes:[p.d],styles:[".dataLabelWarn[_ngcontent-%COMP%]{color:#8e3e52}.dataLabelPrimary[_ngcontent-%COMP%]{color:#135f7f}.label[_ngcontent-%COMP%]{font-size:75%;font-weight:700}"]}),wv),jv=["listFilter"];function Rv(t,e){1&t&&(u.Wb(0,"div",32),u.Rb(1,"mat-spinner"),u.Vb())}function Tv(t,e){if(1&t&&(u.Wb(0,"mat-option",33),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a),u.Db(1),u.Sc(" ",a," ")}}function Pv(t,e){if(1&t&&(u.Wb(0,"mat-option",33),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a),u.Db(1),u.Sc(" ",a," ")}}function Qv(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",34),u.Wb(1,"mat-form-field",5),u.Wb(2,"mat-label"),u.Qc(3),u.ic(4,"translate"),u.Vb(),u.Wb(5,"mat-select",35),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().exportModel.delimiter=t})),u.ic(6,"translate"),u.Oc(7,Pv,2,2,"mat-option",7),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc();u.Db(3),u.Rc(u.jc(4,5,"lang.delimiter")),u.Db(2),u.pc("placeholder",u.jc(6,7,"lang.delimiter")),u.oc("ngModel",n.exportModel.delimiter)("disabled","csv"!=n.exportModel.format),u.Db(2),u.oc("ngForOf",n.delimiters)}}function Fv(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",36),u.Qc(1),u.Wb(2,"i",37),u.dc("click",(function(){u.Dc(a);var t=e.$implicit;return u.hc().addData(t)})),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit;u.pc("id",n.value),u.Db(1),u.Sc("",n.label," ")}}function Lv(t,e){1&t&&(u.Wb(0,"div",38),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.noDataAvailable")))}function Ev(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",36),u.Qc(1),u.Wb(2,"i",39),u.dc("click",(function(){u.Dc(a);var t=e.index;return u.hc().removeData(t)})),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit;u.pc("id",n.value),u.Db(1),u.Sc("",n.label," ")}}function Av(t,e){1&t&&(u.Wb(0,"div",38),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.noDataAvailable")))}var Uv,zv,$v=function(t){return[t]},Nv=((Uv=function(){function t(e,a,n,i,o,r,c){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.data=i,this.sortPipe=o,this.localStorage=r,this.headerService=c,this.loading=!1,this.loadingExport=!1,this.delimiters=[";",",","TAB"],this.formats=["csv"],this.exportModel={delimiter:";",format:"csv",data:[]},this.dataAvailable=[{value:"id",label:this.translate.instant("lang.id")},{value:"externalId",label:"External Id"},{value:"enabled",label:this.translate.instant("lang.status")},{value:"communicationMeans",label:this.translate.instant("lang.communicationMean")}]}return _createClass(t,[{key:"ngOnInit",value:function(){return Object(yt.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getContactFields();case 2:this.setConfiguration();case 3:case"end":return t.stop()}}),t,this)})))}},{key:"getContactFields",value:function(){var t=this;return new Promise((function(e,a){t.http.get("../rest/contactsParameters").pipe(Object(s.a)((function(e){var a=/contactCustomField_[.]*/g;return e.contactsParameters=e.contactsParameters.filter((function(t){return null===t.identifier.match(a)})).map((function(e){return{value:e.identifier,label:t.translate.instant("lang.contactsParameters_"+e.identifier)}})),e.contactsParameters})),Object(d.a)((function(e){t.dataAvailable=t.dataAvailable.concat(e)})),Object(Y.a)((function(){return t.http.get("../rest/contactsCustomFields")})),Object(s.a)((function(t){return t.customFields=t.customFields.map((function(t){return{value:"contactCustomField_"+t.id,label:t.label}})),t.customFields})),Object(d.a)((function(a){t.dataAvailable=t.dataAvailable.concat(a),t.dataAvailable=t.sortPipe.transform(t.dataAvailable,"label"),e(!0)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}))}},{key:"drop",value:function(t){var e=this;if(t.previousContainer===t.container)Object(Pn.h)(t.container.data,t.previousIndex,t.currentIndex);else{var a=t.previousIndex;if("selectedElements"===t.container.id&&(a=0,void 0!==$(".available-data .columns")[t.previousIndex])){var n=$(".available-data .columns")[t.previousIndex].id;a=this.dataAvailable.map((function(t){return t.value})).indexOf(n)}Object(Pn.i)(t.previousContainer.data,t.container.data,a,t.currentIndex);var i=this.listFilter.nativeElement.value;this.listFilter.nativeElement.value="",setTimeout((function(){e.listFilter.nativeElement.value=i}),10)}}},{key:"exportData",value:function(){var t=this;this.localStorage.save("exportContactFields_"+this.headerService.user.id,JSON.stringify(this.exportModel)),this.loadingExport=!0,this.http.put("../rest/contacts/export",this.exportModel,{responseType:"blob"}).pipe(Object(d.a)((function(e){if("text/html"!==e.type){var a,n,i,o,r=document.createElement("a");r.href=window.URL.createObjectURL(e),n=(a=new Date).getDate(),i=a.getMonth()+1,o=a.getFullYear(),n<10&&(n="0"+n),i<10&&(i="0"+i),a=n+"-"+i+"-"+o,r.setAttribute("download","export_contact_maarch_"+a+"."+t.exportModel.format.toLowerCase()),document.body.appendChild(r),r.click()}else alert(t.translate.instant("lang.tooMuchDatas"))})),Object(Dt.a)((function(){return t.loadingExport=!1})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"addData",value:function(t){var e=this,a=0;this.dataAvailable.forEach((function(e,n){e.value===t.value&&(a=n)})),Object(Pn.i)(this.dataAvailable,this.exportModel.data,a,this.exportModel.data.length);var n=this.listFilter.nativeElement.value;this.listFilter.nativeElement.value="",setTimeout((function(){e.listFilter.nativeElement.value=n}),10)}},{key:"removeData",value:function(t){Object(Pn.i)(this.exportModel.data,this.dataAvailable,t,this.dataAvailable.length),this.sortPipe.transform(this.dataAvailable,"label")}},{key:"removeAllData",value:function(){this.dataAvailable=this.dataAvailable.concat(this.exportModel.data),this.exportModel.data=[]}},{key:"addAllData",value:function(){for(this.exportModel.data=this.exportModel.data.concat(this.dataAvailable);this.dataAvailable.length>0;)this.dataAvailable.pop();this.listFilter.nativeElement.value=""}},{key:"setConfiguration",value:function(){var t=this;null!==this.localStorage.get("exportContactFields_"+this.headerService.user.id)&&(JSON.parse(this.localStorage.get("exportContactFields_"+this.headerService.user.id)).data.forEach((function(e){t.addData(e)})),this.exportModel.delimiter=JSON.parse(this.localStorage.get("exportContactFields_"+this.headerService.user.id)).delimiter)}}]),t}()).\u0275fac=function(t){return new(t||Uv)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(N.a),u.Qb(T.a),u.Qb(tt.a),u.Qb(m.a))},Uv.\u0275cmp=u.Kb({type:Uv,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&u.Kc(jv,!0),2&t&&u.yc(a=u.ec())&&(e.listFilter=a.first)},features:[u.Cb([T.a])],decls:63,vars:62,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["mat-dialog-content",""],["class","loader",4,"ngIf"],[1,"row"],["appearance","outline"],[3,"placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","col-md-9",4,"ngIf"],[3,"expanded"],[1,"col-md-12"],["appearance","outline",1,"listFilter"],["matInput","","cdkFocusInitial","",3,"placeholder"],["listFilter",""],[1,"row","exportList"],[1,"col-md-6","available-data"],[1,"title"],["color","primary",1,"fa","fa-plus-circle","removeAllDatas",3,"title","click"],["id","availableElements","cdkDropList","",1,"cdk-list",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["dataAvailableList","cdkDropList"],["class","columns","cdkDrag","",3,"id",4,"ngFor","ngForOf"],["class","noData",4,"ngIf"],[2,"display","flex","align-items","center"],[1,"fas","fa-arrow-right"],[1,"col-md-6","active-data"],["color","warn",1,"fa","fa-minus-circle","removeAllDatas",3,"title","click"],["id","selectedElements","cdkDropList","",1,"cdk-list",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["dataExportList","cdkDropList"],[1,"divider-modal"],["mat-dialog-actions","",1,"actions"],["mat-raised-button","","mat-button","","color","primary",3,"disabled","click"],["mat-raised-button","","mat-button","",3,"mat-dialog-close"],[1,"loader"],[3,"value"],[1,"col-md-9"],[3,"placeholder","ngModel","disabled","ngModelChange"],["cdkDrag","",1,"columns",3,"id"],["color","primary",1,"fa","fa-plus",2,"cursor","pointer",3,"click"],[1,"noData"],["color","warn",1,"fa","fa-minus",2,"cursor","pointer",3,"click"]],template:function(t,e){if(1&t&&(u.Wb(0,"div",0),u.Wb(1,"h1",1),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"div",2),u.Oc(5,Rv,2,0,"div",3),u.Wb(6,"div",4),u.Wb(7,"div"),u.Wb(8,"mat-form-field",5),u.Wb(9,"mat-label"),u.Qc(10),u.ic(11,"translate"),u.Vb(),u.Wb(12,"mat-select",6),u.dc("ngModelChange",(function(t){return e.exportModel.format=t})),u.ic(13,"translate"),u.Oc(14,Tv,2,2,"mat-option",7),u.Vb(),u.Vb(),u.Vb(),u.Oc(15,Qv,8,9,"div",8),u.Vb(),u.Wb(16,"mat-accordion"),u.Wb(17,"mat-expansion-panel",9),u.Wb(18,"mat-expansion-panel-header"),u.Wb(19,"mat-panel-title"),u.Qc(20),u.ic(21,"translate"),u.Vb(),u.Vb(),u.Wb(22,"div",4),u.Wb(23,"div",10),u.Wb(24,"mat-form-field",11),u.Rb(25,"input",12,13),u.ic(27,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(28,"div",14),u.Wb(29,"div",15),u.Wb(30,"h2"),u.Wb(31,"span",16),u.Qc(32),u.ic(33,"translate"),u.Vb(),u.Wb(34,"i",17),u.dc("click",(function(){return e.addAllData()})),u.ic(35,"translate"),u.Vb(),u.Vb(),u.Wb(36,"div",18,19),u.dc("cdkDropListDropped",(function(t){return e.drop(t)})),u.Oc(38,Fv,3,2,"div",20),u.ic(39,"filterList"),u.ic(40,"sortBy"),u.Oc(41,Lv,3,3,"div",21),u.Vb(),u.Vb(),u.Wb(42,"div",22),u.Rb(43,"i",23),u.Vb(),u.Wb(44,"div",24),u.Wb(45,"h2"),u.Wb(46,"span",16),u.Qc(47),u.ic(48,"translate"),u.Vb(),u.Wb(49,"i",25),u.dc("click",(function(){return e.removeAllData()})),u.ic(50,"translate"),u.Vb(),u.Vb(),u.Wb(51,"div",26,27),u.dc("cdkDropListDropped",(function(t){return e.drop(t)})),u.Oc(53,Ev,3,2,"div",20),u.Oc(54,Av,3,3,"div",21),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Rb(55,"span",28),u.Wb(56,"div",29),u.Wb(57,"button",30),u.dc("click",(function(){return e.exportData()})),u.Qc(58),u.ic(59,"translate"),u.Vb(),u.Wb(60,"button",31),u.Qc(61),u.ic(62,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t){var a=u.zc(26),n=u.zc(37),i=u.zc(52);u.Db(2),u.Rc(u.jc(3,29,"lang.exportDatas")),u.Db(3),u.oc("ngIf",e.loadingExport),u.Db(2),u.Ib("col-md-12","csv"!=e.exportModel.format)("col-md-3","csv"==e.exportModel.format),u.Db(3),u.Rc(u.jc(11,31,"lang.format")),u.Db(2),u.pc("placeholder",u.jc(13,33,"lang.format")),u.oc("ngModel",e.exportModel.format),u.Db(2),u.oc("ngForOf",e.formats),u.Db(1),u.oc("ngIf","csv"==e.exportModel.format),u.Db(2),u.oc("expanded",!0),u.Db(3),u.Sc(" ",u.jc(21,35,"lang.datasToExport")," "),u.Db(5),u.pc("placeholder",u.jc(27,37,"lang.searchDatas")),u.Db(7),u.Rc(u.jc(33,39,"lang.availableDatas")),u.Db(2),u.pc("title",u.jc(35,41,"lang.addAllData")),u.Db(2),u.oc("cdkDropListData",e.dataAvailable)("cdkDropListConnectedTo",u.vc(58,$v,i)),u.Db(2),u.oc("ngForOf",u.lc(39,43,u.kc(40,47,e.dataAvailable,"label"),a.value,"label")),u.Db(3),u.oc("ngIf",0==e.dataAvailable.length),u.Db(6),u.Rc(u.jc(48,50,"lang.chosenDatas")),u.Db(2),u.pc("title",u.jc(50,52,"lang.removeAllDatas")),u.Db(2),u.oc("cdkDropListData",e.exportModel.data)("cdkDropListConnectedTo",u.vc(60,$v,n)),u.Db(2),u.oc("ngForOf",e.exportModel.data),u.Db(1),u.oc("ngIf",0==e.exportModel.data.length),u.Db(3),u.oc("disabled",0==e.exportModel.data.length),u.Db(1),u.Rc(u.jc(59,54,"lang.toExport")),u.Db(3),u.Rc(u.jc(62,56,"lang.cancel"))}},directives:[N.i,N.f,O.t,S.c,S.g,it.a,c.u,c.x,O.s,Ae.a,Ae.c,Ae.g,Ae.h,k.b,Pn.e,N.c,R.b,N.d,w.c,j.p,Pn.a],pipes:[p.d,zn.a,T.a],styles:[".mat-dialog-container{position:relative}.mat-dialog-content[_ngcontent-%COMP%]{padding-bottom:10px;overflow-x:hidden} .mat-expansion-panel-body{padding-bottom:50px}.mat-expansion-panel-header[_ngcontent-%COMP%], .noData[_ngcontent-%COMP%]{opacity:.5}.noData[_ngcontent-%COMP%]{text-align:center}.removeAllDatas[_ngcontent-%COMP%]{float:right;font-size:14px;opacity:1;cursor:pointer;margin-right:10px}.listFilter[_ngcontent-%COMP%]{font-size:10px;margin-bottom:-20px}.exportList[_ngcontent-%COMP%]{display:flex}.exportList[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{float:left;height:20px;font-size:10px;font-weight:700;opacity:.5}.exportList[_ngcontent-%COMP%]   .cdk-list[_ngcontent-%COMP%]{height:100%}.cdk-list[_ngcontent-%COMP%]{max-width:100%;border:1px solid #ccc;display:block;border-radius:4px;max-height:310px;min-height:310px;overflow:auto}.cdk-list[_ngcontent-%COMP%], .columns[_ngcontent-%COMP%]{width:100%;background:#fff}.columns[_ngcontent-%COMP%]{height:50px;padding:20px 10px;border-bottom:1px solid #ccc;color:rgba(0,0,0,.87);display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;font-size:14px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.columns[_ngcontent-%COMP%]:last-child{border:none}.cdk-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .columns[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.actions[_ngcontent-%COMP%], .loader[_ngcontent-%COMP%]{justify-content:center}.loader[_ngcontent-%COMP%]{position:absolute;display:flex;width:100%;left:0;top:0;height:100%;background:hsla(0,0%,100%,.6);z-index:1;align-items:center}"]}),Uv),Hv=a("NpuA"),Bv=((zv=function(){function t(){_classCallCheck(this,t),this._papa=Hv}return _createClass(t,[{key:"parse",value:function(t,e){return this._papa.parse(t,e)}},{key:"unparse",value:function(t,e){return this._papa.unparse(t,e)}},{key:"setLocalChunkSize",value:function(t){this._papa.LocalChunkSize=t}},{key:"setRemoteChunkSize",value:function(t){this._papa.RemoteChunkSize=t}},{key:"setDefaultDelimiter",value:function(t){this._papa.DefaultDelimiter=t}},{key:"badDelimiters",get:function(){return this._papa.BAD_DELIMITERS}},{key:"recordSeparator",get:function(){return this._papa.RECORD_SEP}},{key:"unitSeparator",get:function(){return this._papa.UNIT_SEP}},{key:"workersSupported",get:function(){return this._papa.WORKERS_SUPPORTED}}]),t}()).\u0275fac=function(t){return new(t||zv)},zv.\u0275prov=Object(u.Mb)({factory:function(){return new zv},token:zv,providedIn:"root"}),zv);function Xv(t,e){1&t&&(u.Ub(0),u.Wb(1,"div",18),u.Rb(2,"mat-spinner"),u.Vb(),u.Tb())}function Gv(t,e){if(1&t&&(u.Wb(0,"mat-option",34),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a),u.Db(1),u.Sc(" ","\t"===a?"TAB":a," ")}}function qv(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",30),u.dc("click",(function(){return u.Dc(a),u.hc(),u.zc(1).click()}))("onFileDropped",(function(t){return u.Dc(a),u.hc(2).dndUploadFile(t)})),u.Wb(1,"div"),u.Qc(2),u.ic(3,"translate"),u.Wb(4,"mat-form-field",31),u.dc("click",(function(t){return u.Dc(a),t.stopPropagation()})),u.Wb(5,"mat-label"),u.Qc(6),u.ic(7,"translate"),u.Vb(),u.Wb(8,"mat-select",32),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc(2).currentDelimiter=t}))("click",(function(t){return u.Dc(a),t.stopPropagation()})),u.Oc(9,Gv,2,2,"mat-option",33),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc(2);u.Db(2),u.Sc(" ",u.jc(3,4,"lang.dndFileCsvDesc")," "),u.Db(4),u.Rc(u.jc(7,6,"lang.delimiter")),u.Db(2),u.oc("ngModel",n.currentDelimiter),u.Db(1),u.oc("ngForOf",n.delimiters)}}function Kv(t,e){if(1&t&&(u.Wb(0,"mat-option",34),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a),u.Db(1),u.Sc(" ",a," ")}}function Jv(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-header-cell",43),u.Rb(1,"i",44),u.ic(2,"translate"),u.Qc(3,"\xa0"),u.Wb(4,"b",45),u.ic(5,"translate"),u.Qc(6),u.Vb(),u.Qc(7," \xa0"),u.Rb(8,"i",46),u.Qc(9,"\xa0 "),u.Rb(10,"i",47),u.ic(11,"translate"),u.Qc(12,"\xa0 "),u.Wb(13,"mat-form-field",48),u.dc("click",(function(t){return u.Dc(a),t.stopPropagation()})),u.ic(14,"translate"),u.Wb(15,"mat-select",49),u.dc("ngModelChange",(function(t){u.Dc(a);var e=u.hc().$implicit;return u.hc(3).associatedColmuns[e.id]=t}))("selectionChange",(function(t){u.Dc(a);var e=u.hc().$implicit;return u.hc(3).changeColumn(e,t.value)})),u.Rb(16,"mat-option",50),u.Oc(17,Kv,2,2,"mat-option",33),u.Vb(),u.Vb(),u.Wb(18,"mat-checkbox",51),u.dc("change",(function(t){u.Dc(a);var e=u.hc().$implicit;return u.hc(3).toggleEmptyMode(e.id,t.checked)})),u.ic(19,"translate"),u.Vb(),u.Vb()}if(2&t){var n=u.hc().$implicit,i=u.hc(3);u.Db(1),u.oc("title",u.jc(2,8,"lang.dbColumn")),u.Db(3),u.oc("title",u.jc(5,10,"lang.dbColumn")),u.Db(2),u.Rc(n.label),u.Db(4),u.oc("title",u.jc(11,12,"lang.csvColumn")),u.Db(3),u.oc("title",u.jc(14,14,"lang.csvColumn")),u.Db(2),u.oc("ngModel",i.associatedColmuns[n.id]),u.Db(2),u.oc("ngForOf",i.csvColumns),u.Db(1),u.oc("title",u.jc(19,16,"lang.toggleEmptyValues"))}}function Yv(t,e){1&t&&(u.Ub(0),u.Wb(1,"i",52),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Tb()),2&t&&(u.Db(2),u.Rc(u.jc(3,1,"lang.emptyValue")))}function Zv(t,e){if(1&t&&u.Qc(0),2&t){var a=u.hc().$implicit,n=u.hc().$implicit;u.Sc(" ",a[n.id]," ")}}function ty(t,e){if(1&t&&(u.Wb(0,"mat-cell",43),u.Oc(1,Yv,4,3,"ng-container",12),u.Oc(2,Zv,1,1,"ng-template",null,13,u.Pc),u.Vb()),2&t){var a=e.$implicit,n=u.zc(3),i=u.hc().$implicit,o=u.hc(3);u.Db(1),u.oc("ngIf",i.emptyValueMode&&o.functionsService.empty(a[i.id]))("ngIfElse",n)}}function ey(t,e){if(1&t&&(u.Ub(0),u.Ub(1,40),u.Oc(2,Jv,20,18,"mat-header-cell",41),u.Oc(3,ty,4,2,"mat-cell",42),u.Tb(),u.Tb()),2&t){var a=e.$implicit;u.Db(1),u.oc("matColumnDef",a.id)}}function ay(t,e){1&t&&u.Rb(0,"mat-header-row")}function ny(t,e){1&t&&u.Rb(0,"mat-row")}function iy(t,e){if(1&t&&(u.Wb(0,"mat-table",35,36),u.Oc(2,ey,4,1,"ng-container",37),u.Oc(3,ay,1,0,"mat-header-row",38),u.Oc(4,ny,1,0,"mat-row",39),u.Vb()),2&t){var a=u.hc(2);u.Lc("width",300*a.contactColumns.length,"px"),u.oc("dataSource",a.dataSource),u.Db(2),u.oc("ngForOf",a.contactColumns),u.Db(1),u.oc("matHeaderRowDef",a.getcontactColumnsIds()),u.Db(1),u.oc("matRowDefColumns",a.getcontactColumnsIds())}}function oy(t,e){if(1&t){var a=u.Xb();u.Wb(0,"input",19,20),u.dc("change",(function(t){return u.Dc(a),u.hc().uploadCsv(t)})),u.Vb(),u.Oc(2,qv,10,8,"div",21),u.Wb(3,"div",22),u.Wb(4,"div",23),u.Rb(5,"mat-paginator",24,25),u.Vb(),u.Vb(),u.Wb(7,"div",26),u.Wb(8,"div",27),u.Oc(9,iy,5,6,"mat-table",28),u.Vb(),u.Vb(),u.Rb(10,"div",29),u.ic(11,"translate"),u.Rb(12,"div",29),u.ic(13,"translate")}if(2&t){var n=u.hc();u.Db(2),u.oc("ngIf",0===n.csvData.length),u.Db(3),u.oc("length",100)("hidePageSize",!0)("pageSize",10),u.Db(4),u.oc("ngIf",n.csvData.length>0),u.Db(1),u.oc("innerHTML",u.jc(11,7,"lang.infoImportcontacts"),u.Ec),u.Db(2),u.oc("innerHTML",u.jc(13,9,"lang.infoImportcontacts2"),u.Ec)}}function ry(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",53),u.dc("click",(function(){return u.Dc(a),u.hc().onSubmit()})),u.Qc(1),u.ic(2,"translate"),u.Vb()}if(2&t){var n=u.hc();u.oc("disabled",n.loading),u.Db(1),u.Rc(u.jc(2,2,"lang.validate"))}}var cy,ly=((cy=function(){function t(e,a,n,i,o,r,c,l,s,d){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.functionsService=i,this.localStorage=o,this.headerService=r,this.dialog=c,this.dialogRef=l,this.papa=s,this.data=d,this.loading=!1,this.contactColumns=[{id:"id",label:this.translate.instant("lang.id"),emptyValueMode:!1},{id:"company",label:this.translate.instant("lang.contactsParameters_company"),emptyValueMode:!1},{id:"civility",label:this.translate.instant("lang.contactsParameters_civility"),emptyValueMode:!1},{id:"firstname",label:this.translate.instant("lang.contactsParameters_firstname"),emptyValueMode:!1},{id:"lastname",label:this.translate.instant("lang.contactsParameters_lastname"),emptyValueMode:!1},{id:"function",label:this.translate.instant("lang.contactsParameters_function"),emptyValueMode:!1},{id:"department",label:this.translate.instant("lang.contactsParameters_department"),emptyValueMode:!1},{id:"email",label:this.translate.instant("lang.contactsParameters_email"),emptyValueMode:!1},{id:"phone",label:this.translate.instant("lang.contactsParameters_phone"),emptyValueMode:!1},{id:"addressAdditional1",label:this.translate.instant("lang.contactsParameters_addressAdditional1"),emptyValueMode:!1},{id:"addressNumber",label:this.translate.instant("lang.contactsParameters_addressNumber"),emptyValueMode:!1},{id:"addressStreet",label:this.translate.instant("lang.contactsParameters_addressStreet"),emptyValueMode:!1},{id:"addressAdditional2",label:this.translate.instant("lang.contactsParameters_addressAdditional2"),emptyValueMode:!1},{id:"addressPostcode",label:this.translate.instant("lang.contactsParameters_addressPostcode"),emptyValueMode:!1},{id:"addressTown",label:this.translate.instant("lang.contactsParameters_addressTown"),emptyValueMode:!1},{id:"addressCountry",label:this.translate.instant("lang.contactsParameters_addressCountry"),emptyValueMode:!1}],this.csvColumns=[],this.delimiters=[";",",","\t"],this.currentDelimiter=";",this.associatedColmuns={},this.dataSource=new q.p(null),this.hasHeader=!0,this.csvData=[],this.contactData=[],this.countAll=0,this.countAdd=0,this.countUp=0}return _createClass(t,[{key:"ngOnInit",value:function(){this.setConfiguration(),this.initCustomFields()}},{key:"getcontactColumnsIds",value:function(){return this.contactColumns.map((function(t){return t.id}))}},{key:"initCustomFields",value:function(){var t=this;this.http.get("../rest/contactsCustomFields").pipe(Object(s.a)((function(t){return t.customFields.map((function(t){return{id:"contactCustomField_"+t.id,label:t.label,type:t.type}}))})),Object(d.a)((function(e){t.contactColumns=t.contactColumns.concat(e)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"toggleEmptyMode",value:function(t,e){this.contactColumns.filter((function(e){return e.id===t}))[0].emptyValueMode=e}},{key:"changeColumn",value:function(t,e){var a=this;this.contactData=[];for(var n=function(n){var i=a.csvData[n],o={};a.contactColumns.forEach((function(n){o[n.id]=t===n.id?i[a.csvColumns.filter((function(t){return t===e}))[0]]:i[a.associatedColmuns[n.id]]})),a.contactData.push(o)},i=this.hasHeader?1:0;i<this.csvData.length;i++)n(i);this.countAdd=this.csvData.filter((function(t,e){return e>0&&a.functionsService.empty(t[a.associatedColmuns.id])})).length,this.countUp=this.csvData.filter((function(t,e){return e>0&&!a.functionsService.empty(t[a.associatedColmuns.id])})).length,setTimeout((function(){a.dataSource=new q.p(a.contactData),a.dataSource.paginator=a.paginator}),0)}},{key:"uploadCsv",value:function(t){var e=this;if(t.target.files&&t.target.files[0]&&("text/csv"===t.target.files[0].type||"application/vnd.ms-excel"===t.target.files[0].type)){this.loading=!0;var a=[],n=new FileReader;n.readAsText(t.target.files[0]),n.onload=function(t){e.papa.parse(t.target.result,{complete:function(t){a=(a=t.data).filter((function(t){return t.length===a[0].length}));var n={};e.setCsvColumns(a[0]),e.countAll=e.hasHeader?a.length-1:a.length;for(var i=0;i<a.length;i++)n={},a[i].forEach((function(t,a){n[e.csvColumns[a]]=t})),e.csvData.push(n);e.initData(),e.countAdd=e.csvData.filter((function(t,a){return a>0&&e.functionsService.empty(t[e.associatedColmuns.id])})).length,e.countUp=e.csvData.filter((function(t,a){return a>0&&!e.functionsService.empty(t[e.associatedColmuns.id])})).length,e.localStorage.save("importContactFields_"+e.headerService.user.id,e.currentDelimiter),e.loading=!1}})}}else this.dialog.open(Z.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.notAllowedExtension")+" !",msg:this.translate.instant("lang.file")+" : <b>"+t.target.files[0].name+"</b>, "+this.translate.instant("lang.type")+" : <b>"+t.target.files[0].type+"</b><br/><br/><u>"+this.translate.instant("lang.allowedExtensions")+"</u> : <br/>text/csv"}})}},{key:"setCsvColumns",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.csvColumns=e.filter((function(e){return t.functionsService.empty(e)})).length>0?Object.keys(e).map((function(t,e){return""+e})):e}},{key:"toggleHeader",value:function(){var t=this;this.hasHeader=!this.hasHeader,this.countAll=this.hasHeader?this.csvData.length-1:this.csvData.length,this.hasHeader?(this.countAdd=this.csvData.filter((function(e,a){return a>0&&t.functionsService.empty(e[t.associatedColmuns.id])})).length,this.countUp=this.csvData.filter((function(e,a){return a>0&&!t.functionsService.empty(e[t.associatedColmuns.id])})).length):(this.countAdd=this.csvData.filter((function(e,a){return t.functionsService.empty(e[t.associatedColmuns.id])})).length,this.countUp=this.csvData.filter((function(e,a){return!t.functionsService.empty(e[t.associatedColmuns.id])})).length),this.initData()}},{key:"initData",value:function(){var t=this;this.contactData=[];for(var e=function(e){var a=t.csvData[e],n={};t.contactColumns.forEach((function(e,i){var o=t.csvColumns.indexOf(e.label);t.associatedColmuns[e.id]=o>-1?t.csvColumns[o]:"",n[e.id]=o>-1?a[t.csvColumns[o]]:""})),t.contactData.push(n)},a=this.hasHeader?1:0;a<this.csvData.length;a++)e(a);setTimeout((function(){t.dataSource=new q.p(t.contactData),t.dataSource.paginator=t.paginator}),0)}},{key:"dndUploadFile",value:function(t){this.uploadCsv({target:{files:[t[0]]}})}},{key:"onSubmit",value:function(){var t=this,e=[],a="";this.translate.get("lang.confirmImportContacts",{0:this.countAll}).subscribe((function(e){a=e+" ?<br/><br/>",a+="<ul><li><b>".concat(t.countAdd,"</b> ").concat(t.translate.instant("lang.additions"),"</li><li><b>").concat(t.countUp,"</b> ").concat(t.translate.instant("lang.modifications"),"</li></ul>")}));var n=this.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.import"),msg:a}});n.afterClosed().pipe(Object(J.a)((function(t){return"ok"===t})),Object(d.a)((function(){t.loading=!0,t.csvData.forEach((function(a,n){if(t.hasHeader&&n>0||!t.hasHeader){var i={};t.contactColumns.forEach((function(e){i[e.id]=(!e.emptyValueMode||void 0!==a[t.associatedColmuns[e.id]]&&!t.functionsService.empty(a[t.associatedColmuns[e.id]]))&&(void 0===a[t.associatedColmuns[e.id]]?"":"checkbox"===e.type?t.functionsService.empty(a[t.associatedColmuns[e.id]])?[]:a[t.associatedColmuns[e.id]].split("\n"):a[t.associatedColmuns[e.id]])})),e.push(i)}}))})),Object(Y.a)((function(){return t.http.put("../rest/contacts/import",{contacts:e})})),Object(d.a)((function(e){var a="";e.errors.count>0&&(a+="<br/>".concat(e.errors.count," ").concat(t.translate.instant("lang.withErrors"),"  : <ul>"),e.errors.details.forEach((function(e){a+="<li> ".concat(t.translate.instant("lang."+e.lang,{0:e.langParam})," (").concat(t.translate.instant("lang.line")," : ").concat(t.hasHeader?e.index+2:e.index+1,")</li>")})),a+="</ul>"),n=t.dialog.open(Z.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:t.translate.instant("lang.import"),msg:"<b>"+e.success+"</b> / <b>"+t.countAll+"</b> "+t.translate.instant("lang.importedContacts")+"."+a}})})),Object(Y.a)((function(){return n.afterClosed()})),Object(d.a)((function(){t.dialogRef.close("success")})),Object(b.a)((function(e){return t.loading=!1,t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"setConfiguration",value:function(){null!==this.localStorage.get("importContactFields_"+this.headerService.user.id)&&(this.currentDelimiter=this.localStorage.get("importContactFields_"+this.headerService.user.id))}}]),t}()).\u0275fac=function(t){return new(t||cy)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(D.a),u.Qb(tt.a),u.Qb(m.a),u.Qb(N.b),u.Qb(N.h),u.Qb(Bv),u.Qb(N.a))},cy.\u0275cmp=u.Kb({type:cy,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&u.Xc(H.a,!0),2&t&&u.yc(a=u.ec())&&(e.paginator=a.first)},decls:37,vars:28,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"import-tool"],[2,"flex","1"],["color","primary",3,"checked","change"],[2,"flex","1","text-align","center"],["color","primary",1,"fa","fa-users"],["color","primary"],["color","primary",1,"fa","fa-user-plus"],[2,"flex","1","text-align","right"],["color","primary",1,"fa","fa-user-edit"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"divider-modal"],["mat-dialog-actions","",1,"actions"],["mat-raised-button","","mat-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","mat-button","",3,"disabled","mat-dialog-close"],[1,"loader"],["type","file","name","files[]","id","uploadFile","accept",".csv",2,"display","none",3,"change"],["uploadFile",""],["appUploadFileDragDrop","","class","dndFile",3,"click","onFileDropped",4,"ngIf"],[1,"row",2,"margin","0px"],[1,"col-md-12"],[3,"length","hidePageSize","pageSize"],["paginator",""],[2,"width","100%","box-shadow","inset 0px 0px 5px 0px rgba(0,0,0,0.75)","padding","10px"],[2,"overflow","auto"],[3,"dataSource","width",4,"ngIf"],[1,"alert-message","alert-message-info",2,"min-width","100%",3,"innerHTML"],["appUploadFileDragDrop","",1,"dndFile",3,"click","onFileDropped"],["appearance","outline",2,"font-size","14px",3,"click"],[3,"ngModel","ngModelChange","click"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"dataSource"],["table",""],[4,"ngFor","ngForOf"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["style","padding-left: 5px;padding-right: 5px;",4,"matHeaderCellDef"],["style","padding-left: 5px;padding-right: 5px;",4,"matCellDef"],[2,"padding-left","5px","padding-right","5px"],["color","primary",1,"fas","fa-database",3,"title"],["color","primary",3,"title"],[1,"fas","fa-arrows-alt-h"],[1,"fas","fa-file-csv",3,"title"],[2,"width","80px !important",3,"title","click"],[3,"ngModel","ngModelChange","selectionChange"],["value",""],["color","primary",3,"title","change"],[2,"opacity","0.5"],["mat-raised-button","","mat-button","","color","primary",3,"disabled","click"]],template:function(t,e){if(1&t&&(u.Wb(0,"div",0),u.Wb(1,"h1",1),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"div",2),u.Wb(5,"mat-toolbar",3),u.Wb(6,"span",4),u.Wb(7,"mat-slide-toggle",5),u.dc("change",(function(){return e.toggleHeader()})),u.Qc(8),u.ic(9,"translate"),u.Vb(),u.Vb(),u.Wb(10,"span",6),u.Rb(11,"i",7),u.Qc(12),u.ic(13,"translate"),u.Wb(14,"b",8),u.Qc(15),u.Vb(),u.Vb(),u.Wb(16,"span",6),u.Rb(17,"i",9),u.Qc(18),u.ic(19,"translate"),u.Wb(20,"b",8),u.Qc(21),u.Vb(),u.Vb(),u.Wb(22,"span",10),u.Rb(23,"i",11),u.Qc(24),u.ic(25,"translate"),u.Wb(26,"b",8),u.Qc(27),u.Vb(),u.Vb(),u.Vb(),u.Oc(28,Xv,3,0,"ng-container",12),u.Oc(29,oy,14,11,"ng-template",null,13,u.Pc),u.Vb(),u.Rb(31,"span",14),u.Wb(32,"div",15),u.Oc(33,ry,3,4,"button",16),u.Wb(34,"button",17),u.Qc(35),u.ic(36,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t){var a=u.zc(30);u.Db(2),u.Rc(u.jc(3,16,"lang.importContacts")),u.Db(3),u.Ib("hide",0===e.csvData.length||e.loading),u.Db(2),u.oc("checked",e.hasHeader),u.Db(1),u.Sc(" ",u.jc(9,18,"lang.csvHeader")," "),u.Db(4),u.Sc("\xa0",u.jc(13,20,"lang.contactsOfFile")," : "),u.Db(3),u.Rc(e.countAll),u.Db(3),u.Sc("\xa0",u.jc(19,22,"lang.additions")," : "),u.Db(3),u.Rc(e.countAdd),u.Db(3),u.Sc("\xa0",u.jc(25,24,"lang.modifications")," : "),u.Db(3),u.Rc(e.countUp),u.Db(1),u.oc("ngIf",e.loading)("ngIfElse",a),u.Db(5),u.oc("ngIf",e.csvData.length>0),u.Db(1),u.oc("disabled",e.loading),u.Db(1),u.Rc(u.jc(36,26,"lang.cancel"))}},directives:[N.i,N.f,et.a,at.a,O.t,N.c,R.b,N.d,w.c,H.a,nt.a,S.c,S.g,it.a,c.u,c.x,O.s,j.p,q.o,q.k,q.n,q.c,q.i,q.b,q.h,ze.a,q.a,q.j,q.m],pipes:[p.d],styles:[".loader[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center;justify-content:center}.hide[_ngcontent-%COMP%]{display:none}.import-tool[_ngcontent-%COMP%]{font-size:14px}.dndFile[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;margin:0;justify-content:center;font-size:30px;opacity:.5!important;cursor:pointer}"]}),cy),sy=["snav2"],dy=["adminMenuTemplate"],by=["tableContactListSort"];function uy(t,e){if(1&t&&(u.Wb(0,"a",47),u.Rb(1,"mat-icon",48),u.Wb(2,"p",42),u.Qc(3),u.Vb(),u.Vb()),2&t){var a=e.$implicit;u.Ib("active",a.current),u.oc("routerLink",a.route),u.Db(1),u.Fb(a.icon),u.Db(2),u.Sc(" ",a.label," ")}}function py(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-nav-list"),u.Wb(1,"h3",39),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"a",40),u.Rb(5,"mat-icon",41),u.Wb(6,"p",42),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Wb(9,"a",43),u.dc("click",(function(){return u.Dc(a),u.hc().openContactExport()})),u.Rb(10,"mat-icon",44),u.Wb(11,"p",42),u.Qc(12),u.ic(13,"translate"),u.Vb(),u.Vb(),u.Wb(14,"a",43),u.dc("click",(function(){return u.Dc(a),u.hc().openContactImportModal()})),u.Rb(15,"mat-icon",45),u.Wb(16,"p",42),u.Qc(17),u.ic(18,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Rb(19,"mat-divider"),u.Wb(20,"mat-nav-list"),u.Oc(21,uy,4,6,"a",46),u.Vb()}if(2&t){var n=u.hc();u.Db(2),u.Rc(u.jc(3,5,"lang.actions")),u.Db(5),u.Sc(" ",u.jc(8,7,"lang.add")," "),u.Db(5),u.Sc(" ",u.jc(13,9,"lang.exportContacts")," "),u.Db(5),u.Sc(" ",u.jc(18,11,"lang.importContacts")," "),u.Db(4),u.oc("ngForOf",n.subMenus)}}function fy(t,e){1&t&&u.Rb(0,"mat-spinner")}function my(t,e){if(1&t&&(u.Wb(0,"div",49),u.Oc(1,fy,1,0,"mat-spinner",50),u.Vb()),2&t){var a=u.hc();u.Db(1),u.oc("ngIf",a.isLoadingResults)}}function gy(t,e){if(1&t&&u.Rb(0,"mat-header-cell",51),2&t){var a=u.hc();u.Ib("hide-for-mobile",a.appService.getViewMode())}}function hy(t,e){if(1&t&&(u.Wb(0,"mat-cell",52),u.Rb(1,"i",53),u.Vb()),2&t){var a=e.$implicit,n=u.hc();u.Ib("hide-for-mobile",n.appService.getViewMode()),u.Db(1),u.Gb("fas fa-circle threshold_",a.filling.thresholdLevel,""),u.oc("title",n.translate.instant("lang.contactFilledTo")+" "+a.filling.rate+"%")}}function vy(t,e){1&t&&(u.Wb(0,"mat-header-cell",54),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.firstname")))}function yy(t,e){if(1&t&&(u.Wb(0,"mat-cell",55),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.firstname," ")}}function Dy(t,e){1&t&&(u.Wb(0,"mat-header-cell",54),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.lastname")))}function Vy(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.lastname," ")}}function Cy(t,e){1&t&&(u.Wb(0,"mat-header-cell",54),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc("",u.jc(2,1,"lang.contactsParameters_company")," "))}function xy(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.company," ")}}function My(t,e){if(1&t&&(u.Wb(0,"mat-header-cell",56),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=u.hc();u.Ib("hide-for-mobile",a.appService.getViewMode()),u.Db(1),u.Sc(" ",u.jc(2,3,"lang.address"),"")}}function Wy(t,e){if(1&t&&(u.Wb(0,"mat-cell",56),u.Qc(1),u.Vb()),2&t){var a=e.$implicit,n=u.hc();u.Ib("hide-for-mobile",n.appService.getViewMode()),u.Db(1),u.Sc(" ",a.formatedAddress," ")}}function Oy(t,e){1&t&&u.Rb(0,"mat-header-cell")}function _y(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",62),u.dc("click",(function(t){u.Dc(a);var e=u.hc().$implicit,n=u.hc();return t.stopPropagation(),n.toggleContact(e)})),u.Rb(1,"mat-icon",63),u.Vb()}if(2&t){var n=u.hc(2);u.oc("title",n.translate.instant("lang.suspend"))}}function Sy(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",64),u.dc("click",(function(t){u.Dc(a);var e=u.hc().$implicit,n=u.hc();return t.stopPropagation(),n.toggleContact(e)})),u.Rb(1,"mat-icon",65),u.Vb()}if(2&t){var n=u.hc(2);u.oc("title",n.translate.instant("lang.authorize"))}}function ky(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-cell",57),u.Oc(1,_y,2,1,"button",58),u.Oc(2,Sy,2,1,"button",59),u.Wb(3,"button",60),u.dc("click",(function(t){u.Dc(a);var n=e.$implicit,i=u.hc();return t.stopPropagation(),i.deleteContact(n)})),u.Rb(4,"mat-icon",61),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit,i=u.hc();u.Db(1),u.oc("ngIf",n.enabled),u.Db(1),u.oc("ngIf",!n.enabled),u.Db(1),u.oc("title",i.translate.instant("lang.delete"))}}function wy(t,e){1&t&&u.Rb(0,"mat-header-row")}function Iy(t,e){1&t&&u.Rb(0,"mat-row",66),2&t&&u.qc("routerLink","/administration/contacts/list/",e.$implicit.id,"")}var jy=function(){return["/rest/autocomplete/contacts"]};function Ry(t,e){if(1&t){var a=u.Xb();u.Wb(0,"plugin-autocomplete",14),u.dc("triggerEvent",(function(t){return u.Dc(a),u.hc().setRedirectUser(t)})),u.Vb()}if(2&t){var n=u.hc();u.oc("labelPlaceholder",n.translate.instant("lang.contactReplacement"))("labelList",n.translate.instant("lang.availableContacts"))("routeDatas",u.uc(4,jy))("targetSearchKey","contact")}}function Ty(t,e){1&t&&(u.Wb(0,"span"),u.Wb(1,"em"),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Vb()),2&t&&(u.Db(2),u.Rc(u.jc(3,1,"lang.deleteContactInformations")))}function Py(t,e){1&t&&(u.Wb(0,"span"),u.Wb(1,"em"),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Vb()),2&t&&(u.Db(2),u.Rc(u.jc(3,1,"lang.reaffectContactInformations")))}function Qy(t,e){if(1&t&&(u.Wb(0,"div",15),u.Oc(1,Ty,4,3,"span",16),u.Oc(2,Py,4,3,"span",16),u.Vb()),2&t){var a=u.hc();u.Db(1),u.oc("ngIf","delete"==a.processMode),u.Db(1),u.oc("ngIf","reaffect"==a.processMode)}}var Fy,Ly,Ey=((Fy=function(){function t(e,a,n,i,o,r,l,s,d){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.headerService=i,this.appService=o,this.dialog=r,this.functions=l,this.adminService=s,this.viewContainerRef=d,this.loading=!1,this.filtersChange=new u.o,this.displayedColumnsContact=["filling","firstname","lastname","company","formatedAddress","actions"],this.isLoadingResults=!0,this.routeUrl="../rest/contacts",this.resultsLength=0,this.searchContact=new c.i,this.search="",this.destroy$=new Jb.a,this.subMenus=[{icon:"fa fa-book",route:"/administration/contacts/list",label:this.translate.instant("lang.contactsList"),current:!0},{icon:"fa fa-code",route:"/administration/contacts/contactsCustomFields",label:this.translate.instant("lang.customFieldsAdmin"),current:!1},{icon:"fa fa-cog",route:"/administration/contacts/contacts-parameters",label:this.translate.instant("lang.contactsParameters"),current:!1},{icon:"fa fa-users",route:"/administration/contacts/contacts-groups",label:this.translate.instant("lang.contactsGroups"),current:!1},{icon:"fas fa-magic",route:"/administration/contacts/duplicates",label:this.translate.instant("lang.duplicatesContactsAdmin"),current:!1}]}return _createClass(t,[{key:"ngOnInit",value:function(){this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.adminService.setAdminId("admin_contacts_list"),this.functions.empty(this.adminService.getFilter())&&this.adminService.saveDefaultFilter(),this.initContactList(),this.initAutocompleteContacts()}},{key:"initContactList",value:function(){var t=this;this.resultListDatabase=new Ay(this.http),this.paginator.pageIndex=this.adminService.getFilter("page"),this.sort.active=this.adminService.getFilter("sort"),this.sort.direction=this.adminService.getFilter("sortDirection"),this.sort.sortChange.subscribe((function(){return t.paginator.pageIndex=0})),Object(Yb.a)(this.sort.sortChange,this.paginator.page,this.filtersChange).pipe(Object(Zb.a)(this.destroy$),Object(l.a)({}),Object(tu.a)((function(){return t.adminService.saveFilter({sort:t.sort.active,sortDirection:t.sort.direction,page:t.paginator.pageIndex,field:t.adminService.getFilter("field")}),t.search=t.adminService.getFilter("field"),t.isLoadingResults=!0,t.resultListDatabase.getRepoIssues(t.sort.active,t.sort.direction,t.paginator.pageIndex,t.routeUrl,t.search)})),Object(s.a)((function(e){return t.isLoadingResults=!1,e=t.processPostData(e),t.resultsLength=e.count,t.headerService.setHeader(t.translate.instant("lang.administration")+" "+t.translate.instant("lang.contacts").toLowerCase(),"",""),e.contacts})),Object(b.a)((function(e){return t.notify.handleErrors(e),t.isLoadingResults=!1,Object(r.a)([])}))).subscribe((function(e){return t.data=e}))}},{key:"processPostData",value:function(t){var e=this;return t.contacts.forEach((function(t){var a=[];a.push(t.addressNumber),a.push(t.addressStreet),a.push(t.addressPostcode),a.push(t.addressTown),a.push(t.addressCountry),t.formatedAddress=a.filter((function(t){return!e.isEmptyValue(t)})).join(" ")})),this.displayedColumnsContact=this.functions.empty(t.contacts[0])||this.functions.empty(t.contacts[0].filling)?["firstname","lastname","company","formatedAddress","actions"]:["filling","firstname","lastname","company","formatedAddress","actions"],t}},{key:"deleteContact",value:function(t){var e=this;t.isUsed?(this.dialogRef=this.dialog.open(Uy,{panelClass:"maarch-modal",autoFocus:!1}),this.dialogRef.afterClosed().subscribe((function(a){if(void 0!==a&&""!=a){var n="";"reaffect"==a.processMode&&(n="?redirect="+a.contactId),e.http.request("DELETE","../rest/contacts/".concat(t.id).concat(n)).subscribe((function(){e.refreshDao(),e.notify.success(e.translate.instant("lang.contactDeleted"))}),(function(t){e.notify.error(t.error.errors)}))}e.dialogRef=null}))):this.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete"),msg:this.translate.instant("lang.confirmAction")}}).afterClosed().pipe(Object(J.a)((function(t){return"ok"===t})),Object(Y.a)((function(){return e.http.delete("../rest/contacts/"+t.id)})),Object(d.a)((function(t){e.refreshDao(),e.notify.success(e.translate.instant("lang.contactDeleted"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(r.a)(!1)}))).subscribe()}},{key:"toggleContact",value:function(t){var e=this;this.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.suspend"),msg:this.translate.instant("lang.confirmAction")}}).afterClosed().pipe(Object(J.a)((function(t){return"ok"===t})),Object(Y.a)((function(){return e.http.put("../rest/contacts/".concat(t.id,"/activation"),{enabled:!t.enabled})})),Object(d.a)((function(a){e.refreshDao(),e.notify.success(e.translate.instant(1==!t.enabled?"lang.contactEnabled":"lang.contactDisabled"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(r.a)(!1)}))).subscribe()}},{key:"openContactExport",value:function(){this.dialog.open(Nv,{panelClass:"maarch-modal",width:"800px",autoFocus:!1})}},{key:"openContactImportModal",value:function(){var t=this;this.dialog.open(ly,{disableClose:!0,width:"99vw",maxWidth:"99vw",panelClass:"maarch-full-height-modal"}).afterClosed().pipe(Object(J.a)((function(t){return"success"===t})),Object(d.a)((function(){t.refreshDao()})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(r.a)(!1)}))).subscribe()}},{key:"refreshDao",value:function(){this.filtersChange.emit()}},{key:"initAutocompleteContacts",value:function(){var t=this;this.searchContact=new c.i(this.adminService.getFilter("field")),this.searchContact.valueChanges.pipe(Object(d.a)((function(e){t.adminService.setFilter("field",e),t.adminService.saveFilter(t.adminService.getFilter()),0===e.length&&(t.search="",t.paginator.pageIndex=0,t.refreshDao())})),Object(As.a)(300),Object(J.a)((function(t){return t.length>2})),Object(gp.a)(),Object(d.a)((function(e){t.search=e,t.paginator.pageIndex=0,t.refreshDao()}))).subscribe()}},{key:"isEmptyValue",value:function(t){return null===t||(Array.isArray(t)?!(t.length>0):""===String(t))}}]),t}()).\u0275fac=function(t){return new(t||Fy)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a),u.Qb(N.b),u.Qb(D.a),u.Qb(jt),u.Qb(u.T))},Fy.\u0275cmp=u.Kb({type:Fy,selectors:[["contact-list"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(sy,!0),u.Kc(dy,!0),u.Kc(H.a,!0),u.Kc(by,!0)),2&t&&(u.yc(a=u.ec())&&(e.sidenavRight=a.first),u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.paginator=a.first),u.yc(a=u.ec())&&(e.sort=a.first))},decls:49,vars:19,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["class","example-loading-shade",4,"ngIf"],[1,"table-head"],[1,"table-head-result"],["floatLabel","never",2,"font-size","13px"],["type","text","matInput","","maxlength","128",3,"placeholder","formControl","click"],["autoCompleteInput",""],[1,"table-head-tool"],[1,"paginatorResultList",3,"length","hidePageSize","pageSize"],["paginatorContactList",""],[2,"height","90%","overflow","auto","position","absolute","width","100%"],["id","contact-list","matSort","","matSortDisableClear","",2,"width","100%",3,"dataSource"],["tableContactListSort","matSort"],["matColumnDef","filling"],["style","flex: initial;width: 60px;",3,"hide-for-mobile",4,"matHeaderCellDef"],["mat-cell","","style","flex: initial;width: 60px;",3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","firstname"],["mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","lastname"],[4,"matCellDef"],["matColumnDef","company"],["matColumnDef","formatedAddress"],["style","flex: 2;",3,"hide-for-mobile",4,"matHeaderCellDef"],["style","flex: 2;",3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor: pointer;",3,"routerLink",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/contacts/list/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],["mat-list-item","",3,"click"],["color","primary","mat-list-icon","",1,"fa","fa-file-export"],["color","primary","mat-list-icon","",1,"fas","fa-file-import"],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],[1,"example-loading-shade"],[4,"ngIf"],[2,"flex","initial","width","60px"],["mat-cell","",2,"flex","initial","width","60px"],[3,"title"],["mat-sort-header",""],["mat-cell",""],[2,"flex","2"],[2,"justify-content","flex-end"],["mat-icon-button","","color","primary",3,"title","click",4,"ngIf"],["mat-icon-button","","color","accent",3,"title","click",4,"ngIf"],["mat-icon-button","","color","warn","data-toggle","modal","data-target","#changeDiffListDest",3,"title","click"],[1,"fa","fa-trash-alt","fa-2x"],["mat-icon-button","","color","primary",3,"title","click"],["aria-hidden","true",1,"fa","fa-pause","fa-2x"],["mat-icon-button","","color","accent",3,"title","click"],["aria-hidden","true",1,"fa","fa-check","fa-2x"],[2,"cursor","pointer",3,"routerLink"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,py,22,13,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,my,2,1,"div",9),u.Wb(14,"div",10),u.Wb(15,"div",11),u.Wb(16,"mat-form-field",12),u.Wb(17,"input",13,14),u.dc("click",(function(t){return t.stopPropagation()})),u.Vb(),u.Vb(),u.Vb(),u.Wb(19,"div",15),u.Rb(20,"mat-paginator",16,17),u.Vb(),u.Vb(),u.Wb(22,"div",18),u.Wb(23,"mat-table",19,20),u.Ub(25,21),u.Oc(26,gy,1,2,"mat-header-cell",22),u.Oc(27,hy,2,6,"mat-cell",23),u.Tb(),u.Ub(28,24),u.Oc(29,vy,3,3,"mat-header-cell",25),u.Oc(30,yy,2,1,"mat-cell",26),u.Tb(),u.Ub(31,27),u.Oc(32,Dy,3,3,"mat-header-cell",25),u.Oc(33,Vy,2,1,"mat-cell",28),u.Tb(),u.Ub(34,29),u.Oc(35,Cy,3,3,"mat-header-cell",25),u.Oc(36,xy,2,1,"mat-cell",28),u.Tb(),u.Ub(37,30),u.Oc(38,My,3,5,"mat-header-cell",31),u.Oc(39,Wy,2,3,"mat-cell",32),u.Tb(),u.Ub(40,33),u.Oc(41,Oy,1,0,"mat-header-cell",34),u.Oc(42,ky,5,3,"mat-cell",35),u.Tb(),u.Oc(43,wy,1,0,"mat-header-row",36),u.Oc(44,Iy,1,1,"mat-row",37),u.Vb(),u.Wb(45,"div",38),u.Qc(46),u.ic(47,"translate"),u.Vb(),u.Vb(),u.Rb(48,"div",10),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.isLoadingResults),u.Db(4),u.oc("placeholder",e.translate.instant("lang.filterBy"))("formControl",e.searchContact),u.Db(3),u.oc("length",e.resultsLength)("hidePageSize",!0)("pageSize",10),u.Db(3),u.oc("dataSource",e.data),u.Db(20),u.oc("matHeaderRowDef",e.displayedColumnsContact),u.Db(1),u.oc("matRowDefColumns",e.displayedColumnsContact),u.Db(2),u.Tc(" ",e.resultsLength," ",u.jc(47,17,"lang.contactsAlt"),""))},directives:[C.e,C.f,x.a,W.a,O.t,S.c,k.b,c.d,c.p,c.u,c.j,H.a,q.o,B.a,q.c,q.i,q.b,q.k,q.n,Rt.h,Rt.g,Rt.d,o.f,Tt.a,Rt.c,j.l,_.a,O.s,w.c,q.h,q.a,B.b,R.b,q.j,q.m,o.d],pipes:[p.d],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}.paginatorResultList[_ngcontent-%COMP%]    .mat-paginator-range-label{justify-content:flex-end;display:flex}.threshold_first[_ngcontent-%COMP%]{color:#e81c2b}.threshold_second[_ngcontent-%COMP%]{color:#f4891e}.threshold_third[_ngcontent-%COMP%]{color:#0aa34f}"]}),Fy),Ay=function(){function t(e){_classCallCheck(this,t),this.http=e}return _createClass(t,[{key:"getRepoIssues",value:function(t,e,a,n,i){return this.http.get("".concat(n,"?limit=10&offset=").concat(10*a,"&order=").concat(e,"&orderBy=").concat(t,"&search=").concat(i))}}]),t}(),Uy=((Ly=function(){function t(e,a,n,i,o){_classCallCheck(this,t),this.translate=e,this.http=a,this.data=n,this.dialogRef=i,this.notify=o,this.modalTitle=this.translate.instant("lang.confirmAction"),this.processMode="delete"}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"setRedirectUser",value:function(t){this.redirectContact=t.id}}]),t}()).\u0275fac=function(t){return new(t||Ly)(u.Qb(p.e),u.Qb(f.b),u.Qb(N.a),u.Qb(N.h),u.Qb(y.a))},Ly.\u0275cmp=u.Kb({type:Ly,selectors:[["ng-component"]],decls:29,vars:22,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["redirectConfForm","ngForm"],[1,"modal-body"],["role","alert",1,"alert-message","alert-message-danger"],[1,"input-group"],["id","processMode","name","processMode","color","primary","required","",2,"display","inline-flex","flex-direction","column",3,"ngModel","ngModelChange"],["value","delete","color","primary"],["value","reaffect","color","primary"],["singleMode","","required","",3,"labelPlaceholder","labelList","routeDatas","targetSearchKey","triggerEvent",4,"ngIf"],["class","alert-message alert-message-info","role","alert",4,"ngIf"],[1,"divider-modal"],["mat-raised-button","","color","primary","type","submit",3,"disabled","click"],["color","","mat-raised-button","",1,"actions",3,"click"],["singleMode","","required","",3,"labelPlaceholder","labelList","routeDatas","targetSearchKey","triggerEvent"],["role","alert",1,"alert-message","alert-message-info"],[4,"ngIf"]],template:function(t,e){if(1&t&&(u.Wb(0,"div",0),u.Wb(1,"h1",1),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"mat-dialog-content"),u.Wb(5,"form",null,2),u.Wb(7,"div",3),u.Wb(8,"div",4),u.Qc(9),u.ic(10,"translate"),u.Vb(),u.Wb(11,"div",5),u.Wb(12,"mat-radio-group",6),u.dc("ngModelChange",(function(t){return e.processMode=t})),u.Wb(13,"mat-radio-button",7),u.Qc(14),u.ic(15,"translate"),u.Vb(),u.Wb(16,"mat-radio-button",8),u.Qc(17),u.ic(18,"translate"),u.Vb(),u.Vb(),u.Oc(19,Ry,1,5,"plugin-autocomplete",9),u.Oc(20,Qy,3,2,"div",10),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Rb(21,"span",11),u.Wb(22,"mat-dialog-actions"),u.Wb(23,"button",12),u.dc("click",(function(){return e.dialogRef.close({contactId:e.redirectContact,processMode:e.processMode})})),u.Qc(24),u.ic(25,"translate"),u.Vb(),u.Wb(26,"button",13),u.dc("click",(function(){return e.dialogRef.close("")})),u.Qc(27),u.ic(28,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t){var a=u.zc(6);u.Db(2),u.Rc(u.jc(3,10,"lang.contactsReassign")),u.Db(7),u.Sc(" ",u.jc(10,12,"lang.contactLinkedToMails")," "),u.Db(3),u.oc("ngModel",e.processMode),u.Db(2),u.Sc(" ",u.jc(15,14,"lang.deleteContactwithtoutReassign")," "),u.Db(3),u.Sc(" ",u.jc(18,16,"lang.reaffectContactRedirect")," "),u.Db(2),u.oc("ngIf","reaffect"==e.processMode),u.Db(1),u.oc("ngIf",e.processMode),u.Db(3),u.oc("disabled",!a.form.valid||!e.redirectContact&&"reaffect"==e.processMode),u.Db(1),u.Rc(u.jc(25,18,"lang.delete")),u.Db(3),u.Rc(u.jc(28,20,"lang.cancel"))}},directives:[N.i,N.f,c.K,c.v,c.w,Xe.b,c.F,c.u,c.x,Xe.a,O.t,N.c,R.b,Ft.a],pipes:[p.d],encapsulation:2}),Ly),zy=["snav2"],$y=["adminMenuTemplate"];function Ny(t,e){if(1&t&&(u.Wb(0,"a",16),u.Rb(1,"mat-icon",17),u.Wb(2,"p",18),u.Qc(3),u.Vb(),u.Vb()),2&t){var a=e.$implicit;u.Ib("active",a.current),u.oc("routerLink",a.route),u.Db(1),u.Fb(a.icon),u.Db(2),u.Sc(" ",a.label," ")}}function Hy(t,e){if(1&t&&(u.Wb(0,"mat-nav-list"),u.Oc(1,Ny,4,6,"a",15),u.Vb()),2&t){var a=u.hc();u.Db(1),u.oc("ngForOf",a.subMenus)}}function By(t,e){if(1&t&&u.Rb(0,"div",19),2&t){var a=u.hc();u.oc("innerHTML",a.translate.instant("lang.noCustomFieldInfo"),u.Ec)}}function Xy(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",35),u.dc("click",(function(){u.Dc(a);var t=u.hc(2).$implicit;return u.hc().sortValues(t)})),u.Rb(1,"mat-icon",36),u.Vb()}if(2&t){var n=u.hc(3);u.oc("title",n.translate.instant("lang.orderValues"))}}function Gy(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-form-field",37),u.Wb(1,"input",38),u.dc("ngModelChange",(function(t){return u.Dc(a),e.$implicit.label=t})),u.Vb(),u.Wb(2,"button",39),u.dc("click",(function(){u.Dc(a);var t=e.index,n=u.hc(2).$implicit;return u.hc().removeValue(n,t)})),u.Rb(3,"mat-icon",40),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit,i=u.hc(3);u.Db(1),u.oc("ngModel",n.label)("placeholder",i.translate.instant("lang.newValue")),u.Db(1),u.oc("title",i.translate.instant("lang.delete"))}}function qy(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",21),u.Wb(1,"mat-expansion-panel",28),u.Wb(2,"mat-expansion-panel-header"),u.Wb(3,"mat-panel-title",29),u.Qc(4),u.ic(5,"translate"),u.Vb(),u.Vb(),u.Wb(6,"div",30),u.Wb(7,"div",31),u.Wb(8,"button",32),u.dc("click",(function(){u.Dc(a);var t=u.hc().index;return u.hc().addValue(t)})),u.Qc(9),u.ic(10,"translate"),u.Vb(),u.Vb(),u.Wb(11,"div"),u.Oc(12,Xy,2,1,"button",33),u.Vb(),u.Vb(),u.Wb(13,"div",21),u.Oc(14,Gy,4,3,"mat-form-field",34),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc().$implicit;u.Db(3),u.oc("matBadge",n.values.length),u.Db(1),u.Sc(" ",u.jc(5,5,"lang.valuesList")," "),u.Db(5),u.Sc(" ",u.jc(10,7,"lang.addValue"),""),u.Db(3),u.oc("ngIf",n.values.length>0),u.Db(2),u.oc("ngForOf",n.values)}}var Ky=function(){return["select","radio","checkbox"]};function Jy(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-expansion-panel"),u.Wb(1,"mat-expansion-panel-header"),u.Wb(2,"mat-panel-title",20),u.Qc(3),u.Vb(),u.Wb(4,"mat-panel-description"),u.Qc(5),u.ic(6,"translate"),u.Vb(),u.Vb(),u.Wb(7,"div",21),u.Wb(8,"mat-form-field"),u.Wb(9,"input",22),u.dc("ngModelChange",(function(t){return u.Dc(a),e.$implicit.id=t})),u.Vb(),u.Vb(),u.Wb(10,"mat-form-field"),u.Wb(11,"input",23),u.dc("ngModelChange",(function(t){return u.Dc(a),e.$implicit.label=t})),u.Vb(),u.Vb(),u.Vb(),u.Oc(12,qy,15,9,"div",24),u.Wb(13,"div",25),u.Wb(14,"button",26),u.dc("click",(function(){u.Dc(a);var t=e.$implicit,n=e.index;return u.hc().updateCustomField(t,n)})),u.Qc(15),u.ic(16,"translate"),u.Vb(),u.Wb(17,"button",27),u.dc("click",(function(){u.Dc(a);var t=e.index;return u.hc().removeCustomField(t)})),u.Qc(18),u.ic(19,"translate"),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit,i=e.index,o=u.hc();u.Db(3),u.Sc(" ",n.label," "),u.Db(2),u.Sc(" ",u.jc(6,12,"lang."+n.type+"Input")," "),u.Db(4),u.oc("ngModel",n.id)("placeholder",o.translate.instant("lang.technicalId"))("value",n.id),u.Db(2),u.oc("ngModel",n.label)("placeholder",o.translate.instant("lang.label"))("value",n.label),u.Db(1),u.oc("ngIf",u.uc(18,Ky).indexOf(n.type)>-1),u.Db(2),u.oc("disabled",o.isModified(n,i)),u.Db(1),u.Rc(u.jc(16,14,"lang.update")),u.Db(3),u.Rc(u.jc(19,16,"lang.delete"))}}function Yy(t,e){if(1&t&&(u.Ub(0),u.Wb(1,"mat-form-field",47),u.Rb(2,"textarea",48),u.Vb(),u.Tb()),2&t){var a=u.hc().$implicit,n=u.hc();u.Db(2),u.oc("placeholder",n.translate.instant("lang."+a.type+"Input"))}}function Zy(t,e){if(1&t&&(u.Ub(0),u.Wb(1,"mat-form-field",47),u.Rb(2,"input",49),u.Vb(),u.Tb()),2&t){var a=u.hc().$implicit,n=u.hc();u.Db(2),u.oc("placeholder",n.translate.instant("lang."+a.type+"Input"))}}function tD(t,e){if(1&t&&(u.Wb(0,"mat-option",52),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a),u.Db(1),u.Tc(" ",u.jc(2,3,"lang.choice")," ",a," ")}}function eD(t,e){if(1&t&&(u.Ub(0),u.Wb(1,"mat-form-field",47),u.Wb(2,"mat-select",50),u.Oc(3,tD,3,5,"mat-option",51),u.Vb(),u.Vb(),u.Tb()),2&t){var a=u.hc().$implicit,n=u.hc();u.Db(2),u.oc("placeholder",n.translate.instant("lang."+a.type+"Input")),u.Db(1),u.oc("ngForOf",n.sampleIncrement)}}function aD(t,e){if(1&t){var a=u.Xb();u.Ub(0),u.Wb(1,"mat-form-field",47),u.Wb(2,"input",53),u.dc("click",(function(){return u.Dc(a),u.zc(5).open()})),u.Vb(),u.Rb(3,"mat-datepicker-toggle",54),u.Rb(4,"mat-datepicker",null,55),u.Vb(),u.Tb()}if(2&t){var n=u.zc(5),i=u.hc().$implicit,o=u.hc();u.Db(2),u.oc("matDatepicker",n)("placeholder",o.translate.instant("lang."+i.type+"Input")),u.Db(1),u.oc("for",n)}}function nD(t,e){if(1&t&&(u.Wb(0,"mat-radio-button",52),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a),u.Db(1),u.Tc(" ",u.jc(2,3,"lang.choice")," ",a," ")}}function iD(t,e){if(1&t&&(u.Ub(0),u.Wb(1,"mat-radio-group",56),u.Oc(2,nD,3,5,"mat-radio-button",51),u.Vb(),u.Tb()),2&t){var a=u.hc(2);u.Db(2),u.oc("ngForOf",a.sampleIncrement)}}function oD(t,e){if(1&t&&(u.Wb(0,"mat-list-option",62),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a),u.Db(1),u.Tc(" ",u.jc(2,3,"lang.choice")," ",a," ")}}function rD(t,e){1&t&&(u.Wb(0,"mat-chip"),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc(" ",u.jc(2,1,"lang.selectedValue")," "))}function cD(t,e){if(1&t&&(u.Ub(0),u.Wb(1,"div",57),u.Wb(2,"mat-selection-list",58,59),u.Oc(4,oD,3,5,"mat-list-option",60),u.Vb(),u.Vb(),u.Wb(5,"mat-chip-list",61),u.Oc(6,rD,3,3,"mat-chip",11),u.Vb(),u.Tb()),2&t){var a=u.zc(3),n=u.hc(2);u.Db(4),u.oc("ngForOf",n.sampleIncrement),u.Db(2),u.oc("ngForOf",a.selectedOptions.selected)}}function lD(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",41),u.Wb(1,"div",42),u.Wb(2,"button",43),u.dc("click",(function(){u.Dc(a);var t=e.$implicit;return u.hc().addCustomField(t)})),u.Rb(3,"mat-icon",44),u.Vb(),u.Vb(),u.Wb(4,"div",31),u.Wb(5,"div",45),u.Qc(6),u.Vb(),u.Oc(7,Yy,3,1,"ng-container",46),u.Oc(8,Zy,3,1,"ng-container",46),u.Oc(9,eD,4,2,"ng-container",46),u.Oc(10,aD,6,3,"ng-container",46),u.Oc(11,iD,3,1,"ng-container",46),u.Oc(12,cD,7,2,"ng-container",46),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit,i=u.hc();u.Db(2),u.oc("title",i.translate.instant("lang.add")),u.Db(4),u.Sc("",n.label," :"),u.Db(1),u.oc("ngIf","string"===n.type),u.Db(1),u.oc("ngIf","integer"===n.type),u.Db(1),u.oc("ngIf","select"===n.type),u.Db(1),u.oc("ngIf","date"===n.type),u.Db(1),u.oc("ngIf","radio"===n.type),u.Db(1),u.oc("ngIf","checkbox"===n.type)}}var sD,dD=((sD=function(){function t(e,a,n,i,o,r,c,l){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.dialog=i,this.headerService=o,this.appService=r,this.sortPipe=c,this.viewContainerRef=l,this.loading=!0,this.subMenus=[{icon:"fa fa-book",route:"/administration/contacts/list",label:this.translate.instant("lang.contactsList"),current:!1},{icon:"fa fa-code",route:"/administration/contacts/contactsCustomFields",label:this.translate.instant("lang.customFieldsAdmin"),current:!0},{icon:"fa fa-cog",route:"/administration/contacts/contacts-parameters",label:this.translate.instant("lang.contactsParameters"),current:!1},{icon:"fa fa-users",route:"/administration/contacts/contacts-groups",label:this.translate.instant("lang.contactsGroups"),current:!1},{icon:"fas fa-magic",route:"/administration/contacts/duplicates",label:this.translate.instant("lang.duplicatesContactsAdmin"),current:!1}],this.customFieldsTypes=[{label:this.translate.instant("lang.stringInput"),type:"string"},{label:this.translate.instant("lang.integerInput"),type:"integer"},{label:this.translate.instant("lang.selectInput"),type:"select"},{label:this.translate.instant("lang.dateInput"),type:"date"},{label:this.translate.instant("lang.radioInput"),type:"radio"},{label:this.translate.instant("lang.checkboxInput"),type:"checkbox"}],this.customFields=[],this.customFieldsClone=[],this.incrementCreation=1,this.sampleIncrement=[1,2,3,4]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.customFields")+" "+this.translate.instant("lang.contacts")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.http.get("../rest/contactsCustomFields").pipe(Object(s.a)((function(t){return t.customFields.forEach((function(t){t.values=t.values.map((function(t){return{label:t}}))})),t})),Object(d.a)((function(e){t.customFields=e.customFields,t.customFieldsClone=JSON.parse(JSON.stringify(t.customFields))})),Object(Dt.a)((function(){return t.loading=!1})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"addCustomField",value:function(t){var e=this,a={};this.dialogRef=this.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.add"),msg:this.translate.instant("lang.confirmAction")}}),this.dialogRef.afterClosed().pipe(Object(J.a)((function(t){return"ok"===t})),Object(d.a)((function(){a={label:e.translate.instant("lang.newField")+" "+e.incrementCreation,type:t.type,values:[]}})),Object(Y.a)((function(t){return e.http.post("../rest/contactsCustomFields",a)})),Object(d.a)((function(t){a.id=t.id,e.customFields.push(a),e.notify.success(e.translate.instant("lang.customFieldAdded")),e.incrementCreation++})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe()}},{key:"addValue",value:function(t){this.customFields[t].values.push({label:""})}},{key:"removeValue",value:function(t,e){t.values.splice(e,1)}},{key:"removeCustomField",value:function(t){var e=this;this.dialogRef=this.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete")+' "'+this.customFields[t].label+'"',msg:this.translate.instant("lang.confirmAction")}}),this.dialogRef.afterClosed().pipe(Object(J.a)((function(t){return"ok"===t})),Object(Y.a)((function(){return e.http.delete("../rest/contactsCustomFields/"+e.customFields[t].id)})),Object(d.a)((function(){e.customFields.splice(t,1),e.notify.success(e.translate.instant("lang.customFieldDeleted"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe()}},{key:"updateCustomField",value:function(t,e){var a=this;t.values=t.values.filter((function(t,e,a){return a.map((function(t){return t.label})).indexOf(t.label)===e}));var n=Object.assign({},t);if(n.values=t.values.map((function(t){return t.label})),this.customFields.filter((function(t){return t.label===n.label})).length>1)return this.notify.handleErrors(this.translate.instant("lang.customFieldAlreadyExists")),Object(X.of)(!1);this.http.put("../rest/contactsCustomFields/"+t.id,n).pipe(Object(d.a)((function(){a.customFieldsClone[e]=JSON.parse(JSON.stringify(t)),a.notify.success(a.translate.instant("lang.customFieldUpdated"))})),Object(b.a)((function(t){return a.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe()}},{key:"sortValues",value:function(t){t.values=this.sortPipe.transform(t.values,"label")}},{key:"isModified",value:function(t,e){return JSON.stringify(t)===JSON.stringify(this.customFieldsClone[e])||""===t.label}}]),t}()).\u0275fac=function(t){return new(t||sD)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(N.b),u.Qb(m.a),u.Qb(g.a),u.Qb(T.a),u.Qb(u.T))},sD.\u0275cmp=u.Kb({type:sD,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(zy,!0),u.Kc($y,!0)),2&t&&(u.yc(a=u.ec())&&(e.sidenavRight=a.first),u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first))},features:[u.Cb([T.a])],decls:23,vars:13,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],[3,"label"],["class","alert-message alert-message-info","role","alert",3,"innerHTML",4,"ngIf"],[4,"ngFor","ngForOf"],["position","end","opened","",1,"col-md-4","col-sm-12","customFielsdPanel",3,"mode","fixedInViewport"],["snav2",""],["class","customFieldsTypesItem",4,"ngFor","ngForOf"],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],["mat-line",""],["role","alert",1,"alert-message","alert-message-info",3,"innerHTML"],["color","primary"],[1,"col-md-12"],["matInput","","name","id","disabled","",3,"ngModel","placeholder","value","ngModelChange"],["matInput","","name","label",3,"ngModel","placeholder","value","ngModelChange"],["class","col-md-12",4,"ngIf"],[1,"col-md-12","text-center"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","warn",3,"click"],["opened","",1,"customFieldValues"],["matBadgeSize","small",3,"matBadge"],[1,"actionValuesCustom"],[2,"flex","1"],["mat-raised-button","","color","primary",3,"click"],["mat-mini-fab","","color","default",3,"title","click",4,"ngIf"],["floatLabel","never",4,"ngFor","ngForOf"],["mat-mini-fab","","color","default",3,"title","click"],["color","primary",1,"fas","fa-sort-alpha-down",2,"height","auto"],["floatLabel","never"],["matInput","",3,"ngModel","placeholder","ngModelChange"],["color","warn","mat-icon-button","","matSuffix","",3,"title","click"],[1,"fa","fa-trash"],[1,"customFieldsTypesItem"],[1,"addCustomFieldTypeContainer"],["mat-icon-button","","color","primary",3,"title","click"],[1,"fas","fa-plus-circle","fa-2x"],[2,"color","rgba(0,0,0,0.54)"],[4,"ngIf"],["floatLabel","never",1,"input-form"],["matInput","","matTextareaAutosize","","matAutosizeMinRows","1","cdkAutosizeMaxRows","6","disabled","",3,"placeholder"],["type","number","matInput","","disabled","",3,"placeholder"],["disabled","",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","disabled","",3,"matDatepicker","placeholder","click"],["matSuffix","",3,"for"],["picker",""],["color","primary","disabled","",1,"radio-form"],[1,"input-form","checkbox-form"],["disabled","",1,"div-list"],["sampleList",""],["checkboxPosition","before",3,"value",4,"ngFor","ngForOf"],[1,"checkbox-selected-list"],["checkboxPosition","before",3,"value"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,Hy,2,1,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Wb(13,"mat-tab-group"),u.Wb(14,"mat-tab",9),u.Oc(15,By,1,1,"div",10),u.Wb(16,"mat-accordion"),u.Oc(17,Jy,20,19,"mat-expansion-panel",11),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(18,"mat-sidenav",12,13),u.Wb(20,"mat-tab-group"),u.Wb(21,"mat-tab",9),u.Oc(22,lD,13,8,"div",14),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(3),u.oc("label",e.translate.instant("lang.usableFields")),u.Db(1),u.oc("ngIf",0===e.customFields.length),u.Db(2),u.oc("ngForOf",e.customFields),u.Db(1),u.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode()),u.Db(3),u.oc("label",e.translate.instant("lang.customFieldsTypesAvailable")),u.Db(1),u.oc("ngForOf",e.customFieldsTypes))},directives:[C.e,C.f,x.a,W.a,Ee.c,Ee.a,O.t,Ae.a,O.s,C.d,Rt.h,Rt.d,o.f,Tt.a,Rt.c,j.l,Ae.c,Ae.g,Ae.h,Ae.f,S.c,k.b,c.d,c.u,c.x,R.b,no.a,S.j,k.d,it.a,j.p,He.h,He.j,He.f,Xe.b,Xe.a,Rt.i,eo.d,Rt.f,eo.a],pipes:[p.d],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}.mat-divider[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.customFielsdPanel[_ngcontent-%COMP%], .customFielsdPanel[_ngcontent-%COMP%]    .mat-tab-body-wrapper{padding-left:0}.mat-expansion-panel-header-description[_ngcontent-%COMP%]{flex-direction:row-reverse}.customFieldValues[_ngcontent-%COMP%]{box-shadow:none;border:1px solid rgba(0,0,0,.12)}.mat-expansion-panel[_ngcontent-%COMP%]{margin:5px}.mat-accordion[_ngcontent-%COMP%]{padding:5px}.mat-tab-body-content[_ngcontent-%COMP%], .mat-tab-body-wrapper[_ngcontent-%COMP%], .mat-tab-group[_ngcontent-%COMP%]{height:100%}.actionsCustomFields[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.actionValuesCustom[_ngcontent-%COMP%]{display:flex}.alert-message-info[_ngcontent-%COMP%]{margin-top:30px;max-width:100%}.addCustomFieldTypeContainer[_ngcontent-%COMP%]{justify-content:center;display:flex;align-items:center;width:60px}.customFieldsTypesItem[_ngcontent-%COMP%]{display:flex;padding-top:10px;padding-bottom:10px}.mat-badge-content[_ngcontent-%COMP%]{top:2px!important}",".banner[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:30px;border-radius:20px;border:1px solid #ccc;position:relative;padding:20px;width:100%}.banner[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;max-width:85%;text-overflow:ellipsis;z-index:1;font-size:20px;font-weight:700;letter-spacing:2px;position:absolute;top:-18px;left:20px;padding:0;margin:0;color:#135f7f}.banner[_ngcontent-%COMP%]   .title-divider[_ngcontent-%COMP%]{position:absolute;width:99%;z-index:-1;top:17px;background:#fff;height:1px}.banner[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:50%;padding-right:10px}.banner[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{font-size:16px}.fieldRow[_ngcontent-%COMP%]{display:flex;padding-top:10px;padding-bottom:10px}.fieldLabel[_ngcontent-%COMP%]{color:#4a4a4a}.fieldLabel[_ngcontent-%COMP%]   .cdk-drag-handle[_ngcontent-%COMP%]{margin-right:10px}.fieldState[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px;width:40px;justify-content:center;align-items:normal!important;padding-top:15px}.fieldState[_ngcontent-%COMP%]   .fieldRequired[_ngcontent-%COMP%]{font-size:5px;color:#135f7f}.fieldState[_ngcontent-%COMP%]   .fieldError[_ngcontent-%COMP%]{font-size:15px;color:#f99830}.fieldState[_ngcontent-%COMP%]   .fieldFull[_ngcontent-%COMP%]{font-size:15px;color:green}.fieldInput[_ngcontent-%COMP%]{position:relative}.fieldInput[_ngcontent-%COMP%], .fieldLabel[_ngcontent-%COMP%]{font-size:13px;flex:1}@media (max-width:768px){.fieldInput[_ngcontent-%COMP%], .fieldLabel[_ngcontent-%COMP%]{font-size:1em}}.fieldInput[_ngcontent-%COMP%], .fieldLabel[_ngcontent-%COMP%], .fieldState[_ngcontent-%COMP%]{align-items:center;display:flex}.input-form[_ngcontent-%COMP%]{font-size:13px;color:#666;width:500px}.input-form[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{color:#135f7f;padding-left:20px}.input-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.input-form[_ngcontent-%COMP%]    .mat-select-value-text{padding-left:20px;color:#135f7f}.input-form[_ngcontent-%COMP%]    .mat-form-field-label{top:15px;left:20px}.input-form[_ngcontent-%COMP%]    .mat-form-field-infix{display:flex;padding-top:0;padding-bottom:5px}.input-form[_ngcontent-%COMP%]    .mat-form-field-label-wrapper{top:-13px}.input-form[_ngcontent-%COMP%]    .mat-form-field-flex{background:#fff;height:40px;border-radius:10px;border:1px solid #135f7f}.input-form[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.input-form[_ngcontent-%COMP%]    .mat-form-field-suffix{margin-right:20px}.input-form[_ngcontent-%COMP%]    .mat-select-arrow-wrapper{padding-right:20px}.input-form[_ngcontent-%COMP%]    .mat-list-option{color:rgba(0,0,0,.54)}.input-form[_ngcontent-%COMP%]    .mat-form-field-wrapper{padding:0}.input-form[_ngcontent-%COMP%]    .mat-datepicker-toggle-default-icon{height:auto}.input-form.search-select[_ngcontent-%COMP%]    .mat-form-field-label-wrapper{top:-15px}.input-form.input-date[_ngcontent-%COMP%]    .mat-form-field-flex{align-items:center}.input-form.input-date[_ngcontent-%COMP%]    .mat-date-range-input-start-wrapper{flex:1}.input-form.input-date[_ngcontent-%COMP%]    .mat-date-range-input-inner{color:#135f7f}.input-form-filled[_ngcontent-%COMP%]{color:#fff;width:500px;transition:all .1s}.input-form-filled[_ngcontent-%COMP%]:hover    .mat-form-field-flex, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-form-field-flex{background:#fff!important;border:1px solid #fff!important;color:#135f7f!important;transition:all .1s}.input-form-filled[_ngcontent-%COMP%]:hover    .mat-form-field-label, .input-form-filled[_ngcontent-%COMP%]:hover    .mat-select-placeholder, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-form-field-label, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-select-placeholder{color:#135f7f!important}.input-form-filled[_ngcontent-%COMP%]:hover    .mat-select-arrow, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-select-arrow{color:rgba(19,95,127,.54)}.input-form-filled[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{color:#135f7f;padding-left:20px}.input-form-filled[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-select-value{text-align:left;font-weight:400}.input-form-filled[_ngcontent-%COMP%]    .mat-select-value-text{padding-left:20px;color:#fff}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-label{color:#fff;left:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-infix{padding-bottom:15px}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-flex{background:#135f7f;border-radius:30px;border:1px solid #fff}.input-form-filled[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-suffix{margin-right:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-select-arrow-wrapper{padding-right:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-select-arrow{color:hsla(0,0%,100%,.54)}.input-form-filled[_ngcontent-%COMP%]    .mat-select-placeholder{color:#fff}.input-form-filled[_ngcontent-%COMP%]    .mat-list-option{color:rgba(0,0,0,.54)}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-wrapper{padding:0}.input-form-filled[_ngcontent-%COMP%]   textarea.cdk-textarea-autosize-measuring[_ngcontent-%COMP%]{padding:4px 0!important}.input-form-filled[_ngcontent-%COMP%]    .mat-datepicker-toggle-default-icon{height:auto}.input-form.mat-form-field-disabled[_ngcontent-%COMP%]    .mat-input-element{cursor:not-allowed;padding-left:20px}.input-form.mat-form-field-disabled[_ngcontent-%COMP%]    .mat-form-field-flex{cursor:not-allowed;border:1px dashed #353232}.opt-group[_ngcontent-%COMP%]{font-weight:700}.smallInput[_ngcontent-%COMP%]{font-size:11px;padding-left:20px;padding-right:20px}.smallInput[_ngcontent-%COMP%]    .mat-form-field-infix{padding:0 0 5px}.button-form-primary[_ngcontent-%COMP%]{background:#fff;border:1px solid #135f7f;color:#135f7f;border-radius:30px;padding-left:20px;padding-right:20px;width:240px;height:45px;transition:all .1s}@media (max-width:768px){.button-form-primary[_ngcontent-%COMP%]{width:auto}}.button-form-primary[_ngcontent-%COMP%]:hover, .button-form-primary[aria-expanded=true][_ngcontent-%COMP%]{background:#135f7f!important;border:1px solid #fff!important;color:#fff!important;transition:all .1s}.button-form-primary[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;align-items:center;justify-content:center;width:100%}.button-form-primary[_ngcontent-%COMP%]    .mat-button-wrapper .menu-label{display:flex;flex:1;overflow:hidden;text-overflow:ellipsis;margin-right:10px}.button-form-primary[_ngcontent-%COMP%]    .mat-button-wrapper .menu-icon{display:flex}.button-form-primary-filled[_ngcontent-%COMP%]{background:#135f7f;border:1px solid #fff;color:#fff;border-radius:30px;padding-left:20px;padding-right:20px;width:240px;height:45px;transition:all .1s}@media (max-width:768px){.button-form-primary-filled[_ngcontent-%COMP%]{width:auto}}.button-form-primary-filled[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;align-items:center;justify-content:center;width:100%}.button-form-primary-filled[_ngcontent-%COMP%]    .mat-button-wrapper .menu-label{display:flex;flex:1;overflow:hidden;text-overflow:ellipsis;margin-right:10px}.button-form-primary-filled[_ngcontent-%COMP%]    .mat-button-wrapper .menu-icon{display:flex}.button-form-primary-alt[_ngcontent-%COMP%]{font-size:13px;background:#135f7f;border:1px solid #fff;color:#fff;border-radius:30px;padding:5px 20px;width:240px;transition:all .1s}@media (max-width:768px){.button-form-primary-alt[_ngcontent-%COMP%]{font-size:1em}}.button-form-primary-alt[_ngcontent-%COMP%]:hover, .button-form-primary-alt[aria-expanded=true][_ngcontent-%COMP%]{background:#fff!important;border:1px solid #fff!important;color:#135f7f!important;transition:all .1s}.button-form-primary-alt[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;align-items:center;justify-content:center;width:100%}.button-form-primary-alt[_ngcontent-%COMP%]    .mat-button-wrapper .menu-label{display:flex;flex:1}.button-form-primary-alt[_ngcontent-%COMP%]    .mat-button-wrapper .menu-icon{display:flex}.button-form-primary[aria-expanded=true][_ngcontent-%COMP%]{color:#135f7f;background:#fff;transition:all .1s;border:1px solid #135f7f}.button-form[_ngcontent-%COMP%]{background:#fff;color:#135f7f;border-radius:30px;padding:5px 20px;width:240px;transition:all .1s}.button-form[aria-expanded=true][_ngcontent-%COMP%]{transition:all .1s;border-bottom-left-radius:0;border-bottom-right-radius:0;border-top-left-radius:30px;border-top-right-radius:30px} .menuForm{width:240px;border-radius:30px;border:1px solid #fff;min-height:auto} .menuForm .mat-menu-content{padding-top:0;padding-bottom:0} .menuForm .mat-menu-content .mat-menu-item{transition:all .1s;font-size:13px;color:#666}@media (max-width:768px){ .menuForm .mat-menu-content .mat-menu-item{font-size:1em}} .menuForm .mat-menu-content .mat-menu-item:hover{transition:all .1s;color:#fff;background:#1a80ab} .parametersFieldsMenu{min-height:auto}.div-list[_ngcontent-%COMP%]{padding:0;max-height:150px;overflow:auto}.div-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{font-size:13px}@media (max-width:768px){.div-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{font-size:1em}}.checkbox-form[_ngcontent-%COMP%]{width:100%;padding:0;border:1px solid #135f7f;border-radius:30px;overflow:hidden}.checkbox-selected-list[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:center}.checkbox-selected-list[_ngcontent-%COMP%]    .mat-chip-list-wrapper{justify-content:center}.checkbox-selected-list[_ngcontent-%COMP%]   .mat-chip[_ngcontent-%COMP%]{font-size:13px}@media (max-width:768px){.checkbox-selected-list[_ngcontent-%COMP%]   .mat-chip[_ngcontent-%COMP%]{font-size:1em}}.radio-form[_ngcontent-%COMP%]{padding-left:20px;display:grid;grid-template-columns:repeat(2,1fr);width:100%}.radio-form[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]{flex:1}.radio-form[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]    .mat-radio-label-content{font-weight:400;color:rgba(0,0,0,.54)}.radio-form[_ngcontent-%COMP%]   .mat-radio-disabled[_ngcontent-%COMP%]{opacity:.5}.input-radio[_ngcontent-%COMP%]    .mat-form-field-infix{overflow:auto;padding-top:0}.input-radio[_ngcontent-%COMP%]    .mat-form-field-flex{height:auto}.input-radio[_ngcontent-%COMP%]    .mat-form-field-label{top:0;font-size:12px}.disabled[_ngcontent-%COMP%]{opacity:.2}.customFieldRow[_ngcontent-%COMP%]{display:flex;padding-top:20px;padding-bottom:20px}.customFieldDrag[_ngcontent-%COMP%]{cursor:move;width:50px;display:flex;align-items:center;justify-content:center}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drag-preview[_ngcontent-%COMP%]{background:#fff;box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.indexingModelsCustomFieldsList.cdk-drop-list-dragging[_ngcontent-%COMP%]   .indexingModelsCustomFieldsList[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.advancedInput[_ngcontent-%COMP%]{flex-direction:column}.noMandatory[_ngcontent-%COMP%]{visibility:hidden}.checkboxInput[_ngcontent-%COMP%]{display:block}.categoryLabel[_ngcontent-%COMP%]{letter-spacing:1px;font-size:13px;color:#135f7f;font-weight:700}@media (max-width:768px){.categoryLabel[_ngcontent-%COMP%]{font-size:1em}}.textareaInput[_ngcontent-%COMP%]    .mat-form-field{line-height:normal}.textareaInput[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{padding:0;margin:0;color:#135f7f}.textareaInput[_ngcontent-%COMP%]    .mat-form-field-flex{padding-left:20px;height:auto!important;min-height:40px!important}.textareaInput[_ngcontent-%COMP%]    .mat-form-field-label{left:0}"]}),sD),bD=a("Gon0"),uD=["adminMenuTemplate"];function pD(t,e){if(1&t&&(u.Wb(0,"a",11),u.Rb(1,"mat-icon",12),u.Wb(2,"p",13),u.Qc(3),u.Vb(),u.Vb()),2&t){var a=e.$implicit;u.Ib("active",a.current),u.oc("routerLink",a.route),u.Db(1),u.Fb(a.icon),u.Db(2),u.Sc(" ",a.label," ")}}function fD(t,e){if(1&t&&(u.Wb(0,"mat-nav-list"),u.Oc(1,pD,4,6,"a",10),u.Vb()),2&t){var a=u.hc();u.Db(1),u.oc("ngForOf",a.subMenus)}}function mD(t,e){if(1&t){var a=u.Xb();u.Wb(0,"app-contact-form",14),u.dc("onSubmitEvent",(function(){return u.Dc(a),u.hc().goToList()})),u.Vb()}if(2&t){var n=u.hc();u.oc("creationMode",n.creationMode)("contactId",n.contactId)}}var gD,hD=((gD=function(){function t(e,a,n,i,o,r,c,l){_classCallCheck(this,t),this.translate=e,this.http=a,this.route=n,this.router=i,this.headerService=o,this.appService=r,this.dialog=c,this.viewContainerRef=l,this.loading=!1,this.creationMode=!0,this.subMenus=[{icon:"fa fa-book",route:"/administration/contacts/list",label:this.translate.instant("lang.contactsList"),current:!1},{icon:"fa fa-code",route:"/administration/contacts/contactsCustomFields",label:this.translate.instant("lang.customFieldsAdmin"),current:!1},{icon:"fa fa-cog",route:"/administration/contacts/contacts-parameters",label:this.translate.instant("lang.contactsParameters"),current:!1},{icon:"fa fa-users",route:"/administration/contacts/contacts-groups",label:this.translate.instant("lang.contactsGroups"),current:!1},{icon:"fas fa-magic",route:"/administration/contacts/duplicates",label:this.translate.instant("lang.duplicatesContactsAdmin"),current:!1}],this.contactId=null}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.route.params.subscribe((function(e){void 0===e.id?(t.headerService.setHeader(t.translate.instant("lang.contactCreation")),t.creationMode=!0,t.loading=!1):(t.headerService.setHeader(t.translate.instant("lang.contactModification")),t.creationMode=!1,t.contactId=e.id,t.loading=!1)}))}},{key:"goToList",value:function(){this.router.navigate(["/administration/contacts/list"])}}]),t}()).\u0275fac=function(t){return new(t||gD)(u.Qb(p.e),u.Qb(f.b),u.Qb(o.a),u.Qb(o.c),u.Qb(m.a),u.Qb(g.a),u.Qb(N.b),u.Qb(u.T))},gD.\u0275cmp=u.Kb({type:gD,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&u.Kc(uD,!0),2&t&&u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first)},decls:14,vars:7,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],[3,"creationMode","contactId","onSubmitEvent",4,"ngIf"],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],["mat-line",""],[3,"creationMode","contactId","onSubmitEvent"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,fD,2,1,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,mD,1,2,"app-contact-form",9),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",!e.loading))},directives:[C.e,C.f,x.a,W.a,O.t,Rt.h,O.s,Rt.d,o.f,Tt.a,Rt.c,j.l,bD.a],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}"]}),gD),vD=["adminMenuTemplate"];function yD(t,e){1&t&&(u.Wb(0,"mat-nav-list"),u.Wb(1,"h3",29),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"a",30),u.Rb(5,"mat-icon",31),u.Wb(6,"p",32),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(2),u.Rc(u.jc(3,2,"lang.actions")),u.Db(5),u.Sc(" ",u.jc(8,4,"lang.add")," "))}function DD(t,e){1&t&&(u.Wb(0,"mat-header-cell",33),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.label")))}function VD(t,e){if(1&t&&(u.Wb(0,"mat-cell",34),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.label," ")}}function CD(t,e){1&t&&(u.Wb(0,"mat-header-cell",33),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.description")))}function xD(t,e){if(1&t&&(u.Wb(0,"mat-cell",34),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.description," ")}}function MD(t,e){1&t&&u.Rb(0,"mat-header-cell")}function WD(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-cell",35),u.Wb(1,"button",36),u.dc("click",(function(t){u.Dc(a);var n=e.$implicit,i=u.hc();return t.stopPropagation(),i.deleteTag(n)})),u.Rb(2,"mat-icon",37),u.Vb(),u.Vb()}if(2&t){var n=u.hc();u.Db(1),u.oc("title",n.translate.instant("lang.delete"))}}function OD(t,e){1&t&&u.Rb(0,"mat-header-row")}function _D(t,e){1&t&&u.Rb(0,"mat-row",38),2&t&&u.qc("routerLink","/administration/tags/",e.$implicit.id,"")}var SD,kD=((SD=function(){function t(e,a,n,i,o,r,c,l,s){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.headerService=i,this.appService=o,this.dialog=r,this.functions=c,this.adminService=l,this.viewContainerRef=s,this.loading=!0,this.resultsLength=0,this.displayedColumns=["label","description","actions"],this.filterColumns=["label","description"]}return _createClass(t,[{key:"ngOnInit",value:function(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.tags")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loadList()}},{key:"loadList",value:function(){var t=this;this.loading=!0,this.http.get("../rest/tags").pipe(Object(d.a)((function(e){t.resultsLength=e.tags.length,setTimeout((function(){t.adminService.setDataSource("admin_tag",e.tags,t.sort,t.paginator,t.filterColumns)}),0)})),Object(Dt.a)((function(){return t.loading=!1}))).subscribe()}},{key:"deleteTag",value:function(t){var e=this;this.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:"".concat(this.translate.instant("lang.delete"),' "').concat(t.label,'"'),msg:this.translate.instant("lang.confirmAction")}}).afterClosed().pipe(Object(J.a)((function(t){return"ok"===t})),Object(Y.a)((function(){return e.http.delete("../rest/tags/"+t.id)})),Object(d.a)((function(){e.loadList(),e.notify.success(e.translate.instant("lang.tagDeleted"))})),Object(b.a)((function(t){return e.notify.handleSoftErrors(t),Object(X.of)(!1)}))).subscribe()}}]),t}()).\u0275fac=function(t){return new(t||SD)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a),u.Qb(N.b),u.Qb(D.a),u.Qb(jt),u.Qb(u.T))},SD.\u0275cmp=u.Kb({type:SD,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(vD,!0),u.Xc(H.a,!0),u.Xc(B.a,!0)),2&t&&(u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.paginator=a.first),u.yc(a=u.ec())&&(e.sort=a.first))},decls:38,vars:20,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],[1,"table-head"],[1,"table-head-result"],[2,"font-size","13px"],["matInput","",3,"formControl","placeholder"],[1,"table-head-tool"],[3,"length","hidePageSize","pageSize"],["paginator",""],[2,"height","90%","overflow","auto","position","absolute","width","100%"],["id","contact-list","matSort","","matSortDisableClear","",2,"width","100%",3,"dataSource"],["tableContactListSort","matSort"],["matColumnDef","label"],["mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor: pointer;",3,"routerLink",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","display","flex","justify-content","end","align-items","center","padding-left","20px"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/tags/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],["mat-sort-header",""],["mat-cell",""],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"title","click"],[1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,yD,9,6,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Wb(13,"div",9),u.Wb(14,"div",10),u.Wb(15,"mat-form-field",11),u.Rb(16,"input",12),u.ic(17,"translate"),u.Vb(),u.Vb(),u.Wb(18,"div",13),u.Rb(19,"mat-paginator",14,15),u.Vb(),u.Vb(),u.Wb(21,"div",16),u.Wb(22,"mat-table",17,18),u.Ub(24,19),u.Oc(25,DD,3,3,"mat-header-cell",20),u.Oc(26,VD,2,1,"mat-cell",21),u.Tb(),u.Ub(27,22),u.Oc(28,CD,3,3,"mat-header-cell",20),u.Oc(29,xD,2,1,"mat-cell",21),u.Tb(),u.Ub(30,23),u.Oc(31,MD,1,0,"mat-header-cell",24),u.Oc(32,WD,3,1,"mat-cell",25),u.Tb(),u.Oc(33,OD,1,0,"mat-header-row",26),u.Oc(34,_D,1,1,"mat-row",27),u.Vb(),u.Wb(35,"div",28),u.Qc(36),u.ic(37,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(5),u.pc("placeholder",u.jc(17,16,"lang.filterBy")),u.oc("formControl",e.adminService.getFilterField()),u.Db(3),u.oc("length",100)("hidePageSize",!0)("pageSize",10),u.Db(3),u.oc("dataSource",e.adminService.getDataSource()),u.Db(11),u.oc("matHeaderRowDef",e.displayedColumns),u.Db(1),u.oc("matRowDefColumns",e.displayedColumns),u.Db(2),u.Tc(" ",e.resultsLength," ",u.jc(37,18,"lang.tags"),""))},directives:[C.e,C.f,x.a,W.a,S.c,k.b,c.d,c.u,c.j,H.a,q.o,B.a,q.c,q.i,q.b,q.k,q.n,Rt.h,Rt.g,Rt.d,o.f,Tt.a,Rt.c,j.l,q.h,B.b,q.a,R.b,q.j,q.m,o.d],pipes:[p.d],encapsulation:2}),SD),wD=["linkedTagInput"];function ID(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-chip",31),u.dc("click",(function(){u.Dc(a);var t=e.$implicit;return u.hc(2).remove(t)}))("removed",(function(){u.Dc(a);var t=e.$implicit;return u.hc(2).remove(t)})),u.Qc(1),u.Rb(2,"mat-icon",32),u.Vb()}if(2&t){var n=e.$implicit,i=u.hc(2);u.Db(1),u.Sc(" ",i.getTagLabel(n)," ")}}function jD(t,e){if(1&t&&(u.Wb(0,"mat-option",33),u.Qc(1),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.oc("value",a)("disabled",n.isSelected(a)||a.id==n.id),u.Db(1),u.Sc(" ",a.label," ")}}function RD(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-form-field"),u.Wb(1,"mat-chip-list",null,24),u.Oc(3,ID,3,1,"mat-chip",25),u.Rb(4,"input",26,27),u.Vb(),u.Wb(6,"mat-autocomplete",28,29),u.dc("optionSelected",(function(t){return u.Dc(a),u.hc().selected(t)})),u.Oc(8,jD,2,3,"mat-option",30),u.ic(9,"async"),u.Vb(),u.Vb()}if(2&t){var n=u.zc(2),i=u.zc(7),o=u.hc();u.Db(3),u.oc("ngForOf",o.tag.links.value),u.Db(1),u.oc("placeholder",o.translate.instant("lang.linkedTags"))("formControl",o.myControl)("matAutocomplete",i)("matChipInputFor",n),u.Db(4),u.oc("ngForOf",u.jc(9,6,o.filteredOptions))}}function TD(t,e){1&t&&(u.Wb(0,"div",34),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc(" ",u.jc(2,1,"lang.cannotMergeTags")," "))}function PD(t,e){if(1&t){var a=u.Xb();u.Wb(0,"plugin-select-search",35),u.dc("afterOpened",(function(){return u.Dc(a),u.hc().getTags()}))("afterSelected",(function(t){return u.Dc(a),u.hc().mergeTag(t)})),u.Vb()}if(2&t){var n=u.hc();u.oc("label",n.translate.instant("lang.mergeTagWith"))("placeholderLabel",n.translate.instant("lang.mergeTagWith"))("formControlSelect",n.selectMergeTag)("datas",n.tags)}}var QD,FD=((QD=function(){function t(e,a,n,i,o,r,l,s,d){_classCallCheck(this,t),this.translate=e,this.http=a,this.route=n,this.router=i,this.notify=o,this.headerService=r,this.appService=l,this.functions=s,this.dialog=d,this.loading=!1,this.loadingTags=!0,this.advancedMode=!1,this.tags=[],this.tag={label:new c.i({value:"",disabled:!1},[c.I.required]),description:new c.i({value:"",disabled:!1}),parentId:new c.i({value:"",disabled:!1}),links:new c.i({value:[],disabled:!1}),usage:new c.i({value:"",disabled:!1}),canMerge:new c.i({value:!0,disabled:!1}),countResources:new c.i({value:0,disabled:!1})},this.myControl=new c.i,this.selectMergeTag=new c.i({value:"",disabled:!1}),this.tagFormGroup=new c.l(this.tag),this.currTagChildren=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.route.params.subscribe((function(e){return Object(yt.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){var a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.id=e.id,t.next=3,this.getTags();case 3:void 0===e.id?(this.headerService.setHeader(this.translate.instant("lang.tagCreation")),this.creationMode=!0,this.loading=!1):(this.creationMode=!1,this.http.get("../rest/tags/"+this.id).pipe(Object(d.a)((function(t){Object.keys(a.tag).forEach((function(e){a.functions.empty(t[e])||a.tag[e].setValue(t[e])})),a.functions.empty(a.tag.parentId.value)||a.toggleAdvancedTag(),a.headerService.setHeader(a.translate.instant("lang.tagModification"),a.tag.label.value)})),Object(Dt.a)((function(){return a.loading=!1})),Object(b.a)((function(t){return a.notify.handleErrors(t),Object(r.a)(!1)}))).subscribe());case 4:case"end":return t.stop()}}),t,this)})))}))}},{key:"onSubmit",value:function(){this.creationMode?this.createTag():this.updateTag()}},{key:"formatTag",value:function(){var t=this,e={};return Object.keys(this.tag).forEach((function(a){e[a]=t.tag[a].value})),e}},{key:"createTag",value:function(){var t=this;this.http.post("../rest/tags",this.formatTag()).pipe(Object(d.a)((function(){t.notify.success(t.translate.instant("lang.tagAdded")),t.router.navigate(["/administration/tags"])})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(r.a)(!1)}))).subscribe()}},{key:"updateTag",value:function(){var t=this;this.http.put("../rest/tags/"+this.id,this.formatTag()).pipe(Object(d.a)((function(){t.notify.success(t.translate.instant("lang.tagUpdated")),t.router.navigate(["/administration/tags"])})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(r.a)(!1)}))).subscribe()}},{key:"getTags",value:function(){var t=this;return new Promise((function(e){t.http.get("../rest/tags").pipe(Object(d.a)((function(a){t.tags=a.tags.map((function(e){return{id:e.id,label:e.label,parentId:e.parentId,countResources:e.countResources,disabled:e.id==t.id}})),e(!0)})),Object(Dt.a)((function(){return t.loadingTags=!1})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(r.a)(!1)}))).subscribe()}))}},{key:"mergeTag",value:function(t){var e=this;this.selectMergeTag.reset();var a=this.tags.filter((function(e){return e.id===t}))[0],n="".concat(this.translate.instant("lang.confirmAction"),"<br/><br/>").concat(this.translate.instant("lang.theTag"),'<b> "').concat(this.tag.label.value,'" </b>').concat(this.translate.instant("lang.willBeDeletedAndMerged"),'<b> "').concat(a.label,'"</b><br/><br/>').concat(this.translate.instant("lang.willBeTransferredToNewTag"),'<b> "').concat(a.label,'"</b> : <b>').concat(this.tag.countResources.value,"</b>");this.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:"".concat(this.translate.instant("lang.mergeWith"),'  "').concat(a.label,'"'),msg:n}}).afterClosed().pipe(Object(J.a)((function(t){return"ok"===t})),Object(Y.a)((function(){return e.http.put("../rest/mergeTags",{idMaster:a.id,idMerge:e.id})})),Object(d.a)((function(){e.notify.success(e.translate.instant("lang.tagMerged")),e.router.navigate(["/administration/tags/"+a.id])})),Object(b.a)((function(t){return e.notify.handleSoftErrors(t),Object(r.a)(!1)}))).subscribe()}},{key:"toggleAdvancedTag",value:function(){return Object(yt.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.advancedMode=!this.advancedMode,this.getTagsTree(),this.filteredOptions=this.myControl.valueChanges.pipe(Object(l.a)(null),Object(s.a)((function(t){return t?e._filter(t):e.tags.slice()})));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"_filter",value:function(t){var e=t;return"string"==typeof t&&(e=t.toLowerCase()),this.tags.filter((function(t){return t.label.toLowerCase().indexOf(e)>-1}))}},{key:"isSelected",value:function(t){return this.tag.links.value.filter((function(e){return e==t.id})).length>0}},{key:"remove",value:function(t){var e=this.tag.links.value.indexOf(t);e>=0&&this.tag.links.value.splice(e,1)}},{key:"selected",value:function(t){var e=this.tag.links.value;e.push(t.option.value.id),this.tag.links.setValue(e),this.linkedTagInput.nativeElement.value="",this.myControl.setValue(null)}},{key:"getTagsTree",value:function(){var t=this;this.functions.empty(this.id)||this.getChildrens(this.id);var e=this.tags.map((function(e){return{id:e.id,text:e.label,parent:t.functions.empty(e.parentId)?"#":e.parentId,state:{opened:t.tag.parentId.value==e.id,selected:t.tag.parentId.value==e.id,disabled:t.currTagChildren.indexOf(e.id.toString())>-1}}}));setTimeout((function(){$("#jstree").on("select_node.jstree",(function(e,a){t.tag.parentId.setValue(parseInt(a.node.id))})).on("deselect_node.jstree",(function(e,a){t.tag.parentId.setValue(null)})).jstree({checkbox:{deselect_all:!0,three_state:!1},core:{force_text:!0,themes:{name:"proton",responsive:!0},multiple:!1,data:e},plugins:["checkbox","search","sort"]});var a=!1;$("#jstree_search").keyup((function(){a&&clearTimeout(a),a=setTimeout((function(){var t=$("#jstree_search").val();$("#jstree").jstree(!0).search(t)}),250)}))}),0)}},{key:"getChildrens",value:function(t){var e=this;this.currTagChildren.push(t.toString()),this.tags.filter((function(e){return e.parentId==t})).forEach((function(t){e.getChildrens(t.id)}))}},{key:"getTagLabel",value:function(t){return this.tags.filter((function(e){return e.id==t}))[0].label}}]),t}()).\u0275fac=function(t){return new(t||QD)(u.Qb(p.e),u.Qb(f.b),u.Qb(o.a),u.Qb(o.c),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a),u.Qb(D.a),u.Qb(N.b))},QD.\u0275cmp=u.Kb({type:QD,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&u.Xc(wD,!0),2&t&&u.yc(a=u.ec())&&(e.linkedTagInput=a.first)},decls:39,vars:29,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],[2,"height","90%","overflow","auto","position","absolute","width","100%"],[2,"padding","20px",3,"ngSubmit"],["matInput","","type","text","maxlength","128","required","",3,"formControl","placeholder"],["matInput","","type","text",3,"formControl","placeholder"],[4,"ngIf"],["class","alert-message alert-message-danger","style","min-width: 100%;",4,"ngIf"],["style","width:100%;",3,"label","placeholderLabel","formControlSelect","datas","afterOpened","afterSelected",4,"ngIf"],[1,"text-center"],["mat-raised-button","","color","primary",3,"disabled"],["type","button","mat-raised-button","","color","default",3,"click"],["fixedTopGap","56","position","end",2,"overflow-x","hidden","width","450px",3,"mode","fixedInViewport","opened"],["snav2",""],["mat-subheader",""],[2,"padding","10px"],["matInput","","id","jstree_search","name","jstree_search","type","text",3,"placeholder"],["id","jstree"],["chipList",""],["style","cursor: pointer;",3,"click","removed",4,"ngFor","ngForOf"],[3,"placeholder","formControl","matAutocomplete","matChipInputFor"],["linkedTagInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],[2,"cursor","pointer",3,"click","removed"],["matChipRemove","",1,"fa","fa-times-circle"],[3,"value","disabled"],[1,"alert-message","alert-message-danger",2,"min-width","100%"],[2,"width","100%",3,"label","placeholderLabel","formControlSelect","datas","afterOpened","afterSelected"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Wb(1,"mat-sidenav-content"),u.Wb(2,"div",1),u.Wb(3,"div",2),u.Wb(4,"div",3),u.Rb(5,"header-left"),u.Vb(),u.Wb(6,"div",4),u.Rb(7,"header-right"),u.Vb(),u.Vb(),u.Rb(8,"div",5),u.Vb(),u.Wb(9,"div",6),u.Wb(10,"div",7),u.Wb(11,"div",8),u.Wb(12,"form",9),u.dc("ngSubmit",(function(){return e.onSubmit()})),u.Wb(13,"mat-form-field"),u.Rb(14,"input",10),u.Vb(),u.Wb(15,"mat-form-field"),u.Rb(16,"textarea",11),u.Vb(),u.Wb(17,"mat-form-field"),u.Rb(18,"input",11),u.Vb(),u.Oc(19,RD,10,8,"mat-form-field",12),u.Oc(20,TD,3,3,"div",13),u.Oc(21,PD,1,4,"plugin-select-search",14),u.Wb(22,"div",15),u.Wb(23,"button",16),u.Qc(24),u.ic(25,"translate"),u.Vb(),u.Wb(26,"button",17),u.dc("click",(function(){return e.toggleAdvancedTag()})),u.Qc(27),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(28,"mat-sidenav",18,19),u.Wb(30,"mat-list"),u.Wb(31,"h3",20),u.Qc(32),u.ic(33,"translate"),u.Vb(),u.Wb(34,"div",21),u.Wb(35,"mat-form-field"),u.Rb(36,"input",22),u.ic(37,"translate"),u.Vb(),u.Rb(38,"div",23),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(3),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(5),u.oc("formControl",e.tag.label)("placeholder",e.translate.instant("lang.label")),u.Db(2),u.oc("formControl",e.tag.description)("placeholder",e.translate.instant("lang.description")),u.Db(2),u.oc("formControl",e.tag.usage)("placeholder",e.translate.instant("lang.usage")),u.Db(1),u.oc("ngIf",e.advancedMode),u.Db(1),u.oc("ngIf",!e.creationMode&&!e.tag.canMerge.value),u.Db(1),u.oc("ngIf",!e.loadingTags&&e.tag.canMerge.value),u.Db(2),u.oc("disabled",!e.tagFormGroup.valid),u.Db(1),u.Rc(u.jc(25,23,"lang.validate")),u.Db(3),u.Sc(" ",e.translate.instant(e.advancedMode?"lang.defaultMode":"lang.advancedMode")," "),u.Db(1),u.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",e.advancedMode),u.Db(4),u.Sc("",u.jc(33,25,"lang.selectParentTag")," :"),u.Db(4),u.pc("placeholder",u.jc(37,27,"lang.searchTag")))},directives:[C.e,C.f,x.a,W.a,c.K,c.v,c.w,S.c,k.b,c.d,c.p,c.F,c.u,c.j,O.t,R.b,C.d,Rt.a,Rt.g,eo.d,O.s,ao.d,eo.c,ao.a,eo.a,Tt.a,eo.e,j.p,Ds.a],pipes:[p.d,O.b],encapsulation:2}),QD),LD=a("q3Kh"),ED=["snav2"],AD=["maarchTree"];function UD(t,e){1&t&&(u.Wb(0,"div",15),u.Rb(1,"mat-spinner",16),u.Vb())}var zD=function(t){return[t]};function $D(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-card",17),u.Wb(1,"form",18,19),u.dc("ngSubmit",(function(){return u.Dc(a),u.hc().onSubmit()})),u.Wb(3,"mat-form-field"),u.Wb(4,"input",20),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().alfresco.label=t})),u.ic(5,"translate"),u.ic(6,"translate"),u.Vb(),u.Vb(),u.Wb(7,"div",21),u.Wb(8,"div",22),u.Wb(9,"div",23),u.Qc(10),u.ic(11,"translate"),u.Vb(),u.Wb(12,"div",24),u.Wb(13,"mat-form-field"),u.Wb(14,"input",25),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().alfresco.account.id=t})),u.ic(15,"translate"),u.ic(16,"translate"),u.Vb(),u.Vb(),u.Wb(17,"mat-form-field"),u.Wb(18,"input",26),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().alfresco.account.password=t})),u.Vb(),u.Wb(19,"mat-icon",27),u.dc("click",(function(){u.Dc(a);var t=u.hc();return t.hidePassword=!t.hidePassword})),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(20,"div",28),u.Wb(21,"div",23),u.Qc(22),u.ic(23,"translate"),u.Vb(),u.Wb(24,"mat-form-field"),u.Wb(25,"input",29),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().alfresco.rootFolder=t})),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(26,"div",30),u.Wb(27,"button",31),u.dc("click",(function(){return u.Dc(a),u.hc().checkAccount()})),u.Qc(28),u.ic(29,"translate"),u.Vb(),u.Wb(30,"button",32),u.Qc(31),u.ic(32,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.zc(2),i=u.hc();u.Db(4),u.pc("title",u.jc(5,20,"lang.label")),u.pc("placeholder",u.jc(6,22,"lang.label")),u.oc("ngModel",i.alfresco.label),u.Db(6),u.Sc(" ",u.jc(11,24,"lang.alfrescoAccount")," "),u.Db(4),u.pc("title",u.jc(15,26,"lang.id")),u.pc("placeholder",u.jc(16,28,"lang.id")),u.oc("ngModel",i.alfresco.account.id),u.Db(4),u.oc("ngModel",i.alfresco.account.password)("required",i.creationMode)("title",i.translate.instant(i.creationMode?"lang.password":"lang.changePassword"))("type",i.hidePassword?"password":"text")("placeholder",i.translate.instant(i.creationMode?"lang.password":"lang.changePassword")),u.Db(1),u.oc("ngClass",u.vc(36,zD,i.hidePassword?"fa-eye-slash":"fa-eye")),u.Db(3),u.Sc(" ",u.jc(23,30,"lang.rootFolder")," "),u.Db(3),u.oc("ngModel",i.alfresco.rootFolder)("title",i.translate.instant("lang.id")),u.Db(2),u.oc("disabled",i.functionsService.empty(i.alfresco.account.id)||i.functionsService.empty(i.alfresco.account.password)&&i.creationMode),u.Db(1),u.Rc(u.jc(29,32,"lang.test")),u.Db(2),u.oc("disabled",!n.valid||!i.validAccount()),u.Db(1),u.Rc(u.jc(32,34,"lang.validate"))}}var ND,HD=((ND=function(){function t(e,a,n,i,o,r,c,l){_classCallCheck(this,t),this.translate=e,this.http=a,this.route=n,this.router=i,this.notify=o,this.headerService=r,this.appService=c,this.functionsService=l,this.loading=!1,this.creationMode=!0,this.entities=[],this.availableEntities=[],this.alfresco={id:0,label:"",account:{id:"",password:""},rootFolder:null,linkedEntities:[]},this.hidePassword=!0,this.alfrescoTreeLoaded=!1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.loading=!1,this.route.params.subscribe((function(e){return Object(yt.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e.id?(this.headerService.setHeader(this.translate.instant("lang.alfrescoCreation")),this.creationMode=!0):(this.headerService.setHeader(this.translate.instant("lang.alfrescoModification")),this.alfresco.id=e.id,this.creationMode=!1),t.next=3,this.getEntities();case 3:return t.next=5,this.getAvailableEntities();case 5:return t.next=7,this.initAccount();case 7:this.loading=!1;case 8:case"end":return t.stop()}}),t,this)})))}))}},{key:"onSubmit",value:function(){this.creationMode?this.createAccount():this.updateAccount()}},{key:"createAccount",value:function(){var t=this;this.http.post("../rest/alfresco/accounts",this.formatData()).pipe(Object(kt.tap)((function(){t.notify.success(t.translate.instant("lang.accountAdded")),t.router.navigate(["/administration/alfresco"])})),Object(G.catchError)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"updateAccount",value:function(){var t=this;this.http.put("../rest/alfresco/accounts/"+this.alfresco.id,this.formatData()).pipe(Object(kt.tap)((function(){t.notify.success(t.translate.instant("lang.accountUpdated")),t.router.navigate(["/administration/alfresco"])})),Object(G.catchError)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"formatData",value:function(){var t={label:this.alfresco.label,login:this.alfresco.account.id,nodeId:this.alfresco.rootFolder,entities:this.maarchTree.getSelectedNodes().map((function(t){return t.id}))};return this.functionsService.empty(this.alfresco.account.password)||(t.password=this.alfresco.account.password),t}},{key:"getAvailableEntities",value:function(){var t=this;return new Promise((function(e,a){t.http.get("../rest/alfresco/availableEntities").pipe(Object(kt.tap)((function(a){t.availableEntities=a.availableEntities,e(!0)})),Object(G.catchError)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}))}},{key:"getEntities",value:function(){var t=this;return new Promise((function(e,a){t.http.get("../rest/entities").pipe(Object(LD.map)((function(t){return t.entities=t.entities.map((function(t){return{text:t.entity_label,icon:t.icon,parent_id:t.parentSerialId,id:t.serialId,state:{opened:!0}}})),t.entities})),Object(kt.tap)((function(a){t.entities=a,e(!0)})),Object(G.catchError)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}))}},{key:"initAccount",value:function(){var t=this;return new Promise((function(e,a){t.creationMode?t.http.get("../rest/entities").pipe(Object(LD.map)((function(t){return t.entities=t.entities.map((function(t){return{text:t.entity_label,icon:t.icon,parent_id:t.parentSerialId,id:t.serialId,state:{opened:!0}}})),t.entities})),Object(kt.tap)((function(a){t.entities=a,t.entities.forEach((function(e){e.state.disabled=!(t.availableEntities.indexOf(+e.id)>-1)})),setTimeout((function(){t.initEntitiesTree(t.entities)}),0),e(!0)})),Object(G.catchError)((function(e){return t.notify.handleErrors(e),Object(X.of)(!1)}))).subscribe():t.http.get("../rest/alfresco/accounts/"+t.alfresco.id).pipe(Object(kt.tap)((function(a){t.alfresco={id:a.id,label:a.label,account:{id:a.login},rootFolder:a.nodeId,linkedEntities:a.entities},t.entities.forEach((function(e){e.state.disabled=!(t.availableEntities.indexOf(+e.id)>-1),t.alfresco.linkedEntities.indexOf(+e.id)>-1&&(e.state.disabled=!1,e.state.selected=!0)})),setTimeout((function(){t.initEntitiesTree(t.entities)}),0),e(!0)})),Object(G.catchError)((function(e){return t.notify.handleErrors(e),Object(X.of)(!1)}))).subscribe()}))}},{key:"initEntitiesTree",value:function(t){this.maarchTree.initData(t)}},{key:"validAccount",value:function(){return!this.functionsService.empty(this.alfresco.rootFolder)&&0!==this.maarchTree.getSelectedNodes().length}},{key:"checkAccount",value:function(){var t,e=this;t=this.creationMode?{login:this.alfresco.account.id,password:this.alfresco.account.password,nodeId:this.alfresco.rootFolder}:{accountId:this.alfresco.id,login:this.alfresco.account.id,password:this.alfresco.account.password,nodeId:this.alfresco.rootFolder},this.http.post("../rest/alfresco/checkAccounts",t).pipe(Object(kt.tap)((function(){e.notify.success(e.translate.instant("lang.testSucceeded"))})),Object(G.catchError)((function(t){return e.notify.handleSoftErrors(t),Object(X.of)(!1)}))).subscribe()}}]),t}()).\u0275fac=function(t){return new(t||ND)(u.Qb(p.e),u.Qb(f.b),u.Qb(o.a),u.Qb(o.c),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a),u.Qb(D.a))},ND.\u0275cmp=u.Kb({type:ND,selectors:[["app-alfresco"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(ED,!0),u.Kc(AD,!0)),2&t&&(u.yc(a=u.ec())&&(e.sidenavRight=a.first),u.yc(a=u.ec())&&(e.maarchTree=a.first))},decls:22,vars:14,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",2,"overflow-x","hidden","width","400px",3,"mode","fixedInViewport","opened"],["snav2",""],["mat-subheader",""],[2,"padding","10px"],["maarchTree",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[3,"ngSubmit"],["alfrescoForm","ngForm"],["matInput","","required","","name","label","id","label","type","text","maxlength","64",3,"ngModel","title","placeholder","ngModelChange"],[1,"form-group",2,"flex-direction","row","flex-wrap","wrap"],[1,"formType","ratio-2","col-sm-12"],[1,"formType-title"],[2,"width","100%","text-align","center"],["matInput","","required","","name","accountId","id","accountId","type","text",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","password","id","password",3,"ngModel","required","title","type","placeholder","ngModelChange"],["color","primary","matSuffix","",1,"fa","fa-2x",2,"cursor","pointer",3,"ngClass","click"],[1,"formType","ratio-1","col-sm-12"],["matInput","","required","","name","rootFolder","id","rootFolder","type","text","placeholder","D\xe9p\xf4t racine",3,"ngModel","title","ngModelChange"],[1,"col-sm-12","text-center",2,"padding","10px"],["mat-raised-button","","type","button","color","primary",3,"disabled","click"],["mat-raised-button","","type","submit","color","primary",3,"disabled"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Wb(1,"mat-sidenav-content"),u.Wb(2,"div",1),u.Wb(3,"div",2),u.Wb(4,"div",3),u.Rb(5,"header-left"),u.Vb(),u.Wb(6,"div",4),u.Rb(7,"header-right"),u.Vb(),u.Vb(),u.Rb(8,"div",5),u.Vb(),u.Wb(9,"div",6),u.Wb(10,"div",7),u.Oc(11,UD,2,0,"div",8),u.Oc(12,$D,33,38,"mat-card",9),u.Vb(),u.Vb(),u.Vb(),u.Wb(13,"mat-sidenav",10,11),u.Wb(15,"mat-list"),u.Wb(16,"h3",12),u.Qc(17),u.ic(18,"translate"),u.Vb(),u.Wb(19,"div",13),u.Rb(20,"app-maarch-flat-tree",null,14),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(3),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading),u.Db(1),u.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!e.appService.getViewMode()),u.Db(4),u.Rc(u.jc(18,12,"lang.chooseEntityAssociationAccount")))},directives:[C.e,C.f,x.a,W.a,O.t,C.d,Rt.a,Rt.g,Ue.a,w.c,I.a,c.K,c.v,c.w,S.c,k.b,c.d,c.F,c.p,c.u,c.x,Tt.a,S.j,O.q,R.b],pipes:[p.d],styles:[".form-group[_ngcontent-%COMP%], .formType[_ngcontent-%COMP%]{display:flex}.formType[_ngcontent-%COMP%]{align-items:center;margin:10px;border-radius:4px;border:1px solid #ccc;position:relative;padding:10px}.formType-title[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;max-width:85%;text-overflow:ellipsis;z-index:1;font-size:10px;font-weight:700;background:#fff;position:absolute;top:-7px;left:10px;padding:0;margin:0;color:#135f7f}.formType[_ngcontent-%COMP%]    .mat-slide-toggle-label{color:#666;font-weight:700}.formType[_ngcontent-%COMP%]    .mat-radio-button, .formType[_ngcontent-%COMP%]    .mat-slide-toggle{opacity:.5;color:#666;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.formType[_ngcontent-%COMP%]    .mat-checked, .formType[_ngcontent-%COMP%]    .mat-radio-checked{opacity:1;color:#135f7f}.formType[_ngcontent-%COMP%]    .mat-checked .mat-slide-toggle-label{color:#135f7f}.formType[_ngcontent-%COMP%]    .mat-form-field-suffix{color:#f99830;font-size:15px;top:0}.ratio-1[_ngcontent-%COMP%]{flex:1}.ratio-2[_ngcontent-%COMP%]{flex:1;align-items:baseline}"]}),ND),BD=a("4ik+"),XD=a("/JYr"),GD=["adminMenuTemplate"];function qD(t,e){1&t&&(u.Wb(0,"mat-nav-list"),u.Wb(1,"h3",11),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"a",12),u.Rb(5,"mat-icon",13),u.Wb(6,"p",14),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(2),u.Rc(u.jc(3,2,"lang.actions")),u.Db(5),u.Sc(" ",u.jc(8,4,"lang.add")," "))}function KD(t,e){1&t&&(u.Wb(0,"div",15),u.Rb(1,"mat-spinner",16),u.Vb())}function JD(t,e){if(1&t&&(u.Wb(0,"mat-header-cell",40),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=u.hc(2);u.Ib("hide-for-mobile",a.appService.getViewMode()),u.Db(1),u.Rc(u.jc(2,3,"lang.label"))}}function YD(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.Ib("hide-for-mobile",n.appService.getViewMode()),u.Db(1),u.Sc(" ",a.label," ")}}function ZD(t,e){1&t&&(u.Wb(0,"mat-header-cell",41),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.linkedEntities")))}function tV(t,e){if(1&t&&(u.Wb(0,"span",44),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Rc(a)}}function eV(t,e){if(1&t&&(u.Wb(0,"mat-cell",42),u.Wb(1,"div"),u.Oc(2,tV,2,1,"span",43),u.Vb(),u.Vb()),2&t){var a=e.$implicit;u.Db(2),u.oc("ngForOf",a.entitiesLabel)}}function aV(t,e){1&t&&u.Rb(0,"mat-header-cell",45)}function nV(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-cell",46),u.Wb(1,"button",47),u.dc("click",(function(t){u.Dc(a);var n=e.$implicit,i=u.hc(2);return t.stopPropagation(),i.deleteAccount(n.id)})),u.ic(2,"translate"),u.Rb(3,"mat-icon",48),u.Vb(),u.Vb()}2&t&&(u.Db(1),u.pc("matTooltip",u.jc(2,1,"lang.delete")))}function iV(t,e){1&t&&u.Rb(0,"mat-header-row")}function oV(t,e){1&t&&(u.Rb(0,"mat-row",49),u.ic(1,"translate")),2&t&&(u.qc("routerLink","/administration/alfresco/",e.$implicit.id,""),u.pc("matTooltip",u.jc(1,2,"lang.view")))}function rV(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-card",17),u.Wb(1,"div",18),u.Wb(2,"div",19),u.Wb(3,"mat-form-field",20),u.Wb(4,"mat-label"),u.Qc(5),u.ic(6,"translate"),u.Vb(),u.Wb(7,"input",21),u.dc("ngModelChange",(function(t){return u.Dc(a),u.hc().alfrescoUrl=t}))("blur",(function(){return u.Dc(a),u.hc().saveUrl()})),u.Vb(),u.Vb(),u.Vb(),u.Wb(8,"div",22),u.Wb(9,"mat-form-field"),u.Rb(10,"input",23),u.ic(11,"translate"),u.Vb(),u.Vb(),u.Wb(12,"div",22),u.Rb(13,"mat-paginator",24,25),u.Vb(),u.Vb(),u.Wb(15,"mat-table",26,27),u.Ub(17,28),u.Oc(18,JD,3,5,"mat-header-cell",29),u.Oc(19,YD,2,3,"mat-cell",30),u.Tb(),u.Ub(20,31),u.Oc(21,ZD,3,3,"mat-header-cell",32),u.Oc(22,eV,3,1,"mat-cell",33),u.Tb(),u.Ub(23,34),u.Oc(24,aV,1,0,"mat-header-cell",35),u.Oc(25,nV,4,3,"mat-cell",36),u.Tb(),u.Oc(26,iV,1,0,"mat-header-row",37),u.Oc(27,oV,2,4,"mat-row",38),u.Vb(),u.Wb(28,"div",39),u.Qc(29),u.ic(30,"translate"),u.Vb(),u.Vb()}if(2&t){var n=u.hc();u.Db(5),u.Rc(u.jc(6,13,"lang.alfrescoAPI")),u.Db(2),u.oc("ngModel",n.alfrescoUrl)("title",n.alfrescoUrl),u.Db(3),u.pc("placeholder",u.jc(11,15,"lang.filterBy")),u.oc("formControl",n.adminService.getFilterField()),u.Db(3),u.oc("length",100)("hidePageSize",!0)("pageSize",10),u.Db(2),u.oc("dataSource",n.adminService.getDataSource()),u.Db(11),u.oc("matHeaderRowDef",n.displayedColumns),u.Db(1),u.oc("matRowDefColumns",n.displayedColumns),u.Db(2),u.Tc(" ",n.accounts.length," ",u.jc(30,17,"lang.accounts"),"")}}var cV,lV=((cV=function(){function t(e,a,n,i,o,r,c,l,s){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.headerService=i,this.appService=o,this.dialog=r,this.functions=c,this.adminService=l,this.viewContainerRef=s,this.alfrescoUrl="",this.accounts=[],this.loading=!1,this.displayedColumns=["label","entitiesLabel","actions"],this.filterColumns=["label","entitiesLabel"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.alfresco")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/alfresco/configuration").pipe(Object(BD.filter)((function(e){return!t.functions.empty(e.configuration)})),Object(kt.tap)((function(e){t.alfrescoUrl=e.configuration.uri}))).subscribe(),this.http.get("../rest/alfresco/accounts").subscribe((function(e){t.accounts=e.accounts,t.loading=!1,setTimeout((function(){t.adminService.setDataSource("admin_alfresco",t.accounts,t.sort,t.paginator,t.filterColumns)}),0)}))}},{key:"deleteAccount",value:function(t){var e=this;this.dialogRef=this.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete"),msg:this.translate.instant("lang.confirmAction")}}),this.dialogRef.afterClosed().pipe(Object(BD.filter)((function(t){return"ok"===t})),Object(XD.exhaustMap)((function(){return e.http.delete("../rest/alfresco/accounts/"+t)})),Object(kt.tap)((function(){e.accounts=e.accounts.filter((function(e){return e.id!==t})),setTimeout((function(){e.adminService.setDataSource("admin_alfresco",e.accounts,e.sort,e.paginator,e.filterColumns)}),0),e.notify.success(e.translate.instant("lang.accountDeleted"))})),Object(G.catchError)((function(t){return e.notify.handleSoftErrors(t),Object(X.of)(!1)}))).subscribe()}},{key:"saveUrl",value:function(){var t=this;this.http.put("../rest/alfresco/configuration",{uri:this.alfrescoUrl}).pipe(Object(G.catchError)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}}]),t}()).\u0275fac=function(t){return new(t||cV)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a),u.Qb(N.b),u.Qb(D.a),u.Qb(jt),u.Qb(u.T))},cV.\u0275cmp=u.Kb({type:cV,selectors:[["ng-component"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(GD,!0),u.Xc(H.a,!0),u.Xc(B.a,!0)),2&t&&(u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.paginator=a.first),u.yc(a=u.ec())&&(e.sort=a.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/alfresco/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-12"],["appearance","outline"],["matInput","","required","","name","accountId","id","accountId","type","text","placeholder","https://alfresco/api/",3,"ngModel","title","ngModelChange","blur"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSortDisableClear","","matSort","",3,"dataSource"],["table",""],["matColumnDef","label"],["mat-sort-header","",3,"hide-for-mobile",4,"matHeaderCellDef"],[3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","entitiesLabel"],["mat-sort-header","","style","flex: 2",4,"matHeaderCellDef"],["style","flex: 2",4,"matCellDef"],["matColumnDef","actions"],["style","flex:none",4,"matHeaderCellDef"],["style","flex:none;justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header",""],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],["class","label",4,"ngFor","ngForOf"],[1,"label"],[2,"flex","none"],[2,"flex","none","justify-content","flex-end"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,qD,9,6,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,KD,2,0,"div",9),u.Oc(14,rV,31,19,"mat-card",10),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading))},directives:[C.e,C.f,x.a,W.a,O.t,Rt.h,Rt.g,Rt.d,o.f,Tt.a,Rt.c,j.l,w.c,I.a,S.c,S.g,k.b,c.d,c.F,c.u,c.x,c.j,H.a,q.o,B.a,q.c,q.i,q.b,q.k,q.n,q.h,B.b,q.a,O.s,R.b,Qt.b,q.j,q.m,o.d],pipes:[p.d],styles:[".label[_ngcontent-%COMP%]{white-space:break-spaces;background:#135f7f;margin:5px}"]}),cV),sV=a("OigG"),dV=["appContactDetail"];function bV(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",13),u.dc("click",(function(){u.Dc(a);var t=u.hc().$implicit,e=u.hc();return e.toggleExcludeContact(t),e.mergeContact()})),u.Qc(1),u.ic(2,"translate"),u.Vb()}2&t&&(u.Db(1),u.Rc(u.jc(2,1,"lang.exludeContact")))}function uV(t,e){1&t&&u.Rb(0,"i",14)}function pV(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",15),u.dc("click",(function(){u.Dc(a);var t=u.hc().$implicit,e=u.hc();return e.toggleExcludeContact(t),e.mergeContact()})),u.Rb(1,"i",16),u.Qc(2),u.ic(3,"translate"),u.Vb()}2&t&&(u.Db(2),u.Sc("\xa0",u.jc(3,1,"lang.contactExcluded"),""))}function fV(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",7),u.Wb(1,"app-contact-detail",8,9),u.dc("afterSelectedEvent",(function(){u.Dc(a);var t=e.index;return u.hc().mergeContact(t)}))("afterDeselectedEvent",(function(t){u.Dc(a);var n=e.index;return u.hc().resetContact(t,n)})),u.Vb(),u.Oc(3,bV,3,3,"button",10),u.Oc(4,uV,1,0,"i",11),u.Oc(5,pV,4,3,"button",12),u.Vb()}if(2&t){var n=e.$implicit,i=e.index,o=u.hc();u.Db(1),u.Ib("merged",o.contactSelected!==i&&null!==o.contactSelected&&-1===o.contactsExcluded.indexOf(n.id)),u.oc("contact",n)("selectable",o.contactSelected===i||null===o.contactSelected),u.Db(2),u.oc("ngIf",o.contactSelected!==i&&null!==o.contactSelected&&-1===o.contactsExcluded.indexOf(n.id)),u.Db(1),u.oc("ngIf",o.contactSelected!==i&&null!==o.contactSelected&&o.contactsExcluded.indexOf(n.id)>-1),u.Db(1),u.oc("ngIf",o.contactSelected!==i&&null!==o.contactSelected&&o.contactsExcluded.indexOf(n.id)>-1)}}var mV,gV=((mV=function(){function t(e,a,n,i,o,r,c){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.data=i,this.dialogRef=o,this.headerService=r,this.functionsService=c,this.loading=!1,this.contactSelected=null,this.contactsExcluded=[]}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"mergeContact",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.contactSelected;this.appContactDetail.toArray()[e].resetContact(),this.appContactDetail.toArray()[e].contact.selected=!0,this.functionsService.empty(e)||(this.contactSelected=e),this.data.duplicate.forEach((function(a,n){-1===t.contactsExcluded.indexOf(t.appContactDetail.toArray()[n].getContactInfo().id)&&Object.keys(t.appContactDetail.toArray()[n].getContactInfo()).forEach((function(a){"customFields"!==a||t.functionsService.empty(t.appContactDetail.toArray()[n].getContactInfo()[a])?"civility"!==a||t.functionsService.empty(t.appContactDetail.toArray()[n].getContactInfo()[a].id)?t.functionsService.empty(t.appContactDetail.toArray()[e].getContactInfo()[a])&&t.appContactDetail.toArray()[e].getContactInfo()[a]!==t.appContactDetail.toArray()[n].getContactInfo()[a]&&t.appContactDetail.toArray()[e].setContactInfo(a,t.appContactDetail.toArray()[n].getContactInfo()[a]):t.appContactDetail.toArray()[e].setContactInfo(a,t.appContactDetail.toArray()[n].getContactInfo()[a]):t.appContactDetail.toArray()[n].getContactInfo()[a].forEach((function(n){0===t.appContactDetail.toArray()[e].getContactInfo()[a].filter((function(t){return t.label===n.label})).length&&t.appContactDetail.toArray()[e].setContactInfo(a,n)}))}))}))}},{key:"toggleExcludeContact",value:function(t){var e=this.contactsExcluded.indexOf(t.id);-1===e?this.contactsExcluded.push(t.id):this.contactsExcluded.splice(e,1)}},{key:"resetContact",value:function(t,e){this.contactSelected=null,this.appContactDetail.toArray()[e].resetContact()}},{key:"onSubmit",value:function(){var t=this;this.loading=!0;var e=this.data.duplicate.filter((function(e,a){return a===t.contactSelected})).map((function(t){return t.id}))[0],a=this.data.duplicate.filter((function(e,a){return a!==t.contactSelected})).filter((function(e,a){return-1===t.contactsExcluded.indexOf(e.id)})).map((function(t){return t.id}));this.http.put("../rest/contacts/".concat(e,"/merge"),{duplicates:a}).pipe(Object(d.a)((function(){t.dialogRef.close(a.length===t.data.duplicate.length-1?"removeAll":a)})),Object(Dt.a)((function(){return t.loading=!1})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}}]),t}()).\u0275fac=function(t){return new(t||mV)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(N.a),u.Qb(N.h),u.Qb(m.a),u.Qb(D.a))},mV.\u0275cmp=u.Kb({type:mV,selectors:[["app-manage-duplicate"]],viewQuery:function(t,e){var a;1&t&&u.Xc(dV,!0),2&t&&u.yc(a=u.ec())&&(e.appContactDetail=a)},decls:11,vars:12,consts:[[1,"mat-dialog-content-container"],["mat-dialog-content","",1,"contact-list-container"],["style","position: relative;",4,"ngFor","ngForOf"],[1,"divider-modal"],["mat-dialog-actions","",1,"actions"],["mat-raised-button","","mat-button","","color","primary",3,"disabled","click"],["mat-raised-button","","mat-button","",3,"mat-dialog-close"],[2,"position","relative"],[2,"height","100%",3,"contact","selectable","afterSelectedEvent","afterDeselectedEvent"],["appContactDetail",""],["mat-raised-button","","mat-button","","style","position: absolute;bottom: 0px;left: 50%;transform: translateX(-50%);",3,"click",4,"ngIf"],["class","fas fa-ban excludeLogo",4,"ngIf"],["mat-raised-button","","mat-button","","color","primary","style","position: absolute;bottom: 0px;left: 50%;transform: translateX(-50%);",3,"click",4,"ngIf"],["mat-raised-button","","mat-button","",2,"position","absolute","bottom","0px","left","50%","transform","translateX(-50%)",3,"click"],[1,"fas","fa-ban","excludeLogo"],["mat-raised-button","","mat-button","","color","primary",2,"position","absolute","bottom","0px","left","50%","transform","translateX(-50%)",3,"click"],[1,"fas","fa-ban"]],template:function(t,e){1&t&&(u.Wb(0,"div",0),u.Wb(1,"div",1),u.Oc(2,fV,6,7,"div",2),u.Vb(),u.Rb(3,"span",3),u.Wb(4,"div",4),u.Wb(5,"button",5),u.dc("click",(function(){return e.onSubmit()})),u.Qc(6),u.ic(7,"translate"),u.Vb(),u.Wb(8,"button",6),u.Qc(9),u.ic(10,"translate"),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(1),u.Ib("contact-list-container-1",1==e.data.duplicate.length)("contact-list-container-2",2==e.data.duplicate.length),u.Db(1),u.oc("ngForOf",e.data.duplicate),u.Db(3),u.oc("disabled",null===e.contactSelected||e.loading||e.contactsExcluded.length===e.data.duplicate.length-1),u.Db(1),u.Rc(u.jc(7,8,"lang.merge")),u.Db(3),u.Rc(u.jc(10,10,"lang.cancel")))},directives:[N.f,O.s,N.c,R.b,N.d,sV.a,O.t],pipes:[p.d],styles:[".merged[_ngcontent-%COMP%]{opacity:.5}.contact-list-container[_ngcontent-%COMP%]{padding:20px;display:grid;grid-template-columns:repeat(3,33%);grid-gap:10px}.contact-list-container-1[_ngcontent-%COMP%]{grid-template-columns:1fr}.contact-list-container-2[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.excludeLogo[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:80px;color:#8e3e52}"]}),mV),hV=a("vxfF"),vV=["adminMenuTemplate"];function yV(t,e){if(1&t&&(u.Wb(0,"a",19),u.Rb(1,"mat-icon",20),u.Wb(2,"p",21),u.Qc(3),u.Vb(),u.Vb()),2&t){var a=e.$implicit;u.Ib("active",a.current),u.oc("routerLink",a.route),u.Db(1),u.Fb(a.icon),u.Db(2),u.Sc(" ",a.label," ")}}function DV(t,e){if(1&t&&(u.Wb(0,"mat-nav-list"),u.Oc(1,yV,4,6,"a",18),u.Vb()),2&t){var a=u.hc();u.Db(1),u.oc("ngForOf",a.subMenus)}}function VV(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-chip",31),u.dc("removed",(function(){u.Dc(a);var t=e.$implicit;return u.hc(2).removeCriteria(t)}))("click",(function(){u.Dc(a);var t=e.$implicit;return u.hc(2).removeCriteria(t)})),u.Qc(1),u.Rb(2,"mat-icon",32),u.Vb()}if(2&t){var n=e.$implicit;u.oc("removable",!0),u.Db(1),u.Sc(" ",n.label," ")}}function CV(t,e){if(1&t){var a=u.Xb();u.Wb(0,"div",22),u.Wb(1,"mat-accordion",23),u.Wb(2,"mat-expansion-panel",24),u.Wb(3,"mat-expansion-panel-header"),u.Wb(4,"mat-panel-title"),u.Qc(5),u.ic(6,"translate"),u.Vb(),u.Vb(),u.Wb(7,"plugin-select-search",25),u.dc("afterSelected",(function(t){return u.Dc(a),u.hc().addCriteria(t)})),u.Vb(),u.Rb(8,"mat-divider",26),u.Wb(9,"mat-chip-list",27),u.Oc(10,VV,3,2,"mat-chip",28),u.Vb(),u.Wb(11,"div",29),u.Wb(12,"button",30),u.dc("click",(function(){return u.Dc(a),u.hc().searchDuplicates()})),u.Qc(13),u.ic(14,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc();u.Db(2),u.oc("expanded",n.openedSearchTool),u.Db(3),u.Sc(" ",u.jc(6,9,"lang.criteriaSearch")," "),u.Db(2),u.oc("label",n.translate.instant("lang.addCriteria"))("formControlSelect",n.addCriteriaSelect)("placeholderLabel",n.translate.instant("lang.addCriteria"))("datas",n.contactFields),u.Db(3),u.oc("ngForOf",n.currentFieldsSearch),u.Db(2),u.oc("disabled",0===n.currentFieldsSearch.length||n.isLoadingResults),u.Db(1),u.Rc(u.jc(14,11,"lang.launchSearch"))}}function xV(t,e){1&t&&(u.Wb(0,"div",33),u.Wb(1,"em"),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Vb()),2&t&&(u.Db(2),u.Rc(u.jc(3,1,"lang.noDuplicatesFound")))}var MV=function(t,e){return{value1:t,value2:e}};function WV(t,e){if(1&t&&(u.Wb(0,"div",34),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t){var a=u.hc();u.Db(1),u.Sc(" ",u.kc(2,1,"lang.duplicatesContactDisplayed",u.wc(4,MV,a.duplicatesContactsRealCount,a.duplicatesContactsCount))," ")}}function OV(t,e){if(1&t&&(u.Wb(0,"span",38),u.Qc(1),u.Vb()),2&t){var a=e.$implicit,n=u.hc(2);u.Db(1),u.Sc(" ",n.getLabel(a)," ")}}function _V(t,e){if(1&t&&(u.Wb(0,"mat-list",15),u.Wb(1,"mat-list-item",35),u.Wb(2,"p",36),u.Oc(3,OV,2,1,"span",37),u.Vb(),u.Vb(),u.Vb()),2&t){var a=u.hc();u.Db(2),u.Gb("contact-list-container-",a.displayedColumns.length,""),u.Db(1),u.oc("ngForOf",a.displayedColumns)}}function SV(t,e){if(1&t&&(u.Wb(0,"span",42),u.Qc(1),u.Vb()),2&t){var a=e.$implicit,n=u.hc().$implicit;u.Db(1),u.Sc(" ",n[a]," ")}}function kV(t,e){if(1&t){var a=u.Xb();u.Ub(0),u.Wb(1,"mat-list-item",39),u.dc("mouseover",(function(){u.Dc(a);var t=e.$implicit;return u.hc().selectDuplicates(t.duplicateId)}))("click",(function(){u.Dc(a);var t=e.$implicit;return u.hc().manageDuplicate(t.duplicateId)})),u.Wb(2,"p",40),u.Oc(3,SV,2,1,"span",41),u.Vb(),u.Vb(),u.Tb()}if(2&t){var n=e.$implicit,i=e.index,o=u.hc();u.Db(1),u.Ib("odd",void 0!==o.duplicatesContacts[i+1]&&n.odd!==o.duplicatesContacts[i+1].odd)("hovered",n.duplicateId===o.currentDuplicateId),u.Db(1),u.Gb("contact-list-container-",o.displayedColumns.length,""),u.Db(1),u.oc("ngForOf",o.displayedColumns)}}function wV(t,e){1&t&&(u.Wb(0,"div",43),u.Rb(1,"mat-spinner"),u.Vb())}var IV,jV=((IV=function(){function t(e,a,n,i,o,r,l,s,d,b){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.headerService=i,this.appService=o,this.dialog=r,this.functions=l,this.sortPipe=s,this.viewContainerRef=d,this.functionsService=b,this.loading=!0,this.subMenus=[{icon:"fa fa-book",route:"/administration/contacts/list",label:this.translate.instant("lang.contactsList"),current:!1},{icon:"fa fa-code",route:"/administration/contacts/contactsCustomFields",label:this.translate.instant("lang.customFieldsAdmin"),current:!1},{icon:"fa fa-cog",route:"/administration/contacts/contacts-parameters",label:this.translate.instant("lang.contactsParameters"),current:!1},{icon:"fa fa-users",route:"/administration/contacts/contacts-groups",label:this.translate.instant("lang.contactsGroups"),current:!1},{icon:"fas fa-magic",route:"/administration/contacts/duplicates",label:this.translate.instant("lang.duplicatesContactsAdmin"),current:!0}],this.contactFields=[],this.addCriteriaSelect=new c.i,this.currentFieldsSearch=[],this.currentDuplicateId=null,this.duplicatesContacts=[],this.duplicatesContactsCount=-1,this.duplicatesContactsRealCount=0,this.displayedColumns=["companyLastname","lastname","company"],this.isLoadingResults=!1,this.openedSearchTool=!0}return _createClass(t,[{key:"ngOnInit",value:function(){return Object(yt.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.headerService.setHeader(this.translate.instant("lang.contactsDuplicates"),"",""),t.next=4,this.getContactFields();case 4:this.setDefaultSearchCriteria(),this.loading=!1;case 6:case"end":return t.stop()}}),t,this)})))}},{key:"getContactFields",value:function(){var t=this;return new Promise((function(e,a){t.http.get("../rest/contactsParameters").pipe(Object(s.a)((function(e){var a=/contactCustomField_[.]*/g;return e.contactsParameters=e.contactsParameters.filter((function(t){return null===t.identifier.match(a)})).map((function(e){return Object.assign(Object.assign({},e),{label:t.translate.instant("lang.contactsParameters_"+e.identifier)})})),e.contactsParameters})),Object(d.a)((function(e){t.contactFields=e})),Object(Y.a)((function(){return t.http.get("../rest/contactsCustomFields")})),Object(s.a)((function(t){return t.customFields=t.customFields.map((function(t){return Object.assign(Object.assign({},t),{id:"contactCustomField_"+t.id,identifier:"contactCustomField_"+t.id})})),t.customFields})),Object(d.a)((function(a){t.contactFields=t.contactFields.concat(a),t.contactFields=t.sortPipe.transform(t.contactFields,"label"),e(!0)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}))}},{key:"setDefaultSearchCriteria",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["lastname","company"];this.contactFields.filter((function(t){return e.indexOf(t.identifier)>-1})).forEach((function(e){e.disabled=!0,t.currentFieldsSearch.push(e)}))}},{key:"addCriteria",value:function(t){var e=this;this.contactFields.filter((function(e){return e.id===t})).forEach((function(t){t.disabled=!0,e.currentFieldsSearch.push(t)})),this.addCriteriaSelect.reset()}},{key:"removeCriteria",value:function(t){var e=this;this.contactFields.forEach((function(a,n){a.id===t.id&&(e.currentFieldsSearch=e.currentFieldsSearch.filter((function(e){return e.id!==t.id})),a.disabled=!1)}))}},{key:"searchDuplicates",value:function(){var t=this;this.duplicatesContacts=[],this.isLoadingResults=!0;var e="?criteria[]="+this.currentFieldsSearch.map((function(t){return t.identifier})).join("&criteria[]=");this.http.get("../rest/duplicatedContacts"+e).pipe(Object(s.a)((function(e){return t.duplicatesContactsRealCount=e.realCount,t.duplicatesContactsCount=e.returnedCount,e.contacts.forEach((function(a,n){a.odd=0===n||(void 0!==e.contacts[n-1]&&e.contacts[n-1].duplicateId===a.duplicateId?e.contacts[n-1].odd:!e.contacts[n-1].odd);var i=[];i.push(a.company),i.push(a.lastname),a.companyLastname=i.filter((function(e){return!t.functions.empty(e)})).join(" / "),t.functionsService.empty(a.customFields)||Object.keys(a.customFields).forEach((function(t){a[t]=a.customFields[t]}))})),e.contacts})),Object(d.a)((function(e){t.duplicatesContacts=e,setTimeout((function(){var e=/contactCustomField_[.]*/g;t.displayedColumns=t.currentFieldsSearch.filter((function(t){return null===t.identifier.match(e)})).map((function(t){return t.identifier})).concat(t.currentFieldsSearch.filter((function(t){return null!==t.identifier.match(e)})).map((function(t){return t.identifier.replace("contactCustomField_","")}))),t.displayedColumns.unshift("companyLastname"),t.openedSearchTool=!1}),0)})),Object(Dt.a)((function(){return t.isLoadingResults=!1})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"selectDuplicates",value:function(t){this.currentDuplicateId=t}},{key:"manageDuplicate",value:function(t){var e=this;this.dialog.open(gV,{panelClass:"maarch-modal",data:{duplicate:this.duplicatesContacts.filter((function(e){return e.duplicateId===t})).map((function(t){return{id:t.id,type:"contact"}}))}}).afterClosed().pipe(Object(J.a)((function(t){return!e.functionsService.empty(t)})),Object(d.a)((function(a){e.notify.success(e.translate.instant("lang.contactsMerged")),e.duplicatesContactsCount--,e.duplicatesContactsRealCount--,e.duplicatesContacts=e.duplicatesContacts.filter("removeAll"!==a?function(t){return-1===a.indexOf(t.id)}:function(e){return e.duplicateId!==t})})),Object(b.a)((function(t){return e.notify.handleSoftErrors(t),Object(X.of)(!1)}))).subscribe()}},{key:"getLabel",value:function(t){return void 0!==this.translate.instant("lang.contactsParameters_"+t)?this.translate.instant("lang.contactsParameters_"+t):void 0!==this.translate.instant("lang."+t)?this.translate.instant("lang."+t):this.contactFields.filter((function(e){return e.id==="contactCustomField_"+t}))[0].label}}]),t}()).\u0275fac=function(t){return new(t||IV)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a),u.Qb(N.b),u.Qb(D.a),u.Qb(T.a),u.Qb(u.T),u.Qb(D.a))},IV.\u0275cmp=u.Kb({type:IV,selectors:[["app-contact-duplicate"]],viewQuery:function(t,e){var a;1&t&&u.Kc(vV,!0),2&t&&u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first)},features:[u.Cb([T.a])],decls:22,vars:12,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content",2,"display","flex","flex-direction","column","overflow","hidden"],["class","criteria-container",4,"ngIf"],["style","padding: 10px;text-align: center;color: rgba(0,0,0,0.54);",4,"ngIf"],["style","padding: 10px;text-align: right;color: rgba(0,0,0,0.54);",4,"ngIf"],["role","list",4,"ngIf"],[2,"position","relative","height","100%","overflow","auto"],["itemSize","48",1,"example-viewport"],["role","list"],[4,"cdkVirtualFor","cdkVirtualForOf"],["class","example-loading-shade",4,"ngIf"],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],["mat-line",""],[1,"criteria-container"],[2,"margin-bottom","10px"],[3,"expanded"],[3,"label","formControlSelect","placeholderLabel","datas","afterSelected"],[2,"margin-top","20px","margin-bottom","20px"],[1,"checkbox-selected-list"],["selected","",3,"removable","removed","click",4,"ngFor","ngForOf"],[1,"col-md-12","text-center"],["mat-raised-button","","color","primary","type","button",3,"disabled","click"],["selected","",3,"removable","removed","click"],["matChipRemove","",1,"fa","fa-times-circle"],[2,"padding","10px","text-align","center","color","rgba(0,0,0,0.54)"],[2,"padding","10px","text-align","right","color","rgba(0,0,0,0.54)"],["role","listitem"],["mat-line","",2,"font-size","80%","display","grid","grid-gap","10px"],["class","primary","style","overflow: hidden;text-overflow: ellipsis;",4,"ngFor","ngForOf"],[1,"primary",2,"overflow","hidden","text-overflow","ellipsis"],["role","listitem",2,"cursor","pointer","font-size","14px",3,"mouseover","click"],["mat-line","",2,"display","grid","grid-gap","10px","align-items","center"],["style","overflow: hidden;text-overflow: ellipsis;",4,"ngFor","ngForOf"],[2,"overflow","hidden","text-overflow","ellipsis"],[1,"example-loading-shade"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,DV,2,1,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,CV,15,13,"div",9),u.Oc(14,xV,4,3,"div",10),u.Oc(15,WV,3,7,"div",11),u.Oc(16,_V,4,4,"mat-list",12),u.Wb(17,"div",13),u.Wb(18,"cdk-virtual-scroll-viewport",14),u.Wb(19,"mat-list",15),u.Oc(20,kV,4,8,"ng-container",16),u.Vb(),u.Vb(),u.Oc(21,wV,2,0,"div",17),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",!e.loading),u.Db(1),u.oc("ngIf",0===e.duplicatesContactsCount),u.Db(1),u.oc("ngIf",e.duplicatesContacts.length>0),u.Db(1),u.oc("ngIf",e.duplicatesContacts.length>0),u.Db(4),u.oc("cdkVirtualForOf",e.duplicatesContacts),u.Db(1),u.oc("ngIf",e.isLoadingResults))},directives:[C.e,C.f,x.a,W.a,O.t,hV.e,hV.a,Rt.a,hV.d,Rt.h,O.s,Rt.d,o.f,Tt.a,Rt.c,j.l,Ae.a,Ae.c,Ae.g,Ae.h,Ds.a,_.a,eo.d,R.b,eo.a,eo.e,w.c],pipes:[p.d],styles:[".example-viewport[_ngcontent-%COMP%]{flex:1;width:100%;background:#fff;height:100%}.example-viewport[_ngcontent-%COMP%]    .cdk-virtual-scroll-content-wrapper{overflow:hidden;text-overflow:ellipsis;width:100%}.active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}.criteria-container[_ngcontent-%COMP%]{margin:20px}.hovered[_ngcontent-%COMP%]{background:rgba(0,0,0,.04)!important;transition:all .3s}.odd[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.12)}.contact-list-container-1[_ngcontent-%COMP%]{grid-template-columns:1fr}.contact-list-container-2[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.contact-list-container-3[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}.contact-list-container-4[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}.contact-list-container-5[_ngcontent-%COMP%]{grid-template-columns:repeat(5,1fr)}"]}),IV),RV=["adminMenuTemplate"];function TV(t,e){if(1&t&&(u.Wb(0,"a",16),u.Rb(1,"mat-icon",17),u.Wb(2,"p",14),u.Qc(3),u.Vb(),u.Vb()),2&t){var a=e.$implicit;u.Ib("active",a.current),u.oc("routerLink",a.route),u.Db(1),u.Fb(a.icon),u.Db(2),u.Sc(" ",a.label," ")}}function PV(t,e){if(1&t&&(u.Wb(0,"mat-nav-list"),u.Wb(1,"h3",11),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"a",12),u.Rb(5,"mat-icon",13),u.Wb(6,"p",14),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Rb(9,"mat-divider"),u.Wb(10,"mat-nav-list"),u.Oc(11,TV,4,6,"a",15),u.Vb()),2&t){var a=u.hc();u.Db(2),u.Rc(u.jc(3,3,"lang.actions")),u.Db(5),u.Sc(" ",u.jc(8,5,"lang.add")," "),u.Db(4),u.oc("ngForOf",a.subMenus)}}function QV(t,e){1&t&&(u.Wb(0,"div",18),u.Rb(1,"mat-spinner",19),u.Vb())}function FV(t,e){1&t&&(u.Wb(0,"mat-header-cell",39),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc("",u.jc(2,1,"lang.coclicoNumber")," "))}function LV(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.accountNumber," ")}}function EV(t,e){1&t&&(u.Wb(0,"mat-header-cell",39),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc(" ",u.jc(2,1,"lang.label")," "))}function AV(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.label," ")}}function UV(t,e){1&t&&(u.Wb(0,"mat-header-cell",39),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc(" ",u.jc(2,1,"lang.postOffice")," "))}function zV(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.postOfficeLabel," ")}}function $V(t,e){1&t&&u.Rb(0,"mat-header-cell")}function NV(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-cell",40),u.Wb(1,"button",41),u.dc("click",(function(t){u.Dc(a);var n=e.$implicit,i=u.hc(2);return t.stopPropagation(),i.delete(n)})),u.ic(2,"translate"),u.Rb(3,"mat-icon",42),u.Vb(),u.Vb()}2&t&&(u.Db(1),u.pc("matTooltip",u.jc(2,1,"lang.delete")))}function HV(t,e){1&t&&u.Rb(0,"mat-header-row")}function BV(t,e){1&t&&(u.Rb(0,"mat-row",43),u.ic(1,"translate")),2&t&&(u.qc("routerLink","/administration/issuingSites/",e.$implicit.id,""),u.pc("matTooltip",u.jc(1,2,"lang.view")))}function XV(t,e){if(1&t&&(u.Wb(0,"mat-card",20),u.Wb(1,"div",21),u.Wb(2,"div",22),u.Wb(3,"mat-form-field"),u.Rb(4,"input",23),u.ic(5,"translate"),u.Vb(),u.Vb(),u.Wb(6,"div",22),u.Rb(7,"mat-paginator",24,25),u.Vb(),u.Vb(),u.Wb(9,"mat-table",26,27),u.Ub(11,28),u.Oc(12,FV,3,3,"mat-header-cell",29),u.Oc(13,LV,2,1,"mat-cell",30),u.Tb(),u.Ub(14,31),u.Oc(15,EV,3,3,"mat-header-cell",29),u.Oc(16,AV,2,1,"mat-cell",30),u.Tb(),u.Ub(17,32),u.Oc(18,UV,3,3,"mat-header-cell",29),u.Oc(19,zV,2,1,"mat-cell",30),u.Tb(),u.Ub(20,33),u.Oc(21,$V,1,0,"mat-header-cell",34),u.Oc(22,NV,4,3,"mat-cell",35),u.Tb(),u.Oc(23,HV,1,0,"mat-header-row",36),u.Oc(24,BV,2,4,"mat-row",37),u.Vb(),u.Wb(25,"div",38),u.Qc(26),u.ic(27,"translate"),u.Vb(),u.Vb()),2&t){var a=u.hc();u.Db(4),u.pc("placeholder",u.jc(5,10,"lang.filterBy")),u.oc("formControl",a.adminService.getFilterField()),u.Db(3),u.oc("length",100)("hidePageSize",!0)("pageSize",10),u.Db(2),u.oc("dataSource",a.adminService.getDataSource()),u.Db(14),u.oc("matHeaderRowDef",a.displayedColumns),u.Db(1),u.oc("matRowDefColumns",a.displayedColumns),u.Db(2),u.Tc(" ",a.data.length," ",u.jc(27,12,"lang.issuingSites"),"")}}var GV,qV=((GV=function(){function t(e,a,n,i,o,r,c,l,s){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.headerService=i,this.appService=o,this.functions=r,this.adminService=c,this.viewContainerRef=l,this.dialog=s,this.subMenus=[{icon:"fas fa-dolly-flatbed",route:"/administration/registeredMails",label:this.translate.instant("lang.registeredMailNumberRanges"),current:!1},{icon:"fas fa-warehouse",route:"/administration/issuingSites",label:this.translate.instant("lang.issuingSites"),current:!0}],this.parameters={},this.loading=!0,this.data=[],this.displayedColumns=["accountNumber","label","postOfficeLabel","actions"],this.filterColumns=["accountNumber","label","postOfficeLabel"]}return _createClass(t,[{key:"ngOnInit",value:function(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.issuingSites")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!1,this.getData()}},{key:"getData",value:function(){var t=this;this.data=[],this.http.get("../rest/registeredMail/sites").pipe(Object(kt.tap)((function(e){t.data=e.sites,t.loading=!1,setTimeout((function(){t.adminService.setDataSource("admin_regitered_mail_issuing_site",t.data,t.sort,t.paginator,t.filterColumns)}),0)})),Object(G.catchError)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"delete",value:function(t){var e=this;this.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete"),msg:this.translate.instant("lang.confirmAction")}}).afterClosed().pipe(Object(J.a)((function(t){return"ok"===t})),Object(Y.a)((function(){return e.http.delete("../rest/registeredMail/sites/"+t.id)})),Object(kt.tap)((function(){e.data=e.data.filter((function(e){return e.id!==t.id})),setTimeout((function(){e.adminService.setDataSource("admin_regitered_mail_issuing_site",e.data,e.sort,e.paginator,e.filterColumns)}),0),e.notify.success(e.translate.instant("lang.issuingSiteDeleted"))})),Object(G.catchError)((function(t){return e.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe()}}]),t}()).\u0275fac=function(t){return new(t||GV)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a),u.Qb(D.a),u.Qb(jt),u.Qb(u.T),u.Qb(N.b))},GV.\u0275cmp=u.Kb({type:GV,selectors:[["app-issuing-site-list"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(RV,!0),u.Xc(H.a,!0),u.Xc(B.a,!0)),2&t&&(u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.paginator=a.first),u.yc(a=u.ec())&&(e.sort=a.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/issuingSites/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","accountNumber"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","label"],["matColumnDef","postOfficeLabel"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header",""],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,PV,12,7,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,QV,2,0,"div",9),u.Oc(14,XV,28,14,"mat-card",10),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading))},directives:[C.e,C.f,x.a,W.a,O.t,Rt.h,Rt.g,Rt.d,o.f,Tt.a,Rt.c,j.l,_.a,O.s,w.c,I.a,S.c,k.b,c.d,c.u,c.j,H.a,q.o,B.a,q.c,q.i,q.b,q.k,q.n,q.h,B.b,q.a,R.b,Qt.b,q.j,q.m,o.d],pipes:[p.d],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}"]}),GV),KV=["maarchTree"];function JV(t,e){1&t&&(u.Wb(0,"div",15),u.Rb(1,"mat-spinner",16),u.Vb())}function YV(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",49),u.dc("click",(function(){u.Dc(a);var t=e.$implicit;return u.hc(2).addressBANCurrentDepartment=t})),u.Qc(1),u.Vb()}if(2&t){var n=e.$implicit;u.Db(1),u.Rc(n)}}function ZV(t,e){if(1&t&&(u.Wb(0,"mat-option",50),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a),u.Db(1),u.Sc(" ",a.address," ")}}function tC(t,e){if(1&t&&(u.Ub(0),u.Oc(1,ZV,2,2,"mat-option",46),u.ic(2,"async"),u.Tb()),2&t){var a=u.hc(2);u.Db(1),u.oc("ngForOf",u.jc(2,1,a.addressBANFilteredResult))}}function eC(t,e){if(1&t&&u.Rb(0,"mat-option",51),2&t){var a=u.hc(2);u.oc("innerHTML",a.addressBANInfo,u.Ec)}}function aC(t,e){1&t&&(u.Wb(0,"mat-option",52),u.Rb(1,"mat-spinner",53),u.Vb())}function nC(t,e){if(1&t&&(u.Wb(0,"mat-option",50),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a),u.Db(1),u.Sc(" ",a," ")}}function iC(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-card",17),u.Wb(1,"form",18),u.dc("ngSubmit",(function(){return u.Dc(a),u.hc().onSubmit()})),u.Wb(2,"div"),u.Wb(3,"mat-form-field"),u.Wb(4,"mat-label"),u.Qc(5),u.ic(6,"translate"),u.Vb(),u.Rb(7,"input",19),u.Vb(),u.Wb(8,"mat-form-field"),u.Wb(9,"mat-label"),u.Qc(10),u.ic(11,"translate"),u.Vb(),u.Rb(12,"input",20),u.Vb(),u.Wb(13,"mat-form-field"),u.Wb(14,"mat-label"),u.Qc(15),u.ic(16,"translate"),u.Vb(),u.Rb(17,"input",21),u.Vb(),u.Wb(18,"div",22),u.Wb(19,"div",23),u.Qc(20),u.ic(21,"translate"),u.Vb(),u.Wb(22,"mat-form-field",24),u.Wb(23,"button",25),u.dc("click",(function(t){return u.Dc(a),t.stopPropagation()})),u.Qc(24),u.Rb(25,"i",26),u.Vb(),u.Wb(26,"mat-menu",null,27),u.Oc(28,YV,2,1,"button",28),u.Vb(),u.Rb(29,"mat-icon",29),u.Wb(30,"input",30,31),u.dc("click",(function(t){return u.Dc(a),t.stopPropagation()}))("focus",(function(){return u.Dc(a),u.hc().resetAutocompleteAddressBan()})),u.Vb(),u.Wb(32,"mat-autocomplete",32,33),u.dc("optionSelected",(function(t){return u.Dc(a),u.hc().selectAddressBan(t)})),u.Oc(34,tC,3,3,"ng-container",34),u.Oc(35,eC,1,1,"mat-option",35),u.Oc(36,aC,2,0,"mat-option",36),u.Vb(),u.Vb(),u.Wb(37,"mat-form-field"),u.Wb(38,"mat-label"),u.Qc(39),u.ic(40,"translate"),u.Vb(),u.Rb(41,"input",37),u.Vb(),u.Wb(42,"mat-form-field"),u.Wb(43,"mat-label"),u.Qc(44),u.ic(45,"translate"),u.Vb(),u.Rb(46,"input",38),u.Vb(),u.Wb(47,"mat-form-field"),u.Wb(48,"mat-label"),u.Qc(49),u.ic(50,"translate"),u.Vb(),u.Rb(51,"input",39),u.Vb(),u.Wb(52,"mat-form-field"),u.Wb(53,"mat-label"),u.Qc(54),u.ic(55,"translate"),u.Vb(),u.Rb(56,"input",40),u.Vb(),u.Wb(57,"mat-form-field"),u.Wb(58,"mat-label"),u.Qc(59),u.ic(60,"translate"),u.Vb(),u.Rb(61,"input",41),u.Vb(),u.Wb(62,"mat-form-field"),u.Wb(63,"mat-label"),u.Qc(64),u.ic(65,"translate"),u.Vb(),u.Rb(66,"input",42),u.Vb(),u.Wb(67,"mat-form-field"),u.Wb(68,"mat-label"),u.Qc(69),u.ic(70,"translate"),u.Vb(),u.Rb(71,"input",43,31),u.Wb(73,"mat-autocomplete",44,45),u.dc("optionSelected",(function(t){return u.Dc(a),u.hc().adminFormGroup.controls.addressCountry.setValue(t.option.value)})),u.Oc(75,nC,2,2,"mat-option",46),u.ic(76,"async"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(77,"div",47),u.Wb(78,"button",48),u.Qc(79),u.ic(80,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.zc(27),i=u.zc(33),o=u.zc(74),r=u.hc();u.Db(1),u.oc("formGroup",r.adminFormGroup),u.Db(4),u.Rc(u.jc(6,26,"lang.siteName")),u.Db(5),u.Rc(u.jc(11,28,"lang.coclicoNumber")),u.Db(5),u.Rc(u.jc(16,30,"lang.postOffice")),u.Db(5),u.Sc(" ",u.jc(21,32,"lang.address")," "),u.Db(3),u.oc("matMenuTriggerFor",n)("title",r.translate.instant("lang.targetDepartment")),u.Db(1),u.Sc(" ",r.addressBANCurrentDepartment,"\xa0"),u.Db(4),u.oc("ngForOf",r.departmentList),u.Db(2),u.oc("placeholder",r.translate.instant("lang.searchAddressBan"))("formControl",r.addressBANControl)("matAutocomplete",i),u.Db(4),u.oc("ngIf",r.addressBANResult.length>0&&!r.addressBANLoading),u.Db(1),u.oc("ngIf",0===r.addressBANResult.length&&!r.addressBANLoading),u.Db(1),u.oc("ngIf",r.addressBANLoading),u.Db(3),u.Rc(u.jc(40,34,"lang.contactsParameters_addressAdditional1")),u.Db(5),u.Rc(u.jc(45,36,"lang.contactsParameters_addressNumber")),u.Db(5),u.Rc(u.jc(50,38,"lang.contactsParameters_addressStreet")),u.Db(5),u.Rc(u.jc(55,40,"lang.contactsParameters_addressAdditional2")),u.Db(5),u.Rc(u.jc(60,42,"lang.contactsParameters_addressPostcode")),u.Db(5),u.Rc(u.jc(65,44,"lang.contactsParameters_addressTown")),u.Db(5),u.Rc(u.jc(70,46,"lang.contactsParameters_addressCountry")),u.Db(2),u.oc("matAutocomplete",o),u.Db(4),u.oc("ngForOf",u.jc(76,48,r.countriesFilteredResult)),u.Db(3),u.oc("disabled",!r.adminFormGroup.valid),u.Db(1),u.Rc(u.jc(80,50,"lang.save"))}}var oC,rC=((oC=function(){function t(e,a,n,i,o,r,l,s,d){_classCallCheck(this,t),this.translate=e,this.http=a,this.route=n,this.router=i,this.notify=o,this.headerService=r,this.appService=l,this._formBuilder=s,this.latinisePipe=d,this.loading=!0,this.entities=[],this.countries=[],this.id=null,this.addressBANInfo="",this.addressBANMode=!0,this.addressBANControl=new c.i,this.addressBANLoading=!1,this.addressBANResult=[],this.addressBANCurrentDepartment="75",this.departmentList=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.route.params.subscribe((function(e){return Object(yt.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e.id){t.next=14;break}return this.creationMode=!0,this.headerService.setHeader(this.translate.instant("lang.issuingSiteCreation")),this.initBanSearch(),this.initAutocompleteAddressBan(),this.adminFormGroup=this._formBuilder.group({id:[null],label:["",c.I.required],postOfficeLabel:["",c.I.required],accountNumber:["",c.I.required],addressNumber:["",c.I.required],addressStreet:["",c.I.required],addressAdditional1:[""],addressAdditional2:[""],addressPostcode:["",c.I.required],addressTown:["",c.I.required],addressCountry:[""]}),this.getCountries(),this.initAutocompleteCountries(),this.loading=!1,t.next=11,this.getEntities();case 11:this.maarchTree.initData(this.entities),t.next=26;break;case 14:return this.id=e.id,this.creationMode=!1,this.headerService.setHeader(this.translate.instant("lang.issuingSiteModification")),this.initBanSearch(),this.initAutocompleteAddressBan(),t.next=21,this.getEntities();case 21:return t.next=23,this.getData();case 23:this.getCountries(),this.initAutocompleteCountries(),this.maarchTree.initData(this.entities);case 26:case"end":return t.stop()}}),t,this)})))}))}},{key:"getData",value:function(){var t=this;return new Promise((function(e){t.http.get("../rest/registeredMail/sites/"+t.id).pipe(Object(d.a)((function(a){t.adminFormGroup=t._formBuilder.group({id:[t.id],label:[a.site.label,c.I.required],postOfficeLabel:[a.site.postOfficeLabel,c.I.required],accountNumber:[a.site.accountNumber,c.I.required],addressNumber:[a.site.addressNumber,c.I.required],addressStreet:[a.site.addressStreet,c.I.required],addressAdditional1:[a.site.addressAdditional1],addressAdditional2:[a.site.addressAdditional2],addressPostcode:[a.site.addressPostcode,c.I.required],addressTown:[a.site.addressTown,c.I.required],addressCountry:[a.site.addressCountry],entities:[a.site.entities]}),t.entities=t.entities.map((function(t){return Object.assign(Object.assign({},t),{state:{opened:!0,selected:a.site.entities.indexOf(t.id)>-1}})})),e(!0),t.loading=!1})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}))}},{key:"initBanSearch",value:function(){var t=this;this.http.get("../rest/ban/availableDepartments").pipe(Object(d.a)((function(e){null!==e.default&&-1!==e.departments.indexOf(e.default.toString())&&(t.addressBANCurrentDepartment=e.default),t.departmentList=e.departments})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"initAutocompleteCountries",value:function(){var t=this;this.countriesFilteredResult=this.adminFormGroup.controls.addressCountry.valueChanges.pipe(Object(l.a)(""),Object(s.a)((function(e){return t._filter(e)})))}},{key:"_filter",value:function(t){var e=t.toLowerCase();return this.countries.filter((function(t){return t.toLowerCase().includes(e)}))}},{key:"initAutocompleteAddressBan",value:function(){var t=this;this.addressBANInfo=this.translate.instant("lang.autocompleteInfo"),this.addressBANResult=[],this.addressBANControl.valueChanges.pipe(Object(As.a)(300),Object(J.a)((function(t){return t.length>2})),Object(gp.a)(),Object(d.a)((function(){return t.addressBANLoading=!0})),Object(tu.a)((function(e){return t.http.get("../rest/autocomplete/banAddresses",{params:{address:e,department:t.addressBANCurrentDepartment}})})),Object(d.a)((function(e){t.addressBANInfo=0===e.length?t.translate.instant("lang.noAvailableValue"):"",t.addressBANResult=e,t.addressBANFilteredResult=Object(X.of)(t.addressBANResult),t.addressBANLoading=!1}))).subscribe()}},{key:"resetAutocompleteAddressBan",value:function(){this.addressBANResult=[],this.addressBANInfo=this.translate.instant("lang.autocompleteInfo")}},{key:"selectAddressBan",value:function(t){this.adminFormGroup.controls.addressNumber.setValue(t.option.value.number),this.adminFormGroup.controls.addressStreet.setValue(t.option.value.afnorName),this.adminFormGroup.controls.addressPostcode.setValue(t.option.value.postalCode),this.adminFormGroup.controls.addressTown.setValue(t.option.value.city),this.adminFormGroup.controls.addressCountry.setValue("FRANCE"),this.addressBANControl.setValue("")}},{key:"getEntities",value:function(){var t=this;return new Promise((function(e){t.http.get("../rest/entities").pipe(Object(s.a)((function(t){return t.entities=t.entities.map((function(t){return{text:t.entity_label,icon:t.icon,parent_id:t.parentSerialId,id:t.serialId,state:{opened:!0}}})),t.entities})),Object(d.a)((function(a){t.entities=a,e(!0)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}))}},{key:"getCountries",value:function(){var t=this;this.http.get("../rest/registeredMail/countries").pipe(Object(d.a)((function(e){t.countries=e.countries.map((function(e){return t.latinisePipe.transform(e.toUpperCase())}))})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"onSubmit",value:function(){var t=this,e={};Object.keys(this.adminFormGroup.controls).forEach((function(a){e[a]=t.adminFormGroup.controls[a].value})),e.entities=this.maarchTree.getSelectedNodes().map((function(t){return t.id})),this.creationMode?this.http.post("../rest/registeredMail/sites",e).subscribe((function(){t.notify.success(t.translate.instant("lang.issuingSiteAdded")),t.router.navigate(["/administration/issuingSites"])}),(function(e){t.notify.handleSoftErrors(e)})):this.http.put("../rest/registeredMail/sites/"+this.id,e).subscribe((function(){t.notify.success(t.translate.instant("lang.issuingSiteUpdated")),t.router.navigate(["/administration/issuingSites"])}),(function(e){t.notify.handleSoftErrors(e)}))}}]),t}()).\u0275fac=function(t){return new(t||oC)(u.Qb(p.e),u.Qb(f.b),u.Qb(o.a),u.Qb(o.c),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a),u.Qb(c.h),u.Qb(v.c))},oC.\u0275cmp=u.Kb({type:oC,selectors:[["app-issuing-site"]],viewQuery:function(t,e){var a;1&t&&u.Kc(KV,!0),2&t&&u.yc(a=u.ec())&&(e.maarchTree=a.first)},decls:22,vars:14,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",2,"overflow-x","hidden","width","400px",3,"mode","fixedInViewport","opened"],["snav2",""],["mat-subheader",""],[2,"padding","10px"],["maarchTree",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[2,"display","contents",3,"formGroup","ngSubmit"],["matInput","","formControlName","label"],["type","text","pattern","[0-9]+","maxlength","10","matInput","","formControlName","accountNumber"],["matInput","","formControlName","postOfficeLabel"],[1,"formType","ratio-1","col-sm-12"],[1,"formType-title"],["appearance","outline",1,"smallInput"],["type","button","mat-button","","matSuffix","",3,"matMenuTriggerFor","title","click"],[1,"fa","fa-chevron-down"],["menuDep","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["color","primary","matPrefix","",1,"fa","fa-search",2,"font-size","15px"],["type","text","matInput","","maxlength","128",3,"placeholder","formControl","matAutocomplete","click","focus"],["autoCompleteInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[4,"ngIf"],["class","autoCompleteInfoResult smallInputInfo","disabled","",3,"innerHTML",4,"ngIf"],["disabled","",4,"ngIf"],["matInput","","formControlName","addressAdditional1"],["matInput","","formControlName","addressNumber"],["matInput","","formControlName","addressStreet"],["matInput","","formControlName","addressAdditional2"],["matInput","","formControlName","addressPostcode"],["matInput","","formControlName","addressTown"],["matInput","","formControlName","addressCountry",3,"matAutocomplete"],["isOpen","true",3,"optionSelected"],["matAutocompleteCountries","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[2,"text-align","center"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-menu-item","",3,"click"],[3,"value"],["disabled","",1,"autoCompleteInfoResult","smallInputInfo",3,"innerHTML"],["disabled",""],["diameter","20"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Wb(1,"mat-sidenav-content"),u.Wb(2,"div",1),u.Wb(3,"div",2),u.Wb(4,"div",3),u.Rb(5,"header-left"),u.Vb(),u.Wb(6,"div",4),u.Rb(7,"header-right"),u.Vb(),u.Vb(),u.Rb(8,"div",5),u.Vb(),u.Wb(9,"div",6),u.Wb(10,"div",7),u.Oc(11,JV,2,0,"div",8),u.Oc(12,iC,81,52,"mat-card",9),u.Vb(),u.Vb(),u.Vb(),u.Wb(13,"mat-sidenav",10,11),u.Wb(15,"mat-list"),u.Wb(16,"h3",12),u.Qc(17),u.ic(18,"translate"),u.Vb(),u.Wb(19,"div",13),u.Rb(20,"app-maarch-flat-tree",null,14),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(3),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading),u.Db(1),u.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!e.appService.getViewMode()),u.Db(4),u.Rc(u.jc(18,12,"lang.chooseEntityAssociationModel")))},directives:[C.e,C.f,x.a,W.a,O.t,C.d,Rt.a,Rt.g,Ue.a,w.c,I.a,c.K,c.v,c.m,S.c,S.g,k.b,c.d,c.u,c.k,c.B,c.p,R.b,S.j,$e.d,$e.e,O.s,Tt.a,S.i,ao.d,c.j,ao.a,$e.b,j.p],pipes:[p.d,O.b],styles:[".formType[_ngcontent-%COMP%]{align-items:center;display:flex;border-radius:4px;border:1px solid #ccc;position:relative;padding:10px 20px;flex-direction:column}.formType-title[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;max-width:85%;text-overflow:ellipsis;z-index:1;font-size:10px;font-weight:700;background:#fff;position:absolute;top:-7px;left:10px;padding:0;margin:0;color:#135f7f}.formType[_ngcontent-%COMP%]    .mat-slide-toggle-label{color:#666;font-weight:700}.formType[_ngcontent-%COMP%]    .mat-radio-button, .formType[_ngcontent-%COMP%]    .mat-slide-toggle{opacity:.5;color:#666;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.formType[_ngcontent-%COMP%]    .mat-checked, .formType[_ngcontent-%COMP%]    .mat-radio-checked{opacity:1;color:#135f7f}.formType[_ngcontent-%COMP%]    .mat-checked .mat-slide-toggle-label{color:#135f7f}.formType[_ngcontent-%COMP%]    .mat-form-field-suffix{color:#f99830;font-size:15px;top:0}.ratio-1[_ngcontent-%COMP%], .ratio-2[_ngcontent-%COMP%]{flex:1}.smallInput[_ngcontent-%COMP%]{font-size:11px;padding-left:20px;padding-right:20px}.smallInput[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]{width:30px;height:25px;color:#135f7f}.smallInput[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;line-height:normal;align-items:center}.smallInput[_ngcontent-%COMP%]    .mat-form-field-infix{padding:0 0 5px}"]}),oC),cC=["adminMenuTemplate"];function lC(t,e){if(1&t&&(u.Wb(0,"a",16),u.Rb(1,"mat-icon",17),u.Wb(2,"p",14),u.Qc(3),u.Vb(),u.Vb()),2&t){var a=e.$implicit;u.Ib("active",a.current),u.oc("routerLink",a.route),u.Db(1),u.Fb(a.icon),u.Db(2),u.Sc(" ",a.label," ")}}function sC(t,e){if(1&t&&(u.Wb(0,"mat-nav-list"),u.Wb(1,"h3",11),u.Qc(2),u.ic(3,"translate"),u.Vb(),u.Wb(4,"a",12),u.Rb(5,"mat-icon",13),u.Wb(6,"p",14),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Rb(9,"mat-divider"),u.Wb(10,"mat-nav-list"),u.Oc(11,lC,4,6,"a",15),u.Vb()),2&t){var a=u.hc();u.Db(2),u.Rc(u.jc(3,3,"lang.actions")),u.Db(5),u.Sc(" ",u.jc(8,5,"lang.add")," "),u.Db(4),u.oc("ngForOf",a.subMenus)}}function dC(t,e){1&t&&(u.Wb(0,"div",18),u.Rb(1,"mat-spinner",19),u.Vb())}function bC(t,e){1&t&&(u.Wb(0,"mat-header-cell",44),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc(" ",u.jc(2,1,"lang.trackerNumber")," "))}function uC(t,e){if(1&t&&(u.Wb(0,"mat-cell",45),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.trackerNumber," ")}}function pC(t,e){1&t&&(u.Wb(0,"mat-header-cell",44),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc(" ",u.jc(2,1,"lang.type")," "))}function fC(t,e){if(1&t&&(u.Wb(0,"mat-cell",45),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.typeLabel," ")}}function mC(t,e){1&t&&(u.Wb(0,"mat-header-cell",46),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc(" ",u.jc(2,1,"lang.rangeNumber")," "))}function gC(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.rangeNumber," ")}}function hC(t,e){1&t&&(u.Wb(0,"mat-header-cell",46),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc(" ",u.jc(2,1,"lang.currentNumber")," "))}function vC(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Sc(" ",a.currentNumber," ")}}function yC(t,e){1&t&&(u.Wb(0,"mat-header-cell",46),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc(" ",u.jc(2,1,"lang.status")," "))}var DC=function(){return["OK"]},VC=function(){return["SPD"]},CC=function(){return["END"]},xC=function(t,e,a){return{statusLabelPrimary:t,statusLabelWarn:e,statusLabelDanger:a}};function MC(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Wb(1,"span",47),u.Qc(2),u.Vb(),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.oc("ngClass",u.xc(5,xC,u.uc(2,DC).indexOf(a.status)>-1,u.uc(3,VC).indexOf(a.status)>-1,u.uc(4,CC).indexOf(a.status)>-1)),u.Db(1),u.Rc(a.statusLabel)}}function WC(t,e){1&t&&(u.Wb(0,"mat-header-cell",46),u.Qc(1),u.ic(2,"translate"),u.Vb()),2&t&&(u.Db(1),u.Sc(" ",u.jc(2,1,"lang.fullness")," "))}function OC(t,e){if(1&t&&(u.Wb(0,"mat-cell"),u.Wb(1,"div",48),u.Rb(2,"mat-progress-spinner",49),u.Wb(3,"div",50),u.Qc(4),u.Vb(),u.Vb(),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.Ib("fullness-ok",a.fullness<50)("fullness-warning",a.fullness>=50&&a.fullness<80)("fullness-danger",a.fullness>=80),u.Db(1),u.oc("value",a.fullness),u.Db(2),u.Sc("",a.fullness,"%")}}function _C(t,e){1&t&&u.Rb(0,"mat-header-cell")}function SC(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",56),u.dc("click",(function(t){u.Dc(a);var e=u.hc().$implicit,n=u.hc(2);return t.stopPropagation(),n.activate(e)})),u.ic(1,"translate"),u.Rb(2,"mat-icon",57),u.Vb()}if(2&t){var n=u.hc().$implicit;u.pc("matTooltip",u.jc(1,2,"Activer la plage")),u.oc("disabled",100===n.fullness)}}function kC(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",58),u.dc("click",(function(t){u.Dc(a);var e=u.hc().$implicit,n=u.hc(2);return t.stopPropagation(),n.stop(e)})),u.ic(1,"translate"),u.Rb(2,"mat-icon",59),u.Vb()}2&t&&u.pc("matTooltip",u.jc(1,1,"Cl\xf4turer la plage"))}function wC(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-cell",51),u.Oc(1,SC,3,4,"button",52),u.Oc(2,kC,3,3,"button",53),u.Wb(3,"button",54),u.dc("click",(function(t){u.Dc(a);var n=e.$implicit,i=u.hc(2);return t.stopPropagation(),i.delete(n)})),u.ic(4,"translate"),u.Rb(5,"mat-icon",55),u.Vb(),u.Vb()}if(2&t){var n=e.$implicit;u.Db(1),u.oc("ngIf","SPD"===n.status),u.Db(1),u.oc("ngIf","OK"===n.status),u.Db(1),u.pc("matTooltip",u.jc(4,4,"lang.delete")),u.oc("disabled","OK"===n.status)}}function IC(t,e){1&t&&u.Rb(0,"mat-header-row")}function jC(t,e){1&t&&(u.Rb(0,"mat-row",60),u.ic(1,"translate")),2&t&&(u.qc("routerLink","/administration/registeredMails/",e.$implicit.id,""),u.pc("matTooltip",u.jc(1,2,"lang.view")))}function RC(t,e){if(1&t&&(u.Wb(0,"mat-card",20),u.Wb(1,"div",21),u.Wb(2,"div",22),u.Wb(3,"mat-form-field"),u.Rb(4,"input",23),u.ic(5,"translate"),u.Vb(),u.Vb(),u.Wb(6,"div",22),u.Rb(7,"mat-paginator",24,25),u.Vb(),u.Vb(),u.Wb(9,"mat-table",26,27),u.Ub(11,28),u.Oc(12,bC,3,3,"mat-header-cell",29),u.Oc(13,uC,2,1,"mat-cell",30),u.Tb(),u.Ub(14,31),u.Oc(15,pC,3,3,"mat-header-cell",29),u.Oc(16,fC,2,1,"mat-cell",30),u.Tb(),u.Ub(17,32),u.Oc(18,mC,3,3,"mat-header-cell",33),u.Oc(19,gC,2,1,"mat-cell",34),u.Tb(),u.Ub(20,35),u.Oc(21,hC,3,3,"mat-header-cell",33),u.Oc(22,vC,2,1,"mat-cell",34),u.Tb(),u.Ub(23,36),u.Oc(24,yC,3,3,"mat-header-cell",33),u.Oc(25,MC,3,9,"mat-cell",34),u.Tb(),u.Ub(26,37),u.Oc(27,WC,3,3,"mat-header-cell",33),u.Oc(28,OC,5,8,"mat-cell",34),u.Tb(),u.Ub(29,38),u.Oc(30,_C,1,0,"mat-header-cell",39),u.Oc(31,wC,6,6,"mat-cell",40),u.Tb(),u.Oc(32,IC,1,0,"mat-header-row",41),u.Oc(33,jC,2,4,"mat-row",42),u.Vb(),u.Wb(34,"div",43),u.Qc(35),u.ic(36,"translate"),u.Vb(),u.Vb()),2&t){var a=u.hc();u.Db(4),u.pc("placeholder",u.jc(5,10,"lang.filterBy")),u.oc("formControl",a.adminService.getFilterField()),u.Db(3),u.oc("length",100)("hidePageSize",!0)("pageSize",10),u.Db(2),u.oc("dataSource",a.adminService.getDataSource()),u.Db(23),u.oc("matHeaderRowDef",a.displayedColumns),u.Db(1),u.oc("matRowDefColumns",a.displayedColumns),u.Db(2),u.Tc(" ",a.data.length," ",u.jc(36,12,"lang.registeredMailNumberRanges"),"")}}var TC,PC=((TC=function(){function t(e,a,n,i,o,r,c,l,s){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.headerService=i,this.appService=o,this.functions=r,this.adminService=c,this.viewContainerRef=l,this.dialog=s,this.subMenus=[{icon:"fas fa-dolly-flatbed",route:"/administration/registeredMails",label:this.translate.instant("lang.registeredMailNumberRanges"),current:!0},{icon:"fas fa-warehouse",route:"/administration/issuingSites",label:this.translate.instant("lang.issuingSites"),current:!1}],this.parameters={},this.loading=!0,this.data=[],this.displayedColumns=["trackerNumber","typeLabel","rangeNumber","currentNumber","status","fullness","actions"],this.filterColumns=["trackerNumber","typeLabel","rangeNumber","currentNumber","fullness","statusLabel"]}return _createClass(t,[{key:"ngOnInit",value:function(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.registeredMailNumberRanges")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!1,this.getData()}},{key:"getData",value:function(){var t=this;this.data=[],this.http.get("../rest/registeredMail/ranges").pipe(Object(d.a)((function(e){t.data=e.ranges.map((function(e){return Object.assign(Object.assign({},e),{statusLabel:t.translate.instant("lang.registeredMail_"+e.status),typeLabel:t.translate.instant("lang.registeredMail_"+e.registeredMailType),rangeNumber:"".concat(e.rangeStart," - ").concat(e.rangeEnd)})})),t.loading=!1,setTimeout((function(){t.adminService.setDataSource("admin_regitered_mail",t.data,t.sort,t.paginator,t.filterColumns)}),0)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"activate",value:function(t){var e=this,a=JSON.parse(JSON.stringify(t));a.status="OK",this.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.activate"),msg:"En activant cette plage, cela cl\xf4turera la plage actuelle utilis\xe9e pour ce type de recommand\xe9."}}).afterClosed().pipe(Object(J.a)((function(t){return"ok"===t})),Object(Y.a)((function(){return e.http.put("../rest/registeredMail/ranges/"+t.id,a)})),Object(d.a)((function(){e.data.forEach((function(a){"OK"===a.status&&a.registeredMailType===t.registeredMailType&&a.siteId===t.siteId?(a.status="END",a.currentNumber=null,a.statusLabel=e.translate.instant("lang.registeredMail_"+a.status)):a.id===t.id&&(a.status="OK",a.currentNumber=a.rangeStart,a.statusLabel=e.translate.instant("lang.registeredMail_"+a.status))})),setTimeout((function(){e.adminService.setDataSource("admin_regitered_mail",e.data,e.sort,e.paginator,e.filterColumns)}),0),e.notify.success(e.translate.instant("lang.registeredMailNumberRangesActivated"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe()}},{key:"stop",value:function(t){var e=this,a=JSON.parse(JSON.stringify(t));a.status="END",this.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.suspend"),msg:"En cl\xf4turant la plage, vous ne pourrez plus utiliser de recommand\xe9 de ce type tant que vous n'en n'aurez pas activ\xe9 une autre."}}).afterClosed().pipe(Object(J.a)((function(t){return"ok"===t})),Object(Y.a)((function(){return e.http.put("../rest/registeredMail/ranges/"+t.id,a)})),Object(d.a)((function(){t.status="END",t.statusLabel=e.translate.instant("lang.registeredMail_"+t.status),setTimeout((function(){e.adminService.setDataSource("admin_regitered_mail",e.data,e.sort,e.paginator,e.filterColumns)}),0),e.notify.success(e.translate.instant("lang.registeredMailNumberRangesClosed"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe()}},{key:"delete",value:function(t){var e=this;this.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete"),msg:this.translate.instant("lang.confirmAction")}}).afterClosed().pipe(Object(J.a)((function(t){return"ok"===t})),Object(Y.a)((function(){return e.http.delete("../rest/registeredMail/ranges/"+t.id)})),Object(d.a)((function(){e.data=e.data.filter((function(e){return e.id!==t.id})),setTimeout((function(){e.adminService.setDataSource("admin_regitered_mail",e.data,e.sort,e.paginator,e.filterColumns)}),0),e.notify.success(e.translate.instant("lang.registeredMailNumberRangesRemoved"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(X.of)(!1)}))).subscribe()}}]),t}()).\u0275fac=function(t){return new(t||TC)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a),u.Qb(D.a),u.Qb(jt),u.Qb(u.T),u.Qb(N.b))},TC.\u0275cmp=u.Kb({type:TC,selectors:[["app-registered-mail-list"]],viewQuery:function(t,e){var a;1&t&&(u.Kc(cC,!0),u.Xc(H.a,!0),u.Xc(B.a,!0)),2&t&&(u.yc(a=u.ec())&&(e.adminMenuTemplate=a.first),u.yc(a=u.ec())&&(e.paginator=a.first),u.yc(a=u.ec())&&(e.sort=a.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/registeredMails/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","trackerNumber"],["mat-sort-header","","style","flex:2",4,"matHeaderCellDef"],["style","flex:2",4,"matCellDef"],["matColumnDef","typeLabel"],["matColumnDef","rangeNumber"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","currentNumber"],["matColumnDef","status"],["matColumnDef","fullness"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],["mat-sort-header",""],[1,"label",3,"ngClass"],[1,"fullness","full"],["color","primay","mode","determinate","diameter","54",3,"value"],[1,"percent"],[2,"justify-content","flex-end"],["mat-icon-button","","color","accent",3,"matTooltip","disabled","click",4,"ngIf"],["mat-icon-button","","color","warn",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","color","warn",3,"matTooltip","disabled","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],["mat-icon-button","","color","accent",3,"matTooltip","disabled","click"],["aria-hidden","true",1,"fa","fas","fa-play","fa-2x"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fas","fa-stop-circle","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Oc(1,sC,12,7,"ng-template",null,1,u.Pc),u.Wb(3,"mat-sidenav-content"),u.Wb(4,"div",2),u.Wb(5,"div",3),u.Wb(6,"div",4),u.Rb(7,"header-left"),u.Vb(),u.Wb(8,"div",5),u.Rb(9,"header-right"),u.Vb(),u.Vb(),u.Rb(10,"div",6),u.Vb(),u.Wb(11,"div",7),u.Wb(12,"div",8),u.Oc(13,dC,2,0,"div",9),u.Oc(14,RC,37,14,"mat-card",10),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(5),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading))},directives:[C.e,C.f,x.a,W.a,O.t,Rt.h,Rt.g,Rt.d,o.f,Tt.a,Rt.c,j.l,_.a,O.s,w.c,I.a,S.c,k.b,c.d,c.u,c.j,H.a,q.o,B.a,q.c,q.i,q.b,q.k,q.n,q.h,B.b,q.a,O.q,w.a,R.b,Qt.b,q.j,q.m,o.d],pipes:[p.d],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}.fullness[_ngcontent-%COMP%]{position:relative}.percent[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translate(-50%,-50%);left:50%;font-size:10px;font-weight:700;color:#888}.fullness-ok[_ngcontent-%COMP%]     .mat-progress-spinner circle, .mat-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:green}.fullness-warning[_ngcontent-%COMP%]     .mat-progress-spinner circle, .mat-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:orange}.fullness-danger[_ngcontent-%COMP%]     .mat-progress-spinner circle, .mat-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:red}.statusLabelDanger[_ngcontent-%COMP%]{color:#8e3e52}.statusLabelWarn[_ngcontent-%COMP%]{color:#f99830}.statusLabelPrimary[_ngcontent-%COMP%]{color:#135f7f}"]}),TC);function QC(t,e){1&t&&(u.Wb(0,"div",10),u.Rb(1,"mat-spinner",11),u.Vb())}function FC(t,e){1&t&&(u.Rb(0,"div",22),u.ic(1,"translate")),2&t&&u.oc("innerHTML",u.jc(1,1,"lang.registeredMailNumberRangeModificationMsg"),u.Ec)}function LC(t,e){if(1&t){var a=u.Xb();u.Wb(0,"mat-card",12),u.Oc(1,FC,2,3,"div",13),u.Wb(2,"form",14),u.dc("ngSubmit",(function(){return u.Dc(a),u.hc().onSubmit()})),u.Wb(3,"div"),u.Wb(4,"mat-form-field"),u.Wb(5,"mat-label"),u.Qc(6),u.ic(7,"translate"),u.Vb(),u.Rb(8,"input",15),u.Vb(),u.Rb(9,"plugin-select-search",16),u.Wb(10,"div",17),u.Wb(11,"mat-form-field"),u.Wb(12,"mat-label"),u.Qc(13),u.ic(14,"translate"),u.Vb(),u.Wb(15,"input",18),u.dc("keypress",(function(t){return u.Dc(a),u.hc().onlyNumbers(t)})),u.Vb(),u.Vb(),u.Wb(16,"mat-form-field"),u.Wb(17,"mat-label"),u.Qc(18),u.ic(19,"translate"),u.Vb(),u.Wb(20,"input",19),u.dc("keypress",(function(t){return u.Dc(a),u.hc().onlyNumbers(t)})),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(21,"div",20),u.Wb(22,"button",21),u.Qc(23),u.ic(24,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb()}if(2&t){var n=u.hc();u.Db(1),u.oc("ngIf","OK"===n.adminFormGroup.controls.status.value||"END"===n.adminFormGroup.controls.status.value),u.Db(1),u.oc("formGroup",n.adminFormGroup),u.Db(4),u.Rc(u.jc(7,16,"lang.trackerNumber")),u.Db(3),u.Fb(""),u.oc("showLabel",!0)("label",n.translate.instant("lang.registeredMailType"))("placeholderLabel",n.translate.instant("lang.registeredMailType"))("datas",n.registeredMailType)("formControlSelect",n.adminFormGroup.controls.registeredMailType),u.Db(4),u.Rc(u.jc(14,18,"lang.registeredMailStart")),u.Db(2),u.oc("min",n.minRange),u.Db(3),u.Rc(u.jc(19,20,"lang.registeredMailEnd")),u.Db(2),u.oc("min",n.adminFormGroup.controls.rangeStart.value),u.Db(2),u.oc("disabled",!n.adminFormGroup.valid),u.Db(1),u.Rc(u.jc(24,22,"lang.save"))}}var EC,AC=((EC=function(){function t(e,a,n,i,o,r,c,l){_classCallCheck(this,t),this.translate=e,this.http=a,this.route=n,this.router=i,this.notify=o,this.headerService=r,this.appService=c,this._formBuilder=l,this.loading=!0,this.id=null,this.minRange=1,this.registeredMailType=[{id:"2D",label:this.translate.instant("lang.registeredMail_2D")},{id:"2C",label:this.translate.instant("lang.registeredMail_2C")},{id:"RW",label:this.translate.instant("lang.registeredMail_RW")}]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.route.params.subscribe((function(e){return Object(yt.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){var a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e.id){t.next=4;break}this.creationMode=!0,this.headerService.setHeader(this.translate.instant("lang.registeredMailNumberRangeCreation")),this.adminFormGroup=this._formBuilder.group({id:[null],trackerNumber:[null,c.I.required],registeredMailType:[null,c.I.required],rangeStart:[1,c.I.required],rangeEnd:[2,c.I.required],status:["SPD"]}),this.loading=!1,t.next=9;break;case 4:return this.headerService.setHeader(this.translate.instant("lang.registeredMailNumberRangeModification")),this.id=e.id,this.creationMode=!1,t.next=9,this.getData();case 9:this.adminFormGroup.controls.registeredMailType.valueChanges.pipe(Object(d.a)((function(){a.creationMode&&a.getMinRange()}))).subscribe(),this.adminFormGroup.controls.rangeStart.valueChanges.pipe(Object(d.a)((function(t){t>a.adminFormGroup.controls.rangeEnd.value?a.adminFormGroup.controls.rangeStart.setErrors({rangeError:!0}):(a.adminFormGroup.controls.rangeStart.setErrors(null),a.adminFormGroup.controls.rangeEnd.setErrors(null))}))).subscribe(),this.adminFormGroup.controls.rangeEnd.valueChanges.pipe(Object(d.a)((function(t){t<a.adminFormGroup.controls.rangeStart.value?a.adminFormGroup.controls.rangeEnd.setErrors({rangeError:!0}):(a.adminFormGroup.controls.rangeStart.setErrors(null),a.adminFormGroup.controls.rangeEnd.setErrors(null))}))).subscribe();case 12:case"end":return t.stop()}}),t,this)})))}))}},{key:"getData",value:function(){var t=this;return new Promise((function(e){t.http.get("../rest/registeredMail/ranges/"+t.id).pipe(Object(d.a)((function(a){t.adminFormGroup=t._formBuilder.group({id:[t.id],trackerNumber:[a.range.trackerNumber],registeredMailType:[a.range.registeredMailType],rangeStart:[a.range.rangeStart],rangeEnd:[a.range.rangeEnd],status:[a.range.status]}),"OK"!==a.range.status&&"END"!==a.range.status||t.adminFormGroup.disable(),e(!0),t.loading=!1})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}))}},{key:"onlyNumbers",value:function(t){var e;return e=t.charCode,(null!==this.adminFormGroup.controls.rangeStart.value||48!==e)&&e>=48&&e<=57}},{key:"getMinRange",value:function(){var t=this;this.http.get("../rest/registeredMail/ranges/type/".concat(this.adminFormGroup.controls.registeredMailType.value,"/last")).pipe(Object(d.a)((function(e){t.minRange=1===e.lastNumber?e.lastNumber:e.lastNumber+1,t.adminFormGroup.controls.rangeStart.setValue(t.minRange),t.adminFormGroup.controls.rangeEnd.value<t.adminFormGroup.controls.rangeStart.value&&t.adminFormGroup.controls.rangeEnd.setValue(t.adminFormGroup.controls.rangeStart.value+1)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(X.of)(!1)}))).subscribe()}},{key:"onSubmit",value:function(){var t=this,e={};Object.keys(this.adminFormGroup.controls).forEach((function(a){e[a]=t.adminFormGroup.controls[a].value})),this.creationMode?this.http.post("../rest/registeredMail/ranges",e).subscribe((function(){t.notify.success(t.translate.instant("lang.registeredMailNumberRangesAdded")),t.router.navigate(["/administration/registeredMails"])}),(function(e){t.notify.handleSoftErrors(e)})):this.http.put("../rest/registeredMail/ranges/"+this.id,e).subscribe((function(){t.notify.success(t.translate.instant("lang.registeredMailNumberRangesUpdated")),t.router.navigate(["/administration/registeredMails"])}),(function(e){t.notify.handleSoftErrors(e)}))}}]),t}()).\u0275fac=function(t){return new(t||EC)(u.Qb(p.e),u.Qb(f.b),u.Qb(o.a),u.Qb(o.c),u.Qb(y.a),u.Qb(m.a),u.Qb(g.a),u.Qb(c.h))},EC.\u0275cmp=u.Kb({type:EC,selectors:[["app-registered-mail"]],decls:13,vars:8,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],["class","alert-message alert-message-danger","style","min-width: 100%;",3,"innerHTML",4,"ngIf"],[2,"display","contents",3,"formGroup","ngSubmit"],["matInput","","formControlName","trackerNumber"],[3,"showLabel","label","placeholderLabel","datas","formControlSelect"],[2,"display","grid","grid-template-columns","1fr 1fr","grid-gap","20px"],["matInput","","type","number","formControlName","rangeStart",3,"min","keypress"],["matInput","","type","number","formControlName","rangeEnd",3,"min","keypress"],[2,"text-align","center"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[1,"alert-message","alert-message-danger",2,"min-width","100%",3,"innerHTML"]],template:function(t,e){1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Wb(1,"mat-sidenav-content"),u.Wb(2,"div",1),u.Wb(3,"div",2),u.Wb(4,"div",3),u.Rb(5,"header-left"),u.Vb(),u.Wb(6,"div",4),u.Rb(7,"header-right"),u.Vb(),u.Vb(),u.Rb(8,"div",5),u.Vb(),u.Wb(9,"div",6),u.Wb(10,"div",7),u.Oc(11,QC,2,0,"div",8),u.Oc(12,LC,25,24,"mat-card",9),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t&&(u.Db(3),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(2),u.oc("ngIf",e.loading),u.Db(1),u.oc("ngIf",!e.loading))},directives:[C.e,C.f,x.a,W.a,O.t,w.c,I.a,c.K,c.v,c.m,S.c,S.g,k.b,c.d,c.u,c.k,Ds.a,c.A,R.b],pipes:[p.d],styles:[""]}),EC);function UC(t,e){if(1&t&&(u.Wb(0,"mat-option",38),u.Qc(1),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a.id),u.Db(1),u.Sc(" ",a.label," ")}}function zC(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",39),u.dc("click",(function(){return u.Dc(a),u.hc().toggleData()})),u.ic(1,"translate"),u.Rb(2,"mat-icon",40),u.Vb()}2&t&&u.pc("title",u.jc(1,1,"lang.preview"))}function $C(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",39),u.dc("click",(function(){return u.Dc(a),u.hc().toggleData()})),u.ic(1,"translate"),u.Rb(2,"mat-icon",41),u.Vb()}2&t&&u.pc("title",u.jc(1,1,"lang.edition"))}function NC(t,e){if(1&t){var a=u.Xb();u.Wb(0,"button",42),u.dc("click",(function(){u.Dc(a);var t=e.$implicit;return u.hc().selectedTemplateDisplayedSecondaryData=t})),u.Qc(1),u.Vb()}if(2&t){var n=e.$implicit;u.Db(1),u.Sc("",n," colonne(s)")}}function HC(t,e){if(1&t&&(u.Wb(0,"mat-option",43),u.Wb(1,"span",44),u.Wb(2,"span",45),u.Rb(3,"i",46),u.Vb(),u.Wb(4,"span",47),u.Qc(5),u.Vb(),u.Vb(),u.Vb()),2&t){var a=e.$implicit;u.oc("value",a),u.Db(3),u.Gb("fa ",a.icon," fa-2x"),u.Db(2),u.Sc(" ",a.label," ")}}function BC(t,e){if(1&t&&(u.Wb(0,"button",61),u.Rb(1,"mat-icon",62),u.Vb()),2&t){u.hc();var a=u.zc(3);u.oc("matMenuTriggerFor",a)}}function XC(t,e){if(1&t){var a=u.Xb();u.Wb(0,"span",51),u.Oc(1,BC,2,1,"button",52),u.Wb(2,"mat-menu",null,15),u.Wb(4,"button",42),u.dc("click",(function(){u.Dc(a);var t=u.hc(),e=t.$implicit,n=t.index;return u.hc(2).removeData(e,n)})),u.Rb(5,"mat-icon",53),u.Wb(6,"span"),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Rb(9,"mat-divider"),u.Wb(10,"button",42),u.dc("click",(function(){u.Dc(a);var t=u.hc().$implicit;return u.hc(2).setStyle(t,"boldFontData")})),u.Rb(11,"mat-icon",54),u.Wb(12,"span"),u.Qc(13),u.ic(14,"translate"),u.Vb(),u.Vb(),u.Wb(15,"button",42),u.dc("click",(function(){u.Dc(a);var t=u.hc().$implicit;return u.hc(2).setStyle(t,"align_leftData")})),u.Rb(16,"mat-icon",55),u.Wb(17,"span"),u.Qc(18),u.ic(19,"translate"),u.Vb(),u.Vb(),u.Wb(20,"button",42),u.dc("click",(function(){u.Dc(a);var t=u.hc().$implicit;return u.hc(2).setStyle(t,"align_centerData")})),u.Rb(21,"mat-icon",56),u.Wb(22,"span"),u.Qc(23),u.ic(24,"translate"),u.Vb(),u.Vb(),u.Wb(25,"button",42),u.dc("click",(function(){u.Dc(a);var t=u.hc().$implicit;return u.hc(2).setStyle(t,"align_rightData")})),u.Rb(26,"mat-icon",57),u.Wb(27,"span"),u.Qc(28),u.ic(29,"translate"),u.Vb(),u.Vb(),u.Wb(30,"button",42),u.dc("click",(function(){u.Dc(a);var t=u.hc().$implicit;return u.hc(2).setStyle(t,"bigFontData")})),u.Rb(31,"mat-icon",58),u.Wb(32,"span"),u.Qc(33),u.ic(34,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(35,"span",59),u.Rb(36,"i"),u.Qc(37,"\xa0 "),u.Rb(38,"span",60),u.Vb(),u.Vb()}if(2&t){var n=u.hc().$implicit,i=u.hc(2);u.Db(1),u.oc("ngIf","label"==i.displayMode),u.Db(6),u.Rc(u.jc(8,23,"lang.delete")),u.Db(3),u.Ib("isSelectedMenu",n.cssClasses.indexOf("boldFontData")>-1),u.Db(3),u.Rc(u.jc(14,25,"lang.fontBold")),u.Db(2),u.Ib("isSelectedMenu",n.cssClasses.indexOf("align_leftData")>-1),u.Db(3),u.Rc(u.jc(19,27,"lang.alignLeft")),u.Db(2),u.Ib("isSelectedMenu",n.cssClasses.indexOf("align_centerData")>-1),u.Db(3),u.Rc(u.jc(24,29,"lang.alignCenter")),u.Db(2),u.Ib("isSelectedMenu",n.cssClasses.indexOf("align_rightData")>-1),u.Db(3),u.Rc(u.jc(29,31,"lang.alignRight")),u.Db(2),u.Ib("isSelectedMenu",n.cssClasses.indexOf("bigFontData")>-1),u.Db(3),u.Rc(u.jc(34,33,"lang.fontBig")),u.Db(2),u.Fb(n.cssClasses.join(" ")),u.Db(1),u.Gb("fa ",n.icon,""),u.Db(2),u.oc("innerHTML",n[i.displayMode],u.Ec)}}function GC(t,e){if(1&t&&(u.Ub(0),u.Oc(1,XC,39,35,"span",50),u.Tb()),2&t){var a=e.$implicit;u.Db(1),u.oc("ngIf","getFolders"!=a.value)}}function qC(t,e){if(1&t){var a=u.Xb();u.Ub(0),u.Wb(1,"mat-toolbar",48),u.dc("cdkDropListDropped",(function(t){return u.Dc(a),u.hc().drop(t)})),u.Oc(2,GC,2,1,"ng-container",49),u.Vb(),u.Tb()}if(2&t){var n=u.hc();u.Db(1),u.Gb("secondaryInformations example-list column-",n.selectedTemplateDisplayedSecondaryData,"-list"),u.oc("cdkDropListData",n.displayedSecondaryData),u.Db(1),u.oc("ngForOf",n.displayedSecondaryData)}}function KC(t,e){1&t&&u.Rb(0,"mat-icon",67)}function JC(t,e){1&t&&u.Rb(0,"mat-icon",68)}function YC(t,e){if(1&t&&(u.Wb(0,"span"),u.Oc(1,KC,1,0,"mat-icon",64),u.Oc(2,JC,1,0,"mat-icon",65),u.Rb(3,"br"),u.Wb(4,"span",66),u.Qc(5),u.Vb(),u.Vb()),2&t){var a=u.hc().$implicit,n=u.hc();u.Db(1),u.oc("ngIf","label"==n.displayMode),u.Db(1),u.oc("ngIf","sample"==n.displayMode),u.Db(3),u.Rc(a[n.displayMode])}}function ZC(t,e){if(1&t&&(u.Wb(0,"span"),u.Qc(1),u.Vb()),2&t){var a=u.hc().$implicit,n=u.hc();u.Db(1),u.Sc(" ",a[n.displayMode]," ")}}function tx(t,e){if(1&t&&(u.Wb(0,"span",63),u.Oc(1,YC,6,3,"span",24),u.Oc(2,ZC,2,1,"span",24),u.Vb()),2&t){var a=e.index;u.Fb(e.$implicit.cssClasses.join(" ")),u.Db(1),u.oc("ngIf",0==a),u.Db(1),u.oc("ngIf",1==a)}}function ex(t,e){if(1&t&&(u.Wb(0,"button",61),u.Rb(1,"mat-icon",62),u.Vb()),2&t){u.hc();var a=u.zc(3);u.oc("matMenuTriggerFor",a)}}function ax(t,e){if(1&t){var a=u.Xb();u.Ub(0),u.Oc(1,ex,2,1,"button",52),u.Wb(2,"mat-menu",null,15),u.Wb(4,"button",42),u.dc("click",(function(){u.Dc(a);var t=u.hc(),e=t.$implicit,n=t.index;return u.hc().removeData(e,n)})),u.Rb(5,"mat-icon",53),u.Wb(6,"span"),u.Qc(7),u.ic(8,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(9,"span",70),u.Rb(10,"i",71),u.Qc(11),u.Vb(),u.Tb()}if(2&t){var n=u.hc().$implicit,i=u.hc();u.Db(1),u.oc("ngIf","label"==i.displayMode),u.Db(6),u.Rc(u.jc(8,3,"lang.delete")),u.Db(4),u.Sc(" ",n[i.displayMode],"")}}function nx(t,e){if(1&t&&(u.Wb(0,"div",69),u.Oc(1,ax,12,5,"ng-container",24),u.Vb()),2&t){var a=e.$implicit;u.Db(1),u.oc("ngIf","getFolders"==a.value)}}var ix,ox,rx,cx=((ox=function(){function t(e,a,n,i,o){_classCallCheck(this,t),this.translate=e,this.http=a,this.notify=n,this.appService=i,this.headerService=o,this.loading=!1,this.customFieldsFormControl=new c.i({value:"",disabled:!1}),this.displayedMainData=[{value:"chronoNumberShort",label:this.translate.instant("lang.chronoNumberShort"),sample:"MAARCH/2019A/1",cssClasses:["align_centerData","normalData"],icon:""},{value:"object",label:this.translate.instant("lang.object"),sample:this.translate.instant("lang.objectSample"),cssClasses:["longData"],icon:""}],this.availableData=[{value:"getPriority",label:this.translate.instant("lang.getPriority"),sample:this.translate.instant("lang.getPrioritySample"),cssClasses:["align_leftData"],icon:"fa-traffic-light"},{value:"getCategory",label:this.translate.instant("lang.getCategory"),sample:this.translate.instant("lang.incoming"),cssClasses:["align_leftData"],icon:"fa-exchange-alt"},{value:"getDoctype",label:this.translate.instant("lang.getDoctype"),sample:this.translate.instant("lang.getDoctypeSample"),cssClasses:["align_leftData"],icon:"fa-suitcase"},{value:"getAssignee",label:this.translate.instant("lang.getAssignee"),sample:this.translate.instant("lang.getAssigneeSample"),cssClasses:["align_leftData"],icon:"fa-sitemap"},{value:"getRecipients",label:this.translate.instant("lang.getRecipients"),sample:"Patricia PETIT",cssClasses:["align_leftData"],icon:"fa-user"},{value:"getSenders",label:this.translate.instant("lang.getSenders"),sample:"Alain DUBOIS (MAARCH)",cssClasses:["align_leftData"],icon:"fa-book"},{value:"getCreationAndProcessLimitDates",label:this.translate.instant("lang.getCreationAndProcessLimitDates"),sample:this.translate.instant("lang.getCreationAndProcessLimitDatesSample"),cssClasses:["align_leftData"],icon:"fa-calendar"},{value:"getVisaWorkflow",label:this.translate.instant("lang.getVisaWorkflow"),sample:'<i color="accent" class="fa fa-check"></i> Barbara BAIN -> <i class="fa fa-hourglass-half"></i> <b>Bruno BOULE</b> -> <i class="fa fa-hourglass-half"></i> Patricia PETIT',cssClasses:["align_leftData"],icon:"fa-list-ol"},{value:"getSignatories",label:this.translate.instant("lang.getSignatories"),sample:"Denis DAULL, Patricia PETIT",cssClasses:["align_leftData"],icon:"fa-certificate"},{value:"getModificationDate",label:this.translate.instant("lang.getModificationDate"),sample:"01-01-2019",cssClasses:["align_leftData"],icon:"fa-calendar-check"},{value:"getOpinionLimitDate",label:this.translate.instant("lang.getOpinionLimitDate"),sample:"01-01-2019",cssClasses:["align_leftData"],icon:"fa-stopwatch"},{value:"getParallelOpinionsNumber",label:this.translate.instant("lang.getParallelOpinionsNumber"),sample:this.translate.instant("lang.getParallelOpinionsNumberSample"),cssClasses:["align_leftData"],icon:"fa-comment-alt"},{value:"getFolders",label:this.translate.instant("lang.getFolders"),sample:this.translate.instant("lang.getFoldersSample"),cssClasses:["align_leftData"],icon:"fa-folder"},{value:"getResId",label:this.translate.instant("lang.getResId"),sample:this.translate.instant("lang.getResIdSample"),cssClasses:["align_leftData"],icon:"fa-envelope"},{value:"getBarcode",label:this.translate.instant("lang.getBarcode"),sample:this.translate.instant("lang.getBarcodeSample"),cssClasses:["align_leftData"],icon:"fa-barcode"}],this.availableDataClone=[],this.displayedSecondaryData=[],this.displayedSecondaryDataClone=[],this.displayMode="label",this.dataControl=new c.i,this.listEvent=[{id:"detailDoc",value:"documentDetails"},{id:"eventVisaMail",value:"signatureBookAction"},{id:"eventProcessDoc",value:"processDocument"},{id:"eventViewDoc",value:"viewDoc"}],this.templateDisplayedSecondaryData=[1,2,3,4,5,6,7],this.selectedTemplateDisplayedSecondaryData=7,this.selectedTemplateDisplayedSecondaryDataClone=7,this.selectedListEvent=null,this.selectedListEventClone=null,this.processTool=[{id:"dashboard",icon:"fas fa-columns",label:this.translate.instant("lang.newsFeed")},{id:"history",icon:"fas fa-history",label:this.translate.instant("lang.history")},{id:"notes",icon:"fas fa-pen-square",label:this.translate.instant("lang.notesAlt")},{id:"attachments",icon:"fas fa-paperclip",label:this.translate.instant("lang.attachments")},{id:"linkedResources",icon:"fas fa-link",label:this.translate.instant("lang.links")},{id:"diffusionList",icon:"fas fa-share-alt",label:this.translate.instant("lang.diffusionList")},{id:"emails",icon:"fas fa-envelope",label:this.translate.instant("lang.mailsSentAlt")},{id:"visaCircuit",icon:"fas fa-list-ol",label:this.translate.instant("lang.visaWorkflow")},{id:"opinionCircuit",icon:"fas fa-comment-alt",label:this.translate.instant("lang.avis")},{id:"info",icon:"fas fa-info-circle",label:this.translate.instant("lang.informations")}],this.selectedProcessTool={defaultTab:null,canUpdateData:!1,canUpdateModel:!1,canUpdateDocuments:!1},this.selectedProcessToolClone=null,this.searchAdv={list_event:{},list_display:{}}}return _createClass(t,[{key:"ngOnInit",value:function(){return Object(yt.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.headerService.setHeader(this.translate.instant("lang.searchAdministration")),t.next=3,this.initCustomFields();case 3:this.filteredDataOptions=this.dataControl.valueChanges.pipe(Object(l.a)(""),Object(s.a)((function(t){return e._filterData(t)}))),this.availableDataClone=JSON.parse(JSON.stringify(this.availableData)),this.displayedSecondaryData=[],this.selectedTemplateDisplayedSecondaryData=this.searchAdv.list_display.templateColumns,this.selectedTemplateDisplayedSecondaryDataClone=this.selectedTemplateDisplayedSecondaryData,this.selectedListEvent=this.searchAdv.list_event,this.selectedListEventClone=this.selectedListEvent,"processDocument"===this.searchAdv.list_event?(this.selectedProcessTool.defaultTab=null===this.searchAdv.list_event_data?"dashboard":this.searchAdv.list_event_data.defaultTab,this.selectedProcessTool.canUpdateData=null!==this.searchAdv.list_event_data&&this.searchAdv.list_event_data.canUpdateData,this.selectedProcessTool.canUpdateModel=null!==this.searchAdv.list_event_data&&this.searchAdv.list_event_data.canUpdateModel):"signatureBookAction"===this.searchAdv.list_event&&(this.selectedProcessTool.canUpdateDocuments=null!==this.searchAdv.list_event_data&&this.searchAdv.list_event_data.canUpdateDocuments),this.selectedProcessToolClone=JSON.parse(JSON.stringify(this.selectedProcessTool)),this.displayedSecondaryDataClone=JSON.parse(JSON.stringify(this.displayedSecondaryData));case 13:case"end":return t.stop()}}),t,this)})))}},{key:"initCustomFields",value:function(){var t=this;return new Promise((function(e,a){t.http.get("../rest/customFields").pipe(Object(s.a)((function(e){return e.customFields=e.customFields.map((function(e){return{value:"indexingCustomField_"+e.id,label:e.label,sample:t.translate.instant("lang.customField")+e.id,cssClasses:["align_leftData"],icon:"fa-hashtag"}})),e.customFields})),Object(d.a)((function(a){console.log(a),t.availableData=t.availableData.concat(a),e(!0)})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(X.of)(!1)}))).subscribe()}))}},{key:"toggleData",value:function(){this.dataControl.disabled?this.dataControl.enable():this.dataControl.disable(),this.displayMode="label"===this.displayMode?"sample":"label"}},{key:"setStyle",value:function(t,e){var a=e.split("_");2===a.length&&t.cssClasses.forEach((function(n,i){n.includes(a[0])&&n!==e&&t.cssClasses.splice(i,1)}));var n=t.cssClasses.indexOf(e);-1===n?t.cssClasses.push(e):t.cssClasses.splice(n,1)}},{key:"addData",value:function(t){var e=this.availableData.map((function(t){return t.value})).indexOf(t.option.value.value);this.displayedSecondaryData.push(t.option.value),this.availableData.splice(e,1),$("#availableData").blur(),this.dataControl.setValue("")}},{key:"removeData",value:function(t,e){this.availableData.push(t),this.displayedSecondaryData.splice(e,1),this.dataControl.setValue("")}},{key:"removeAllData",value:function(){this.availableData=this.availableData.concat(this.displayedSecondaryData),this.displayedSecondaryData=[],this.dataControl.setValue("")}},{key:"drop",value:function(t){t.previousContainer===t.container&&Object(Pn.h)(t.container.data,t.previousIndex,t.currentIndex)}},{key:"saveTemplate",value:function(){var t,e=this,a=[];this.displayedSecondaryData.forEach((function(t){a.push({value:t.value,cssClasses:t.cssClasses,icon:t.icon})})),t={templateColumns:this.selectedTemplateDisplayedSecondaryData,subInfos:a},this.http.put("../rest/baskets/"+this.searchAdv.basket_id+"/groups/"+this.searchAdv.group_id,{list_display:t,list_event:this.selectedListEvent,list_event_data:this.selectedProcessTool}).subscribe((function(){e.displayedSecondaryDataClone=JSON.parse(JSON.stringify(e.displayedSecondaryData)),e.searchAdv.list_display=a,e.searchAdv.list_event=e.selectedListEvent,e.selectedListEventClone=e.selectedListEvent,e.searchAdv.list_event_data=e.selectedProcessTool,e.selectedProcessToolClone=JSON.parse(JSON.stringify(e.selectedProcessTool)),e.selectedTemplateDisplayedSecondaryDataClone=JSON.parse(JSON.stringify(e.selectedTemplateDisplayedSecondaryData)),e.notify.success(e.translate.instant("lang.modificationsProcessed"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"_filterData",value:function(t){var e="";return"string"==typeof t?e=t.toLowerCase():null!==t&&(e=t.label.toLowerCase()),this.availableData.filter((function(t){return t.label.toLowerCase().includes(e)}))}},{key:"checkModif",value:function(){return JSON.stringify(this.displayedSecondaryData)===JSON.stringify(this.displayedSecondaryDataClone)&&this.selectedListEvent===this.selectedListEventClone&&JSON.stringify(this.selectedProcessTool)===JSON.stringify(this.selectedProcessToolClone)&&JSON.stringify(this.selectedTemplateDisplayedSecondaryData)===JSON.stringify(this.selectedTemplateDisplayedSecondaryDataClone)}},{key:"cancelModification",value:function(){var t=this;this.displayedSecondaryData=JSON.parse(JSON.stringify(this.displayedSecondaryDataClone)),this.selectedListEvent=this.selectedListEventClone,this.selectedProcessTool=JSON.parse(JSON.stringify(this.selectedProcessToolClone)),this.availableData=JSON.parse(JSON.stringify(this.availableDataClone)),this.selectedTemplateDisplayedSecondaryData=JSON.parse(JSON.stringify(this.selectedTemplateDisplayedSecondaryDataClone));var e=0;this.displayedSecondaryData.forEach((function(a){e=t.availableData.map((function(t){return t.value})).indexOf(a.value),t.availableData.splice(e,1)})),this.dataControl.setValue("")}},{key:"hasFolder",value:function(){return this.displayedSecondaryData.map((function(t){return t.value})).indexOf("getFolders")>-1}},{key:"changeEventList",value:function(t){this.selectedProcessTool="processDocument"===t.value?{defaultTab:"dashboard"}:{}}},{key:"toggleCanUpdate",value:function(t){t||(this.selectedProcessTool.canUpdateModel=t)}}]),t}()).\u0275fac=function(t){return new(t||ox)(u.Qb(p.e),u.Qb(f.b),u.Qb(y.a),u.Qb(g.a),u.Qb(m.a))},ox.\u0275cmp=u.Kb({type:ox,selectors:[["ng-component"]],decls:69,vars:63,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["appearance","outline",1,"eventList"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"editorTool"],["color","primary","mat-icon-button","",3,"title","click",4,"ngIf"],["color","primary","mat-button","",3,"title","matMenuTriggerFor"],[1,"fas","fa-columns"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"area"],["appearance","outline","floatLabel","never"],["id","availableData","name","availableData","type","text","matInput","",3,"formControl","placeholder","matAutocomplete"],[3,"optionSelected"],["auto","matAutocomplete"],["class","dataList",3,"value",4,"ngFor","ngForOf"],["color","warn","mat-button","",2,"float","right",3,"disabled","click"],[4,"ngIf"],[1,"resultRow","newRow"],["class","resultCol",3,"class",4,"ngFor","ngForOf"],["multiple","",1,"actions"],["color","primary","mat-icon-button","",3,"title","disabled"],["fontSet","fas","matBadge","2","fontIcon","fa-comments fa-2x",3,"matBadgeHidden"],["fontSet","fas","matBadge","7","fontIcon","fa-paperclip fa-2x",3,"matBadgeHidden"],["fontSet","fas","fontIcon","fa-sitemap fa-2x"],["fontSet","fas","fontIcon","fa-info-circle fa-2x"],["class","folder-info",4,"ngFor","ngForOf"],[1,"row"],[1,"col-md-12","text-center",2,"margin-top","30px"],["color","primary","mat-raised-button","",3,"disabled","click"],["color","default","mat-raised-button","",3,"disabled","click"],[3,"value"],["color","primary","mat-icon-button","",3,"title","click"],["fontSet","fas","fontIcon","fa-eye"],["fontSet","fas","fontIcon","fa-edit"],["mat-menu-item","",3,"click"],[1,"dataList",3,"value"],[1,"optionContent"],[1,"dataIcon"],["color","primary"],[1,"dataLabel"],["cdkDropListOrientation","horizontal","cdkDropList","",3,"cdkDropListData","cdkDropListDropped"],[4,"ngFor","ngForOf"],["class","example-box","cdkDrag","",4,"ngIf"],["cdkDrag","",1,"example-box"],["color","primary","mat-icon-button","",3,"matMenuTriggerFor",4,"ngIf"],["color","warn","fontSet","fas","fontIcon","fa-trash fa-2x",1,"secondaryInformations_icon"],["fontSet","fas","fontIcon","fa-bold fa-2x",1,"secondaryInformations_icon"],["fontSet","fas","fontIcon","fa-align-left fa-2x",1,"secondaryInformations_icon"],["fontSet","fas","fontIcon","fa-align-center fa-2x",1,"secondaryInformations_icon"],["fontSet","fas","fontIcon","fa-align-right fa-2x",1,"secondaryInformations_icon"],["fontSet","fas","fontIcon","fa-text-height fa-2x",1,"secondaryInformations_icon"],[2,"width","100%"],[1,"secondaryInformations_label",3,"innerHTML"],["color","primary","mat-icon-button","",3,"matMenuTriggerFor"],["fontSet","fas","fontIcon","fa-ellipsis-v fa-2x"],[1,"resultCol"],["color","primary","class","fm fm-letter fm-2x",4,"ngIf"],["color","warn","class","fm fm-letter-status-inprogress fm-2x",4,"ngIf"],[1,"resultCol_chrono"],["color","primary",1,"fm","fm-letter","fm-2x"],["color","warn",1,"fm","fm-letter-status-inprogress","fm-2x"],[1,"folder-info"],[1,"badge","badge-folder"],[1,"fa","fa-folder"]],template:function(t,e){if(1&t&&(u.Wb(0,"mat-sidenav-container",0),u.Wb(1,"mat-sidenav-content"),u.Wb(2,"div",1),u.Wb(3,"div",2),u.Wb(4,"div",3),u.Rb(5,"header-left"),u.Vb(),u.Wb(6,"div",4),u.Rb(7,"header-right"),u.Vb(),u.Vb(),u.Rb(8,"div",5),u.Vb(),u.Wb(9,"div",6),u.Wb(10,"div",7),u.Wb(11,"mat-form-field",8),u.Wb(12,"mat-label"),u.Qc(13),u.ic(14,"translate"),u.Vb(),u.Wb(15,"mat-select",9),u.dc("ngModelChange",(function(t){return e.selectedProcessTool.defaultTab=t})),u.Oc(16,UC,2,2,"mat-option",10),u.ic(17,"sortBy"),u.Vb(),u.Vb(),u.Rb(18,"hr"),u.Wb(19,"mat-toolbar",11),u.Wb(20,"span"),u.Oc(21,zC,3,3,"button",12),u.Oc(22,$C,3,3,"button",12),u.Wb(23,"button",13),u.ic(24,"translate"),u.Qc(25),u.Rb(26,"i",14),u.Vb(),u.Wb(27,"mat-menu",null,15),u.Oc(29,NC,2,1,"button",16),u.Vb(),u.Vb(),u.Wb(30,"span",17),u.Wb(31,"form"),u.Wb(32,"mat-form-field",18),u.Rb(33,"input",19),u.ic(34,"translate"),u.Wb(35,"mat-autocomplete",20,21),u.dc("optionSelected",(function(t){return e.addData(t)})),u.Oc(37,HC,6,5,"mat-option",22),u.ic(38,"async"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Wb(39,"span"),u.Wb(40,"button",23),u.dc("click",(function(){return e.removeAllData()})),u.Qc(41),u.ic(42,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Wb(43,"mat-card"),u.Oc(44,qC,3,5,"ng-container",24),u.Wb(45,"div",25),u.Oc(46,tx,3,4,"span",26),u.Wb(47,"mat-button-toggle-group",27),u.Wb(48,"button",28),u.ic(49,"translate"),u.Rb(50,"mat-icon",29),u.Vb(),u.Wb(51,"button",28),u.ic(52,"translate"),u.Rb(53,"mat-icon",30),u.Vb(),u.Wb(54,"button",28),u.ic(55,"translate"),u.Rb(56,"mat-icon",31),u.Vb(),u.Wb(57,"button",28),u.ic(58,"translate"),u.Rb(59,"mat-icon",32),u.Vb(),u.Vb(),u.Vb(),u.Oc(60,nx,2,1,"div",33),u.Vb(),u.Wb(61,"div",34),u.Wb(62,"div",35),u.Wb(63,"button",36),u.dc("click",(function(){return e.saveTemplate()})),u.Qc(64),u.ic(65,"translate"),u.Vb(),u.Wb(66,"button",37),u.dc("click",(function(){return e.cancelModification()})),u.Qc(67),u.ic(68,"translate"),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb(),u.Vb()),2&t){var a=u.zc(28),n=u.zc(36);u.Db(3),u.Ib("customContainerRight",e.appService.getViewMode()),u.Db(5),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(1),u.Ib("fullContainer",e.appService.getViewMode()),u.Db(4),u.Rc(u.jc(14,38,"lang.tabProcessPosition")),u.Db(2),u.oc("ngModel",e.selectedProcessTool.defaultTab),u.Db(1),u.oc("ngForOf",u.kc(17,40,e.processTool,"label")),u.Db(5),u.oc("ngIf","label"==e.displayMode),u.Db(1),u.oc("ngIf","sample"==e.displayMode),u.Db(1),u.oc("title",u.jc(24,43,"lang.templateUsed"))("matMenuTriggerFor",a),u.Db(2),u.Sc(" ",e.selectedTemplateDisplayedSecondaryData," "),u.Db(4),u.oc("ngForOf",e.templateDisplayedSecondaryData),u.Db(4),u.pc("placeholder",u.jc(34,45,"lang.availableDatas")),u.oc("formControl",e.dataControl)("matAutocomplete",n),u.Db(4),u.oc("ngForOf",u.jc(38,47,e.filteredDataOptions)),u.Db(3),u.oc("disabled","sample"==e.displayMode),u.Db(1),u.Sc(" ",u.jc(42,49,"lang.eraseAll")," "),u.Db(3),u.oc("ngIf",e.displayedSecondaryData.length>0&&"sample"==e.displayMode||"label"==e.displayMode),u.Db(2),u.oc("ngForOf",e.displayedMainData),u.Db(2),u.pc("title",u.jc(49,51,"lang.notes")),u.oc("disabled","label"==e.displayMode),u.Db(2),u.oc("matBadgeHidden","label"==e.displayMode),u.Db(1),u.pc("title",u.jc(52,53,"lang.attachments")),u.oc("disabled","label"==e.displayMode),u.Db(2),u.oc("matBadgeHidden","label"==e.displayMode),u.Db(1),u.pc("title",u.jc(55,55,"lang.diffusionList")),u.oc("disabled","label"==e.displayMode),u.Db(3),u.pc("title",u.jc(58,57,"lang.linkDetails")),u.oc("disabled","label"==e.displayMode),u.Db(3),u.oc("ngForOf",e.displayedSecondaryData),u.Db(3),u.oc("disabled",e.checkModif()),u.Db(1),u.Sc(" ",u.jc(65,59,"lang.validate")," "),u.Db(2),u.oc("disabled",e.checkModif()),u.Db(1),u.Sc(" ",u.jc(68,61,"lang.cancel")," ")}},directives:[C.e,C.f,x.a,W.a,S.c,S.g,it.a,c.u,c.x,O.s,et.a,O.t,R.b,$e.d,$e.e,c.K,c.v,c.w,k.b,c.d,ao.d,c.j,ao.a,I.a,Pt.b,Tt.a,no.a,j.p,$e.b,Pn.e,Pn.a,_.a],pipes:[p.d,T.a,O.b],styles:[".availableData[_ngcontent-%COMP%]{margin:10px;display:flex}.secondaryInformations[_ngcontent-%COMP%]{border:1px solid rgba(249,152,48,.4);font-size:10px;height:30px;color:#666}.secondaryInformations_icon[_ngcontent-%COMP%]{height:auto}.secondaryInformations_label[_ngcontent-%COMP%]{width:100%}.resultRow[_ngcontent-%COMP%]{align-items:center;display:flex;padding:5px}.resultRow-mobile[_ngcontent-%COMP%]{font-size:80%}.resultCol[_ngcontent-%COMP%]{flex:1;overflow:hidden;text-overflow:ellipsis}.resultCol-mobile[_ngcontent-%COMP%]{overflow:inherit;text-overflow:inherit;word-break:break-all}.resultCol_chrono[_ngcontent-%COMP%]{color:rgba(0,0,0,.4);font-size:90%}.actions[_ngcontent-%COMP%]{text-align:right;box-shadow:none;border:none;flex:1;justify-content:flex-end;overflow:inherit}.elemToDrag[_ngcontent-%COMP%]{flex:1;border:1px dashed;padding:10px;height:10px;line-height:0;cursor:move;margin-right:5px;margin-left:5px}.columns[_ngcontent-%COMP%]{width:100%;height:90px;padding:20px 10px;border-bottom:1px solid #ccc;color:rgba(0,0,0,.87);display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;background:#fff;font-size:14px}.mat-badge-content[_ngcontent-%COMP%]{background:#f99830}.example-list[_ngcontent-%COMP%]{display:grid;gap:10px;height:auto;max-width:100%;border-radius:4px;border:1px solid rgba(249,152,48,.4);font-size:10px;background:#f5f5f5}.example-box[_ngcontent-%COMP%]{color:#666;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;background:#f5f5f5;flex-grow:1;flex-basis:0;height:20px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.editorTool[_ngcontent-%COMP%]{display:flex;height:44px;font-size:10px;margin-bottom:30px}.editorTool[_ngcontent-%COMP%]   .area[_ngcontent-%COMP%]{flex:1}.editorTool[_ngcontent-%COMP%]   .area[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.editorTool[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{border-left:1px solid #666;height:70%;margin-left:10px;margin-right:10px}.editorTool[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{height:35px}.editorTool[_ngcontent-%COMP%]     .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{background:inherit}.editorTool[_ngcontent-%COMP%]     .mat-form-field-outline{background:#fff}.optionContent[_ngcontent-%COMP%]{display:flex!important}.optionContent[_ngcontent-%COMP%]   .dataIcon[_ngcontent-%COMP%]{width:30px}.optionContent[_ngcontent-%COMP%]   .dataIcon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.optionContent[_ngcontent-%COMP%]   .dataLabel[_ngcontent-%COMP%]{flex:1}.isSelectedMenu[_ngcontent-%COMP%]{background:rgba(249,152,48,.14)}.align_leftData[_ngcontent-%COMP%]{text-align:left}.align_centerData[_ngcontent-%COMP%]{text-align:center}.align_rightData[_ngcontent-%COMP%]{text-align:right}.boldFontData[_ngcontent-%COMP%]{font-weight:700}.bigFontData[_ngcontent-%COMP%]{font-size:14px}.smallFontData[_ngcontent-%COMP%]{font-size:10px}.normalData[_ngcontent-%COMP%]{flex:1}.longData[_ngcontent-%COMP%]{flex:3}.eventList[_ngcontent-%COMP%]{padding-top:10px}.badge-folder[_ngcontent-%COMP%]{cursor:default;background:#135f7f;margin:5px;font-size:8px;max-width:250px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.formType[_ngcontent-%COMP%]{align-items:center;margin-bottom:10px;border-radius:4px;border:1px solid #ccc;position:relative;padding:10px}.formType-title[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;max-width:85%;text-overflow:ellipsis;z-index:1;font-size:10px;font-weight:700;background:#fff;position:absolute;top:-7px;left:10px;padding:0;margin:0;color:#135f7f}"]}),ox),lx=((ix=function t(){_classCallCheck(this,t)}).\u0275mod=u.Ob({type:ix}),ix.\u0275inj=u.Nb({factory:function(t){return new(t||ix)},imports:[[o.g.forChild([{path:"",canActivate:[Ah.b],component:z},{path:"users",canActivate:[Ah.b],component:ke},{path:"users/new",canActivate:[Ah.b],component:fn},{path:"users/:id",canActivate:[Ah.b],component:fn},{path:"groups",canActivate:[Ah.b],component:Rn},{path:"groups/new",canActivate:[Ah.b],component:Pi},{path:"groups/:id",canActivate:[Ah.b],component:Pi},{path:"baskets",canActivate:[Ah.b],component:to},{path:"baskets/new",canActivate:[Ah.b],component:dr},{path:"baskets/:id",canActivate:[Ah.b],component:dr},{path:"doctypes",canActivate:[Ah.b],component:Qr},{path:"diffusionModels",canActivate:[Ah.b],component:Zr},{path:"diffusionModels/new",canActivate:[Ah.b],component:uc},{path:"diffusionModels/:id",canActivate:[Ah.b],component:uc},{path:"entities",canActivate:[Ah.b],component:Ol},{path:"statuses",canActivate:[Ah.b],component:Hl},{path:"statuses/new",canActivate:[Ah.b],component:ts},{path:"statuses/:identifier",canActivate:[Ah.b],component:ts},{path:"parameters",canActivate:[Ah.b],component:ld},{path:"parameters/new",canActivate:[Ah.b],component:Es},{path:"parameters/:id",canActivate:[Ah.b],component:Es},{path:"priorities",canActivate:[Ah.b],component:_d},{path:"priorities/new",canActivate:[Ah.b],component:Id},{path:"priorities/:id",canActivate:[Ah.b],component:Id},{path:"actions",canActivate:[Ah.b],component:ys},{path:"actions/new",canActivate:[Ah.b],component:js},{path:"actions/:id",canActivate:[Ah.b],component:js},{path:"notifications",canActivate:[Ah.b],component:ib},{path:"notifications/new",canActivate:[Ah.b],component:Eb},{path:"notifications/:identifier",canActivate:[Ah.b],component:Eb},{path:"history",canActivate:[Ah.b],component:Kb},{path:"history-batch",canActivate:[Ah.b],component:Qu},{path:"update-status",canActivate:[Ah.b],component:$u},{path:"contacts",canActivate:[Ah.b],component:Ey},{path:"contacts/duplicates",canActivate:[Ah.b],component:jV},{path:"contacts/list",redirectTo:"contacts",pathMatch:"full"},{path:"contacts/list/new",canActivate:[Ah.b],component:hD},{path:"contacts/list/:id",canActivate:[Ah.b],component:hD},{path:"contacts/contactsCustomFields",canActivate:[Ah.b],component:dD},{path:"contacts/contacts-groups",canActivate:[Ah.b],component:mp},{path:"contacts/contacts-groups/new",canActivate:[Ah.b],component:qp},{path:"contacts/contacts-groups/:id",canActivate:[Ah.b],component:qp},{path:"contacts/contacts-parameters",canActivate:[Ah.b],component:Cf},{path:"versions-update",canActivate:[Ah.b],component:Rf},{path:"docservers",canActivate:[Ah.b],component:Hf},{path:"docservers/new",canActivate:[Ah.b],component:Kf},{path:"templates",canActivate:[Ah.b],component:gm},{path:"templates/new",canActivate:[Ah.b],component:dg},{path:"templates/:id",canActivate:[Ah.b],component:dg},{path:"securities",canActivate:[Ah.b],component:mg},{path:"sendmail",canActivate:[Ah.b],component:wg},{path:"shippings",canActivate:[Ah.b],component:Bg},{path:"shippings/new",canActivate:[Ah.b],component:nh},{path:"shippings/:id",canActivate:[Ah.b],component:nh},{path:"customFields",canActivate:[Ah.b],component:Eh},{path:"indexingModels",canActivate:[Ah.b],component:Iv},{path:"indexingModels/new",canActivate:[Ah.b],component:Jh},{path:"indexingModels/:id",canActivate:[Ah.b],component:Jh},{path:"tags",canActivate:[Ah.b],component:kD},{path:"tags/new",canActivate:[Ah.b],component:FD},{path:"tags/:id",canActivate:[Ah.b],component:FD},{path:"alfresco",canActivate:[Ah.b],component:lV},{path:"alfresco/new",canActivate:[Ah.b],component:HD},{path:"alfresco/:id",canActivate:[Ah.b],component:HD},{path:"registeredMails",canActivate:[Ah.b],component:PC},{path:"registeredMails/new",canActivate:[Ah.b],component:AC},{path:"registeredMails/:id",canActivate:[Ah.b],component:AC},{path:"issuingSites",canActivate:[Ah.b],component:qV},{path:"issuingSites/new",canActivate:[Ah.b],component:rC},{path:"issuingSites/:id",canActivate:[Ah.b],component:rC},{path:"searchAdministration",canActivate:[Ah.b],component:cx}])],o.g]}),ix),sx=a("U+qY"),dx=((rx=function t(e){_classCallCheck(this,t),e.setDefaultLang("fr")}).\u0275mod=u.Ob({type:rx}),rx.\u0275inj=u.Nb({factory:function(t){return new(t||rx)(u.ac(p.e))},providers:[jt],imports:[[n.a,i.a,M.b.forChild(),lx,sx.a]]}),rx)}}]);