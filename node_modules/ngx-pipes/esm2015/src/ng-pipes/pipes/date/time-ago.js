var TimeAgoPipe_1;
import { __decorate } from "tslib";
import { Pipe } from '@angular/core';
let TimeAgoPipe = TimeAgoPipe_1 = class TimeAgoPipe {
    /**
     * @param inputDate: Date | Moment - not included as TypeScript interface,
     * in order to keep `ngx-pipes` "pure" from dependencies!
     */
    transform(inputDate) {
        if (!inputDate || (!inputDate.getTime && !inputDate.toDate)) {
            return 'Invalid date';
        }
        const past = inputDate.toDate ? inputDate.toDate() : inputDate.getTime();
        const now = +new Date();
        if (past > now) {
            return 'in the future';
        }
        for (let i = 0, l = TimeAgoPipe_1.MAPPER.length, ms = now - past, div = TimeAgoPipe_1.YEAR_MS; i < l; ++i) {
            const elm = TimeAgoPipe_1.MAPPER[i];
            const unit = Math.floor(ms / (div /= elm.div));
            if (unit >= 1) {
                return unit === 1 ? elm.single : `${unit} ${elm.many} ago`;
            }
        }
        return 'just now';
    }
};
TimeAgoPipe.YEAR_MS = 1000 * 60 * 60 * 24 * 7 * 4 * 12;
TimeAgoPipe.MAPPER = [
    { single: 'last year', many: 'years', div: 1 },
    { single: 'last month', many: 'months', div: 12 },
    { single: 'last week', many: 'weeks', div: 4 },
    { single: 'yesterday', many: 'days', div: 7 },
    { single: 'an hour ago', many: 'hours', div: 24 },
    { single: 'just now', many: 'minutes', div: 60 },
];
TimeAgoPipe = TimeAgoPipe_1 = __decorate([
    Pipe({ name: 'timeAgo' })
], TimeAgoPipe);
export { TimeAgoPipe };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGltZS1hZ28uanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZ3gtcGlwZXMvIiwic291cmNlcyI6WyJzcmMvbmctcGlwZXMvcGlwZXMvZGF0ZS90aW1lLWFnby50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE9BQU8sRUFBRSxJQUFJLEVBQWlCLE1BQU0sZUFBZSxDQUFDO0FBR3BELElBQWEsV0FBVyxtQkFBeEIsTUFBYSxXQUFXO0lBV3RCOzs7T0FHRztJQUNJLFNBQVMsQ0FBQyxTQUFjO1FBQzdCLElBQUksQ0FBQyxTQUFTLElBQUksQ0FBQyxDQUFDLFNBQVMsQ0FBQyxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFDM0QsT0FBTyxjQUFjLENBQUM7U0FDdkI7UUFFRCxNQUFNLElBQUksR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUN6RSxNQUFNLEdBQUcsR0FBRyxDQUFDLElBQUksSUFBSSxFQUFFLENBQUM7UUFFeEIsSUFBSSxJQUFJLEdBQUcsR0FBRyxFQUFFO1lBQ2QsT0FBTyxlQUFlLENBQUM7U0FDeEI7UUFFRCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsYUFBVyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsRUFBRSxHQUFHLEdBQUcsR0FBRyxJQUFJLEVBQUUsR0FBRyxHQUFHLGFBQVcsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRTtZQUNyRyxNQUFNLEdBQUcsR0FBRyxhQUFXLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2xDLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBRS9DLElBQUksSUFBSSxJQUFJLENBQUMsRUFBRTtnQkFDYixPQUFPLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxJQUFJLEdBQUcsQ0FBQyxJQUFJLE1BQU0sQ0FBQzthQUM1RDtTQUNGO1FBRUQsT0FBTyxVQUFVLENBQUM7SUFDcEIsQ0FBQztDQUNGLENBQUE7QUFyQ2dCLG1CQUFPLEdBQVcsSUFBSSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQ25ELGtCQUFNLEdBQVE7SUFDM0IsRUFBRSxNQUFNLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRTtJQUM5QyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFO0lBQ2pELEVBQUUsTUFBTSxFQUFFLFdBQVcsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUU7SUFDOUMsRUFBRSxNQUFNLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRTtJQUM3QyxFQUFFLE1BQU0sRUFBRSxhQUFhLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFO0lBQ2pELEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUU7Q0FDakQsQ0FBQztBQVRTLFdBQVc7SUFEdkIsSUFBSSxDQUFDLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxDQUFDO0dBQ2IsV0FBVyxDQXNDdkI7U0F0Q1ksV0FBVyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBpcGUsIFBpcGVUcmFuc2Zvcm0gfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuQFBpcGUoeyBuYW1lOiAndGltZUFnbycgfSlcbmV4cG9ydCBjbGFzcyBUaW1lQWdvUGlwZSBpbXBsZW1lbnRzIFBpcGVUcmFuc2Zvcm0ge1xuICBwcml2YXRlIHN0YXRpYyBZRUFSX01TOiBudW1iZXIgPSAxMDAwICogNjAgKiA2MCAqIDI0ICogNyAqIDQgKiAxMjtcbiAgcHJpdmF0ZSBzdGF0aWMgTUFQUEVSOiBhbnkgPSBbXG4gICAgeyBzaW5nbGU6ICdsYXN0IHllYXInLCBtYW55OiAneWVhcnMnLCBkaXY6IDEgfSxcbiAgICB7IHNpbmdsZTogJ2xhc3QgbW9udGgnLCBtYW55OiAnbW9udGhzJywgZGl2OiAxMiB9LFxuICAgIHsgc2luZ2xlOiAnbGFzdCB3ZWVrJywgbWFueTogJ3dlZWtzJywgZGl2OiA0IH0sXG4gICAgeyBzaW5nbGU6ICd5ZXN0ZXJkYXknLCBtYW55OiAnZGF5cycsIGRpdjogNyB9LFxuICAgIHsgc2luZ2xlOiAnYW4gaG91ciBhZ28nLCBtYW55OiAnaG91cnMnLCBkaXY6IDI0IH0sXG4gICAgeyBzaW5nbGU6ICdqdXN0IG5vdycsIG1hbnk6ICdtaW51dGVzJywgZGl2OiA2MCB9LFxuICBdO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gaW5wdXREYXRlOiBEYXRlIHwgTW9tZW50IC0gbm90IGluY2x1ZGVkIGFzIFR5cGVTY3JpcHQgaW50ZXJmYWNlLFxuICAgKiBpbiBvcmRlciB0byBrZWVwIGBuZ3gtcGlwZXNgIFwicHVyZVwiIGZyb20gZGVwZW5kZW5jaWVzIVxuICAgKi9cbiAgcHVibGljIHRyYW5zZm9ybShpbnB1dERhdGU6IGFueSk6IHN0cmluZyB7XG4gICAgaWYgKCFpbnB1dERhdGUgfHwgKCFpbnB1dERhdGUuZ2V0VGltZSAmJiAhaW5wdXREYXRlLnRvRGF0ZSkpIHtcbiAgICAgIHJldHVybiAnSW52YWxpZCBkYXRlJztcbiAgICB9XG5cbiAgICBjb25zdCBwYXN0ID0gaW5wdXREYXRlLnRvRGF0ZSA/IGlucHV0RGF0ZS50b0RhdGUoKSA6IGlucHV0RGF0ZS5nZXRUaW1lKCk7XG4gICAgY29uc3Qgbm93ID0gK25ldyBEYXRlKCk7XG5cbiAgICBpZiAocGFzdCA+IG5vdykge1xuICAgICAgcmV0dXJuICdpbiB0aGUgZnV0dXJlJztcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMCwgbCA9IFRpbWVBZ29QaXBlLk1BUFBFUi5sZW5ndGgsIG1zID0gbm93IC0gcGFzdCwgZGl2ID0gVGltZUFnb1BpcGUuWUVBUl9NUzsgaSA8IGw7ICsraSkge1xuICAgICAgY29uc3QgZWxtID0gVGltZUFnb1BpcGUuTUFQUEVSW2ldO1xuICAgICAgY29uc3QgdW5pdCA9IE1hdGguZmxvb3IobXMgLyAoZGl2IC89IGVsbS5kaXYpKTtcblxuICAgICAgaWYgKHVuaXQgPj0gMSkge1xuICAgICAgICByZXR1cm4gdW5pdCA9PT0gMSA/IGVsbS5zaW5nbGUgOiBgJHt1bml0fSAke2VsbS5tYW55fSBhZ29gO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAnanVzdCBub3cnO1xuICB9XG59XG4iXX0=