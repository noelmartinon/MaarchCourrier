{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{\"6S62\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"InstallerModule\",(function(){return installer_module_InstallerModule}));var app_common_module=__webpack_require__(\"vWc3\"),internationalization_module=__webpack_require__(\"cMWS\"),router=__webpack_require__(\"tyNb\"),stepper=__webpack_require__(\"B/XX\"),sorting_pipe=__webpack_require__(\"1YbM\"),tslib_es6=__webpack_require__(\"mrSG\"),dialog=__webpack_require__(\"0IaG\"),tap=__webpack_require__(\"pWCv\"),catchError=__webpack_require__(\"rNzc\"),of=__webpack_require__(\"I65S\"),core=__webpack_require__(\"fXoL\"),ngx_translate_core=__webpack_require__(\"sYmb\"),fesm2015_http=__webpack_require__(\"tk/3\");let installer_service_InstallerService=(()=>{class InstallerService{constructor(){this.steps=[]}setStep(step){this.steps.push(step)}isStepAlreadyLaunched(IdsStep){return this.steps.filter(step=>IdsStep===step.idStep).length>0}}return InstallerService.ɵfac=function(t){return new(t||InstallerService)},InstallerService.ɵprov=core.Pb({token:InstallerService,factory:InstallerService.ɵfac}),InstallerService})();var notification_service=__webpack_require__(\"AXEc\"),expansion=__webpack_require__(\"7EHt\"),fesm2015_button=__webpack_require__(\"bTqV\"),common=__webpack_require__(\"ofXK\"),list=__webpack_require__(\"MutI\"),fesm2015_core=__webpack_require__(\"FKr1\");function InstallActionComponent_mat_list_item_13_ng_container_4_Template(rf,ctx){1&rf&&(core.Xb(0),core.Sc(1,\"...\"),core.Wb())}function InstallActionComponent_mat_list_item_13_i_6_Template(rf,ctx){1&rf&&core.Ub(0,\"i\",16)}function InstallActionComponent_mat_list_item_13_i_7_Template(rf,ctx){1&rf&&core.Ub(0,\"i\",17)}function InstallActionComponent_mat_list_item_13_div_8_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"div\",18),core.Sc(1),core.Yb()),2&rf){const step_r3=core.lc().$implicit;core.Eb(1),core.Uc(\" \",step_r3.msgErr,\" \")}}function InstallActionComponent_mat_list_item_13_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-list-item\"),core.Zb(1,\"div\",11),core.Zb(2,\"span\",12),core.Sc(3),core.Yb(),core.Qc(4,InstallActionComponent_mat_list_item_13_ng_container_4_Template,2,0,\"ng-container\",10),core.Sc(5,\"  \"),core.Qc(6,InstallActionComponent_mat_list_item_13_i_6_Template,1,0,\"i\",13),core.Qc(7,InstallActionComponent_mat_list_item_13_i_7_Template,1,0,\"i\",14),core.Qc(8,InstallActionComponent_mat_list_item_13_div_8_Template,2,1,\"div\",15),core.Yb(),core.Yb()),2&rf){const step_r3=ctx.$implicit;core.Eb(1),core.Jb(\"endStep\",\"OK\"===step_r3.state||\"KO\"===step_r3.state)(\"currentStep\",\"inProgress\"===step_r3.state),core.Eb(2),core.Tc(step_r3.label),core.Eb(1),core.sc(\"ngIf\",\"inProgress\"===step_r3.state),core.Eb(2),core.sc(\"ngIf\",\"OK\"===step_r3.state),core.Eb(1),core.sc(\"ngIf\",\"KO\"===step_r3.state),core.Eb(1),core.sc(\"ngIf\",\"\"!==step_r3.msgErr)}}function InstallActionComponent_ng_container_14_button_3_Template(rf,ctx){if(1&rf){const _r12=core.ac();core.Zb(0,\"button\",23),core.hc(\"click\",(function(){return core.Hc(_r12),core.lc(2).goToInstance()})),core.Sc(1),core.mc(2,\"translate\"),core.Yb()}2&rf&&(core.Eb(1),core.Tc(core.nc(2,1,\"lang.goToNewInstance\")))}function InstallActionComponent_ng_container_14_button_4_Template(rf,ctx){1&rf&&(core.Zb(0,\"button\",24),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Eb(1),core.Tc(core.nc(2,1,\"lang.cancel\")))}function InstallActionComponent_ng_container_14_Template(rf,ctx){if(1&rf&&(core.Xb(0),core.Ub(1,\"span\",19),core.Zb(2,\"div\",20),core.Qc(3,InstallActionComponent_ng_container_14_button_3_Template,3,3,\"button\",21),core.Qc(4,InstallActionComponent_ng_container_14_button_4_Template,3,3,\"button\",22),core.Yb(),core.Wb()),2&rf){const ctx_r2=core.lc();core.Eb(3),core.sc(\"ngIf\",!ctx_r2.isInstallError()&&ctx_r2.isInstallComplete()),core.Eb(1),core.sc(\"ngIf\",ctx_r2.isInstallError()||!ctx_r2.isInstallBegin())}}let install_action_component_InstallActionComponent=(()=>{class InstallActionComponent{constructor(translate,data,dialogRef,http,installerService,notify){this.translate=translate,this.data=data,this.dialogRef=dialogRef,this.http=http,this.installerService=installerService,this.notify=notify,this.steps=[],this.customId=\"\",this.disableAnimation=!0}ngOnInit(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){this.initSteps()}))}ngAfterViewInit(){setTimeout(()=>this.disableAnimation=!1)}launchInstall(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){let res;for(let index=0;index<this.data.length&&(this.steps[index].state=\"inProgress\",res=yield this.doStep(index),res);index++);}))}initSteps(){this.data.forEach((step,index)=>{0===index?this.customId=step.body.customId:step.body.customId=this.customId,this.steps.push({idStep:step.idStep,label:step.description,state:\"\",msgErr:\"\"})})}doStep(index){return new Promise((resolve,reject)=>{this.installerService.isStepAlreadyLaunched(this.data[index].idStep)?(this.steps[index].state=\"OK\",resolve(!0)):this.http[this.data[index].route.method.toLowerCase()](this.data[index].route.url,this.data[index].body).pipe(Object(tap.tap)(data=>{this.steps[index].state=\"OK\",this.installerService.setStep(this.steps[index]),resolve(!0)}),Object(catchError.catchError)(err=>(this.steps[index].state=\"KO\",this.steps[index].msgErr=void 0!==err.error.lang?this.translate.instant(\"lang.\"+err.error.lang):err.error.errors,resolve(!1),Object(of.of)(!1)))).subscribe()})}isInstallBegin(){return this.steps.filter(step=>\"\"===step.state).length!==this.steps.length}isInstallComplete(){return 0===this.steps.filter(step=>\"\"===step.state).length}isInstallError(){return this.steps.filter(step=>\"KO\"===step.state).length>0}goToInstance(){this.http.request(\"DELETE\",\"../rest/installer/lock\",{body:{customId:this.customId}}).pipe(Object(tap.tap)(res=>{window.location.href=res.url,this.dialogRef.close(\"ok\")}),Object(catchError.catchError)(err=>(this.notify.handleSoftErrors(err),Object(of.of)(!1)))).subscribe()}}return InstallActionComponent.ɵfac=function(t){return new(t||InstallActionComponent)(core.Tb(ngx_translate_core.e),core.Tb(dialog.a),core.Tb(dialog.h),core.Tb(fesm2015_http.b),core.Tb(installer_service_InstallerService),core.Tb(notification_service.a))},InstallActionComponent.ɵcmp=core.Nb({type:InstallActionComponent,selectors:[[\"app-install-action\"]],decls:15,vars:7,consts:[[1,\"mat-dialog-content-container\"],[\"mat-dialog-content\",\"\"],[\"hideToggle\",\"\",\"expanded\",\"\"],[1,\"launch-action\"],[\"color\",\"primary\",1,\"text-center\"],[\"mat-raised-button\",\"\",\"type\",\"button\",\"color\",\"primary\",2,\"font-size\",\"25px\",\"padding\",\"20px\",3,\"click\"],[1,\"far\",\"fa-hdd\"],[3,\"expanded\"],[\"installStepAction\",\"\"],[4,\"ngFor\",\"ngForOf\"],[4,\"ngIf\"],[\"mat-line\",\"\",1,\"step\"],[1,\"stepLabel\"],[\"class\",\"fa fa-check\",\"style\",\"color: green\",4,\"ngIf\"],[\"class\",\"fa fa-times\",\"style\",\"color: red\",4,\"ngIf\"],[\"class\",\"alert-message alert-message-danger\",\"role\",\"alert\",\"style\",\"margin-top: 30px;min-width: 100%;\",4,\"ngIf\"],[1,\"fa\",\"fa-check\",2,\"color\",\"green\"],[1,\"fa\",\"fa-times\",2,\"color\",\"red\"],[\"role\",\"alert\",1,\"alert-message\",\"alert-message-danger\",2,\"margin-top\",\"30px\",\"min-width\",\"100%\"],[1,\"divider-modal\"],[\"mat-dialog-actions\",\"\",1,\"actions\"],[\"mat-raised-button\",\"\",\"mat-button\",\"\",\"color\",\"primary\",3,\"click\",4,\"ngIf\"],[\"mat-raised-button\",\"\",\"mat-button\",\"\",3,\"mat-dialog-close\",4,\"ngIf\"],[\"mat-raised-button\",\"\",\"mat-button\",\"\",\"color\",\"primary\",3,\"click\"],[\"mat-raised-button\",\"\",\"mat-button\",\"\",3,\"mat-dialog-close\"]],template:function(rf,ctx){if(1&rf){const _r13=core.ac();core.Zb(0,\"div\",0),core.Zb(1,\"div\",1),core.Zb(2,\"mat-accordion\"),core.Zb(3,\"mat-expansion-panel\",2),core.Zb(4,\"div\",3),core.Zb(5,\"h2\",4),core.Sc(6,\"Vous y êtes presque !\"),core.Yb(),core.Zb(7,\"button\",5),core.hc(\"click\",(function(){return core.Hc(_r13),core.Dc(12).open(),ctx.launchInstall()})),core.Ub(8,\"i\",6),core.Sc(9),core.mc(10,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Zb(11,\"mat-expansion-panel\",7,8),core.Qc(13,InstallActionComponent_mat_list_item_13_Template,9,9,\"mat-list-item\",9),core.Yb(),core.Yb(),core.Yb(),core.Qc(14,InstallActionComponent_ng_container_14_Template,5,2,\"ng-container\",10),core.Yb()}2&rf&&(core.Eb(1),core.sc(\"@.disabled\",ctx.disableAnimation),core.Eb(8),core.Uc(\" \",core.nc(10,5,\"lang.launchInstall\"),\" \"),core.Eb(2),core.sc(\"expanded\",!1),core.Eb(2),core.sc(\"ngForOf\",ctx.steps),core.Eb(1),core.sc(\"ngIf\",ctx.isInstallComplete()||ctx.isInstallError()||!ctx.isInstallBegin()))},directives:[dialog.f,expansion.a,expansion.c,fesm2015_button.b,common.s,common.t,list.d,fesm2015_core.k,dialog.c,dialog.d],pipes:[ngx_translate_core.d],styles:[\".step[_ngcontent-%COMP%]{opacity:.5}.currentStep[_ngcontent-%COMP%], .step[_ngcontent-%COMP%], .step[_ngcontent-%COMP%]   .stepLabel[_ngcontent-%COMP%]{transition:all .2s}.currentStep[_ngcontent-%COMP%]{opacity:1}.currentStep[_ngcontent-%COMP%]   .stepLabel[_ngcontent-%COMP%]{font-size:150%;transition:all .2s}.endStep[_ngcontent-%COMP%]{opacity:1}.mat-expansion-panel[_ngcontent-%COMP%]{box-shadow:none}.launch-action[_ngcontent-%COMP%]{display:flex;flex-direction:column}\"]}),InstallActionComponent})();var filter=__webpack_require__(\"4ik+\"),header_service=__webpack_require__(\"4zkx\"),app_service=__webpack_require__(\"A6w4\"),functions_service=__webpack_require__(\"rH+9\"),sidenav=__webpack_require__(\"XhcP\"),fesm2015_stepper=__webpack_require__(\"xHqg\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),environment=__webpack_require__(\"MJ5r\"),icon=__webpack_require__(\"NFeN\"),form_field=__webpack_require__(\"kmnG\"),fesm2015_select=__webpack_require__(\"d3UM\"),divider=__webpack_require__(\"f0Cb\");function WelcomeComponent_mat_option_12_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-option\",13),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf){const language_r2=ctx.$implicit;core.sc(\"value\",language_r2),core.Eb(1),core.Uc(\" \",core.nc(2,2,\"lang.\"+language_r2+\"Full\"),\" \")}}function WelcomeComponent_mat_list_item_18_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-list-item\"),core.Ub(1,\"mat-icon\",14),core.Zb(2,\"div\",15),core.Sc(3),core.Yb(),core.Yb()),2&rf){const step_r3=ctx.$implicit;core.Eb(1),core.Gb(step_r3.icon),core.Eb(2),core.Tc(step_r3.desc)}}const _c0=function(a0){return{value1:a0}};let welcome_component_WelcomeComponent=(()=>{class WelcomeComponent{constructor(translate,http,notify,_formBuilder){this.translate=translate,this.http=http,this.notify=notify,this._formBuilder=_formBuilder,this.langs=[],this.appVersion=environment.a.VERSION.split(\".\")[0]+\".\"+environment.a.VERSION.split(\".\")[1],this.steps=[{icon:\"fas fa-check-square\",desc:this.translate.instant(\"lang.prerequisiteCheck\")},{icon:\"fa fa-database\",desc:this.translate.instant(\"lang.databaseCreation\")},{icon:\"fa fa-database\",desc:this.translate.instant(\"lang.dataSampleCreation\")},{icon:\"fa fa-hdd\",desc:this.translate.instant(\"lang.docserverCreation\")},{icon:\"fas fa-tools\",desc:this.translate.instant(\"lang.stepCustomizationActionDesc\")},{icon:\"fa fa-user\",desc:this.translate.instant(\"lang.adminUserCreation\")}]}ngOnInit(){this.stepFormGroup=this._formBuilder.group({lang:[\"fr\",fesm2015_forms.H.required]}),this.getLang()}getLang(){this.langs=[\"fr\",\"en\"]}initStep(){return!1}getInfoToInstall(){return[]}}return WelcomeComponent.ɵfac=function(t){return new(t||WelcomeComponent)(core.Tb(ngx_translate_core.e),core.Tb(fesm2015_http.b),core.Tb(notification_service.a),core.Tb(fesm2015_forms.g))},WelcomeComponent.ɵcmp=core.Nb({type:WelcomeComponent,selectors:[[\"app-welcome\"]],decls:30,vars:22,consts:[[1,\"stepContent\"],[1,\"stepContentTitle\"],[2,\"text-align\",\"center\"],[\"svgIcon\",\"maarchLogoFull\",1,\"maarchLogoFull\"],[2,\"width\",\"850px\",\"margin\",\"auto\",3,\"formGroup\"],[\"appearance\",\"outline\",\"floatLabel\",\"never\"],[\"formControlName\",\"lang\",\"required\",\"\"],[3,\"value\",4,\"ngFor\",\"ngForOf\"],[\"mat-subheader\",\"\"],[4,\"ngFor\",\"ngForOf\"],[\"mat-raised-button\",\"\",\"color\",\"primary\",\"href\",\"https://community.maarch.org/\",\"target\",\"_blank\"],[\"mat-raised-button\",\"\",\"color\",\"primary\",\"href\",\"http://www.maarch.com\",\"target\",\"_blank\"],[2,\"font-style\",\"italic\",\"padding-top\",\"30px\",\"text-align\",\"right\",3,\"innerHTML\"],[3,\"value\"],[\"mat-list-icon\",\"\",\"color\",\"primary\"],[\"mat-line\",\"\"]],template:function(rf,ctx){1&rf&&(core.Zb(0,\"div\",0),core.Zb(1,\"h2\",1),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Zb(4,\"div\",2),core.Ub(5,\"mat-icon\",3),core.Yb(),core.Zb(6,\"form\",4),core.Zb(7,\"mat-form-field\",5),core.Zb(8,\"mat-label\"),core.Sc(9),core.mc(10,\"translate\"),core.Yb(),core.Zb(11,\"mat-select\",6),core.Qc(12,WelcomeComponent_mat_option_12_Template,3,4,\"mat-option\",7),core.Yb(),core.Yb(),core.Yb(),core.Ub(13,\"mat-divider\"),core.Zb(14,\"mat-list\"),core.Zb(15,\"div\",8),core.Sc(16),core.mc(17,\"translate\"),core.Yb(),core.Qc(18,WelcomeComponent_mat_list_item_18_Template,4,3,\"mat-list-item\",9),core.Yb(),core.Ub(19,\"mat-divider\"),core.Zb(20,\"p\"),core.Sc(21),core.mc(22,\"translate\"),core.Yb(),core.Zb(23,\"a\",10),core.Sc(24,\" community.maarch.org \"),core.Yb(),core.Sc(25),core.mc(26,\"translate\"),core.Zb(27,\"a\",11),core.Sc(28,\" www.maarch.com \"),core.Yb(),core.Ub(29,\"p\",12),core.Yb()),2&rf&&(core.Eb(2),core.Uc(\"\",core.oc(3,9,\"lang.welcomeApp\",core.zc(20,_c0,ctx.appVersion)),\" !\"),core.Eb(4),core.sc(\"formGroup\",ctx.stepFormGroup),core.Eb(3),core.Uc(\"\",core.nc(10,12,\"lang.chooseAppLanguage\"),\" : \"),core.Eb(3),core.sc(\"ngForOf\",ctx.langs),core.Eb(4),core.Uc(\"\",core.nc(17,14,\"lang.installDescription\"),\" : \"),core.Eb(2),core.sc(\"ngForOf\",ctx.steps),core.Eb(3),core.Uc(\" \",core.nc(22,16,\"lang.externalInfoSite\"),\" : \"),core.Eb(4),core.Uc(\" \",core.nc(26,18,\"lang.or\"),\" \"),core.Eb(4),core.sc(\"innerHTML\",ctx.translate.instant(\"lang.maarchLicenceInstall\"),core.Ic))},directives:[icon.a,fesm2015_forms.J,fesm2015_forms.u,fesm2015_forms.l,form_field.c,form_field.g,fesm2015_select.a,fesm2015_forms.t,fesm2015_forms.j,fesm2015_forms.E,common.s,divider.a,list.a,list.g,fesm2015_button.a,fesm2015_core.o,list.d,list.c,fesm2015_core.k],pipes:[ngx_translate_core.d],styles:[\".stepContent[_ngcontent-%COMP%]{margin:auto}.stepContent[_ngcontent-%COMP%]   .stepContentTitle[_ngcontent-%COMP%]{color:#135f7f;margin-bottom:30px;border-bottom:1px solid;padding:0}.stepContent[_ngcontent-%COMP%]   .maarchLogoFull[_ngcontent-%COMP%]{width:300px;height:100px}.stepContent[_ngcontent-%COMP%]   .mat-divider[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}.link[_ngcontent-%COMP%]{text-decoration:underline;color:#135f7f!important}\"]}),WelcomeComponent})();var grid_list=__webpack_require__(\"zkoq\"),tooltip=__webpack_require__(\"Qu3c\");const prerequisite_component_c0=[\"packageItem\"];function PrerequisiteComponent_mat_list_10_mat_grid_tile_5_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-grid-tile\"),core.Zb(1,\"mat-list-item\"),core.Ub(2,\"mat-icon\",12),core.Zb(3,\"div\",13),core.Sc(4),core.mc(5,\"translate\"),core.Ub(6,\"i\",14,15),core.Yb(),core.Yb(),core.Yb()),2&rf){const package_r3=ctx.$implicit,ctx_r2=core.lc(2);core.Eb(2),core.Hb(\"fa iconCheckPackage icon_\",package_r3.state,\"\"),core.Eb(2),core.Uc(\" \",core.nc(5,7,\"lang.install_\"+package_r3.label),\" \"),core.Eb(2),core.sc(\"id\",package_r3.label)(\"matTooltip\",ctx_r2.translate.instant(\"lang.install_\"+package_r3.label+\"_desc\"))(\"matTooltipClass\",\"ok\"!==package_r3.state?\"tooltip-red\":\"\")}}function PrerequisiteComponent_mat_list_10_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-list\",8),core.Zb(1,\"div\",9),core.Sc(2),core.mc(3,\"translate\"),core.Yb(),core.Zb(4,\"mat-grid-list\",10),core.Qc(5,PrerequisiteComponent_mat_list_10_mat_grid_tile_5_Template,8,9,\"mat-grid-tile\",11),core.Yb(),core.Yb()),2&rf){const groupPackage_r1=ctx.$implicit,ctx_r0=core.lc();core.Eb(2),core.Tc(core.nc(3,2,\"lang.\"+groupPackage_r1.key)),core.Eb(3),core.sc(\"ngForOf\",ctx_r0.packagesList[groupPackage_r1.key])}}let prerequisite_component_PrerequisiteComponent=(()=>{class PrerequisiteComponent{constructor(translate,http,notify,_formBuilder){this.translate=translate,this.http=http,this.notify=notify,this._formBuilder=_formBuilder,this.prerequisites={},this.packagesList={general:[{label:\"phpVersionValid\",required:!0},{label:\"writable\",required:!0}],tools:[{label:\"unoconv\",required:!0},{label:\"netcatOrNmap\",required:!0},{label:\"pgsql\",required:!0},{label:\"curl\",required:!0},{label:\"zip\",required:!0},{label:\"wkhtmlToPdf\",required:!0},{label:\"imagick\",required:!0}],phpExtensions:[{label:\"fileinfo\",required:!0},{label:\"pdoPgsql\",required:!0},{label:\"gd\",required:!0},{label:\"mbstring\",required:!0},{label:\"json\",required:!0},{label:\"gettext\",required:!0},{label:\"xml\",required:!0}],phpConfiguration:[{label:\"errorReporting\",required:!0},{label:\"displayErrors\",required:!0}]},this.docMaarchUrl=`https://docs.maarch.org/gitbook/html/MaarchCourrier/${environment.a.VERSION.split(\".\")[0]+\".\"+environment.a.VERSION.split(\".\")[1]}/guat/guat_prerequisites/home.html`}ngOnInit(){this.stepFormGroup=this._formBuilder.group({firstCtrl:[\"\",fesm2015_forms.H.required]}),this.getStepData()}getStepData(){this.http.get(\"../rest/installer/prerequisites\").pipe(Object(tap.tap)(data=>{this.prerequisites=data.prerequisites,Object.keys(this.packagesList).forEach(group=>{this.packagesList[group].forEach((item,key)=>{this.packagesList[group][key].state=this.prerequisites[this.packagesList[group][key].label]?\"ok\":\"ko\",\"phpVersionValid\"===this.packagesList[group][key].label&&(this.translate.setTranslation(this.translate.getDefaultLang(),{lang:{install_phpVersionValid_desc:this.translate.instant(\"lang.currentVersion\")+\" : \"+this.prerequisites.phpVersion}},!0),console.log(this.translate))})}),this.stepFormGroup.controls.firstCtrl.setValue(this.checkStep()),this.stepFormGroup.controls.firstCtrl.markAsUntouched()}),Object(catchError.catchError)(err=>(this.notify.handleSoftErrors(err),Object(of.of)(!1)))).subscribe()}initStep(){Object.keys(this.packagesList).forEach(group=>{this.packagesList[group].forEach((item,key)=>{\"ko\"===this.packagesList[group][key].state&&this.packageItem.toArray().filter(itemKo=>itemKo._elementRef.nativeElement.id===this.packagesList[group][key].label)[0].toggle()})})}checkStep(){let state=\"success\";return Object.keys(this.packagesList).forEach(group=>{this.packagesList[group].forEach(item=>{\"ko\"===item.state&&(state=\"\")})}),state}isValidStep(){return void 0!==this.stepFormGroup&&\"success\"===this.stepFormGroup.controls.firstCtrl.value}getFormGroup(){return this.stepFormGroup}getInfoToInstall(){return[]}}return PrerequisiteComponent.ɵfac=function(t){return new(t||PrerequisiteComponent)(core.Tb(ngx_translate_core.e),core.Tb(fesm2015_http.b),core.Tb(notification_service.a),core.Tb(fesm2015_forms.g))},PrerequisiteComponent.ɵcmp=core.Nb({type:PrerequisiteComponent,selectors:[[\"app-prerequisite\"]],viewQuery:function(rf,ctx){var _t;1&rf&&core.ad(prerequisite_component_c0,!0),2&rf&&core.Cc(_t=core.ic())&&(ctx.packageItem=_t)},decls:16,vars:14,consts:[[1,\"stepContent\"],[1,\"stepContentTitle\"],[1,\"fas\",\"fa-check-square\"],[\"role\",\"alert\",1,\"alert-message\",\"alert-message-info\",2,\"margin-top\",\"30px\",\"min-width\",\"100%\"],[\"target\",\"_blank\",1,\"link\",3,\"href\"],[\"style\",\"background: white;\",4,\"ngFor\",\"ngForOf\"],[2,\"text-align\",\"center\"],[\"mat-raised-button\",\"\",\"type\",\"button\",\"color\",\"primary\",3,\"click\"],[2,\"background\",\"white\"],[\"mat-subheader\",\"\"],[\"cols\",\"3\",\"rowHeight\",\"50px\"],[4,\"ngFor\",\"ngForOf\"],[\"mat-list-icon\",\"\"],[\"mat-line\",\"\",1,\"packageName\"],[\"matTooltipPosition\",\"right\",1,\"fa\",\"fa-info-circle\",3,\"id\",\"matTooltip\",\"matTooltipClass\"],[\"packageItem\",\"matTooltip\"]],template:function(rf,ctx){1&rf&&(core.Zb(0,\"div\",0),core.Zb(1,\"h2\",1),core.Ub(2,\"i\",2),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Zb(5,\"div\",3),core.Sc(6),core.mc(7,\"translate\"),core.Zb(8,\"a\",4),core.Sc(9),core.Yb(),core.Yb(),core.Qc(10,PrerequisiteComponent_mat_list_10_Template,6,4,\"mat-list\",5),core.mc(11,\"keyvalue\"),core.Zb(12,\"div\",6),core.Zb(13,\"button\",7),core.hc(\"click\",(function(){return ctx.getStepData()})),core.Sc(14),core.mc(15,\"translate\"),core.Yb(),core.Yb(),core.Yb()),2&rf&&(core.Eb(3),core.Uc(\" \",core.nc(4,6,\"lang.prerequisite\"),\"\"),core.Eb(3),core.Uc(\" \",core.nc(7,8,\"lang.stepPrerequisite_desc\"),\" : \"),core.Eb(2),core.tc(\"href\",ctx.docMaarchUrl,core.Kc),core.Eb(1),core.Tc(ctx.docMaarchUrl),core.Eb(1),core.sc(\"ngForOf\",core.nc(11,10,ctx.packagesList)),core.Eb(4),core.Tc(core.nc(15,12,\"lang.updateInformations\")))},directives:[common.s,fesm2015_button.b,list.a,list.g,grid_list.b,grid_list.d,list.d,icon.a,list.c,fesm2015_core.k,tooltip.b],pipes:[ngx_translate_core.d,common.l],styles:['.stepContent[_ngcontent-%COMP%]{margin:auto}.stepContent[_ngcontent-%COMP%]   .stepContentTitle[_ngcontent-%COMP%]{color:#135f7f;margin-bottom:30px;border-bottom:1px solid;padding:0}.packageItem[_ngcontent-%COMP%]{flex:1!important}.iconCheckPackage[_ngcontent-%COMP%]{background:#fff;font-size:15px!important;display:flex;align-items:center;justify-content:center;padding:10px;border-radius:20px;height:35px;width:35px}.icon_ok[_ngcontent-%COMP%]{color:green}.icon_ok[_ngcontent-%COMP%]:before{content:\"\\\\f111\"}.icon_warning[_ngcontent-%COMP%]{color:orange}.icon_warning[_ngcontent-%COMP%]:before{content:\"\\\\f111\"}.icon_ko[_ngcontent-%COMP%]{color:red}.icon_ko[_ngcontent-%COMP%]:before{content:\"\\\\f111\"}.link[_ngcontent-%COMP%]{text-decoration:underline;color:#135f7f!important}.packageName[_ngcontent-%COMP%]{font-size:120%!important;white-space:normal!important}.packageName[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:help;opacity:.5;color:#135f7f} .tooltip-red{background:#b71c1c;font-size:14px}']}),PrerequisiteComponent})();var input=__webpack_require__(\"qFsG\");function DatabaseComponent_div_36_Template(rf,ctx){1&rf&&(core.Zb(0,\"div\",18),core.Sc(1),core.mc(2,\"translate\"),core.Yb()),2&rf&&(core.Eb(1),core.Uc(\" \",core.nc(2,1,\"lang.stepEmptyDb\"),\" \"))}function DatabaseComponent_mat_option_42_Template(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-option\",19),core.Sc(1),core.Yb()),2&rf){const sample_r2=ctx.$implicit;core.sc(\"value\",sample_r2),core.Eb(1),core.Uc(\" \",sample_r2,\" \")}}let database_component_DatabaseComponent=(()=>{class DatabaseComponent{constructor(translate,http,_formBuilder,notify,functionsService,installerService){this.translate=translate,this.http=http,this._formBuilder=_formBuilder,this.notify=notify,this.functionsService=functionsService,this.installerService=installerService,this.hide=!0,this.connectionState=!1,this.dbExist=!1,this.dataFiles=[],this.nextStep=new core.o;const valDbName=[fesm2015_forms.H.pattern(/^[^\\;\\\" \\\\]+$/),fesm2015_forms.H.required],valLoginDb=[fesm2015_forms.H.pattern(/^[^ ]+$/),fesm2015_forms.H.required];this.stepFormGroup=this._formBuilder.group({dbHostCtrl:[\"localhost\",fesm2015_forms.H.required],dbLoginCtrl:[\"\",valLoginDb],dbPortCtrl:[\"5432\",fesm2015_forms.H.required],dbPasswordCtrl:[\"\",valLoginDb],dbNameCtrl:[\"\",valDbName],dbSampleCtrl:[\"data_fr\",fesm2015_forms.H.required],stateStep:[\"\",fesm2015_forms.H.required]})}ngOnInit(){this.stepFormGroup.controls.dbHostCtrl.valueChanges.pipe(Object(tap.tap)(()=>this.stepFormGroup.controls.stateStep.setValue(\"\"))).subscribe(),this.stepFormGroup.controls.dbLoginCtrl.valueChanges.pipe(Object(tap.tap)(()=>this.stepFormGroup.controls.stateStep.setValue(\"\"))).subscribe(),this.stepFormGroup.controls.dbPortCtrl.valueChanges.pipe(Object(tap.tap)(()=>this.stepFormGroup.controls.stateStep.setValue(\"\"))).subscribe(),this.stepFormGroup.controls.dbPasswordCtrl.valueChanges.pipe(Object(tap.tap)(()=>this.stepFormGroup.controls.stateStep.setValue(\"\"))).subscribe(),this.stepFormGroup.controls.dbNameCtrl.valueChanges.pipe(Object(tap.tap)(()=>this.stepFormGroup.controls.stateStep.setValue(\"\"))).subscribe(),this.getDataFiles()}getDataFiles(){this.http.get(\"../rest/installer/sqlDataFiles\").pipe(Object(tap.tap)(data=>{this.dataFiles=data.dataFiles}),Object(catchError.catchError)(err=>(this.notify.handleSoftErrors(err),Object(of.of)(!1)))).subscribe()}isValidConnection(){return!1}initStep(){this.installerService.isStepAlreadyLaunched(\"database\")&&this.stepFormGroup.disable()}checkConnection(){this.http.get(\"../rest/installer/databaseConnection\",{observe:\"response\",params:{server:this.stepFormGroup.controls.dbHostCtrl.value,port:this.stepFormGroup.controls.dbPortCtrl.value,user:this.stepFormGroup.controls.dbLoginCtrl.value,password:this.stepFormGroup.controls.dbPasswordCtrl.value,name:this.stepFormGroup.controls.dbNameCtrl.value}}).pipe(Object(tap.tap)(data=>{this.dbExist=200===data.status,this.notify.success(this.translate.instant(\"lang.rightInformations\")),this.stepFormGroup.controls.stateStep.setValue(\"success\"),this.nextStep.emit()}),Object(catchError.catchError)(err=>(this.dbExist=!1,this.notify.error(this.translate.instant(\"Given database has tables\"===err.error.errors?\"lang.dbNotEmpty\":\"lang.badInformations\")),this.stepFormGroup.markAllAsTouched(),this.stepFormGroup.controls.stateStep.setValue(\"\"),Object(of.of)(!1)))).subscribe()}checkStep(){return this.stepFormGroup.valid}isValidStep(){return!!this.installerService.isStepAlreadyLaunched(\"database\")||void 0!==this.stepFormGroup&&this.stepFormGroup.valid}isEmptyConnInfo(){return this.stepFormGroup.controls.dbHostCtrl.invalid||this.stepFormGroup.controls.dbPortCtrl.invalid||this.stepFormGroup.controls.dbLoginCtrl.invalid||this.stepFormGroup.controls.dbPasswordCtrl.invalid||this.stepFormGroup.controls.dbNameCtrl.invalid}getFormGroup(){return!!this.installerService.isStepAlreadyLaunched(\"database\")||this.stepFormGroup}getInfoToInstall(){return[{idStep:\"database\",body:{server:this.stepFormGroup.controls.dbHostCtrl.value,port:this.stepFormGroup.controls.dbPortCtrl.value,user:this.stepFormGroup.controls.dbLoginCtrl.value,password:this.stepFormGroup.controls.dbPasswordCtrl.value,name:this.stepFormGroup.controls.dbNameCtrl.value,data:this.stepFormGroup.controls.dbSampleCtrl.value},route:{method:\"POST\",url:\"../rest/installer/database\"},description:this.translate.instant(\"lang.stepDatabaseActionDesc\"),installPriority:2}]}}return DatabaseComponent.ɵfac=function(t){return new(t||DatabaseComponent)(core.Tb(ngx_translate_core.e),core.Tb(fesm2015_http.b),core.Tb(fesm2015_forms.g),core.Tb(notification_service.a),core.Tb(functions_service.a),core.Tb(installer_service_InstallerService))},DatabaseComponent.ɵcmp=core.Nb({type:DatabaseComponent,selectors:[[\"app-database\"]],outputs:{nextStep:\"nextStep\"},decls:47,vars:35,consts:[[1,\"stepContent\"],[1,\"stepContentTitle\"],[1,\"fa\",\"fa-database\"],[\"role\",\"alert\",1,\"alert-message\",\"alert-message-info\",2,\"margin-top\",\"30px\",\"min-width\",\"100%\"],[2,\"width\",\"850px\",\"margin\",\"auto\",3,\"formGroup\"],[\"appearance\",\"outline\"],[\"matInput\",\"\",\"formControlName\",\"dbHostCtrl\",\"required\",\"\"],[\"matInput\",\"\",\"formControlName\",\"dbPortCtrl\",\"required\",\"\"],[\"matInput\",\"\",\"formControlName\",\"dbLoginCtrl\",\"required\",\"\"],[\"matInput\",\"\",\"formControlName\",\"dbPasswordCtrl\",\"required\",\"\",3,\"type\"],[\"mat-icon-button\",\"\",\"matSuffix\",\"\",\"color\",\"primary\",3,\"click\"],[\"matInput\",\"\",\"formControlName\",\"dbNameCtrl\",\"maxlength\",\"50\",\"required\",\"\"],[\"class\",\"alert-message alert-message-info\",\"role\",\"alert\",\"style\",\"margin-top: 0px;min-width: 100%;\",4,\"ngIf\"],[\"appearance\",\"outline\",\"floatLabel\",\"never\"],[\"formControlName\",\"dbSampleCtrl\"],[3,\"value\",4,\"ngFor\",\"ngForOf\"],[2,\"text-align\",\"center\"],[\"mat-raised-button\",\"\",\"type\",\"button\",\"color\",\"primary\",3,\"disabled\",\"click\"],[\"role\",\"alert\",1,\"alert-message\",\"alert-message-info\",2,\"margin-top\",\"0px\",\"min-width\",\"100%\"],[3,\"value\"]],template:function(rf,ctx){1&rf&&(core.Zb(0,\"div\",0),core.Zb(1,\"h2\",1),core.Ub(2,\"i\",2),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Zb(5,\"div\",3),core.Sc(6),core.mc(7,\"translate\"),core.Yb(),core.Zb(8,\"form\",4),core.Zb(9,\"mat-form-field\",5),core.Zb(10,\"mat-label\"),core.Sc(11),core.mc(12,\"translate\"),core.Yb(),core.Ub(13,\"input\",6),core.Yb(),core.Zb(14,\"mat-form-field\",5),core.Zb(15,\"mat-label\"),core.Sc(16),core.mc(17,\"translate\"),core.Yb(),core.Ub(18,\"input\",7),core.Yb(),core.Zb(19,\"mat-form-field\",5),core.Zb(20,\"mat-label\"),core.Sc(21),core.mc(22,\"translate\"),core.Yb(),core.Ub(23,\"input\",8),core.Yb(),core.Zb(24,\"mat-form-field\",5),core.Zb(25,\"mat-label\"),core.Sc(26),core.mc(27,\"translate\"),core.Yb(),core.Ub(28,\"input\",9),core.Zb(29,\"button\",10),core.hc(\"click\",(function(){return ctx.hide=!ctx.hide})),core.Ub(30,\"mat-icon\"),core.Yb(),core.Yb(),core.Zb(31,\"mat-form-field\",5),core.Zb(32,\"mat-label\"),core.Sc(33),core.mc(34,\"translate\"),core.Yb(),core.Ub(35,\"input\",11),core.Yb(),core.Qc(36,DatabaseComponent_div_36_Template,3,3,\"div\",12),core.Zb(37,\"mat-form-field\",13),core.Zb(38,\"mat-label\"),core.Sc(39),core.mc(40,\"translate\"),core.Yb(),core.Zb(41,\"mat-select\",14),core.Qc(42,DatabaseComponent_mat_option_42_Template,2,2,\"mat-option\",15),core.Yb(),core.Yb(),core.Zb(43,\"div\",16),core.Zb(44,\"button\",17),core.hc(\"click\",(function(){return ctx.checkConnection()})),core.Sc(45),core.mc(46,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Yb()),2&rf&&(core.Eb(3),core.Uc(\" \",core.nc(4,17,\"lang.database\"),\"\"),core.Eb(3),core.Uc(\" \",core.nc(7,19,\"lang.stepDatabase_desc\"),\" \"),core.Eb(2),core.sc(\"formGroup\",ctx.stepFormGroup),core.Eb(3),core.Tc(core.nc(12,21,\"lang.host\")),core.Eb(5),core.Tc(core.nc(17,23,\"lang.port\")),core.Eb(5),core.Tc(core.nc(22,25,\"lang.user\")),core.Eb(5),core.Tc(core.nc(27,27,\"lang.password\")),core.Eb(2),core.sc(\"type\",ctx.hide?\"password\":\"text\"),core.Eb(2),core.Hb(\"fa \",ctx.hide?\"fa-eye-slash\":\"fa-eye\",\"\"),core.Eb(3),core.Tc(core.nc(34,29,\"lang.dbName\")),core.Eb(3),core.sc(\"ngIf\",ctx.dbExist),core.Eb(3),core.Tc(core.nc(40,31,\"lang.dbSample\")),core.Eb(3),core.sc(\"ngForOf\",ctx.dataFiles),core.Eb(2),core.sc(\"disabled\",ctx.isEmptyConnInfo()||ctx.stepFormGroup.controls.dbHostCtrl.disabled),core.Eb(1),core.Uc(\" \",core.nc(46,33,\"lang.checkInformations\"),\" \"))},directives:[fesm2015_forms.J,fesm2015_forms.u,fesm2015_forms.l,form_field.c,form_field.g,input.b,fesm2015_forms.c,fesm2015_forms.t,fesm2015_forms.j,fesm2015_forms.E,fesm2015_button.b,form_field.j,icon.a,fesm2015_forms.o,common.t,fesm2015_select.a,common.s,fesm2015_core.o],pipes:[ngx_translate_core.d],styles:[\".stepContent[_ngcontent-%COMP%]{margin:auto}.stepContent[_ngcontent-%COMP%]   .stepContentTitle[_ngcontent-%COMP%]{color:#135f7f;margin-bottom:30px;border-bottom:1px solid;padding:0}\"]}),DatabaseComponent})(),docservers_component_DocserversComponent=(()=>{class DocserversComponent{constructor(translate,_formBuilder,notify,http,installerService){this.translate=translate,this._formBuilder=_formBuilder,this.notify=notify,this.http=http,this.installerService=installerService,this.nextStep=new core.o;const valPath=[fesm2015_forms.H.pattern(/^[^\\'\\<\\>\\|\\*\\:\\?]+$/),fesm2015_forms.H.required];this.stepFormGroup=this._formBuilder.group({docserversPath:[\"/opt/maarch/docservers/\",valPath],stateStep:[\"\",fesm2015_forms.H.required]}),this.stepFormGroup.controls.docserversPath.valueChanges.pipe(Object(tap.tap)(()=>this.stepFormGroup.controls.stateStep.setValue(\"\"))).subscribe()}ngOnInit(){}isValidStep(){return!!this.installerService.isStepAlreadyLaunched(\"docserver\")||void 0!==this.stepFormGroup&&this.stepFormGroup.valid}initStep(){this.installerService.isStepAlreadyLaunched(\"docserver\")&&this.stepFormGroup.disable()}getFormGroup(){return!!this.installerService.isStepAlreadyLaunched(\"docserver\")||this.stepFormGroup}checkAvailability(){this.http.get(\"../rest/installer/docservers\",{params:{path:this.stepFormGroup.controls.docserversPath.value}}).pipe(Object(tap.tap)(data=>{this.notify.success(this.translate.instant(\"lang.rightInformations\")),this.stepFormGroup.controls.stateStep.setValue(\"success\"),this.nextStep.emit()}),Object(catchError.catchError)(err=>(this.notify.error(this.translate.instant(\"lang.pathUnreacheable\")),this.stepFormGroup.controls.stateStep.setValue(\"\"),Object(of.of)(!1)))).subscribe()}getInfoToInstall(){return[{idStep:\"docserver\",body:{path:this.stepFormGroup.controls.docserversPath.value},route:{method:\"POST\",url:\"../rest/installer/docservers\"},description:this.translate.instant(\"lang.stepDocserversActionDesc\"),installPriority:3}]}}return DocserversComponent.ɵfac=function(t){return new(t||DocserversComponent)(core.Tb(ngx_translate_core.e),core.Tb(fesm2015_forms.g),core.Tb(notification_service.a),core.Tb(fesm2015_http.b),core.Tb(installer_service_InstallerService))},DocserversComponent.ɵcmp=core.Nb({type:DocserversComponent,selectors:[[\"app-docservers\"]],outputs:{nextStep:\"nextStep\"},decls:20,vars:14,consts:[[1,\"stepContent\"],[1,\"stepContentTitle\"],[1,\"fa\",\"fa-hdd\"],[\"role\",\"alert\",1,\"alert-message\",\"alert-message-info\",2,\"margin-top\",\"30px\",\"min-width\",\"100%\"],[2,\"width\",\"850px\",\"margin\",\"auto\",3,\"formGroup\"],[\"appearance\",\"outline\",2,\"color\",\"initial\"],[\"matInput\",\"\",\"formControlName\",\"docserversPath\"],[\"matSuffix\",\"\"],[2,\"text-align\",\"center\"],[\"mat-raised-button\",\"\",\"type\",\"button\",\"color\",\"primary\",3,\"disabled\",\"click\"]],template:function(rf,ctx){1&rf&&(core.Zb(0,\"div\",0),core.Zb(1,\"h2\",1),core.Ub(2,\"i\",2),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Zb(5,\"div\",3),core.Sc(6),core.mc(7,\"translate\"),core.Yb(),core.Zb(8,\"form\",4),core.Zb(9,\"mat-form-field\",5),core.Zb(10,\"mat-label\"),core.Sc(11),core.mc(12,\"translate\"),core.Yb(),core.Ub(13,\"input\",6),core.Zb(14,\"span\",7),core.Sc(15,\"/__CUSTOM_iD__/\"),core.Yb(),core.Yb(),core.Zb(16,\"div\",8),core.Zb(17,\"button\",9),core.hc(\"click\",(function(){return ctx.checkAvailability()})),core.Sc(18),core.mc(19,\"translate\"),core.Yb(),core.Yb(),core.Yb(),core.Yb()),2&rf&&(core.Eb(3),core.Uc(\" \",core.nc(4,6,\"lang.docserver\"),\"\"),core.Eb(3),core.Uc(\" \",core.nc(7,8,\"lang.stepDocserver_desc\"),\" \"),core.Eb(2),core.sc(\"formGroup\",ctx.stepFormGroup),core.Eb(3),core.Tc(core.nc(12,10,\"lang.docserverPath\")),core.Eb(6),core.sc(\"disabled\",!ctx.stepFormGroup.controls.docserversPath.valid),core.Eb(1),core.Tc(core.nc(19,12,\"lang.checkInformations\")))},directives:[fesm2015_forms.J,fesm2015_forms.u,fesm2015_forms.l,form_field.c,form_field.g,input.b,fesm2015_forms.c,fesm2015_forms.t,fesm2015_forms.j,form_field.j,fesm2015_button.b],pipes:[ngx_translate_core.d],styles:[\".stepContent[_ngcontent-%COMP%]{margin:auto}.stepContent[_ngcontent-%COMP%]   .stepContentTitle[_ngcontent-%COMP%]{color:#135f7f;margin-bottom:30px;border-bottom:1px solid;padding:0}\"]}),DocserversComponent})();var ngx_pipes=__webpack_require__(\"aEDk\"),operators_tap=__webpack_require__(\"vkgz\"),debounceTime=__webpack_require__(\"Kj3r\"),operators_filter=__webpack_require__(\"pLZG\"),operators_catchError=__webpack_require__(\"JIr8\"),platform_browser=__webpack_require__(\"jhN1\"),card=__webpack_require__(\"Wp6s\");function CustomizationComponent_ng_container_16_Template(rf,ctx){1&rf&&(core.Xb(0),core.Sc(1),core.mc(2,\"translate\"),core.Wb()),2&rf&&(core.Eb(1),core.Uc(\" \",core.nc(2,1,\"lang.customAlreadyExist\"),\" \"))}const customization_component_c0=function(){return{value1:'\"_\", \"-\"'}};function CustomizationComponent_ng_container_17_Template(rf,ctx){1&rf&&(core.Xb(0),core.Sc(1),core.mc(2,\"translate\"),core.Wb()),2&rf&&(core.Eb(1),core.Uc(\" \",core.oc(2,1,\"lang.onlySpecialCharAllowed\",core.yc(4,customization_component_c0)),\" \"))}function CustomizationComponent_mat_card_50_Template(rf,ctx){if(1&rf){const _r7=core.ac();core.Zb(0,\"mat-card\",20),core.hc(\"click\",(function(){core.Hc(_r7);const background_r5=ctx.$implicit;return core.lc().selectBg(background_r5.url)})),core.Yb()}if(2&rf){const background_r5=ctx.$implicit,ctx_r3=core.lc();core.Pc(\"background\",\"url(\"+background_r5.url+\")\",core.Mb),core.Jb(\"selected\",background_r5.url===ctx_r3.stepFormGroup.controls.bodyLoginBackground.value)(\"disabled\",ctx_r3.stepFormGroup.controls.bodyLoginBackground.disabled)}}function CustomizationComponent_mat_card_51_Template(rf,ctx){if(1&rf){const _r10=core.ac();core.Zb(0,\"mat-card\",21),core.hc(\"click\",(function(){return core.Hc(_r10),core.Dc(2).click()})),core.Zb(1,\"input\",22,23),core.hc(\"change\",(function($event){return core.Hc(_r10),core.lc().uploadTrigger($event,\"bg\")})),core.Yb(),core.Ub(3,\"i\",24),core.Yb()}}let customization_component_CustomizationComponent=(()=>{class CustomizationComponent{constructor(translate,_formBuilder,notify,sanitizer,scanPipe,http,installerService){this.translate=translate,this._formBuilder=_formBuilder,this.notify=notify,this.sanitizer=sanitizer,this.scanPipe=scanPipe,this.http=http,this.installerService=installerService,this.readonlyState=!1,this.backgroundList=[];const valIdentifier=[fesm2015_forms.H.pattern(/^[a-zA-Z0-9_\\-]*$/),fesm2015_forms.H.required];this.stepFormGroup=this._formBuilder.group({firstCtrl:[\"success\",fesm2015_forms.H.required],customId:[\"cs_maarchcourrier\",valIdentifier],appName:[\"Maarch Courrier \"+environment.a.VERSION.split(\".\")[0]+\".\"+environment.a.VERSION.split(\".\")[1],fesm2015_forms.H.required],loginMessage:[`<span style=\"color:#24b0ed\"><strong>Découvrez votre application via</strong></span>&nbsp;<a title=\"le guide de visite\" href=\"https://docs.maarch.org/gitbook/html/MaarchCourrier/${environment.a.VERSION.split(\".\")[0]+\".\"+environment.a.VERSION.split(\".\")[1]}/guu/home.html\" target=\"_blank\"><span style=\"color:#f99830;\"><strong>le guide de visite en ligne</strong></span></a>`],homeMessage:['<p>D&eacute;couvrez <strong>Maarch Courrier 20.10</strong> avec <a title=\"notre guide de visite\" href=\"https://docs.maarch.org/\" target=\"_blank\"><span style=\"color:#f99830;\"><strong>notre guide de visite en ligne</strong></span></a>.</p>'],bodyLoginBackground:[\"assets/bodylogin.jpg\"],uploadedLogo:[\"../rest/images?image=logo\"]}),this.backgroundList=Array.from({length:16}).map((_,i)=>({filename:i+1+\".jpg\",url:`assets/${i+1}.jpg`}))}ngOnInit(){this.checkCustomExist(),this.stepFormGroup.controls.customId.valueChanges.pipe(Object(operators_tap.a)(()=>{this.stepFormGroup.controls.firstCtrl.setValue(\"\")}),Object(debounceTime.a)(500),Object(operators_filter.a)(value=>value.length>2),Object(operators_filter.a)(()=>null===this.stepFormGroup.controls.customId.errors||void 0===this.stepFormGroup.controls.customId.errors.pattern),Object(operators_tap.a)(()=>{this.checkCustomExist()})).subscribe()}initStep(){this.installerService.isStepAlreadyLaunched(\"createCustom\")&&this.installerService.isStepAlreadyLaunched(\"customization\")?(this.stepFormGroup.disable(),this.readonlyState=!0,tinymce.remove(),this.initMce(!0)):this.installerService.isStepAlreadyLaunched(\"createCustom\")?(this.stepFormGroup.controls.customId.disable(),this.stepFormGroup.controls.appName.disable(),this.stepFormGroup.controls.firstCtrl.disable()):this.installerService.isStepAlreadyLaunched(\"customization\")?(this.stepFormGroup.controls.loginMessage.disable(),this.stepFormGroup.controls.homeMessage.disable(),this.stepFormGroup.controls.bodyLoginBackground.disable(),this.stepFormGroup.controls.uploadedLogo.disable(),this.readonlyState=!0,tinymce.remove(),this.initMce(!0)):(this.readonlyState=!1,this.initMce())}checkCustomExist(){this.http.get(\"../rest/installer/custom\",{observe:\"response\",params:{customId:this.stepFormGroup.controls.customId.value}}).pipe(Object(operators_tap.a)(response=>{null!==this.stepFormGroup.controls.customId.errors?delete this.stepFormGroup.controls.customId.errors.customExist:this.stepFormGroup.controls.firstCtrl.setValue(\"success\")}),Object(operators_catchError.a)(err=>(null!==err.error.errors.match(/^Custom already exists/g)?(this.stepFormGroup.controls.customId.setErrors(Object.assign(Object.assign({},this.stepFormGroup.controls.customId.errors),{customExist:!0})),this.stepFormGroup.controls.customId.markAsTouched()):this.notify.handleSoftErrors(err),Object(of.of)(!1)))).subscribe()}isValidStep(){return!(!this.installerService.isStepAlreadyLaunched(\"createCustom\")||!this.installerService.isStepAlreadyLaunched(\"customization\"))||void 0!==this.stepFormGroup&&this.stepFormGroup.valid}getFormGroup(){return!(!this.installerService.isStepAlreadyLaunched(\"createCustom\")||!this.installerService.isStepAlreadyLaunched(\"customization\"))||this.stepFormGroup}initMce(readonly=!1){tinymce.init({selector:\"textarea\",base_url:\"../node_modules/tinymce/\",height:\"150\",suffix:\".min\",language:this.translate.instant(\"lang.langISO\").replace(\"-\",\"_\"),language_url:`../node_modules/tinymce-i18n/langs/${this.translate.instant(\"lang.langISO\").replace(\"-\",\"_\")}.js`,menubar:!1,statusbar:!1,readonly:readonly,plugins:[\"autolink\"],external_plugins:{maarch_b64image:\"../../src/frontend/plugins/tinymce/maarch_b64image/plugin.min.js\"},toolbar_sticky:!0,toolbar_drawer:\"floating\",toolbar:readonly?\"\":\"undo redo | fontselect fontsizeselect | bold italic underline strikethrough forecolor | maarch_b64image |         alignleft aligncenter alignright alignjustify         bullist numlist outdent indent | removeformat\"})}getInfoToInstall(){return[{idStep:\"createCustom\",body:{customId:this.stepFormGroup.controls.customId.value,applicationName:this.stepFormGroup.controls.appName.value},description:this.translate.instant(\"lang.stepInstanceActionDesc\"),route:{method:\"POST\",url:\"../rest/installer/custom\"},installPriority:1},{idStep:\"customization\",body:{loginMessage:tinymce.get(\"loginMessage\").getContent(),homeMessage:tinymce.get(\"homeMessage\").getContent(),bodyLoginBackground:this.stepFormGroup.controls.bodyLoginBackground.value,logo:this.stepFormGroup.controls.uploadedLogo.value},description:this.translate.instant(\"lang.stepCustomizationActionDesc\"),route:{method:\"POST\",url:\"../rest/installer/customization\"},installPriority:3}]}uploadTrigger(fileInput,mode){if(fileInput.target.files&&fileInput.target.files[0]){const res=this.canUploadFile(fileInput.target.files[0],mode);if(!0===res){const reader=new FileReader;reader.readAsDataURL(fileInput.target.files[0]),reader.onload=value=>{if(\"logo\"===mode)this.stepFormGroup.controls.uploadedLogo.setValue(value.target.result);else{const img=new Image;img.onload=imgDim=>{imgDim.target.width<1920||imgDim.target.height<1080?this.notify.error(this.translate.instant(\"lang.badImageResolution\",{value1:\"1920x1080\"})):(this.backgroundList.push({filename:value.target.result,url:value.target.result}),this.stepFormGroup.controls.bodyLoginBackground.setValue(value.target.result))},img.src=value.target.result}}}else this.notify.error(res)}}canUploadFile(file,mode){const allowedExtension=\"logo\"!==mode?[\"image/jpg\",\"image/jpeg\"]:[\"image/svg+xml\"];if(\"logo\"===mode){if(file.size>5e6)return this.translate.instant(\"lang.maxFileSizeExceeded\",{value1:\"5mo\"});if(-1===allowedExtension.indexOf(file.type))return this.translate.instant(\"lang.onlyExtensionsAllowed\",{value1:allowedExtension.join(\", \")})}else{if(file.size>1e7)return this.translate.instant(\"lang.maxFileSizeExceeded\",{value1:\"10mo\"});if(-1===allowedExtension.indexOf(file.type))return this.translate.instant(\"lang.onlyExtensionsAllowed\",{value1:allowedExtension.join(\", \")})}return!0}logoURL(){return this.sanitizer.bypassSecurityTrustUrl(this.stepFormGroup.controls.uploadedLogo.value)}selectBg(content){this.stepFormGroup.controls.bodyLoginBackground.disabled||this.stepFormGroup.controls.bodyLoginBackground.setValue(content)}clickLogoButton(uploadLogo){this.stepFormGroup.controls.uploadedLogo.disabled||uploadLogo.click()}}return CustomizationComponent.ɵfac=function(t){return new(t||CustomizationComponent)(core.Tb(ngx_translate_core.e),core.Tb(fesm2015_forms.g),core.Tb(notification_service.a),core.Tb(platform_browser.b),core.Tb(ngx_pipes.o),core.Tb(fesm2015_http.b),core.Tb(installer_service_InstallerService))},CustomizationComponent.ɵcmp=core.Nb({type:CustomizationComponent,selectors:[[\"app-customization\"]],features:[core.Db([ngx_pipes.o])],decls:52,vars:34,consts:[[1,\"stepContent\"],[1,\"stepContentTitle\"],[1,\"fas\",\"fa-tools\"],[\"role\",\"alert\",1,\"alert-message\",\"alert-message-info\",2,\"margin-top\",\"30px\",\"min-width\",\"100%\"],[2,\"display\",\"contents\",3,\"formGroup\"],[1,\"col-md-6\"],[\"appearance\",\"outline\"],[\"matInput\",\"\",\"formControlName\",\"customId\"],[4,\"ngIf\"],[\"matInput\",\"\",\"formControlName\",\"appName\"],[\"name\",\"loginMessage\",\"id\",\"loginMessage\",\"formControlName\",\"loginMessage\",2,\"padding-top\",\"10px\"],[\"name\",\"homeMessage\",\"id\",\"homeMessage\",\"formControlName\",\"homeMessage\",2,\"padding-top\",\"10px\"],[\"matRipple\",\"\",2,\"width\",\"350px\",\"background-size\",\"100%\",\"cursor\",\"pointer\"],[2,\"width\",\"100%\",3,\"src\",\"click\"],[\"type\",\"file\",\"name\",\"files[]\",\"accept\",\"image/svg+xml\",2,\"display\",\"none\",3,\"change\"],[\"uploadLogo\",\"\"],[1,\"backgroundList\"],[1,\"backgroundItem\",2,\"background\",\"url(assets/bodylogin.jpg)\",\"background-size\",\"cover\",3,\"click\"],[\"style\",\"opacity: 0.3;\",\"class\",\"backgroundItem\",3,\"selected\",\"disabled\",\"background\",\"click\",4,\"ngFor\",\"ngForOf\"],[\"style\",\"opacity: 0.3;display: flex;align-items: center;justify-content: center;\",\"class\",\"backgroundItem\",3,\"click\",4,\"ngIf\"],[1,\"backgroundItem\",2,\"opacity\",\"0.3\",3,\"click\"],[1,\"backgroundItem\",2,\"opacity\",\"0.3\",\"display\",\"flex\",\"align-items\",\"center\",\"justify-content\",\"center\",3,\"click\"],[\"type\",\"file\",\"name\",\"files[]\",\"accept\",\"image/jpeg\",2,\"display\",\"none\",3,\"change\"],[\"uploadFile\",\"\"],[1,\"fa\",\"fa-plus\",2,\"font-size\",\"30px\",\"color\",\"#666\"]],template:function(rf,ctx){if(1&rf){const _r12=core.ac();core.Zb(0,\"div\",0),core.Zb(1,\"h2\",1),core.Ub(2,\"i\",2),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Zb(5,\"div\",3),core.Sc(6),core.mc(7,\"translate\"),core.Yb(),core.Zb(8,\"form\",4),core.Zb(9,\"div\",5),core.Zb(10,\"mat-form-field\",6),core.Zb(11,\"mat-label\"),core.Sc(12),core.mc(13,\"translate\"),core.Yb(),core.Ub(14,\"input\",7),core.Zb(15,\"mat-error\"),core.Qc(16,CustomizationComponent_ng_container_16_Template,3,3,\"ng-container\",8),core.Qc(17,CustomizationComponent_ng_container_17_Template,3,5,\"ng-container\",8),core.Yb(),core.Yb(),core.Zb(18,\"mat-form-field\",6),core.Zb(19,\"mat-label\"),core.Sc(20),core.mc(21,\"translate\"),core.Yb(),core.Ub(22,\"input\",9),core.Yb(),core.Zb(23,\"div\"),core.Sc(24),core.mc(25,\"translate\"),core.Yb(),core.Ub(26,\"textarea\",10),core.Ub(27,\"br\"),core.Ub(28,\"br\"),core.Zb(29,\"div\"),core.Sc(30),core.mc(31,\"translate\"),core.Yb(),core.Ub(32,\"textarea\",11),core.Ub(33,\"br\"),core.Ub(34,\"br\"),core.Yb(),core.Zb(35,\"div\",5),core.Zb(36,\"div\"),core.Sc(37),core.mc(38,\"translate\"),core.Yb(),core.Zb(39,\"div\"),core.Zb(40,\"mat-card\",12),core.Zb(41,\"img\",13),core.hc(\"click\",(function(){core.Hc(_r12);const _r2=core.Dc(43);return ctx.clickLogoButton(_r2)})),core.Yb(),core.Zb(42,\"input\",14,15),core.hc(\"change\",(function($event){return ctx.uploadTrigger($event,\"logo\")})),core.Yb(),core.Yb(),core.Yb(),core.Ub(44,\"br\"),core.Zb(45,\"div\"),core.Sc(46),core.mc(47,\"translate\"),core.Yb(),core.Zb(48,\"div\",16),core.Zb(49,\"mat-card\",17),core.hc(\"click\",(function(){return ctx.selectBg(\"assets/bodylogin.jpg\")})),core.Yb(),core.Qc(50,CustomizationComponent_mat_card_50_Template,1,6,\"mat-card\",18),core.Qc(51,CustomizationComponent_mat_card_51_Template,4,0,\"mat-card\",19),core.Yb(),core.Yb(),core.Yb(),core.Yb()}2&rf&&(core.Eb(3),core.Uc(\" \",core.nc(4,18,\"lang.customization\"),\"\"),core.Eb(3),core.Uc(\" \",core.nc(7,20,\"lang.stepCustomization_desc\"),\" \"),core.Eb(2),core.sc(\"formGroup\",ctx.stepFormGroup),core.Eb(4),core.Tc(core.nc(13,22,\"lang.instanceId\")),core.Eb(4),core.sc(\"ngIf\",null==ctx.stepFormGroup.controls.customId.errors?null:ctx.stepFormGroup.controls.customId.errors.customExist),core.Eb(1),core.sc(\"ngIf\",null==ctx.stepFormGroup.controls.customId.errors?null:ctx.stepFormGroup.controls.customId.errors.pattern),core.Eb(3),core.Tc(core.nc(21,24,\"lang.applicationName\")),core.Eb(4),core.Uc(\"\",core.nc(25,26,\"lang.loginMsg\"),\" : \"),core.Eb(6),core.Uc(\"\",core.nc(31,28,\"lang.homeMsg\"),\" : \"),core.Eb(7),core.Uc(\"\",core.nc(38,30,\"lang.chooseLogo\"),\" : \"),core.Eb(4),core.sc(\"src\",ctx.logoURL(),core.Kc),core.Eb(5),core.Uc(\"\",core.nc(47,32,\"lang.chooseLoginBg\"),\" : \"),core.Eb(3),core.Jb(\"disabled\",ctx.stepFormGroup.controls.bodyLoginBackground.disabled)(\"selected\",\"assets/bodylogin.jpg\"===ctx.stepFormGroup.controls.bodyLoginBackground.value),core.Eb(1),core.sc(\"ngForOf\",ctx.backgroundList),core.Eb(1),core.sc(\"ngIf\",!ctx.stepFormGroup.controls.bodyLoginBackground.disabled))},directives:[fesm2015_forms.J,fesm2015_forms.u,fesm2015_forms.l,form_field.c,form_field.g,input.b,fesm2015_forms.c,fesm2015_forms.t,fesm2015_forms.j,form_field.b,common.t,card.a,fesm2015_core.t,common.s],pipes:[ngx_translate_core.d],styles:[\".stepContent[_ngcontent-%COMP%]{margin:auto}.stepContent[_ngcontent-%COMP%]   .stepContentTitle[_ngcontent-%COMP%]{color:#135f7f;margin-bottom:30px;border-bottom:1px solid;padding:0}.backgroundList[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);grid-gap:10px}.selected[_ngcontent-%COMP%]{transition:all .3s;opacity:1!important;border:10px solid #f99830!important}.backgroundItem[_ngcontent-%COMP%]{border:0 solid #f99830;opacity:.5;transition:all .3s;cursor:pointer;height:120px;background-size:cover!important}.disabled[_ngcontent-%COMP%]{cursor:default!important}.backgroundItem[_ngcontent-%COMP%]:not(.disabled):hover{transition:all .3s;opacity:1!important}\"]}),CustomizationComponent})(),useradmin_component_UseradminComponent=(()=>{class UseradminComponent{constructor(translate,_formBuilder,notify,installerService){this.translate=translate,this._formBuilder=_formBuilder,this.notify=notify,this.installerService=installerService,this.hide=!0,this.tiggerInstall=new core.o;const valLogin=[fesm2015_forms.H.pattern(/^[\\w.@-]*$/),fesm2015_forms.H.required],valEmail=[fesm2015_forms.H.pattern(/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$/),fesm2015_forms.H.required];this.stepFormGroup=this._formBuilder.group({login:[\"superadmin\",valLogin],firstname:[\"Admin\",fesm2015_forms.H.required],lastname:[\"SUPER\",fesm2015_forms.H.required],password:[\"\",fesm2015_forms.H.required],passwordConfirm:[\"\",fesm2015_forms.H.required],email:[\"yourEmail@domain.com\",valEmail]})}ngOnInit(){this.stepFormGroup.controls.password.valueChanges.pipe(Object(tap.tap)(data=>{data!==this.stepFormGroup.controls.passwordConfirm.value?(this.stepFormGroup.controls.password.setErrors({incorrect:!0}),this.stepFormGroup.controls.passwordConfirm.setErrors({incorrect:!0}),this.stepFormGroup.controls.passwordConfirm.markAsTouched()):(this.stepFormGroup.controls.password.setErrors(null),this.stepFormGroup.controls.passwordConfirm.setErrors(null))})).subscribe(),this.stepFormGroup.controls.passwordConfirm.valueChanges.pipe(Object(tap.tap)(data=>{data!==this.stepFormGroup.controls.password.value?(this.stepFormGroup.controls.password.setErrors({incorrect:!0}),this.stepFormGroup.controls.password.markAsTouched(),this.stepFormGroup.controls.passwordConfirm.setErrors({incorrect:!0})):(this.stepFormGroup.controls.password.setErrors(null),this.stepFormGroup.controls.passwordConfirm.setErrors(null))})).subscribe()}initStep(){this.installerService.isStepAlreadyLaunched(\"userAdmin\")&&this.stepFormGroup.disable()}isValidStep(){return void 0!==this.stepFormGroup&&(this.stepFormGroup.valid||this.installerService.isStepAlreadyLaunched(\"userAdmin\"))}getFormGroup(){return!!this.installerService.isStepAlreadyLaunched(\"userAdmin\")||this.stepFormGroup}getInfoToInstall(){return[{idStep:\"userAdmin\",body:{login:this.stepFormGroup.controls.login.value,firstname:this.stepFormGroup.controls.firstname.value,lastname:this.stepFormGroup.controls.lastname.value,password:this.stepFormGroup.controls.password.value,email:this.stepFormGroup.controls.email.value},route:{method:\"PUT\",url:\"../rest/installer/administrator\"},description:this.translate.instant(\"lang.stepUserAdminActionDesc\"),installPriority:3}]}launchInstall(){this.tiggerInstall.emit()}}return UseradminComponent.ɵfac=function(t){return new(t||UseradminComponent)(core.Tb(ngx_translate_core.e),core.Tb(fesm2015_forms.g),core.Tb(notification_service.a),core.Tb(installer_service_InstallerService))},UseradminComponent.ɵcmp=core.Nb({type:UseradminComponent,selectors:[[\"app-useradmin\"]],outputs:{tiggerInstall:\"tiggerInstall\"},decls:49,vars:39,consts:[[1,\"stepContent\"],[1,\"stepContentTitle\"],[1,\"fas\",\"fa-user\"],[\"role\",\"alert\",1,\"alert-message\",\"alert-message-info\",2,\"margin-top\",\"30px\",\"min-width\",\"100%\"],[2,\"width\",\"850px\",\"margin\",\"auto\",3,\"formGroup\"],[\"appearance\",\"outline\"],[\"matInput\",\"\",\"formControlName\",\"login\"],[\"matInput\",\"\",\"formControlName\",\"firstname\"],[\"matInput\",\"\",\"formControlName\",\"lastname\"],[\"matInput\",\"\",\"formControlName\",\"password\",3,\"type\"],[\"mat-icon-button\",\"\",\"matSuffix\",\"\",\"color\",\"primary\",3,\"click\"],[\"matInput\",\"\",\"formControlName\",\"passwordConfirm\",3,\"type\"],[\"matInput\",\"\",\"formControlName\",\"email\"]],template:function(rf,ctx){1&rf&&(core.Zb(0,\"div\",0),core.Zb(1,\"h2\",1),core.Ub(2,\"i\",2),core.Sc(3),core.mc(4,\"translate\"),core.Yb(),core.Zb(5,\"div\",3),core.Sc(6),core.mc(7,\"translate\"),core.Yb(),core.Zb(8,\"form\",4),core.Zb(9,\"mat-form-field\",5),core.Zb(10,\"mat-label\"),core.Sc(11),core.mc(12,\"translate\"),core.Yb(),core.Ub(13,\"input\",6),core.Yb(),core.Zb(14,\"mat-form-field\",5),core.Zb(15,\"mat-label\"),core.Sc(16),core.mc(17,\"translate\"),core.Yb(),core.Ub(18,\"input\",7),core.Yb(),core.Zb(19,\"mat-form-field\",5),core.Zb(20,\"mat-label\"),core.Sc(21),core.mc(22,\"translate\"),core.Yb(),core.Ub(23,\"input\",8),core.Yb(),core.Zb(24,\"mat-form-field\",5),core.Zb(25,\"mat-label\"),core.Sc(26),core.mc(27,\"translate\"),core.Yb(),core.Ub(28,\"input\",9),core.Zb(29,\"button\",10),core.hc(\"click\",(function(){return ctx.hide=!ctx.hide})),core.Ub(30,\"mat-icon\"),core.Yb(),core.Zb(31,\"mat-error\"),core.Sc(32),core.mc(33,\"translate\"),core.Yb(),core.Yb(),core.Zb(34,\"mat-form-field\",5),core.Zb(35,\"mat-label\"),core.Sc(36),core.mc(37,\"translate\"),core.Yb(),core.Ub(38,\"input\",11),core.Zb(39,\"button\",10),core.hc(\"click\",(function(){return ctx.hide=!ctx.hide})),core.Ub(40,\"mat-icon\"),core.Yb(),core.Zb(41,\"mat-error\"),core.Sc(42),core.mc(43,\"translate\"),core.Yb(),core.Yb(),core.Zb(44,\"mat-form-field\",5),core.Zb(45,\"mat-label\"),core.Sc(46),core.mc(47,\"translate\"),core.Yb(),core.Ub(48,\"input\",12),core.Yb(),core.Yb(),core.Yb()),2&rf&&(core.Eb(3),core.Uc(\" \",core.nc(4,19,\"lang.userAdmin\"),\"\"),core.Eb(3),core.Uc(\" \",core.nc(7,21,\"lang.stepUserAdmin_desc\"),\" \"),core.Eb(2),core.sc(\"formGroup\",ctx.stepFormGroup),core.Eb(3),core.Tc(core.nc(12,23,\"lang.id\")),core.Eb(5),core.Tc(core.nc(17,25,\"lang.firstname\")),core.Eb(5),core.Tc(core.nc(22,27,\"lang.lastname\")),core.Eb(5),core.Tc(core.nc(27,29,\"lang.password\")),core.Eb(2),core.sc(\"type\",ctx.hide?\"password\":\"text\"),core.Eb(2),core.Hb(\"fa \",ctx.hide?\"fa-eye-slash\":\"fa-eye\",\"\"),core.Eb(2),core.Tc(core.nc(33,31,\"lang.passwordNotMatch\")),core.Eb(4),core.Tc(core.nc(37,33,\"lang.retypeNewPassword\")),core.Eb(2),core.sc(\"type\",ctx.hide?\"password\":\"text\"),core.Eb(2),core.Hb(\"fa \",ctx.hide?\"fa-eye-slash\":\"fa-eye\",\"\"),core.Eb(2),core.Tc(core.nc(43,35,\"lang.passwordNotMatch\")),core.Eb(4),core.Tc(core.nc(47,37,\"lang.email\")))},directives:[fesm2015_forms.J,fesm2015_forms.u,fesm2015_forms.l,form_field.c,form_field.g,input.b,fesm2015_forms.c,fesm2015_forms.t,fesm2015_forms.j,fesm2015_button.b,form_field.j,icon.a,form_field.b],pipes:[ngx_translate_core.d],styles:[\".stepContent[_ngcontent-%COMP%]{margin:auto}.stepContent[_ngcontent-%COMP%]   .stepContentTitle[_ngcontent-%COMP%]{color:#135f7f;margin-bottom:30px;border-bottom:1px solid;padding:0}\"]}),UseradminComponent})();const installer_component_c0=[\"stepper\"],_c1=[\"stepContent\"];function InstallerComponent_ng_template_9_Template(rf,ctx){1&rf&&core.Sc(0,\"Installation\")}function InstallerComponent_ng_template_17_Template(rf,ctx){1&rf&&(core.Sc(0),core.mc(1,\"translate\")),2&rf&&core.Tc(core.nc(1,1,\"lang.prerequisite\"))}function InstallerComponent_ng_template_28_Template(rf,ctx){1&rf&&(core.Sc(0),core.mc(1,\"translate\")),2&rf&&core.Tc(core.nc(1,1,\"lang.database\"))}function InstallerComponent_ng_template_39_Template(rf,ctx){1&rf&&(core.Sc(0),core.mc(1,\"translate\")),2&rf&&core.Tc(core.nc(1,1,\"lang.docserver\"))}function InstallerComponent_ng_template_50_Template(rf,ctx){1&rf&&(core.Sc(0),core.mc(1,\"translate\")),2&rf&&core.Tc(core.nc(1,1,\"lang.customization\"))}function InstallerComponent_ng_template_61_Template(rf,ctx){1&rf&&(core.Sc(0),core.mc(1,\"translate\")),2&rf&&core.Tc(core.nc(1,1,\"lang.userAdmin\"))}function InstallerComponent_ng_template_71_Template(rf,ctx){1&rf&&core.Ub(0,\"mat-icon\",30)}function InstallerComponent_ng_template_72_Template(rf,ctx){1&rf&&core.Ub(0,\"mat-icon\",30)}function InstallerComponent_ng_template_73_Template(rf,ctx){1&rf&&core.Ub(0,\"mat-icon\",31)}const routes=[{path:\"\",component:(()=>{class InstallerComponent{constructor(translate,http,router,headerService,notify,appService,sortPipe,dialog,functionService,installerService){this.translate=translate,this.http=http,this.router=router,this.headerService=headerService,this.notify=notify,this.appService=appService,this.sortPipe=sortPipe,this.dialog=dialog,this.functionService=functionService,this.installerService=installerService}ngOnInit(){this.headerService.hideSideBar=!0}ngAfterViewInit(){$(\".mat-horizontal-stepper-header-container\").insertBefore(\".bg-head-content\"),$(\".mat-step-icon\").css(\"background-color\",\"white\"),$(\".mat-step-icon\").css(\"color\",\"#135f7f\"),$(\".mat-step-label\").css(\"color\",\"white\")}isValidStep(){return!1}initStep(ev){this.stepContent.toArray()[ev.selectedIndex].initStep()}nextStep(){this.stepper.next()}endInstall(){let installContent=[];this.stepContent.toArray().forEach(component=>{installContent=installContent.concat(component.getInfoToInstall())}),installContent=this.sortPipe.transform(installContent,\"installPriority\"),console.log(installContent),this.dialog.open(install_action_component_InstallActionComponent,{panelClass:\"maarch-modal\",disableClose:!0,width:\"500px\",data:installContent}).afterClosed().pipe(Object(filter.filter)(result=>!this.functionService.empty(result)),Object(tap.tap)(result=>{}),Object(catchError.catchError)(err=>(this.notify.handleErrors(err),Object(of.of)(!1)))).subscribe()}}return InstallerComponent.ɵfac=function(t){return new(t||InstallerComponent)(core.Tb(ngx_translate_core.e),core.Tb(fesm2015_http.b),core.Tb(router.c),core.Tb(header_service.a),core.Tb(notification_service.a),core.Tb(app_service.a),core.Tb(sorting_pipe.a),core.Tb(dialog.b),core.Tb(functions_service.a),core.Tb(installer_service_InstallerService))},InstallerComponent.ɵcmp=core.Nb({type:InstallerComponent,selectors:[[\"ng-component\"]],viewQuery:function(rf,ctx){var _t;1&rf&&(core.Oc(installer_component_c0,!0),core.ad(_c1,!0)),2&rf&&(core.Cc(_t=core.ic())&&(ctx.stepper=_t.first),core.Cc(_t=core.ic())&&(ctx.stepContent=_t))},features:[core.Db([{provide:stepper.h,useValue:{showError:!0}},sorting_pipe.a])],decls:74,vars:26,consts:[[\"autosize\",\"\",1,\"maarch-container\"],[1,\"bg-head\"],[1,\"bg-head-content\"],[1,\"container\"],[1,\"container-content\",2,\"overflow\",\"hidden\"],[\"linear\",\"\",2,\"height\",\"100vh\",\"overflow\",\"auto\",3,\"selectionChange\"],[\"stepper\",\"\"],[\"label\",\"install\"],[\"matStepLabel\",\"\"],[1,\"stepContainer\"],[1,\"stepContent\"],[\"stepContent\",\"\"],[\"mat-fab\",\"\",\"matStepperNext\",\"\",\"color\",\"primary\",1,\"nextStepButton\",3,\"title\"],[1,\"fa\",\"fa-arrow-right\"],[3,\"stepControl\"],[\"appPrerequisite\",\"\",\"stepContent\",\"\"],[\"mat-fab\",\"\",\"matStepperPrevious\",\"\",\"color\",\"primary\",1,\"previousStepButton\",3,\"title\"],[1,\"fa\",\"fa-arrow-left\"],[\"mat-fab\",\"\",\"matStepperNext\",\"\",\"color\",\"primary\",1,\"nextStepButton\",3,\"title\",\"disabled\"],[3,\"nextStep\"],[\"appDatabase\",\"\",\"stepContent\",\"\"],[\"appDocservers\",\"\",\"stepContent\",\"\"],[\"appCustomization\",\"\",\"stepContent\",\"\"],[3,\"tiggerInstall\"],[\"appUseradmin\",\"\",\"stepContent\",\"\"],[\"mat-fab\",\"\",\"color\",\"accent\",1,\"nextStepButton\",3,\"title\",\"disabled\",\"click\"],[1,\"fas\",\"fa-check-double\"],[\"matStepperIcon\",\"edit\"],[\"matStepperIcon\",\"done\"],[\"matStepperIcon\",\"error\"],[1,\"fa\",\"fa-check\",\"stepIcon\"],[1,\"fa\",\"fa-times\",\"stepIcon\",2,\"color\",\"red\",\"font-size\",\"15px !important\"]],template:function(rf,ctx){if(1&rf&&(core.Zb(0,\"mat-sidenav-container\",0),core.Zb(1,\"mat-sidenav-content\"),core.Zb(2,\"div\",1),core.Ub(3,\"div\",2),core.Yb(),core.Zb(4,\"div\",3),core.Zb(5,\"div\",4),core.Zb(6,\"mat-horizontal-stepper\",5,6),core.hc(\"selectionChange\",(function($event){return ctx.initStep($event)})),core.Zb(8,\"mat-step\",7),core.Qc(9,InstallerComponent_ng_template_9_Template,1,0,\"ng-template\",8),core.Zb(10,\"div\",9),core.Zb(11,\"div\",10),core.Ub(12,\"app-welcome\",null,11),core.Yb(),core.Zb(14,\"button\",12),core.Ub(15,\"mat-icon\",13),core.Yb(),core.Yb(),core.Yb(),core.Zb(16,\"mat-step\",14),core.Qc(17,InstallerComponent_ng_template_17_Template,2,3,\"ng-template\",8),core.Zb(18,\"div\",9),core.Zb(19,\"div\",10),core.Ub(20,\"app-prerequisite\",null,15),core.Yb(),core.Zb(23,\"button\",16),core.Ub(24,\"mat-icon\",17),core.Yb(),core.Zb(25,\"button\",18),core.Ub(26,\"mat-icon\",13),core.Yb(),core.Yb(),core.Yb(),core.Zb(27,\"mat-step\",14),core.Qc(28,InstallerComponent_ng_template_28_Template,2,3,\"ng-template\",8),core.Zb(29,\"div\",9),core.Zb(30,\"div\",10),core.Zb(31,\"app-database\",19,20),core.hc(\"nextStep\",(function(){return ctx.nextStep()})),core.Yb(),core.Yb(),core.Zb(34,\"button\",16),core.Ub(35,\"mat-icon\",17),core.Yb(),core.Zb(36,\"button\",18),core.Ub(37,\"mat-icon\",13),core.Yb(),core.Yb(),core.Yb(),core.Zb(38,\"mat-step\",14),core.Qc(39,InstallerComponent_ng_template_39_Template,2,3,\"ng-template\",8),core.Zb(40,\"div\",9),core.Zb(41,\"div\",10),core.Zb(42,\"app-docservers\",19,21),core.hc(\"nextStep\",(function(){return ctx.nextStep()})),core.Yb(),core.Yb(),core.Zb(45,\"button\",16),core.Ub(46,\"mat-icon\",17),core.Yb(),core.Zb(47,\"button\",18),core.Ub(48,\"mat-icon\",13),core.Yb(),core.Yb(),core.Yb(),core.Zb(49,\"mat-step\",14),core.Qc(50,InstallerComponent_ng_template_50_Template,2,3,\"ng-template\",8),core.Zb(51,\"div\",9),core.Zb(52,\"div\",10),core.Ub(53,\"app-customization\",null,22),core.Yb(),core.Zb(56,\"button\",16),core.Ub(57,\"mat-icon\",17),core.Yb(),core.Zb(58,\"button\",18),core.Ub(59,\"mat-icon\",13),core.Yb(),core.Yb(),core.Yb(),core.Zb(60,\"mat-step\",14),core.Qc(61,InstallerComponent_ng_template_61_Template,2,3,\"ng-template\",8),core.Zb(62,\"div\",9),core.Zb(63,\"div\",10),core.Zb(64,\"app-useradmin\",23,24),core.hc(\"tiggerInstall\",(function(){return ctx.endInstall()})),core.Yb(),core.Yb(),core.Zb(67,\"button\",16),core.Ub(68,\"mat-icon\",17),core.Yb(),core.Zb(69,\"button\",25),core.hc(\"click\",(function(){return ctx.endInstall()})),core.Ub(70,\"mat-icon\",26),core.Yb(),core.Yb(),core.Yb(),core.Qc(71,InstallerComponent_ng_template_71_Template,1,0,\"ng-template\",27),core.Qc(72,InstallerComponent_ng_template_72_Template,1,0,\"ng-template\",28),core.Qc(73,InstallerComponent_ng_template_73_Template,1,0,\"ng-template\",29),core.Yb(),core.Yb(),core.Yb(),core.Yb(),core.Yb()),2&rf){const _r4=core.Dc(21),_r7=core.Dc(32),_r10=core.Dc(43),_r13=core.Dc(54),_r16=core.Dc(65);core.Eb(3),core.Jb(\"fullContainer\",ctx.appService.getViewMode()),core.Eb(1),core.Jb(\"fullContainer\",ctx.appService.getViewMode()),core.Eb(2),core.sc(\"@.disabled\",!0),core.Eb(8),core.sc(\"title\",ctx.translate.instant(\"lang.next\")),core.Eb(2),core.sc(\"stepControl\",_r4.getFormGroup()),core.Eb(7),core.sc(\"title\",ctx.translate.instant(\"lang.previous\")),core.Eb(2),core.sc(\"title\",ctx.translate.instant(\"lang.next\"))(\"disabled\",!_r4.isValidStep()),core.Eb(2),core.sc(\"stepControl\",_r7.getFormGroup()),core.Eb(7),core.sc(\"title\",ctx.translate.instant(\"lang.previous\")),core.Eb(2),core.sc(\"title\",ctx.translate.instant(\"lang.next\"))(\"disabled\",!_r7.isValidStep()),core.Eb(2),core.sc(\"stepControl\",_r10.getFormGroup()),core.Eb(7),core.sc(\"title\",ctx.translate.instant(\"lang.previous\")),core.Eb(2),core.sc(\"title\",ctx.translate.instant(\"lang.next\"))(\"disabled\",!_r10.isValidStep()),core.Eb(2),core.sc(\"stepControl\",_r13.getFormGroup()),core.Eb(7),core.sc(\"title\",ctx.translate.instant(\"lang.previous\")),core.Eb(2),core.sc(\"title\",ctx.translate.instant(\"lang.next\"))(\"disabled\",!_r13.isValidStep()),core.Eb(2),core.sc(\"stepControl\",_r16.getFormGroup()),core.Eb(7),core.sc(\"title\",ctx.translate.instant(\"lang.previous\")),core.Eb(2),core.sc(\"title\",ctx.translate.instant(\"lang.beginInstall\"))(\"disabled\",!_r16.isValidStep())}},directives:[sidenav.e,sidenav.f,fesm2015_stepper.a,fesm2015_stepper.b,fesm2015_stepper.d,welcome_component_WelcomeComponent,fesm2015_button.b,fesm2015_stepper.h,icon.a,prerequisite_component_PrerequisiteComponent,fesm2015_stepper.i,database_component_DatabaseComponent,docservers_component_DocserversComponent,customization_component_CustomizationComponent,useradmin_component_UseradminComponent,fesm2015_stepper.f],pipes:[ngx_translate_core.d],styles:[\".mat-stepper-horizontal{height:100%!important}.container[_ngcontent-%COMP%]{padding-left:80px!important;padding-right:80px!important}.previousStepButton[_ngcontent-%COMP%]{position:fixed;top:50%;left:10px;transform:translateY(-50%)}.previousStepButton[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:25px;height:auto;width:auto}.nextStepButton[_ngcontent-%COMP%]{position:fixed;top:50%;right:13px;transform:translateY(-50%)}.nextStepButton[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:25px;height:auto;width:auto} .mat-step-icon{background-color:#fff;color:#135f7f} .mat-step-label-active{opacity:1!important} .mat-step-label{color:#fff;opacity:.5}.stepIcon[_ngcontent-%COMP%]{font-size:10px!important;height:auto!important;width:auto!important} .mat-step-label{transition:all .2s} .mat-step-label-selected{font-size:160%;transition:all .2s;opacity:1}\"]}),InstallerComponent})()}];let installer_routing_module_InstallerRoutingModule=(()=>{class InstallerRoutingModule{}return InstallerRoutingModule.ɵmod=core.Rb({type:InstallerRoutingModule}),InstallerRoutingModule.ɵinj=core.Qb({factory:function(t){return new(t||InstallerRoutingModule)},imports:[[router.g.forChild(routes)],router.g]}),InstallerRoutingModule})(),installer_module_InstallerModule=(()=>{class InstallerModule{constructor(translate){translate.setDefaultLang(\"fr\")}}return InstallerModule.ɵmod=core.Rb({type:InstallerModule}),InstallerModule.ɵinj=core.Qb({factory:function(t){return new(t||InstallerModule)(core.dc(ngx_translate_core.e))},providers:[installer_service_InstallerService],imports:[[app_common_module.a,internationalization_module.a,installer_routing_module_InstallerRoutingModule]]}),InstallerModule})()}}]);","extractedComments":[]}