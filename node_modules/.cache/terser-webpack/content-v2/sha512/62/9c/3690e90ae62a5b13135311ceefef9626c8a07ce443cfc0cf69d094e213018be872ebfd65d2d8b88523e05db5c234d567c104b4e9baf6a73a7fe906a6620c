{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{\"6S62\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"InstallerModule\",(function(){return installer_module_InstallerModule}));var app_common_module=__webpack_require__(\"vWc3\"),internationalization_module=__webpack_require__(\"cMWS\"),router=__webpack_require__(\"tyNb\"),stepper=__webpack_require__(\"B/XX\"),sorting_pipe=__webpack_require__(\"1YbM\"),tslib_es6=__webpack_require__(\"mrSG\"),dialog=__webpack_require__(\"0IaG\"),tap=__webpack_require__(\"pWCv\"),catchError=__webpack_require__(\"rNzc\"),of=__webpack_require__(\"I65S\"),core=__webpack_require__(\"fXoL\"),ngx_translate_core=__webpack_require__(\"sYmb\"),fesm2015_http=__webpack_require__(\"tk/3\");let installer_service_InstallerService=(()=>{class InstallerService{constructor(){this.steps=[]}setStep(step){this.steps.push(step)}isStepAlreadyLaunched(IdsStep){return this.steps.filter(step=>IdsStep===step.idStep).length>0}}return InstallerService.ɵfac=function(t){return new(t||InstallerService)},InstallerService.ɵprov=core.Mb({token:InstallerService,factory:InstallerService.ɵfac}),InstallerService})();var notification_service=__webpack_require__(\"AXEc\"),expansion=__webpack_require__(\"7EHt\"),fesm2015_button=__webpack_require__(\"bTqV\"),common=__webpack_require__(\"ofXK\"),list=__webpack_require__(\"MutI\"),fesm2015_core=__webpack_require__(\"FKr1\");function InstallActionComponent_mat_list_item_13_ng_container_4_Template(rf,ctx){1&rf&&(core.Ub(0),core.Qc(1,\"...\"),core.Tb())}function InstallActionComponent_mat_list_item_13_i_6_Template(rf,ctx){1&rf&&core.Rb(0,\"i\",16)}function InstallActionComponent_mat_list_item_13_i_7_Template(rf,ctx){1&rf&&core.Rb(0,\"i\",17)}function InstallActionComponent_mat_list_item_13_div_8_Template(rf,ctx){if(1&rf&&(core.Wb(0,\"div\",18),core.Qc(1),core.Vb()),2&rf){const step_r3=core.hc().$implicit;core.Db(1),core.Sc(\" \",step_r3.msgErr,\" \")}}function InstallActionComponent_mat_list_item_13_Template(rf,ctx){if(1&rf&&(core.Wb(0,\"mat-list-item\"),core.Wb(1,\"div\",11),core.Wb(2,\"span\",12),core.Qc(3),core.Vb(),core.Oc(4,InstallActionComponent_mat_list_item_13_ng_container_4_Template,2,0,\"ng-container\",10),core.Qc(5,\"  \"),core.Oc(6,InstallActionComponent_mat_list_item_13_i_6_Template,1,0,\"i\",13),core.Oc(7,InstallActionComponent_mat_list_item_13_i_7_Template,1,0,\"i\",14),core.Oc(8,InstallActionComponent_mat_list_item_13_div_8_Template,2,1,\"div\",15),core.Vb(),core.Vb()),2&rf){const step_r3=ctx.$implicit;core.Db(1),core.Ib(\"endStep\",\"OK\"===step_r3.state||\"KO\"===step_r3.state)(\"currentStep\",\"inProgress\"===step_r3.state),core.Db(2),core.Rc(step_r3.label),core.Db(1),core.oc(\"ngIf\",\"inProgress\"===step_r3.state),core.Db(2),core.oc(\"ngIf\",\"OK\"===step_r3.state),core.Db(1),core.oc(\"ngIf\",\"KO\"===step_r3.state),core.Db(1),core.oc(\"ngIf\",\"\"!==step_r3.msgErr)}}function InstallActionComponent_ng_container_14_button_3_Template(rf,ctx){if(1&rf){const _r12=core.Xb();core.Wb(0,\"button\",23),core.dc(\"click\",(function(){return core.Dc(_r12),core.hc(2).goToInstance()})),core.Qc(1),core.ic(2,\"translate\"),core.Vb()}2&rf&&(core.Db(1),core.Rc(core.jc(2,1,\"lang.goToNewInstance\")))}function InstallActionComponent_ng_container_14_button_4_Template(rf,ctx){1&rf&&(core.Wb(0,\"button\",24),core.Qc(1),core.ic(2,\"translate\"),core.Vb()),2&rf&&(core.Db(1),core.Rc(core.jc(2,1,\"lang.cancel\")))}function InstallActionComponent_ng_container_14_Template(rf,ctx){if(1&rf&&(core.Ub(0),core.Rb(1,\"span\",19),core.Wb(2,\"div\",20),core.Oc(3,InstallActionComponent_ng_container_14_button_3_Template,3,3,\"button\",21),core.Oc(4,InstallActionComponent_ng_container_14_button_4_Template,3,3,\"button\",22),core.Vb(),core.Tb()),2&rf){const ctx_r2=core.hc();core.Db(3),core.oc(\"ngIf\",!ctx_r2.isInstallError()&&ctx_r2.isInstallComplete()),core.Db(1),core.oc(\"ngIf\",ctx_r2.isInstallError()||!ctx_r2.isInstallBegin())}}let install_action_component_InstallActionComponent=(()=>{class InstallActionComponent{constructor(translate,data,dialogRef,http,installerService,notify){this.translate=translate,this.data=data,this.dialogRef=dialogRef,this.http=http,this.installerService=installerService,this.notify=notify,this.steps=[],this.customId=\"\",this.disableAnimation=!0}ngOnInit(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){this.initSteps()}))}ngAfterViewInit(){setTimeout(()=>this.disableAnimation=!1)}launchInstall(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){let res;for(let index=0;index<this.data.length&&(this.steps[index].state=\"inProgress\",res=yield this.doStep(index),res);index++);}))}initSteps(){this.data.forEach((step,index)=>{0===index?this.customId=step.body.customId:step.body.customId=this.customId,this.steps.push({idStep:step.idStep,label:step.description,state:\"\",msgErr:\"\"})})}doStep(index){return new Promise((resolve,reject)=>{this.installerService.isStepAlreadyLaunched(this.data[index].idStep)?(this.steps[index].state=\"OK\",resolve(!0)):this.http[this.data[index].route.method.toLowerCase()](this.data[index].route.url,this.data[index].body).pipe(Object(tap.tap)(data=>{this.steps[index].state=\"OK\",this.installerService.setStep(this.steps[index]),resolve(!0)}),Object(catchError.catchError)(err=>(this.steps[index].state=\"KO\",this.steps[index].msgErr=void 0!==err.error.lang?this.translate.instant(\"lang.\"+err.error.lang):err.error.errors,resolve(!1),Object(of.of)(!1)))).subscribe()})}isInstallBegin(){return this.steps.filter(step=>\"\"===step.state).length!==this.steps.length}isInstallComplete(){return 0===this.steps.filter(step=>\"\"===step.state).length}isInstallError(){return this.steps.filter(step=>\"KO\"===step.state).length>0}goToInstance(){this.http.request(\"DELETE\",\"../rest/installer/lock\",{body:{customId:this.customId}}).pipe(Object(tap.tap)(res=>{window.location.href=res.url,this.dialogRef.close(\"ok\")}),Object(catchError.catchError)(err=>(this.notify.handleSoftErrors(err),Object(of.of)(!1)))).subscribe()}}return InstallActionComponent.ɵfac=function(t){return new(t||InstallActionComponent)(core.Qb(ngx_translate_core.e),core.Qb(dialog.a),core.Qb(dialog.h),core.Qb(fesm2015_http.b),core.Qb(installer_service_InstallerService),core.Qb(notification_service.a))},InstallActionComponent.ɵcmp=core.Kb({type:InstallActionComponent,selectors:[[\"app-install-action\"]],decls:15,vars:7,consts:[[1,\"mat-dialog-content-container\"],[\"mat-dialog-content\",\"\"],[\"hideToggle\",\"\",\"expanded\",\"\"],[1,\"launch-action\"],[\"color\",\"primary\",1,\"text-center\"],[\"mat-raised-button\",\"\",\"type\",\"button\",\"color\",\"primary\",2,\"font-size\",\"25px\",\"padding\",\"20px\",3,\"click\"],[1,\"far\",\"fa-hdd\"],[3,\"expanded\"],[\"installStepAction\",\"\"],[4,\"ngFor\",\"ngForOf\"],[4,\"ngIf\"],[\"mat-line\",\"\",1,\"step\"],[1,\"stepLabel\"],[\"class\",\"fa fa-check\",\"style\",\"color: green\",4,\"ngIf\"],[\"class\",\"fa fa-times\",\"style\",\"color: red\",4,\"ngIf\"],[\"class\",\"alert-message alert-message-danger\",\"role\",\"alert\",\"style\",\"margin-top: 30px;min-width: 100%;\",4,\"ngIf\"],[1,\"fa\",\"fa-check\",2,\"color\",\"green\"],[1,\"fa\",\"fa-times\",2,\"color\",\"red\"],[\"role\",\"alert\",1,\"alert-message\",\"alert-message-danger\",2,\"margin-top\",\"30px\",\"min-width\",\"100%\"],[1,\"divider-modal\"],[\"mat-dialog-actions\",\"\",1,\"actions\"],[\"mat-raised-button\",\"\",\"mat-button\",\"\",\"color\",\"primary\",3,\"click\",4,\"ngIf\"],[\"mat-raised-button\",\"\",\"mat-button\",\"\",3,\"mat-dialog-close\",4,\"ngIf\"],[\"mat-raised-button\",\"\",\"mat-button\",\"\",\"color\",\"primary\",3,\"click\"],[\"mat-raised-button\",\"\",\"mat-button\",\"\",3,\"mat-dialog-close\"]],template:function(rf,ctx){if(1&rf){const _r13=core.Xb();core.Wb(0,\"div\",0),core.Wb(1,\"div\",1),core.Wb(2,\"mat-accordion\"),core.Wb(3,\"mat-expansion-panel\",2),core.Wb(4,\"div\",3),core.Wb(5,\"h2\",4),core.Qc(6,\"Vous y êtes presque !\"),core.Vb(),core.Wb(7,\"button\",5),core.dc(\"click\",(function(){return core.Dc(_r13),core.zc(12).open(),ctx.launchInstall()})),core.Rb(8,\"i\",6),core.Qc(9),core.ic(10,\"translate\"),core.Vb(),core.Vb(),core.Vb(),core.Wb(11,\"mat-expansion-panel\",7,8),core.Oc(13,InstallActionComponent_mat_list_item_13_Template,9,9,\"mat-list-item\",9),core.Vb(),core.Vb(),core.Vb(),core.Oc(14,InstallActionComponent_ng_container_14_Template,5,2,\"ng-container\",10),core.Vb()}2&rf&&(core.Db(1),core.oc(\"@.disabled\",ctx.disableAnimation),core.Db(8),core.Sc(\" \",core.jc(10,5,\"lang.launchInstall\"),\" \"),core.Db(2),core.oc(\"expanded\",!1),core.Db(2),core.oc(\"ngForOf\",ctx.steps),core.Db(1),core.oc(\"ngIf\",ctx.isInstallComplete()||ctx.isInstallError()||!ctx.isInstallBegin()))},directives:[dialog.f,expansion.a,expansion.c,fesm2015_button.b,common.s,common.t,list.d,fesm2015_core.l,dialog.c,dialog.d],pipes:[ngx_translate_core.d],styles:[\".step[_ngcontent-%COMP%]{opacity:.5}.currentStep[_ngcontent-%COMP%], .step[_ngcontent-%COMP%], .step[_ngcontent-%COMP%]   .stepLabel[_ngcontent-%COMP%]{transition:all .2s}.currentStep[_ngcontent-%COMP%]{opacity:1}.currentStep[_ngcontent-%COMP%]   .stepLabel[_ngcontent-%COMP%]{font-size:150%;transition:all .2s}.endStep[_ngcontent-%COMP%]{opacity:1}.mat-expansion-panel[_ngcontent-%COMP%]{box-shadow:none}.launch-action[_ngcontent-%COMP%]{display:flex;flex-direction:column}\"]}),InstallActionComponent})();var filter=__webpack_require__(\"4ik+\"),header_service=__webpack_require__(\"4zkx\"),app_service=__webpack_require__(\"A6w4\"),functions_service=__webpack_require__(\"rH+9\"),sidenav=__webpack_require__(\"XhcP\"),fesm2015_stepper=__webpack_require__(\"xHqg\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),environment=__webpack_require__(\"MJ5r\"),icon=__webpack_require__(\"NFeN\"),form_field=__webpack_require__(\"kmnG\"),fesm2015_select=__webpack_require__(\"d3UM\"),divider=__webpack_require__(\"f0Cb\");function WelcomeComponent_mat_option_12_Template(rf,ctx){if(1&rf&&(core.Wb(0,\"mat-option\",13),core.Qc(1),core.ic(2,\"translate\"),core.Vb()),2&rf){const language_r2=ctx.$implicit;core.oc(\"value\",language_r2),core.Db(1),core.Sc(\" \",core.jc(2,2,\"lang.\"+language_r2+\"Full\"),\" \")}}function WelcomeComponent_mat_list_item_18_Template(rf,ctx){if(1&rf&&(core.Wb(0,\"mat-list-item\"),core.Rb(1,\"mat-icon\",14),core.Wb(2,\"div\",15),core.Qc(3),core.Vb(),core.Vb()),2&rf){const step_r3=ctx.$implicit;core.Db(1),core.Fb(step_r3.icon),core.Db(2),core.Rc(step_r3.desc)}}const _c0=function(a0){return{value1:a0}};let welcome_component_WelcomeComponent=(()=>{class WelcomeComponent{constructor(translate,http,notify,_formBuilder){this.translate=translate,this.http=http,this.notify=notify,this._formBuilder=_formBuilder,this.langs=[],this.appVersion=environment.a.VERSION.split(\".\")[0]+\".\"+environment.a.VERSION.split(\".\")[1],this.steps=[{icon:\"fas fa-check-square\",desc:this.translate.instant(\"lang.prerequisiteCheck\")},{icon:\"fa fa-database\",desc:this.translate.instant(\"lang.databaseCreation\")},{icon:\"fa fa-database\",desc:this.translate.instant(\"lang.dataSampleCreation\")},{icon:\"fa fa-hdd\",desc:this.translate.instant(\"lang.docserverCreation\")},{icon:\"fas fa-tools\",desc:this.translate.instant(\"lang.stepCustomizationActionDesc\")},{icon:\"fa fa-user\",desc:this.translate.instant(\"lang.adminUserCreation\")}]}ngOnInit(){this.stepFormGroup=this._formBuilder.group({lang:[\"fr\",fesm2015_forms.I.required]}),this.getLang()}getLang(){this.langs=[\"fr\",\"en\"]}initStep(){return!1}getInfoToInstall(){return[]}}return WelcomeComponent.ɵfac=function(t){return new(t||WelcomeComponent)(core.Qb(ngx_translate_core.e),core.Qb(fesm2015_http.b),core.Qb(notification_service.a),core.Qb(fesm2015_forms.h))},WelcomeComponent.ɵcmp=core.Kb({type:WelcomeComponent,selectors:[[\"app-welcome\"]],decls:30,vars:22,consts:[[1,\"stepContent\"],[1,\"stepContentTitle\"],[2,\"text-align\",\"center\"],[\"svgIcon\",\"maarchLogoFull\",1,\"maarchLogoFull\"],[2,\"width\",\"850px\",\"margin\",\"auto\",3,\"formGroup\"],[\"appearance\",\"outline\",\"floatLabel\",\"never\"],[\"formControlName\",\"lang\",\"required\",\"\"],[3,\"value\",4,\"ngFor\",\"ngForOf\"],[\"mat-subheader\",\"\"],[4,\"ngFor\",\"ngForOf\"],[\"mat-raised-button\",\"\",\"color\",\"primary\",\"href\",\"https://community.maarch.org/\",\"target\",\"_blank\"],[\"mat-raised-button\",\"\",\"color\",\"primary\",\"href\",\"http://www.maarch.com\",\"target\",\"_blank\"],[2,\"font-style\",\"italic\",\"padding-top\",\"30px\",\"text-align\",\"right\",3,\"innerHTML\"],[3,\"value\"],[\"mat-list-icon\",\"\",\"color\",\"primary\"],[\"mat-line\",\"\"]],template:function(rf,ctx){1&rf&&(core.Wb(0,\"div\",0),core.Wb(1,\"h2\",1),core.Qc(2),core.ic(3,\"translate\"),core.Vb(),core.Wb(4,\"div\",2),core.Rb(5,\"mat-icon\",3),core.Vb(),core.Wb(6,\"form\",4),core.Wb(7,\"mat-form-field\",5),core.Wb(8,\"mat-label\"),core.Qc(9),core.ic(10,\"translate\"),core.Vb(),core.Wb(11,\"mat-select\",6),core.Oc(12,WelcomeComponent_mat_option_12_Template,3,4,\"mat-option\",7),core.Vb(),core.Vb(),core.Vb(),core.Rb(13,\"mat-divider\"),core.Wb(14,\"mat-list\"),core.Wb(15,\"div\",8),core.Qc(16),core.ic(17,\"translate\"),core.Vb(),core.Oc(18,WelcomeComponent_mat_list_item_18_Template,4,3,\"mat-list-item\",9),core.Vb(),core.Rb(19,\"mat-divider\"),core.Wb(20,\"p\"),core.Qc(21),core.ic(22,\"translate\"),core.Vb(),core.Wb(23,\"a\",10),core.Qc(24,\" community.maarch.org \"),core.Vb(),core.Qc(25),core.ic(26,\"translate\"),core.Wb(27,\"a\",11),core.Qc(28,\" www.maarch.com \"),core.Vb(),core.Rb(29,\"p\",12),core.Vb()),2&rf&&(core.Db(2),core.Sc(\"\",core.kc(3,9,\"lang.welcomeApp\",core.vc(20,_c0,ctx.appVersion)),\" !\"),core.Db(4),core.oc(\"formGroup\",ctx.stepFormGroup),core.Db(3),core.Sc(\"\",core.jc(10,12,\"lang.chooseAppLanguage\"),\" : \"),core.Db(3),core.oc(\"ngForOf\",ctx.langs),core.Db(4),core.Sc(\"\",core.jc(17,14,\"lang.installDescription\"),\" : \"),core.Db(2),core.oc(\"ngForOf\",ctx.steps),core.Db(3),core.Sc(\" \",core.jc(22,16,\"lang.externalInfoSite\"),\" : \"),core.Db(4),core.Sc(\" \",core.jc(26,18,\"lang.or\"),\" \"),core.Db(4),core.oc(\"innerHTML\",ctx.translate.instant(\"lang.maarchLicenceInstall\"),core.Ec))},directives:[icon.a,fesm2015_forms.K,fesm2015_forms.v,fesm2015_forms.m,form_field.c,form_field.g,fesm2015_select.a,fesm2015_forms.u,fesm2015_forms.k,fesm2015_forms.F,common.s,divider.a,list.a,list.g,fesm2015_button.a,fesm2015_core.p,list.d,list.c,fesm2015_core.l],pipes:[ngx_translate_core.d],styles:[\".stepContent[_ngcontent-%COMP%]{margin:auto}.stepContent[_ngcontent-%COMP%]   .stepContentTitle[_ngcontent-%COMP%]{color:#135f7f;margin-bottom:30px;border-bottom:1px solid;padding:0}.stepContent[_ngcontent-%COMP%]   .maarchLogoFull[_ngcontent-%COMP%]{width:300px;height:100px}.stepContent[_ngcontent-%COMP%]   .mat-divider[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}.link[_ngcontent-%COMP%]{text-decoration:underline;color:#135f7f!important}\"]}),WelcomeComponent})();var grid_list=__webpack_require__(\"zkoq\"),tooltip=__webpack_require__(\"Qu3c\");const prerequisite_component_c0=[\"packageItem\"];function PrerequisiteComponent_mat_list_10_mat_grid_tile_5_Template(rf,ctx){if(1&rf&&(core.Wb(0,\"mat-grid-tile\"),core.Wb(1,\"mat-list-item\"),core.Rb(2,\"mat-icon\",12),core.Wb(3,\"div\",13),core.Qc(4),core.ic(5,\"translate\"),core.Rb(6,\"i\",14,15),core.Vb(),core.Vb(),core.Vb()),2&rf){const package_r3=ctx.$implicit,ctx_r2=core.hc(2);core.Db(2),core.Gb(\"fa iconCheckPackage icon_\",package_r3.state,\"\"),core.Db(2),core.Sc(\" \",core.jc(5,7,\"lang.install_\"+package_r3.label),\" \"),core.Db(2),core.oc(\"id\",package_r3.label)(\"matTooltip\",ctx_r2.translate.instant(\"lang.install_\"+package_r3.label+\"_desc\"))(\"matTooltipClass\",\"ok\"!==package_r3.state?\"tooltip-red\":\"\")}}function PrerequisiteComponent_mat_list_10_Template(rf,ctx){if(1&rf&&(core.Wb(0,\"mat-list\",8),core.Wb(1,\"div\",9),core.Qc(2),core.ic(3,\"translate\"),core.Vb(),core.Wb(4,\"mat-grid-list\",10),core.Oc(5,PrerequisiteComponent_mat_list_10_mat_grid_tile_5_Template,8,9,\"mat-grid-tile\",11),core.Vb(),core.Vb()),2&rf){const groupPackage_r1=ctx.$implicit,ctx_r0=core.hc();core.Db(2),core.Rc(core.jc(3,2,\"lang.\"+groupPackage_r1.key)),core.Db(3),core.oc(\"ngForOf\",ctx_r0.packagesList[groupPackage_r1.key])}}let prerequisite_component_PrerequisiteComponent=(()=>{class PrerequisiteComponent{constructor(translate,http,notify,_formBuilder){this.translate=translate,this.http=http,this.notify=notify,this._formBuilder=_formBuilder,this.prerequisites={},this.packagesList={general:[{label:\"phpVersionValid\",required:!0},{label:\"writable\",required:!0}],tools:[{label:\"unoconv\",required:!0},{label:\"netcatOrNmap\",required:!0},{label:\"pgsql\",required:!0},{label:\"curl\",required:!0},{label:\"zip\",required:!0},{label:\"wkhtmlToPdf\",required:!0},{label:\"imagick\",required:!0}],phpExtensions:[{label:\"fileinfo\",required:!0},{label:\"pdoPgsql\",required:!0},{label:\"gd\",required:!0},{label:\"mbstring\",required:!0},{label:\"json\",required:!0},{label:\"gettext\",required:!0},{label:\"xml\",required:!0}],phpConfiguration:[{label:\"errorReporting\",required:!0},{label:\"displayErrors\",required:!0}]},this.docMaarchUrl=`https://docs.maarch.org/gitbook/html/MaarchCourrier/${environment.a.VERSION.split(\".\")[0]+\".\"+environment.a.VERSION.split(\".\")[1]}/guat/guat_prerequisites/home.html`}ngOnInit(){this.stepFormGroup=this._formBuilder.group({firstCtrl:[\"\",fesm2015_forms.I.required]}),this.getStepData()}getStepData(){this.http.get(\"../rest/installer/prerequisites\").pipe(Object(tap.tap)(data=>{this.prerequisites=data.prerequisites,Object.keys(this.packagesList).forEach(group=>{this.packagesList[group].forEach((item,key)=>{this.packagesList[group][key].state=this.prerequisites[this.packagesList[group][key].label]?\"ok\":\"ko\",\"phpVersionValid\"===this.packagesList[group][key].label&&(this.translate.setTranslation(this.translate.getDefaultLang(),{lang:{install_phpVersionValid_desc:this.translate.instant(\"lang.currentVersion\")+\" : \"+this.prerequisites.phpVersion}},!0),console.log(this.translate))})}),this.stepFormGroup.controls.firstCtrl.setValue(this.checkStep()),this.stepFormGroup.controls.firstCtrl.markAsUntouched()}),Object(catchError.catchError)(err=>(this.notify.handleSoftErrors(err),Object(of.of)(!1)))).subscribe()}initStep(){Object.keys(this.packagesList).forEach(group=>{this.packagesList[group].forEach((item,key)=>{\"ko\"===this.packagesList[group][key].state&&this.packageItem.toArray().filter(itemKo=>itemKo._elementRef.nativeElement.id===this.packagesList[group][key].label)[0].toggle()})})}checkStep(){let state=\"success\";return Object.keys(this.packagesList).forEach(group=>{this.packagesList[group].forEach(item=>{\"ko\"===item.state&&(state=\"\")})}),state}isValidStep(){return void 0!==this.stepFormGroup&&\"success\"===this.stepFormGroup.controls.firstCtrl.value}getFormGroup(){return this.stepFormGroup}getInfoToInstall(){return[]}}return PrerequisiteComponent.ɵfac=function(t){return new(t||PrerequisiteComponent)(core.Qb(ngx_translate_core.e),core.Qb(fesm2015_http.b),core.Qb(notification_service.a),core.Qb(fesm2015_forms.h))},PrerequisiteComponent.ɵcmp=core.Kb({type:PrerequisiteComponent,selectors:[[\"app-prerequisite\"]],viewQuery:function(rf,ctx){var _t;1&rf&&core.Xc(prerequisite_component_c0,!0),2&rf&&core.yc(_t=core.ec())&&(ctx.packageItem=_t)},decls:16,vars:14,consts:[[1,\"stepContent\"],[1,\"stepContentTitle\"],[1,\"fas\",\"fa-check-square\"],[\"role\",\"alert\",1,\"alert-message\",\"alert-message-info\",2,\"margin-top\",\"30px\",\"min-width\",\"100%\"],[\"target\",\"_blank\",1,\"link\",3,\"href\"],[\"style\",\"background: white;\",4,\"ngFor\",\"ngForOf\"],[2,\"text-align\",\"center\"],[\"mat-raised-button\",\"\",\"type\",\"button\",\"color\",\"primary\",3,\"click\"],[2,\"background\",\"white\"],[\"mat-subheader\",\"\"],[\"cols\",\"3\",\"rowHeight\",\"50px\"],[4,\"ngFor\",\"ngForOf\"],[\"mat-list-icon\",\"\"],[\"mat-line\",\"\",1,\"packageName\"],[\"matTooltipPosition\",\"right\",1,\"fa\",\"fa-info-circle\",3,\"id\",\"matTooltip\",\"matTooltipClass\"],[\"packageItem\",\"matTooltip\"]],template:function(rf,ctx){1&rf&&(core.Wb(0,\"div\",0),core.Wb(1,\"h2\",1),core.Rb(2,\"i\",2),core.Qc(3),core.ic(4,\"translate\"),core.Vb(),core.Wb(5,\"div\",3),core.Qc(6),core.ic(7,\"translate\"),core.Wb(8,\"a\",4),core.Qc(9),core.Vb(),core.Vb(),core.Oc(10,PrerequisiteComponent_mat_list_10_Template,6,4,\"mat-list\",5),core.ic(11,\"keyvalue\"),core.Wb(12,\"div\",6),core.Wb(13,\"button\",7),core.dc(\"click\",(function(){return ctx.getStepData()})),core.Qc(14),core.ic(15,\"translate\"),core.Vb(),core.Vb(),core.Vb()),2&rf&&(core.Db(3),core.Sc(\" \",core.jc(4,6,\"lang.prerequisite\"),\"\"),core.Db(3),core.Sc(\" \",core.jc(7,8,\"lang.stepPrerequisite_desc\"),\" : \"),core.Db(2),core.pc(\"href\",ctx.docMaarchUrl,core.Gc),core.Db(1),core.Rc(ctx.docMaarchUrl),core.Db(1),core.oc(\"ngForOf\",core.jc(11,10,ctx.packagesList)),core.Db(4),core.Rc(core.jc(15,12,\"lang.updateInformations\")))},directives:[common.s,fesm2015_button.b,list.a,list.g,grid_list.b,grid_list.d,list.d,icon.a,list.c,fesm2015_core.l,tooltip.b],pipes:[ngx_translate_core.d,common.l],styles:['.stepContent[_ngcontent-%COMP%]{margin:auto}.stepContent[_ngcontent-%COMP%]   .stepContentTitle[_ngcontent-%COMP%]{color:#135f7f;margin-bottom:30px;border-bottom:1px solid;padding:0}.packageItem[_ngcontent-%COMP%]{flex:1!important}.iconCheckPackage[_ngcontent-%COMP%]{background:#fff;font-size:15px!important;display:flex;align-items:center;justify-content:center;padding:10px;border-radius:20px;height:35px;width:35px}.icon_ok[_ngcontent-%COMP%]{color:green}.icon_ok[_ngcontent-%COMP%]:before{content:\"\\\\f111\"}.icon_warning[_ngcontent-%COMP%]{color:orange}.icon_warning[_ngcontent-%COMP%]:before{content:\"\\\\f111\"}.icon_ko[_ngcontent-%COMP%]{color:red}.icon_ko[_ngcontent-%COMP%]:before{content:\"\\\\f111\"}.link[_ngcontent-%COMP%]{text-decoration:underline;color:#135f7f!important}.packageName[_ngcontent-%COMP%]{font-size:120%!important;white-space:normal!important}.packageName[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:help;opacity:.5;color:#135f7f} .tooltip-red{background:#b71c1c;font-size:14px}']}),PrerequisiteComponent})();var input=__webpack_require__(\"qFsG\");function DatabaseComponent_div_36_Template(rf,ctx){1&rf&&(core.Wb(0,\"div\",18),core.Qc(1),core.ic(2,\"translate\"),core.Vb()),2&rf&&(core.Db(1),core.Sc(\" \",core.jc(2,1,\"lang.stepEmptyDb\"),\" \"))}function DatabaseComponent_mat_option_42_Template(rf,ctx){if(1&rf&&(core.Wb(0,\"mat-option\",19),core.Qc(1),core.Vb()),2&rf){const sample_r2=ctx.$implicit;core.oc(\"value\",sample_r2),core.Db(1),core.Sc(\" \",sample_r2,\" \")}}let database_component_DatabaseComponent=(()=>{class DatabaseComponent{constructor(translate,http,_formBuilder,notify,functionsService,installerService){this.translate=translate,this.http=http,this._formBuilder=_formBuilder,this.notify=notify,this.functionsService=functionsService,this.installerService=installerService,this.hide=!0,this.connectionState=!1,this.dbExist=!1,this.dataFiles=[],this.nextStep=new core.o;const valDbName=[fesm2015_forms.I.pattern(/^[^\\;\\\" \\\\]+$/),fesm2015_forms.I.required],valLoginDb=[fesm2015_forms.I.pattern(/^[^ ]+$/),fesm2015_forms.I.required];this.stepFormGroup=this._formBuilder.group({dbHostCtrl:[\"localhost\",fesm2015_forms.I.required],dbLoginCtrl:[\"\",valLoginDb],dbPortCtrl:[\"5432\",fesm2015_forms.I.required],dbPasswordCtrl:[\"\",valLoginDb],dbNameCtrl:[\"\",valDbName],dbSampleCtrl:[\"data_fr\",fesm2015_forms.I.required],stateStep:[\"\",fesm2015_forms.I.required]})}ngOnInit(){this.stepFormGroup.controls.dbHostCtrl.valueChanges.pipe(Object(tap.tap)(()=>this.stepFormGroup.controls.stateStep.setValue(\"\"))).subscribe(),this.stepFormGroup.controls.dbLoginCtrl.valueChanges.pipe(Object(tap.tap)(()=>this.stepFormGroup.controls.stateStep.setValue(\"\"))).subscribe(),this.stepFormGroup.controls.dbPortCtrl.valueChanges.pipe(Object(tap.tap)(()=>this.stepFormGroup.controls.stateStep.setValue(\"\"))).subscribe(),this.stepFormGroup.controls.dbPasswordCtrl.valueChanges.pipe(Object(tap.tap)(()=>this.stepFormGroup.controls.stateStep.setValue(\"\"))).subscribe(),this.stepFormGroup.controls.dbNameCtrl.valueChanges.pipe(Object(tap.tap)(()=>this.stepFormGroup.controls.stateStep.setValue(\"\"))).subscribe(),this.getDataFiles()}getDataFiles(){this.http.get(\"../rest/installer/sqlDataFiles\").pipe(Object(tap.tap)(data=>{this.dataFiles=data.dataFiles}),Object(catchError.catchError)(err=>(this.notify.handleSoftErrors(err),Object(of.of)(!1)))).subscribe()}isValidConnection(){return!1}initStep(){this.installerService.isStepAlreadyLaunched(\"database\")&&this.stepFormGroup.disable()}checkConnection(){this.http.get(\"../rest/installer/databaseConnection\",{observe:\"response\",params:{server:this.stepFormGroup.controls.dbHostCtrl.value,port:this.stepFormGroup.controls.dbPortCtrl.value,user:this.stepFormGroup.controls.dbLoginCtrl.value,password:this.stepFormGroup.controls.dbPasswordCtrl.value,name:this.stepFormGroup.controls.dbNameCtrl.value}}).pipe(Object(tap.tap)(data=>{this.dbExist=200===data.status,this.notify.success(this.translate.instant(\"lang.rightInformations\")),this.stepFormGroup.controls.stateStep.setValue(\"success\"),this.nextStep.emit()}),Object(catchError.catchError)(err=>(this.dbExist=!1,this.notify.error(this.translate.instant(\"Given database has tables\"===err.error.errors?\"lang.dbNotEmpty\":\"lang.badInformations\")),this.stepFormGroup.markAllAsTouched(),this.stepFormGroup.controls.stateStep.setValue(\"\"),Object(of.of)(!1)))).subscribe()}checkStep(){return this.stepFormGroup.valid}isValidStep(){return!!this.installerService.isStepAlreadyLaunched(\"database\")||void 0!==this.stepFormGroup&&this.stepFormGroup.valid}isEmptyConnInfo(){return this.stepFormGroup.controls.dbHostCtrl.invalid||this.stepFormGroup.controls.dbPortCtrl.invalid||this.stepFormGroup.controls.dbLoginCtrl.invalid||this.stepFormGroup.controls.dbPasswordCtrl.invalid||this.stepFormGroup.controls.dbNameCtrl.invalid}getFormGroup(){return!!this.installerService.isStepAlreadyLaunched(\"database\")||this.stepFormGroup}getInfoToInstall(){return[{idStep:\"database\",body:{server:this.stepFormGroup.controls.dbHostCtrl.value,port:this.stepFormGroup.controls.dbPortCtrl.value,user:this.stepFormGroup.controls.dbLoginCtrl.value,password:this.stepFormGroup.controls.dbPasswordCtrl.value,name:this.stepFormGroup.controls.dbNameCtrl.value,data:this.stepFormGroup.controls.dbSampleCtrl.value},route:{method:\"POST\",url:\"../rest/installer/database\"},description:this.translate.instant(\"lang.stepDatabaseActionDesc\"),installPriority:2}]}}return DatabaseComponent.ɵfac=function(t){return new(t||DatabaseComponent)(core.Qb(ngx_translate_core.e),core.Qb(fesm2015_http.b),core.Qb(fesm2015_forms.h),core.Qb(notification_service.a),core.Qb(functions_service.a),core.Qb(installer_service_InstallerService))},DatabaseComponent.ɵcmp=core.Kb({type:DatabaseComponent,selectors:[[\"app-database\"]],outputs:{nextStep:\"nextStep\"},decls:47,vars:35,consts:[[1,\"stepContent\"],[1,\"stepContentTitle\"],[1,\"fa\",\"fa-database\"],[\"role\",\"alert\",1,\"alert-message\",\"alert-message-info\",2,\"margin-top\",\"30px\",\"min-width\",\"100%\"],[2,\"width\",\"850px\",\"margin\",\"auto\",3,\"formGroup\"],[\"appearance\",\"outline\"],[\"matInput\",\"\",\"formControlName\",\"dbHostCtrl\",\"required\",\"\"],[\"matInput\",\"\",\"formControlName\",\"dbPortCtrl\",\"required\",\"\"],[\"matInput\",\"\",\"formControlName\",\"dbLoginCtrl\",\"required\",\"\"],[\"matInput\",\"\",\"formControlName\",\"dbPasswordCtrl\",\"required\",\"\",3,\"type\"],[\"mat-icon-button\",\"\",\"matSuffix\",\"\",\"color\",\"primary\",3,\"click\"],[\"matInput\",\"\",\"formControlName\",\"dbNameCtrl\",\"maxlength\",\"50\",\"required\",\"\"],[\"class\",\"alert-message alert-message-info\",\"role\",\"alert\",\"style\",\"margin-top: 0px;min-width: 100%;\",4,\"ngIf\"],[\"appearance\",\"outline\",\"floatLabel\",\"never\"],[\"formControlName\",\"dbSampleCtrl\"],[3,\"value\",4,\"ngFor\",\"ngForOf\"],[2,\"text-align\",\"center\"],[\"mat-raised-button\",\"\",\"type\",\"button\",\"color\",\"primary\",3,\"disabled\",\"click\"],[\"role\",\"alert\",1,\"alert-message\",\"alert-message-info\",2,\"margin-top\",\"0px\",\"min-width\",\"100%\"],[3,\"value\"]],template:function(rf,ctx){1&rf&&(core.Wb(0,\"div\",0),core.Wb(1,\"h2\",1),core.Rb(2,\"i\",2),core.Qc(3),core.ic(4,\"translate\"),core.Vb(),core.Wb(5,\"div\",3),core.Qc(6),core.ic(7,\"translate\"),core.Vb(),core.Wb(8,\"form\",4),core.Wb(9,\"mat-form-field\",5),core.Wb(10,\"mat-label\"),core.Qc(11),core.ic(12,\"translate\"),core.Vb(),core.Rb(13,\"input\",6),core.Vb(),core.Wb(14,\"mat-form-field\",5),core.Wb(15,\"mat-label\"),core.Qc(16),core.ic(17,\"translate\"),core.Vb(),core.Rb(18,\"input\",7),core.Vb(),core.Wb(19,\"mat-form-field\",5),core.Wb(20,\"mat-label\"),core.Qc(21),core.ic(22,\"translate\"),core.Vb(),core.Rb(23,\"input\",8),core.Vb(),core.Wb(24,\"mat-form-field\",5),core.Wb(25,\"mat-label\"),core.Qc(26),core.ic(27,\"translate\"),core.Vb(),core.Rb(28,\"input\",9),core.Wb(29,\"button\",10),core.dc(\"click\",(function(){return ctx.hide=!ctx.hide})),core.Rb(30,\"mat-icon\"),core.Vb(),core.Vb(),core.Wb(31,\"mat-form-field\",5),core.Wb(32,\"mat-label\"),core.Qc(33),core.ic(34,\"translate\"),core.Vb(),core.Rb(35,\"input\",11),core.Vb(),core.Oc(36,DatabaseComponent_div_36_Template,3,3,\"div\",12),core.Wb(37,\"mat-form-field\",13),core.Wb(38,\"mat-label\"),core.Qc(39),core.ic(40,\"translate\"),core.Vb(),core.Wb(41,\"mat-select\",14),core.Oc(42,DatabaseComponent_mat_option_42_Template,2,2,\"mat-option\",15),core.Vb(),core.Vb(),core.Wb(43,\"div\",16),core.Wb(44,\"button\",17),core.dc(\"click\",(function(){return ctx.checkConnection()})),core.Qc(45),core.ic(46,\"translate\"),core.Vb(),core.Vb(),core.Vb(),core.Vb()),2&rf&&(core.Db(3),core.Sc(\" \",core.jc(4,17,\"lang.database\"),\"\"),core.Db(3),core.Sc(\" \",core.jc(7,19,\"lang.stepDatabase_desc\"),\" \"),core.Db(2),core.oc(\"formGroup\",ctx.stepFormGroup),core.Db(3),core.Rc(core.jc(12,21,\"lang.host\")),core.Db(5),core.Rc(core.jc(17,23,\"lang.port\")),core.Db(5),core.Rc(core.jc(22,25,\"lang.user\")),core.Db(5),core.Rc(core.jc(27,27,\"lang.password\")),core.Db(2),core.oc(\"type\",ctx.hide?\"password\":\"text\"),core.Db(2),core.Gb(\"fa \",ctx.hide?\"fa-eye-slash\":\"fa-eye\",\"\"),core.Db(3),core.Rc(core.jc(34,29,\"lang.dbName\")),core.Db(3),core.oc(\"ngIf\",ctx.dbExist),core.Db(3),core.Rc(core.jc(40,31,\"lang.dbSample\")),core.Db(3),core.oc(\"ngForOf\",ctx.dataFiles),core.Db(2),core.oc(\"disabled\",ctx.isEmptyConnInfo()||ctx.stepFormGroup.controls.dbHostCtrl.disabled),core.Db(1),core.Sc(\" \",core.jc(46,33,\"lang.checkInformations\"),\" \"))},directives:[fesm2015_forms.K,fesm2015_forms.v,fesm2015_forms.m,form_field.c,form_field.g,input.b,fesm2015_forms.d,fesm2015_forms.u,fesm2015_forms.k,fesm2015_forms.F,fesm2015_button.b,form_field.j,icon.a,fesm2015_forms.p,common.t,fesm2015_select.a,common.s,fesm2015_core.p],pipes:[ngx_translate_core.d],styles:[\".stepContent[_ngcontent-%COMP%]{margin:auto}.stepContent[_ngcontent-%COMP%]   .stepContentTitle[_ngcontent-%COMP%]{color:#135f7f;margin-bottom:30px;border-bottom:1px solid;padding:0}\"]}),DatabaseComponent})(),docservers_component_DocserversComponent=(()=>{class DocserversComponent{constructor(translate,_formBuilder,notify,http,installerService){this.translate=translate,this._formBuilder=_formBuilder,this.notify=notify,this.http=http,this.installerService=installerService,this.nextStep=new core.o;const valPath=[fesm2015_forms.I.pattern(/^[^\\'\\<\\>\\|\\*\\:\\?]+$/),fesm2015_forms.I.required];this.stepFormGroup=this._formBuilder.group({docserversPath:[\"/opt/maarch/docservers/\",valPath],stateStep:[\"\",fesm2015_forms.I.required]}),this.stepFormGroup.controls.docserversPath.valueChanges.pipe(Object(tap.tap)(()=>this.stepFormGroup.controls.stateStep.setValue(\"\"))).subscribe()}ngOnInit(){}isValidStep(){return!!this.installerService.isStepAlreadyLaunched(\"docserver\")||void 0!==this.stepFormGroup&&this.stepFormGroup.valid}initStep(){this.installerService.isStepAlreadyLaunched(\"docserver\")&&this.stepFormGroup.disable()}getFormGroup(){return!!this.installerService.isStepAlreadyLaunched(\"docserver\")||this.stepFormGroup}checkAvailability(){this.http.get(\"../rest/installer/docservers\",{params:{path:this.stepFormGroup.controls.docserversPath.value}}).pipe(Object(tap.tap)(data=>{this.notify.success(this.translate.instant(\"lang.rightInformations\")),this.stepFormGroup.controls.stateStep.setValue(\"success\"),this.nextStep.emit()}),Object(catchError.catchError)(err=>(this.notify.error(this.translate.instant(\"lang.pathUnreacheable\")),this.stepFormGroup.controls.stateStep.setValue(\"\"),Object(of.of)(!1)))).subscribe()}getInfoToInstall(){return[{idStep:\"docserver\",body:{path:this.stepFormGroup.controls.docserversPath.value},route:{method:\"POST\",url:\"../rest/installer/docservers\"},description:this.translate.instant(\"lang.stepDocserversActionDesc\"),installPriority:3}]}}return DocserversComponent.ɵfac=function(t){return new(t||DocserversComponent)(core.Qb(ngx_translate_core.e),core.Qb(fesm2015_forms.h),core.Qb(notification_service.a),core.Qb(fesm2015_http.b),core.Qb(installer_service_InstallerService))},DocserversComponent.ɵcmp=core.Kb({type:DocserversComponent,selectors:[[\"app-docservers\"]],outputs:{nextStep:\"nextStep\"},decls:20,vars:14,consts:[[1,\"stepContent\"],[1,\"stepContentTitle\"],[1,\"fa\",\"fa-hdd\"],[\"role\",\"alert\",1,\"alert-message\",\"alert-message-info\",2,\"margin-top\",\"30px\",\"min-width\",\"100%\"],[2,\"width\",\"850px\",\"margin\",\"auto\",3,\"formGroup\"],[\"appearance\",\"outline\",2,\"color\",\"initial\"],[\"matInput\",\"\",\"formControlName\",\"docserversPath\"],[\"matSuffix\",\"\"],[2,\"text-align\",\"center\"],[\"mat-raised-button\",\"\",\"type\",\"button\",\"color\",\"primary\",3,\"disabled\",\"click\"]],template:function(rf,ctx){1&rf&&(core.Wb(0,\"div\",0),core.Wb(1,\"h2\",1),core.Rb(2,\"i\",2),core.Qc(3),core.ic(4,\"translate\"),core.Vb(),core.Wb(5,\"div\",3),core.Qc(6),core.ic(7,\"translate\"),core.Vb(),core.Wb(8,\"form\",4),core.Wb(9,\"mat-form-field\",5),core.Wb(10,\"mat-label\"),core.Qc(11),core.ic(12,\"translate\"),core.Vb(),core.Rb(13,\"input\",6),core.Wb(14,\"span\",7),core.Qc(15,\"/__CUSTOM_iD__/\"),core.Vb(),core.Vb(),core.Wb(16,\"div\",8),core.Wb(17,\"button\",9),core.dc(\"click\",(function(){return ctx.checkAvailability()})),core.Qc(18),core.ic(19,\"translate\"),core.Vb(),core.Vb(),core.Vb(),core.Vb()),2&rf&&(core.Db(3),core.Sc(\" \",core.jc(4,6,\"lang.docserver\"),\"\"),core.Db(3),core.Sc(\" \",core.jc(7,8,\"lang.stepDocserver_desc\"),\" \"),core.Db(2),core.oc(\"formGroup\",ctx.stepFormGroup),core.Db(3),core.Rc(core.jc(12,10,\"lang.docserverPath\")),core.Db(6),core.oc(\"disabled\",!ctx.stepFormGroup.controls.docserversPath.valid),core.Db(1),core.Rc(core.jc(19,12,\"lang.checkInformations\")))},directives:[fesm2015_forms.K,fesm2015_forms.v,fesm2015_forms.m,form_field.c,form_field.g,input.b,fesm2015_forms.d,fesm2015_forms.u,fesm2015_forms.k,form_field.j,fesm2015_button.b],pipes:[ngx_translate_core.d],styles:[\".stepContent[_ngcontent-%COMP%]{margin:auto}.stepContent[_ngcontent-%COMP%]   .stepContentTitle[_ngcontent-%COMP%]{color:#135f7f;margin-bottom:30px;border-bottom:1px solid;padding:0}\"]}),DocserversComponent})();var ngx_pipes=__webpack_require__(\"aEDk\"),operators_tap=__webpack_require__(\"vkgz\"),debounceTime=__webpack_require__(\"Kj3r\"),operators_filter=__webpack_require__(\"pLZG\"),operators_catchError=__webpack_require__(\"JIr8\"),platform_browser=__webpack_require__(\"jhN1\"),card=__webpack_require__(\"Wp6s\");function CustomizationComponent_ng_container_16_Template(rf,ctx){1&rf&&(core.Ub(0),core.Qc(1),core.ic(2,\"translate\"),core.Tb()),2&rf&&(core.Db(1),core.Sc(\" \",core.jc(2,1,\"lang.customAlreadyExist\"),\" \"))}const customization_component_c0=function(){return{value1:'\"_\", \"-\"'}};function CustomizationComponent_ng_container_17_Template(rf,ctx){1&rf&&(core.Ub(0),core.Qc(1),core.ic(2,\"translate\"),core.Tb()),2&rf&&(core.Db(1),core.Sc(\" \",core.kc(2,1,\"lang.onlySpecialCharAllowed\",core.uc(4,customization_component_c0)),\" \"))}function CustomizationComponent_mat_card_50_Template(rf,ctx){if(1&rf){const _r7=core.Xb();core.Wb(0,\"mat-card\",20),core.dc(\"click\",(function(){core.Dc(_r7);const background_r5=ctx.$implicit;return core.hc().selectBg(background_r5.url)})),core.Vb()}if(2&rf){const background_r5=ctx.$implicit,ctx_r3=core.hc();core.Lc(\"background\",\"url(\"+background_r5.url+\")\"),core.Ib(\"selected\",background_r5.url===ctx_r3.stepFormGroup.controls.bodyLoginBackground.value)(\"disabled\",ctx_r3.stepFormGroup.controls.bodyLoginBackground.disabled)}}function CustomizationComponent_mat_card_51_Template(rf,ctx){if(1&rf){const _r10=core.Xb();core.Wb(0,\"mat-card\",21),core.dc(\"click\",(function(){return core.Dc(_r10),core.zc(2).click()})),core.Wb(1,\"input\",22,23),core.dc(\"change\",(function($event){return core.Dc(_r10),core.hc().uploadTrigger($event,\"bg\")})),core.Vb(),core.Rb(3,\"i\",24),core.Vb()}}let customization_component_CustomizationComponent=(()=>{class CustomizationComponent{constructor(translate,_formBuilder,notify,sanitizer,scanPipe,http,installerService){this.translate=translate,this._formBuilder=_formBuilder,this.notify=notify,this.sanitizer=sanitizer,this.scanPipe=scanPipe,this.http=http,this.installerService=installerService,this.readonlyState=!1,this.backgroundList=[];const valIdentifier=[fesm2015_forms.I.pattern(/^[a-zA-Z0-9_\\-]*$/),fesm2015_forms.I.required];this.stepFormGroup=this._formBuilder.group({firstCtrl:[\"success\",fesm2015_forms.I.required],customId:[\"cs_maarchcourrier\",valIdentifier],appName:[\"Maarch Courrier \"+environment.a.VERSION.split(\".\")[0]+\".\"+environment.a.VERSION.split(\".\")[1],fesm2015_forms.I.required],loginMessage:[`<span style=\"color:#24b0ed\"><strong>Découvrez votre application via</strong></span>&nbsp;<a title=\"le guide de visite\" href=\"https://docs.maarch.org/gitbook/html/MaarchCourrier/${environment.a.VERSION.split(\".\")[0]+\".\"+environment.a.VERSION.split(\".\")[1]}/guu/home.html\" target=\"_blank\"><span style=\"color:#f99830;\"><strong>le guide de visite en ligne</strong></span></a>`],homeMessage:['<p>D&eacute;couvrez <strong>Maarch Courrier 20.10</strong> avec <a title=\"notre guide de visite\" href=\"https://docs.maarch.org/\" target=\"_blank\"><span style=\"color:#f99830;\"><strong>notre guide de visite en ligne</strong></span></a>.</p>'],bodyLoginBackground:[\"assets/bodylogin.jpg\"],uploadedLogo:[\"../rest/images?image=logo\"]}),this.backgroundList=Array.from({length:16}).map((_,i)=>({filename:i+1+\".jpg\",url:`assets/${i+1}.jpg`}))}ngOnInit(){this.checkCustomExist(),this.stepFormGroup.controls.customId.valueChanges.pipe(Object(operators_tap.a)(()=>{this.stepFormGroup.controls.firstCtrl.setValue(\"\")}),Object(debounceTime.a)(500),Object(operators_filter.a)(value=>value.length>2),Object(operators_filter.a)(()=>null===this.stepFormGroup.controls.customId.errors||void 0===this.stepFormGroup.controls.customId.errors.pattern),Object(operators_tap.a)(()=>{this.checkCustomExist()})).subscribe()}initStep(){this.installerService.isStepAlreadyLaunched(\"createCustom\")&&this.installerService.isStepAlreadyLaunched(\"customization\")?(this.stepFormGroup.disable(),this.readonlyState=!0,tinymce.remove(),this.initMce(!0)):this.installerService.isStepAlreadyLaunched(\"createCustom\")?(this.stepFormGroup.controls.customId.disable(),this.stepFormGroup.controls.appName.disable(),this.stepFormGroup.controls.firstCtrl.disable()):this.installerService.isStepAlreadyLaunched(\"customization\")?(this.stepFormGroup.controls.loginMessage.disable(),this.stepFormGroup.controls.homeMessage.disable(),this.stepFormGroup.controls.bodyLoginBackground.disable(),this.stepFormGroup.controls.uploadedLogo.disable(),this.readonlyState=!0,tinymce.remove(),this.initMce(!0)):(this.readonlyState=!1,this.initMce())}checkCustomExist(){this.http.get(\"../rest/installer/custom\",{observe:\"response\",params:{customId:this.stepFormGroup.controls.customId.value}}).pipe(Object(operators_tap.a)(response=>{null!==this.stepFormGroup.controls.customId.errors?delete this.stepFormGroup.controls.customId.errors.customExist:this.stepFormGroup.controls.firstCtrl.setValue(\"success\")}),Object(operators_catchError.a)(err=>(null!==err.error.errors.match(/^Custom already exists/g)?(this.stepFormGroup.controls.customId.setErrors(Object.assign(Object.assign({},this.stepFormGroup.controls.customId.errors),{customExist:!0})),this.stepFormGroup.controls.customId.markAsTouched()):this.notify.handleSoftErrors(err),Object(of.of)(!1)))).subscribe()}isValidStep(){return!(!this.installerService.isStepAlreadyLaunched(\"createCustom\")||!this.installerService.isStepAlreadyLaunched(\"customization\"))||void 0!==this.stepFormGroup&&this.stepFormGroup.valid}getFormGroup(){return!(!this.installerService.isStepAlreadyLaunched(\"createCustom\")||!this.installerService.isStepAlreadyLaunched(\"customization\"))||this.stepFormGroup}initMce(readonly=!1){tinymce.init({selector:\"textarea\",base_url:\"../node_modules/tinymce/\",height:\"150\",suffix:\".min\",language:this.translate.instant(\"lang.langISO\").replace(\"-\",\"_\"),language_url:`../node_modules/tinymce-i18n/langs/${this.translate.instant(\"lang.langISO\").replace(\"-\",\"_\")}.js`,menubar:!1,statusbar:!1,readonly:readonly,plugins:[\"autolink\"],external_plugins:{maarch_b64image:\"../../src/frontend/plugins/tinymce/maarch_b64image/plugin.min.js\"},toolbar_sticky:!0,toolbar_drawer:\"floating\",toolbar:readonly?\"\":\"undo redo | fontselect fontsizeselect | bold italic underline strikethrough forecolor | maarch_b64image |         alignleft aligncenter alignright alignjustify         bullist numlist outdent indent | removeformat\"})}getInfoToInstall(){return[{idStep:\"createCustom\",body:{customId:this.stepFormGroup.controls.customId.value,applicationName:this.stepFormGroup.controls.appName.value},description:this.translate.instant(\"lang.stepInstanceActionDesc\"),route:{method:\"POST\",url:\"../rest/installer/custom\"},installPriority:1},{idStep:\"customization\",body:{loginMessage:tinymce.get(\"loginMessage\").getContent(),homeMessage:tinymce.get(\"homeMessage\").getContent(),bodyLoginBackground:this.stepFormGroup.controls.bodyLoginBackground.value,logo:this.stepFormGroup.controls.uploadedLogo.value},description:this.translate.instant(\"lang.stepCustomizationActionDesc\"),route:{method:\"POST\",url:\"../rest/installer/customization\"},installPriority:3}]}uploadTrigger(fileInput,mode){if(fileInput.target.files&&fileInput.target.files[0]){const res=this.canUploadFile(fileInput.target.files[0],mode);if(!0===res){const reader=new FileReader;reader.readAsDataURL(fileInput.target.files[0]),reader.onload=value=>{if(\"logo\"===mode)this.stepFormGroup.controls.uploadedLogo.setValue(value.target.result);else{const img=new Image;img.onload=imgDim=>{imgDim.target.width<1920||imgDim.target.height<1080?this.notify.error(this.translate.instant(\"lang.badImageResolution\",{value1:\"1920x1080\"})):(this.backgroundList.push({filename:value.target.result,url:value.target.result}),this.stepFormGroup.controls.bodyLoginBackground.setValue(value.target.result))},img.src=value.target.result}}}else this.notify.error(res)}}canUploadFile(file,mode){const allowedExtension=\"logo\"!==mode?[\"image/jpg\",\"image/jpeg\"]:[\"image/svg+xml\"];if(\"logo\"===mode){if(file.size>5e6)return this.translate.instant(\"lang.maxFileSizeExceeded\",{value1:\"5mo\"});if(-1===allowedExtension.indexOf(file.type))return this.translate.instant(\"lang.onlyExtensionsAllowed\",{value1:allowedExtension.join(\", \")})}else{if(file.size>1e7)return this.translate.instant(\"lang.maxFileSizeExceeded\",{value1:\"10mo\"});if(-1===allowedExtension.indexOf(file.type))return this.translate.instant(\"lang.onlyExtensionsAllowed\",{value1:allowedExtension.join(\", \")})}return!0}logoURL(){return this.sanitizer.bypassSecurityTrustUrl(this.stepFormGroup.controls.uploadedLogo.value)}selectBg(content){this.stepFormGroup.controls.bodyLoginBackground.disabled||this.stepFormGroup.controls.bodyLoginBackground.setValue(content)}clickLogoButton(uploadLogo){this.stepFormGroup.controls.uploadedLogo.disabled||uploadLogo.click()}}return CustomizationComponent.ɵfac=function(t){return new(t||CustomizationComponent)(core.Qb(ngx_translate_core.e),core.Qb(fesm2015_forms.h),core.Qb(notification_service.a),core.Qb(platform_browser.b),core.Qb(ngx_pipes.o),core.Qb(fesm2015_http.b),core.Qb(installer_service_InstallerService))},CustomizationComponent.ɵcmp=core.Kb({type:CustomizationComponent,selectors:[[\"app-customization\"]],features:[core.Cb([ngx_pipes.o])],decls:52,vars:34,consts:[[1,\"stepContent\"],[1,\"stepContentTitle\"],[1,\"fas\",\"fa-tools\"],[\"role\",\"alert\",1,\"alert-message\",\"alert-message-info\",2,\"margin-top\",\"30px\",\"min-width\",\"100%\"],[2,\"display\",\"contents\",3,\"formGroup\"],[1,\"col-md-6\"],[\"appearance\",\"outline\"],[\"matInput\",\"\",\"formControlName\",\"customId\"],[4,\"ngIf\"],[\"matInput\",\"\",\"formControlName\",\"appName\"],[\"name\",\"loginMessage\",\"id\",\"loginMessage\",\"formControlName\",\"loginMessage\",2,\"padding-top\",\"10px\"],[\"name\",\"homeMessage\",\"id\",\"homeMessage\",\"formControlName\",\"homeMessage\",2,\"padding-top\",\"10px\"],[\"matRipple\",\"\",2,\"width\",\"350px\",\"background-size\",\"100%\",\"cursor\",\"pointer\"],[2,\"width\",\"100%\",3,\"src\",\"click\"],[\"type\",\"file\",\"name\",\"files[]\",\"accept\",\"image/svg+xml\",2,\"display\",\"none\",3,\"change\"],[\"uploadLogo\",\"\"],[1,\"backgroundList\"],[1,\"backgroundItem\",2,\"background\",\"url(assets/bodylogin.jpg)\",\"background-size\",\"cover\",3,\"click\"],[\"style\",\"opacity: 0.3;\",\"class\",\"backgroundItem\",3,\"selected\",\"disabled\",\"background\",\"click\",4,\"ngFor\",\"ngForOf\"],[\"style\",\"opacity: 0.3;display: flex;align-items: center;justify-content: center;\",\"class\",\"backgroundItem\",3,\"click\",4,\"ngIf\"],[1,\"backgroundItem\",2,\"opacity\",\"0.3\",3,\"click\"],[1,\"backgroundItem\",2,\"opacity\",\"0.3\",\"display\",\"flex\",\"align-items\",\"center\",\"justify-content\",\"center\",3,\"click\"],[\"type\",\"file\",\"name\",\"files[]\",\"accept\",\"image/jpeg\",2,\"display\",\"none\",3,\"change\"],[\"uploadFile\",\"\"],[1,\"fa\",\"fa-plus\",2,\"font-size\",\"30px\",\"color\",\"#666\"]],template:function(rf,ctx){if(1&rf){const _r12=core.Xb();core.Wb(0,\"div\",0),core.Wb(1,\"h2\",1),core.Rb(2,\"i\",2),core.Qc(3),core.ic(4,\"translate\"),core.Vb(),core.Wb(5,\"div\",3),core.Qc(6),core.ic(7,\"translate\"),core.Vb(),core.Wb(8,\"form\",4),core.Wb(9,\"div\",5),core.Wb(10,\"mat-form-field\",6),core.Wb(11,\"mat-label\"),core.Qc(12),core.ic(13,\"translate\"),core.Vb(),core.Rb(14,\"input\",7),core.Wb(15,\"mat-error\"),core.Oc(16,CustomizationComponent_ng_container_16_Template,3,3,\"ng-container\",8),core.Oc(17,CustomizationComponent_ng_container_17_Template,3,5,\"ng-container\",8),core.Vb(),core.Vb(),core.Wb(18,\"mat-form-field\",6),core.Wb(19,\"mat-label\"),core.Qc(20),core.ic(21,\"translate\"),core.Vb(),core.Rb(22,\"input\",9),core.Vb(),core.Wb(23,\"div\"),core.Qc(24),core.ic(25,\"translate\"),core.Vb(),core.Rb(26,\"textarea\",10),core.Rb(27,\"br\"),core.Rb(28,\"br\"),core.Wb(29,\"div\"),core.Qc(30),core.ic(31,\"translate\"),core.Vb(),core.Rb(32,\"textarea\",11),core.Rb(33,\"br\"),core.Rb(34,\"br\"),core.Vb(),core.Wb(35,\"div\",5),core.Wb(36,\"div\"),core.Qc(37),core.ic(38,\"translate\"),core.Vb(),core.Wb(39,\"div\"),core.Wb(40,\"mat-card\",12),core.Wb(41,\"img\",13),core.dc(\"click\",(function(){core.Dc(_r12);const _r2=core.zc(43);return ctx.clickLogoButton(_r2)})),core.Vb(),core.Wb(42,\"input\",14,15),core.dc(\"change\",(function($event){return ctx.uploadTrigger($event,\"logo\")})),core.Vb(),core.Vb(),core.Vb(),core.Rb(44,\"br\"),core.Wb(45,\"div\"),core.Qc(46),core.ic(47,\"translate\"),core.Vb(),core.Wb(48,\"div\",16),core.Wb(49,\"mat-card\",17),core.dc(\"click\",(function(){return ctx.selectBg(\"assets/bodylogin.jpg\")})),core.Vb(),core.Oc(50,CustomizationComponent_mat_card_50_Template,1,6,\"mat-card\",18),core.Oc(51,CustomizationComponent_mat_card_51_Template,4,0,\"mat-card\",19),core.Vb(),core.Vb(),core.Vb(),core.Vb()}2&rf&&(core.Db(3),core.Sc(\" \",core.jc(4,18,\"lang.customization\"),\"\"),core.Db(3),core.Sc(\" \",core.jc(7,20,\"lang.stepCustomization_desc\"),\" \"),core.Db(2),core.oc(\"formGroup\",ctx.stepFormGroup),core.Db(4),core.Rc(core.jc(13,22,\"lang.instanceId\")),core.Db(4),core.oc(\"ngIf\",null==ctx.stepFormGroup.controls.customId.errors?null:ctx.stepFormGroup.controls.customId.errors.customExist),core.Db(1),core.oc(\"ngIf\",null==ctx.stepFormGroup.controls.customId.errors?null:ctx.stepFormGroup.controls.customId.errors.pattern),core.Db(3),core.Rc(core.jc(21,24,\"lang.applicationName\")),core.Db(4),core.Sc(\"\",core.jc(25,26,\"lang.loginMsg\"),\" : \"),core.Db(6),core.Sc(\"\",core.jc(31,28,\"lang.homeMsg\"),\" : \"),core.Db(7),core.Sc(\"\",core.jc(38,30,\"lang.chooseLogo\"),\" : \"),core.Db(4),core.oc(\"src\",ctx.logoURL(),core.Gc),core.Db(5),core.Sc(\"\",core.jc(47,32,\"lang.chooseLoginBg\"),\" : \"),core.Db(3),core.Ib(\"disabled\",ctx.stepFormGroup.controls.bodyLoginBackground.disabled)(\"selected\",\"assets/bodylogin.jpg\"===ctx.stepFormGroup.controls.bodyLoginBackground.value),core.Db(1),core.oc(\"ngForOf\",ctx.backgroundList),core.Db(1),core.oc(\"ngIf\",!ctx.stepFormGroup.controls.bodyLoginBackground.disabled))},directives:[fesm2015_forms.K,fesm2015_forms.v,fesm2015_forms.m,form_field.c,form_field.g,input.b,fesm2015_forms.d,fesm2015_forms.u,fesm2015_forms.k,form_field.b,common.t,card.a,fesm2015_core.u,common.s],pipes:[ngx_translate_core.d],styles:[\".stepContent[_ngcontent-%COMP%]{margin:auto}.stepContent[_ngcontent-%COMP%]   .stepContentTitle[_ngcontent-%COMP%]{color:#135f7f;margin-bottom:30px;border-bottom:1px solid;padding:0}.backgroundList[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);grid-gap:10px}.selected[_ngcontent-%COMP%]{transition:all .3s;opacity:1!important;border:10px solid #f99830!important}.backgroundItem[_ngcontent-%COMP%]{border:0 solid #f99830;opacity:.5;transition:all .3s;cursor:pointer;height:120px;background-size:cover!important}.disabled[_ngcontent-%COMP%]{cursor:default!important}.backgroundItem[_ngcontent-%COMP%]:not(.disabled):hover{transition:all .3s;opacity:1!important}\"]}),CustomizationComponent})(),useradmin_component_UseradminComponent=(()=>{class UseradminComponent{constructor(translate,_formBuilder,notify,installerService){this.translate=translate,this._formBuilder=_formBuilder,this.notify=notify,this.installerService=installerService,this.hide=!0,this.tiggerInstall=new core.o;const valLogin=[fesm2015_forms.I.pattern(/^[\\w.@-]*$/),fesm2015_forms.I.required],valEmail=[fesm2015_forms.I.pattern(/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$/),fesm2015_forms.I.required];this.stepFormGroup=this._formBuilder.group({login:[\"superadmin\",valLogin],firstname:[\"Admin\",fesm2015_forms.I.required],lastname:[\"SUPER\",fesm2015_forms.I.required],password:[\"\",fesm2015_forms.I.required],passwordConfirm:[\"\",fesm2015_forms.I.required],email:[\"yourEmail@domain.com\",valEmail]})}ngOnInit(){this.stepFormGroup.controls.password.valueChanges.pipe(Object(tap.tap)(data=>{data!==this.stepFormGroup.controls.passwordConfirm.value?(this.stepFormGroup.controls.password.setErrors({incorrect:!0}),this.stepFormGroup.controls.passwordConfirm.setErrors({incorrect:!0}),this.stepFormGroup.controls.passwordConfirm.markAsTouched()):(this.stepFormGroup.controls.password.setErrors(null),this.stepFormGroup.controls.passwordConfirm.setErrors(null))})).subscribe(),this.stepFormGroup.controls.passwordConfirm.valueChanges.pipe(Object(tap.tap)(data=>{data!==this.stepFormGroup.controls.password.value?(this.stepFormGroup.controls.password.setErrors({incorrect:!0}),this.stepFormGroup.controls.password.markAsTouched(),this.stepFormGroup.controls.passwordConfirm.setErrors({incorrect:!0})):(this.stepFormGroup.controls.password.setErrors(null),this.stepFormGroup.controls.passwordConfirm.setErrors(null))})).subscribe()}initStep(){this.installerService.isStepAlreadyLaunched(\"userAdmin\")&&this.stepFormGroup.disable()}isValidStep(){return void 0!==this.stepFormGroup&&(this.stepFormGroup.valid||this.installerService.isStepAlreadyLaunched(\"userAdmin\"))}getFormGroup(){return!!this.installerService.isStepAlreadyLaunched(\"userAdmin\")||this.stepFormGroup}getInfoToInstall(){return[{idStep:\"userAdmin\",body:{login:this.stepFormGroup.controls.login.value,firstname:this.stepFormGroup.controls.firstname.value,lastname:this.stepFormGroup.controls.lastname.value,password:this.stepFormGroup.controls.password.value,email:this.stepFormGroup.controls.email.value},route:{method:\"PUT\",url:\"../rest/installer/administrator\"},description:this.translate.instant(\"lang.stepUserAdminActionDesc\"),installPriority:3}]}launchInstall(){this.tiggerInstall.emit()}}return UseradminComponent.ɵfac=function(t){return new(t||UseradminComponent)(core.Qb(ngx_translate_core.e),core.Qb(fesm2015_forms.h),core.Qb(notification_service.a),core.Qb(installer_service_InstallerService))},UseradminComponent.ɵcmp=core.Kb({type:UseradminComponent,selectors:[[\"app-useradmin\"]],outputs:{tiggerInstall:\"tiggerInstall\"},decls:49,vars:39,consts:[[1,\"stepContent\"],[1,\"stepContentTitle\"],[1,\"fas\",\"fa-user\"],[\"role\",\"alert\",1,\"alert-message\",\"alert-message-info\",2,\"margin-top\",\"30px\",\"min-width\",\"100%\"],[2,\"width\",\"850px\",\"margin\",\"auto\",3,\"formGroup\"],[\"appearance\",\"outline\"],[\"matInput\",\"\",\"formControlName\",\"login\"],[\"matInput\",\"\",\"formControlName\",\"firstname\"],[\"matInput\",\"\",\"formControlName\",\"lastname\"],[\"matInput\",\"\",\"formControlName\",\"password\",3,\"type\"],[\"mat-icon-button\",\"\",\"matSuffix\",\"\",\"color\",\"primary\",3,\"click\"],[\"matInput\",\"\",\"formControlName\",\"passwordConfirm\",3,\"type\"],[\"matInput\",\"\",\"formControlName\",\"email\"]],template:function(rf,ctx){1&rf&&(core.Wb(0,\"div\",0),core.Wb(1,\"h2\",1),core.Rb(2,\"i\",2),core.Qc(3),core.ic(4,\"translate\"),core.Vb(),core.Wb(5,\"div\",3),core.Qc(6),core.ic(7,\"translate\"),core.Vb(),core.Wb(8,\"form\",4),core.Wb(9,\"mat-form-field\",5),core.Wb(10,\"mat-label\"),core.Qc(11),core.ic(12,\"translate\"),core.Vb(),core.Rb(13,\"input\",6),core.Vb(),core.Wb(14,\"mat-form-field\",5),core.Wb(15,\"mat-label\"),core.Qc(16),core.ic(17,\"translate\"),core.Vb(),core.Rb(18,\"input\",7),core.Vb(),core.Wb(19,\"mat-form-field\",5),core.Wb(20,\"mat-label\"),core.Qc(21),core.ic(22,\"translate\"),core.Vb(),core.Rb(23,\"input\",8),core.Vb(),core.Wb(24,\"mat-form-field\",5),core.Wb(25,\"mat-label\"),core.Qc(26),core.ic(27,\"translate\"),core.Vb(),core.Rb(28,\"input\",9),core.Wb(29,\"button\",10),core.dc(\"click\",(function(){return ctx.hide=!ctx.hide})),core.Rb(30,\"mat-icon\"),core.Vb(),core.Wb(31,\"mat-error\"),core.Qc(32),core.ic(33,\"translate\"),core.Vb(),core.Vb(),core.Wb(34,\"mat-form-field\",5),core.Wb(35,\"mat-label\"),core.Qc(36),core.ic(37,\"translate\"),core.Vb(),core.Rb(38,\"input\",11),core.Wb(39,\"button\",10),core.dc(\"click\",(function(){return ctx.hide=!ctx.hide})),core.Rb(40,\"mat-icon\"),core.Vb(),core.Wb(41,\"mat-error\"),core.Qc(42),core.ic(43,\"translate\"),core.Vb(),core.Vb(),core.Wb(44,\"mat-form-field\",5),core.Wb(45,\"mat-label\"),core.Qc(46),core.ic(47,\"translate\"),core.Vb(),core.Rb(48,\"input\",12),core.Vb(),core.Vb(),core.Vb()),2&rf&&(core.Db(3),core.Sc(\" \",core.jc(4,19,\"lang.userAdmin\"),\"\"),core.Db(3),core.Sc(\" \",core.jc(7,21,\"lang.stepUserAdmin_desc\"),\" \"),core.Db(2),core.oc(\"formGroup\",ctx.stepFormGroup),core.Db(3),core.Rc(core.jc(12,23,\"lang.id\")),core.Db(5),core.Rc(core.jc(17,25,\"lang.firstname\")),core.Db(5),core.Rc(core.jc(22,27,\"lang.lastname\")),core.Db(5),core.Rc(core.jc(27,29,\"lang.password\")),core.Db(2),core.oc(\"type\",ctx.hide?\"password\":\"text\"),core.Db(2),core.Gb(\"fa \",ctx.hide?\"fa-eye-slash\":\"fa-eye\",\"\"),core.Db(2),core.Rc(core.jc(33,31,\"lang.passwordNotMatch\")),core.Db(4),core.Rc(core.jc(37,33,\"lang.retypeNewPassword\")),core.Db(2),core.oc(\"type\",ctx.hide?\"password\":\"text\"),core.Db(2),core.Gb(\"fa \",ctx.hide?\"fa-eye-slash\":\"fa-eye\",\"\"),core.Db(2),core.Rc(core.jc(43,35,\"lang.passwordNotMatch\")),core.Db(4),core.Rc(core.jc(47,37,\"lang.email\")))},directives:[fesm2015_forms.K,fesm2015_forms.v,fesm2015_forms.m,form_field.c,form_field.g,input.b,fesm2015_forms.d,fesm2015_forms.u,fesm2015_forms.k,fesm2015_button.b,form_field.j,icon.a,form_field.b],pipes:[ngx_translate_core.d],styles:[\".stepContent[_ngcontent-%COMP%]{margin:auto}.stepContent[_ngcontent-%COMP%]   .stepContentTitle[_ngcontent-%COMP%]{color:#135f7f;margin-bottom:30px;border-bottom:1px solid;padding:0}\"]}),UseradminComponent})();const installer_component_c0=[\"stepper\"],_c1=[\"stepContent\"];function InstallerComponent_ng_template_9_Template(rf,ctx){1&rf&&core.Qc(0,\"Installation\")}function InstallerComponent_ng_template_17_Template(rf,ctx){1&rf&&(core.Qc(0),core.ic(1,\"translate\")),2&rf&&core.Rc(core.jc(1,1,\"lang.prerequisite\"))}function InstallerComponent_ng_template_28_Template(rf,ctx){1&rf&&(core.Qc(0),core.ic(1,\"translate\")),2&rf&&core.Rc(core.jc(1,1,\"lang.database\"))}function InstallerComponent_ng_template_39_Template(rf,ctx){1&rf&&(core.Qc(0),core.ic(1,\"translate\")),2&rf&&core.Rc(core.jc(1,1,\"lang.docserver\"))}function InstallerComponent_ng_template_50_Template(rf,ctx){1&rf&&(core.Qc(0),core.ic(1,\"translate\")),2&rf&&core.Rc(core.jc(1,1,\"lang.customization\"))}function InstallerComponent_ng_template_61_Template(rf,ctx){1&rf&&(core.Qc(0),core.ic(1,\"translate\")),2&rf&&core.Rc(core.jc(1,1,\"lang.userAdmin\"))}function InstallerComponent_ng_template_71_Template(rf,ctx){1&rf&&core.Rb(0,\"mat-icon\",30)}function InstallerComponent_ng_template_72_Template(rf,ctx){1&rf&&core.Rb(0,\"mat-icon\",30)}function InstallerComponent_ng_template_73_Template(rf,ctx){1&rf&&core.Rb(0,\"mat-icon\",31)}const routes=[{path:\"\",component:(()=>{class InstallerComponent{constructor(translate,http,router,headerService,notify,appService,sortPipe,dialog,functionService,installerService){this.translate=translate,this.http=http,this.router=router,this.headerService=headerService,this.notify=notify,this.appService=appService,this.sortPipe=sortPipe,this.dialog=dialog,this.functionService=functionService,this.installerService=installerService}ngOnInit(){this.headerService.hideSideBar=!0}ngAfterViewInit(){$(\".mat-horizontal-stepper-header-container\").insertBefore(\".bg-head-content\"),$(\".mat-step-icon\").css(\"background-color\",\"white\"),$(\".mat-step-icon\").css(\"color\",\"#135f7f\"),$(\".mat-step-label\").css(\"color\",\"white\")}isValidStep(){return!1}initStep(ev){this.stepContent.toArray()[ev.selectedIndex].initStep()}nextStep(){this.stepper.next()}endInstall(){let installContent=[];this.stepContent.toArray().forEach(component=>{installContent=installContent.concat(component.getInfoToInstall())}),installContent=this.sortPipe.transform(installContent,\"installPriority\"),console.log(installContent),this.dialog.open(install_action_component_InstallActionComponent,{panelClass:\"maarch-modal\",disableClose:!0,width:\"500px\",data:installContent}).afterClosed().pipe(Object(filter.filter)(result=>!this.functionService.empty(result)),Object(tap.tap)(result=>{}),Object(catchError.catchError)(err=>(this.notify.handleErrors(err),Object(of.of)(!1)))).subscribe()}}return InstallerComponent.ɵfac=function(t){return new(t||InstallerComponent)(core.Qb(ngx_translate_core.e),core.Qb(fesm2015_http.b),core.Qb(router.c),core.Qb(header_service.a),core.Qb(notification_service.a),core.Qb(app_service.a),core.Qb(sorting_pipe.a),core.Qb(dialog.b),core.Qb(functions_service.a),core.Qb(installer_service_InstallerService))},InstallerComponent.ɵcmp=core.Kb({type:InstallerComponent,selectors:[[\"ng-component\"]],viewQuery:function(rf,ctx){var _t;1&rf&&(core.Kc(installer_component_c0,!0),core.Xc(_c1,!0)),2&rf&&(core.yc(_t=core.ec())&&(ctx.stepper=_t.first),core.yc(_t=core.ec())&&(ctx.stepContent=_t))},features:[core.Cb([{provide:stepper.h,useValue:{showError:!0}},sorting_pipe.a])],decls:74,vars:26,consts:[[\"autosize\",\"\",1,\"maarch-container\"],[1,\"bg-head\"],[1,\"bg-head-content\"],[1,\"container\"],[1,\"container-content\",2,\"overflow\",\"hidden\"],[\"linear\",\"\",2,\"height\",\"100vh\",\"overflow\",\"auto\",3,\"selectionChange\"],[\"stepper\",\"\"],[\"label\",\"install\"],[\"matStepLabel\",\"\"],[1,\"stepContainer\"],[1,\"stepContent\"],[\"stepContent\",\"\"],[\"mat-fab\",\"\",\"matStepperNext\",\"\",\"color\",\"primary\",1,\"nextStepButton\",3,\"title\"],[1,\"fa\",\"fa-arrow-right\"],[3,\"stepControl\"],[\"appPrerequisite\",\"\",\"stepContent\",\"\"],[\"mat-fab\",\"\",\"matStepperPrevious\",\"\",\"color\",\"primary\",1,\"previousStepButton\",3,\"title\"],[1,\"fa\",\"fa-arrow-left\"],[\"mat-fab\",\"\",\"matStepperNext\",\"\",\"color\",\"primary\",1,\"nextStepButton\",3,\"title\",\"disabled\"],[3,\"nextStep\"],[\"appDatabase\",\"\",\"stepContent\",\"\"],[\"appDocservers\",\"\",\"stepContent\",\"\"],[\"appCustomization\",\"\",\"stepContent\",\"\"],[3,\"tiggerInstall\"],[\"appUseradmin\",\"\",\"stepContent\",\"\"],[\"mat-fab\",\"\",\"color\",\"accent\",1,\"nextStepButton\",3,\"title\",\"disabled\",\"click\"],[1,\"fas\",\"fa-check-double\"],[\"matStepperIcon\",\"edit\"],[\"matStepperIcon\",\"done\"],[\"matStepperIcon\",\"error\"],[1,\"fa\",\"fa-check\",\"stepIcon\"],[1,\"fa\",\"fa-times\",\"stepIcon\",2,\"color\",\"red\",\"font-size\",\"15px !important\"]],template:function(rf,ctx){if(1&rf&&(core.Wb(0,\"mat-sidenav-container\",0),core.Wb(1,\"mat-sidenav-content\"),core.Wb(2,\"div\",1),core.Rb(3,\"div\",2),core.Vb(),core.Wb(4,\"div\",3),core.Wb(5,\"div\",4),core.Wb(6,\"mat-horizontal-stepper\",5,6),core.dc(\"selectionChange\",(function($event){return ctx.initStep($event)})),core.Wb(8,\"mat-step\",7),core.Oc(9,InstallerComponent_ng_template_9_Template,1,0,\"ng-template\",8),core.Wb(10,\"div\",9),core.Wb(11,\"div\",10),core.Rb(12,\"app-welcome\",null,11),core.Vb(),core.Wb(14,\"button\",12),core.Rb(15,\"mat-icon\",13),core.Vb(),core.Vb(),core.Vb(),core.Wb(16,\"mat-step\",14),core.Oc(17,InstallerComponent_ng_template_17_Template,2,3,\"ng-template\",8),core.Wb(18,\"div\",9),core.Wb(19,\"div\",10),core.Rb(20,\"app-prerequisite\",null,15),core.Vb(),core.Wb(23,\"button\",16),core.Rb(24,\"mat-icon\",17),core.Vb(),core.Wb(25,\"button\",18),core.Rb(26,\"mat-icon\",13),core.Vb(),core.Vb(),core.Vb(),core.Wb(27,\"mat-step\",14),core.Oc(28,InstallerComponent_ng_template_28_Template,2,3,\"ng-template\",8),core.Wb(29,\"div\",9),core.Wb(30,\"div\",10),core.Wb(31,\"app-database\",19,20),core.dc(\"nextStep\",(function(){return ctx.nextStep()})),core.Vb(),core.Vb(),core.Wb(34,\"button\",16),core.Rb(35,\"mat-icon\",17),core.Vb(),core.Wb(36,\"button\",18),core.Rb(37,\"mat-icon\",13),core.Vb(),core.Vb(),core.Vb(),core.Wb(38,\"mat-step\",14),core.Oc(39,InstallerComponent_ng_template_39_Template,2,3,\"ng-template\",8),core.Wb(40,\"div\",9),core.Wb(41,\"div\",10),core.Wb(42,\"app-docservers\",19,21),core.dc(\"nextStep\",(function(){return ctx.nextStep()})),core.Vb(),core.Vb(),core.Wb(45,\"button\",16),core.Rb(46,\"mat-icon\",17),core.Vb(),core.Wb(47,\"button\",18),core.Rb(48,\"mat-icon\",13),core.Vb(),core.Vb(),core.Vb(),core.Wb(49,\"mat-step\",14),core.Oc(50,InstallerComponent_ng_template_50_Template,2,3,\"ng-template\",8),core.Wb(51,\"div\",9),core.Wb(52,\"div\",10),core.Rb(53,\"app-customization\",null,22),core.Vb(),core.Wb(56,\"button\",16),core.Rb(57,\"mat-icon\",17),core.Vb(),core.Wb(58,\"button\",18),core.Rb(59,\"mat-icon\",13),core.Vb(),core.Vb(),core.Vb(),core.Wb(60,\"mat-step\",14),core.Oc(61,InstallerComponent_ng_template_61_Template,2,3,\"ng-template\",8),core.Wb(62,\"div\",9),core.Wb(63,\"div\",10),core.Wb(64,\"app-useradmin\",23,24),core.dc(\"tiggerInstall\",(function(){return ctx.endInstall()})),core.Vb(),core.Vb(),core.Wb(67,\"button\",16),core.Rb(68,\"mat-icon\",17),core.Vb(),core.Wb(69,\"button\",25),core.dc(\"click\",(function(){return ctx.endInstall()})),core.Rb(70,\"mat-icon\",26),core.Vb(),core.Vb(),core.Vb(),core.Oc(71,InstallerComponent_ng_template_71_Template,1,0,\"ng-template\",27),core.Oc(72,InstallerComponent_ng_template_72_Template,1,0,\"ng-template\",28),core.Oc(73,InstallerComponent_ng_template_73_Template,1,0,\"ng-template\",29),core.Vb(),core.Vb(),core.Vb(),core.Vb(),core.Vb()),2&rf){const _r4=core.zc(21),_r7=core.zc(32),_r10=core.zc(43),_r13=core.zc(54),_r16=core.zc(65);core.Db(3),core.Ib(\"fullContainer\",ctx.appService.getViewMode()),core.Db(1),core.Ib(\"fullContainer\",ctx.appService.getViewMode()),core.Db(2),core.oc(\"@.disabled\",!0),core.Db(8),core.oc(\"title\",ctx.translate.instant(\"lang.next\")),core.Db(2),core.oc(\"stepControl\",_r4.getFormGroup()),core.Db(7),core.oc(\"title\",ctx.translate.instant(\"lang.previous\")),core.Db(2),core.oc(\"title\",ctx.translate.instant(\"lang.next\"))(\"disabled\",!_r4.isValidStep()),core.Db(2),core.oc(\"stepControl\",_r7.getFormGroup()),core.Db(7),core.oc(\"title\",ctx.translate.instant(\"lang.previous\")),core.Db(2),core.oc(\"title\",ctx.translate.instant(\"lang.next\"))(\"disabled\",!_r7.isValidStep()),core.Db(2),core.oc(\"stepControl\",_r10.getFormGroup()),core.Db(7),core.oc(\"title\",ctx.translate.instant(\"lang.previous\")),core.Db(2),core.oc(\"title\",ctx.translate.instant(\"lang.next\"))(\"disabled\",!_r10.isValidStep()),core.Db(2),core.oc(\"stepControl\",_r13.getFormGroup()),core.Db(7),core.oc(\"title\",ctx.translate.instant(\"lang.previous\")),core.Db(2),core.oc(\"title\",ctx.translate.instant(\"lang.next\"))(\"disabled\",!_r13.isValidStep()),core.Db(2),core.oc(\"stepControl\",_r16.getFormGroup()),core.Db(7),core.oc(\"title\",ctx.translate.instant(\"lang.previous\")),core.Db(2),core.oc(\"title\",ctx.translate.instant(\"lang.beginInstall\"))(\"disabled\",!_r16.isValidStep())}},directives:[sidenav.e,sidenav.f,fesm2015_stepper.a,fesm2015_stepper.b,fesm2015_stepper.d,welcome_component_WelcomeComponent,fesm2015_button.b,fesm2015_stepper.h,icon.a,prerequisite_component_PrerequisiteComponent,fesm2015_stepper.i,database_component_DatabaseComponent,docservers_component_DocserversComponent,customization_component_CustomizationComponent,useradmin_component_UseradminComponent,fesm2015_stepper.f],pipes:[ngx_translate_core.d],styles:[\".mat-stepper-horizontal{height:100%!important}.container[_ngcontent-%COMP%]{padding-left:80px!important;padding-right:80px!important}.previousStepButton[_ngcontent-%COMP%]{position:fixed;top:50%;left:10px;transform:translateY(-50%)}.previousStepButton[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:25px;height:auto;width:auto}.nextStepButton[_ngcontent-%COMP%]{position:fixed;top:50%;right:13px;transform:translateY(-50%)}.nextStepButton[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:25px;height:auto;width:auto} .mat-step-icon{background-color:#fff;color:#135f7f} .mat-step-label-active{opacity:1!important} .mat-step-label{color:#fff;opacity:.5}.stepIcon[_ngcontent-%COMP%]{font-size:10px!important;height:auto!important;width:auto!important} .mat-step-label{transition:all .2s} .mat-step-label-selected{font-size:160%;transition:all .2s;opacity:1}\"]}),InstallerComponent})()}];let installer_routing_module_InstallerRoutingModule=(()=>{class InstallerRoutingModule{}return InstallerRoutingModule.ɵmod=core.Ob({type:InstallerRoutingModule}),InstallerRoutingModule.ɵinj=core.Nb({factory:function(t){return new(t||InstallerRoutingModule)},imports:[[router.g.forChild(routes)],router.g]}),InstallerRoutingModule})(),installer_module_InstallerModule=(()=>{class InstallerModule{constructor(translate){translate.setDefaultLang(\"fr\")}}return InstallerModule.ɵmod=core.Ob({type:InstallerModule}),InstallerModule.ɵinj=core.Nb({factory:function(t){return new(t||InstallerModule)(core.ac(ngx_translate_core.e))},providers:[installer_service_InstallerService],imports:[[app_common_module.a,internationalization_module.a,installer_routing_module_InstallerRoutingModule]]}),InstallerModule})()}}]);","extractedComments":[]}