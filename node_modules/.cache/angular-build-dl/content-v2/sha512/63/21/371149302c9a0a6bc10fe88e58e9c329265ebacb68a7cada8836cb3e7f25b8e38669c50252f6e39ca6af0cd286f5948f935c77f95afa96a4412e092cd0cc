(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"/JYr":function(t,e,i){"use strict";var a=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function a(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)}}(),n=i("q3Kh"),o=i("gTqA"),s=i("wjEo");e.exhaustMap=function t(e,i){return i?function(a){return a.pipe(t((function(t,a){return o.from(e(t,a)).pipe(n.map((function(e,n){return i(t,e,a,n)})))})))}:function(t){return t.lift(new c(e))}};var c=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new r(t,this.project))},t}(),r=function(t){function e(e,i){var a=t.call(this,e)||this;return a.project=i,a.hasSubscription=!1,a.hasCompleted=!1,a.index=0,a}return a(e,t),e.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},e.prototype.tryNext=function(t){var e,i=this.index++;try{e=this.project(t,i)}catch(a){return void this.destination.error(a)}this.hasSubscription=!0,this._innerSub(e)},e.prototype._innerSub=function(t){var e=new s.SimpleInnerSubscriber(this),i=this.destination;i.add(e);var a=s.innerSubscribe(t,e);a!==e&&i.add(a)},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(s.SimpleOuterSubscriber)},Dxa7:function(t,e,i){"use strict";var a=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function a(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)}}(),n=i("FWf1"),o=i("IKal"),s=i("aJGj");e.take=function(t){return function(e){return 0===t?s.empty():e.lift(new c(t))}};var c=function(){function t(t){if(this.total=t,this.total<0)throw new o.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(new r(t,this.total))},t}(),r=function(t){function e(e,i){var a=t.call(this,e)||this;return a.total=i,a.count=0,a}return a(e,t),e.prototype._next=function(t){var e=this.total,i=++this.count;i<=e&&(this.destination.next(t),i===e&&(this.destination.complete(),this.unsubscribe()))},e}(n.Subscriber)},IKal:function(t,e,i){"use strict";e.ArgumentOutOfRangeError=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}()},NpuA:function(t,e,i){var a,n;void 0===(n="function"==typeof(a=function t(){"use strict";var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},i=!e.document&&!!e.postMessage,a=i&&/blob:/i.test((e.location||{}).protocol),n={},o=0,s={parse:function(i,a){var c=(a=a||{}).dynamicTyping||!1;if(V(c)&&(a.dynamicTypingFunction=c,c={}),a.dynamicTyping=c,a.transform=!!V(a.transform)&&a.transform,a.worker&&s.WORKERS_SUPPORTED){var r=function(){if(!s.WORKERS_SUPPORTED)return!1;var i,a,c=(i=e.URL||e.webkitURL||null,a=t.toString(),s.BLOB_URL||(s.BLOB_URL=i.createObjectURL(new Blob(["(",a,")();"],{type:"text/javascript"})))),r=new e.Worker(c);return r.onmessage=f,r.id=o++,n[r.id]=r}();return r.userStep=a.step,r.userChunk=a.chunk,r.userComplete=a.complete,r.userError=a.error,a.step=V(a.step),a.chunk=V(a.chunk),a.complete=V(a.complete),a.error=V(a.error),delete a.worker,void r.postMessage({input:i,config:a,workerId:r.id})}var h=null;return"string"==typeof i?h=a.download?new l(a):new b(a):!0===i.readable&&V(i.read)&&V(i.on)?h=new p(a):(e.File&&i instanceof File||i instanceof Object)&&(h=new d(a)),h.stream(i)},unparse:function(t,e){var i=!1,a=!0,n=",",o="\r\n",c='"',r=c+c,l=!1,d=null,b=!1;!function(){if("object"==typeof e){if("string"!=typeof e.delimiter||s.BAD_DELIMITERS.filter((function(t){return-1!==e.delimiter.indexOf(t)})).length||(n=e.delimiter),("boolean"==typeof e.quotes||"function"==typeof e.quotes||Array.isArray(e.quotes))&&(i=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(l=e.skipEmptyLines),"string"==typeof e.newline&&(o=e.newline),"string"==typeof e.quoteChar&&(c=e.quoteChar),"boolean"==typeof e.header&&(a=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");d=e.columns}void 0!==e.escapeChar&&(r=e.escapeChar+c),"boolean"==typeof e.escapeFormulae&&(b=e.escapeFormulae)}}();var p=new RegExp(u(c),"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return m(null,t,l);if("object"==typeof t[0])return m(d||h(t[0]),t,l)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:h(t.data[0])),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),m(t.fields||[],t.data||[],l);throw new Error("Unable to serialize unrecognized input");function h(t){if("object"!=typeof t)return[];var e=[];for(var i in t)e.push(i);return e}function m(t,e,i){var s="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var c=Array.isArray(t)&&0<t.length,r=!Array.isArray(e[0]);if(c&&a){for(var l=0;l<t.length;l++)0<l&&(s+=n),s+=f(t[l],l);0<e.length&&(s+=o)}for(var d=0;d<e.length;d++){var b=c?t.length:e[d].length,p=!1,h=c?0===Object.keys(e[d]).length:0===e[d].length;if(i&&!c&&(p="greedy"===i?""===e[d].join("").trim():1===e[d].length&&0===e[d][0].length),"greedy"===i&&c){for(var u=[],m=0;m<b;m++)u.push(e[d][r?t[m]:m]);p=""===u.join("").trim()}if(!p){for(var g=0;g<b;g++)0<g&&!h&&(s+=n),s+=f(e[d][c&&r?t[g]:g],g);d<e.length-1&&(!i||0<b&&!h)&&(s+=o)}}return s}function f(t,e){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);!0===b&&"string"==typeof t&&null!==t.match(/^[=+\-@].*$/)&&(t="'"+t);var a=t.toString().replace(p,r);return"boolean"==typeof i&&i||"function"==typeof i&&i(t,e)||Array.isArray(i)&&i[e]||function(t,e){for(var i=0;i<e.length;i++)if(-1<t.indexOf(e[i]))return!0;return!1}(a,s.BAD_DELIMITERS)||-1<a.indexOf(n)||" "===a.charAt(0)||" "===a.charAt(a.length-1)?c+a+c:a}}};if(s.RECORD_SEP=String.fromCharCode(30),s.UNIT_SEP=String.fromCharCode(31),s.BYTE_ORDER_MARK="\ufeff",s.BAD_DELIMITERS=["\r","\n",'"',s.BYTE_ORDER_MARK],s.WORKERS_SUPPORTED=!i&&!!e.Worker,s.NODE_STREAM_INPUT=1,s.LocalChunkSize=10485760,s.RemoteChunkSize=5242880,s.DefaultDelimiter=",",s.Parser=m,s.ParserHandle=h,s.NetworkStreamer=l,s.FileStreamer=d,s.StringStreamer=b,s.ReadableStreamStreamer=p,e.jQuery){var c=e.jQuery;c.fn.parse=function(t){var i=t.config||{},a=[];return this.each((function(t){if("INPUT"!==c(this).prop("tagName").toUpperCase()||"file"!==c(this).attr("type").toLowerCase()||!e.FileReader||!this.files||0===this.files.length)return!0;for(var n=0;n<this.files.length;n++)a.push({file:this.files[n],inputElem:this,instanceConfig:c.extend({},i)})})),n(),this;function n(){if(0!==a.length){var e,i,n,r=a[0];if(V(t.before)){var l=t.before(r.file,r.inputElem);if("object"==typeof l){if("abort"===l.action)return e=r.file,i=r.inputElem,n=l.reason,void(V(t.error)&&t.error({name:"AbortError"},e,i,n));if("skip"===l.action)return void o();"object"==typeof l.config&&(r.instanceConfig=c.extend(r.instanceConfig,l.config))}else if("skip"===l)return void o()}var d=r.instanceConfig.complete;r.instanceConfig.complete=function(t){V(d)&&d(t,r.file,r.inputElem),o()},s.parse(r.file,r.instanceConfig)}else V(t.complete)&&t.complete()}function o(){a.splice(0,1),n()}}}function r(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(t){var e=y(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new h(e),(this._handle.streamer=this)._config=e}).call(this,t),this.parseChunk=function(t,i){if(this.isFirstChunk&&V(this._config.beforeFirstChunk)){var n=this._config.beforeFirstChunk(t);void 0!==n&&(t=n)}this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+t;this._partialLine="";var c=this._handle.parse(o,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var r=c.meta.cursor;this._finished||(this._partialLine=o.substring(r-this._baseIndex),this._baseIndex=r),c&&c.data&&(this._rowCount+=c.data.length);var l=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(a)e.postMessage({results:c,workerId:s.WORKER_ID,finished:l});else if(V(this._config.chunk)&&!i){if(this._config.chunk(c,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);c=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(c.data),this._completeResults.errors=this._completeResults.errors.concat(c.errors),this._completeResults.meta=c.meta),this._completed||!l||!V(this._config.complete)||c&&c.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),l||c&&c.meta.paused||this._nextChunk(),c}this._halted=!0},this._sendError=function(t){V(this._config.error)?this._config.error(t):a&&this._config.error&&e.postMessage({workerId:s.WORKER_ID,error:t,finished:!1})}}function l(t){var e;(t=t||{}).chunkSize||(t.chunkSize=s.RemoteChunkSize),r.call(this,t),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),i||(e.onload=D(this._chunkLoaded,this),e.onerror=D(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var a in t)e.setRequestHeader(a,t[a])}this._config.chunkSize&&e.setRequestHeader("Range","bytes="+this._start+"-"+(this._start+this._config.chunkSize-1));try{e.send(this._config.downloadRequestBody)}catch(t){this._chunkError(t.message)}i&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(t){var e=t.getResponseHeader("Content-Range");return null===e?-1:parseInt(e.substring(e.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){this._sendError(new Error(e.statusText||t))}}function d(t){var e,i;(t=t||{}).chunkSize||(t.chunkSize=s.LocalChunkSize),r.call(this,t);var a="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,i=t.slice||t.webkitSlice||t.mozSlice,a?((e=new FileReader).onload=D(this._chunkLoaded,this),e.onerror=D(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var n=Math.min(this._start+this._config.chunkSize,this._input.size);t=i.call(t,this._start,n)}var o=e.readAsText(t,this._config.encoding);a||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function b(t){var e;r.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t,i=this._config.chunkSize;return i?(t=e.substring(0,i),e=e.substring(i)):(t=e,e=""),this._finished=!e,this.parseChunk(t)}}}function p(t){r.call(this,t=t||{});var e=[],i=!0,a=!1;this.pause=function(){r.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){r.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){a&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):i=!0},this._streamData=D((function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}}),this),this._streamError=D((function(t){this._streamCleanUp(),this._sendError(t)}),this),this._streamEnd=D((function(){this._streamCleanUp(),a=!0,this._streamData("")}),this),this._streamCleanUp=D((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function h(t){var e,i,a,n=Math.pow(2,53),o=-n,c=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)(e[-+]?\d+)?\s*$/,r=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,l=this,d=0,b=0,p=!1,h=!1,f=[],g={data:[],errors:[],meta:{}};if(V(t.step)){var v=t.step;t.step=function(e){if(g=e,M())C();else{if(C(),0===g.data.length)return;d+=e.data.length,t.preview&&d>t.preview?i.abort():(g.data=g.data[0],v(g,l))}}}function D(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function C(){if(g&&a&&(x("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+s.DefaultDelimiter+"'"),a=!1),t.skipEmptyLines)for(var e=0;e<g.data.length;e++)D(g.data[e])&&g.data.splice(e--,1);return M()&&function(){if(g)if(Array.isArray(g.data[0])){for(var e=0;M()&&e<g.data.length;e++)g.data[e].forEach(i);g.data.splice(0,1)}else g.data.forEach(i);function i(e,i){V(t.transformHeader)&&(e=t.transformHeader(e,i)),f.push(e)}}(),function(){if(!g||!t.header&&!t.dynamicTyping&&!t.transform)return g;function e(e,i){var a,n=t.header?{}:[];for(a=0;a<e.length;a++){var o=a,s=e[a];t.header&&(o=a>=f.length?"__parsed_extra":f[a]),t.transform&&(s=t.transform(s,o)),s=W(o,s),"__parsed_extra"===o?(n[o]=n[o]||[],n[o].push(s)):n[o]=s}return t.header&&(a>f.length?x("FieldMismatch","TooManyFields","Too many fields: expected "+f.length+" fields but parsed "+a,b+i):a<f.length&&x("FieldMismatch","TooFewFields","Too few fields: expected "+f.length+" fields but parsed "+a,b+i)),n}var i=1;return!g.data.length||Array.isArray(g.data[0])?(g.data=g.data.map(e),i=g.data.length):g.data=e(g.data,0),t.header&&g.meta&&(g.meta.fields=f),b+=i,g}()}function M(){return t.header&&0===f.length}function W(e,i){return a=e,t.dynamicTypingFunction&&void 0===t.dynamicTyping[a]&&(t.dynamicTyping[a]=t.dynamicTypingFunction(a)),!0===(t.dynamicTyping[a]||t.dynamicTyping)?"true"===i||"TRUE"===i||"false"!==i&&"FALSE"!==i&&(function(t){if(c.test(t)){var e=parseFloat(t);if(o<e&&e<n)return!0}return!1}(i)?parseFloat(i):r.test(i)?new Date(i):""===i?null:i):i;var a}function x(t,e,i,a){var n={type:t,code:e,message:i};void 0!==a&&(n.row=a),g.errors.push(n)}this.parse=function(n,o,c){if(t.newline||(t.newline=function(t,e){t=t.substring(0,1048576);var i=new RegExp(u(e)+"([^]*?)"+u(e),"gm"),a=(t=t.replace(i,"")).split("\r"),n=t.split("\n");if(1===a.length||1<n.length&&n[0].length<a[0].length)return"\n";for(var o=0,s=0;s<a.length;s++)"\n"===a[s][0]&&o++;return o>=a.length/2?"\r\n":"\r"}(n,t.quoteChar||'"')),a=!1,t.delimiter)V(t.delimiter)&&(t.delimiter=t.delimiter(n),g.meta.delimiter=t.delimiter);else{var r=function(e,i,a,n,o){var c,r,l,d;o=o||[",","\t","|",";",s.RECORD_SEP,s.UNIT_SEP];for(var b=0;b<o.length;b++){var p=o[b],h=0,u=0,f=0;l=void 0;for(var g=new m({comments:n,delimiter:p,newline:i,preview:10}).parse(e),v=0;v<g.data.length;v++)if(a&&D(g.data[v]))f++;else{var y=g.data[v].length;u+=y,void 0!==l?0<y&&(h+=Math.abs(y-l),l=y):l=y}0<g.data.length&&(u/=g.data.length-f),(void 0===r||h<=r)&&(void 0===d||d<u)&&1.99<u&&(r=h,c=p,d=u)}return{successful:!!(t.delimiter=c),bestDelimiter:c}}(n,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);r.successful?t.delimiter=r.bestDelimiter:(a=!0,t.delimiter=s.DefaultDelimiter),g.meta.delimiter=t.delimiter}var l=y(t);return t.preview&&t.header&&l.preview++,e=n,i=new m(l),g=i.parse(e,o,c),C(),p?{meta:{paused:!0}}:g||{meta:{paused:!1}}},this.paused=function(){return p},this.pause=function(){p=!0,i.abort(),e=V(t.chunk)?"":e.substring(i.getCharIndex())},this.resume=function(){l.streamer._halted?(p=!1,l.streamer.parseChunk(e,!0)):setTimeout(l.resume,3)},this.aborted=function(){return h},this.abort=function(){h=!0,i.abort(),g.meta.aborted=!0,V(t.complete)&&t.complete(g),e=""}}function u(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(t){var e,i=(t=t||{}).delimiter,a=t.newline,n=t.comments,o=t.step,c=t.preview,r=t.fastMode,l=e=void 0===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(l=t.escapeChar),("string"!=typeof i||-1<s.BAD_DELIMITERS.indexOf(i))&&(i=","),n===i)throw new Error("Comment character same as delimiter");!0===n?n="#":("string"!=typeof n||-1<s.BAD_DELIMITERS.indexOf(n))&&(n=!1),"\n"!==a&&"\r"!==a&&"\r\n"!==a&&(a="\n");var d=0,b=!1;this.parse=function(t,s,p){if("string"!=typeof t)throw new Error("Input must be a string");var h=t.length,m=i.length,f=a.length,g=n.length,v=V(o),y=[],D=[],C=[],M=d=0;if(!t)return F();if(r||!1!==r&&-1===t.indexOf(e)){for(var W=t.split(a),x=0;x<W.length;x++){if(d+=(C=W[x]).length,x!==W.length-1)d+=a.length;else if(p)return F();if(!n||C.substring(0,g)!==n){if(v){if(y=[],R(C.split(i)),L(),b)return F()}else R(C.split(i));if(c&&c<=x)return y=y.slice(0,c),F(!0)}}return F()}for(var O=t.indexOf(i,d),_=t.indexOf(a,d),S=new RegExp(u(l)+u(e),"g"),w=t.indexOf(e,d);;)if(t[d]!==e)if(n&&0===C.length&&t.substring(d,d+g)===n){if(-1===_)return F();_=t.indexOf(a,d=_+f),O=t.indexOf(i,d)}else{if(-1!==O&&(O<_||-1===_)){if(!(O<w)){C.push(t.substring(d,O)),O=t.indexOf(i,d=O+m);continue}var I=E(O,w,_);if(I&&void 0!==I.nextDelim){w=I.quoteSearch,C.push(t.substring(d,O=I.nextDelim)),O=t.indexOf(i,d=O+m);continue}}if(-1===_)break;if(C.push(t.substring(d,_)),Q(_+f),v&&(L(),b))return F();if(c&&y.length>=c)return F(!0)}else for(w=d,d++;;){if(-1===(w=t.indexOf(e,w+1)))return p||D.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:y.length,index:d}),P();if(w===h-1)return P(t.substring(d,w).replace(S,e));if(e!==l||t[w+1]!==l){if(e===l||0===w||t[w-1]!==l){-1!==O&&O<w+1&&(O=t.indexOf(i,w+1)),-1!==_&&_<w+1&&(_=t.indexOf(a,w+1));var j=T(-1===_?O:Math.min(O,_));if(t[w+1+j]===i){C.push(t.substring(d,w).replace(S,e)),t[d=w+1+j+m]!==e&&(w=t.indexOf(e,d)),O=t.indexOf(i,d),_=t.indexOf(a,d);break}var k=T(_);if(t.substring(w+1+k,w+1+k+f)===a){if(C.push(t.substring(d,w).replace(S,e)),Q(w+1+k+f),O=t.indexOf(i,d),w=t.indexOf(e,d),v&&(L(),b))return F();if(c&&y.length>=c)return F(!0);break}D.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:y.length,index:d}),w++}}else w++}return P();function R(t){y.push(t),M=d}function T(e){var i=0;if(-1!==e){var a=t.substring(w+1,e);a&&""===a.trim()&&(i=a.length)}return i}function P(e){return p||(void 0===e&&(e=t.substring(d)),C.push(e),d=h,R(C),v&&L()),F()}function Q(e){d=e,R(C),C=[],_=t.indexOf(a,d)}function F(t){return{data:y,errors:D,meta:{delimiter:i,linebreak:a,aborted:b,truncated:!!t,cursor:M+(s||0)}}}function L(){o(F()),y=[],D=[]}function E(a,n,o){var s={nextDelim:void 0,quoteSearch:void 0},c=t.indexOf(e,n+1);if(n<a&&a<c&&(c<o||-1===o)){var r=t.indexOf(i,c);if(-1===r)return s;c<r&&(c=t.indexOf(e,c+1)),s=E(r,c,o)}else s={nextDelim:a,quoteSearch:n};return s}},this.abort=function(){b=!0},this.getCharIndex=function(){return d}}function f(t){var e=t.data,i=n[e.workerId],a=!1;if(e.error)i.userError(e.error,e.file);else if(e.results&&e.results.data){var o={abort:function(){a=!0,g(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:v,resume:v};if(V(i.userStep)){for(var s=0;s<e.results.data.length&&(i.userStep({data:e.results.data[s],errors:e.results.errors,meta:e.results.meta},o),!a);s++);delete e.results}else V(i.userChunk)&&(i.userChunk(e.results,o,e.file),delete e.results)}e.finished&&!a&&g(e.workerId,e.results)}function g(t,e){var i=n[t];V(i.userComplete)&&i.userComplete(e),i.terminate(),delete n[t]}function v(){throw new Error("Not implemented.")}function y(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var i in t)e[i]=y(t[i]);return e}function D(t,e){return function(){t.apply(e,arguments)}}function V(t){return"function"==typeof t}return a&&(e.onmessage=function(t){var i=t.data;if(void 0===s.WORKER_ID&&i&&(s.WORKER_ID=i.workerId),"string"==typeof i.input)e.postMessage({workerId:s.WORKER_ID,results:s.parse(i.input,i.config),finished:!0});else if(e.File&&i.input instanceof File||i.input instanceof Object){var a=s.parse(i.input,i.config);a&&e.postMessage({workerId:s.WORKER_ID,results:a,finished:!0})}}),(l.prototype=Object.create(r.prototype)).constructor=l,(d.prototype=Object.create(r.prototype)).constructor=d,(b.prototype=Object.create(b.prototype)).constructor=b,(p.prototype=Object.create(r.prototype)).constructor=p,s})?a.apply(e,[]):a)||(t.exports=n)},aJGj:function(t,e,i){"use strict";var a=i("Q1FS");e.EMPTY=new a.Observable((function(t){return t.complete()})),e.empty=function(t){return t?function(t){return new a.Observable((function(e){return t.schedule((function(){return e.complete()}))}))}(t):e.EMPTY}},aPMI:function(t,e,i){"use strict";i.r(e),i.d(e,"AdministrationModule",(function(){return UV}));var a=i("vWc3"),n=i("cMWS"),o=i("tyNb"),s=i("LRne"),c=i("3Pt+"),r=i("JX91"),l=i("lJxs"),d=i("vkgz"),b=i("JIr8"),p=i("fXoL"),h=i("sYmb"),u=i("tk/3"),m=i("4zkx"),f=i("A6w4"),g=i("eiH7"),v=i("aEDk"),y=i("AXEc"),D=i("rH+9"),V=i("d7/a"),C=i("XhcP"),M=i("Ro8j"),W=i("zZ42"),x=i("F8Z3"),O=i("ofXK"),_=i("f0Cb"),S=i("kmnG"),w=i("qFsG"),I=i("Xa2L"),j=i("Wp6s"),k=i("FKr1"),R=i("bTqV"),T=i("1YbM");const P=["snav2"],Q=["searchServiceInput"];function F(t,e){1&t&&(p.Wb(0,"div",18),p.Rb(1,"mat-spinner",19),p.Vb())}function L(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-card",20),p.dc("click",(function(){p.Dc(t);const i=e.$implicit;return p.hc().goToSpecifiedAdministration(i)})),p.Wb(1,"div",21),p.Rb(2,"i",22),p.Vb(),p.Wb(3,"span",23),p.Qc(4),p.Vb(),p.Qc(5),p.ic(6,"translate"),p.Vb()}if(2&t){const t=e.$implicit;p.Db(2),p.Fb(t.style),p.Db(2),p.Rc(t.count),p.Db(1),p.Sc("\xa0 ",p.jc(6,5,t.label)," ")}}function E(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",24),p.dc("click",(function(){p.Dc(t);const i=e.$implicit;return p.hc().goToSpecifiedAdministration(i)})),p.ic(1,"translate"),p.Wb(2,"div",25),p.Wb(3,"span",26),p.Rb(4,"i"),p.Vb(),p.Wb(5,"span",27),p.Qc(6),p.ic(7,"translate"),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit;p.oc("joyrideStep",t.id)("title",p.jc(1,6,t.comment)),p.Db(4),p.Gb("avatarCount2 ",t.style,""),p.Db(2),p.Sc(" ",p.jc(7,8,t.label)," ")}}const A=function(t){return{width:t}};let U=(()=>{class t{constructor(t,e,i,a,n,o,s,r,l,d){this.translate=t,this.http=e,this.router=i,this.headerService=a,this.appService=n,this.privilegeService=o,this.latinisePipe=s,this.notify=r,this.functionService=l,this.featureTourService=d,this.loading=!1,this.shortcutsAdmin=[],this.organisationServices=[],this.productionServices=[],this.classementServices=[],this.supervisionServices=[],this.searchService=new c.i,this.administrations=[]}ngOnInit(){this.headerService.setHeader(this.translate.instant("lang.administration")),this.organisationServices=this.privilegeService.getCurrentUserAdministrationsByUnit("organisation"),this.productionServices=this.privilegeService.getCurrentUserAdministrationsByUnit("production"),this.classementServices=this.privilegeService.getCurrentUserAdministrationsByUnit("classement"),this.supervisionServices=this.privilegeService.getCurrentUserAdministrationsByUnit("supervision"),this.administrations=this.organisationServices.concat(this.productionServices).concat(this.classementServices).concat(this.supervisionServices),this.shortcutsAdmin=this.administrations.filter(t=>["admin_users","admin_groups","manage_entities"].indexOf(t.id)>-1).map(t=>Object.assign(Object.assign({},t),{count:0})),this.getNbShortcuts(),this.filteredAdministrations=this.searchService.valueChanges.pipe(Object(r.a)(""),Object(l.a)(t=>this._filter(t,"administrations"))),this.loading=!1,setTimeout(()=>{this.searchServiceInput.nativeElement.focus()},0)}ngAfterViewInit(){"root_visible"!==this.headerService.user.mode&&"root_invisible"!==this.headerService.user.mode||this.featureTourService.init()}goToSpecifiedAdministration(t){!0===t.angular?this.router.navigate([t.route]):window.location.assign(t.route)}_filter(t,e){if("string"==typeof t){const i=this.latinisePipe.transform(t.toLowerCase());return this[e].filter(t=>this.latinisePipe.transform(t.label.toLowerCase()).includes(i))}return this[e]}getNbShortcuts(){this.http.get("../rest/administration/details").pipe(Object(d.a)(t=>{this.functionService.empty(t.count.users)||(this.shortcutsAdmin.filter(t=>"admin_users"===t.id)[0].count=t.count.users),this.functionService.empty(t.count.groups)||(this.shortcutsAdmin.filter(t=>"admin_groups"===t.id)[0].count=t.count.groups),this.functionService.empty(t.count.entities)||(this.shortcutsAdmin.filter(t=>"manage_entities"===t.id)[0].count=t.count.entities)}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(s.a)(!1)))).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(o.c),p.Qb(m.a),p.Qb(f.a),p.Qb(g.a),p.Qb(v.c),p.Qb(y.a),p.Qb(D.a),p.Qb(V.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(P,!0),p.Kc(Q,!0)),2&t&&(p.yc(i=p.ec())&&(e.sidenavRight=i.first),p.yc(i=p.ec())&&(e.searchServiceInput=i.first))},decls:24,vars:22,consts:[[1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],["stepNumber","1","joyrideStep","firstStep","title","demoTour","text","Hi, Welcome to demo tour",1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content",2,"display","flex","flex-direction","column"],["class","loading",4,"ngIf"],[2,"display","grid","grid-template-columns","repeat(auto-fill, minmax(400px, 1fr))","gap","20px","padding","20px"],["class","countCard","matRipple","",3,"click",4,"ngFor","ngForOf"],[2,"padding","10px","font-size","10px","width","250px !important"],["matInput","",3,"formControl","placeholder"],["searchServiceInput",""],[2,"margin","20px","display","grid","grid-template-columns","repeat(auto-fill, minmax(300px, 1fr))","gap","20px","padding","20px","padding-top","0px","margin-top","0px"],["mat-button","","style","font-size:20px;height:80px;",3,"joyrideStep","title","click",4,"ngFor","ngForOf"],["position","end","autoFocus","false",1,"panel-right",2,"overflow-x","hidden",3,"fixedInViewport","opened","mode","ngStyle"],["snav2",""],[1,"loading"],[2,"margin","auto"],["matRipple","",1,"countCard",3,"click"],["mat-card-avatar","",1,"avatarCount",2,"margin-right","10px"],[2,"position","absolute"],[2,"font-size","40px"],["mat-button","",2,"font-size","20px","height","80px",3,"joyrideStep","title","click"],[2,"display","flex","align-items","center"],[2,"padding-right","10px"],[1,"countLabel",2,"white-space","initial","text-align","left"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Wb(1,"mat-sidenav-content"),p.Wb(2,"div",1),p.Wb(3,"div",2),p.Wb(4,"div",3),p.Rb(5,"header-left"),p.Vb(),p.Wb(6,"div",4),p.Rb(7,"header-right"),p.Vb(),p.Vb(),p.Rb(8,"div",5),p.Vb(),p.Wb(9,"div",6),p.Wb(10,"div",7),p.Oc(11,F,2,0,"div",8),p.Wb(12,"div",9),p.Oc(13,L,7,7,"mat-card",10),p.Vb(),p.Rb(14,"mat-divider"),p.Wb(15,"mat-form-field",11),p.Rb(16,"input",12,13),p.Vb(),p.Wb(18,"div",14),p.Oc(19,E,8,10,"button",15),p.ic(20,"sortBy"),p.ic(21,"async"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Rb(22,"mat-sidenav",16,17),p.Vb()),2&t&&(p.Db(3),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(2),p.oc("ngForOf",e.shortcutsAdmin),p.Db(3),p.oc("formControl",e.searchService)("placeholder",e.translate.instant("lang.filterBy")),p.Db(3),p.oc("ngForOf",p.kc(20,15,p.jc(21,18,e.filteredAdministrations),"label")),p.Db(3),p.oc("fixedInViewport",e.appService.getViewMode())("opened",(e.appService.getViewMode(),!1))("mode",e.appService.getViewMode()?"over":"side")("ngStyle",p.vc(20,A,e.appService.getViewMode()?"80%":"30%")))},directives:[C.e,C.f,M.a,W.a,x.a,O.t,O.s,_.a,S.c,w.b,c.d,c.u,c.j,C.d,O.w,I.c,j.a,k.u,j.c,R.b],pipes:[T.a,O.b,h.d],styles:[".adminArea[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap}.adminArea_1[_ngcontent-%COMP%]{flex:1}.adminArea_1[_ngcontent-%COMP%], .adminArea_2[_ngcontent-%COMP%], .adminArea_3[_ngcontent-%COMP%], .adminArea_4[_ngcontent-%COMP%]{overflow:hidden;padding:20px}.loading[_ngcontent-%COMP%]{display:flex;height:100%}.adminArea-label[_ngcontent-%COMP%]{font-size:20px;font-weight:bolder;opacity:.2;text-align:center}.adminArea-button[_ngcontent-%COMP%]{white-space:inherit;height:100px;line-height:20px} .autocompleteServices .mat-optgroup-label{position:-webkit-sticky;position:sticky;top:0;background:#fff;z-index:1}.countCard[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;height:100px;color:#fff;background:#135f7f;cursor:pointer}.avatarCount[_ngcontent-%COMP%]{color:#135f7f;font-size:20px;background:#fff}.avatarCount[_ngcontent-%COMP%], .avatarCount2[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:center;border-radius:40px;padding:10px}.avatarCount2[_ngcontent-%COMP%]{color:#fff;font-size:30px;background:#135f7f;width:55px!important;height:55px!important}.countLabel[_ngcontent-%COMP%]{color:#135f7f;font-size:16px}"]}),t})();var z=i("0IaG"),N=i("M9IT"),H=i("Dh3D"),B=i("I65S"),X=i("rNzc"),G=i("+0xr"),q=i("2c88"),K=i("pLZG"),J=i("XqQ8"),Y=i("SIQe"),Z=i("5cI5"),tt=i("/t3+"),et=i("1jcm"),it=i("w9N8"),at=i("d3UM");function nt(t,e){1&t&&(p.Ub(0),p.Wb(1,"div",18),p.Rb(2,"mat-spinner"),p.Vb(),p.Tb())}function ot(t,e){if(1&t&&(p.Wb(0,"mat-option",32),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t),p.Db(1),p.Sc(" ","\t"===t?"TAB":t," ")}}function st(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",28),p.dc("click",(function(){return p.Dc(t),p.hc(),p.zc(1).click()}))("onFileDropped",(function(e){return p.Dc(t),p.hc(2).dndUploadFile(e)})),p.Wb(1,"div"),p.Qc(2),p.ic(3,"translate"),p.Wb(4,"mat-form-field",29),p.dc("click",(function(e){return p.Dc(t),e.stopPropagation()})),p.Wb(5,"mat-label"),p.Qc(6),p.ic(7,"translate"),p.Vb(),p.Wb(8,"mat-select",30),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).currentDelimiter=e}))("click",(function(e){return p.Dc(t),e.stopPropagation()})),p.Oc(9,ot,2,2,"mat-option",31),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.Db(2),p.Sc(" ",p.jc(3,4,"lang.dndFileCsvDesc")," "),p.Db(4),p.Rc(p.jc(7,6,"lang.delimiter")),p.Db(2),p.oc("ngModel",t.currentDelimiter),p.Db(1),p.oc("ngForOf",t.delimiters)}}function ct(t,e){if(1&t&&(p.Wb(0,"mat-option",32),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t),p.Db(1),p.Sc(" ",t," ")}}function rt(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-header-cell"),p.Rb(1,"i",41),p.ic(2,"translate"),p.Qc(3,"\xa0"),p.Wb(4,"b",42),p.ic(5,"translate"),p.Qc(6),p.Vb(),p.Qc(7," \xa0"),p.Rb(8,"i",43),p.Qc(9,"\xa0 "),p.Rb(10,"i",44),p.ic(11,"translate"),p.Qc(12,"\xa0"),p.Wb(13,"mat-form-field",45),p.dc("click",(function(e){return p.Dc(t),e.stopPropagation()})),p.ic(14,"translate"),p.Wb(15,"mat-select",46),p.dc("ngModelChange",(function(e){p.Dc(t);const i=p.hc().$implicit;return p.hc(3).associatedColmuns[i]=e}))("selectionChange",(function(e){p.Dc(t);const i=p.hc().$implicit;return p.hc(3).changeColumn(i,e.value)})),p.Rb(16,"mat-option",47),p.Oc(17,ct,2,2,"mat-option",31),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc().$implicit,e=p.hc(3);p.Db(1),p.oc("title",p.jc(2,7,"lang.dbColumn")),p.Db(3),p.oc("title",p.jc(5,9,"lang.dbColumn")),p.Db(2),p.Rc(t),p.Db(4),p.oc("title",p.jc(11,11,"lang.csvColumn")),p.Db(3),p.oc("title",p.jc(14,13,"lang.csvColumn")),p.Db(2),p.oc("ngModel",e.associatedColmuns[t]),p.Db(2),p.oc("ngForOf",e.csvColumns)}}function lt(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit,i=p.hc().$implicit;p.Db(1),p.Sc(" ",t[i]," ")}}function dt(t,e){if(1&t&&(p.Ub(0),p.Ub(1,38),p.Oc(2,rt,18,15,"mat-header-cell",39),p.Oc(3,lt,2,1,"mat-cell",40),p.Tb(),p.Tb()),2&t){const t=e.$implicit;p.Db(1),p.oc("matColumnDef",t)}}function bt(t,e){1&t&&p.Rb(0,"mat-header-row")}function pt(t,e){1&t&&p.Rb(0,"mat-row")}function ht(t,e){if(1&t&&(p.Wb(0,"mat-table",33,34),p.Oc(2,dt,4,1,"ng-container",35),p.Oc(3,bt,1,0,"mat-header-row",36),p.Oc(4,pt,1,0,"mat-row",37),p.Vb()),2&t){const t=p.hc(2);p.oc("dataSource",t.dataSource),p.Db(2),p.oc("ngForOf",t.userColmuns),p.Db(1),p.oc("matHeaderRowDef",t.userColmuns),p.Db(1),p.oc("matRowDefColumns",t.userColmuns)}}function ut(t,e){if(1&t){const t=p.Xb();p.Wb(0,"input",19,20),p.dc("change",(function(e){return p.Dc(t),p.hc().uploadCsv(e)})),p.Vb(),p.Oc(2,st,10,8,"div",21),p.Wb(3,"div",22),p.Wb(4,"div",23),p.Rb(5,"mat-paginator",24,25),p.Vb(),p.Vb(),p.Oc(7,ht,5,4,"mat-table",26),p.Rb(8,"div",27),p.ic(9,"translate"),p.Rb(10,"div",27),p.ic(11,"translate")}if(2&t){const t=p.hc();p.Db(2),p.oc("ngIf",0===t.csvData.length),p.Db(3),p.oc("length",100)("hidePageSize",!0)("pageSize",10),p.Db(2),p.oc("ngIf",t.csvData.length>0),p.Db(1),p.oc("innerHTML",p.jc(9,7,"lang.infoImportusers"),p.Ec),p.Db(2),p.oc("innerHTML",p.jc(11,9,"lang.infoImportusers2"),p.Ec)}}function mt(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",48),p.dc("click",(function(){return p.Dc(t),p.hc().onSubmit()})),p.Qc(1),p.ic(2,"translate"),p.Vb()}if(2&t){const t=p.hc();p.oc("disabled",t.loading),p.Db(1),p.Rc(p.jc(2,2,"lang.validate"))}}let ft=(()=>{class t{constructor(t,e,i,a,n,o,s,c,r){this.translate=t,this.http=e,this.notify=i,this.functionsService=a,this.localStorage=n,this.headerService=o,this.dialog=s,this.dialogRef=c,this.data=r,this.loading=!1,this.userColmuns=["id","user_id","firstname","lastname","mail","phone"],this.csvColumns=[],this.delimiters=[";",",","\t"],this.currentDelimiter=";",this.associatedColmuns={},this.dataSource=new G.p(null),this.hasHeader=!0,this.csvData=[],this.userData=[],this.countAll=0,this.countAdd=0,this.countUp=0}ngOnInit(){this.setConfiguration()}changeColumn(t,e){this.userData=[];for(let i=this.hasHeader?1:0;i<this.csvData.length;i++){const a=this.csvData[i];this.userData.push({id:"id"===t?a[this.csvColumns.filter(t=>t===e)[0]]:a[this.associatedColmuns.id],user_id:"user_id"===t?a[this.csvColumns.filter(t=>t===e)[0]]:a[this.associatedColmuns.user_id],firstname:"firstname"===t?a[this.csvColumns.filter(t=>t===e)[0]]:a[this.associatedColmuns.firstname],lastname:"lastname"===t?a[this.csvColumns.filter(t=>t===e)[0]]:a[this.associatedColmuns.lastname],mail:"mail"===t?a[this.csvColumns.filter(t=>t===e)[0]]:a[this.associatedColmuns.mail],phone:"phone"===t?a[this.csvColumns.filter(t=>t===e)[0]]:a[this.associatedColmuns.phone]})}this.countAdd=this.csvData.filter((t,e)=>e>0&&this.functionsService.empty(t[this.associatedColmuns.id])).length,this.countUp=this.csvData.filter((t,e)=>e>0&&!this.functionsService.empty(t[this.associatedColmuns.id])).length,setTimeout(()=>{this.dataSource=new G.p(this.userData),this.dataSource.paginator=this.paginator},0)}uploadCsv(t){if(t.target.files&&t.target.files[0]&&("text/csv"===t.target.files[0].type||"application/vnd.ms-excel"===t.target.files[0].type)){this.loading=!0;let e=[];const i=new FileReader;i.readAsText(t.target.files[0],"ISO-8859-1"),i.onload=t=>{if(e=t.target.result.split("\n"),e=e.filter(t=>""!==t),e[0].split(this.currentDelimiter).map(t=>t.replace(/"/gi,"").trim()).length>=this.userColmuns.length-1){let t=[],i={};this.setCsvColumns(e[0].split(this.currentDelimiter).map(t=>t.replace(/"/gi,"").trim())),this.countAll=this.hasHeader?e.length-1:e.length;for(let a=0;a<e.length;a++)i={},t=e[a].split(this.currentDelimiter).map(t=>t.replace(/"/gi,"").trim()),t.forEach((t,e)=>{i[this.csvColumns[e]]=t}),this.csvData.push(i);this.initData(),this.countAdd=this.csvData.filter((t,e)=>e>0&&this.functionsService.empty(t[this.associatedColmuns.id])).length,this.countUp=this.csvData.filter((t,e)=>e>0&&!this.functionsService.empty(t[this.associatedColmuns.id])).length,this.localStorage.save("importUsersFields_"+this.headerService.user.id,this.currentDelimiter)}else this.notify.error(this.translate.instant("lang.mustAtLeastMinValues"));this.loading=!1}}else this.dialog.open(Y.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.notAllowedExtension")+" !",msg:this.translate.instant("lang.file")+" : <b>"+t.target.files[0].name+"</b>, "+this.translate.instant("lang.type")+" : <b>"+t.target.files[0].type+"</b><br/><br/><u>"+this.translate.instant("lang.allowedExtensions")+"</u> : <br/>text/csv"}})}setCsvColumns(t=null){this.csvColumns=t.filter(t=>this.functionsService.empty(t)).length>0?Object.keys(t).map((t,e)=>""+e):t}toggleHeader(){this.hasHeader=!this.hasHeader,this.countAll=this.hasHeader?this.csvData.length-1:this.csvData.length,this.hasHeader?(this.countAdd=this.csvData.filter((t,e)=>e>0&&this.functionsService.empty(t[this.associatedColmuns.id])).length,this.countUp=this.csvData.filter((t,e)=>e>0&&!this.functionsService.empty(t[this.associatedColmuns.id])).length):(this.countAdd=this.csvData.filter((t,e)=>this.functionsService.empty(t[this.associatedColmuns.id])).length,this.countUp=this.csvData.filter((t,e)=>!this.functionsService.empty(t[this.associatedColmuns.id])).length),this.initData()}initData(){this.userData=[];for(let t=this.hasHeader?1:0;t<this.csvData.length;t++){const e=this.csvData[t];this.associatedColmuns.id=this.csvColumns[0],this.associatedColmuns.user_id=this.csvColumns[1],this.associatedColmuns.firstname=this.csvColumns[2],this.associatedColmuns.lastname=this.csvColumns[3],this.associatedColmuns.mail=this.csvColumns[4],this.associatedColmuns.phone=this.csvColumns[5],this.userData.push({id:e[this.csvColumns[0]],user_id:e[this.csvColumns[1]],firstname:e[this.csvColumns[2]],lastname:e[this.csvColumns[3]],mail:e[this.csvColumns[4]],phone:e[this.csvColumns[5]]})}setTimeout(()=>{this.dataSource=new G.p(this.userData),this.dataSource.paginator=this.paginator},0)}dndUploadFile(t){this.uploadCsv({target:{files:[t[0]]}})}onSubmit(){const t=[];let e="";this.translate.get("lang.confirmImportUsers",{0:this.countAll}).subscribe(t=>{e=t+" ?<br/><br/>",e+=`<ul><li><b>${this.countAdd}</b> ${this.translate.instant("lang.additions")}</li><li><b>${this.countUp}</b> ${this.translate.instant("lang.modifications")}</li></ul>`});let i=this.dialog.open(q.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.import"),msg:e}});i.afterClosed().pipe(Object(K.a)(t=>"ok"===t),Object(d.a)(()=>{this.loading=!0,this.csvData.forEach((e,i)=>{(this.hasHeader&&i>0||!this.hasHeader)&&t.push({id:e[this.associatedColmuns.id],user_id:e[this.associatedColmuns.user_id],firstname:e[this.associatedColmuns.firstname],lastname:e[this.associatedColmuns.lastname],mail:e[this.associatedColmuns.mail],phone:e[this.associatedColmuns.phone]})})}),Object(J.a)(()=>this.http.put("../rest/users/import",{users:t})),Object(d.a)(t=>{let e="";t.warnings.count>0&&(e=`<br/>${t.warnings.count} ${this.translate.instant("lang.withWarnings")}  : <ul>`,t.warnings.details.forEach(t=>{e+=`<li> ${this.translate.instant("lang."+t.lang)} (${this.translate.instant("lang.line")} : ${this.hasHeader?t.index+2:t.index+1})</li>`}),e+="</ul>"),t.errors.count>0&&(e+=`<br/>${t.errors.count} ${this.translate.instant("lang.withErrors")}  : <ul>`,t.errors.details.forEach(t=>{e+=`<li> ${this.translate.instant("lang."+t.lang)} (${this.translate.instant("lang.line")} : ${this.hasHeader?t.index+2:t.index+1})</li>`}),e+="</ul>"),i=this.dialog.open(Y.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.import"),msg:"<b>"+t.success+"</b> / <b>"+this.countAll+"</b> "+this.translate.instant("lang.importedUsers")+"."+e}})}),Object(J.a)(()=>i.afterClosed()),Object(d.a)(()=>{this.dialogRef.close("success")}),Object(b.a)(t=>(this.loading=!1,this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}setConfiguration(){null!==this.localStorage.get("importUsersFields_"+this.headerService.user.id)&&(this.currentDelimiter=this.localStorage.get("importUsersFields_"+this.headerService.user.id))}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(D.a),p.Qb(Z.a),p.Qb(m.a),p.Qb(z.b),p.Qb(z.h),p.Qb(z.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&p.Xc(N.a,!0),2&t&&p.yc(i=p.ec())&&(e.paginator=i.first)},decls:37,vars:28,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"import-tool"],[2,"flex","1"],["color","primary",3,"checked","change"],[2,"flex","1","text-align","center"],["color","primary",1,"fa","fa-users"],["color","primary"],["color","primary",1,"fa","fa-user-plus"],[2,"flex","1","text-align","right"],["color","primary",1,"fa","fa-user-edit"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"divider-modal"],["mat-dialog-actions","",1,"actions"],["mat-raised-button","","mat-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","mat-button","",3,"disabled","mat-dialog-close"],[1,"loader"],["type","file","name","files[]","id","uploadFile","accept",".csv",2,"display","none",3,"change"],["uploadFile",""],["appUploadFileDragDrop","","class","dndFile",3,"click","onFileDropped",4,"ngIf"],[1,"row",2,"margin","0px"],[1,"col-md-12"],[3,"length","hidePageSize","pageSize"],["paginator",""],[3,"dataSource",4,"ngIf"],[1,"alert-message","alert-message-info",2,"min-width","100%",3,"innerHTML"],["appUploadFileDragDrop","",1,"dndFile",3,"click","onFileDropped"],["appearance","outline",2,"font-size","14px",3,"click"],[3,"ngModel","ngModelChange","click"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"dataSource"],["table",""],[4,"ngFor","ngForOf"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],[4,"matHeaderCellDef"],[4,"matCellDef"],["color","primary",1,"fas","fa-database",3,"title"],["color","primary",3,"title"],[1,"fas","fa-arrows-alt-h"],[1,"fas","fa-file-csv",3,"title"],[2,"width","80px !important",3,"title","click"],[3,"ngModel","ngModelChange","selectionChange"],["value",""],["mat-raised-button","","mat-button","","color","primary",3,"disabled","click"]],template:function(t,e){if(1&t&&(p.Wb(0,"div",0),p.Wb(1,"h1",1),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"div",2),p.Wb(5,"mat-toolbar",3),p.Wb(6,"span",4),p.Wb(7,"mat-slide-toggle",5),p.dc("change",(function(){return e.toggleHeader()})),p.Qc(8),p.ic(9,"translate"),p.Vb(),p.Vb(),p.Wb(10,"span",6),p.Rb(11,"i",7),p.Qc(12),p.ic(13,"translate"),p.Wb(14,"b",8),p.Qc(15),p.Vb(),p.Vb(),p.Wb(16,"span",6),p.Rb(17,"i",9),p.Qc(18),p.ic(19,"translate"),p.Wb(20,"b",8),p.Qc(21),p.Vb(),p.Vb(),p.Wb(22,"span",10),p.Rb(23,"i",11),p.Qc(24),p.ic(25,"translate"),p.Wb(26,"b",8),p.Qc(27),p.Vb(),p.Vb(),p.Vb(),p.Oc(28,nt,3,0,"ng-container",12),p.Oc(29,ut,12,11,"ng-template",null,13,p.Pc),p.Vb(),p.Rb(31,"span",14),p.Wb(32,"div",15),p.Oc(33,mt,3,4,"button",16),p.Wb(34,"button",17),p.Qc(35),p.ic(36,"translate"),p.Vb(),p.Vb(),p.Vb()),2&t){const t=p.zc(30);p.Db(2),p.Rc(p.jc(3,16,"lang.usersImport")),p.Db(3),p.Ib("hide",0===e.csvData.length||e.loading),p.Db(2),p.oc("checked",e.hasHeader),p.Db(1),p.Rc(p.jc(9,18,"lang.csvHeader")),p.Db(4),p.Sc("\xa0",p.jc(13,20,"lang.usersOfFile")," : "),p.Db(3),p.Rc(e.countAll),p.Db(3),p.Sc("\xa0",p.jc(19,22,"lang.additions")," : "),p.Db(3),p.Rc(e.countAdd),p.Db(3),p.Sc("\xa0",p.jc(25,24,"lang.modifications")," : "),p.Db(3),p.Rc(e.countUp),p.Db(1),p.oc("ngIf",e.loading)("ngIfElse",t),p.Db(5),p.oc("ngIf",e.csvData.length>0),p.Db(1),p.oc("disabled",e.loading),p.Db(1),p.Rc(p.jc(36,26,"lang.cancel"))}},directives:[z.i,z.f,tt.a,et.a,O.t,z.c,R.b,z.d,I.c,N.a,it.a,S.c,S.g,at.a,c.u,c.x,O.s,k.p,G.o,G.k,G.n,G.c,G.i,G.b,G.h,G.a,G.j,G.m],pipes:[h.d],styles:[".loader[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center;justify-content:center}.hide[_ngcontent-%COMP%]{display:none}.import-tool[_ngcontent-%COMP%]{font-size:14px}.dndFile[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;margin:0;justify-content:center;font-size:30px;opacity:.5!important;cursor:pointer}"]}),t})();var gt=i("mrSG"),vt=i("nYR2");const yt=["listFilter"];function Dt(t,e){1&t&&(p.Wb(0,"div",13),p.Rb(1,"mat-spinner"),p.Vb())}function Vt(t,e){if(1&t&&(p.Wb(0,"mat-option",14),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t),p.Db(1),p.Sc(" ",t," ")}}function Ct(t,e){if(1&t&&(p.Wb(0,"mat-option",14),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t),p.Db(1),p.Sc(" ",t," ")}}function Mt(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",15),p.Wb(1,"mat-form-field",5),p.Wb(2,"mat-label"),p.Qc(3),p.ic(4,"translate"),p.Vb(),p.Wb(5,"mat-select",16),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().exportModel.delimiter=e})),p.ic(6,"translate"),p.Oc(7,Ct,2,2,"mat-option",7),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc();p.Db(3),p.Rc(p.jc(4,5,"lang.delimiter")),p.Db(2),p.pc("placeholder",p.jc(6,7,"lang.delimiter")),p.oc("ngModel",t.exportModel.delimiter)("disabled","csv"!=t.exportModel.format),p.Db(2),p.oc("ngForOf",t.delimiters)}}let Wt=(()=>{class t{constructor(t,e,i,a,n,o){this.translate=t,this.http=e,this.notify=i,this.data=a,this.localStorage=n,this.headerService=o,this.loading=!1,this.loadingExport=!1,this.delimiters=[";",",","TAB"],this.formats=["csv"],this.exportModel={delimiter:";",format:"csv"}}ngOnInit(){return Object(gt.a)(this,void 0,void 0,(function*(){this.setConfiguration()}))}exportData(){this.localStorage.save("exportUsersFields_"+this.headerService.user.id,JSON.stringify(this.exportModel)),this.loadingExport=!0,this.http.put("../rest/users/export",this.exportModel,{responseType:"blob"}).pipe(Object(d.a)(t=>{if("text/html"!==t.type){const e=document.createElement("a");let i,a,n,o;e.href=window.URL.createObjectURL(t),i=new Date,a=i.getDate(),n=i.getMonth()+1,o=i.getFullYear(),a<10&&(a="0"+a),n<10&&(n="0"+n),i=a+"-"+n+"-"+o,e.setAttribute("download","export_users_maarch_"+i+"."+this.exportModel.format.toLowerCase()),document.body.appendChild(e),e.click()}else alert(this.translate.instant("lang.tooMuchDatas"))}),Object(vt.a)(()=>this.loadingExport=!1),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}setConfiguration(){null!==this.localStorage.get("exportUsersFields_"+this.headerService.user.id)&&(this.exportModel.delimiter=JSON.parse(this.localStorage.get("exportUsersFields_"+this.headerService.user.id)).delimiter)}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(z.a),p.Qb(Z.a),p.Qb(m.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&p.Kc(yt,!0),2&t&&p.yc(i=p.ec())&&(e.listFilter=i.first)},decls:24,vars:23,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["mat-dialog-content",""],["class","loader",4,"ngIf"],[1,"row"],["appearance","outline"],[3,"placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","col-md-9",4,"ngIf"],[1,"divider-modal"],["mat-dialog-actions","",1,"actions"],["mat-raised-button","","mat-button","","color","primary",3,"click"],["mat-raised-button","","mat-button","",3,"mat-dialog-close"],[1,"loader"],[3,"value"],[1,"col-md-9"],[3,"placeholder","ngModel","disabled","ngModelChange"]],template:function(t,e){1&t&&(p.Wb(0,"div",0),p.Wb(1,"h1",1),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"div",2),p.Oc(5,Dt,2,0,"div",3),p.Wb(6,"div",4),p.Wb(7,"div"),p.Wb(8,"mat-form-field",5),p.Wb(9,"mat-label"),p.Qc(10),p.ic(11,"translate"),p.Vb(),p.Wb(12,"mat-select",6),p.dc("ngModelChange",(function(t){return e.exportModel.format=t})),p.ic(13,"translate"),p.Oc(14,Vt,2,2,"mat-option",7),p.Vb(),p.Vb(),p.Vb(),p.Oc(15,Mt,8,9,"div",8),p.Vb(),p.Vb(),p.Rb(16,"span",9),p.Wb(17,"div",10),p.Wb(18,"button",11),p.dc("click",(function(){return e.exportData()})),p.Qc(19),p.ic(20,"translate"),p.Vb(),p.Wb(21,"button",12),p.Qc(22),p.ic(23,"translate"),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(2),p.Rc(p.jc(3,13,"lang.exportDatas")),p.Db(3),p.oc("ngIf",e.loadingExport),p.Db(2),p.Ib("col-md-12","csv"!=e.exportModel.format)("col-md-3","csv"==e.exportModel.format),p.Db(3),p.Rc(p.jc(11,15,"lang.format")),p.Db(2),p.pc("placeholder",p.jc(13,17,"lang.format")),p.oc("ngModel",e.exportModel.format),p.Db(2),p.oc("ngForOf",e.formats),p.Db(1),p.oc("ngIf","csv"==e.exportModel.format),p.Db(4),p.Rc(p.jc(20,19,"lang.toExport")),p.Db(3),p.Rc(p.jc(23,21,"lang.cancel")))},directives:[z.i,z.f,O.t,S.c,S.g,at.a,c.u,c.x,O.s,z.c,R.b,z.d,I.c,k.p],pipes:[h.d],styles:[".mat-dialog-container{position:relative}.mat-dialog-content[_ngcontent-%COMP%]{min-height:150px;padding-bottom:10px;overflow-x:hidden}.actions[_ngcontent-%COMP%], .loader[_ngcontent-%COMP%]{justify-content:center}.loader[_ngcontent-%COMP%]{position:absolute;display:flex;width:100%;left:0;top:0;height:100%;background:hsla(0,0%,100%,.6);z-index:1;align-items:center}"]}),t})();var xt=i("pWCv"),Ot=i("6eB1"),_t=i("RmLz");let St=(()=>{class t{constructor(t,e,i,a){this.notify=t,this.headerService=e,this.functionsService=i,this.localStorage=a,this.filters={},this.defaultFilters={admin_users:{sort:"user_id",sortDirection:"asc",page:0,field:""},admin_actions:{sort:"id",sortDirection:"asc",page:0,field:""},admin_baskets:{sort:"basket_id",sortDirection:"asc",page:0,field:""},admin_contacts_groups:{sort:"label",sortDirection:"asc",page:0,field:""},admin_listmodels:{sort:"title",sortDirection:"asc",page:0,field:""},admin_groups:{sort:"group_desc",sortDirection:"asc",page:0,field:""},admin_indexing_models:{sort:"label",sortDirection:"asc",page:0,field:""},admin_notif:{sort:"notification_id",sortDirection:"asc",page:0,field:""},admin_parameters:{sort:"id",sortDirection:"asc",page:0,field:""},admin_priorities:{sort:"label",sortDirection:"asc",page:0,field:""},admin_shippings:{sort:"label",sortDirection:"asc",page:0,field:""},admin_status:{sort:"label_status",sortDirection:"asc",page:0,field:""},admin_tag:{sort:"label",sortDirection:"asc",page:0,field:""},admin_templates:{sort:"template_label",sortDirection:"asc",page:0,field:""},admin_alfresco:{sort:"label",sortDirection:"asc",page:0,field:""},admin_contacts_list:{sort:"lastname",sortDirection:"asc",page:0,field:""},admin_regitered_mail_issuing_site:{sort:"accountNumber",sortDirection:"asc",page:0,field:""},admin_regitered_mail:{sort:"rangeNumber",sortDirection:"asc",page:0,field:""}},this.searchTerm=new c.i(""),this.currentAdminId="",null!==this.localStorage.get("filtersAdmin_"+this.headerService.user.id)&&(this.filters=JSON.parse(this.localStorage.get("filtersAdmin_"+this.headerService.user.id)))}setAdminId(t){this.currentAdminId=t}setDataSource(t,e,i,a,n){this.currentAdminId=t,this.searchTerm=new c.i(""),this.searchTerm.valueChanges.pipe(Object(xt.tap)(t=>{this.setFilter("field",t),this.saveFilter(this.filters[this.currentAdminId]),t=(t=t.trim()).toLowerCase(),setTimeout(()=>{this.dataSource.filter=t},0),this.dataSource.filterPredicate=(t,e)=>this.functionsService.filterUnSensitive(t,e,this.filterColumns)})).subscribe(),this.filterColumns=n,this.dataSource=new G.p(e),this.dataSource.paginator=a,this.dataSource.sortingDataAccessor=this.functionsService.listSortingDataAccessor,this.functionsService.empty(this.getFilter())&&this.saveDefaultFilter(),a.pageIndex=this.getFilter("page"),this.dataSource.sort=i;const o=document.getElementsByClassName("mat-column-"+this.getFilter("sort"))[0];o.click(),"desc"===this.getFilter("sortDirection")&&o.click(),this.searchTerm.setValue(this.getFilter("field")),Object(Ot.merge)(i.sortChange,a.page).pipe(Object(_t.startWith)({}),Object(xt.tap)(()=>{this.saveFilter({sort:i.active,sortDirection:i.direction,page:a.pageIndex,field:this.getFilter("field")})}),Object(X.catchError)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}saveDefaultFilter(){this.saveFilter(this.defaultFilters[this.currentAdminId])}setFilter(t,e){this.filters[this.currentAdminId][t]=e}saveFilter(t){this.filters[this.currentAdminId]=t,this.localStorage.save("filtersAdmin_"+this.headerService.user.id,JSON.stringify(this.filters))}getFilterField(){return this.searchTerm}getDataSource(){return this.dataSource}getFilter(t=null){return this.functionsService.empty(this.filters[this.currentAdminId])?null:this.functionsService.empty(t)?this.functionsService.empty(this.filters[this.currentAdminId])?"":this.filters[this.currentAdminId]:this.functionsService.empty(this.filters[this.currentAdminId][t])?"":this.filters[this.currentAdminId][t]}}return t.\u0275fac=function(e){return new(e||t)(p.ac(y.a),p.ac(m.a),p.ac(D.a),p.ac(Z.a))},t.\u0275prov=p.Mb({token:t,factory:t.\u0275fac}),t})();var wt=i("MutI"),It=i("NFeN"),jt=i("jaxi"),kt=i("Qu3c"),Rt=i("63qU");const Tt=["adminMenuTemplate"];function Pt(t,e){1&t&&p.Rb(0,"mat-divider")}function Qt(t,e){if(1&t&&(p.Wb(0,"mat-nav-list"),p.Wb(1,"h3",11),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"p",19),p.Qc(5),p.ic(6,"translate"),p.Vb(),p.Wb(7,"p",19),p.Qc(8),p.ic(9,"translate"),p.Vb(),p.Wb(10,"p",19),p.Qc(11),p.ic(12,"translate"),p.Vb(),p.Vb()),2&t){const t=p.hc(2);p.Db(2),p.Rc(p.jc(3,7,"lang.quota")),p.Db(3),p.Tc("",p.jc(6,9,"lang.actives")," : ",t.quota.actives,""),p.Db(3),p.Tc("",p.jc(9,11,"lang.inactives")," : ",t.quota.inactives,""),p.Db(3),p.Tc("",p.jc(12,13,"lang.quota")," : ",t.quota.userQuota,"")}}function Ft(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-nav-list"),p.Wb(1,"h3",11),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"a",12),p.Rb(5,"mat-icon",13),p.Wb(6,"p",14),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Wb(9,"a",15),p.dc("click",(function(){return p.Dc(t),p.hc().openUsersExportModal()})),p.Rb(10,"mat-icon",16),p.Wb(11,"p",14),p.Qc(12),p.ic(13,"translate"),p.Vb(),p.Vb(),p.Wb(14,"a",15),p.dc("click",(function(){return p.Dc(t),p.hc().openUsersImportModal()})),p.Rb(15,"mat-icon",17),p.Wb(16,"p",14),p.Qc(17),p.ic(18,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Rb(19,"mat-divider"),p.Oc(20,Pt,1,0,"mat-divider",18),p.Oc(21,Qt,13,15,"mat-nav-list",18)}if(2&t){const t=p.hc();p.Db(2),p.Rc(p.jc(3,6,"lang.actions")),p.Db(5),p.Sc(" ",p.jc(8,8,"lang.add")," "),p.Db(5),p.Sc(" ",p.jc(13,10,"lang.usersExport")," "),p.Db(5),p.Sc(" ",p.jc(18,12,"lang.usersImport")," "),p.Db(3),p.oc("ngIf",t.quota.userQuota),p.Db(1),p.oc("ngIf",t.quota.userQuota)}}function Lt(t,e){1&t&&(p.Wb(0,"div",20),p.Rb(1,"mat-spinner",21),p.Vb())}function Et(t,e){if(1&t&&(p.Wb(0,"mat-header-cell",48),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=p.hc(2);p.Ib("hide-for-mobile",t.appService.getViewMode()),p.Db(1),p.Sc("",p.jc(2,3,"lang.technicalId")," ")}}function At(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.Ib("hide-for-mobile",i.appService.getViewMode()),p.Db(1),p.Sc(" ",t.id," ")}}function Ut(t,e){if(1&t&&(p.Wb(0,"mat-header-cell",48),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=p.hc(2);p.Ib("hide-for-mobile",t.appService.getViewMode()),p.Db(1),p.Rc(p.jc(2,3,"lang.id"))}}function $t(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.Ib("hide-for-mobile",i.appService.getViewMode()),p.Db(1),p.Sc(" ",t.user_id," ")}}function zt(t,e){1&t&&(p.Wb(0,"mat-header-cell",48),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.lastname")))}function Nt(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.lastname," ")}}function Ht(t,e){1&t&&(p.Wb(0,"mat-header-cell",48),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.firstname")))}function Bt(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.firstname," ")}}function Xt(t,e){1&t&&(p.Wb(0,"mat-header-cell",48),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.status")))}const Gt=function(){return["SPD","ABS"]},qt=function(t,e){return{statusUserLabelWarn:t,statusUserLabelPrimary:e}};function Kt(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Wb(1,"span",49),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.oc("ngClass",p.wc(6,qt,p.uc(4,Gt).indexOf(t.status)>-1,-1==p.uc(5,Gt).indexOf(t.status))),p.Db(1),p.Rc(p.jc(3,2,"lang.user"+t.status))}}function Jt(t,e){if(1&t&&(p.Wb(0,"mat-header-cell",48),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=p.hc(2);p.Ib("hide-for-mobile",t.appService.getViewMode()),p.Db(1),p.Rc(p.jc(2,3,"lang.email"))}}function Yt(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.Ib("hide-for-mobile",i.appService.getViewMode()),p.Db(1),p.Sc(" ",t.mail," ")}}function Zt(t,e){1&t&&p.Rb(0,"mat-header-cell")}const te=function(){return["root_visible","root_invisible"]};function ee(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",55),p.dc("click",(function(e){p.Dc(t);const i=p.hc().$implicit,a=p.hc(2);return e.stopPropagation(),a.deleteUser(i,"suspend")})),p.ic(1,"translate"),p.Rb(2,"mat-icon",56),p.Vb()}if(2&t){const t=p.hc().$implicit,e=p.hc(2);p.pc("matTooltip",p.jc(1,2,"lang.suspend")),p.oc("disabled",t.id===e.user.id||p.uc(4,te).indexOf(t.mode)>-1&&"standard"===e.headerService.user.mode)}}function ie(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",57),p.dc("click",(function(e){p.Dc(t);const i=p.hc().$implicit,a=p.hc(2);return e.stopPropagation(),a.activateUser(i)})),p.ic(1,"translate"),p.Rb(2,"mat-icon",58),p.Vb()}if(2&t){const t=p.hc().$implicit,e=p.hc(2);p.pc("matTooltip",p.jc(1,2,"lang.authorize")),p.oc("disabled",p.uc(4,te).indexOf(t.mode)>-1&&"standard"===e.headerService.user.mode)}}function ae(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-cell",50),p.Oc(1,ee,3,5,"button",51),p.Oc(2,ie,3,5,"button",52),p.Wb(3,"button",53),p.dc("click",(function(i){p.Dc(t);const a=e.$implicit,n=p.hc(2);return i.stopPropagation(),n.deleteUser(a,"delete")})),p.ic(4,"translate"),p.Rb(5,"mat-icon",54),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit,i=p.hc(2);p.Db(1),p.oc("ngIf","SPD"!=t.status),p.Db(1),p.oc("ngIf","SPD"==t.status),p.Db(1),p.pc("matTooltip",p.jc(4,4,"lang.delete")),p.oc("disabled",t.id===i.user.id||p.uc(6,te).indexOf(t.mode)>-1)}}function ne(t,e){1&t&&p.Rb(0,"mat-header-row")}function oe(t,e){if(1&t&&(p.Rb(0,"mat-row",59),p.ic(1,"translate")),2&t){const t=e.$implicit;p.Ib("admin",p.uc(6,te).indexOf(t.mode)>-1),p.qc("routerLink","/administration/users/",t.id,""),p.pc("matTooltip",p.jc(1,4,"lang.view"))}}function se(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-card",22),p.Wb(1,"div",23),p.Wb(2,"div",24),p.Wb(3,"mat-form-field"),p.Rb(4,"input",25),p.ic(5,"translate"),p.Wb(6,"mat-button-toggle",26),p.dc("click",(function(e){p.Dc(t);const i=p.hc();return e.stopPropagation(),i.toggleWebserviceAccount()})),p.ic(7,"translate"),p.Rb(8,"mat-icon",27),p.Vb(),p.Vb(),p.Vb(),p.Wb(9,"div",24),p.Rb(10,"mat-paginator",28,29),p.Vb(),p.Vb(),p.Wb(12,"mat-table",30,31),p.Ub(14,32),p.Oc(15,Et,3,5,"mat-header-cell",33),p.Oc(16,At,2,3,"mat-cell",34),p.Tb(),p.Ub(17,35),p.Oc(18,Ut,3,5,"mat-header-cell",33),p.Oc(19,$t,2,3,"mat-cell",34),p.Tb(),p.Ub(20,36),p.Oc(21,zt,3,3,"mat-header-cell",37),p.Oc(22,Nt,2,1,"mat-cell",38),p.Tb(),p.Ub(23,39),p.Oc(24,Ht,3,3,"mat-header-cell",37),p.Oc(25,Bt,2,1,"mat-cell",38),p.Tb(),p.Ub(26,40),p.Oc(27,Xt,3,3,"mat-header-cell",37),p.Oc(28,Kt,4,9,"mat-cell",38),p.Tb(),p.Ub(29,41),p.Oc(30,Jt,3,5,"mat-header-cell",33),p.Oc(31,Yt,2,3,"mat-cell",34),p.Tb(),p.Ub(32,42),p.Oc(33,Zt,1,0,"mat-header-cell",43),p.Oc(34,ae,6,7,"mat-cell",44),p.Tb(),p.Oc(35,ne,1,0,"mat-header-row",45),p.Oc(36,oe,2,7,"mat-row",46),p.Vb(),p.Wb(37,"div",47),p.Qc(38),p.ic(39,"translate"),p.Vb(),p.Vb()}if(2&t){const t=p.hc();p.Db(4),p.pc("placeholder",p.jc(5,12,"lang.filterBy")),p.oc("formControl",t.adminService.getFilterField()),p.Db(2),p.pc("title",p.jc(7,14,"lang.displayWebserviceAccount")),p.oc("checked",t.withWebserviceAccount),p.Db(4),p.oc("length",100)("hidePageSize",!0)("pageSize",10),p.Db(2),p.oc("dataSource",t.adminService.getDataSource()),p.Db(23),p.oc("matHeaderRowDef",t.displayedColumns),p.Db(1),p.oc("matRowDefColumns",t.displayedColumns),p.Db(2),p.Tc(" ",t.data.length," ",p.jc(39,16,"lang.usersAlt"),"")}}const ce=function(){return["/rest/autocomplete/users"]};function re(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",10),p.Wb(1,"plugin-autocomplete",11),p.dc("triggerEvent",(function(i){p.Dc(t);const a=e.index;return p.hc(3).setRedirectUserListModels(a,i)})),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit,i=p.hc(3);p.pc("id",t.object_id),p.Db(1),p.oc("labelPlaceholder",i.translate.instant("lang.newDest")+" : "+t.title)("labelList",i.translate.instant("lang.availableUsers"))("routeDatas",p.uc(6,ce))("targetSearchKey","idToDisplay")("subInfoKey","descriptionToDisplay")}}function le(t,e){if(1&t&&(p.Ub(0),p.Wb(1,"h2"),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"div",7),p.Wb(5,"b"),p.Qc(6),p.Vb(),p.Qc(7,"\xa0"),p.Rb(8,"span",8),p.Qc(9," : "),p.Vb(),p.Oc(10,re,2,7,"div",9),p.Tb()),2&t){const t=p.hc(2);p.Db(2),p.Rc(p.jc(3,5,"lang.redirectUserListDiff")),p.Db(4),p.Tc("",t.data.userDestRedirect.firstname," ",t.data.userDestRedirect.lastname,""),p.Db(2),p.oc("innerHTML",t.translate.instant("lang.chooseNewDest"),p.Ec),p.Db(2),p.oc("ngForOf",t.data.redirectListModels)}}function de(t,e){if(1&t){const t=p.Xb();p.Ub(0),p.Wb(1,"h2"),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"div",7),p.Wb(5,"b"),p.Qc(6),p.Vb(),p.Qc(7,"\xa0"),p.Rb(8,"span",8),p.Qc(9," : "),p.Vb(),p.Wb(10,"div",10),p.Wb(11,"plugin-autocomplete",11),p.dc("triggerEvent",(function(e){return p.Dc(t),p.hc(2).setRedirectUserRes(e)})),p.Vb(),p.Vb(),p.Tb()}if(2&t){const t=p.hc(2);p.Db(2),p.Rc(p.jc(3,10,"lang.redirectUserListInstances")),p.Db(4),p.Tc("",t.data.userDestRedirect.firstname," ",t.data.userDestRedirect.lastname,""),p.Db(2),p.oc("innerHTML",t.translate.instant("lang.chooseNewDestUser"),p.Ec),p.Db(2),p.pc("id",t.data.userDestRedirect.user_id),p.Db(1),p.oc("labelPlaceholder",t.translate.instant("lang.newDestRes"))("labelList",t.translate.instant("lang.availableUsers"))("routeDatas",p.uc(12,ce))("targetSearchKey","idToDisplay")("subInfoKey","descriptionToDisplay")}}function be(t,e){if(1&t&&(p.Wb(0,"b"),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=p.hc(3);p.Db(1),p.Uc("",p.jc(2,3,"lang.delete")," ",t.data.userDestRedirect.firstname," ",t.data.userDestRedirect.lastname,"")}}function pe(t,e){if(1&t&&(p.Wb(0,"b"),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=p.hc(3);p.Db(1),p.Uc("",p.jc(2,3,"lang.suspend")," ",t.data.userDestRedirect.firstname," ",t.data.userDestRedirect.lastname,"")}}function he(t,e){if(1&t&&(p.Ub(0),p.Wb(1,"div",12),p.Oc(2,be,3,5,"b",2),p.Qc(3,"\xa0 "),p.Oc(4,pe,3,5,"b",2),p.Qc(5,"\xa0 "),p.Vb(),p.Tb()),2&t){const t=p.hc(2);p.Db(2),p.oc("ngIf","delete"==t.data.userDestRedirect.actionMode),p.Db(2),p.oc("ngIf","suspend"==t.data.userDestRedirect.actionMode)}}function ue(t,e){if(1&t&&(p.Ub(0),p.Oc(1,le,11,7,"ng-container",2),p.Oc(2,de,12,13,"ng-container",2),p.Oc(3,he,6,2,"ng-container",2),p.Tb()),2&t){const t=p.hc();p.Db(1),p.oc("ngIf",t.data.inDiffListDest),p.Db(1),p.oc("ngIf",t.data.isResDestUser),p.Db(1),p.oc("ngIf",!t.data.inDiffListDest&&!t.data.isResDestUser)}}function me(t,e){if(1&t&&(p.Wb(0,"mat-list-item"),p.Wb(1,"mat-icon",17),p.Rb(2,"i",18),p.Vb(),p.Wb(3,"p",15),p.Wb(4,"span"),p.Qc(5),p.Vb(),p.Vb(),p.Vb()),2&t){const t=e.$implicit;p.Db(5),p.Sc(" ",t," ")}}function fe(t,e){if(1&t&&(p.Wb(0,"div",14),p.Wb(1,"mat-list"),p.Wb(2,"p",15),p.Qc(3),p.ic(4,"translate"),p.Vb(),p.Oc(5,me,6,1,"mat-list-item",16),p.Vb(),p.Vb()),2&t){const t=p.hc(2);p.Db(3),p.Rc(p.jc(4,2,"lang.diffusionList")),p.Db(2),p.oc("ngForOf",t.data.listTemplateEntities)}}function ge(t,e){if(1&t&&(p.Wb(0,"mat-list-item"),p.Wb(1,"mat-icon",17),p.Rb(2,"i",19),p.Vb(),p.Wb(3,"p",15),p.Wb(4,"span"),p.Qc(5),p.Vb(),p.Vb(),p.Vb()),2&t){const t=e.$implicit;p.Db(5),p.Sc(" ",t," ")}}function ve(t,e){if(1&t&&(p.Wb(0,"div",14),p.Wb(1,"mat-list"),p.Wb(2,"p",15),p.Qc(3),p.ic(4,"translate"),p.Vb(),p.Oc(5,ge,6,1,"mat-list-item",16),p.Vb(),p.Vb()),2&t){const t=p.hc(2);p.Db(3),p.Rc(p.jc(4,2,"lang.mailEntitiesList")),p.Db(2),p.oc("ngForOf",t.data.listInstanceEntities)}}function ye(t,e){if(1&t&&(p.Ub(0),p.Wb(1,"div",7),p.Wb(2,"p"),p.Rb(3,"span",8),p.Wb(4,"b"),p.Qc(5),p.Vb(),p.Qc(6,"\xa0"),p.Vb(),p.Wb(7,"p"),p.Rb(8,"span",8),p.Vb(),p.Vb(),p.Oc(9,fe,6,4,"div",13),p.Oc(10,ve,6,4,"div",13),p.Tb()),2&t){const t=p.hc();p.Db(3),p.oc("innerHTML",t.translate.instant("lang.userIsNotDeletable"),p.Ec),p.Db(2),p.Tc("",t.data.userDestRedirect.firstname," ",t.data.userDestRedirect.lastname,""),p.Db(3),p.oc("innerHTML",t.translate.instant("lang.userIsDeletableBy"),p.Ec),p.Db(1),p.oc("ngIf",t.data.inTemplateList),p.Db(1),p.oc("ngIf",t.data.inInstanceList)}}function De(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",20),p.dc("click",(function(){p.Dc(t);const e=p.hc();return e.dialogRef.close(e.data)})),p.Qc(1),p.ic(2,"translate"),p.ic(3,"translate"),p.Vb()}if(2&t){const t=p.hc();p.oc("disabled",!t.sendFunction()),p.Db(1),p.Tc("",p.jc(2,3,"lang.delete")," ",p.jc(3,5,"lang.user"),"")}}function Ve(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",21),p.dc("click",(function(){p.Dc(t);const e=p.hc();return e.dialogRef.close(e.data)})),p.Qc(1),p.ic(2,"translate"),p.ic(3,"translate"),p.Vb()}if(2&t){const t=p.hc();p.oc("disabled",!t.sendFunction()),p.Db(1),p.Tc("",p.jc(2,3,"lang.suspend")," ",p.jc(3,5,"lang.user"),"")}}function Ce(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",22),p.dc("click",(function(){return p.Dc(t),p.hc().dialogRef.close()})),p.Qc(1),p.ic(2,"translate"),p.Vb()}2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.close")))}let Me=(()=>{class t{constructor(t,e,i,a,n,o,s,c,r){this.translate=t,this.http=e,this.notify=i,this.dialog=a,this.headerService=n,this.appService=o,this.functions=s,this.adminService=c,this.viewContainerRef=r,this.loading=!0,this.updateListModel=!0,this.updateListInstance=!0,this.data=[],this.config={},this.userDestRedirect={},this.userDestRedirectModels=[],this.listinstances=[],this.quota={},this.user={},this.withWebserviceAccount=!1,this.webserviceAccounts=[],this.noWebserviceAccounts=[],this.displayedColumns=["id","user_id","lastname","firstname","status","mail","actions"],this.filterColumns=["id","user_id","lastname","firstname","mail"]}ngOnInit(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.users")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.user=this.headerService.user,this.getData()}getData(){this.webserviceAccounts=[],this.noWebserviceAccounts=[],this.data=[],this.http.get("../rest/users").pipe(Object(xt.tap)(t=>{this.data=t.users,this.data.forEach(t=>{t.statusLabel=this.translate.instant("lang.user"+t.status),"rest"===t.mode?this.webserviceAccounts.push(t):this.noWebserviceAccounts.push(t)}),this.data=this.noWebserviceAccounts,this.quota=t.quota,this.quota.actives>this.quota.userQuota&&this.notify.error(this.translate.instant("lang.quotaExceeded")),this.loading=!1,setTimeout(()=>{this.adminService.setDataSource("admin_users",this.data,this.sort,this.paginator,this.filterColumns)},0)}),Object(X.catchError)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}activateUser(t){confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.authorize")+" \xab "+t.user_id+" \xbb")&&(t.status="OK",this.http.put("../rest/users/"+t.id,t).subscribe(()=>{this.notify.success(this.translate.instant("lang.userAuthorized")),this.quota.userQuota&&(this.quota.inactives--,this.quota.actives++,this.quota.actives>this.quota.userQuota&&this.notify.error(this.translate.instant("lang.quotaExceeded")))},e=>{t.status="SPD",this.notify.error(e.error.errors)}))}deleteUser(t,e){t.actionMode=e,this.http.get("../rest/users/"+t.id+"/isDeletable").subscribe(e=>{e&&e.hasOwnProperty("errors")?this.notify.error(e.errors):(t.isDeletable=e.isDeletable,this.config=e.isDeletable?{panelClass:"maarch-modal",data:{userDestRedirect:t,isDeletable:e.isDeletable,redirectListInstances:e.listInstances,redirectListModels:e.listTemplates}}:{panelClass:"maarch-modal",data:{userDestRedirect:t,isDeletable:e.isDeletable,listInstanceEntities:e.listInstanceEntities,listTemplateEntities:e.listTemplateEntities}},this.dialogRef=this.dialog.open(We,this.config),this.dialogRef.afterClosed().subscribe(e=>{e&&t.isDeletable&&(t.inDiffListDest=e.inDiffListDest,t.isResDestUser=e.isResDestUser,e.inDiffListDest&&(t.redirectListModels=e.redirectListModels),e.isResDestUser&&(t.redirectDestResUserId=e.redirectDestResUserId,e.redirectListInstances.forEach(e=>{e.listInstances.forEach(e=>{"dest"===e.item_mode&&e.item_id===t.user_id&&(e.item_id=t.redirectDestResUserId)})}),t.redirectListInstances=e.redirectListInstances),t.inDiffListDest&&t.isResDestUser?this.http.put("../rest/listTemplates/entityDest/itemId/"+t.id,t).subscribe(()=>{this.http.put("../rest/listinstances",t.redirectListInstances).subscribe(e=>{null!=e&&e.errors?this.notify.error(e.errors):"delete"===t.actionMode?this.http.delete("../rest/users/"+t.id).subscribe(()=>{for(const e in this.data)this.data[e].id==t.id&&this.data.splice(Number(e),1);this.adminService.setDataSource("admin_users",this.data,this.sort,this.paginator,this.filterColumns),this.quota.userQuota&&"SPD"!==t.status?this.quota.actives--:this.quota.userQuota&&"SPD"===t.status&&this.quota.inactives--,this.notify.success(this.translate.instant("lang.userDeleted")+" \xab "+t.user_id+" \xbb")},t=>{this.notify.error(t.error.errors)}):"suspend"===t.actionMode&&this.http.put("../rest/users/"+t.id+"/suspend",t).subscribe(()=>{t.status="SPD",this.notify.success(this.translate.instant("lang.userSuspended")),this.quota.userQuota&&(this.quota.inactives++,this.quota.actives--)},e=>{t.status="OK",this.notify.error(e.error.errors)})},t=>{this.notify.error(t.error.errors)})},t=>{this.notify.error(t.error.errors)}):t.inDiffListDest&&!t.isResDestUser?this.http.put("../rest/listTemplates/entityDest/itemId/"+t.id,t).subscribe(()=>{"delete"===t.actionMode?this.http.delete("../rest/users/"+t.id).subscribe(()=>{for(const e in this.data)this.data[e].id==t.id&&this.data.splice(Number(e),1);this.adminService.setDataSource("admin_users",this.data,this.sort,this.paginator,this.filterColumns),this.quota.userQuota&&"OK"===t.status?this.quota.actives--:this.quota.userQuota&&"SPD"===t.status&&this.quota.inactives--,this.notify.success(this.translate.instant("lang.userDeleted")+" \xab "+t.user_id+" \xbb")},t=>{this.notify.error(t.error.errors)}):"suspend"===t.actionMode&&this.http.put("../rest/users/"+t.id+"/suspend",t).subscribe(()=>{t.status="SPD",this.notify.success(this.translate.instant("lang.userSuspended")),this.quota.userQuota&&(this.quota.inactives++,this.quota.actives--)},e=>{t.status="OK",this.notify.error(e.error.errors)})},t=>{this.notify.error(t.error.errors)}):!t.inDiffListDest&&t.isResDestUser?this.http.put("../rest/listinstances",t.redirectListInstances).subscribe(e=>{e&&e.hasOwnProperty("errors")?this.notify.error(e.errors):"delete"===t.actionMode?this.http.delete("../rest/users/"+t.id).subscribe(()=>{for(const e in this.data)this.data[e].id===t.id&&this.data.splice(Number(e),1);this.adminService.setDataSource("admin_users",this.data,this.sort,this.paginator,this.filterColumns),this.quota.userQuota&&"OK"===t.status?this.quota.actives--:this.quota.userQuota&&"SPD"===t.status&&this.quota.inactives--,this.notify.success(this.translate.instant("lang.userDeleted")+" \xab "+t.user_id+" \xbb")},t=>{this.notify.error(t.error.errors)}):"suspend"===t.actionMode&&this.http.put("../rest/users/"+t.id+"/suspend",t).subscribe(()=>{t.status="SPD",this.notify.success(this.translate.instant("lang.userSuspended")),this.quota.userQuota&&(this.quota.inactives++,this.quota.actives--)},e=>{t.status="OK",this.notify.error(e.error.errors)})},t=>{this.notify.error(t.error.errors)}):t.inDiffListDest||t.isResDestUser||("delete"===t.actionMode?this.http.delete("../rest/users/"+t.id).subscribe(()=>{for(const e in this.data)this.data[e].id==t.id&&this.data.splice(Number(e),1);this.adminService.setDataSource("admin_users",this.data,this.sort,this.paginator,this.filterColumns),this.quota.userQuota&&"OK"===t.status?this.quota.actives--:this.quota.userQuota&&"SPD"===t.status&&this.quota.inactives--,this.notify.success(this.translate.instant("lang.userDeleted")+" \xab "+t.user_id+" \xbb")},t=>{this.notify.error(t.error.errors)}):"suspend"===t.actionMode&&this.http.put("../rest/users/"+t.id+"/suspend",t).subscribe(()=>{t.status="SPD",this.notify.success(this.translate.instant("lang.userSuspended")),this.quota.userQuota&&(this.quota.inactives++,this.quota.actives--)},e=>{t.status="OK",this.notify.error(e.error.errors)})))}))},t=>{this.notify.error(t.error.errors)})}toggleWebserviceAccount(){this.withWebserviceAccount=!this.withWebserviceAccount,this.data=this.withWebserviceAccount?this.webserviceAccounts:this.noWebserviceAccounts,this.adminService.setDataSource("admin_users",this.data,this.sort,this.paginator,this.filterColumns)}openUsersImportModal(){this.dialog.open(ft,{disableClose:!0,width:"99vw",maxWidth:"99vw",panelClass:"maarch-full-height-modal"}).afterClosed().pipe(Object(K.a)(t=>"success"===t),Object(xt.tap)(()=>{this.getData()}),Object(X.catchError)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}openUsersExportModal(){this.dialog.open(Wt,{panelClass:"maarch-modal",width:"800px",autoFocus:!1})}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(z.b),p.Qb(m.a),p.Qb(f.a),p.Qb(D.a),p.Qb(St),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(Tt,!0),p.Xc(N.a,!0),p.Xc(H.a,!0)),2&t&&(p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.paginator=i.first),p.yc(i=p.ec())&&(e.sort=i.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/users/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],["mat-list-item","",3,"click"],["color","primary","mat-list-icon","",1,"fas","fa-file-export"],["color","primary","mat-list-icon","",1,"fas","fa-file-import"],[4,"ngIf"],["mat-line","",2,"margin-left","20px"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],["matSuffix","",1,"webserviceAccount",3,"checked","title","click"],["fontSet","fas","fontIcon","fa-user-shield fa-2x",2,"margin-left","-2px","margin-top","-4px"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","id"],["mat-sort-header","",3,"hide-for-mobile",4,"matHeaderCellDef"],[3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","user_id"],["matColumnDef","lastname"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","firstname"],["matColumnDef","status"],["matColumnDef","mail"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip","admin",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header",""],[1,"label",3,"ngClass"],[2,"justify-content","flex-end"],["mat-icon-button","","color","primary",3,"disabled","matTooltip","click",4,"ngIf"],["mat-icon-button","","color","accent",3,"matTooltip","disabled","click",4,"ngIf"],["mat-icon-button","","color","warn","data-toggle","modal","data-target","#changeDiffListDest",3,"disabled","matTooltip","click"],[1,"fa","fa-trash-alt","fa-2x"],["mat-icon-button","","color","primary",3,"disabled","matTooltip","click"],["aria-hidden","true",1,"fa","fa-pause","fa-2x"],["mat-icon-button","","color","accent",3,"matTooltip","disabled","click"],["aria-hidden","true",1,"fa","fa-check","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,Ft,22,14,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,Lt,2,0,"div",9),p.Oc(14,se,40,18,"mat-card",10),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading))},directives:[C.e,C.f,M.a,x.a,O.t,wt.h,wt.g,wt.d,o.f,It.a,wt.c,k.l,_.a,I.c,j.a,S.c,w.b,c.d,c.u,c.j,jt.a,S.j,N.a,G.o,H.a,G.c,G.i,G.b,G.k,G.n,G.h,H.b,G.a,O.q,R.b,kt.b,G.j,G.m,o.d],pipes:[h.d],styles:["button[_ngcontent-%COMP%]:disabled{opacity:.3!important}.statusUserLabelWarn[_ngcontent-%COMP%]{color:#8e3e52}.statusUserLabelPrimary[_ngcontent-%COMP%]{color:#135f7f}.webserviceAccount[_ngcontent-%COMP%]{color:#666;width:37px;height:37px;font-size:x-small;border-radius:18px!important}.mat-button-toggle-checked[_ngcontent-%COMP%]{background-color:#f99830!important;color:#fff}.admin[_ngcontent-%COMP%]{font-weight:700}"]}),t})(),We=(()=>{class t{constructor(t,e,i,a,n){this.translate=t,this.http=e,this.data=i,this.dialogRef=a,this.notify=n,this.loadModel=!1,this.loadInstance=!1,this.modalTitle=this.translate.instant("lang.confirmAction")}ngOnInit(){this.data.isDeletable?(this.data.redirectListModels.length>0&&(this.data.inDiffListDest=!0),this.data.redirectListInstances.length>0&&(this.data.isResDestUser=!0)):(this.modalTitle=this.translate.instant("delete"===this.data.userDestRedirect.actionMode?"lang.unableToDelete":"lang.unableToSuspend"),this.data.listTemplateEntities.length>0&&(this.data.inTemplateList=!0),this.data.listInstanceEntities.length>0&&(this.data.inInstanceList=!0))}setRedirectUserListModels(t,e){this.data.userDestRedirect.user_id!=e.id?this.data.redirectListModels[t].redirectUserId=e.id:(this.data.redirectListModels[t].redirectUserId=null,this.notify.error(this.translate.instant("lang.userUnauthorized")))}setRedirectUserRes(t){this.data.userDestRedirect.user_id!=t.id?this.data.redirectDestResUserId=t.id:(this.data.redirectDestResUserId=null,this.notify.error(this.translate.instant("lang.userUnauthorized")))}sendFunction(){let t=!0;return this.data.inDiffListDest&&this.data.redirectListModels.forEach(e=>{e.redirectUserId||(t=!1)}),this.data.isResDestUser&&(this.data.redirectDestResUserId||(t=!1)),t}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(z.a),p.Qb(z.h),p.Qb(y.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],decls:11,vars:6,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],[4,"ngIf"],[1,"divider-modal"],["mat-raised-button","","color","warn","type","submit","class","btn btn-danger",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",3,"click",4,"ngIf"],["role","alert",1,"alert-message","alert-message-info"],[3,"innerHTML"],["class","form-group",3,"id",4,"ngFor","ngForOf"],[1,"form-group",3,"id"],["singleMode","","required","",3,"labelPlaceholder","labelList","routeDatas","targetSearchKey","subInfoKey","triggerEvent"],["role","alert",1,"alert"],["class","modal-body","class","col-md-6",4,"ngIf"],[1,"col-md-6"],["mat-line",""],[4,"ngFor","ngForOf"],["mat-list-icon",""],["color","primary",1,"fa","fa-share-alt"],["color","primary",1,"fa","fa-inbox"],["mat-raised-button","","color","warn","type","submit",1,"btn","btn-danger",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"click"]],template:function(t,e){1&t&&(p.Wb(0,"div",0),p.Wb(1,"h1",1),p.Qc(2),p.Vb(),p.Wb(3,"mat-dialog-content"),p.Oc(4,ue,4,3,"ng-container",2),p.Oc(5,ye,11,6,"ng-container",2),p.Vb(),p.Rb(6,"span",3),p.Wb(7,"mat-dialog-actions"),p.Oc(8,De,4,7,"button",4),p.Oc(9,Ve,4,7,"button",5),p.Oc(10,Ce,3,3,"button",6),p.Vb(),p.Vb()),2&t&&(p.Db(2),p.Rc(e.modalTitle),p.Db(2),p.oc("ngIf",e.data.isDeletable),p.Db(1),p.oc("ngIf",!e.data.isDeletable),p.Db(3),p.oc("ngIf","delete"==e.data.userDestRedirect.actionMode&&e.data.isDeletable),p.Db(1),p.oc("ngIf","suspend"==e.data.userDestRedirect.actionMode&&e.data.isDeletable),p.Db(1),p.oc("ngIf",!e.data.isDeletable))},directives:[z.i,z.f,O.t,z.c,O.s,Rt.a,wt.a,k.l,wt.d,It.a,wt.c,R.b],pipes:[h.d],styles:["mat-icon[_ngcontent-%COMP%]{height:auto!important}.alert-message[_ngcontent-%COMP%]{max-width:100%}"]}),t})();var xe=i("0EQZ");function Oe(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-list"),p.Wb(1,"mat-list-item"),p.Rb(2,"mat-icon",8),p.Wb(3,"h4",9),p.Qc(4),p.Vb(),p.Wb(5,"p",10),p.Qc(6),p.Vb(),p.Wb(7,"button",11),p.dc("click",(function(){return p.Dc(t),p.hc().unlinkMaarchParapheurAccount()})),p.Rb(8,"mat-icon",12),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc();p.Db(2),p.Lc("background-image","url("+t.externalUser.picture+")"),p.Db(2),p.Tc("",t.externalUser.firstname," ",t.externalUser.lastname,""),p.Db(2),p.Rc(t.externalUser.email),p.Db(1),p.oc("title",t.translate.instant("lang.unlinkAccount"))}}function _e(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-form-field"),p.Wb(1,"input",13),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().externalUser.login=e})),p.ic(2,"translate"),p.Vb(),p.Vb()}if(2&t){const t=p.hc();p.Db(1),p.pc("placeholder",p.jc(2,2,"lang.newLoginInMaarchParapheur")),p.oc("ngModel",t.externalUser.login)}}function Se(t,e){if(1&t&&p.Rb(0,"div",14),2&t){const t=p.hc();p.oc("innerHTML",t.translate.instant("lang.maarchParapheurAccountMsg")+" <b>"+t.externalUser.login+"</b> "+t.translate.instant("lang.maarchParapheurAccountMsg2"),p.Ec)}}const we=function(){return["/rest/autocomplete/maarchParapheurUsers?exludeAlreadyConnected=true"]};let Ie=(()=>{class t{constructor(t,e,i,a,n){this.translate=t,this.http=e,this.data=i,this.dialogRef=a,this.notify=n,this.externalUser={inMaarchParapheur:!1,login:"",firstname:"",lastname:"",email:"",picture:""}}ngOnInit(){this.http.get("../rest/autocomplete/maarchParapheurUsers",{params:{search:this.data.user.mail,exludeAlreadyConnected:"true"}}).subscribe(t=>{t.length>0?(this.externalUser=t[0],this.externalUser.inMaarchParapheur=!0,this.http.get("../rest/maarchParapheur/user/"+this.externalUser.id+"/picture").subscribe(t=>{this.externalUser.picture=t.picture},t=>{this.notify.handleErrors(t)})):(this.externalUser.inMaarchParapheur=!1,this.externalUser=this.data.user,this.externalUser.login=this.data.user.user_id,this.externalUser.email=this.data.user.mail)},t=>{this.notify.handleErrors(t)})}selectUser(t){this.externalUser=t,this.externalUser.inMaarchParapheur=!0,this.http.get("../rest/maarchParapheur/user/"+this.externalUser.id+"/picture").subscribe(t=>{this.externalUser.picture=t.picture},t=>{this.notify.handleErrors(t)})}unlinkMaarchParapheurAccount(){this.externalUser.inMaarchParapheur=!1,this.externalUser=this.data.user,this.externalUser.login=this.data.user.user_id,this.externalUser.email=this.data.user.mail}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(z.a),p.Qb(z.h),p.Qb(y.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],decls:17,vars:18,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["appearance","outline",3,"labelPlaceholder","routeDatas","targetSearchKey","subInfoKey","triggerEvent"],[4,"ngIf"],["class","alert-message alert-message-danger","role","alert","style","margin-top: 30px;",3,"innerHTML",4,"ngIf"],[1,"divider-modal"],["color","primary","mat-raised-button","",3,"disabled","click"],["mat-raised-button","",3,"click"],["color","primary","mat-list-icon","",1,"avatarAccount"],["mat-line",""],["mat-line","",2,"color","#666"],["mat-icon-button","","color","warn",3,"title","click"],[1,"fas","fa-unlink"],["type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],["role","alert",1,"alert-message","alert-message-danger",2,"margin-top","30px",3,"innerHTML"]],template:function(t,e){1&t&&(p.Wb(0,"div",0),p.Wb(1,"h1",1),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"mat-dialog-content"),p.Wb(5,"plugin-autocomplete",2),p.dc("triggerEvent",(function(t){return e.selectUser(t)})),p.Vb(),p.Oc(6,Oe,9,6,"mat-list",3),p.Oc(7,_e,3,4,"mat-form-field",3),p.Oc(8,Se,1,1,"div",4),p.Vb(),p.Rb(9,"span",5),p.Wb(10,"mat-dialog-actions"),p.Wb(11,"button",6),p.dc("click",(function(){return e.dialogRef.close(e.externalUser)})),p.Qc(12),p.ic(13,"translate"),p.Vb(),p.Wb(14,"button",7),p.dc("click",(function(){return e.dialogRef.close("")})),p.Qc(15),p.ic(16,"translate"),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(2),p.Rc(p.jc(3,11,"lang.linkAccount")),p.Db(3),p.oc("labelPlaceholder",e.translate.instant("lang.searchUserInMaarchParapheur"))("routeDatas",p.uc(17,we))("targetSearchKey","idToDisplay")("subInfoKey","email"),p.Db(1),p.oc("ngIf",e.externalUser.inMaarchParapheur),p.Db(1),p.oc("ngIf",!e.externalUser.inMaarchParapheur),p.Db(1),p.oc("ngIf",!e.externalUser.inMaarchParapheur),p.Db(3),p.oc("disabled",""===e.externalUser.login),p.Db(1),p.Rc(p.jc(13,13,"lang.validate")),p.Db(3),p.Rc(p.jc(16,15,"lang.cancel")))},directives:[z.i,z.f,Rt.a,O.t,z.c,R.b,wt.a,wt.d,It.a,wt.c,k.l,S.c,w.b,c.d,c.u,c.x],pipes:[h.d],styles:[".avatarAccount[_ngcontent-%COMP%]{border:3px solid #f99830;height:45px!important;width:45px!important;background-size:cover;background-repeat:no-repeat;background-position:50%}"]}),t})();var je=i("MJ5r"),ke=i("wZkO"),Re=i("7EHt"),Te=i("/kMP"),Pe=i("bSwM"),Qe=i("STbY"),Fe=i("lJEt"),Le=i("iadO"),Ee=i("wQTr"),Ae=i("QibW");const Ue=["snav2"],$e=["adminMenuTemplate"],ze=["maarchTree"];function Ne(t,e){if(1&t){const t=p.Xb();p.Wb(0,"a",18),p.dc("click",(function(){return p.Dc(t),p.hc(3).activateAbsence()})),p.Rb(1,"mat-icon",19),p.Wb(2,"p",20),p.Qc(3),p.ic(4,"translate"),p.Vb(),p.Vb()}2&t&&(p.Db(3),p.Sc(" ",p.jc(4,1,"lang.activateAbsence")," "))}function He(t,e){if(1&t){const t=p.Xb();p.Wb(0,"a",18),p.dc("click",(function(){return p.Dc(t),p.hc(3).desactivateAbsence()})),p.Rb(1,"mat-icon",21),p.Wb(2,"p",20),p.Qc(3),p.ic(4,"translate"),p.Vb(),p.Vb()}2&t&&(p.Db(3),p.Sc(" ",p.jc(4,1,"lang.desactivateAbsence")," "))}function Be(t,e){if(1&t){const t=p.Xb();p.Wb(0,"a",18),p.dc("click",(function(){return p.Dc(t),p.hc(3).resendActivationNotification()})),p.Rb(1,"mat-icon",22),p.Wb(2,"p",20),p.Qc(3),p.ic(4,"translate"),p.Vb(),p.Vb()}2&t&&(p.Db(3),p.Sc(" ",p.jc(4,1,"lang.sendActivationNotification")," "))}function Xe(t,e){if(1&t){const t=p.Xb();p.Wb(0,"a",18),p.dc("click",(function(){return p.Dc(t),p.hc(3).changePasswd()})),p.Rb(1,"mat-icon",23),p.Wb(2,"p",20),p.Qc(3),p.ic(4,"translate"),p.Vb(),p.Vb()}2&t&&(p.Db(3),p.Sc(" ",p.jc(4,1,"lang.changePassword")," "))}function Ge(t,e){1&t&&(p.Wb(0,"p",27),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc(" ",p.jc(2,1,"lang.maarchParapheurLinkbroken")," "))}function qe(t,e){if(1&t){const t=p.Xb();p.Wb(0,"a",24),p.dc("click",(function(){return p.Dc(t),p.hc(3).linkMaarchParapheurAccount()})),p.ic(1,"translate"),p.Rb(2,"mat-icon",25),p.Wb(3,"p",20),p.Qc(4),p.ic(5,"translate"),p.Vb(),p.Oc(6,Ge,3,3,"p",26),p.Vb()}if(2&t){const t=p.hc(3);p.pc("title",p.jc(1,3,"lang.createUserInMaarchParapheur")),p.Db(4),p.Sc(" ",p.jc(5,5,"lang.linkAccount")," "),p.Db(2),p.oc("ngIf",!t.maarchParapheurConnectionStatus)}}function Ke(t,e){if(1&t&&(p.Wb(0,"mat-nav-list"),p.Wb(1,"h3",13),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Oc(4,Ne,5,3,"a",16),p.Oc(5,He,5,3,"a",16),p.Oc(6,Be,5,3,"a",16),p.Oc(7,Xe,5,3,"a",16),p.Oc(8,qe,7,7,"a",17),p.Vb()),2&t){const t=p.hc(2);p.Db(2),p.Rc(p.jc(3,6,"lang.actions")),p.Db(2),p.oc("ngIf","ABS"!=t.user.status),p.Db(1),p.oc("ngIf","ABS"==t.user.status),p.Db(1),p.oc("ngIf",t.user.canSendActivationNotification),p.Db(1),p.oc("ngIf",t.user.canModifyPassword),p.Db(1),p.oc("ngIf",t.user.canCreateMaarchParapheurUser||""===t.maarchParapheurLink.login)}}function Je(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-list"),p.Wb(1,"h3",13),p.Qc(2,"Compte Maarch Parapheur"),p.Vb(),p.Wb(3,"mat-list-item"),p.Rb(4,"mat-icon",28),p.Wb(5,"p",29),p.Wb(6,"span"),p.Qc(7),p.Vb(),p.Wb(8,"button",30),p.dc("click",(function(){return p.Dc(t),p.hc(2).unlinkMaarchParapheurAccount()})),p.ic(9,"translate"),p.Rb(10,"mat-icon",31),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.Db(4),p.Lc("background-image","url("+t.maarchParapheurLink.picture+")"),p.Db(3),p.Sc(" ",t.maarchParapheurLink.login," "),p.Db(1),p.pc("title",p.jc(9,4,"lang.unlinkAccount"))}}function Ye(t,e){if(1&t&&(p.Oc(0,Ke,9,8,"mat-nav-list",15),p.Rb(1,"mat-divider"),p.Oc(2,Je,11,6,"mat-list",15)),2&t){const t=p.hc();p.oc("ngIf",!t.creationMode&&!t.loading),p.Db(2),p.oc("ngIf",""!==t.maarchParapheurLink.login)}}function Ze(t,e){1&t&&(p.Wb(0,"div",32),p.Rb(1,"mat-spinner",33),p.Vb())}function ti(t,e){1&t&&(p.Wb(0,"mat-error"),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc(" ",p.jc(2,1,"lang.requiredField"),""))}function ei(t,e){1&t&&(p.Wb(0,"mat-hint"),p.Rb(1,"i",58),p.Wb(2,"span",59),p.Qc(3),p.ic(4,"translate"),p.Vb(),p.Vb()),2&t&&(p.Db(3),p.Rc(p.jc(4,1,"lang.passwordValid")))}function ii(t,e){1&t&&(p.Wb(0,"mat-hint"),p.Rb(1,"i",58),p.Wb(2,"span",59),p.Qc(3),p.ic(4,"translate"),p.Vb(),p.Vb()),2&t&&(p.Db(3),p.Rc(p.jc(4,1,"lang.passwordMatch")))}function ai(t,e){if(1&t&&(p.Wb(0,"div",44),p.Wb(1,"div",60),p.Rb(2,"div",61),p.Vb(),p.Vb()),2&t){const t=p.hc(3);p.Db(2),p.oc("innerHTML",t.otherRuleText,p.Ec)}}const ni=function(t){return[t]};function oi(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",42),p.Wb(1,"form",43),p.Wb(2,"div",44),p.Wb(3,"mat-form-field",45),p.Rb(4,"input",46),p.ic(5,"translate"),p.Wb(6,"mat-icon",47),p.dc("click",(function(){p.Dc(t);const e=p.hc(2);return e.hidePassword=!e.hidePassword})),p.Vb(),p.Oc(7,ti,3,3,"mat-error",15),p.Vb(),p.Vb(),p.Wb(8,"div",44),p.Wb(9,"div",48),p.Qc(10),p.Vb(),p.Wb(11,"div",49),p.Wb(12,"mat-form-field",45),p.Rb(13,"input",50,51),p.ic(15,"translate"),p.Wb(16,"mat-icon",47),p.dc("click",(function(){p.Dc(t);const e=p.hc(2);return e.hidePassword=!e.hidePassword})),p.Vb(),p.Oc(17,ei,5,3,"mat-hint",15),p.Wb(18,"mat-error"),p.Qc(19),p.Vb(),p.Vb(),p.Vb(),p.Wb(20,"div",49),p.Wb(21,"mat-form-field",45),p.Rb(22,"input",52,53),p.ic(24,"translate"),p.Wb(25,"mat-icon",47),p.dc("click",(function(){p.Dc(t);const e=p.hc(2);return e.hidePassword=!e.hidePassword})),p.Vb(),p.Oc(26,ii,5,3,"mat-hint",15),p.Wb(27,"mat-error"),p.Qc(28),p.ic(29,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Oc(30,ai,3,1,"div",54),p.Wb(31,"div",44),p.Wb(32,"div",55),p.Wb(33,"button",56),p.dc("click",(function(){return p.Dc(t),p.hc(2).updatePassword()})),p.Qc(34),p.ic(35,"translate"),p.Vb(),p.Wb(36,"button",57),p.dc("click",(function(){return p.Dc(t),p.hc(2).showPassword=!1})),p.Qc(37),p.ic(38,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.Db(1),p.oc("formGroup",t.firstFormGroup),p.Db(3),p.pc("placeholder",p.jc(5,20,"lang.typeCurrentPassword")),p.oc("type",t.hidePassword?"password":"text"),p.Db(2),p.oc("ngClass",p.vc(32,ni,t.hidePassword?"fa-eye-slash":"fa-eye")),p.Db(1),p.oc("ngIf",t.firstFormGroup.controls.currentPasswordCtrl.hasError("required")),p.Db(3),p.Sc(" ",t.ruleText,""),p.Db(3),p.pc("placeholder",p.jc(15,22,"lang.typeNewPassword")),p.oc("type",t.hidePassword?"password":"text"),p.Db(3),p.oc("ngClass",p.vc(34,ni,t.hidePassword?"fa-eye-slash":"fa-eye")),p.Db(1),p.oc("ngIf",t.validPassword),p.Db(2),p.Rc(t.getErrorMessage()),p.Db(3),p.pc("placeholder",p.jc(24,24,"lang.retypeNewPassword")),p.oc("type",t.hidePassword?"password":"text"),p.Db(3),p.oc("ngClass",p.vc(36,ni,t.hidePassword?"fa-eye-slash":"fa-eye")),p.Db(1),p.oc("ngIf",!t.firstFormGroup.controls.retypePasswordCtrl.hasError("mismatch")&&""!=t.firstFormGroup.controls.retypePasswordCtrl.value),p.Db(2),p.Sc("",p.jc(29,26,"lang.passwordNotMatch")," !"),p.Db(2),p.oc("ngIf",t.passwordRules.renewal.enabled||t.passwordRules.historyLastUse.enabled),p.Db(3),p.oc("disabled",!t.firstFormGroup.valid),p.Db(1),p.Rc(p.jc(35,28,"lang.update")),p.Db(3),p.Rc(p.jc(38,30,"lang.cancel"))}}function si(t,e){if(1&t&&(p.Wb(0,"div",62),p.Qc(1),p.Vb()),2&t){const t=p.hc(2);p.Db(1),p.Sc(" ",t.user.status,"")}}function ci(t,e){if(1&t){const t=p.Xb();p.Wb(0,"input",84),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(3).user.userId=e}))("keyup",(function(){return p.Dc(t),p.hc(3).setLowerUserId()})),p.ic(1,"translate"),p.ic(2,"translate"),p.Vb()}if(2&t){const t=p.hc(3);p.pc("title",p.jc(1,3,"lang.id")),p.pc("placeholder",p.jc(2,5,"lang.id")),p.oc("ngModel",t.user.userId)}}function ri(t,e){if(1&t&&(p.Rb(0,"input",85),p.ic(1,"translate"),p.ic(2,"translate")),2&t){const t=p.hc(3);p.pc("title",p.jc(1,3,"lang.id")),p.pc("value",t.user.user_id),p.pc("placeholder",p.jc(2,5,"lang.id"))}}const li=function(){return["root_visible","root_invisible"]};function di(t,e){if(1&t&&(p.Ub(0),p.Wb(1,"mat-option",86),p.Qc(2),p.Vb(),p.Tb()),2&t){const t=e.$implicit,i=p.hc(3);p.Db(1),p.oc("value",t.id)("disabled","standard"===i.headerService.user.mode&&p.uc(4,li).indexOf(t.id)>-1)("title","standard"===i.headerService.user.mode&&p.uc(5,li).indexOf(t.id)>-1?i.translate.instant("lang.mustSuperadmin"):""),p.Db(1),p.Sc(" ",t.label," ")}}function bi(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div"),p.Wb(1,"mat-form-field"),p.Wb(2,"mat-label"),p.Qc(3),p.ic(4,"translate"),p.Vb(),p.Wb(5,"textarea",87),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(3).user.authorizedApi=e})),p.Vb(),p.Wb(6,"mat-hint"),p.Qc(7),p.ic(8,"translate"),p.Wb(9,"a",88),p.Qc(10),p.ic(11,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc(3);p.Db(3),p.Rc(p.jc(4,5,"lang.authorizedRoutes")),p.Db(2),p.oc("ngModel",t.user.authorizedApi),p.Db(2),p.Sc("",p.jc(8,7,"lang.authorizedRoutesInformations")," "),p.Db(2),p.qc("href","https://docs.maarch.org/gitbook/html/MaarchCourrier/",t.appVersion,"/guat/guat_architecture/API_REST/home.html",p.Gc),p.Db(1),p.Rc(p.jc(11,9,"lang.here"))}}function pi(t,e){if(1&t&&(p.Wb(0,"button",89),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){p.hc();const t=p.zc(1);p.oc("disabled",!t.form.valid),p.Db(1),p.Rc(p.jc(2,2,"lang.save"))}}function hi(t,e){if(1&t&&(p.Wb(0,"button",89),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){p.hc();const t=p.zc(1);p.oc("disabled",!t.form.valid),p.Db(1),p.Rc(p.jc(2,2,"lang.update"))}}function ui(t,e){if(1&t){const t=p.Xb();p.Wb(0,"form",63,64),p.dc("ngSubmit",(function(){return p.Dc(t),p.hc(2).onSubmit()})),p.Wb(2,"div",44),p.Wb(3,"div",65),p.Wb(4,"div",66),p.Wb(5,"div",67),p.Rb(6,"i",68),p.Vb(),p.Vb(),p.Wb(7,"div",69),p.Wb(8,"mat-form-field"),p.Oc(9,ci,3,7,"input",70),p.Oc(10,ri,3,7,"input",71),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(11,"div",44),p.Wb(12,"div",72),p.Wb(13,"mat-form-field"),p.Wb(14,"input",73),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).user.lastname=e})),p.ic(15,"translate"),p.ic(16,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(17,"div",72),p.Wb(18,"mat-form-field"),p.Wb(19,"input",74),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).user.firstname=e})),p.ic(20,"translate"),p.ic(21,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(22,"div",75),p.Wb(23,"mat-form-field"),p.Wb(24,"input",76),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).user.initials=e})),p.ic(25,"translate"),p.ic(26,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(27,"div",44),p.Wb(28,"div",65),p.Wb(29,"mat-form-field"),p.Wb(30,"input",77),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).user.phone=e})),p.ic(31,"translate"),p.ic(32,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(33,"div",44),p.Wb(34,"div",65),p.Wb(35,"mat-form-field"),p.Wb(36,"input",78),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).user.mail=e})),p.ic(37,"translate"),p.ic(38,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(39,"mat-accordion"),p.Wb(40,"mat-expansion-panel",79),p.Wb(41,"mat-expansion-panel-header"),p.Wb(42,"mat-panel-title",80),p.Qc(43),p.ic(44,"translate"),p.Vb(),p.Vb(),p.Wb(45,"div"),p.Wb(46,"mat-form-field"),p.Wb(47,"mat-label"),p.Qc(48),p.ic(49,"translate"),p.Vb(),p.Wb(50,"mat-select",81),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).user.mode=e})),p.Oc(51,di,3,6,"ng-container",14),p.ic(52,"sortBy"),p.Vb(),p.Vb(),p.Vb(),p.Oc(53,bi,12,11,"div",15),p.Vb(),p.Vb(),p.Wb(54,"div",82),p.Wb(55,"div",55),p.Oc(56,pi,3,4,"button",83),p.Oc(57,hi,3,4,"button",83),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.Db(9),p.oc("ngIf",t.creationMode),p.Db(1),p.oc("ngIf",!t.creationMode),p.Db(4),p.pc("title",p.jc(15,27,"lang.lastname")),p.pc("placeholder",p.jc(16,29,"lang.lastname")),p.oc("ngModel",t.user.lastname),p.Db(5),p.pc("title",p.jc(20,31,"lang.firstname")),p.pc("placeholder",p.jc(21,33,"lang.firstname")),p.oc("ngModel",t.user.firstname),p.Db(5),p.pc("title",p.jc(25,35,"lang.initials")),p.pc("placeholder",p.jc(26,37,"lang.initials")),p.oc("ngModel",t.user.initials),p.Db(6),p.pc("title",p.jc(31,39,"lang.phoneNumber")),p.pc("placeholder",p.jc(32,41,"lang.phoneNumber")),p.oc("ngModel",t.user.phone)("disabled",t.creationMode&&!t.canManagePersonalDatas||!t.creationMode&&(!t.canManagePersonalDatas||!t.canViewPersonalDatas)),p.Db(6),p.pc("title",p.jc(37,43,"lang.email")),p.pc("placeholder",p.jc(38,45,"lang.email")),p.oc("ngModel",t.user.mail),p.Db(4),p.oc("expanded",t.creationMode),p.Db(3),p.Sc(" ",p.jc(44,47,"lang.otherInformations")," "),p.Db(5),p.Rc(p.jc(49,49,"lang.accountType")),p.Db(2),p.oc("ngModel",t.user.mode)("disabled","standard"===t.headerService.user.mode&&p.uc(54,li).indexOf(t.user.mode)>-1),p.Db(1),p.oc("ngForOf",p.kc(52,51,t.adminModes,"label")),p.Db(2),p.oc("ngIf","rest"===t.user.mode),p.Db(3),p.oc("ngIf",t.creationMode),p.Db(1),p.oc("ngIf",!t.creationMode)}}function mi(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-list-item",91),p.Wb(1,"mat-slide-toggle",92),p.dc("change",(function(){p.Dc(t);const i=e.$implicit;return p.hc(3).toggleGroup(i)})),p.Qc(2),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit;p.Db(1),p.pc("id",t.group_id),p.oc("checked",1==t.checked)("disabled",!t.enabled),p.Db(1),p.Sc(" ",t.group_desc,"")}}function fi(t,e){if(1&t&&(p.Wb(0,"mat-tab",36),p.ic(1,"translate"),p.Wb(2,"mat-nav-list"),p.Oc(3,mi,3,4,"mat-list-item",90),p.Vb(),p.Vb()),2&t){const t=p.hc(2);p.pc("label",p.jc(1,2,"lang.groups")),p.Db(3),p.oc("ngForOf",t.user.allGroups)}}function gi(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-tab",36),p.ic(1,"translate"),p.Wb(2,"app-maarch-flat-tree",93,94),p.dc("afterSelectNode",(function(e){return p.Dc(t),p.hc(2).addEntity(e)}))("afterDeselectNode",(function(e){return p.Dc(t),p.hc(2).deleteEntity(e)})),p.Vb(),p.Vb()}2&t&&(p.pc("label",p.jc(1,3,"lang.entities")),p.Db(2),p.oc("selectionPropagation",!1)("openState","all"))}function vi(t,e){1&t&&(p.Wb(0,"p",100),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc(" ",p.jc(2,1,"lang.selectAll")," "))}const yi=function(){return["/rest/autocomplete/users"]};function Di(t,e){if(1&t){const t=p.Xb();p.Wb(0,"p",101),p.Wb(1,"button",102),p.ic(2,"translate"),p.Rb(3,"mat-icon",103),p.Rb(4,"mat-divider",104),p.Vb(),p.Wb(5,"button",105),p.dc("click",(function(){return p.Dc(t),p.hc(3).toggleBasket(!1)})),p.ic(6,"translate"),p.Rb(7,"mat-icon",106),p.Vb(),p.Wb(8,"button",107),p.dc("click",(function(){return p.Dc(t),p.hc(3).toggleBasket(!0)})),p.ic(9,"translate"),p.Rb(10,"mat-icon",108),p.Vb(),p.Wb(11,"mat-menu",109,110),p.Wb(13,"plugin-autocomplete",111),p.dc("triggerEvent",(function(e){return p.Dc(t),p.hc(3).addBasketRedirection(e)})),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.zc(12),e=p.hc(3);p.Db(1),p.pc("matTooltip",p.jc(2,9,"lang.redirectBaskets")),p.oc("matMenuTriggerFor",t),p.Db(3),p.oc("vertical",!0),p.Db(1),p.pc("matTooltip",p.jc(6,11,"lang.disableBasket")),p.Db(3),p.pc("matTooltip",p.jc(9,13,"lang.enableBasket")),p.Db(5),p.oc("labelPlaceholder",e.translate.instant("lang.redirectBaskets"))("routeDatas",p.uc(15,yi))("targetSearchKey","idToDisplay")("subInfoKey","descriptionToDisplay")}}function Vi(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-icon",96),p.Wb(1,"mat-checkbox",118),p.dc("click",(function(e){return p.Dc(t),e.stopPropagation()}))("change",(function(e){p.Dc(t);const i=p.hc(2).$implicit,a=p.hc(3);return e?a.selectionBaskets.toggle(i):null})),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2).$implicit,e=p.hc(3);p.Db(1),p.oc("checked",e.selectionBaskets.isSelected(t))}}const Ci=function(t){return{opacity:t}};function Mi(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-list-item",113),p.Oc(1,Vi,2,1,"mat-icon",114),p.Wb(2,"h4",115),p.Wb(3,"span",116),p.dc("click",(function(){p.Dc(t);const e=p.hc().$implicit;return p.hc(3).selectionBaskets.toggle(e)})),p.Qc(4),p.Wb(5,"span",117),p.Qc(6),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc().$implicit;p.Db(1),p.oc("ngIf",t.enabled),p.Db(2),p.rc("matTooltip","",t.basket_name," [",t.group_desc,"]"),p.oc("ngStyle",p.vc(6,Ci,t.allowed?"1":"0.5")),p.Db(1),p.Sc(" ",t.basket_name," "),p.Db(2),p.Rc(t.group_desc)}}function Wi(t,e){if(1&t&&(p.Ub(0),p.Oc(1,Mi,7,8,"mat-list-item",112),p.Tb()),2&t){const t=e.$implicit;p.Db(1),p.oc("ngIf",null==t.userToDisplay)}}function xi(t,e){if(1&t){const t=p.Xb();p.Ub(0),p.Wb(1,"mat-list-item"),p.Rb(2,"mat-icon",119),p.Wb(3,"h4",120),p.Qc(4),p.Wb(5,"span",117),p.Qc(6),p.Vb(),p.Vb(),p.Wb(7,"p",20),p.Wb(8,"mat-form-field"),p.Rb(9,"input",121),p.ic(10,"translate"),p.Wb(11,"button",122),p.dc("click",(function(){p.Dc(t);const i=e.$implicit,a=e.index;return p.hc(3).delBasketRedirection(i,a)})),p.ic(12,"translate"),p.Rb(13,"mat-icon",123),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Tb()}if(2&t){const t=e.$implicit;p.Db(4),p.Sc("",t.basket_name," "),p.Db(2),p.Rc(t.group_desc),p.Db(3),p.rc("value","",p.jc(10,5,"lang.redirectedTo")," ",t.userToDisplay,""),p.Db(2),p.pc("matTooltip",p.jc(12,7,"lang.deleteRedirection"))}}function Oi(t,e){if(1&t){const t=p.Xb();p.Wb(0,"plugin-autocomplete",111),p.dc("triggerEvent",(function(e){p.Dc(t);const i=p.hc(),a=i.$implicit,n=i.index;return p.hc(3).reassignBasketRedirection(e,a,n)})),p.Vb()}if(2&t){const t=p.hc(4);p.oc("labelPlaceholder",t.translate.instant("lang.redirectBaskets"))("routeDatas",p.uc(4,yi))("targetSearchKey","idToDisplay")("subInfoKey","descriptionToDisplay")}}function _i(t,e){if(1&t){const t=p.Xb();p.Ub(0),p.Wb(1,"mat-list-item"),p.Rb(2,"mat-icon",124),p.Wb(3,"h4",120),p.Qc(4),p.Wb(5,"span",117),p.Qc(6),p.Vb(),p.Vb(),p.Wb(7,"p",20),p.Oc(8,Oi,1,5,"plugin-autocomplete",125),p.Wb(9,"mat-form-field"),p.Rb(10,"input",121),p.ic(11,"translate"),p.Wb(12,"button",122),p.dc("click",(function(){return e.$implicit.userToDisplay=null})),p.ic(13,"translate"),p.Rb(14,"mat-icon",126),p.Vb(),p.Wb(15,"button",122),p.dc("click",(function(){p.Dc(t);const i=e.$implicit,a=e.index;return p.hc(3).delBasketAssignRedirection(i,a)})),p.ic(16,"translate"),p.Rb(17,"mat-icon",123),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Tb()}if(2&t){const t=e.$implicit;p.Db(4),p.Sc("",t.basket_name," "),p.Db(2),p.Rc(t.group_desc),p.Db(2),p.oc("ngIf",null==t.userToDisplay),p.Db(2),p.rc("value","",p.jc(11,7,"lang.assignBy")," ",t.userToDisplay,""),p.Db(2),p.pc("matTooltip",p.jc(13,9,"lang.reassign")),p.Db(3),p.pc("matTooltip",p.jc(16,11,"lang.deleteAssignation"))}}function Si(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-tab",36),p.ic(1,"translate"),p.Wb(2,"div",95),p.Wb(3,"mat-list"),p.Wb(4,"mat-list-item"),p.Wb(5,"mat-icon",96),p.Wb(6,"mat-checkbox",97),p.dc("change",(function(e){p.Dc(t);const i=p.hc(2);return e?i.masterToggleBaskets(e):null})),p.ic(7,"translate"),p.Vb(),p.Vb(),p.Oc(8,vi,3,3,"p",98),p.Oc(9,Di,14,16,"p",99),p.Vb(),p.Rb(10,"mat-divider"),p.Oc(11,Wi,2,1,"ng-container",14),p.Vb(),p.Vb(),p.Wb(12,"div",95),p.Wb(13,"mat-tab-group"),p.Wb(14,"mat-tab",36),p.ic(15,"translate"),p.Wb(16,"mat-list"),p.Oc(17,xi,14,9,"ng-container",14),p.Vb(),p.Vb(),p.Vb(),p.Wb(18,"mat-tab-group"),p.Wb(19,"mat-tab",36),p.ic(20,"translate"),p.Wb(21,"mat-list"),p.Oc(22,_i,18,13,"ng-container",14),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.pc("label",p.jc(1,10,"lang.baskets")),p.Db(6),p.pc("matTooltip",p.jc(7,12,"lang.selectAll")),p.oc("checked",t.selectionBaskets.hasValue()),p.Db(2),p.oc("ngIf",!t.selectionBaskets.hasValue()),p.Db(1),p.oc("ngIf",t.selectionBaskets.hasValue()),p.Db(2),p.oc("ngForOf",t.user.baskets),p.Db(3),p.pc("label",p.jc(15,14,"lang.basketsRedirected")),p.Db(3),p.oc("ngForOf",t.user.redirectedBaskets),p.Db(2),p.pc("label",p.jc(20,16,"lang.basketsAssigned")),p.Db(3),p.oc("ngForOf",t.user.assignedBaskets)}}function wi(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",146),p.dc("click",(function(){return p.Dc(t),p.hc(3).clickOnUploader("uploadSignFile")}))("dragover",(function(){return p.Dc(t),p.hc(3).highlightMe=!0}))("dragleave",(function(){return p.Dc(t),p.hc(3).highlightMe=!1}))("onDropSuccess",(function(e){p.Dc(t);const i=p.hc(3);return i.test(e),i.highlightMe=!1})),p.ic(1,"translate"),p.Qc(2),p.ic(3,"translate"),p.Vb()}if(2&t){const t=p.hc(3);p.Ib("dndFileHighlighted",t.highlightMe),p.pc("matTooltip",p.jc(1,4,"lang.uploadSignFileInfo")),p.Db(2),p.Sc(" ",p.jc(3,6,"lang.uploadSignFile")," ")}}function Ii(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",147),p.Wb(1,"mat-card",148),p.Wb(2,"mat-card-content",55),p.Wb(3,"mat-form-field",149),p.Wb(4,"input",150),p.dc("ngModelChange",(function(i){return p.Dc(t),e.$implicit.signature_label=i}))("change",(function(){p.Dc(t);const i=e.index;return p.hc(3).updateSignature(i)})),p.ic(5,"translate"),p.Vb(),p.Wb(6,"button",151),p.dc("click",(function(){p.Dc(t);const i=e.$implicit;return p.hc(3).deleteSignature(i)})),p.ic(7,"translate"),p.Rb(8,"mat-icon",152),p.Vb(),p.Vb(),p.Rb(9,"img",153),p.ic(10,"async"),p.ic(11,"secureUrl"),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit,i=p.hc(3);p.Db(4),p.pc("placeholder",p.jc(5,6,"lang.label")),p.oc("ngModel",t.signature_label)("disabled",!i.canManagePersonalDatas),p.Db(2),p.pc("matTooltip",p.jc(7,8,"lang.delete")),p.oc("disabled",!i.canManagePersonalDatas),p.Db(3),p.oc("src",p.jc(10,10,p.jc(11,12,"../rest/users/"+i.user.id+"/signatures/"+t.id+"/content")),p.Gc)}}function ji(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",154),p.dc("click",(function(){return p.Dc(t),p.hc(3).syncMP()})),p.ic(1,"translate"),p.Rb(2,"mat-icon",155),p.Vb()}if(2&t){const t=p.hc(3);p.pc("matTooltip",p.jc(1,4,"lang.syncSignsToMaarchParapheur")),p.oc("disabled",!t.user.external_id.maarchParapheur||t.loadingSign),p.Db(2),p.Ib("fa-spin",t.loadingSign)}}function ki(t,e){if(1&t&&(p.Wb(0,"div",156),p.Rb(1,"img",157),p.Vb()),2&t){const t=p.hc(3);p.Db(1),p.pc("src",t.signatureModel.base64ForJs,p.Gc)}}function Ri(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-tab",127),p.ic(1,"translate"),p.Oc(2,wi,4,8,"div",128),p.Wb(3,"div",129),p.Wb(4,"div",130),p.Oc(5,Ii,12,14,"div",131),p.Vb(),p.Wb(6,"div"),p.Oc(7,ji,3,6,"button",132),p.Vb(),p.Vb(),p.Wb(8,"form",133,134),p.dc("ngSubmit",(function(){return p.Dc(t),p.hc(2).submitSignature()})),p.Wb(10,"div",135),p.Wb(11,"input",136),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).signatureModel.label=e})),p.ic(12,"translate"),p.Vb(),p.Wb(13,"div",137),p.Wb(14,"div",44),p.Wb(15,"input",138),p.dc("change",(function(e){return p.Dc(t),p.hc(2).uploadSignatureTrigger(e)})),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(16,"div",139),p.Wb(17,"button",140),p.Rb(18,"i",141),p.Vb(),p.Vb(),p.Wb(19,"div",142),p.Wb(20,"div",143),p.dc("click",(function(){return p.Dc(t),p.hc(2).clickOnUploader("uploadSignFile")})),p.Qc(21),p.ic(22,"translate"),p.Rb(23,"i",144),p.Qc(24," ( < 2MB ) "),p.Vb(),p.Vb(),p.Oc(25,ki,2,1,"div",145),p.Vb(),p.Vb()}if(2&t){const t=p.zc(9),e=p.hc(2);p.pc("label",p.jc(1,11,"lang.signatures")),p.oc("disabled",!e.canViewPersonalDatas),p.Db(2),p.oc("ngIf",e.canManagePersonalDatas),p.Db(3),p.oc("ngForOf",e.user.signatures),p.Db(2),p.oc("ngIf",e.user.signatures.length>0&&e.canManagePersonalDatas),p.Db(4),p.pc("placeholder",p.jc(12,13,"lang.label")),p.oc("ngModel",e.signatureModel.label),p.Db(6),p.oc("disabled",!t.form.valid||!e.signatureModel.size),p.Db(2),p.oc("ngClass",p.vc(17,ni,""!=e.signatureModel.size?"col-md-10":"col-md-12")),p.Db(2),p.Sc(" ",p.jc(22,15,"lang.clickOn")," "),p.Db(4),p.oc("ngIf",e.signatureModel.size)}}function Ti(t,e){1&t&&(p.Wb(0,"mat-header-cell",182),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc(" ",p.jc(2,1,"lang.date")," "))}function Pi(t,e){if(1&t&&(p.Wb(0,"mat-cell",130),p.Qc(1),p.ic(2,"date"),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",p.kc(2,1,t.event_date,"dd/MM/y HH:mm"),"")}}function Qi(t,e){1&t&&(p.Wb(0,"mat-header-cell",130),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc("",p.jc(2,1,"lang.technicalId")," "))}function Fi(t,e){if(1&t&&(p.Wb(0,"mat-cell",130),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc("",t.record_id," ")}}function Li(t,e){1&t&&(p.Wb(0,"mat-header-cell",183),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc(" ",p.jc(2,1,"lang.description"),""))}function Ei(t,e){if(1&t&&(p.Wb(0,"mat-cell",184),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.info," ")}}function Ai(t,e){1&t&&(p.Wb(0,"mat-header-cell",182),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc(" ",p.jc(2,1,"lang.ip")," "))}function Ui(t,e){if(1&t&&(p.Wb(0,"mat-cell",130),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.remote_ip," ")}}function $i(t,e){1&t&&p.Rb(0,"mat-header-row")}function zi(t,e){1&t&&p.Rb(0,"mat-row")}function Ni(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-tab",36),p.ic(1,"translate"),p.Wb(2,"div",158),p.Wb(3,"div"),p.Wb(4,"div",159),p.Wb(5,"div",160),p.Wb(6,"mat-form-field"),p.Wb(7,"input",161),p.dc("keyup",(function(e){return p.Dc(t),p.hc(2).applyFilter(e.target.value)})),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(9,"div",160),p.Rb(10,"mat-paginator",162,163),p.Vb(),p.Vb(),p.Wb(12,"mat-table",164,165),p.Ub(14,166),p.Oc(15,Ti,3,3,"mat-header-cell",167),p.Oc(16,Pi,3,4,"mat-cell",168),p.Tb(),p.Ub(17,169),p.Oc(18,Qi,3,3,"mat-header-cell",170),p.Oc(19,Fi,2,1,"mat-cell",168),p.Tb(),p.Ub(20,171),p.Oc(21,Li,3,3,"mat-header-cell",172),p.Oc(22,Ei,2,1,"mat-cell",173),p.Tb(),p.Ub(23,174),p.Oc(24,Ai,3,3,"mat-header-cell",167),p.Oc(25,Ui,2,1,"mat-cell",168),p.Tb(),p.Oc(26,$i,1,0,"mat-header-row",175),p.Oc(27,zi,1,0,"mat-row",176),p.Vb(),p.Wb(28,"div",159),p.Wb(29,"div",177),p.Wb(30,"mat-form-field"),p.Wb(31,"input",178),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).minDate=e})),p.ic(32,"translate"),p.Vb(),p.Rb(33,"mat-datepicker-toggle",179),p.Rb(34,"mat-datepicker",180,181),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.zc(35),e=p.hc(2);p.pc("label",p.jc(1,13,"lang.history")),p.Db(7),p.pc("placeholder",p.jc(8,15,"lang.filterBy")),p.Db(3),p.oc("length",100)("hidePageSize",!0)("pageSize",10),p.Db(2),p.oc("dataSource",e.dataSource),p.Db(14),p.oc("matHeaderRowDef",e.displayedColumns),p.Db(1),p.oc("matRowDefColumns",e.displayedColumns),p.Db(4),p.pc("placeholder",p.jc(32,17,"lang.since")),p.oc("ngModel",e.minDate)("matDatepicker",t),p.Db(2),p.oc("for",t),p.Db(1),p.oc("startAt",e.minDate)}}function Hi(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-card",34),p.Wb(1,"mat-tab-group",35),p.dc("selectedIndexChange",(function(e){return p.Dc(t),p.hc().selectedTabIndex=e}))("selectedTabChange",(function(){return p.Dc(t),p.hc().initService()})),p.Wb(2,"mat-tab",36),p.ic(3,"translate"),p.Oc(4,oi,39,38,"div",37),p.Oc(5,si,2,1,"div",38),p.Oc(6,ui,58,55,"form",39),p.Vb(),p.Oc(7,fi,4,4,"mat-tab",40),p.Oc(8,gi,4,5,"mat-tab",40),p.Oc(9,Si,23,18,"mat-tab",40),p.Oc(10,Ri,26,19,"mat-tab",41),p.Oc(11,Ni,36,19,"mat-tab",40),p.Vb(),p.Vb()}if(2&t){const t=p.hc();p.Db(1),p.oc("selectedIndex",t.selectedTabIndex),p.Db(1),p.pc("label",p.jc(3,10,"lang.informations")),p.Db(2),p.oc("ngIf",t.showPassword),p.Db(1),p.oc("ngIf","ABS"==t.user.status&&!t.showPassword),p.Db(1),p.oc("ngIf",!t.showPassword),p.Db(1),p.oc("ngIf",!t.creationMode),p.Db(1),p.oc("ngIf",!t.creationMode),p.Db(1),p.oc("ngIf",!t.creationMode),p.Db(1),p.oc("ngIf",!t.creationMode),p.Db(1),p.oc("ngIf",!t.creationMode)}}function Bi(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-list-item"),p.Rb(1,"mat-icon",185),p.Wb(2,"h4",20),p.Qc(3),p.Vb(),p.Wb(4,"p",20),p.Wb(5,"mat-form-field",186),p.Wb(6,"input",187),p.dc("ngModelChange",(function(i){return p.Dc(t),e.$implicit.role=i}))("change",(function(){p.Dc(t);const i=e.$implicit;return p.hc().updateGroup(i)})),p.ic(7,"translate"),p.ic(8,"translate"),p.Vb(),p.Wb(9,"mat-hint",188),p.ic(10,"translate"),p.Qc(11),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit;p.Db(3),p.Rc(t.group_desc),p.Db(3),p.pc("title",p.jc(7,6,"lang.role")),p.pc("placeholder",p.jc(8,8,"lang.role")),p.oc("ngModel",t.role),p.Db(3),p.pc("matTooltip",p.jc(10,10,"lang.perimeter")),p.Db(2),p.Rc(t.maarch_comment)}}function Xi(t,e){1&t&&p.Rb(0,"mat-icon",193)}function Gi(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-icon",194),p.Wb(1,"button",195),p.dc("click",(function(){p.Dc(t);const e=p.hc().$implicit;return p.hc().updatePrimaryEntity(e)})),p.ic(2,"translate"),p.Rb(3,"mat-icon",196),p.Vb(),p.Vb()}2&t&&(p.Db(1),p.pc("matTooltip",p.jc(2,1,"lang.entityTooglePrimary")))}function qi(t,e){1&t&&(p.Wb(0,"span",117),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.primary")))}const Ki=function(t){return{"font-weight":t}};function Ji(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-list-item"),p.Oc(1,Xi,1,0,"mat-icon",189),p.Oc(2,Gi,4,3,"mat-icon",190),p.Wb(3,"h4",191),p.Qc(4),p.Oc(5,qi,3,3,"span",192),p.Vb(),p.Wb(6,"p",20),p.Wb(7,"mat-form-field",186),p.Wb(8,"input",187),p.dc("ngModelChange",(function(i){return p.Dc(t),e.$implicit.user_role=i}))("change",(function(){p.Dc(t);const i=e.$implicit;return p.hc().updateEntity(i)})),p.ic(9,"translate"),p.ic(10,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit;p.Db(1),p.oc("ngIf","Y"==t.primary_entity),p.Db(1),p.oc("ngIf","Y"!=t.primary_entity),p.Db(1),p.pc("matTooltip",t.entity_label),p.oc("ngStyle",p.vc(13,Ki,"Y"==t.primary_entity?"bold":"normal")),p.Db(1),p.Sc(" ",t.entity_label," "),p.Db(1),p.oc("ngIf","Y"==t.primary_entity),p.Db(3),p.pc("title",p.jc(9,9,"lang.role")),p.pc("placeholder",p.jc(10,11,"lang.role")),p.oc("ngModel",t.user_role)}}function Yi(t,e){1&t&&(p.Rb(0,"div",15),p.ic(1,"translate")),2&t&&p.oc("innerHTML",p.jc(1,1,"lang.redirectConfidentialInfo"),p.Ec)}function Zi(t,e){1&t&&(p.Rb(0,"div",15),p.ic(1,"translate")),2&t&&p.oc("innerHTML",p.jc(1,1,"lang.redirectModelInfo"),p.Ec)}function ta(t,e){if(1&t){const t=p.Xb();p.Wb(0,"plugin-autocomplete",16),p.dc("triggerEvent",(function(e){return p.Dc(t),p.hc().setRedirectUser(e)})),p.ic(1,"translate"),p.ic(2,"translate"),p.Vb()}2&t&&p.oc("labelPlaceholder",p.jc(1,5,"lang.userReplacement"))("labelList",p.jc(2,7,"lang.availableUsers"))("routeDatas",p.uc(9,yi))("targetSearchKey","idToDisplay")("subInfoKey","descriptionToDisplay")}function ea(t,e){1&t&&(p.Wb(0,"span"),p.Wb(1,"em"),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Vb()),2&t&&(p.Db(2),p.Rc(p.jc(3,1,"lang.doNothingRedirectInformations")))}function ia(t,e){1&t&&(p.Rb(0,"span",17),p.ic(1,"translate")),2&t&&p.oc("innerHTML",p.jc(1,1,"lang.removeUserRedirectInformations"),p.Ec)}function aa(t,e){1&t&&(p.Wb(0,"span"),p.Wb(1,"em"),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Vb()),2&t&&(p.Db(2),p.Rc(p.jc(3,1,"lang.reaffectUserRedirectInformations")))}let na=(()=>{class t{constructor(t,e,i,a,n,o,s,c,r,l,d,b){this.translate=t,this.http=e,this.route=i,this.router=a,this.zone=n,this.notify=o,this.dialog=s,this.headerService=c,this._formBuilder=r,this.appService=l,this.privilegeService=d,this.viewContainerRef=b,this.loading=!1,this.highlightMe=!1,this.config={},this.mode="",this.user={mode:"standard",authorizedApi:""},this._search="",this.signatureModel={base64:"",base64ForJs:"",name:"",type:"",size:0,label:""},this.userAbsenceModel=[],this.userList=[],this.maarchParapheurLink={login:"",picture:""},this.selectedSignature=-1,this.selectedSignatureLabel="",this.loadingSign=!1,this.data=[],this.CurrentYear=(new Date).getFullYear(),this.currentMonth=(new Date).getMonth()+1,this.minDate=new Date,this.ruleText="",this.validPassword=!1,this.showPassword=!1,this.hidePassword=!0,this.passwordModel={currentPassword:"",newPassword:"",reNewPassword:""},this.passwordRules={minLength:{enabled:!1,value:0},complexityUpper:{enabled:!1,value:0},complexityNumber:{enabled:!1,value:0},complexitySpecial:{enabled:!1,value:0},renewal:{enabled:!1,value:0},historyLastUse:{enabled:!1,value:0}},this.displayedColumns=["event_date","record_id","info","remote_ip"],this.dataSource=new G.p(this.data),this.selectedTabIndex=0,this.maarchParapheurConnectionStatus=!0,this.canViewPersonalDatas=!1,this.canManagePersonalDatas=!1,this.adminModes=[{id:"standard",label:this.translate.instant("lang.standard")},{id:"root_visible",label:this.translate.instant("lang.root_visible")},{id:"root_invisible",label:this.translate.instant("lang.root_invisible")},{id:"rest",label:this.translate.instant("lang.rest")}],this.appVersion=je.a.VERSION.split(".")[0]+"."+je.a.VERSION.split(".")[1],this.selectionBaskets=new xe.c(!0,[]),window.angularUserAdministrationComponent={componentAfterUpload:t=>this.processAfterUpload(t)}}applyFilter(t){t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t}masterToggleBaskets(t){t.checked?this.user.baskets.forEach(t=>{t.userToDisplay||this.selectionBaskets.select(t)}):this.selectionBaskets.clear()}ngOnInit(){this.loading=!0,this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.route.params.subscribe(t=>{void 0===t.id?(this.headerService.setHeader(this.translate.instant("lang.userCreation")),this.creationMode=!0,this.canViewPersonalDatas=!1,this.canManagePersonalDatas=this.privilegeService.hasCurrentUserPrivilege("manage_personal_data"),this.loading=!1):(this.creationMode=!1,this.serialId=t.id,this.http.get("../rest/users/"+this.serialId+"/details").subscribe(t=>{this.user=t,"rest"===this.user.mode&&(this.user.authorizedApi=this.user.authorizedApi.join("\n")),this.headerService.user.id===this.user.id?(this.canViewPersonalDatas=!0,this.canManagePersonalDatas=!0):(this.canViewPersonalDatas=this.privilegeService.hasCurrentUserPrivilege("view_personal_data"),this.canManagePersonalDatas=this.privilegeService.hasCurrentUserPrivilege("manage_personal_data")),this.canManagePersonalDatas&&(this.canViewPersonalDatas=!0),this.canViewPersonalDatas||(this.user.phone="****"),this.data=t.history,this.userId=t.user_id,this.minDate=new Date(this.CurrentYear+"-"+this.currentMonth+"-01"),this.headerService.setHeader(this.translate.instant("lang.userModification"),t.firstname+" "+t.lastname),void 0!==this.user.external_id.maarchParapheur&&this.checkInfoMaarchParapheurAccount(),this.loading=!1,setTimeout(()=>{this.dataSource=new G.p(this.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort},0)},t=>{this.notify.handleErrors(t)}))})}checkInfoMaarchParapheurAccount(){this.http.get("../rest/users/"+this.serialId+"/statusInMaarchParapheur").subscribe(t=>{this.maarchParapheurLink.login=t.link,this.loading=!1,""!==this.maarchParapheurLink.login?this.loadAvatarMaarchParapheur(this.user.external_id.maarchParapheur):this.maarchParapheurConnectionStatus=!1})}linkMaarchParapheurAccount(){this.dialog.open(Ie,{panelClass:"maarch-modal",autoFocus:!1,data:{user:this.user}}).afterClosed().subscribe(t=>{t&&(t.inMaarchParapheur?this.linkAccountToMaarchParahpeur(t.id):this.createAccountToMaarchParahpeur(t.id,t.login))})}linkAccountToMaarchParahpeur(t){this.http.put("../rest/users/"+this.serialId+"/linkToMaarchParapheur",{maarchParapheurUserId:t}).subscribe(()=>{this.user.canCreateMaarchParapheurUser=!1,this.user.external_id.maarchParapheur=t,this.checkInfoMaarchParapheurAccount(),this.notify.success(this.translate.instant("lang.accountLinked"))},t=>{this.notify.error(t.error.errors)})}createAccountToMaarchParahpeur(t,e){this.http.put("../rest/users/"+t+"/createInMaarchParapheur",{login:e}).subscribe(t=>{this.user.canCreateMaarchParapheurUser=!1,this.user.external_id.maarchParapheur=t.externalId,this.checkInfoMaarchParapheurAccount(),this.notify.success(this.translate.instant("lang.accountAdded"))},t=>{"Login already exists"===t.error.errors&&(t.error.errors=this.translate.instant("lang.loginAlreadyExistsInMaarchParapheur")),this.notify.error(t.error.errors)})}loadAvatarMaarchParapheur(t){this.http.get("../rest/maarchParapheur/user/"+t+"/picture").subscribe(t=>{this.maarchParapheurLink.picture=t.picture},t=>{this.notify.handleErrors(t)})}unlinkMaarchParapheurAccount(){confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.unlinkAccount"))&&this.http.put("../rest/users/"+this.serialId+"/unlinkToMaarchParapheur",{}).subscribe(()=>{this.user.canCreateMaarchParapheurUser=!0,this.maarchParapheurLink.login="",this.maarchParapheurLink.picture="",this.notify.success(this.translate.instant("lang.accountUnlinked")),this.maarchParapheurConnectionStatus=!0},t=>{this.notify.error(t.error.errors)})}toogleRedirect(t){$("#redirectUser_"+t.group_id+"_"+t.basket_id).toggle(),this.http.get("../rest/users").subscribe(t=>{},t=>{this.notify.handleErrors(t)})}initService(){0===this.maarchTree.rawData.length&&this.maarchTree.initData(this.user.allEntities.map(t=>Object.assign(Object.assign({},t),{parent_id:t.parent})))}processAfterUpload(t){this.zone.run(()=>this.resfreshUpload(t))}resfreshUpload(t){this.signatureModel.size<=2e6?(this.signatureModel.base64=t.replace(/^data:.*?;base64,/,""),this.signatureModel.base64ForJs=t):(this.signatureModel.name="",this.signatureModel.size=0,this.signatureModel.type="",this.signatureModel.base64="",this.signatureModel.base64ForJs="",this.notify.error("Taille maximum de fichier d\xe9pass\xe9e (2 MB)"))}clickOnUploader(t){$("#"+t).click()}uploadSignatureTrigger(t){if(t.target.files&&t.target.files[0]){const e=new FileReader;this.signatureModel.name=t.target.files[0].name,this.signatureModel.size=t.target.files[0].size,this.signatureModel.type=t.target.files[0].type,""===this.signatureModel.label&&(this.signatureModel.label=this.signatureModel.name),e.readAsDataURL(t.target.files[0]),e.onload=t=>{window.angularUserAdministrationComponent.componentAfterUpload(t.target.result),this.submitSignature()}}}displaySignatureEditionForm(t){this.selectedSignature=t,this.selectedSignatureLabel=this.user.signatures[t].signature_label}resendActivationNotification(){confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.sendActivationNotification"))&&this.http.put("../rest/users/"+this.serialId+"/accountActivationNotification",{}).subscribe(t=>{this.notify.success(this.translate.instant("lang.activationNotificationSend"))},t=>{this.notify.error(t.error.errors)})}toggleGroup(t){!0===$("#"+t.group_id+"-input").is(":checked")?this.http.post("../rest/users/"+this.serialId+"/groups",{groupId:t.group_id,role:t.role}).subscribe(t=>Object(gt.a)(this,void 0,void 0,(function*(){this.user.groups=t.groups,this.user.baskets=t.baskets,this.headerService.user.id==this.serialId&&(yield this.headerService.resfreshCurrentUser(),this.privilegeService.resfreshUserShortcuts()),this.notify.success(this.translate.instant("lang.groupAdded"))})),t=>{this.notify.error(t.error.errors)}):this.http.delete("../rest/users/"+this.serialId+"/groups/"+t.group_id).subscribe(t=>Object(gt.a)(this,void 0,void 0,(function*(){this.user.groups=t.groups,this.user.baskets=t.baskets,this.user.redirectedBaskets=t.redirectedBaskets,this.headerService.user.id==this.serialId&&(yield this.headerService.resfreshCurrentUser(),this.privilegeService.resfreshUserShortcuts()),this.notify.success(this.translate.instant("lang.groupDeleted"))})),t=>{this.notify.error(t.error.errors)})}updateGroup(t){this.http.put("../rest/users/"+this.serialId+"/groups/"+t.group_id,t).subscribe(t=>{this.notify.success(this.translate.instant("lang.groupUpdated"))},t=>{this.notify.error(t.error.errors)})}addEntity(t){t.forEach(t=>{this.http.post("../rest/users/"+this.serialId+"/entities",{entityId:t.entity_id,role:""}).subscribe(t=>{this.user.entities=t.entities,this.user.allEntities=t.allEntities,this.headerService.user.id==this.serialId&&this.headerService.resfreshCurrentUser(),this.notify.success(this.translate.instant("lang.entityAdded"))},t=>{this.notify.error(t.error.errors)})})}updateEntity(t){this.http.put("../rest/users/"+this.serialId+"/entities/"+t.entity_id,t).subscribe(()=>{this.notify.success(this.translate.instant("lang.entityUpdated"))},t=>{this.notify.error(t.error.errors)})}updatePrimaryEntity(t){this.http.put("../rest/users/"+this.serialId+"/entities/"+t.entity_id+"/primaryEntity",{}).subscribe(e=>{this.user.entities=e.entities,this.notify.success(this.translate.instant("lang.entityTooglePrimary")+" \xab "+t.entity_id+" \xbb")},t=>{this.notify.error(t.error.errors)})}deleteEntity(t){t.forEach(t=>{const e=t.entity_id;this.http.get("../rest/users/"+this.serialId+"/entities/"+e).subscribe(i=>{i.hasConfidentialityInstances||i.hasListTemplates?(this.config={panelClass:"maarch-modal",data:{hasConfidentialityInstances:i.hasConfidentialityInstances,hasListTemplates:i.hasListTemplates}},this.dialogRef=this.dialog.open(oa,this.config),this.dialogRef.afterClosed().subscribe(i=>{this.mode="delete",i?(this.mode=i.processMode,this.http.request("DELETE","../rest/users/"+this.serialId+"/entities/"+e,{body:{mode:this.mode,newUser:i.newUser}}).subscribe(t=>{this.user.entities=t.entities,this.user.allEntities=t.allEntities,this.headerService.user.id==this.serialId&&this.headerService.resfreshCurrentUser(),this.notify.success(this.translate.instant("lang.entityDeleted"))},t=>{this.notify.error(t.error.errors)})):(this.maarchTree.toggleNode(this.maarchTree.dataSource.data,{selected:!0,opened:!0},[t.id]),this.mode=""),this.dialogRef=null})):this.http.delete("../rest/users/"+this.serialId+"/entities/"+e).subscribe(t=>{this.user.entities=t.entities,this.user.allEntities=t.allEntities,this.headerService.user.id==this.serialId&&this.headerService.resfreshCurrentUser(),this.notify.success(this.translate.instant("lang.entityDeleted"))},t=>{this.notify.error(t.error.errors)})},t=>{this.notify.error(t.error.errors)})})}submitSignature(){this.http.post("../rest/users/"+this.serialId+"/signatures",this.signatureModel).subscribe(t=>{this.user.signatures=t.signatures,this.notify.success(this.translate.instant("lang.signAdded")),this.signatureModel={base64:"",base64ForJs:"",name:"",type:"",size:0,label:""}},t=>{this.notify.error(t.error.errors)})}updateSignature(t){this.http.put("../rest/users/"+this.serialId+"/signatures/"+this.user.signatures[t].id,{label:this.user.signatures[t].signature_label}).subscribe(e=>{this.user.signatures[t].signature_label=e.signature.signature_label,this.notify.success(this.translate.instant("lang.signUpdated"))},t=>{this.notify.error(t.error.errors)})}deleteSignature(t){confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+t.signature_label+" \xbb")&&this.http.delete("../rest/users/"+this.serialId+"/signatures/"+t.id).subscribe(t=>{this.user.signatures=t.signatures,this.notify.success(this.translate.instant("lang.signDeleted"))},t=>{this.notify.error(t.error.errors)})}test(t){if(t.mouseEvent.dataTransfer.files&&t.mouseEvent.dataTransfer.files[0]){const e=new FileReader;this.signatureModel.name=t.mouseEvent.dataTransfer.files[0].name,this.signatureModel.size=t.mouseEvent.dataTransfer.files[0].size,this.signatureModel.type=t.mouseEvent.dataTransfer.files[0].type,""===this.signatureModel.label&&(this.signatureModel.label=this.signatureModel.name),e.readAsDataURL(t.mouseEvent.dataTransfer.files[0]),e.onload=t=>{window.angularUserAdministrationComponent.componentAfterUpload(t.target.result),this.submitSignature()}}}addBasketRedirection(t){const e=[];this.selectionBaskets.selected.forEach(i=>{e.push({actual_user_id:t.serialId,basket_id:i.basket_id,group_id:i.groupSerialId,originalOwner:null})}),confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.redirectBasket"))&&this.http.post("../rest/users/"+this.serialId+"/redirectedBaskets",e).subscribe(t=>{this.user.baskets=t.baskets,this.user.redirectedBaskets=t.redirectedBaskets,this.selectionBaskets.clear(),this.notify.success(this.translate.instant("lang.basketUpdated"))},t=>{this.notify.error(t.error.errors)})}reassignBasketRedirection(t,e,i){confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.redirectBasket"))&&this.http.post("../rest/users/"+this.serialId+"/redirectedBaskets",[{actual_user_id:t.serialId,basket_id:e.basket_id,group_id:e.group_id,originalOwner:e.owner_user_id}]).subscribe(t=>{this.user.baskets=t.baskets,this.user.assignedBaskets.splice(i,1),this.notify.success(this.translate.instant("lang.basketUpdated"))},t=>{this.notify.error(t.error.errors)})}delBasketRedirection(t,e){confirm(this.translate.instant("lang.confirmAction"))&&this.http.delete("../rest/users/"+this.serialId+"/redirectedBaskets?redirectedBasketIds[]="+t.id).subscribe(t=>{this.user.baskets=t.baskets,this.user.redirectedBaskets.splice(e,1),this.notify.success(this.translate.instant("lang.basketUpdated"))},t=>{this.notify.error(t.error.errors)})}delBasketAssignRedirection(t,e){confirm(this.translate.instant("lang.confirmAction"))&&this.http.delete("../rest/users/"+this.serialId+"/redirectedBaskets?redirectedBasketIds[]="+t.id).subscribe(t=>{this.user.baskets=t.baskets,this.user.assignedBaskets.splice(e,1),this.notify.success(this.translate.instant("lang.basketUpdated"))},t=>{this.notify.error(t.error.errors)})}toggleBasket(t){const e=[];this.user.baskets.forEach(i=>{this.selectionBaskets.selected.forEach(a=>{i.basket_id===a.basket_id&&i.group_id===a.group_id&&i.allowed!==t&&(i.allowed=t,e.push({basketId:i.basket_id,groupSerialId:i.groupSerialId,allowed:t}))})}),e.length>0&&this.http.put("../rest/users/"+this.serialId+"/baskets",{baskets:e}).subscribe(t=>{this.selectionBaskets.clear(),this.notify.success(this.translate.instant("lang.basketsUpdated"))},t=>{this.notify.error(t.error.errors)})}activateAbsence(){this.http.put("../rest/users/"+this.serialId+"/status",{status:"ABS"}).subscribe(t=>{this.user.status=t.user.status,this.userAbsenceModel=[],this.notify.success(this.translate.instant("lang.absOn"))},t=>{this.notify.error(t.error.errors)})}desactivateAbsence(){this.http.put("../rest/users/"+this.serialId+"/status",{status:"OK"}).subscribe(t=>{this.user.status=t.user.status,this.notify.success(this.translate.instant("lang.absOff"))},t=>{this.notify.error(t.error.errors)})}getErrorMessage(){return this.firstFormGroup.controls.retypePasswordCtrl.setErrors(this.firstFormGroup.controls.newPasswordCtrl.value!==this.firstFormGroup.controls.retypePasswordCtrl.value?{mismatch:!0}:null),this.firstFormGroup.controls.newPasswordCtrl.hasError("required")?this.translate.instant("lang.requiredField")+" !":this.firstFormGroup.controls.newPasswordCtrl.hasError("minlength")&&this.passwordRules.minLength.enabled?this.passwordRules.minLength.value+" "+this.translate.instant("lang.passwordminLength")+" !":null!=this.firstFormGroup.controls.newPasswordCtrl.errors&&void 0!==this.firstFormGroup.controls.newPasswordCtrl.errors.complexityUpper&&this.passwordRules.complexityUpper.enabled?this.translate.instant("lang.passwordcomplexityUpper")+" !":null!=this.firstFormGroup.controls.newPasswordCtrl.errors&&void 0!==this.firstFormGroup.controls.newPasswordCtrl.errors.complexityNumber&&this.passwordRules.complexityNumber.enabled?this.translate.instant("lang.passwordcomplexityNumber")+" !":null!=this.firstFormGroup.controls.newPasswordCtrl.errors&&void 0!==this.firstFormGroup.controls.newPasswordCtrl.errors.complexitySpecial&&this.passwordRules.complexitySpecial.enabled?this.translate.instant("lang.passwordcomplexitySpecial")+" !":(this.firstFormGroup.controls.newPasswordCtrl.setErrors(null),this.validPassword=!0,"")}matchValidator(t){return t.controls.newPasswordCtrl.value!==t.controls.retypePasswordCtrl.value&&(t.controls.retypePasswordCtrl.setErrors({mismatch:!0}),{mismatch:!0})}regexValidator(t,e){return i=>i.value?t.test(i.value)?null:e:null}changePasswd(){this.http.get("../rest/passwordRules").subscribe(t=>{const e=[],i=[],a=[];e.push(c.I.required),t.rules.forEach(t=>{"minLength"===t.label?(this.passwordRules.minLength.enabled=t.enabled,this.passwordRules.minLength.value=t.value,t.enabled&&(e.push(c.I.minLength(this.passwordRules.minLength.value)),i.push(t.value+" "+this.translate.instant("lang.password"+t.label)))):"complexityUpper"===t.label?(this.passwordRules.complexityUpper.enabled=t.enabled,this.passwordRules.complexityUpper.value=t.value,t.enabled&&(e.push(this.regexValidator(new RegExp("[A-Z]"),{complexityUpper:""})),i.push(this.translate.instant("lang.password"+t.label)))):"complexityNumber"===t.label?(this.passwordRules.complexityNumber.enabled=t.enabled,this.passwordRules.complexityNumber.value=t.value,t.enabled&&(e.push(this.regexValidator(new RegExp("[0-9]"),{complexityNumber:""})),i.push(this.translate.instant("lang.password"+t.label)))):"complexitySpecial"===t.label?(this.passwordRules.complexitySpecial.enabled=t.enabled,this.passwordRules.complexitySpecial.value=t.value,t.enabled&&(e.push(this.regexValidator(new RegExp("[^A-Za-z0-9]"),{complexitySpecial:""})),i.push(this.translate.instant("lang.password"+t.label)))):"renewal"===t.label?(this.passwordRules.renewal.enabled=t.enabled,this.passwordRules.renewal.value=t.value,t.enabled&&a.push(this.translate.instant("lang.password"+t.label)+" <b>"+t.value+" "+this.translate.instant("lang.days")+"</b>. "+this.translate.instant("lang.password2"+t.label)+".")):"historyLastUse"===t.label&&(this.passwordRules.historyLastUse.enabled=t.enabled,this.passwordRules.historyLastUse.value=t.value,t.enabled&&a.push(this.translate.instant("lang.passwordhistoryLastUseDesc")+" <b>"+t.value+"</b> "+this.translate.instant("lang.passwordhistoryLastUseDesc2")+"."))}),this.ruleText=i.join(", "),this.otherRuleText=a.join("<br/>"),this.firstFormGroup.controls.newPasswordCtrl.setValidators(e)},t=>{this.notify.error(t.error.errors)}),this.firstFormGroup=this._formBuilder.group({newPasswordCtrl:[""],retypePasswordCtrl:["",c.I.compose([c.I.required])],currentPasswordCtrl:["",c.I.compose([c.I.required])]},{validator:this.matchValidator}),this.validPassword=!1,this.firstFormGroup.controls.currentPasswordCtrl.setErrors(null),this.firstFormGroup.controls.newPasswordCtrl.setErrors(null),this.firstFormGroup.controls.retypePasswordCtrl.setErrors(null),this.showPassword=!0,this.selectedTabIndex=0}updatePassword(){this.passwordModel.currentPassword=this.firstFormGroup.controls.currentPasswordCtrl.value,this.passwordModel.newPassword=this.firstFormGroup.controls.newPasswordCtrl.value,this.passwordModel.reNewPassword=this.firstFormGroup.controls.retypePasswordCtrl.value,this.http.put("../rest/users/"+this.serialId+"/password",this.passwordModel).subscribe(()=>{this.showPassword=!1,this.passwordModel={currentPassword:"",newPassword:"",reNewPassword:""},this.notify.success(this.translate.instant("lang.passwordUpdated"))},t=>{this.notify.error(t.error.errors)})}onSubmit(){if(this.creationMode){let t=!0;this.http.get("../rest/users/"+this.user.userId+"/status").subscribe(e=>{let i=!1;e.status&&"DEL"===e.status&&(t=confirm(this.translate.instant("lang.reactivateUserDeleted")),i=!0),t&&this.http.post("../rest/users",this.user).subscribe(t=>{this.notify.success(this.translate.instant(i?"lang.userUpdated":"lang.userAdded")),this.router.navigate(["/administration/users/"+t.id])},t=>{this.notify.error(t.error.errors)})},t=>{this.notify.error(t.error.errors)})}else{const t=Object.assign({},this.user);"rest"===this.user.mode&&(t.authorizedApi=""!==this.user.authorizedApi.split("\n")[0]?this.user.authorizedApi.split("\n"):[]),this.http.put("../rest/users/"+this.serialId,t).subscribe(t=>{this.headerService.user.id==this.serialId&&this.headerService.resfreshCurrentUser(),this.notify.success(this.translate.instant("lang.userUpdated"))},t=>{this.notify.error(t.error.errors)})}}setUserModeLogin(t){this.user.mode=t.checked?"rest":"standard"}sendToMaarchParapheur(){confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.createUserInMaarchParapheur"))&&this.http.put("../rest/users/"+this.serialId+"/maarchParapheur","").subscribe(t=>{this.notify.success(this.translate.instant("lang.userCreatedInMaarchParapheur")),this.user.external_id.maarchParapheur=t.externalId,this.user.canCreateMaarchParapheurUser=!1},t=>{this.notify.error(t.error.errors)})}setLowerUserId(){this.user.userId=this.user.userId.toLowerCase()}syncMP(){this.loadingSign=!0,this.http.put("../rest/users/"+this.user.id+"/externalSignatures",{}).subscribe(t=>{this.loadingSign=!1,this.notify.success(this.translate.instant("lang.signsSynchronized"))},t=>{this.loadingSign=!1,this.notify.error(t.error.errors)})}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(o.a),p.Qb(o.c),p.Qb(p.C),p.Qb(y.a),p.Qb(z.b),p.Qb(m.a),p.Qb(c.h),p.Qb(f.a),p.Qb(g.a),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(Ue,!0),p.Kc($e,!0),p.Xc(ze,!0),p.Xc(N.a,!0),p.Xc(H.a,!0)),2&t&&(p.yc(i=p.ec())&&(e.sidenavRight=i.first),p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.maarchTree=i.first),p.yc(i=p.ec())&&(e.paginator=i.first),p.yc(i=p.ec())&&(e.sort=i.first))},decls:27,vars:19,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",2,"overflow-x","hidden","max-width","500px",3,"mode","fixedInViewport","opened"],["snav2",""],["mat-subheader",""],[4,"ngFor","ngForOf"],[4,"ngIf"],["mat-list-item","",3,"click",4,"ngIf"],["mat-list-item","",3,"title","click",4,"ngIf"],["mat-list-item","",3,"click"],["color","warn","mat-list-icon","",1,"fa","fa-plane"],["mat-line",""],["color","accent","mat-list-icon","",1,"fa","fa-check"],["color","primary","mat-list-icon","",1,"fa","fa-paper-plane"],["color","primary","mat-list-icon","",1,"fa","fa-key"],["mat-list-item","",3,"title","click"],["color","primary","mat-list-icon","",1,"fa","fa-link"],["mat-line","","style","font-size:11px;color:red",4,"ngIf"],["mat-line","",2,"font-size","11px","color","red"],["color","primary","mat-list-icon","",1,"avatarAccount"],["mat-line","",1,"accountInfo"],["mat-icon-button","","color","warn",3,"title","click"],[1,"fas","fa-unlink"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[3,"selectedIndex","selectedIndexChange","selectedTabChange"],[3,"label"],["style","margin-bottom: 5%",4,"ngIf"],["class","text-warning","style","position: absolute;opacity: 0.25;font-size: 120px;transform: rotate(324deg);-webkit-transform: rotate(324deg);margin-left: 35%;margin-top: 90px;",4,"ngIf"],["class","form-horizontal",3,"ngSubmit",4,"ngIf"],[3,"label",4,"ngIf"],[3,"label","disabled",4,"ngIf"],[2,"margin-bottom","5%"],[3,"formGroup"],[1,"form-group"],[2,"padding","10px"],["matInput","","formControlName","currentPasswordCtrl","required","",3,"placeholder","type"],["matSuffix","",1,"fa","fa-2x",3,"ngClass","click"],[2,"text-align","center","color","rgba(0,0,0,0.54)","font-size","75%"],[1,"col-sm-6",2,"padding-left","0px","padding-right","0px"],["matInput","","formControlName","newPasswordCtrl","required","",3,"placeholder","type"],["inputPasswd",""],["matInput","","required","","formControlName","retypePasswordCtrl",3,"placeholder","type"],["inputPasswd2",""],["class","form-group",4,"ngIf"],[2,"text-align","center"],["mat-raised-button","","color","primary","type","button",3,"disabled","click"],["mat-raised-button","","color","default","type","button",3,"click"],["color","accent",1,"fa","fa-check"],["color","accent"],[1,"col-sm-12",2,"padding-left","0px","padding-right","0px"],["role","alert",1,"alert","alert-warning",2,"text-align","center",3,"innerHTML"],[1,"text-warning",2,"position","absolute","opacity","0.25","font-size","120px","transform","rotate(324deg)","-webkit-transform","rotate(324deg)","margin-left","35%","margin-top","90px"],[1,"form-horizontal",3,"ngSubmit"],["profileForm","ngForm"],[1,"col-sm-12"],[1,"pull-left"],[1,"avatar",2,"font-size","90px","text-align","center"],[1,"fa","fa-user",2,"font-size","90px","padding-top","5px"],[1,"input-group"],["matInput","","type","text","name","user_id","pattern","^[\\w.@-]*$","required","",3,"title","ngModel","placeholder","ngModelChange","keyup",4,"ngIf"],["matInput","","type","text","disabled","",3,"title","value","placeholder",4,"ngIf"],[1,"col-sm-5",2,"font-weight","bold"],["matInput","","type","text","id","lastname","name","lastname","required","",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","type","text","id","firstname","name","firstname","required","",3,"title","placeholder","ngModel","ngModelChange"],[1,"col-sm-2",2,"font-style","italic"],["matInput","","type","text","id","initials","name","initials",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","type","tel","id","phone","name","phone","pattern","\\+?((|\\ |\\.|\\(|\\)|\\-)?(\\d)*)*\\d$",3,"title","placeholder","ngModel","disabled","ngModelChange"],["matInput","","type","email","id","mail","name","mail","pattern","(^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$)","required","",3,"title","placeholder","ngModel","ngModelChange"],[3,"expanded"],[2,"color","rgba(0,0,0,0.54)"],["id","accountType","name","accountType","required","",3,"ngModel","disabled","ngModelChange"],[1,"form-group",2,"margin-top","10px"],["mat-raised-button","","color","primary","type","submit",3,"disabled",4,"ngIf"],["matInput","","type","text","name","user_id","pattern","^[\\w.@-]*$","required","",3,"title","ngModel","placeholder","ngModelChange","keyup"],["matInput","","type","text","disabled","",3,"title","value","placeholder"],[3,"value","disabled","title"],["matInput","","name","authorizedApi","placeholder","Ex : PUT/attachments/{id}",3,"ngModel","ngModelChange"],["target","_blank",3,"href"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["disableRipple","true",4,"ngFor","ngForOf"],["disableRipple","true"],["color","primary",3,"id","checked","disabled","change"],[3,"selectionPropagation","openState","afterSelectNode","afterDeselectNode"],["maarchTree",""],[1,"col-sm-6",2,"overflow","hidden"],["mat-list-icon","","color","primary"],["color","primary",3,"checked","matTooltip","change"],["mat-line","","style","opacity: 0.5;font-style: italic;font-size: 80%;margin-top:10px;",4,"ngIf"],["mat-line","","style","margin-top:10px;",4,"ngIf"],["mat-line","",2,"opacity","0.5","font-style","italic","font-size","80%","margin-top","10px"],["mat-line","",2,"margin-top","10px"],["mat-icon-button","",3,"matMenuTriggerFor","matTooltip"],[1,"fa","fa-reply"],[1,"vertical-divider",3,"vertical"],["color","warn","mat-icon-button","",3,"matTooltip","click"],[1,"fa","fa-ban"],["color","accent","mat-icon-button","",3,"matTooltip","click"],[1,"fa","fa-check"],[2,"width","200px !important"],["menu","matMenu"],["appearance","outline",3,"labelPlaceholder","routeDatas","targetSearchKey","subInfoKey","triggerEvent"],["style","cursor: pointer;",4,"ngIf"],[2,"cursor","pointer"],["mat-list-icon","","color","primary",4,"ngIf"],["mat-line","","color","primary",2,"display","flex","align-items","center"],[2,"flex","2","overflow","hidden","text-overflow","ellipsis",3,"matTooltip","ngStyle","click"],[1,"label","label-primary",2,"font-weight","normal"],["color","primary",3,"checked","click","change"],["mat-list-icon","","color","primary",1,"fa","fa-paper-plane",2,"margin-top","-60px"],["mat-line","","color","primary"],["type","text","color","warn","matInput","","disabled","",3,"value"],["mat-button","","color","warn","matSuffix","","mat-icon-button","","aria-label","Clear",3,"matTooltip","click"],["color","warn",1,"fa","fa-times","text-danger"],["mat-list-icon","","color","primary",1,"fa","fa-reply",2,"margin-top","-60px"],["appearance","outline",3,"labelPlaceholder","routeDatas","targetSearchKey","subInfoKey","triggerEvent",4,"ngIf"],["color","primary",1,"fa","fa-edit"],[3,"label","disabled"],["dnd-droppable","","class","dndFile",3,"matTooltip","dndFileHighlighted","click","dragover","dragleave","onDropSuccess",4,"ngIf"],[2,"display","flex","align-items","flex-start"],[2,"flex","1"],["class","col-md-3 col-sm-6 col-xm-12",4,"ngFor","ngForOf"],["mat-icon-button","","color","primary",3,"matTooltip","disabled","click",4,"ngIf"],[2,"display","none",3,"ngSubmit"],["signatureForm","ngForm"],[1,"col-md-11"],["type","text","id","signLabel","name","label","required","",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"form-inline","hide"],["type","file","name","files[]","id","uploadSignFile","accept","image/*",3,"change"],[1,"col-md-1",2,"margin-bottom","5px"],["type","submit",1,"form-control","btn","btn-sm","btn-success",3,"disabled"],[1,"fa","fa-plus"],[3,"ngClass"],[1,"upload-drop-zone",2,"cursor","pointer",3,"click"],[1,"fa","fa-upload","fa-2x"],["class","col-md-2",4,"ngIf"],["dnd-droppable","",1,"dndFile",3,"matTooltip","click","dragover","dragleave","onDropSuccess"],[1,"col-md-3","col-sm-6","col-xm-12"],[2,"margin-bottom","10px","overflow","hidden"],["floatLabel","never"],["matInput","","type","text","name","selectedSignatureLabel",3,"ngModel","placeholder","disabled","ngModelChange","change"],["mat-button","","matSuffix","","mat-icon-button","","color","warn",3,"matTooltip","disabled","click"],[1,"fa","fa-times"],["alt","Signature",2,"width","auto","height","60px",3,"src"],["mat-icon-button","","color","primary",3,"matTooltip","disabled","click"],[1,"fa","fa-sync-alt","fa-2x"],[1,"col-md-2"],["id","signaturePreview","alt","Invalid image",2,"width","100%",3,"src"],[1,"col-md-12"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"placeholder","keyup"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortActive","event_date","matSortDirection","desc",3,"dataSource"],["table",""],["matColumnDef","event_date"],["mat-sort-header","","style","flex:1;",4,"matHeaderCellDef"],["style","flex:1;",4,"matCellDef"],["matColumnDef","record_id"],["style","flex:1;",4,"matHeaderCellDef"],["matColumnDef","info"],["mat-sort-header","","style","flex:2;",4,"matHeaderCellDef"],["style","flex:2;",4,"matCellDef"],["matColumnDef","remote_ip"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"col-md-3","pull-right",2,"padding-top","10px"],["matInput","","disabled","",3,"ngModel","matDatepicker","placeholder","ngModelChange"],["matSuffix","",3,"for"],["startView","month",3,"startAt"],["picker",""],["mat-sort-header","",2,"flex","1"],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],["color","primary","mat-list-icon","",1,"fa","fa-users"],[2,"font-size","10px"],["matInput","","type","text","id","role","name","role",3,"title","placeholder","ngModel","ngModelChange","change"],[3,"matTooltip"],["color","primary","mat-list-icon","","class","fa fa-sitemap",4,"ngIf"],["color","primary","mat-list-icon","","class","fa fa-sitemap","style","position:relative;",4,"ngIf"],["mat-line","",3,"ngStyle","matTooltip"],["class","label label-primary","style","font-weight:normal",4,"ngIf"],["color","primary","mat-list-icon","",1,"fa","fa-sitemap"],["color","primary","mat-list-icon","",1,"fa","fa-sitemap",2,"position","relative"],["mat-icon-button","",2,"cursor","pointer","position","absolute","right","-20px","top","-20px","font-size","10px",3,"matTooltip","click"],[1,"fa","fa-arrow-up"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,Ye,3,2,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,Ze,2,0,"div",9),p.Oc(14,Hi,12,12,"mat-card",10),p.Vb(),p.Vb(),p.Vb(),p.Wb(15,"mat-sidenav",11,12),p.Wb(17,"mat-list"),p.Wb(18,"h3",13),p.Qc(19),p.ic(20,"translate"),p.Vb(),p.Oc(21,Bi,12,12,"mat-list-item",14),p.Rb(22,"mat-divider"),p.Wb(23,"h3",13),p.Qc(24),p.ic(25,"translate"),p.Vb(),p.Oc(26,Ji,11,15,"mat-list-item",14),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading),p.Db(1),p.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!e.appService.getViewMode()&&!e.creationMode),p.Db(4),p.Rc(p.jc(20,15,"lang.groups")),p.Db(2),p.oc("ngForOf",e.user.groups),p.Db(3),p.Rc(p.jc(25,17,"lang.entities")),p.Db(2),p.oc("ngForOf",e.user.entities))},directives:[C.e,C.f,M.a,x.a,O.t,C.d,wt.a,wt.g,O.s,_.a,wt.h,wt.d,It.a,wt.c,k.l,R.b,I.c,j.a,ke.c,ke.a,c.K,c.v,c.m,S.c,w.b,c.d,c.u,c.k,c.F,S.j,O.q,S.b,S.f,c.w,c.x,c.B,Re.a,Re.c,Re.g,Re.h,S.g,at.a,k.p,et.a,Te.a,Pe.a,kt.b,Qe.d,Qe.e,Rt.a,O.w,Fe.d,j.d,N.a,G.o,H.a,G.c,G.i,G.b,G.k,G.n,Le.h,Le.j,Le.f,G.h,H.b,G.a,G.j,G.m],pipes:[h.d,T.a,O.b,Ee.a,O.f],styles:[".avatar[_ngcontent-%COMP%]{text-decoration:none;background:#135f7f;color:#fff;width:100px;height:100px;border-radius:5px;display:block;overflow:hidden;margin:5px}.form-group[_ngcontent-%COMP%]{margin:0}.vertical-divider[_ngcontent-%COMP%]{height:80%}.avatarAccount[_ngcontent-%COMP%]{border:3px solid #f99830;height:45px!important;width:45px!important;background-size:cover;background-repeat:no-repeat;background-position:50%}.accountInfo[_ngcontent-%COMP%]{margin-left:20px!important;display:flex!important}.accountInfo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;align-items:center;display:flex}"]}),t})(),oa=(()=>{class t{constructor(t,e,i){this.http=t,this.data=e,this.dialogRef=i,this.redirectUser="",this.processMode=""}setRedirectUser(t){this.redirectUser=t}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(u.b),p.Qb(z.a),p.Qb(z.h))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],decls:30,vars:23,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["redirectConfForm","ngForm"],["class","alert-message alert-message-info","role","alert",3,"innerHTML",4,"ngIf"],[1,"input-group"],["id","processMode","name","processMode","color","primary",2,"display","inline-flex","flex-direction","column",3,"ngModel","ngModelChange"],["value","","checked","true","color","primary"],["value","delete","color","primary"],["value","reaffect","color","primary"],["singleMode","","required","",3,"labelPlaceholder","labelList","routeDatas","targetSearchKey","subInfoKey","triggerEvent",4,"ngIf"],["role","alert",1,"alert-message","alert-message-info",2,"max-width","inherit"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"divider-modal"],["mat-raised-button","","color","primary","type","submit",3,"disabled","click"],["role","alert",1,"alert-message","alert-message-info",3,"innerHTML"],["singleMode","","required","",3,"labelPlaceholder","labelList","routeDatas","targetSearchKey","subInfoKey","triggerEvent"],[3,"innerHTML"]],template:function(t,e){1&t&&(p.Wb(0,"div",0),p.Wb(1,"h1",1),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"mat-dialog-content"),p.Wb(5,"form",null,2),p.Oc(7,Yi,2,3,"div",3),p.Oc(8,Zi,2,3,"div",3),p.Wb(9,"div",4),p.Wb(10,"mat-radio-group",5),p.dc("ngModelChange",(function(t){return e.processMode=t})),p.Wb(11,"mat-radio-button",6),p.Qc(12),p.ic(13,"translate"),p.Vb(),p.Wb(14,"mat-radio-button",7),p.Qc(15),p.ic(16,"translate"),p.Vb(),p.Wb(17,"mat-radio-button",8),p.Qc(18),p.ic(19,"translate"),p.Vb(),p.Vb(),p.Oc(20,ta,3,10,"plugin-autocomplete",9),p.Wb(21,"div",10),p.Oc(22,ea,4,3,"span",11),p.Oc(23,ia,2,3,"span",12),p.Oc(24,aa,4,3,"span",11),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Rb(25,"span",13),p.Wb(26,"mat-dialog-actions"),p.Wb(27,"button",14),p.dc("click",(function(){return e.dialogRef.close({newUser:e.redirectUser,processMode:e.processMode})})),p.Qc(28),p.ic(29,"translate"),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(2),p.Rc(p.jc(3,13,"lang.redirects")),p.Db(5),p.oc("ngIf",e.data.hasConfidentialityInstances),p.Db(1),p.oc("ngIf",e.data.hasListTemplates),p.Db(2),p.oc("ngModel",e.processMode),p.Db(2),p.Sc(" ",p.jc(13,15,"lang.doNothingRedirect")," "),p.Db(3),p.Sc(" ",p.jc(16,17,"lang.removeUserRedirect")," "),p.Db(3),p.Sc(" ",p.jc(19,19,"lang.reaffectUserRedirect")," "),p.Db(2),p.oc("ngIf","reaffect"==e.processMode),p.Db(2),p.oc("ngIf",""==e.processMode),p.Db(1),p.oc("ngIf","delete"==e.processMode),p.Db(1),p.oc("ngIf","reaffect"==e.processMode),p.Db(3),p.oc("disabled",!e.redirectUser&&"reaffect"==e.processMode),p.Db(1),p.Rc(p.jc(29,21,"lang.validate")))},directives:[z.i,z.f,c.K,c.v,c.w,O.t,Ae.b,c.u,c.x,Ae.a,z.c,R.b,Rt.a],pipes:[h.d],styles:[".mat-dialog-content[_ngcontent-%COMP%]{max-height: 65vh;width:600px;}"]}),t})();const sa=["snav2"],ca=["adminMenuTemplate"];function ra(t,e){1&t&&(p.Wb(0,"mat-nav-list"),p.Wb(1,"h3",11),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"a",12),p.Rb(5,"mat-icon",13),p.Wb(6,"p",14),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(2),p.Rc(p.jc(3,2,"lang.actions")),p.Db(5),p.Sc(" ",p.jc(8,4,"lang.add")," "))}function la(t,e){1&t&&(p.Wb(0,"div",15),p.Rb(1,"mat-spinner",16),p.Vb())}function da(t,e){if(1&t&&(p.Wb(0,"mat-header-cell",37),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=p.hc(2);p.Ib("hide-for-mobile",t.appService.getViewMode()),p.Db(1),p.Rc(p.jc(2,3,"lang.id"))}}function ba(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.Ib("hide-for-mobile",i.appService.getViewMode()),p.Db(1),p.Sc(" ",t.group_id," ")}}function pa(t,e){1&t&&(p.Wb(0,"mat-header-cell",38),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc("",p.jc(2,1,"lang.description")," "))}function ha(t,e){if(1&t&&(p.Wb(0,"mat-cell",39),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.group_desc," ")}}function ua(t,e){1&t&&p.Rb(0,"mat-header-cell",40)}function ma(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-cell",41),p.Wb(1,"button",42),p.dc("click",(function(i){p.Dc(t);const a=e.$implicit,n=p.hc(2);return i.stopPropagation(),n.preDelete(a)})),p.ic(2,"translate"),p.Rb(3,"mat-icon",43),p.Vb(),p.Vb()}2&t&&(p.Db(1),p.pc("matTooltip",p.jc(2,1,"lang.delete")))}function fa(t,e){1&t&&p.Rb(0,"mat-header-row")}function ga(t,e){1&t&&(p.Rb(0,"mat-row",44),p.ic(1,"translate")),2&t&&(p.qc("routerLink","/administration/groups/",e.$implicit.id,""),p.pc("matTooltip",p.jc(1,2,"lang.view")))}function va(t,e){if(1&t&&(p.Wb(0,"mat-card",17),p.Wb(1,"div",18),p.Wb(2,"div",19),p.Wb(3,"mat-form-field"),p.Rb(4,"input",20),p.ic(5,"translate"),p.Vb(),p.Vb(),p.Wb(6,"div",19),p.Rb(7,"mat-paginator",21,22),p.Vb(),p.Vb(),p.Wb(9,"mat-table",23,24),p.Ub(11,25),p.Oc(12,da,3,5,"mat-header-cell",26),p.Oc(13,ba,2,3,"mat-cell",27),p.Tb(),p.Ub(14,28),p.Oc(15,pa,3,3,"mat-header-cell",29),p.Oc(16,ha,2,1,"mat-cell",30),p.Tb(),p.Ub(17,31),p.Oc(18,ua,1,0,"mat-header-cell",32),p.Oc(19,ma,4,3,"mat-cell",33),p.Tb(),p.Oc(20,fa,1,0,"mat-header-row",34),p.Oc(21,ga,2,4,"mat-row",35),p.Vb(),p.Wb(22,"div",36),p.Qc(23),p.ic(24,"translate"),p.Vb(),p.Vb()),2&t){const t=p.hc();p.Db(4),p.pc("placeholder",p.jc(5,10,"lang.filterBy")),p.oc("formControl",t.adminService.getFilterField()),p.Db(3),p.oc("length",100)("hidePageSize",!0)("pageSize",10),p.Db(2),p.oc("dataSource",t.adminService.getDataSource()),p.Db(11),p.oc("matHeaderRowDef",t.displayedColumns),p.Db(1),p.oc("matRowDefColumns",t.displayedColumns),p.Db(2),p.Tc(" ",t.groups.length," ",p.jc(24,12,"lang.groups"),"")}}function ya(t,e){if(1&t&&(p.Wb(0,"mat-list-item",11),p.Rb(1,"mat-icon",12),p.Rb(2,"h4",13),p.Wb(3,"p",13),p.Qc(4),p.Vb(),p.Vb()),2&t){const t=e.$implicit;p.Db(4),p.Tc(" ",t.firstname," ",t.lastname,"")}}function Da(t,e){if(1&t&&(p.Wb(0,"mat-option",14),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t.id),p.Db(1),p.Sc(" ",t.group_desc," ")}}let Va=(()=>{class t{constructor(t,e,i,a,n,o,s,c,r){this.translate=t,this.http=e,this.notify=i,this.dialog=a,this.headerService=n,this.appService=o,this.functions=s,this.adminService=c,this.viewContainerRef=r,this.loading=!1,this.config={},this.groups=[],this.groupsForAssign=[],this.displayedColumns=["group_id","group_desc","actions"],this.filterColumns=["group_id","group_desc"]}ngOnInit(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.groups")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/groups").subscribe(t=>{this.groups=t.groups,this.loading=!1,setTimeout(()=>{this.adminService.setDataSource("admin_groups",this.groups,this.sort,this.paginator,this.filterColumns)},0)},t=>{this.notify.handleErrors(t)})}preDelete(t){0===t.users.length?confirm(this.translate.instant("lang.reallyWantToDeleteThisGroup"))&&this.deleteGroup(t):(this.groupsForAssign=[],this.groups.forEach(e=>{t.group_id!==e.group_id&&this.groupsForAssign.push(e)}),this.config={panelClass:"maarch-modal",data:{id:t.id,group_desc:t.group_desc,groupsForAssign:this.groupsForAssign,users:t.users}},this.dialogRef=this.dialog.open(Ca,this.config),this.dialogRef.afterClosed().subscribe(e=>{e&&("_NO_REPLACEMENT"===e?this.deleteGroup(t):this.http.put("../rest/groups/"+t.id+"/reassign/"+e,{}).subscribe(e=>{this.deleteGroup(t)},t=>{this.notify.error(t.error.errors)})),this.dialogRef=null}))}deleteGroup(t){this.http.delete("../rest/groups/"+t.id).subscribe(t=>{setTimeout(()=>{this.groups=t.groups,this.adminService.setDataSource("admin_groups",this.groups,this.sort,this.paginator,this.filterColumns)},0),this.notify.success(this.translate.instant("lang.groupDeleted"))},t=>{this.notify.error(t.error.errors)})}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(z.b),p.Qb(m.a),p.Qb(f.a),p.Qb(D.a),p.Qb(St),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(sa,!0),p.Kc(ca,!0),p.Xc(N.a,!0),p.Xc(H.a,!0)),2&t&&(p.yc(i=p.ec())&&(e.sidenavRight=i.first),p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.paginator=i.first),p.yc(i=p.ec())&&(e.sort=i.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/groups/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row",2,"margin","0px"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSortDisableClear","","matSort","",3,"dataSource"],["table",""],["matColumnDef","group_id"],["mat-sort-header","",3,"hide-for-mobile",4,"matHeaderCellDef"],[3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","group_desc"],["mat-sort-header","","style","flex:2;",4,"matHeaderCellDef"],["style","flex:2;",4,"matCellDef"],["matColumnDef","actions"],["style","flex:1;",4,"matHeaderCellDef"],["style","justify-content: flex-end;flex:1;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header",""],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],[2,"flex","1"],[2,"justify-content","flex-end","flex","1"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,ra,9,6,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,la,2,0,"div",9),p.Oc(14,va,25,14,"mat-card",10),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading))},directives:[C.e,C.f,M.a,x.a,O.t,wt.h,wt.g,wt.d,o.f,It.a,wt.c,k.l,I.c,j.a,S.c,w.b,c.d,c.u,c.j,N.a,G.o,H.a,G.c,G.i,G.b,G.k,G.n,G.h,H.b,G.a,R.b,kt.b,G.j,G.m,o.d],pipes:[h.d],encapsulation:2}),t})(),Ca=(()=>{class t{constructor(t,e,i){this.http=t,this.data=e,this.dialogRef=i}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(u.b),p.Qb(z.a),p.Qb(z.h))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],decls:34,vars:30,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["changeGroupUsersForm","ngForm"],["role","alert",1,"alert-message","alert-message-info"],["style","height:25px;",4,"ngFor","ngForOf"],["id","groups_redirect","name","groups_redirect","required","",3,"title","placeholder","ngModel","ngModelChange"],["value","_NO_REPLACEMENT"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[1,"divider-modal"],["mat-raised-button","","color","primary","type","submit",3,"disabled","click"],[2,"height","25px"],["mat-list-icon","","color","primary",1,"fa","fa-user"],["mat-line",""],[3,"value"]],template:function(t,e){if(1&t&&(p.Wb(0,"div",0),p.Wb(1,"h2",1),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"mat-dialog-content"),p.Wb(5,"form",null,2),p.Wb(7,"div",3),p.Qc(8," Le groupe "),p.Wb(9,"b"),p.Qc(10),p.Vb(),p.Qc(11),p.ic(12,"translate"),p.Wb(13,"b"),p.Qc(14),p.Vb(),p.Qc(15),p.ic(16,"translate"),p.Wb(17,"mat-list"),p.Oc(18,ya,5,2,"mat-list-item",4),p.Vb(),p.Vb(),p.Wb(19,"mat-form-field"),p.Wb(20,"mat-select",5),p.dc("ngModelChange",(function(t){return e.data.group_redirect=t})),p.ic(21,"translate"),p.ic(22,"translate"),p.Wb(23,"mat-option",6),p.Qc(24),p.ic(25,"translate"),p.Vb(),p.Wb(26,"mat-optgroup",7),p.ic(27,"translate"),p.Oc(28,Da,2,2,"mat-option",8),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Rb(29,"span",9),p.Wb(30,"mat-dialog-actions"),p.Wb(31,"button",10),p.dc("click",(function(){return e.dialogRef.close(e.data.group_redirect)})),p.Qc(32),p.ic(33,"translate"),p.Vb(),p.Vb(),p.Vb()),2&t){const t=p.zc(6);p.Db(2),p.Rc(p.jc(3,14,"lang.groupRedirect")),p.Db(8),p.Rc(e.data.group_desc),p.Db(1),p.Sc(" ",p.jc(12,16,"lang.isAssociatedTo")," "),p.Db(3),p.Rc(e.data.users.length),p.Db(1),p.Sc(" ",p.jc(16,18,"lang.usersAlt"),": "),p.Db(3),p.oc("ngForOf",e.data.users),p.Db(2),p.pc("title",p.jc(21,20,"lang.chooseRedirectGroup")),p.pc("placeholder",p.jc(22,22,"lang.chooseRedirectGroup")),p.oc("ngModel",e.data.group_redirect),p.Db(4),p.Sc("-- ",p.jc(25,24,"lang.noReplacement")," --"),p.Db(2),p.pc("label",p.jc(27,26,"lang.groups")),p.Db(2),p.oc("ngForOf",e.data.groupsForAssign),p.Db(3),p.oc("disabled",!t.form.valid),p.Db(1),p.Rc(p.jc(33,28,"lang.validate"))}},directives:[z.i,z.f,c.K,c.v,c.w,wt.a,O.s,S.c,at.a,c.F,c.u,c.x,k.p,k.o,z.c,R.b,wt.d,It.a,wt.c,k.l],pipes:[h.d],encapsulation:2}),t})();var Ma=i("5+WD");function Wa(t,e){1&t&&(p.Wb(0,"div",19),p.Rb(1,"mat-spinner",20),p.Vb())}function xa(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",21),p.Qc(1),p.ic(2,"translate"),p.Wb(3,"button",22),p.dc("click",(function(){p.Dc(t);const e=p.hc();return e.toggleIndex(!e.indexingInfo.canIndex)})),p.Qc(4),p.ic(5,"translate"),p.Vb(),p.Vb()}2&t&&(p.Db(1),p.Sc("",p.jc(2,2,"lang.warnIndex")," "),p.Db(3),p.Rc(p.jc(5,4,"lang.enableIndex")))}function Oa(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",23),p.dc("click",(function(){p.Dc(t);const e=p.hc();return e.toggleIndex(!e.indexingInfo.canIndex)})),p.Qc(1),p.ic(2,"translate"),p.Vb()}2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.disableIndex")))}function _a(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-list-item",24),p.Wb(1,"div"),p.Rb(2,"i",25),p.Vb(),p.Wb(3,"div",26),p.Qc(4),p.Vb(),p.Wb(5,"div"),p.Wb(6,"button",27),p.dc("click",(function(){p.Dc(t);const i=e.index;return p.hc().removeAction(i)})),p.Rb(7,"mat-icon",28),p.Vb(),p.Vb(),p.Rb(8,"mat-divider"),p.Vb()}if(2&t){const t=e.$implicit;p.oc("cdkDragData",t),p.Db(4),p.Sc(" ",t.label_action,"")}}let Sa=(()=>{class t{constructor(t,e,i,a){this.translate=t,this.http=e,this.notify=i,this.dialog=a,this.loading=!0,this.resfreshShortcut=new p.o,this.keywordEntities=[],this.actionList=[],this.indexingInfo={canIndex:!1,actions:[],keywords:[],entities:[]},this.keywordEntities=[{id:"ALL_ENTITIES",keyword:"ALL_ENTITIES",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.allEntities")},{id:"ENTITIES_JUST_BELOW",keyword:"ENTITIES_JUST_BELOW",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.immediatelyBelowMyPrimaryEntity")},{id:"ENTITIES_BELOW",keyword:"ENTITIES_BELOW",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.belowAllMyEntities")},{id:"ALL_ENTITIES_BELOW",keyword:"ALL_ENTITIES_BELOW",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.belowMyPrimaryEntity")},{id:"MY_ENTITIES",keyword:"MY_ENTITIES",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.myEntities")},{id:"MY_PRIMARY_ENTITY",keyword:"MY_PRIMARY_ENTITY",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.myPrimaryEntity")},{id:"SAME_LEVEL_ENTITIES",keyword:"SAME_LEVEL_ENTITIES",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.sameLevelMyPrimaryEntity")},{id:"ENTITIES_JUST_UP",keyword:"ENTITIES_JUST_UP",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.immediatelySuperiorMyPrimaryEntity")}]}ngOnInit(){this.getIndexingInformations().pipe(Object(xt.tap)(t=>this.indexingInfo.canIndex=t.group.canIndex),Object(xt.tap)(t=>this.getActions(t.actions)),Object(xt.tap)(t=>this.getSelectedActions(t.group.indexationParameters.actions)),Object(l.a)(t=>this.getEntities(t)),Object(l.a)(t=>this.getSelectedEntities(t)),Object(xt.tap)(t=>this.initEntitiesTree(t)),Object(vt.a)(()=>this.loading=!1)).subscribe()}initEntitiesTree(t){$("#jstree").jstree({checkbox:{three_state:!1},core:{force_text:!0,themes:{name:"proton",responsive:!0},data:t},plugins:["checkbox","search"]});let e=!1;$("#jstree_search").keyup((function(){e&&clearTimeout(e),e=setTimeout((function(){const t=$("#jstree_search").val();$("#jstree").jstree(!0).search(t)}),250)})),$("#jstree").on("select_node.jstree",(t,e)=>{isNaN(e.node.id)?this.addKeyword(e.node.id):this.addEntity(e.node.id)}).on("deselect_node.jstree",(t,e)=>{isNaN(e.node.id)?this.removeKeyword(e.node.id):this.removeEntity(e.node.id)}).jstree()}getEntities(t){return this.keywordEntities.forEach(e=>{e.state=t.group.indexationParameters.keywords.indexOf(e.id)>-1?{opened:!0,selected:!0}:{opened:!0,selected:!1}}),t.entities=this.keywordEntities.concat(t.entities),t}getSelectedEntities(t){return this.indexingInfo.entities=[...t.group.indexationParameters.entities],this.indexingInfo.keywords=[...t.group.indexationParameters.keywords],t.entities}getActions(t){this.actionList=t}getIndexingInformations(){return this.http.get("../rest/groups/"+this.groupId+"/indexing")}getSelectedActions(t){let e=-1;t.forEach(t=>{e=this.actionList.findIndex(e=>e.id==t),e>-1&&(this.indexingInfo.actions.push(this.actionList[e]),this.actionList.splice(e,1))})}addEntity(t){const e=this.indexingInfo.entities.concat([t]);this.http.put("../rest/groups/"+this.groupId+"/indexing",{entities:e}).pipe(Object(xt.tap)(()=>{this.indexingInfo.entities.push(t)}),Object(xt.tap)(()=>{this.notify.success(this.translate.instant("lang.entityAdded"))}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}removeEntity(t){const e=this.indexingInfo.entities.indexOf(t),i=[...this.indexingInfo.entities];i.splice(e,1),this.http.put("../rest/groups/"+this.groupId+"/indexing",{entities:i}).pipe(Object(xt.tap)(()=>{this.indexingInfo.entities.splice(e,1)}),Object(xt.tap)(()=>{this.notify.success(this.translate.instant("lang.entityDeleted"))}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}addKeyword(t){const e=this.indexingInfo.keywords.concat([t]);this.http.put("../rest/groups/"+this.groupId+"/indexing",{keywords:e}).pipe(Object(xt.tap)(()=>{this.indexingInfo.keywords.push(t)}),Object(xt.tap)(()=>{this.notify.success(this.translate.instant("lang.keywordAdded"))}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}removeKeyword(t){const e=this.indexingInfo.keywords.indexOf(t),i=[...this.indexingInfo.keywords];i.splice(e,1),this.http.put("../rest/groups/"+this.groupId+"/indexing",{keywords:i}).pipe(Object(xt.tap)(()=>{this.indexingInfo.keywords.splice(e,1)}),Object(xt.tap)(()=>{this.notify.success(this.translate.instant("lang.keywordDeleted"))}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}addAction(t){const e=this.indexingInfo.actions.map(t=>t.id).concat([t].map(t=>t.id));this.http.put("../rest/groups/"+this.groupId+"/indexing",{actions:e}).pipe(Object(xt.tap)(()=>{const e=this.actionList.findIndex(e=>e.id===t.id),i=Object.assign({},this.actionList[e]);this.indexingInfo.actions.push(i),this.actionList.splice(e,1)}),Object(xt.tap)(()=>{this.notify.success(this.translate.instant("lang.actionAdded"))}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}removeAction(t){this.dialogRef=this.dialog.open(q.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete"),msg:this.translate.instant("lang.confirmAction")}}),this.dialogRef.afterClosed().pipe(Object(K.a)(t=>"ok"===t),Object(l.a)(()=>{this.dialogRef=null;const e=[...this.indexingInfo.actions];return e.splice(t,1),e.map(t=>t.id)}),Object(J.a)(t=>this.http.put("../rest/groups/"+this.groupId+"/indexing",{actions:t})),Object(xt.tap)(()=>{this.actionList.push(this.indexingInfo.actions[t]),this.indexingInfo.actions.splice(t,1)}),Object(xt.tap)(()=>{this.notify.success(this.translate.instant("lang.actionDeleted"))}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}toggleIndex(t){this.http.put("../rest/groups/"+this.groupId+"/indexing",{canIndex:t}).pipe(Object(xt.tap)(()=>{this.indexingInfo.canIndex=t,this.resfreshShortcut.emit()}),Object(xt.tap)(()=>{this.notify.success(this.translate.instant(this.indexingInfo.canIndex?"lang.indexEnabled":"lang.indexDisabled"))}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}drop(t){if(t.previousContainer===t.container){Object(Ma.h)(t.container.data,t.previousIndex,t.currentIndex);const e=this.indexingInfo.actions.map(t=>t.id);this.http.put("../rest/groups/"+this.groupId+"/indexing",{actions:e}).pipe(Object(xt.tap)(()=>{this.notify.success(this.translate.instant("lang.actionAdded"))}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(z.b))},t.\u0275cmp=p.Kb({type:t,selectors:[["app-indexing-administration"]],inputs:{groupId:"groupId"},outputs:{resfreshShortcut:"resfreshShortcut"},decls:25,vars:18,consts:[["class","loading",4,"ngIf"],[1,"row",2,"margin","0px"],[1,"col-md-12"],["class","alert-message alert-message-danger","role","alert","style","margin-top: 30px;",4,"ngIf"],["color","warn","mat-raised-button","",3,"click",4,"ngIf"],[1,"col-md-8",2,"margin-top","20px"],[1,"formType"],[1,"formType-title"],[1,"infoActions",3,"innerHTML"],["appearance","outline",3,"labelPlaceholder","datas","targetSearchKey","triggerEvent"],["cdkDropList","","role","list",1,"selectedActionList",3,"cdkDropListData","cdkDropListDropped"],["class","selectedAction","role","listitem","cdkDrag","","cdkDragLockAxis","y",3,"cdkDragData",4,"ngFor","ngForOf"],[1,"col-md-4",2,"margin-top","20px"],[1,"formType","jstreeEntities"],["appearance","outline"],["color","primary","matPrefix","",1,"fa","fa-search"],["matInput","","id","jstree_search","name","jstree_search","type","text",3,"placeholder"],["id","jstree"],["jstree",""],[1,"loading"],[2,"margin","auto"],["role","alert",1,"alert-message","alert-message-danger",2,"margin-top","30px"],["mat-raised-button","",3,"click"],["color","warn","mat-raised-button","",3,"click"],["role","listitem","cdkDrag","","cdkDragLockAxis","y",1,"selectedAction",3,"cdkDragData"],["color","primary","cdkDragHandle","",1,"fas","fa-bars","fa-2x",2,"cursor","move"],[1,"actionLabel"],["mat-icon-button","","color","warn",3,"click"],[1,"fa","fa-trash"]],template:function(t,e){1&t&&(p.Oc(0,Wa,2,0,"div",0),p.Wb(1,"div",1),p.Wb(2,"div",2),p.Oc(3,xa,6,6,"div",3),p.Oc(4,Oa,3,3,"button",4),p.Vb(),p.Wb(5,"div",5),p.Wb(6,"div",6),p.Wb(7,"div",7),p.Qc(8),p.ic(9,"translate"),p.Vb(),p.Rb(10,"mat-hint",8),p.Wb(11,"plugin-autocomplete",9),p.dc("triggerEvent",(function(t){return e.addAction(t)})),p.Vb(),p.Wb(12,"mat-list",10),p.dc("cdkDropListDropped",(function(t){return e.drop(t)})),p.Oc(13,_a,9,2,"mat-list-item",11),p.Vb(),p.Vb(),p.Vb(),p.Wb(14,"div",12),p.Wb(15,"div",13),p.Wb(16,"div",7),p.Qc(17),p.ic(18,"translate"),p.Vb(),p.Wb(19,"mat-form-field",14),p.Rb(20,"mat-icon",15),p.Rb(21,"input",16),p.ic(22,"translate"),p.Vb(),p.Rb(23,"div",17,18),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.oc("ngIf",e.loading),p.Db(3),p.oc("ngIf",!e.indexingInfo.canIndex),p.Db(1),p.oc("ngIf",e.indexingInfo.canIndex),p.Db(4),p.Sc(" ",p.jc(9,12,"lang.availableIndexingActions")," "),p.Db(2),p.oc("innerHTML",e.translate.instant("lang.actionsInfo"),p.Ec),p.Db(1),p.oc("labelPlaceholder",e.translate.instant("lang.linkNewAction"))("datas",e.actionList)("targetSearchKey","label_action"),p.Db(1),p.oc("cdkDropListData",e.indexingInfo.actions),p.Db(1),p.oc("ngForOf",e.indexingInfo.actions),p.Db(4),p.Sc(" ",p.jc(18,14,"lang.authorizedEntities")," "),p.Db(4),p.pc("placeholder",p.jc(22,16,"lang.searchEntities")))},directives:[O.t,S.f,Rt.a,wt.a,Ma.e,O.s,S.c,It.a,S.i,w.b,I.c,R.b,wt.d,Ma.a,Ma.b,_.a],pipes:[h.d],styles:[".loading[_ngcontent-%COMP%]{display:flex;height:100%;position:absolute;background:#fff;z-index:2}.loading[_ngcontent-%COMP%], .selectedActionList[_ngcontent-%COMP%]{width:100%}.infoActions[_ngcontent-%COMP%]{font-size:80%}.selectedAction[_ngcontent-%COMP%]{height:70px}.selectedAction[_ngcontent-%COMP%]   .actionLabel[_ngcontent-%COMP%]{padding-left:10px;flex:1}.formType[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:10px;border-radius:4px;border:1px solid #ccc;position:relative;padding:10px}.formType-title[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;max-width:85%;text-overflow:ellipsis;z-index:1;font-size:20px;font-weight:700;background:#fff;position:absolute;top:-18px;left:10px;padding:0;margin:0;color:#135f7f}.alert-message[_ngcontent-%COMP%]{max-width:100%}a[_ngcontent-%COMP%]{cursor:pointer}.jstreeEntities[_ngcontent-%COMP%]   .mat-form-field-appearance-outline[_ngcontent-%COMP%]{font-size:11px}.cdk-drag-preview[_ngcontent-%COMP%]{background:#fff;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-preview[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%], .cdk-drag-preview[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{visibility:hidden}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.selectedAction[_ngcontent-%COMP%]:last-child{border:none}.selectedAction.cdk-drop-list-dragging[_ngcontent-%COMP%]   .selectedAction[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]}),t})();var wa=i("8N1J");const Ia=["snav2"],ja=["paginatorBaskets"],ka=["sortBaskets"],Ra=["sortUsers"];function Ta(t,e){1&t&&(p.Wb(0,"div",13),p.Rb(1,"mat-spinner",14),p.Vb())}function Pa(t,e){if(1&t){const t=p.Xb();p.Wb(0,"input",28),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).group.group_id=e})),p.ic(1,"translate"),p.Vb()}if(2&t){const t=p.hc(2);p.pc("placeholder",p.jc(1,2,"lang.id")),p.oc("ngModel",t.group.group_id)}}function Qa(t,e){if(1&t){const t=p.Xb();p.Wb(0,"input",29),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).group.group_id=e})),p.ic(1,"translate"),p.ic(2,"translate"),p.Vb()}if(2&t){const t=p.hc(2);p.pc("placeholder",p.jc(1,3,"lang.id")),p.pc("title",p.jc(2,5,"lang.id")),p.oc("ngModel",t.group.group_id)}}function Fa(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-list-item"),p.Wb(1,"mat-slide-toggle",37),p.dc("change",(function(i){p.Dc(t);const a=e.$implicit;return p.hc(4).toggleService(i,a)})),p.ic(2,"translate"),p.Qc(3),p.ic(4,"translate"),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit,i=p.hc(4);p.Db(1),p.pc("name",t.label),p.pc("matTooltip",p.jc(2,4,t.comment)),p.oc("checked",i.group.privileges.indexOf(t.id)>-1),p.Db(2),p.Sc(" ",p.jc(4,6,t.label),"")}}function La(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",41),p.dc("click",(function(e){p.Dc(t);const i=p.hc().$implicit,a=p.hc(4);return e.stopPropagation(),a.openUserParams(i.id)})),p.Rb(1,"mat-icon",42),p.Vb()}if(2&t){const t=p.hc().$implicit,e=p.hc(4);p.Ib("active",e.panelMode===t.id),p.oc("title",e.translate.instant("lang.goToAdminParams"))("disabled",-1===e.group.privileges.indexOf(t.id))}}function Ea(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",38),p.Wb(1,"mat-slide-toggle",39),p.dc("ngModelChange",(function(i){return p.Dc(t),e.$implicit.checked=i}))("change",(function(i){p.Dc(t);const a=e.$implicit;return p.hc(4).toggleService(i,a)})),p.ic(2,"translate"),p.Qc(3),p.ic(4,"translate"),p.Vb(),p.Oc(5,La,2,4,"button",40),p.Vb()}if(2&t){const t=e.$implicit;p.Db(1),p.pc("name",t.label),p.pc("matTooltip",p.jc(2,6,t.comment)),p.oc("ngModel",t.checked)("checked",t.checked),p.Db(2),p.Sc("",p.jc(4,8,t.label)," "),p.Db(2),p.oc("ngIf",t.hasParams)}}function Aa(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-list-item"),p.Wb(1,"mat-slide-toggle",37),p.dc("change",(function(i){p.Dc(t);const a=e.$implicit;return p.hc(6).toggleService(i,a)})),p.ic(2,"translate"),p.Qc(3),p.ic(4,"translate"),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit,i=p.hc(6);p.Db(1),p.pc("name",t.label),p.pc("matTooltip",p.jc(2,4,t.comment)),p.oc("checked",i.group.privileges.indexOf(t.id)>-1),p.Db(2),p.Sc("",p.jc(4,6,t.label)," ")}}function Ua(t,e){if(1&t&&(p.Ub(0),p.Wb(1,"mat-list"),p.Oc(2,Aa,5,8,"mat-list-item",30),p.ic(3,"filterList"),p.ic(4,"sortBy"),p.Vb(),p.Tb()),2&t){const t=p.hc().$implicit;p.hc();const e=p.zc(19);p.Db(2),p.oc("ngForOf",p.lc(3,1,p.kc(4,5,t.services,"label"),e.value,"label"))}}function $a(t,e){if(1&t&&(p.Wb(0,"mat-option",51),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t.id),p.Db(1),p.Rc(p.jc(2,2,t.label))}}function za(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-list-item",45),p.Rb(1,"span",46),p.Wb(2,"mat-form-field",47),p.Wb(3,"mat-select",48),p.dc("ngModelChange",(function(i){return p.Dc(t),e.$implicit.current=i}))("selectionChange",(function(i){p.Dc(t);const a=e.$implicit;return p.hc(6).changeDifflistPrivilege(i,a.id)})),p.Wb(4,"mat-option",49),p.Qc(5),p.ic(6,"translate"),p.Vb(),p.Oc(7,$a,3,4,"mat-option",50),p.Vb(),p.Vb(),p.Qc(8,". "),p.Vb()}if(2&t){const t=e.$implicit;p.Db(1),p.oc("innerHTML",t.label,p.Ec),p.Db(2),p.oc("ngModel",t.current),p.Db(2),p.Rc(p.jc(6,4,"lang.noRole")),p.Db(2),p.oc("ngForOf",t.services)}}function Na(t,e){if(1&t&&(p.Ub(0),p.Oc(1,za,9,6,"mat-list-item",44),p.Tb()),2&t){const t=p.hc().$implicit;p.Db(1),p.oc("ngForOf",t.services)}}function Ha(t,e){if(1&t&&(p.Wb(0,"mat-option",51),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t.id),p.Db(1),p.Rc(p.jc(2,2,t.label))}}function Ba(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-list-item",45),p.Rb(1,"span",46),p.Wb(2,"mat-form-field",52),p.Wb(3,"mat-select",48),p.dc("ngModelChange",(function(i){return p.Dc(t),e.$implicit.current=i}))("selectionChange",(function(e){return p.Dc(t),p.hc(6).changePersonalDataPrivilege(e)})),p.Wb(4,"mat-option",49),p.Qc(5),p.ic(6,"translate"),p.Vb(),p.Oc(7,Ha,3,4,"mat-option",50),p.Vb(),p.Vb(),p.Qc(8,". "),p.Vb()}if(2&t){const t=e.$implicit;p.Db(1),p.oc("innerHTML",t.label,p.Ec),p.Db(2),p.oc("ngModel",t.current),p.Db(2),p.Rc(p.jc(6,4,"lang.notVisible")),p.Db(2),p.oc("ngForOf",t.services)}}function Xa(t,e){if(1&t&&(p.Ub(0),p.Oc(1,Ba,9,6,"mat-list-item",44),p.Tb()),2&t){const t=p.hc().$implicit;p.Db(1),p.oc("ngForOf",t.services)}}const Ga=function(){return["diffusionList","confidentialityAndSecurity"]};function qa(t,e){if(1&t&&(p.Wb(0,"mat-expansion-panel",43),p.ic(1,"filterList"),p.Wb(2,"mat-expansion-panel-header"),p.Wb(3,"mat-panel-title"),p.Qc(4),p.Vb(),p.Vb(),p.Oc(5,Ua,5,8,"ng-container",12),p.Oc(6,Na,2,1,"ng-container",12),p.Oc(7,Xa,2,1,"ng-container",12),p.Vb()),2&t){const t=e.$implicit;p.hc();const i=p.zc(19);p.Ib("emptyExpansionPanel",0==p.lc(1,6,t.services,i.value,"label").length),p.Db(4),p.Sc(" ",t.label," "),p.Db(1),p.oc("ngIf",-1===p.uc(10,Ga).indexOf(t.id)),p.Db(1),p.oc("ngIf","diffusionList"===t.id),p.Db(1),p.oc("ngIf","confidentialityAndSecurity"===t.id)}}function Ka(t,e){if(1&t&&(p.Wb(0,"mat-tab-group"),p.Wb(1,"mat-tab",16),p.ic(2,"translate"),p.Wb(3,"mat-list"),p.Oc(4,Fa,5,8,"mat-list-item",30),p.ic(5,"sortBy"),p.Vb(),p.Vb(),p.Wb(6,"mat-tab",16),p.ic(7,"translate"),p.Wb(8,"mat-form-field",31),p.Rb(9,"input",32,33),p.ic(11,"translate"),p.Vb(),p.Oc(12,Ea,6,10,"div",34),p.ic(13,"filterList"),p.ic(14,"sortBy"),p.Vb(),p.Wb(15,"mat-tab",16),p.ic(16,"translate"),p.Wb(17,"mat-form-field",31),p.Rb(18,"input",32,35),p.ic(20,"translate"),p.Vb(),p.Oc(21,qa,8,11,"mat-expansion-panel",36),p.ic(22,"sortBy"),p.Vb(),p.Vb()),2&t){const t=p.zc(10),e=p.hc(3);p.Db(1),p.pc("label",p.jc(2,8,"lang.menus")),p.Db(3),p.oc("ngForOf",p.kc(5,10,e.privilegeService.getMenus(),"label")),p.Db(2),p.pc("label",p.jc(7,13,"lang.administrationServices")),p.Db(3),p.pc("placeholder",p.jc(11,15,"lang.filterBy")),p.Db(3),p.oc("ngForOf",p.lc(13,17,p.kc(14,21,e.administrationPrivileges,"label"),t.value,"label")),p.Db(3),p.pc("label",p.jc(16,24,"lang.functionnalities")),p.Db(3),p.pc("placeholder",p.jc(20,26,"lang.filterBy")),p.Db(3),p.oc("ngForOf",p.kc(22,28,e.unitPrivileges,"label"))}}function Ja(t,e){if(1&t&&(p.Wb(0,"mat-tab",16),p.ic(1,"translate"),p.Oc(2,Ka,23,31,"mat-tab-group",12),p.Vb()),2&t){const t=p.hc(2);p.pc("label",p.jc(1,2,"lang.privileges")),p.Db(2),p.oc("ngIf",!t.creationMode)}}function Ya(t,e){if(1&t){const t=p.Xb();p.Wb(0,"app-indexing-administration",54),p.dc("resfreshShortcut",(function(){return p.Dc(t),p.hc(3).resfreshShortcut()})),p.Vb()}if(2&t){const t=p.hc(3);p.oc("groupId",t.group.id)}}function Za(t,e){1&t&&(p.Wb(0,"mat-tab",16),p.ic(1,"translate"),p.Oc(2,Ya,1,1,"ng-template",53),p.Vb()),2&t&&p.pc("label",p.jc(1,1,"lang.indexation"))}const tn=function(){return["/rest/autocomplete/users/administration"]};function en(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",69),p.Wb(1,"plugin-autocomplete",70),p.dc("triggerEvent",(function(e){return p.Dc(t),p.hc(3).linkUser(e)})),p.Vb(),p.Rb(2,"hr"),p.Vb()}if(2&t){const t=p.hc(3);p.Db(1),p.oc("labelPlaceholder",t.translate.instant("lang.linkUser"))("labelList",t.translate.instant("lang.availableUsers"))("routeDatas",p.uc(4,tn))("targetSearchKey","idToDisplay")}}function an(t,e){1&t&&(p.Wb(0,"mat-header-cell",71),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.firstname")))}function nn(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.firstname," ")}}function on(t,e){1&t&&(p.Wb(0,"mat-header-cell",71),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.lastname")))}function sn(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.lastname," ")}}function cn(t,e){1&t&&p.Rb(0,"mat-header-row")}const rn=function(t,e){return{cursor:t,opacity:e}};function ln(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-row",72),p.dc("click",(function(){p.Dc(t);const i=e.$implicit;return p.hc(3).goToUserAdmin(i)})),p.ic(1,"translate"),p.Vb()}if(2&t){const t=e.$implicit;p.pc("matTooltip",p.jc(1,3,"lang.view")),p.oc("matTooltipDisabled",!t.allowed)("ngStyle",p.wc(5,rn,t.allowed?"pointer":"",t.allowed?"1":"0.6"))}}function dn(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-tab",16),p.ic(1,"translate"),p.Wb(2,"div",55),p.Oc(3,en,3,5,"div",56),p.Wb(4,"div",57),p.Wb(5,"mat-form-field"),p.Wb(6,"input",58),p.dc("keyup",(function(e){return p.Dc(t),p.hc(2).applyFilter(e.target.value)})),p.ic(7,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(8,"div",57),p.Rb(9,"mat-paginator",59,60),p.Vb(),p.Vb(),p.Wb(11,"mat-table",61,62),p.Ub(13,63),p.Oc(14,an,3,3,"mat-header-cell",64),p.Oc(15,nn,2,1,"mat-cell",65),p.Tb(),p.Ub(16,66),p.Oc(17,on,3,3,"mat-header-cell",64),p.Oc(18,sn,2,1,"mat-cell",65),p.Tb(),p.Oc(19,cn,1,0,"mat-header-row",67),p.Oc(20,ln,2,8,"mat-row",68),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.pc("label",p.jc(1,9,"lang.relatedUsers")),p.Db(3),p.oc("ngIf",t.group.canAdminUsers),p.Db(3),p.pc("placeholder",p.jc(7,11,"lang.filterBy")),p.Db(3),p.oc("length",100)("hidePageSize",!0)("pageSize",10),p.Db(2),p.oc("dataSource",t.usersDataSource),p.Db(8),p.oc("matHeaderRowDef",t.usersDisplayedColumns),p.Db(1),p.oc("matRowDefColumns",t.usersDisplayedColumns)}}function bn(t,e){1&t&&(p.Wb(0,"mat-header-cell",71),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.label")))}function pn(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.basket_name," ")}}function hn(t,e){1&t&&(p.Wb(0,"mat-header-cell",71),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc("",p.jc(2,1,"lang.description")," "))}function un(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.basket_desc," ")}}function mn(t,e){1&t&&p.Rb(0,"mat-header-row")}function fn(t,e){1&t&&(p.Rb(0,"mat-row",79),p.ic(1,"translate")),2&t&&(p.qc("routerLink","/administration/baskets/",e.$implicit.basket_id,""),p.pc("matTooltip",p.jc(1,2,"lang.view")))}function gn(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-tab",16),p.ic(1,"translate"),p.Wb(2,"div",55),p.Wb(3,"div",57),p.Wb(4,"mat-form-field"),p.Wb(5,"input",58),p.dc("keyup",(function(e){return p.Dc(t),p.hc(2).applyBasketsFilter(e.target.value)})),p.ic(6,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(7,"div",57),p.Rb(8,"mat-paginator",59,73),p.Vb(),p.Vb(),p.Wb(10,"mat-table",74,75),p.Ub(12,76),p.Oc(13,bn,3,3,"mat-header-cell",64),p.Oc(14,pn,2,1,"mat-cell",65),p.Tb(),p.Ub(15,77),p.Oc(16,hn,3,3,"mat-header-cell",64),p.Oc(17,un,2,1,"mat-cell",65),p.Tb(),p.Oc(18,mn,1,0,"mat-header-row",67),p.Oc(19,fn,2,4,"mat-row",78),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.pc("label",p.jc(1,8,"lang.relatedBaskets")),p.Db(5),p.pc("placeholder",p.jc(6,10,"lang.filterBy")),p.Db(3),p.oc("length",100)("hidePageSize",!0)("pageSize",10),p.Db(2),p.oc("dataSource",t.basketsDataSource),p.Db(8),p.oc("matHeaderRowDef",t.basketsDisplayedColumns),p.Db(1),p.oc("matRowDefColumns",t.basketsDisplayedColumns)}}function vn(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-card",15),p.Wb(1,"mat-tab-group"),p.Wb(2,"mat-tab",16),p.ic(3,"translate"),p.Wb(4,"form",17,18),p.dc("ngSubmit",(function(){return p.Dc(t),p.hc().onSubmit()})),p.Wb(6,"mat-form-field"),p.Oc(7,Pa,2,4,"input",19),p.Oc(8,Qa,3,7,"input",20),p.Vb(),p.Wb(9,"mat-form-field"),p.Wb(10,"input",21),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().group.group_desc=e})),p.ic(11,"translate"),p.ic(12,"translate"),p.Vb(),p.Vb(),p.Wb(13,"mat-form-field"),p.Wb(14,"input",22),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().group.security.maarch_comment=e})),p.ic(15,"translate"),p.ic(16,"translate"),p.Vb(),p.Vb(),p.Wb(17,"mat-form-field"),p.Wb(18,"textarea",23),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().group.security.where_clause=e})),p.ic(19,"translate"),p.ic(20,"translate"),p.Vb(),p.Wb(21,"mat-icon",24),p.dc("click",(function(){p.Dc(t);const e=p.hc(),i=p.zc(14);return e.panelMode="keywordInfos",i.toggle()})),p.ic(22,"translate"),p.Vb(),p.Vb(),p.Wb(23,"div",25),p.Wb(24,"button",26),p.Qc(25),p.ic(26,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Oc(27,Ja,3,4,"mat-tab",27),p.Oc(28,Za,3,3,"mat-tab",27),p.Oc(29,dn,21,13,"mat-tab",27),p.Oc(30,gn,20,12,"mat-tab",27),p.Vb(),p.Vb()}if(2&t){const t=p.zc(5),e=p.hc();p.Db(2),p.pc("label",p.jc(3,19,"lang.informations")),p.Db(5),p.oc("ngIf",e.creationMode),p.Db(1),p.oc("ngIf",!e.creationMode),p.Db(2),p.pc("title",p.jc(11,21,"lang.label")),p.pc("placeholder",p.jc(12,23,"lang.label")),p.oc("ngModel",e.group.group_desc),p.Db(4),p.pc("title",p.jc(15,25,"lang.description")),p.pc("placeholder",p.jc(16,27,"lang.description")),p.oc("ngModel",e.group.security.maarch_comment),p.Db(4),p.pc("title",p.jc(19,29,"lang.clauseGroup")),p.pc("placeholder",p.jc(20,31,"lang.clauseGroup")),p.oc("ngModel",e.group.security.where_clause),p.Db(3),p.pc("matTooltip",p.jc(22,33,"lang.keywordHelper")),p.Db(3),p.oc("disabled",!t.form.valid),p.Db(1),p.Rc(p.jc(26,35,"lang.save")),p.Db(2),p.oc("ngIf",!e.creationMode),p.Db(1),p.oc("ngIf",!e.creationMode),p.Db(1),p.oc("ngIf",!e.creationMode),p.Db(1),p.oc("ngIf",!e.creationMode)}}function yn(t,e){1&t&&(p.Ub(0),p.Wb(1,"mat-nav-list"),p.Wb(2,"h3",80),p.Qc(3),p.ic(4,"translate"),p.Vb(),p.Vb(),p.Wb(5,"mat-list",81),p.Wb(6,"p",82),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Wb(9,"div",83),p.Wb(10,"b"),p.Qc(11,"DESTINATION = @my_primary_entity or DESTINATION in (@subentities[@my_primary_entity])"),p.Vb(),p.Vb(),p.Wb(12,"h4",84),p.Qc(13,"@user :"),p.Vb(),p.Wb(14,"p",85),p.Qc(15),p.ic(16,"translate"),p.Vb(),p.Wb(17,"h4",84),p.Qc(18,"@user_id :"),p.Vb(),p.Wb(19,"p",85),p.Qc(20),p.ic(21,"translate"),p.Vb(),p.Wb(22,"h4",84),p.Qc(23,"@email :"),p.Vb(),p.Wb(24,"p",85),p.Qc(25),p.ic(26,"translate"),p.Vb(),p.Wb(27,"h4",84),p.Qc(28,"@my_entities :"),p.Vb(),p.Wb(29,"p",85),p.Qc(30),p.ic(31,"translate"),p.Vb(),p.Wb(32,"h4",84),p.Qc(33,"@my_entities_id :"),p.Vb(),p.Wb(34,"p",85),p.Qc(35),p.ic(36,"translate"),p.Vb(),p.Wb(37,"h4",84),p.Qc(38,"@my_primary_entity :"),p.Vb(),p.Wb(39,"p",85),p.Qc(40),p.ic(41,"translate"),p.Vb(),p.Wb(42,"h4",84),p.Qc(43,"@my_primary_entity_id :"),p.Vb(),p.Wb(44,"p",85),p.Qc(45),p.ic(46,"translate"),p.Vb(),p.Wb(47,"h4",84),p.Qc(48,"@subentities[('entity_1',...,'entity_n')] : "),p.Vb(),p.Wb(49,"p",85),p.Qc(50),p.ic(51,"translate"),p.Vb(),p.Wb(52,"h4",84),p.Qc(53,"@parent_entity['entity_id'] :"),p.Vb(),p.Wb(54,"p",85),p.Qc(55),p.ic(56,"translate"),p.Vb(),p.Wb(57,"h4",84),p.Qc(58,"@sisters_entities['entity_id'] :"),p.Vb(),p.Wb(59,"p",85),p.Qc(60),p.ic(61,"translate"),p.Vb(),p.Wb(62,"h4",84),p.Qc(63,"@entity_type['type'] :"),p.Vb(),p.Wb(64,"p",85),p.Qc(65),p.ic(66,"translate"),p.Vb(),p.Wb(67,"h4",84),p.Qc(68,"@all_entities :"),p.Vb(),p.Wb(69,"p",85),p.Qc(70),p.ic(71,"translate"),p.Vb(),p.Wb(72,"h4",84),p.Qc(73,"@immediate_children['entity_1',..., 'entity_id'] : "),p.Vb(),p.Wb(74,"p",85),p.Qc(75),p.ic(76,"translate"),p.Vb(),p.Vb(),p.Tb()),2&t&&(p.Db(3),p.Rc(p.jc(4,15,"lang.keywordHelp")),p.Db(4),p.Rc(p.jc(8,17,"lang.keywordHelpDesc_11")),p.Db(8),p.Rc(p.jc(16,19,"lang.keywordHelpDesc_1")),p.Db(5),p.Rc(p.jc(21,21,"lang.keywordHelpDesc_12")),p.Db(5),p.Rc(p.jc(26,23,"lang.keywordHelpDesc_2")),p.Db(5),p.Rc(p.jc(31,25,"lang.keywordHelpDesc_3")),p.Db(5),p.Rc(p.jc(36,27,"lang.keywordHelpDesc_13")),p.Db(5),p.Rc(p.jc(41,29,"lang.keywordHelpDesc_4")),p.Db(5),p.Rc(p.jc(46,31,"lang.keywordHelpDesc_14")),p.Db(5),p.Rc(p.jc(51,33,"lang.keywordHelpDesc_5")),p.Db(5),p.Rc(p.jc(56,35,"lang.keywordHelpDesc_6")),p.Db(5),p.Rc(p.jc(61,37,"lang.keywordHelpDesc_7")),p.Db(5),p.Rc(p.jc(66,39,"lang.keywordHelpDesc_8")),p.Db(5),p.Rc(p.jc(71,41,"lang.keywordHelpDesc_9")),p.Db(5),p.Rc(p.jc(76,43,"lang.keywordHelpDesc_10")))}function Dn(t,e){if(1&t&&(p.Wb(0,"mat-list-option",90),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("selected",t.checked)("value",t.id),p.Db(1),p.Sc(" ",t.label," ")}}function Vn(t,e){if(1&t){const t=p.Xb();p.Ub(0),p.Wb(1,"mat-nav-list"),p.Wb(2,"h3",80),p.Qc(3),p.ic(4,"translate"),p.Vb(),p.Vb(),p.Wb(5,"mat-list",81),p.Wb(6,"p",86),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Wb(9,"mat-selection-list",87,88),p.dc("selectionChange",(function(){p.Dc(t);const e=p.zc(10);return p.hc().updatePrivilegeParams(e.selectedOptions.selected)})),p.Oc(11,Dn,2,3,"mat-list-option",89),p.Vb(),p.Vb(),p.Tb()}if(2&t){const t=p.hc();p.Db(3),p.Rc(p.jc(4,3,"lang.adminParamsUsers")),p.Db(4),p.Sc(" ",p.jc(8,5,"lang.chooseAllowedGroups")," : "),p.Db(4),p.oc("ngForOf",t.authorizedGroupsUserParams)}}let Cn=(()=>{class t{constructor(t,e,i,a,n,o,s,c,r){this.translate=t,this.http=e,this.route=i,this.router=a,this.notify=n,this.headerService=o,this.appService=s,this.privilegeService=c,this.dialog=r,this.loading=!1,this.paramsLoading=!1,this.group={security:{}},this.menus={},this.usersDisplayedColumns=["firstname","lastname"],this.basketsDisplayedColumns=["basket_name","basket_desc"],this.unitPrivileges=[],this.administrationPrivileges=[],this.authorizedGroupsUserParams=[],this.panelMode="keywordInfos"}applyFilter(t){t=(t=t.trim()).toLowerCase(),this.usersDataSource.filter=t}applyBasketsFilter(t){t=(t=t.trim()).toLowerCase(),this.basketsDataSource.filter=t}ngOnInit(){this.loading=!0,this.route.params.subscribe(t=>{void 0===t.id?(this.headerService.setHeader(this.translate.instant("lang.groupCreation")),this.creationMode=!0,this.loading=!1):(this.creationMode=!1,this.http.get("../rest/groups/"+t.id+"/details").subscribe(t=>{this.group=t.group,this.administrationPrivileges=this.privilegeService.getAdministrations(),this.administrationPrivileges=this.administrationPrivileges.map(t=>Object.assign(Object.assign({},t),{checked:this.group.privileges.indexOf(t.id)>-1})),this.privilegeService.getUnitsPrivileges().forEach(t=>{let e=this.privilegeService.getPrivilegesByUnit(t);if("diffusionList"===t)e=[{id:"indexing_diffList",label:this.translate.instant("lang.diffListPrivilegeMsgIndexing"),current:void 0!==this.group.privileges.filter(t=>["update_diffusion_indexing","update_diffusion_except_recipient_indexing"].indexOf(t)>-1)[0]?this.group.privileges.filter(t=>["update_diffusion_indexing","update_diffusion_except_recipient_indexing"].indexOf(t)>-1)[0]:"",services:this.privilegeService.getPrivileges(["update_diffusion_indexing","update_diffusion_except_recipient_indexing"])},{id:"process_diffList",label:this.translate.instant("lang.diffListPrivilegeMsgProcess"),current:void 0!==this.group.privileges.filter(t=>["update_diffusion_process","update_diffusion_except_recipient_process"].indexOf(t)>-1)[0]?this.group.privileges.filter(t=>["update_diffusion_process","update_diffusion_except_recipient_process"].indexOf(t)>-1)[0]:"",services:this.privilegeService.getPrivileges(["update_diffusion_process","update_diffusion_except_recipient_process"])},{id:"details_diffList",label:this.translate.instant("lang.diffListPrivilegeMsgDetails"),current:void 0!==this.group.privileges.filter(t=>["update_diffusion_details","update_diffusion_except_recipient_details"].indexOf(t)>-1)[0]?this.group.privileges.filter(t=>["update_diffusion_details","update_diffusion_except_recipient_details"].indexOf(t)>-1)[0]:"",services:this.privilegeService.getPrivileges(["update_diffusion_details","update_diffusion_except_recipient_details"])}];else if("confidentialityAndSecurity"===t){let t="";this.group.privileges.filter(t=>"manage_personal_data"===t)[0]?t="manage_personal_data":this.group.privileges.filter(t=>"view_personal_data"===t)[0]&&(t="view_personal_data"),e=[{id:"confidentialityAndSecurity_personal_data",label:this.translate.instant("lang.personalDataMsg"),current:t,services:this.privilegeService.getPrivileges(["view_personal_data","manage_personal_data"])}]}this.unitPrivileges.push({id:t,label:this.translate.instant("lang."+t),services:e})}),this.headerService.setHeader(this.translate.instant("lang.groupModification"),this.group.group_desc),this.loading=!1,setTimeout(()=>{this.usersDataSource=new G.p(this.group.users),this.usersDataSource.paginator=this.paginator,this.usersDataSource.sort=this.sortUsers,this.basketsDataSource=new G.p(this.group.baskets),this.basketsDataSource.paginator=this.paginatorBaskets,this.basketsDataSource.sort=this.sortBaskets},0)},t=>{this.notify.handleErrors(t)}))})}changeDifflistPrivilege(t,e){"indexing_diffList"===e?"update_diffusion_indexing"===t.value?this.manageServices(["update_diffusion_indexing","update_diffusion_except_recipient_indexing"]):"update_diffusion_except_recipient_indexing"===t.value?this.manageServices(["update_diffusion_except_recipient_indexing","update_diffusion_indexing"]):this.manageServices(["update_diffusion_indexing","update_diffusion_except_recipient_indexing"],"deleteAll"):"process_diffList"===e?"update_diffusion_process"===t.value?this.manageServices(["update_diffusion_process","update_diffusion_except_recipient_process"]):"update_diffusion_except_recipient_process"===t.value?this.manageServices(["update_diffusion_except_recipient_process","update_diffusion_process"]):this.manageServices(["update_diffusion_process","update_diffusion_except_recipient_process"],"deleteAll"):"update_diffusion_details"===t.value?this.manageServices(["update_diffusion_details","update_diffusion_except_recipient_details"]):"update_diffusion_except_recipient_details"===t.value?this.manageServices(["update_diffusion_except_recipient_details","update_diffusion_details"]):this.manageServices(["update_diffusion_details","update_diffusion_except_recipient_details"],"deleteAll")}manageServices(t,e=null){"deleteAll"!==e?this.http.post(`../rest/groups/${this.group.id}/privileges/${t[0]}`,{}).pipe(Object(d.a)(()=>{this.group.privileges.push(t[0])}),Object(J.a)(()=>this.http.delete(`../rest/groups/${this.group.id}/privileges/${t[1]}`)),Object(d.a)(()=>{this.group.privileges.splice(this.group.privileges.indexOf(t[1]),1),this.headerService.resfreshCurrentUser(),this.notify.success(this.translate.instant("lang.groupServicesUpdated"))}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe():this.http.delete(`../rest/groups/${this.group.id}/privileges/${t[0]}`).pipe(Object(d.a)(()=>{this.group.privileges.splice(this.group.privileges.indexOf(t[0]),1)}),Object(J.a)(()=>this.http.delete(`../rest/groups/${this.group.id}/privileges/${t[1]}`)),Object(d.a)(()=>{this.group.privileges.splice(this.group.privileges.indexOf(t[1]),1),this.headerService.resfreshCurrentUser(),this.notify.success(this.translate.instant("lang.groupServicesUpdated"))}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}changePersonalDataPrivilege(t){"view_personal_data"===t.value?this.manageServices(["view_personal_data","manage_personal_data"]):"manage_personal_data"===t.value?this.http.post(`../rest/groups/${this.group.id}/privileges/view_personal_data`,{}).pipe(Object(d.a)(()=>{this.group.privileges.push("view_personal_data")}),Object(J.a)(()=>this.http.post(`../rest/groups/${this.group.id}/privileges/manage_personal_data`,{})),Object(d.a)(()=>{this.group.privileges.splice(this.group.privileges.indexOf("manage_personal_data"),1),this.headerService.resfreshCurrentUser(),this.notify.success(this.translate.instant("lang.groupServicesUpdated"))}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe():this.manageServices(["view_personal_data","manage_personal_data"],"deleteAll")}resfreshShortcut(){return Object(gt.a)(this,void 0,void 0,(function*(){yield this.headerService.resfreshCurrentUser(),this.privilegeService.resfreshUserShortcuts()}))}getCurrentPrivListDiff(t){return this.group.privileges.indexOf(t)>-1}onSubmit(){this.creationMode?this.http.post("../rest/groups",this.group).subscribe(t=>{this.notify.success(this.translate.instant("lang.groupAdded")),this.router.navigate(["/administration/groups/"+t.group])},t=>{this.notify.error(t.error.errors)}):this.http.put("../rest/groups/"+this.group.id,{description:this.group.group_desc,security:this.group.security}).subscribe(()=>{this.notify.success(this.translate.instant("lang.groupUpdated"))},t=>{this.notify.error(t.error.errors)})}toggleService(t,e){t.checked?"admin_groups"===e.id?this.dialog.open(q.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.confirmAction"),msg:this.translate.instant("lang.enableGroupMsg")}}).afterClosed().pipe(Object(d.a)(t=>{"ok"!==t&&(e.checked=!1)}),Object(K.a)(t=>"ok"===t),Object(d.a)(()=>{this.addService(e)}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe():this.addService(e):(this.sidenavRight.close(),this.removeService(e))}addService(t){this.http.post(`../rest/groups/${this.group.id}/privileges/${t.id}`,{}).pipe(Object(d.a)(()=>{this.group.privileges.push(t.id),this.headerService.resfreshCurrentUser(),this.notify.success(this.translate.instant("lang.groupServicesUpdated"))}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}removeService(t){this.http.delete(`../rest/groups/${this.group.id}/privileges/${t.id}`).pipe(Object(d.a)(()=>{this.group.privileges.splice(this.group.privileges.indexOf(t.id),1),this.headerService.resfreshCurrentUser(),this.notify.success(this.translate.instant("lang.groupServicesUpdated"))}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}linkUser(t){this.http.post("../rest/users/"+t.id+"/groups",{groupId:this.group.group_id,role:this.group.role}).subscribe(()=>{const e=t.idToDisplay.split(" ");this.group.users.push({id:t.id,user_id:t.otherInfo,firstname:e[0],lastname:e[1],allowed:!0}),this.usersDataSource=new G.p(this.group.users),this.usersDataSource.paginator=this.paginator,this.usersDataSource.sort=this.sortUsers,this.notify.success(this.translate.instant("lang.userAdded"))},t=>{this.notify.error(t.error.errors)})}openUserParams(t){this.sidenavRight.toggle(),this.sidenavRight.opened?(this.panelMode=t,this.paramsLoading=!0,this.http.get("../rest/groups").pipe(Object(l.a)(t=>(t.groups=t.groups.map(t=>({id:t.id,label:t.group_desc})),t)),Object(d.a)(t=>{this.authorizedGroupsUserParams=t.groups}),Object(J.a)(()=>this.http.get(`../rest/groups/${this.group.id}/privileges/${this.panelMode}/parameters?parameter=groups`)),Object(d.a)(t=>{const e=t;this.authorizedGroupsUserParams.forEach(t=>{t.checked=e.indexOf(t.id)>-1})}),Object(vt.a)(()=>this.paramsLoading=!1),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()):this.panelMode=""}updatePrivilegeParams(t){let e={};"admin_users"===this.panelMode&&(e={groups:t.map(t=>t.value)}),this.http.put(`../rest/groups/${this.group.id}/privileges/${this.panelMode}/parameters`,{parameters:e}).pipe(Object(d.a)(()=>{this.notify.success(this.translate.instant("lang.parameterUpdated"))}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}goToUserAdmin(t){t.allowed&&this.router.navigate(["/administration/users/"+t.id])}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(o.a),p.Qb(o.c),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a),p.Qb(g.a),p.Qb(z.b))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(Ia,!0),p.Xc(ja,!0),p.Kc(ka,!0),p.Xc(N.a,!0),p.Kc(Ra,!0)),2&t&&(p.yc(i=p.ec())&&(e.sidenavRight=i.first),p.yc(i=p.ec())&&(e.paginatorBaskets=i.first),p.yc(i=p.ec())&&(e.sortBaskets=i.first),p.yc(i=p.ec())&&(e.paginator=i.first),p.yc(i=p.ec())&&(e.sortUsers=i.first))},decls:17,vars:13,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",3,"mode","fixedInViewport","opened"],["snav2",""],[4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[3,"label"],[1,"form-horizontal",3,"ngSubmit"],["groupForm","ngForm"],["matInput","","name","identifier","pattern","^[\\w.-]*$","maxlength","32","required","",3,"placeholder","ngModel","ngModelChange",4,"ngIf"],["matInput","","name","identifier","disabled","",3,"placeholder","title","ngModel","ngModelChange",4,"ngIf"],["matInput","","name","description","maxlength","255","required","",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","name","comment",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","name","clause","required","","matTextareaAutosize","","matAutosizeMinRows","1","matAutosizeMaxRows","5",3,"title","placeholder","ngModel","ngModelChange"],["color","primary","matSuffix","",1,"fa","fa-info-circle",2,"cursor","pointer",3,"matTooltip","click"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary",3,"disabled"],[3,"label",4,"ngIf"],["matInput","","name","identifier","pattern","^[\\w.-]*$","maxlength","32","required","",3,"placeholder","ngModel","ngModelChange"],["matInput","","name","identifier","disabled","",3,"placeholder","title","ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["floatLabel","never","appearance","outline",1,"basketsFilter",2,"padding-left","20px","padding-right","20px","font-size","11px"],["matInput","",3,"placeholder"],["listFilterAdmin",""],["class","col-md-3","style","padding:10px;",4,"ngFor","ngForOf"],["listFilter",""],["expanded","",3,"emptyExpansionPanel",4,"ngFor","ngForOf"],["color","primary",3,"name","checked","matTooltip","change"],[1,"col-md-3",2,"padding","10px"],["color","primary",3,"name","ngModel","checked","matTooltip","ngModelChange","change"],["mat-icon-button","","color","primary",3,"active","title","disabled","click",4,"ngIf"],["mat-icon-button","","color","primary",3,"title","disabled","click"],[1,"fa","fa-cogs"],["expanded",""],["color","primary","style","font-size: 16px;",4,"ngFor","ngForOf"],["color","primary",2,"font-size","16px"],[3,"innerHTML"],[2,"width","250px !important","padding-left","10px","padding-right","10px"],[3,"ngModel","ngModelChange","selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[2,"width","300px !important","padding-left","10px","padding-right","10px"],["matTabContent",""],[3,"groupId","resfreshShortcut"],[1,"row",2,"margin","0px"],["class","col-md-12","style","padding:5px;",4,"ngIf"],[1,"col-md-6","col-xs-6"],["matInput","",3,"placeholder","keyup"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortActive","lastname","matSortDirection","asc",3,"dataSource"],["sortUsers","matSort"],["matColumnDef","firstname"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","lastname"],[4,"matHeaderRowDef"],[3,"matTooltip","matTooltipDisabled","ngStyle","click",4,"matRowDef","matRowDefColumns"],[1,"col-md-12",2,"padding","5px"],[3,"labelPlaceholder","labelList","routeDatas","targetSearchKey","triggerEvent"],["mat-sort-header",""],[3,"matTooltip","matTooltipDisabled","ngStyle","click"],["paginatorBaskets",""],["matSort","","matSortActive","basket_name","matSortDirection","asc",3,"dataSource"],["sortBaskets","matSort"],["matColumnDef","basket_name"],["matColumnDef","basket_desc"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[2,"cursor","pointer",3,"routerLink","matTooltip"],["mat-subheader",""],["role","list",2,"width","400px","padding","5px"],[2,"font-size","10px"],[2,"border","1px black solid","padding","3px","font-size","10px"],["mat-line","",2,"font-weight","bold","font-size","10px"],["mat-line","",2,"font-size","10px"],["color","primary"],[3,"selectionChange"],["paramsList",""],["color","primary","style","font-size: 13px;","checkboxPosition","before",3,"selected","value",4,"ngFor","ngForOf"],["color","primary","checkboxPosition","before",2,"font-size","13px",3,"selected","value"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Wb(1,"mat-sidenav-content"),p.Wb(2,"div",1),p.Wb(3,"div",2),p.Wb(4,"div",3),p.Rb(5,"header-left"),p.Vb(),p.Wb(6,"div",4),p.Rb(7,"header-right"),p.Vb(),p.Vb(),p.Rb(8,"div",5),p.Vb(),p.Wb(9,"div",6),p.Wb(10,"div",7),p.Oc(11,Ta,2,0,"div",8),p.Oc(12,vn,31,37,"mat-card",9),p.Vb(),p.Vb(),p.Vb(),p.Wb(13,"mat-sidenav",10,11),p.Oc(15,yn,77,45,"ng-container",12),p.Oc(16,Vn,12,7,"ng-container",12),p.Vb(),p.Vb()),2&t&&(p.Db(3),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading),p.Db(1),p.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",(e.appService.getViewMode(),!1)),p.Db(2),p.oc("ngIf","keywordInfos"===e.panelMode),p.Db(1),p.oc("ngIf","admin_users"===e.panelMode))},directives:[C.e,C.f,M.a,x.a,O.t,C.d,I.c,j.a,ke.c,ke.a,c.K,c.v,c.w,S.c,w.b,c.d,c.p,c.F,c.u,c.x,w.d,It.a,S.j,kt.b,R.b,c.B,wt.a,O.s,wt.d,et.a,Re.c,Re.g,Re.h,at.a,k.p,ke.b,Sa,N.a,G.o,H.a,G.c,G.i,G.b,G.k,G.n,Rt.a,G.h,H.b,G.a,G.j,G.m,O.w,o.d,wt.h,wt.g,k.l,wt.i,wt.f],pipes:[h.d,T.a,wa.a],styles:["textarea.mat-input-element[_ngcontent-%COMP%]{padding:0;margin:0}.active[_ngcontent-%COMP%]{color:#f99830}.emptyExpansionPanel[_ngcontent-%COMP%]{height:0}"]}),t})();const Mn=["snav2"],Wn=["adminMenuTemplate"];function xn(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-nav-list"),p.Wb(1,"h3",16),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"a",17),p.Rb(5,"mat-icon",18),p.Wb(6,"p",19),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Wb(9,"a",20),p.dc("click",(function(){return p.Dc(t),p.hc(),p.zc(16).toggle()})),p.Rb(10,"mat-icon",21),p.Wb(11,"p",19),p.Qc(12),p.ic(13,"translate"),p.Vb(),p.Vb(),p.Vb()}2&t&&(p.Db(2),p.Rc(p.jc(3,3,"lang.actions")),p.Db(5),p.Sc(" ",p.jc(8,5,"lang.add")," "),p.Db(5),p.Sc(" ",p.jc(13,7,"lang.basketsOrder")," "))}function On(t,e){1&t&&(p.Wb(0,"div",22),p.Rb(1,"mat-spinner",23),p.Vb())}function _n(t,e){if(1&t&&(p.Wb(0,"mat-header-cell",45),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=p.hc(2);p.Ib("hide-for-mobile",t.appService.getViewMode()),p.Db(1),p.Rc(p.jc(2,3,"lang.id"))}}function Sn(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.Ib("hide-for-mobile",i.appService.getViewMode()),p.Db(1),p.Sc(" ",t.basket_id," ")}}function wn(t,e){1&t&&(p.Wb(0,"mat-header-cell",45),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.label")))}function In(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.basket_name," ")}}function jn(t,e){if(1&t&&(p.Wb(0,"mat-header-cell",45),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=p.hc(2);p.Ib("hide-for-mobile",t.appService.getViewMode()),p.Db(1),p.Sc("",p.jc(2,3,"lang.description")," ")}}function kn(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.Ib("hide-for-mobile",i.appService.getViewMode()),p.Db(1),p.Sc(" ",t.basket_desc," ")}}function Rn(t,e){1&t&&p.Rb(0,"mat-header-cell")}function Tn(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-cell",46),p.Wb(1,"button",47),p.dc("click",(function(i){p.Dc(t);const a=e.$implicit,n=p.hc(2);return i.stopPropagation(),n.delete(a)})),p.ic(2,"translate"),p.Rb(3,"mat-icon",48),p.Vb(),p.Vb()}2&t&&(p.Db(1),p.pc("matTooltip",p.jc(2,1,"lang.delete")))}function Pn(t,e){1&t&&p.Rb(0,"mat-header-row")}function Qn(t,e){1&t&&(p.Rb(0,"mat-row",49),p.ic(1,"translate")),2&t&&(p.qc("routerLink","/administration/baskets/",e.$implicit.basket_id,""),p.pc("matTooltip",p.jc(1,2,"lang.view")))}function Fn(t,e){if(1&t&&(p.Wb(0,"mat-card",24),p.Wb(1,"div",25),p.Wb(2,"div",26),p.Wb(3,"mat-form-field"),p.Rb(4,"input",27),p.ic(5,"translate"),p.Vb(),p.Vb(),p.Wb(6,"div",26),p.Rb(7,"mat-paginator",28,29),p.Vb(),p.Vb(),p.Wb(9,"mat-table",30,31),p.Ub(11,32),p.Oc(12,_n,3,5,"mat-header-cell",33),p.Oc(13,Sn,2,3,"mat-cell",34),p.Tb(),p.Ub(14,35),p.Oc(15,wn,3,3,"mat-header-cell",36),p.Oc(16,In,2,1,"mat-cell",37),p.Tb(),p.Ub(17,38),p.Oc(18,jn,3,5,"mat-header-cell",33),p.Oc(19,kn,2,3,"mat-cell",34),p.Tb(),p.Ub(20,39),p.Oc(21,Rn,1,0,"mat-header-cell",40),p.Oc(22,Tn,4,3,"mat-cell",41),p.Tb(),p.Oc(23,Pn,1,0,"mat-header-row",42),p.Oc(24,Qn,2,4,"mat-row",43),p.Vb(),p.Wb(25,"div",44),p.Qc(26),p.ic(27,"translate"),p.Vb(),p.Vb()),2&t){const t=p.hc();p.Db(4),p.pc("placeholder",p.jc(5,10,"lang.filterBy")),p.oc("formControl",t.adminService.getFilterField()),p.Db(3),p.oc("length",100)("hidePageSize",!0)("pageSize",10),p.Db(2),p.oc("dataSource",t.adminService.getDataSource()),p.Db(14),p.oc("matHeaderRowDef",t.displayedColumns),p.Db(1),p.oc("matRowDefColumns",t.displayedColumns),p.Db(2),p.Tc(" ",t.baskets.length," ",p.jc(27,12,"lang.baskets"),"")}}function Ln(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-list-item",50),p.dc("onDropSuccess",(function(){p.Dc(t);const i=e.$implicit;return p.hc().updateBasketOrder(i)})),p.ic(1,"translate"),p.Rb(2,"mat-icon",51),p.Wb(3,"p",19),p.Qc(4),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit,i=e.index;p.pc("title",p.jc(1,4,"lang.move")),p.oc("sortableIndex",i),p.Db(4),p.Tc("",i+1," - ",t.basket_name,"")}}const En=function(){return["boxers-zone"]};let An=(()=>{class t{constructor(t,e,i,a,n,o,s,c){this.translate=t,this.http=e,this.notify=i,this.headerService=a,this.appService=n,this.functions=o,this.adminService=s,this.viewContainerRef=c,this.loading=!1,this.baskets=[],this.basketsOrder=[],this.displayedColumns=["basket_id","basket_name","basket_desc","actions"],this.filterColumns=["basket_id","basket_name","basket_desc"]}ngOnInit(){this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.baskets")),this.loading=!0,this.getSortedBasket(),this.http.get("../rest/baskets").subscribe(t=>{this.baskets=t.baskets,this.loading=!1,setTimeout(()=>{this.adminService.setDataSource("admin_baskets",this.baskets,this.sort,this.paginator,this.filterColumns)},0)},t=>{this.notify.handleErrors(t)})}getSortedBasket(){this.http.get("../rest/sortedBaskets").pipe(Object(d.a)(t=>{this.basketsOrder=t.baskets}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}delete(t){confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+t.basket_name+" \xbb")&&this.http.delete("../rest/baskets/"+t.basket_id).subscribe(t=>{this.notify.success(this.translate.instant("lang.basketDeleted")),this.baskets=t.baskets,this.adminService.setDataSource("admin_baskets",this.baskets,this.sort,this.paginator,this.filterColumns),this.getSortedBasket()},t=>{this.notify.error(t.error.errors)})}updateBasketOrder(t){this.http.put("../rest/sortedBaskets/"+t.basket_id,this.basketsOrder).subscribe(t=>{this.baskets=t.baskets,this.notify.success(this.translate.instant("lang.modificationSaved"))},t=>{this.notify.error(t.error.errors)})}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a),p.Qb(D.a),p.Qb(St),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(Mn,!0),p.Kc(Wn,!0),p.Xc(N.a,!0),p.Xc(H.a,!0)),2&t&&(p.yc(i=p.ec())&&(e.sidenavRight=i.first),p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.paginator=i.first),p.yc(i=p.ec())&&(e.sort=i.first))},decls:23,vars:18,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",3,"mode","fixedInViewport","opened"],["snav2",""],[2,"font-size","15px","padding","10px"],["dnd-sortable-container","",3,"dropZones","sortableData"],["disableRipple","true","dnd-sortable","",3,"title","sortableIndex","onDropSuccess",4,"ngFor","ngForOf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/baskets/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],["mat-list-item","",3,"click"],["color","primary","mat-list-icon","",1,"fa","fa-list-ol"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSortDisableClear","","matSort","",3,"dataSource"],["table",""],["matColumnDef","basket_id"],["mat-sort-header","",3,"hide-for-mobile",4,"matHeaderCellDef"],[3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","basket_name"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","basket_desc"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header",""],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"],["disableRipple","true","dnd-sortable","",3,"title","sortableIndex","onDropSuccess"],["color","primary","mat-list-icon","",1,"fa","fa-inbox"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,xn,14,9,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,On,2,0,"div",9),p.Oc(14,Fn,28,14,"mat-card",10),p.Vb(),p.Vb(),p.Vb(),p.Wb(15,"mat-sidenav",11,12),p.Wb(17,"p",13),p.Qc(18),p.ic(19,"translate"),p.Vb(),p.Wb(20,"mat-list"),p.Wb(21,"span",14),p.Oc(22,Ln,5,6,"mat-list-item",15),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading),p.Db(1),p.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",(e.appService.getViewMode(),!1)),p.Db(3),p.Sc(" ",p.jc(19,15,"lang.basketHelpDesc")," "),p.Db(3),p.oc("dropZones",p.uc(17,En))("sortableData",e.basketsOrder),p.Db(1),p.oc("ngForOf",e.basketsOrder))},directives:[C.e,C.f,M.a,x.a,O.t,C.d,wt.a,Fe.f,O.s,wt.h,wt.g,wt.d,o.f,It.a,wt.c,k.l,I.c,j.a,S.c,w.b,c.d,c.u,c.j,N.a,G.o,H.a,G.c,G.i,G.b,G.k,G.n,G.h,H.b,G.a,R.b,kt.b,G.j,G.m,o.d,Fe.e],pipes:[h.d],encapsulation:2}),t})();var Un=i("A5z7"),$n=i("/1cH"),zn=i("TU8p");function Nn(t,e){if(1&t&&(p.Wb(0,"mat-option",31),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t.value),p.Db(1),p.Sc(" ",p.jc(2,2,"lang."+t.id)," ")}}function Hn(t,e){if(1&t&&(p.Wb(0,"mat-option",31),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t.id),p.Db(1),p.Sc(" ",t.label," ")}}function Bn(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",32),p.Wb(1,"div",33),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"mat-form-field",0),p.Wb(5,"mat-label"),p.Qc(6),p.ic(7,"translate"),p.Vb(),p.Wb(8,"mat-select",34),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().selectedProcessTool.defaultTab=e})),p.Oc(9,Hn,2,2,"mat-option",2),p.ic(10,"sortBy"),p.Vb(),p.Vb(),p.Wb(11,"div",35),p.Wb(12,"mat-slide-toggle",36),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().selectedProcessTool.canUpdateData=e}))("change",(function(e){return p.Dc(t),p.hc().toggleCanUpdate(e.checked)})),p.Qc(13),p.ic(14,"translate"),p.Vb(),p.Vb(),p.Wb(15,"div",35),p.Wb(16,"mat-slide-toggle",37),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().selectedProcessTool.canUpdateModel=e})),p.Qc(17),p.ic(18,"translate"),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc();p.Db(2),p.Sc(" ",p.jc(3,9,"lang.options")," "),p.Db(4),p.Rc(p.jc(7,11,"lang.tabProcessPosition")),p.Db(2),p.oc("ngModel",t.selectedProcessTool.defaultTab),p.Db(1),p.oc("ngForOf",p.kc(10,13,t.processTool,"label")),p.Db(3),p.oc("ngModel",t.selectedProcessTool.canUpdateData),p.Db(1),p.Rc(p.jc(14,16,"lang.canUpdateData")),p.Db(3),p.oc("ngModel",t.selectedProcessTool.canUpdateModel)("disabled",!t.selectedProcessTool.canUpdateData),p.Db(1),p.Sc("",p.jc(18,18,"lang.canUpdateIndexingModel")," ")}}function Xn(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",32),p.Wb(1,"div",33),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"div",35),p.Wb(5,"mat-slide-toggle",38),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().selectedProcessTool.canUpdateDocuments=e})),p.Qc(6),p.ic(7,"translate"),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc();p.Db(2),p.Sc(" ",p.jc(3,3,"lang.options")," "),p.Db(3),p.oc("ngModel",t.selectedProcessTool.canUpdateDocuments),p.Db(1),p.Sc(" ",p.jc(7,5,"lang.canUpdateResourcesInSignatureBook"),"")}}function Gn(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",39),p.dc("click",(function(){return p.Dc(t),p.hc().toggleData()})),p.ic(1,"translate"),p.Rb(2,"mat-icon",40),p.Vb()}2&t&&p.pc("title",p.jc(1,1,"lang.preview"))}function qn(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",39),p.dc("click",(function(){return p.Dc(t),p.hc().toggleData()})),p.ic(1,"translate"),p.Rb(2,"mat-icon",41),p.Vb()}2&t&&p.pc("title",p.jc(1,1,"lang.edition"))}function Kn(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",42),p.dc("click",(function(){p.Dc(t);const i=e.$implicit;return p.hc().selectedTemplateDisplayedSecondaryData=i})),p.Qc(1),p.Vb()}if(2&t){const t=e.$implicit;p.Db(1),p.Sc("",t," colonne(s)")}}function Jn(t,e){if(1&t&&(p.Wb(0,"mat-option",43),p.Wb(1,"span",44),p.Wb(2,"span",45),p.Rb(3,"i",46),p.Vb(),p.Wb(4,"span",47),p.Qc(5),p.Vb(),p.Vb(),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t),p.Db(3),p.Gb("fa ",t.icon," fa-2x"),p.Db(2),p.Sc(" ",t.label," ")}}function Yn(t,e){if(1&t&&(p.Wb(0,"button",61),p.Rb(1,"mat-icon",62),p.Vb()),2&t){p.hc();const t=p.zc(3);p.oc("matMenuTriggerFor",t)}}function Zn(t,e){if(1&t){const t=p.Xb();p.Wb(0,"span",51),p.Oc(1,Yn,2,1,"button",52),p.Wb(2,"mat-menu",null,8),p.Wb(4,"button",42),p.dc("click",(function(){p.Dc(t);const e=p.hc(),i=e.$implicit,a=e.index;return p.hc(2).removeData(i,a)})),p.Rb(5,"mat-icon",53),p.Wb(6,"span"),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Rb(9,"mat-divider"),p.Wb(10,"button",42),p.dc("click",(function(){p.Dc(t);const e=p.hc().$implicit;return p.hc(2).setStyle(e,"boldFontData")})),p.Rb(11,"mat-icon",54),p.Wb(12,"span"),p.Qc(13),p.ic(14,"translate"),p.Vb(),p.Vb(),p.Wb(15,"button",42),p.dc("click",(function(){p.Dc(t);const e=p.hc().$implicit;return p.hc(2).setStyle(e,"align_leftData")})),p.Rb(16,"mat-icon",55),p.Wb(17,"span"),p.Qc(18),p.ic(19,"translate"),p.Vb(),p.Vb(),p.Wb(20,"button",42),p.dc("click",(function(){p.Dc(t);const e=p.hc().$implicit;return p.hc(2).setStyle(e,"align_centerData")})),p.Rb(21,"mat-icon",56),p.Wb(22,"span"),p.Qc(23),p.ic(24,"translate"),p.Vb(),p.Vb(),p.Wb(25,"button",42),p.dc("click",(function(){p.Dc(t);const e=p.hc().$implicit;return p.hc(2).setStyle(e,"align_rightData")})),p.Rb(26,"mat-icon",57),p.Wb(27,"span"),p.Qc(28),p.ic(29,"translate"),p.Vb(),p.Vb(),p.Wb(30,"button",42),p.dc("click",(function(){p.Dc(t);const e=p.hc().$implicit;return p.hc(2).setStyle(e,"bigFontData")})),p.Rb(31,"mat-icon",58),p.Wb(32,"span"),p.Qc(33),p.ic(34,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(35,"span",59),p.Rb(36,"i"),p.Qc(37,"\xa0 "),p.Rb(38,"span",60),p.Vb(),p.Vb()}if(2&t){const t=p.hc().$implicit,e=p.hc(2);p.Db(1),p.oc("ngIf","label"==e.displayMode),p.Db(6),p.Rc(p.jc(8,23,"lang.delete")),p.Db(3),p.Ib("isSelectedMenu",t.cssClasses.indexOf("boldFontData")>-1),p.Db(3),p.Rc(p.jc(14,25,"lang.fontBold")),p.Db(2),p.Ib("isSelectedMenu",t.cssClasses.indexOf("align_leftData")>-1),p.Db(3),p.Rc(p.jc(19,27,"lang.alignLeft")),p.Db(2),p.Ib("isSelectedMenu",t.cssClasses.indexOf("align_centerData")>-1),p.Db(3),p.Rc(p.jc(24,29,"lang.alignCenter")),p.Db(2),p.Ib("isSelectedMenu",t.cssClasses.indexOf("align_rightData")>-1),p.Db(3),p.Rc(p.jc(29,31,"lang.alignRight")),p.Db(2),p.Ib("isSelectedMenu",t.cssClasses.indexOf("bigFontData")>-1),p.Db(3),p.Rc(p.jc(34,33,"lang.fontBig")),p.Db(2),p.Fb(t.cssClasses.join(" ")),p.Db(1),p.Gb("fa ",t.icon,""),p.Db(2),p.oc("innerHTML",t[e.displayMode],p.Ec)}}function to(t,e){if(1&t&&(p.Ub(0),p.Oc(1,Zn,39,35,"span",50),p.Tb()),2&t){const t=e.$implicit;p.Db(1),p.oc("ngIf","getFolders"!=t.value)}}function eo(t,e){if(1&t){const t=p.Xb();p.Ub(0),p.Wb(1,"mat-toolbar",48),p.dc("cdkDropListDropped",(function(e){return p.Dc(t),p.hc().drop(e)})),p.Oc(2,to,2,1,"ng-container",49),p.Vb(),p.Tb()}if(2&t){const t=p.hc();p.Db(1),p.Gb("secondaryInformations example-list column-",t.selectedTemplateDisplayedSecondaryData,"-list"),p.oc("cdkDropListData",t.displayedSecondaryData),p.Db(1),p.oc("ngForOf",t.displayedSecondaryData)}}function io(t,e){1&t&&p.Rb(0,"mat-icon",67)}function ao(t,e){1&t&&p.Rb(0,"mat-icon",68)}function no(t,e){if(1&t&&(p.Wb(0,"span"),p.Oc(1,io,1,0,"mat-icon",64),p.Oc(2,ao,1,0,"mat-icon",65),p.Rb(3,"br"),p.Wb(4,"span",66),p.Qc(5),p.Vb(),p.Vb()),2&t){const t=p.hc().$implicit,e=p.hc();p.Db(1),p.oc("ngIf","label"==e.displayMode),p.Db(1),p.oc("ngIf","sample"==e.displayMode),p.Db(3),p.Rc(t[e.displayMode])}}function oo(t,e){if(1&t&&(p.Wb(0,"span"),p.Qc(1),p.Vb()),2&t){const t=p.hc().$implicit,e=p.hc();p.Db(1),p.Sc(" ",t[e.displayMode]," ")}}function so(t,e){if(1&t&&(p.Wb(0,"span",63),p.Oc(1,no,6,3,"span",17),p.Oc(2,oo,2,1,"span",17),p.Vb()),2&t){const t=e.index;p.Fb(e.$implicit.cssClasses.join(" ")),p.Db(1),p.oc("ngIf",0==t),p.Db(1),p.oc("ngIf",1==t)}}function co(t,e){if(1&t&&(p.Wb(0,"button",61),p.Rb(1,"mat-icon",62),p.Vb()),2&t){p.hc();const t=p.zc(3);p.oc("matMenuTriggerFor",t)}}function ro(t,e){if(1&t){const t=p.Xb();p.Ub(0),p.Oc(1,co,2,1,"button",52),p.Wb(2,"mat-menu",null,8),p.Wb(4,"button",42),p.dc("click",(function(){p.Dc(t);const e=p.hc(),i=e.$implicit,a=e.index;return p.hc().removeData(i,a)})),p.Rb(5,"mat-icon",53),p.Wb(6,"span"),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(9,"span",70),p.Rb(10,"i",71),p.Qc(11),p.Vb(),p.Tb()}if(2&t){const t=p.hc().$implicit,e=p.hc();p.Db(1),p.oc("ngIf","label"==e.displayMode),p.Db(6),p.Rc(p.jc(8,3,"lang.delete")),p.Db(4),p.Sc(" ",t[e.displayMode],"")}}function lo(t,e){if(1&t&&(p.Wb(0,"div",69),p.Oc(1,ro,12,5,"ng-container",17),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.oc("ngIf","getFolders"==t.value)}}let bo=(()=>{class t{constructor(t,e,i){this.translate=t,this.http=e,this.notify=i,this.loading=!1,this.displayedMainData=[{value:"chronoNumberShort",label:this.translate.instant("lang.chronoNumberShort"),sample:"MAARCH/2019A/1",cssClasses:["align_centerData","normalData"],icon:""},{value:"object",label:this.translate.instant("lang.object"),sample:this.translate.instant("lang.objectSample"),cssClasses:["longData"],icon:""}],this.availableData=[{value:"getPriority",label:this.translate.instant("lang.getPriority"),sample:this.translate.instant("lang.getPrioritySample"),cssClasses:["align_leftData"],icon:"fa-traffic-light"},{value:"getCategory",label:this.translate.instant("lang.getCategory"),sample:this.translate.instant("lang.incoming"),cssClasses:["align_leftData"],icon:"fa-exchange-alt"},{value:"getDoctype",label:this.translate.instant("lang.getDoctype"),sample:this.translate.instant("lang.getDoctypeSample"),cssClasses:["align_leftData"],icon:"fa-suitcase"},{value:"getAssignee",label:this.translate.instant("lang.getAssignee"),sample:this.translate.instant("lang.getAssigneeSample"),cssClasses:["align_leftData"],icon:"fa-sitemap"},{value:"getRecipients",label:this.translate.instant("lang.getRecipients"),sample:"Patricia PETIT",cssClasses:["align_leftData"],icon:"fa-user"},{value:"getSenders",label:this.translate.instant("lang.getSenders"),sample:"Alain DUBOIS (MAARCH)",cssClasses:["align_leftData"],icon:"fa-book"},{value:"getCreationAndProcessLimitDates",label:this.translate.instant("lang.getCreationAndProcessLimitDates"),sample:this.translate.instant("lang.getCreationAndProcessLimitDatesSample"),cssClasses:["align_leftData"],icon:"fa-calendar"},{value:"getVisaWorkflow",label:this.translate.instant("lang.getVisaWorkflow"),sample:'<i color="accent" class="fa fa-check"></i> Barbara BAIN -> <i class="fa fa-hourglass-half"></i> <b>Bruno BOULE</b> -> <i class="fa fa-hourglass-half"></i> Patricia PETIT',cssClasses:["align_leftData"],icon:"fa-list-ol"},{value:"getSignatories",label:this.translate.instant("lang.getSignatories"),sample:"Denis DAULL, Patricia PETIT",cssClasses:["align_leftData"],icon:"fa-certificate"},{value:"getModificationDate",label:this.translate.instant("lang.getModificationDate"),sample:"01-01-2019",cssClasses:["align_leftData"],icon:"fa-calendar-check"},{value:"getOpinionLimitDate",label:this.translate.instant("lang.getOpinionLimitDate"),sample:"01-01-2019",cssClasses:["align_leftData"],icon:"fa-stopwatch"},{value:"getParallelOpinionsNumber",label:this.translate.instant("lang.getParallelOpinionsNumber"),sample:this.translate.instant("lang.getParallelOpinionsNumberSample"),cssClasses:["align_leftData"],icon:"fa-comment-alt"},{value:"getFolders",label:this.translate.instant("lang.getFolders"),sample:this.translate.instant("lang.getFoldersSample"),cssClasses:["align_leftData"],icon:"fa-folder"},{value:"getResId",label:this.translate.instant("lang.getResId"),sample:this.translate.instant("lang.getResIdSample"),cssClasses:["align_leftData"],icon:"fa-envelope"},{value:"getBarcode",label:this.translate.instant("lang.getBarcode"),sample:this.translate.instant("lang.getBarcodeSample"),cssClasses:["align_leftData"],icon:"fa-barcode"},{value:"getRegisteredMailRecipient",label:this.translate.instant("lang.registeredMailRecipient"),sample:this.translate.instant("lang.registeredMailRecipientSample"),cssClasses:["align_leftData"],icon:"fa-user"},{value:"getRegisteredMailReference",label:this.translate.instant("lang.registeredMailReference"),sample:this.translate.instant("lang.registeredMailReferenceSample"),cssClasses:["align_leftData"],icon:"fa-hashtag"},{value:"getRegisteredMailIssuingSite",label:this.translate.instant("lang.issuingSite"),sample:this.translate.instant("lang.issuingSiteSample"),cssClasses:["align_leftData"],icon:"fas fa-warehouse"}],this.availableDataClone=[],this.displayedSecondaryData=[],this.displayedSecondaryDataClone=[],this.displayMode="label",this.dataControl=new c.i,this.listEvent=[{id:"detailDoc",value:"documentDetails"},{id:"eventVisaMail",value:"signatureBookAction"},{id:"eventProcessDoc",value:"processDocument"},{id:"eventViewDoc",value:"viewDoc"}],this.templateDisplayedSecondaryData=[1,2,3,4,5,6,7],this.selectedTemplateDisplayedSecondaryData=7,this.selectedTemplateDisplayedSecondaryDataClone=7,this.selectedListEvent=null,this.selectedListEventClone=null,this.processTool=[{id:"dashboard",icon:"fas fa-columns",label:this.translate.instant("lang.newsFeed")},{id:"history",icon:"fas fa-history",label:this.translate.instant("lang.history")},{id:"notes",icon:"fas fa-pen-square",label:this.translate.instant("lang.notesAlt")},{id:"attachments",icon:"fas fa-paperclip",label:this.translate.instant("lang.attachments")},{id:"linkedResources",icon:"fas fa-link",label:this.translate.instant("lang.links")},{id:"diffusionList",icon:"fas fa-share-alt",label:this.translate.instant("lang.diffusionList")},{id:"emails",icon:"fas fa-envelope",label:this.translate.instant("lang.mailsSentAlt")},{id:"visaCircuit",icon:"fas fa-list-ol",label:this.translate.instant("lang.visaWorkflow")},{id:"opinionCircuit",icon:"fas fa-comment-alt",label:this.translate.instant("lang.avis")},{id:"info",icon:"fas fa-info-circle",label:this.translate.instant("lang.informations")}],this.selectedProcessTool={defaultTab:null,canUpdateData:!1,canUpdateModel:!1,canUpdateDocuments:!1},this.selectedProcessToolClone=null,this.refreshBasketGroup=new p.o}ngOnInit(){return Object(gt.a)(this,void 0,void 0,(function*(){yield this.initCustomFields(),this.filteredDataOptions=this.dataControl.valueChanges.pipe(Object(r.a)(""),Object(l.a)(t=>this._filterData(t))),this.availableDataClone=JSON.parse(JSON.stringify(this.availableData)),this.displayedSecondaryData=[];let t=0;this.selectedTemplateDisplayedSecondaryData=this.basketGroup.list_display.templateColumns,this.selectedTemplateDisplayedSecondaryDataClone=this.selectedTemplateDisplayedSecondaryData,this.basketGroup.list_display.subInfos.forEach(e=>{t=this.availableData.map(t=>t.value).indexOf(e.value),this.availableData[t].cssClasses=e.cssClasses,this.displayedSecondaryData.push(this.availableData[t]),this.availableData.splice(t,1)}),this.selectedListEvent=this.basketGroup.list_event,this.selectedListEventClone=this.selectedListEvent,"processDocument"===this.basketGroup.list_event?(this.selectedProcessTool.defaultTab=null===this.basketGroup.list_event_data?"dashboard":this.basketGroup.list_event_data.defaultTab,this.selectedProcessTool.canUpdateData=null!==this.basketGroup.list_event_data&&this.basketGroup.list_event_data.canUpdateData,this.selectedProcessTool.canUpdateModel=null!==this.basketGroup.list_event_data&&this.basketGroup.list_event_data.canUpdateModel):"signatureBookAction"===this.basketGroup.list_event&&(this.selectedProcessTool.canUpdateDocuments=null!==this.basketGroup.list_event_data&&this.basketGroup.list_event_data.canUpdateDocuments),this.selectedProcessToolClone=JSON.parse(JSON.stringify(this.selectedProcessTool)),this.displayedSecondaryDataClone=JSON.parse(JSON.stringify(this.displayedSecondaryData))}))}initCustomFields(){return new Promise((t,e)=>{this.http.get("../rest/customFields").pipe(Object(l.a)(t=>(t.customFields=t.customFields.map(t=>({value:"indexingCustomField_"+t.id,label:t.label,sample:this.translate.instant("lang.customField")+t.id,cssClasses:["align_leftData"],icon:"fa-hashtag"})),t.customFields)),Object(d.a)(e=>{console.log(e),this.availableData=this.availableData.concat(e),t(!0)}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()})}toggleData(){this.dataControl.disabled?this.dataControl.enable():this.dataControl.disable(),this.displayMode="label"===this.displayMode?"sample":"label"}setStyle(t,e){const i=e.split("_");2===i.length&&t.cssClasses.forEach((a,n)=>{a.includes(i[0])&&a!==e&&t.cssClasses.splice(n,1)});const a=t.cssClasses.indexOf(e);-1===a?t.cssClasses.push(e):t.cssClasses.splice(a,1)}addData(t){const e=this.availableData.map(t=>t.value).indexOf(t.option.value.value);this.displayedSecondaryData.push(t.option.value),this.availableData.splice(e,1),$("#availableData").blur(),this.dataControl.setValue("")}removeData(t,e){this.availableData.push(t),this.displayedSecondaryData.splice(e,1),this.dataControl.setValue("")}removeAllData(){this.availableData=this.availableData.concat(this.displayedSecondaryData),this.displayedSecondaryData=[],this.dataControl.setValue("")}drop(t){t.previousContainer===t.container&&Object(Ma.h)(t.container.data,t.previousIndex,t.currentIndex)}saveTemplate(){let t={};const e=[];this.displayedSecondaryData.forEach(t=>{e.push({value:t.value,cssClasses:t.cssClasses,icon:t.icon})}),t={templateColumns:this.selectedTemplateDisplayedSecondaryData,subInfos:e},this.http.put("../rest/baskets/"+this.basketGroup.basket_id+"/groups/"+this.basketGroup.group_id,{list_display:t,list_event:this.selectedListEvent,list_event_data:this.selectedProcessTool}).subscribe(()=>{this.displayedSecondaryDataClone=JSON.parse(JSON.stringify(this.displayedSecondaryData)),this.basketGroup.list_display=e,this.basketGroup.list_event=this.selectedListEvent,this.selectedListEventClone=this.selectedListEvent,this.basketGroup.list_event_data=this.selectedProcessTool,this.selectedProcessToolClone=JSON.parse(JSON.stringify(this.selectedProcessTool)),this.selectedTemplateDisplayedSecondaryDataClone=JSON.parse(JSON.stringify(this.selectedTemplateDisplayedSecondaryData)),this.notify.success(this.translate.instant("lang.modificationsProcessed")),this.refreshBasketGroup.emit(this.basketGroup)},t=>{this.notify.error(t.error.errors)})}_filterData(t){let e="";return"string"==typeof t?e=t.toLowerCase():null!==t&&(e=t.label.toLowerCase()),this.availableData.filter(t=>t.label.toLowerCase().includes(e))}checkModif(){return JSON.stringify(this.displayedSecondaryData)===JSON.stringify(this.displayedSecondaryDataClone)&&this.selectedListEvent===this.selectedListEventClone&&JSON.stringify(this.selectedProcessTool)===JSON.stringify(this.selectedProcessToolClone)&&JSON.stringify(this.selectedTemplateDisplayedSecondaryData)===JSON.stringify(this.selectedTemplateDisplayedSecondaryDataClone)}cancelModification(){this.displayedSecondaryData=JSON.parse(JSON.stringify(this.displayedSecondaryDataClone)),this.selectedListEvent=this.selectedListEventClone,this.selectedProcessTool=JSON.parse(JSON.stringify(this.selectedProcessToolClone)),this.availableData=JSON.parse(JSON.stringify(this.availableDataClone)),this.selectedTemplateDisplayedSecondaryData=JSON.parse(JSON.stringify(this.selectedTemplateDisplayedSecondaryDataClone));let t=0;this.displayedSecondaryData.forEach(e=>{t=this.availableData.map(t=>t.value).indexOf(e.value),this.availableData.splice(t,1)}),this.dataControl.setValue("")}hasFolder(){return this.displayedSecondaryData.map(t=>t.value).indexOf("getFolders")>-1}changeEventList(t){this.selectedProcessTool="processDocument"===t.value?{defaultTab:"dashboard"}:{}}toggleCanUpdate(t){t||(this.selectedProcessTool.canUpdateModel=t)}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["list-administration"]],inputs:{basketGroup:["currentBasketGroup","basketGroup"]},outputs:{refreshBasketGroup:"refreshBasketGroup"},decls:59,vars:56,consts:[["appearance","outline",1,"eventList"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["class","formType ratio-2 col-sm-12",4,"ngIf"],[1,"editorTool"],["color","primary","mat-icon-button","",3,"title","click",4,"ngIf"],["color","primary","mat-button","",3,"title","matMenuTriggerFor"],[1,"fas","fa-columns"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"area"],["appearance","outline","floatLabel","never"],["id","availableData","name","availableData","type","text","matInput","",3,"formControl","placeholder","matAutocomplete"],[3,"optionSelected"],["auto","matAutocomplete"],["class","dataList",3,"value",4,"ngFor","ngForOf"],["color","warn","mat-button","",2,"float","right",3,"disabled","click"],[4,"ngIf"],[1,"resultRow","newRow"],["class","resultCol",3,"class",4,"ngFor","ngForOf"],["multiple","",1,"actions"],["color","primary","mat-icon-button","",3,"title","disabled"],["fontSet","fas","matBadge","2","fontIcon","fa-comments fa-2x",3,"matBadgeHidden"],["fontSet","fas","matBadge","7","fontIcon","fa-paperclip fa-2x",3,"matBadgeHidden"],["fontSet","fas","fontIcon","fa-sitemap fa-2x"],["fontSet","fas","fontIcon","fa-info-circle fa-2x"],["class","folder-info",4,"ngFor","ngForOf"],[1,"row"],[1,"col-md-12","text-center",2,"margin-top","30px"],["color","primary","mat-raised-button","",3,"disabled","click"],["color","default","mat-raised-button","",3,"disabled","click"],[3,"value"],[1,"formType","ratio-2","col-sm-12"],[1,"formType-title"],[3,"ngModel","ngModelChange"],[2,"padding","10px"],["color","primary",3,"ngModel","ngModelChange","change"],["color","primary",3,"ngModel","disabled","ngModelChange"],["color","primary",3,"ngModel","ngModelChange"],["color","primary","mat-icon-button","",3,"title","click"],["fontSet","fas","fontIcon","fa-eye"],["fontSet","fas","fontIcon","fa-edit"],["mat-menu-item","",3,"click"],[1,"dataList",3,"value"],[1,"optionContent"],[1,"dataIcon"],["color","primary"],[1,"dataLabel"],["cdkDropListOrientation","horizontal","cdkDropList","",3,"cdkDropListData","cdkDropListDropped"],[4,"ngFor","ngForOf"],["class","example-box","cdkDrag","",4,"ngIf"],["cdkDrag","",1,"example-box"],["color","primary","mat-icon-button","",3,"matMenuTriggerFor",4,"ngIf"],["color","warn","fontSet","fas","fontIcon","fa-trash fa-2x",1,"secondaryInformations_icon"],["fontSet","fas","fontIcon","fa-bold fa-2x",1,"secondaryInformations_icon"],["fontSet","fas","fontIcon","fa-align-left fa-2x",1,"secondaryInformations_icon"],["fontSet","fas","fontIcon","fa-align-center fa-2x",1,"secondaryInformations_icon"],["fontSet","fas","fontIcon","fa-align-right fa-2x",1,"secondaryInformations_icon"],["fontSet","fas","fontIcon","fa-text-height fa-2x",1,"secondaryInformations_icon"],[2,"width","100%"],[1,"secondaryInformations_label",3,"innerHTML"],["color","primary","mat-icon-button","",3,"matMenuTriggerFor"],["fontSet","fas","fontIcon","fa-ellipsis-v fa-2x"],[1,"resultCol"],["color","primary","class","fm fm-letter fm-2x",4,"ngIf"],["color","warn","class","fm fm-letter-status-inprogress fm-2x",4,"ngIf"],[1,"resultCol_chrono"],["color","primary",1,"fm","fm-letter","fm-2x"],["color","warn",1,"fm","fm-letter-status-inprogress","fm-2x"],[1,"folder-info"],[1,"badge","badge-folder"],[1,"fa","fa-folder"]],template:function(t,e){if(1&t&&(p.Wb(0,"mat-form-field",0),p.Wb(1,"mat-label"),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"mat-select",1),p.dc("ngModelChange",(function(t){return e.selectedListEvent=t}))("selectionChange",(function(t){return e.changeEventList(t)})),p.Oc(5,Nn,3,4,"mat-option",2),p.Vb(),p.Vb(),p.Oc(6,Bn,19,20,"div",3),p.Oc(7,Xn,8,7,"div",3),p.Rb(8,"hr"),p.Wb(9,"mat-toolbar",4),p.Wb(10,"span"),p.Oc(11,Gn,3,3,"button",5),p.Oc(12,qn,3,3,"button",5),p.Wb(13,"button",6),p.ic(14,"translate"),p.Qc(15),p.Rb(16,"i",7),p.Vb(),p.Wb(17,"mat-menu",null,8),p.Oc(19,Kn,2,1,"button",9),p.Vb(),p.Vb(),p.Wb(20,"span",10),p.Wb(21,"form"),p.Wb(22,"mat-form-field",11),p.Rb(23,"input",12),p.ic(24,"translate"),p.Wb(25,"mat-autocomplete",13,14),p.dc("optionSelected",(function(t){return e.addData(t)})),p.Oc(27,Jn,6,5,"mat-option",15),p.ic(28,"async"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(29,"span"),p.Wb(30,"button",16),p.dc("click",(function(){return e.removeAllData()})),p.Qc(31),p.ic(32,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(33,"mat-card"),p.Oc(34,eo,3,5,"ng-container",17),p.Wb(35,"div",18),p.Oc(36,so,3,4,"span",19),p.Wb(37,"mat-button-toggle-group",20),p.Wb(38,"button",21),p.ic(39,"translate"),p.Rb(40,"mat-icon",22),p.Vb(),p.Wb(41,"button",21),p.ic(42,"translate"),p.Rb(43,"mat-icon",23),p.Vb(),p.Wb(44,"button",21),p.ic(45,"translate"),p.Rb(46,"mat-icon",24),p.Vb(),p.Wb(47,"button",21),p.ic(48,"translate"),p.Rb(49,"mat-icon",25),p.Vb(),p.Vb(),p.Vb(),p.Oc(50,lo,2,1,"div",26),p.Vb(),p.Wb(51,"div",27),p.Wb(52,"div",28),p.Wb(53,"button",29),p.dc("click",(function(){return e.saveTemplate()})),p.Qc(54),p.ic(55,"translate"),p.Vb(),p.Wb(56,"button",30),p.dc("click",(function(){return e.cancelModification()})),p.Qc(57),p.ic(58,"translate"),p.Vb(),p.Vb(),p.Vb()),2&t){const t=p.zc(18),i=p.zc(26);p.Db(2),p.Rc(p.jc(3,34,"lang.eventList")),p.Db(2),p.oc("ngModel",e.selectedListEvent),p.Db(1),p.oc("ngForOf",e.listEvent),p.Db(1),p.oc("ngIf","processDocument"===e.selectedListEvent),p.Db(1),p.oc("ngIf","signatureBookAction"===e.selectedListEvent),p.Db(4),p.oc("ngIf","label"==e.displayMode),p.Db(1),p.oc("ngIf","sample"==e.displayMode),p.Db(1),p.oc("title",p.jc(14,36,"lang.templateUsed"))("matMenuTriggerFor",t),p.Db(2),p.Sc(" ",e.selectedTemplateDisplayedSecondaryData," "),p.Db(4),p.oc("ngForOf",e.templateDisplayedSecondaryData),p.Db(4),p.pc("placeholder",p.jc(24,38,"lang.availableDatas")),p.oc("formControl",e.dataControl)("matAutocomplete",i),p.Db(4),p.oc("ngForOf",p.jc(28,40,e.filteredDataOptions)),p.Db(3),p.oc("disabled","sample"==e.displayMode),p.Db(1),p.Sc(" ",p.jc(32,42,"lang.eraseAll")," "),p.Db(3),p.oc("ngIf",e.displayedSecondaryData.length>0&&"sample"==e.displayMode||"label"==e.displayMode),p.Db(2),p.oc("ngForOf",e.displayedMainData),p.Db(2),p.pc("title",p.jc(39,44,"lang.notes")),p.oc("disabled","label"==e.displayMode),p.Db(2),p.oc("matBadgeHidden","label"==e.displayMode),p.Db(1),p.pc("title",p.jc(42,46,"lang.attachments")),p.oc("disabled","label"==e.displayMode),p.Db(2),p.oc("matBadgeHidden","label"==e.displayMode),p.Db(1),p.pc("title",p.jc(45,48,"lang.diffusionList")),p.oc("disabled","label"==e.displayMode),p.Db(3),p.pc("title",p.jc(48,50,"lang.linkDetails")),p.oc("disabled","label"==e.displayMode),p.Db(3),p.oc("ngForOf",e.displayedSecondaryData),p.Db(3),p.oc("disabled",e.checkModif()),p.Db(1),p.Sc(" ",p.jc(55,52,"lang.validate")," "),p.Db(2),p.oc("disabled",e.checkModif()),p.Db(1),p.Sc(" ",p.jc(58,54,"lang.cancel")," ")}},directives:[S.c,S.g,at.a,c.u,c.x,O.s,O.t,tt.a,R.b,Qe.d,Qe.e,c.K,c.v,c.w,w.b,c.d,$n.d,c.j,$n.a,j.a,jt.b,It.a,zn.a,k.p,et.a,Qe.b,Ma.e,Ma.a,_.a],pipes:[h.d,O.b,T.a],styles:[".availableData[_ngcontent-%COMP%]{margin:10px;display:flex}.secondaryInformations[_ngcontent-%COMP%]{border:1px solid rgba(249,152,48,.4);font-size:10px;height:30px;color:#666}.secondaryInformations_icon[_ngcontent-%COMP%]{height:auto}.secondaryInformations_label[_ngcontent-%COMP%]{width:100%}.resultRow[_ngcontent-%COMP%]{align-items:center;display:flex;padding:5px}.resultRow-mobile[_ngcontent-%COMP%]{font-size:80%}.resultCol[_ngcontent-%COMP%]{flex:1;overflow:hidden;text-overflow:ellipsis}.resultCol-mobile[_ngcontent-%COMP%]{overflow:inherit;text-overflow:inherit;word-break:break-all}.resultCol_chrono[_ngcontent-%COMP%]{color:rgba(0,0,0,.4);font-size:90%}.actions[_ngcontent-%COMP%]{text-align:right;box-shadow:none;border:none;flex:1;justify-content:flex-end;overflow:inherit}.elemToDrag[_ngcontent-%COMP%]{flex:1;border:1px dashed;padding:10px;height:10px;line-height:0;cursor:move;margin-right:5px;margin-left:5px}.columns[_ngcontent-%COMP%]{width:100%;height:90px;padding:20px 10px;border-bottom:1px solid #ccc;color:rgba(0,0,0,.87);display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;background:#fff;font-size:14px}.mat-badge-content[_ngcontent-%COMP%]{background:#f99830}.example-list[_ngcontent-%COMP%]{display:grid;gap:10px;height:auto;max-width:100%;border-radius:4px;border:1px solid rgba(249,152,48,.4);font-size:10px;background:#f5f5f5}.example-box[_ngcontent-%COMP%]{color:#666;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;background:#f5f5f5;flex-grow:1;flex-basis:0;height:20px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.editorTool[_ngcontent-%COMP%]{display:flex;height:44px;font-size:10px;margin-bottom:30px}.editorTool[_ngcontent-%COMP%]   .area[_ngcontent-%COMP%]{flex:1}.editorTool[_ngcontent-%COMP%]   .area[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.editorTool[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{border-left:1px solid #666;height:70%;margin-left:10px;margin-right:10px}.editorTool[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{height:35px}.editorTool[_ngcontent-%COMP%]     .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{background:inherit}.editorTool[_ngcontent-%COMP%]     .mat-form-field-outline{background:#fff}.optionContent[_ngcontent-%COMP%]{display:flex!important}.optionContent[_ngcontent-%COMP%]   .dataIcon[_ngcontent-%COMP%]{width:30px}.optionContent[_ngcontent-%COMP%]   .dataIcon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.optionContent[_ngcontent-%COMP%]   .dataLabel[_ngcontent-%COMP%]{flex:1}.isSelectedMenu[_ngcontent-%COMP%]{background:rgba(249,152,48,.14)}.align_leftData[_ngcontent-%COMP%]{text-align:left}.align_centerData[_ngcontent-%COMP%]{text-align:center}.align_rightData[_ngcontent-%COMP%]{text-align:right}.boldFontData[_ngcontent-%COMP%]{font-weight:700}.bigFontData[_ngcontent-%COMP%]{font-size:14px}.smallFontData[_ngcontent-%COMP%]{font-size:10px}.normalData[_ngcontent-%COMP%]{flex:1}.longData[_ngcontent-%COMP%]{flex:3}.eventList[_ngcontent-%COMP%]{padding-top:10px}.badge-folder[_ngcontent-%COMP%]{cursor:default;background:#135f7f;margin:5px;font-size:8px;max-width:250px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.formType[_ngcontent-%COMP%]{align-items:center;margin-bottom:10px;border-radius:4px;border:1px solid #ccc;position:relative;padding:10px}.formType-title[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;max-width:85%;text-overflow:ellipsis;z-index:1;font-size:10px;font-weight:700;background:#fff;position:absolute;top:-7px;left:10px;padding:0;margin:0;color:#135f7f}"]}),t})();const po=["snav2"],ho=["adminMenuTemplate"],uo=function(t){return{opacity:t}};function mo(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-nav-list"),p.Wb(1,"h3",13),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"a",20),p.dc("click",(function(){return p.Dc(t),p.hc(2).linkGroup()})),p.Rb(5,"mat-icon",21),p.Wb(6,"p",22),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Rb(9,"mat-divider"),p.Wb(10,"a",23),p.ic(11,"translate"),p.Wb(12,"mat-icon",24),p.Wb(13,"mat-slide-toggle",25),p.dc("change",(function(){p.Dc(t);const e=p.hc(2);return e.toggleIsSearchBasket(e.basket),!1})),p.Vb(),p.Vb(),p.Wb(14,"p",26),p.dc("click",(function(){p.Dc(t);const e=p.hc(2);return e.toggleIsSearchBasket(e.basket),!1})),p.Qc(15),p.ic(16,"translate"),p.Vb(),p.Vb(),p.Wb(17,"a",23),p.ic(18,"translate"),p.Wb(19,"mat-icon",24),p.Wb(20,"mat-slide-toggle",25),p.dc("change",(function(){p.Dc(t);const e=p.hc(2);return e.toggleFlagNotif(e.basket),!1})),p.Vb(),p.Vb(),p.Wb(21,"p",26),p.dc("click",(function(){p.Dc(t);const e=p.hc(2);return e.toggleFlagNotif(e.basket),!1})),p.Qc(22),p.ic(23,"translate"),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.Db(2),p.Rc(p.jc(3,10,"lang.actions")),p.Db(5),p.Sc(" ",p.jc(8,12,"lang.linkGroup")," "),p.Db(3),p.pc("matTooltip",p.jc(11,14,"lang.isSearchBasketInfo")),p.Db(3),p.oc("checked",t.basket.isSearchBasket),p.Db(1),p.oc("ngStyle",p.vc(22,uo,t.basket.isSearchBasket?"":"0.3")),p.Db(1),p.Sc(" ",p.jc(16,16,"lang.isSearchBasket")," "),p.Db(2),p.pc("matTooltip",p.jc(18,18,"lang.basketNotification")),p.Db(3),p.oc("checked",t.basket.flagNotif),p.Db(1),p.oc("ngStyle",p.vc(24,uo,t.basket.flagNotif?"":"0.3")),p.Db(1),p.Sc(" ",p.jc(23,20,"lang.activateNotification")," ")}}function fo(t,e){if(1&t&&p.Oc(0,mo,24,26,"mat-nav-list",19),2&t){const t=p.hc();p.oc("ngIf",!t.creationMode)}}function go(t,e){1&t&&(p.Wb(0,"div",27),p.Rb(1,"mat-spinner",28),p.Vb())}function vo(t,e){if(1&t){const t=p.Xb();p.Wb(0,"input",49),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).basket.id=e}))("blur",(function(){return p.Dc(t),p.hc(2).isAvailable()})),p.ic(1,"translate"),p.Vb()}if(2&t){const t=p.hc(2);p.pc("placeholder",p.jc(1,2,"lang.id")),p.oc("ngModel",t.basket.id)}}function yo(t,e){if(1&t){const t=p.Xb();p.Wb(0,"input",50),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).basket.id=e})),p.ic(1,"translate"),p.ic(2,"translate"),p.Vb()}if(2&t){const t=p.hc(2);p.pc("placeholder",p.jc(1,3,"lang.id")),p.pc("title",p.jc(2,5,"lang.id")),p.oc("ngModel",t.basket.id)}}function Do(t,e){if(1&t&&(p.Wb(0,"mat-option",58),p.Qc(1),p.Vb()),2&t){const t=e.$implicit,i=p.hc(3);p.oc("value",t),p.Db(1),p.Sc(" ",i.langVarName[i.orderColumns.indexOf(t)],"")}}function Vo(t,e){if(1&t&&(p.Wb(0,"mat-option",58),p.Qc(1),p.Vb()),2&t){const t=e.$implicit,i=p.hc(3);p.oc("value",t),p.Db(1),p.Sc(" ",i.langOrderName[i.orderByColumns.indexOf(t)],"")}}function Co(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",59),p.dc("click",(function(){return p.Dc(t),p.hc(3).addLine()})),p.Rb(1,"mat-icon",60),p.Vb()}if(2&t){const t=p.hc(3);p.oc("disabled",2==t.orderColumnsSelected.length)}}function Mo(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",36),p.Wb(1,"div",51),p.Wb(2,"mat-form-field"),p.Wb(3,"mat-select",52),p.dc("ngModelChange",(function(i){p.Dc(t);const a=e.index;return p.hc(2).orderColumnsSelected[a].column=i})),p.ic(4,"translate"),p.Oc(5,Do,2,2,"mat-option",53),p.Vb(),p.Vb(),p.Vb(),p.Wb(6,"div",51),p.Wb(7,"mat-form-field"),p.Wb(8,"mat-select",52),p.dc("ngModelChange",(function(i){return p.Dc(t),e.$implicit.order=i})),p.ic(9,"translate"),p.Oc(10,Vo,2,2,"mat-option",53),p.Vb(),p.Vb(),p.Vb(),p.Wb(11,"div",54),p.Wb(12,"button",55),p.dc("click",(function(){p.Dc(t);const i=e.index;return p.hc(2).removeLine(i)})),p.Rb(13,"mat-icon",56),p.Vb(),p.Oc(14,Co,2,1,"button",57),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit,i=e.index,a=p.hc(2);p.Db(3),p.rc("placeholder","",p.jc(4,11,"lang.defaultSort")," ",i+1,""),p.qc("name","basket_res_order",i,""),p.oc("ngModel",a.orderColumnsSelected[i].column),p.Db(2),p.oc("ngForOf",a.orderColumns),p.Db(3),p.pc("placeholder",p.jc(9,13,"lang.orderBy")),p.qc("name","order_by_select",i,""),p.oc("ngModel",t.order),p.Db(2),p.oc("ngForOf",a.orderByColumns),p.Db(2),p.oc("disabled",1==a.orderColumnsSelected.length),p.Db(2),p.oc("ngIf",a.orderColumnsSelected.length==i+1)}}function Wo(t,e){if(1&t){const t=p.Xb();p.Wb(0,"span"),p.Qc(1),p.Vb(),p.Wb(2,"mat-icon",62),p.dc("click",(function(){p.Dc(t);const e=p.hc().index;return p.hc(2).unlinkGroup(e)})),p.ic(3,"translate"),p.Vb()}if(2&t){const t=p.hc().$implicit;p.Db(1),p.Rc(t.group_desc),p.Db(1),p.pc("matTooltip",p.jc(3,2,"lang.unlinkGroup"))}}function xo(t,e){1&t&&(p.Wb(0,"small"),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc("(",p.jc(2,1,"lang.default"),")"))}function Oo(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-icon",85),p.dc("click",(function(e){return p.Dc(t),e.stopPropagation()})),p.ic(1,"translate"),p.Vb()}2&t&&p.pc("matTooltip",p.jc(1,1,"lang.delete"))}const _o=function(t){return{"font-weight":t}};function So(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-chip",81),p.dc("click",(function(){p.Dc(t);const e=p.hc().$implicit,i=p.hc(2).$implicit;return p.hc(2).openSettings(i,e)}))("removed",(function(){p.Dc(t);const e=p.hc().$implicit,i=p.hc(2).$implicit;return p.hc(2).unlinkAction(i,e)})),p.Qc(1," \xa0 "),p.Wb(2,"span"),p.Qc(3),p.Vb(),p.Qc(4,"\xa0 "),p.Oc(5,xo,3,3,"small",19),p.Rb(6,"span",82),p.Wb(7,"button",83),p.dc("click",(function(e){p.Dc(t);const i=p.hc().$implicit,a=p.hc(2).$implicit,n=p.hc(2);return e.stopPropagation(),n.setDefaultAction(a,i)})),p.Qc(8),p.ic(9,"translate"),p.Vb(),p.Oc(10,Oo,2,3,"mat-icon",84),p.Vb()}if(2&t){const t=p.hc().$implicit;p.qc("matTooltip","id : ",t.id,""),p.oc("ngStyle",p.vc(9,_o,1==t.default_action_list?"bold":"")),p.Db(3),p.Rc(t.label_action),p.Db(2),p.oc("ngIf",1==t.default_action_list),p.Db(2),p.oc("disabled",t.default_action_list),p.Db(1),p.Rc(p.jc(9,7,"lang.setByDefault")),p.Db(2),p.oc("ngIf",1!=t.default_action_list)}}function wo(t,e){if(1&t&&(p.Wb(0,"span",79),p.Oc(1,So,11,11,"mat-chip",80),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.oc("ngIf",1==t.checked)}}function Io(t,e){1&t&&p.Rb(0,"mat-header-cell")}function jo(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-cell",86),p.Wb(1,"mat-checkbox",87),p.dc("change",(function(){p.Dc(t);const e=p.hc(2).$implicit;return p.hc(2).addAction(e)}))("ngModelChange",(function(i){return p.Dc(t),e.$implicit.checked=i})),p.Wb(2,"span"),p.Qc(3),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit;p.qc("matTooltip","id : ",t.id,""),p.Db(1),p.oc("disabled",1==t.default_action_list)("ngModel",t.checked),p.Db(2),p.Rc(t.label_action)}}function ko(t,e){1&t&&p.Rb(0,"mat-header-cell")}function Ro(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-cell",88),p.Wb(1,"button",89),p.Rb(2,"mat-icon",90),p.Vb(),p.Wb(3,"mat-menu",null,91),p.Wb(5,"button",92),p.dc("click",(function(){p.Dc(t);const i=e.$implicit,a=p.hc(2).$implicit;return p.hc(2).setDefaultAction(a,i)})),p.Rb(6,"mat-icon",93),p.Wb(7,"span"),p.Qc(8),p.ic(9,"translate"),p.Vb(),p.Vb(),p.Wb(10,"button",94),p.dc("click",(function(){p.Dc(t);const i=e.$implicit,a=p.hc(2).$implicit;return p.hc(2).openSettings(a,i)})),p.Rb(11,"mat-icon",95),p.Wb(12,"span"),p.Qc(13),p.ic(14,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit,i=p.zc(4);p.qc("matTooltip","id : ",t.id,""),p.Db(1),p.oc("matMenuTriggerFor",i)("disabled",!t.checked),p.Db(4),p.oc("disabled",1==t.default_action_list),p.Db(3),p.Rc(p.jc(9,6,"lang.defaultAction")),p.Db(5),p.Rc(p.jc(14,8,"lang.moreOptions"))}}function To(t,e){1&t&&p.Rb(0,"mat-row")}function Po(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-tab-group"),p.Wb(1,"mat-tab",31),p.ic(2,"translate"),p.Wb(3,"div",63),p.Wb(4,"h5"),p.Qc(5),p.ic(6,"translate"),p.Vb(),p.Wb(7,"mat-chip-list",64,65),p.Oc(9,wo,2,1,"span",66),p.ic(10,"sortBy"),p.Vb(),p.Vb(),p.Wb(11,"div",63),p.Wb(12,"mat-accordion",67),p.Wb(13,"mat-expansion-panel",68),p.dc("opened",(function(){p.Dc(t);const e=p.hc().index;return p.hc(2).initAction(e)})),p.Wb(14,"mat-expansion-panel-header"),p.Wb(15,"mat-panel-title"),p.Qc(16),p.ic(17,"translate"),p.Vb(),p.Vb(),p.Wb(18,"div"),p.Wb(19,"mat-form-field"),p.Wb(20,"input",69),p.dc("keyup",(function(e){return p.Dc(t),p.hc(3).applyFilter(e.target.value)})),p.ic(21,"translate"),p.Vb(),p.Vb(),p.Wb(22,"mat-table",70,71),p.Ub(24,72),p.Oc(25,Io,1,0,"mat-header-cell",73),p.Oc(26,jo,4,4,"mat-cell",74),p.Tb(),p.Ub(27,75),p.Oc(28,ko,1,0,"mat-header-cell",73),p.Oc(29,Ro,15,10,"mat-cell",76),p.Tb(),p.Oc(30,To,1,0,"mat-row",77),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(31,"mat-tab",31),p.ic(32,"translate"),p.Wb(33,"list-administration",78),p.dc("refreshBasketGroup",(function(e){p.Dc(t);const i=p.hc().$implicit;return p.hc(2).updateGroupInfo(i,e)})),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc().$implicit,e=p.hc(2);p.Db(1),p.pc("label",p.jc(2,9,"lang.actions")),p.Db(4),p.Rc(p.jc(6,11,"lang.actionChosen")),p.Db(4),p.oc("ngForOf",p.kc(10,13,t.groupActions,"label_action")),p.Db(7),p.Sc(" ",p.jc(17,16,"lang.actionAvailable")," "),p.Db(4),p.pc("placeholder",p.jc(21,18,"lang.filterBy")),p.Db(2),p.oc("dataSource",e.dataSource),p.Db(8),p.oc("matRowDefColumns",e.displayedColumns),p.Db(1),p.pc("label",p.jc(32,20,"lang.resultPage")),p.Db(2),p.oc("currentBasketGroup",t)}}function Qo(t,e){if(1&t&&(p.Wb(0,"mat-tab",31),p.Oc(1,Wo,4,4,"ng-template",61),p.Oc(2,Po,34,22,"mat-tab-group",19),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.pc("label",t.group_desc),p.Db(2),p.oc("ngIf",i.selectedIndex>0)}}const Fo=function(t){return{color:t}};function Lo(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-card",29),p.Wb(1,"mat-tab-group",30),p.dc("selectedIndexChange",(function(e){return p.Dc(t),p.hc().selectedIndex=e})),p.Wb(2,"mat-tab",31),p.ic(3,"translate"),p.Wb(4,"form",32,33),p.dc("ngSubmit",(function(){return p.Dc(t),p.hc().onSubmit()})),p.Wb(6,"mat-form-field"),p.Oc(7,vo,2,4,"input",34),p.Oc(8,yo,3,7,"input",35),p.Vb(),p.Wb(9,"div",36),p.Wb(10,"div",37),p.Wb(11,"mat-form-field"),p.Wb(12,"input",38),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().basket.basket_name=e})),p.ic(13,"translate"),p.ic(14,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(15,"div",39),p.Wb(16,"mat-form-field"),p.Wb(17,"input",40),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().basket.color=e})),p.ic(18,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(19,"mat-form-field"),p.Wb(20,"input",41),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().basket.basket_desc=e})),p.ic(21,"translate"),p.ic(22,"translate"),p.Vb(),p.Vb(),p.Wb(23,"mat-form-field"),p.Wb(24,"textarea",42),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().basket.clause=e})),p.ic(25,"translate"),p.ic(26,"translate"),p.Vb(),p.Wb(27,"mat-icon",43),p.dc("click",(function(){return p.Dc(t),p.hc(),p.zc(16).toggle()})),p.ic(28,"translate"),p.Vb(),p.Vb(),p.Wb(29,"div",44),p.Oc(30,Mo,15,15,"div",45),p.Vb(),p.Wb(31,"div",46),p.Wb(32,"button",47),p.Qc(33),p.ic(34,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Oc(35,Qo,3,2,"mat-tab",48),p.Vb(),p.Vb()}if(2&t){const t=p.zc(5),e=p.hc();p.Db(1),p.oc("selectedIndex",e.selectedIndex),p.Db(1),p.pc("label",p.jc(3,21,"lang.informations")),p.Db(5),p.oc("ngIf",e.creationMode),p.Db(1),p.oc("ngIf",!e.creationMode),p.Db(4),p.pc("title",p.jc(13,23,"lang.label")),p.pc("placeholder",p.jc(14,25,"lang.label")),p.oc("ngModel",e.basket.basket_name)("ngStyle",p.vc(41,Fo,e.basket.color)),p.Db(5),p.pc("matTooltip",p.jc(18,27,"lang.chooseColor")),p.oc("ngModel",e.basket.color),p.Db(3),p.pc("title",p.jc(21,29,"lang.description")),p.pc("placeholder",p.jc(22,31,"lang.description")),p.oc("ngModel",e.basket.basket_desc),p.Db(4),p.pc("title",p.jc(25,33,"lang.clause")),p.pc("placeholder",p.jc(26,35,"lang.clause")),p.oc("ngModel",e.basket.clause),p.Db(3),p.pc("matTooltip",p.jc(28,37,"lang.keywordHelper")),p.Db(3),p.oc("ngForOf",e.orderColumnsSelected),p.Db(2),p.oc("disabled",!t.form.valid||0==e.orderColumnsSelected.length),p.Db(1),p.Rc(p.jc(34,39,"lang.save")),p.Db(2),p.oc("ngForOf",e.basketGroups)}}const Eo=["statusInput"];function Ao(t,e){1&t&&(p.Qc(0),p.ic(1,"translate")),2&t&&p.Sc(" ",p.jc(1,1,"lang.redirects")," ")}function Uo(t,e){1&t&&p.Oc(0,Ao,2,3,"ng-template",21)}function $o(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-expansion-panel",17),p.dc("opened",(function(){return p.Dc(t),p.hc(2).initService2()})),p.Wb(1,"mat-expansion-panel-header"),p.Wb(2,"mat-panel-title"),p.Qc(3),p.ic(4,"translate"),p.Vb(),p.Vb(),p.Wb(5,"mat-form-field"),p.Rb(6,"input",22),p.ic(7,"translate"),p.Vb(),p.Rb(8,"div",23),p.Vb()}2&t&&(p.Db(3),p.Sc(" ",p.jc(4,2,"lang.toUsersEntities")," "),p.Db(3),p.pc("placeholder",p.jc(7,4,"lang.searchEntities")))}function zo(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-tab"),p.Oc(1,Uo,1,0,void 0,7),p.Wb(2,"mat-accordion"),p.Wb(3,"mat-expansion-panel",17),p.dc("opened",(function(){return p.Dc(t),p.hc().initService()})),p.Wb(4,"mat-expansion-panel-header"),p.Wb(5,"mat-panel-title"),p.Qc(6),p.ic(7,"translate"),p.Vb(),p.Vb(),p.Wb(8,"mat-form-field"),p.Rb(9,"input",18),p.ic(10,"translate"),p.Vb(),p.Rb(11,"div",19),p.Vb(),p.Oc(12,$o,9,6,"mat-expansion-panel",20),p.Vb(),p.Vb()}if(2&t){const t=p.hc();p.Db(1),p.oc("ngIf","redirect"==t.data.action.keyword),p.Db(5),p.Sc(" ",p.jc(7,4,"lang.toEntities")," "),p.Db(3),p.pc("placeholder",p.jc(10,6,"lang.searchEntities")),p.Db(3),p.oc("ngIf","redirect"==t.data.action.keyword)}}function No(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-list-item",4),p.dc("click",(function(){p.Dc(t);const e=p.hc().$implicit;return p.hc().validateForm(e)})),p.Qc(1),p.Vb()}if(2&t){const t=p.hc().$implicit;p.Db(1),p.Sc(" ",t.group_desc," ")}}function Ho(t,e){if(1&t&&(p.Wb(0,"span"),p.Oc(1,No,2,1,"mat-list-item",3),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.oc("ngIf",0==t.isUsed)}}let Bo=(()=>{class t{constructor(t,e,i,a,n,o,s,c,r){this.translate=t,this.http=e,this.route=i,this.router=a,this.notify=n,this.dialog=o,this.headerService=s,this.appService=c,this.viewContainerRef=r,this.selectedIndex=0,this.loading=!1,this.config={},this.basket={},this.basketClone={},this.basketGroups=[],this.allGroups=[],this.actionsList=[],this.list_display=[],this.displayedColumns=["label_action","actions"],this.orderColumns=["alt_identifier","creation_date","process_limit_date","res_id","priority"],this.orderByColumns=["asc","desc"],this.langVarName=[this.translate.instant("lang.chrono"),this.translate.instant("lang.creationDate"),this.translate.instant("lang.processLimitDate"),this.translate.instant("lang.id"),this.translate.instant("lang.priority")],this.langOrderName=[this.translate.instant("lang.ascending"),this.translate.instant("lang.descending")],this.orderColumnsSelected=[{column:"res_id",order:"asc"}]}applyFilter(t){t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t}ngOnInit(){this.loading=!0,this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.route.params.subscribe(t=>{void 0===t.id?(this.headerService.setHeader(this.translate.instant("lang.basketCreation")),this.creationMode=!0,this.basketIdAvailable=!1,this.loading=!1):(this.orderColumnsSelected=[],this.creationMode=!1,this.basketIdAvailable=!0,this.id=t.id,this.http.get("../rest/baskets/"+this.id).subscribe(t=>{if(this.headerService.setHeader(this.translate.instant("lang.basketModification"),t.basket.basket_name),this.basket=t.basket,this.basket.id=t.basket.basket_id,this.basket.name=t.basket.basket_name,this.basket.description=t.basket.basket_desc,this.basket.clause=t.basket.basket_clause,this.basket.isSearchBasket="Y"!==t.basket.is_visible,this.basket.flagNotif="Y"===t.basket.flag_notif,""===this.basket.basket_res_order||null==this.basket.basket_res_order)this.orderColumnsSelected=[];else{const t=this.basket.basket_res_order.split(", ");for(let e=0;e<t.length;e++){const i=t[e].split(" ");i[1]||(i[1]="desc"),this.orderColumnsSelected.push({column:i[0],order:i[1]})}}this.basketClone=JSON.parse(JSON.stringify(this.basket)),this.http.get("../rest/baskets/"+this.id+"/groups").subscribe(t=>{this.allGroups=t.allGroups,this.allGroups.forEach(e=>{e.isUsed=!1,t.groups.forEach(t=>{e.group_id===t.group_id&&(e.isUsed=!0)})}),t.groups.forEach(t=>{t.groupActions.forEach(t=>{t.used_in_basketlist="Y"===t.used_in_basketlist,t.used_in_action_page="Y"===t.used_in_action_page,t.default_action_list="Y"===t.default_action_list})}),this.basketGroups=t.groups,this.loading=!1},t=>{this.notify.handleErrors(t)})},t=>{this.notify.handleErrors(t)}))})}openSettings(t,e){this.config={panelClass:"maarch-modal",data:{group:t,action:e}},this.dialogRef=this.dialog.open(Xo,this.config),this.dialogRef.afterClosed().subscribe(i=>{i&&this.http.put("../rest/baskets/"+this.id+"/groups/"+i.group.group_id+"/actions",{groupActions:i.group.groupActions}).subscribe(()=>{this.dialogRef=null,this.notify.success(this.translate.instant("lang.basketUpdated"))},i=>{this.dialogRef=null,this.openSettings(t,e),this.notify.error(i.error.errors)})})}isAvailable(){this.basket.id?this.http.get("../rest/baskets/"+this.basket.id).subscribe(()=>{this.basketIdAvailable=!1},t=>{this.basketIdAvailable=!1,t.error.errors===this.translate.instant("lang.basketNotFound")&&(this.basketIdAvailable=!0)}):this.basketIdAvailable=!1}onSubmit(){if(null!==this.orderColumnsSelected&&this.orderColumnsSelected.length>0){const t=[];for(let e=0;e<this.orderColumnsSelected.length;e++)t[e]=this.orderColumnsSelected[e].column+" "+this.orderColumnsSelected[e].order;this.basket.basket_res_order=t.join(", ")}else this.basket.basket_res_order="";this.creationMode?this.http.post("../rest/baskets",this.basket).subscribe(()=>{this.notify.success(this.translate.instant("lang.basketAdded")),this.router.navigate(["/administration/baskets/"+this.basket.id])},t=>{this.notify.error(t.error.errors)}):this.http.put("../rest/baskets/"+this.id,this.basket).subscribe(()=>{this.notify.success(this.translate.instant("lang.basketUpdated")),this.router.navigate(["/administration/baskets"])},t=>{this.notify.error(t.error.errors)})}addLine(){this.orderColumnsSelected.push(JSON.parse(JSON.stringify(this.orderColumnsSelected[0])))}removeLine(t){this.orderColumnsSelected.splice(t,1)}initAction(t){this.dataSource=new G.p(this.basketGroups[t].groupActions),this.dataSource.sort=this.sort}setDefaultAction(t,e){t.groupActions.forEach(t=>{t.default_action_list=t.id===e.id}),this.addAction(t)}unlinkGroup(t){confirm(this.translate.instant("lang.unlinkGroup")+" ?")&&this.http.delete("../rest/baskets/"+this.id+"/groups/"+this.basketGroups[t].group_id).subscribe(()=>{this.allGroups.forEach(e=>{e.group_id===this.basketGroups[t].group_id&&(e.isUsed=!1)}),this.basketGroups.splice(t,1),this.notify.success(this.translate.instant("lang.basketUpdated")),this.selectedIndex=0},t=>{this.notify.error(t.error.errors)})}linkGroup(){this.config={panelClass:"maarch-modal",data:{basketId:this.basket.id,groups:this.allGroups,linkedGroups:this.basketGroups}},this.dialogRef=this.dialog.open(Go,this.config),this.dialogRef.afterClosed().subscribe(t=>{t&&(t.list_display=this.basketGroups.length>0?this.basketGroups[this.basketGroups.length-1].list_display:{subInfos:[],templateColumns:0},this.http.post("../rest/baskets/"+this.id+"/groups",t).subscribe(()=>{this.basketGroups.push(t),this.allGroups.forEach(e=>{e.group_id===t.group_id&&(e.isUsed=!0)}),this.notify.success(this.translate.instant("lang.basketUpdated")),this.selectedIndex=this.basketGroups.length},t=>{this.notify.error(t.error.errors)})),this.dialogRef=null})}addAction(t){this.http.put("../rest/baskets/"+this.id+"/groups/"+t.group_id+"/actions",{groupActions:t.groupActions}).subscribe(()=>{this.notify.success(this.translate.instant("lang.actionsGroupBasketUpdated"))},t=>{this.notify.error(t.error.errors)})}toggleIsSearchBasket(t){t.isSearchBasket=!t.isSearchBasket,this.basketClone.isSearchBasket=t.isSearchBasket,this.http.put("../rest/baskets/"+this.id,this.basketClone).subscribe(()=>{this.notify.success(this.translate.instant("lang.basketUpdated"))},t=>{this.notify.error(t.error.errors)})}toggleFlagNotif(t){t.flagNotif=!t.flagNotif,this.basketClone.flagNotif=t.flagNotif,this.http.put("../rest/baskets/"+this.id,this.basketClone).subscribe(()=>{this.notify.success(this.translate.instant("lang.basketUpdated"))},t=>{this.notify.error(t.error.errors)})}unlinkAction(t,e){confirm(this.translate.instant("lang.unlinkAction")+" ?")&&(e.checked=!1,this.http.put("../rest/baskets/"+this.id+"/groups/"+t.group_id+"/actions",{groupActions:t.groupActions}).subscribe(()=>{this.notify.success(this.translate.instant("lang.actionsGroupBasketUpdated"))},t=>{this.notify.error(t.error.errors)}))}updateGroupInfo(t,e){}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(o.a),p.Qb(o.c),p.Qb(y.a),p.Qb(z.b),p.Qb(m.a),p.Qb(f.a),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(po,!0),p.Kc(ho,!0),p.Xc(N.a,!0),p.Xc(H.a,!0)),2&t&&(p.yc(i=p.ec())&&(e.sidenavRight=i.first),p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.paginator=i.first),p.yc(i=p.ec())&&(e.sort=i.first))},decls:93,vars:56,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",3,"mode","fixedInViewport","opened"],["snav2",""],["mat-subheader",""],["role","list",2,"width","300px","padding","5px"],[2,"font-size","10px"],[2,"border","1px black solid","padding","3px","font-size","10px"],["mat-line","",2,"font-weight","bold","font-size","10px"],["mat-line","",2,"font-size","10px"],[4,"ngIf"],["mat-list-item","",3,"click"],["color","primary","mat-list-icon","",1,"fa","fa-link"],["mat-line",""],["mat-list-item","","disableRipple","true",3,"matTooltip"],["color","primary","mat-list-icon",""],["color","primary",3,"checked","change"],["mat-line","",3,"ngStyle","click"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[3,"selectedIndex","selectedIndexChange"],[3,"label"],[1,"form-horizontal",3,"ngSubmit"],["basketForm","ngForm"],["matInput","","name","identifier","maxlength","32","pattern","^[\\w.-]*$","required","",3,"placeholder","ngModel","ngModelChange","blur",4,"ngIf"],["matInput","","name","identifier","required","","disabled","",3,"placeholder","title","ngModel","ngModelChange",4,"ngIf"],[1,"row"],[1,"col-md-11","col-xs-10"],["matInput","","name","label","maxlength","255","required","",3,"title","placeholder","ngModel","ngStyle","ngModelChange"],[1,"col-md-1","col-xs-2"],["matInput","","type","color","name","color",3,"matTooltip","ngModel","ngModelChange"],["matInput","","name","description","maxlength","255","required","",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","name","clause","matTextareaAutosize","","matAutosizeMinRows","1","required","",3,"title","placeholder","ngModel","ngModelChange"],["color","primary","matSuffix","",1,"fa","fa-info-circle",2,"cursor","pointer",3,"matTooltip","click"],["id","listOrder"],["class","row",4,"ngFor","ngForOf"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary",3,"disabled"],[3,"label",4,"ngFor","ngForOf"],["matInput","","name","identifier","maxlength","32","pattern","^[\\w.-]*$","required","",3,"placeholder","ngModel","ngModelChange","blur"],["matInput","","name","identifier","required","","disabled","",3,"placeholder","title","ngModel","ngModelChange"],[1,"col-md-5","col-xs-5","text-center"],["required","",3,"placeholder","ngModel","name","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-2","col-xs-2","text-left"],["color","warn","mat-icon-button","","type","button",3,"disabled","click"],[1,"fa","fa-minus-square","fa-2x"],["color","primary","mat-icon-button","","type","button",3,"disabled","click",4,"ngIf"],[3,"value"],["color","primary","mat-icon-button","","type","button",3,"disabled","click"],[1,"fa","fa-plus-square","fa-2x"],["mat-tab-label",""],["color","warn",1,"fa","fa-times",3,"matTooltip","click"],[1,"col-md-6"],[1,"mat-chip-list-stacked"],["chipList",""],["style","width:100%;",4,"ngFor","ngForOf"],[1,"basketActionsList"],[3,"opened"],["matInput","",3,"placeholder","keyup"],[3,"dataSource"],["table",""],["matColumnDef","label_action"],[4,"matHeaderCellDef"],["style","flex:6;",3,"matTooltip",4,"matCellDef"],["matColumnDef","actions"],["style","text-align:right",3,"matTooltip",4,"matCellDef"],[4,"matRowDef","matRowDefColumns"],[3,"currentBasketGroup","refreshBasketGroup"],[2,"width","100%"],["color","primary","style","cursor:pointer;margin:5px;border-radius:0px;display:flex;","selectable","true","removable","true",3,"matTooltip","ngStyle","click","removed",4,"ngIf"],["color","primary","selectable","true","removable","true",2,"cursor","pointer","margin","5px","border-radius","0px","display","flex",3,"matTooltip","ngStyle","click","removed"],[2,"flex","1 1 auto"],["mat-raised-button","",3,"disabled","click"],["matChipRemove","","color","warn","class","fa fa-times",3,"matTooltip","click",4,"ngIf"],["matChipRemove","","color","warn",1,"fa","fa-times",3,"matTooltip","click"],[2,"flex","6",3,"matTooltip"],["color","primary",3,"disabled","ngModel","change","ngModelChange"],[2,"text-align","right",3,"matTooltip"],["mat-icon-button","",3,"matMenuTriggerFor","disabled"],[1,"fa","fa-bars"],["menu","matMenu"],["mat-menu-item","",3,"disabled","click"],[1,"fa","fa-check-circle"],["mat-menu-item","",3,"click"],[1,"fa","fa-cogs"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,fo,1,1,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,go,2,0,"div",9),p.Oc(14,Lo,36,43,"mat-card",10),p.Vb(),p.Vb(),p.Vb(),p.Wb(15,"mat-sidenav",11,12),p.Wb(17,"mat-nav-list"),p.Wb(18,"h3",13),p.Qc(19),p.ic(20,"translate"),p.Vb(),p.Vb(),p.Wb(21,"mat-list",14),p.Wb(22,"p",15),p.Qc(23),p.ic(24,"translate"),p.Vb(),p.Wb(25,"div",16),p.Wb(26,"b"),p.Qc(27,"DESTINATION = @my_primary_entity or DESTINATION in (@subentities[@my_primary_entity])"),p.Vb(),p.Vb(),p.Wb(28,"h4",17),p.Qc(29,"@user :"),p.Vb(),p.Wb(30,"p",18),p.Qc(31),p.ic(32,"translate"),p.Vb(),p.Wb(33,"h4",17),p.Qc(34,"@user_id :"),p.Vb(),p.Wb(35,"p",18),p.Qc(36),p.ic(37,"translate"),p.Vb(),p.Wb(38,"h4",17),p.Qc(39,"@email :"),p.Vb(),p.Wb(40,"p",18),p.Qc(41),p.ic(42,"translate"),p.Vb(),p.Wb(43,"h4",17),p.Qc(44,"@my_entities :"),p.Vb(),p.Wb(45,"p",18),p.Qc(46),p.ic(47,"translate"),p.Vb(),p.Wb(48,"h4",17),p.Qc(49,"@my_entities_id :"),p.Vb(),p.Wb(50,"p",18),p.Qc(51),p.ic(52,"translate"),p.Vb(),p.Wb(53,"h4",17),p.Qc(54,"@my_primary_entity :"),p.Vb(),p.Wb(55,"p",18),p.Qc(56),p.ic(57,"translate"),p.Vb(),p.Wb(58,"h4",17),p.Qc(59,"@my_primary_entity_id :"),p.Vb(),p.Wb(60,"p",18),p.Qc(61),p.ic(62,"translate"),p.Vb(),p.Wb(63,"h4",17),p.Qc(64,"@subentities[('entity_1',...,'entity_n')] :"),p.Vb(),p.Wb(65,"p",18),p.Qc(66),p.ic(67,"translate"),p.Vb(),p.Wb(68,"h4",17),p.Qc(69,"@parent_entity['entity_id'] :"),p.Vb(),p.Wb(70,"p",18),p.Qc(71),p.ic(72,"translate"),p.Vb(),p.Wb(73,"h4",17),p.Qc(74,"@sisters_entities['entity_id'] :"),p.Vb(),p.Wb(75,"p",18),p.Qc(76),p.ic(77,"translate"),p.Vb(),p.Wb(78,"h4",17),p.Qc(79,"@entity_type['type'] :"),p.Vb(),p.Wb(80,"p",18),p.Qc(81),p.ic(82,"translate"),p.Vb(),p.Wb(83,"h4",17),p.Qc(84,"@all_entities :"),p.Vb(),p.Wb(85,"p",18),p.Qc(86),p.ic(87,"translate"),p.Vb(),p.Wb(88,"h4",17),p.Qc(89,"@immediate_children['entity_1',..., 'entity_id'] :"),p.Vb(),p.Wb(90,"p",18),p.Qc(91),p.ic(92,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading),p.Db(1),p.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",(e.appService.getViewMode(),!1)),p.Db(4),p.Rc(p.jc(20,26,"lang.keywordHelp")),p.Db(4),p.Rc(p.jc(24,28,"lang.keywordHelpDesc_11")),p.Db(8),p.Rc(p.jc(32,30,"lang.keywordHelpDesc_1")),p.Db(5),p.Rc(p.jc(37,32,"lang.keywordHelpDesc_12")),p.Db(5),p.Rc(p.jc(42,34,"lang.keywordHelpDesc_2")),p.Db(5),p.Rc(p.jc(47,36,"lang.keywordHelpDesc_3")),p.Db(5),p.Rc(p.jc(52,38,"lang.keywordHelpDesc_13")),p.Db(5),p.Rc(p.jc(57,40,"lang.keywordHelpDesc_4")),p.Db(5),p.Rc(p.jc(62,42,"lang.keywordHelpDesc_14")),p.Db(5),p.Rc(p.jc(67,44,"lang.keywordHelpDesc_5")),p.Db(5),p.Rc(p.jc(72,46,"lang.keywordHelpDesc_6")),p.Db(5),p.Rc(p.jc(77,48,"lang.keywordHelpDesc_7")),p.Db(5),p.Rc(p.jc(82,50,"lang.keywordHelpDesc_8")),p.Db(5),p.Rc(p.jc(87,52,"lang.keywordHelpDesc_9")),p.Db(5),p.Rc(p.jc(92,54,"lang.keywordHelpDesc_10")))},directives:[C.e,C.f,M.a,x.a,O.t,C.d,wt.h,wt.g,wt.a,k.l,wt.d,It.a,wt.c,_.a,kt.b,et.a,O.w,I.c,j.a,ke.c,ke.a,c.K,c.v,c.w,S.c,w.b,c.d,c.p,c.F,c.u,c.x,w.d,S.j,O.s,R.b,c.B,at.a,k.p,ke.d,Un.d,Re.a,Re.c,Re.g,Re.h,G.o,G.c,G.i,G.b,G.n,bo,Un.a,Un.e,G.h,G.a,Pe.a,Qe.d,Qe.e,Qe.b,G.m],pipes:[h.d,T.a],styles:[".basketActionsList[_ngcontent-%COMP%]    .mat-expansion-panel-body{height:400px;overflow:auto}.mat-chip[_ngcontent-%COMP%]{padding:25px!important}textarea.mat-input-element[_ngcontent-%COMP%]{padding:0;margin:0}"]}),t})(),Xo=(()=>{class t{constructor(t,e,i,a,n){this.translate=t,this.http=e,this.notify=i,this.data=a,this.dialogRef=n,this.allEntities=[]}ngOnInit(){this.http.get("../rest/entities").subscribe(t=>{[{id:"ALL_ENTITIES",keyword:"ALL_ENTITIES",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.allEntities")},{id:"ENTITIES_JUST_BELOW",keyword:"ENTITIES_JUST_BELOW",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.immediatelyBelowMyPrimaryEntity")},{id:"ENTITIES_BELOW",keyword:"ENTITIES_BELOW",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.belowAllMyEntities")},{id:"ALL_ENTITIES_BELOW",keyword:"ALL_ENTITIES_BELOW",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.belowMyPrimaryEntity")},{id:"MY_ENTITIES",keyword:"MY_ENTITIES",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.myEntities")},{id:"MY_PRIMARY_ENTITY",keyword:"MY_PRIMARY_ENTITY",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.myPrimaryEntity")},{id:"SAME_LEVEL_ENTITIES",keyword:"SAME_LEVEL_ENTITIES",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.sameLevelMyPrimaryEntity")},{id:"ENTITIES_JUST_UP",keyword:"ENTITIES_JUST_UP",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.immediatelySuperiorMyPrimaryEntity")}].forEach(t=>{this.allEntities.push(t)}),t.entities.forEach(t=>{this.allEntities.push(t)})},t=>{this.notify.handleErrors(t)})}initService(){this.allEntities.forEach(t=>{t.state={opened:!1,selected:!1},this.data.action.redirects.forEach(e=>{(t.id===e.keyword&&"ENTITY"===e.redirect_mode||t.id===e.entity_id&&"ENTITY"===e.redirect_mode)&&(t.state={opened:!0,selected:!0})})}),$("#jstree").jstree({checkbox:{three_state:!1},core:{force_text:!0,themes:{name:"proton",responsive:!0},data:this.allEntities},plugins:["checkbox","search"]}),$("#jstree").on("select_node.jstree",(t,e)=>{this.data.action.redirects.push(e.node.original.keyword?{action_id:this.data.action.id,entity_id:"",keyword:e.node.id,redirect_mode:"ENTITY"}:{action_id:this.data.action.id,entity_id:e.node.id,keyword:"",redirect_mode:"ENTITY"})}).on("deselect_node.jstree",(t,e)=>{this.data.action.redirects.forEach(t=>{if(e.node.original.keyword){if(t.keyword===e.node.original.keyword){const e=this.data.action.redirects.indexOf(t);this.data.action.redirects.splice(e,1)}}else if(t.entity_id===e.node.id){const e=this.data.action.redirects.indexOf(t);this.data.action.redirects.splice(e,1)}})}).jstree();let t=!1;$("#jstree_search").keyup((function(){t&&clearTimeout(t),t=setTimeout((function(){const t=$("#jstree_search").val();$("#jstree").jstree(!0).search(t)}),250)}))}initService2(){this.allEntities.forEach(t=>{t.state={opened:!1,selected:!1},this.data.action.redirects.forEach(e=>{(t.id===e.keyword&&"USERS"===e.redirect_mode||t.id===e.entity_id&&"USERS"===e.redirect_mode)&&(t.state={opened:!0,selected:!0})})}),$("#jstree2").jstree({checkbox:{three_state:!1},core:{force_text:!0,themes:{name:"proton",responsive:!0},data:this.allEntities},plugins:["checkbox","search"]}),$("#jstree2").on("select_node.jstree",(t,e)=>{this.data.action.redirects.push(e.node.original.keyword?{action_id:this.data.action.id,entity_id:"",keyword:e.node.id,redirect_mode:"USERS"}:{action_id:this.data.action.id,entity_id:e.node.id,keyword:"",redirect_mode:"USERS"})}).on("deselect_node.jstree",(t,e)=>{this.data.action.redirects.forEach(t=>{if(e.node.original.keyword){if(t.keyword===e.node.original.keyword){const e=this.data.action.redirects.indexOf(t);this.data.action.redirects.splice(e,1)}}else if(t.entity_id===e.node.id){const e=this.data.action.redirects.indexOf(t);this.data.action.redirects.splice(e,1)}})}).jstree();let t=!1;$("#jstree_search2").keyup((function(){t&&clearTimeout(t),t=setTimeout((function(){const t=$("#jstree_search2").val();$("#jstree2").jstree(!0).search(t)}),250)}))}saveSettings(){this.dialogRef.close(this.data)}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(z.a),p.Qb(z.h))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&p.Kc(Eo,!0),2&t&&p.yc(i=p.ec())&&(e.statusInput=i.first)},decls:109,vars:72,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["settingGroupsBasket","ngForm"],[1,"container-fluid"],[1,"col-md-6"],["id","usedInActionPage","name","usedInActionPage","color","primary",3,"ngModel","ngModelChange"],["id","usedInBasketlist","name","usedInBasketlist","color","primary",3,"ngModel","ngModelChange"],[4,"ngIf"],[3,"label"],["matInput","","name","clause","matTextareaAutosize","","matAutosizeMinRows","1",3,"title","placeholder","ngModel","ngModelChange"],["role","list",2,"width","400px","padding","5px"],[2,"font-size","10px"],[2,"border","1px black solid","padding","3px","font-size","10px"],["mat-line","",2,"font-weight","bold","font-size","10px"],["mat-line","",2,"font-size","10px"],[1,"divider-modal"],["mat-raised-button","","type","submit","color","primary",2,"margin","auto",3,"disabled","click"],[3,"opened"],["matInput","","id","jstree_search","name","jstree_search","type","text",3,"placeholder"],["id","jstree"],[3,"opened",4,"ngIf"],["mat-tab-label",""],["matInput","","id","jstree_search2","name","jstree_search2","type","text",3,"placeholder"],["id","jstree2"]],template:function(t,e){1&t&&(p.Wb(0,"div",0),p.Wb(1,"h2",1),p.Qc(2),p.ic(3,"translate"),p.Wb(4,"small"),p.Qc(5),p.Vb(),p.Vb(),p.Wb(6,"mat-dialog-content"),p.Wb(7,"form",null,2),p.Wb(9,"div",3),p.Wb(10,"div",4),p.Wb(11,"mat-checkbox",5),p.dc("ngModelChange",(function(t){return e.data.action.used_in_action_page=t})),p.Qc(12),p.ic(13,"translate"),p.Vb(),p.Vb(),p.Wb(14,"div",4),p.Wb(15,"mat-checkbox",6),p.dc("ngModelChange",(function(t){return e.data.action.used_in_basketlist=t})),p.Qc(16),p.ic(17,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(18,"mat-tab-group"),p.Oc(19,zo,13,8,"mat-tab",7),p.Wb(20,"mat-tab",8),p.ic(21,"translate"),p.Wb(22,"mat-form-field"),p.Wb(23,"textarea",9),p.dc("ngModelChange",(function(t){return e.data.action.where_clause=t})),p.ic(24,"translate"),p.ic(25,"translate"),p.Vb(),p.Vb(),p.Wb(26,"mat-accordion"),p.Wb(27,"mat-expansion-panel"),p.Wb(28,"mat-expansion-panel-header"),p.Wb(29,"mat-panel-title"),p.Qc(30),p.ic(31,"translate"),p.Vb(),p.Vb(),p.Wb(32,"mat-list",10),p.Wb(33,"p",11),p.Qc(34),p.ic(35,"translate"),p.Vb(),p.Wb(36,"div",12),p.Wb(37,"b"),p.Qc(38,"DESTINATION = @my_primary_entity or DESTINATION in (@subentities[@my_primary_entity])"),p.Vb(),p.Vb(),p.Wb(39,"h4",13),p.Qc(40,"@user :"),p.Vb(),p.Wb(41,"p",14),p.Qc(42),p.ic(43,"translate"),p.Vb(),p.Wb(44,"h4",13),p.Qc(45,"@user_id :"),p.Vb(),p.Wb(46,"p",14),p.Qc(47),p.ic(48,"translate"),p.Vb(),p.Wb(49,"h4",13),p.Qc(50,"@email :"),p.Vb(),p.Wb(51,"p",14),p.Qc(52),p.ic(53,"translate"),p.Vb(),p.Wb(54,"h4",13),p.Qc(55,"@my_entities :"),p.Vb(),p.Wb(56,"p",14),p.Qc(57),p.ic(58,"translate"),p.Vb(),p.Wb(59,"h4",13),p.Qc(60,"@my_entities_id :"),p.Vb(),p.Wb(61,"p",14),p.Qc(62),p.ic(63,"translate"),p.Vb(),p.Wb(64,"h4",13),p.Qc(65,"@my_primary_entity :"),p.Vb(),p.Wb(66,"p",14),p.Qc(67),p.ic(68,"translate"),p.Vb(),p.Wb(69,"h4",13),p.Qc(70,"@my_primary_entity_id :"),p.Vb(),p.Wb(71,"p",14),p.Qc(72),p.ic(73,"translate"),p.Vb(),p.Wb(74,"h4",13),p.Qc(75," @subentities[('entity_1',...,'entity_n')] :"),p.Vb(),p.Wb(76,"p",14),p.Qc(77),p.ic(78,"translate"),p.Vb(),p.Wb(79,"h4",13),p.Qc(80,"@parent_entity['entity_id'] :"),p.Vb(),p.Wb(81,"p",14),p.Qc(82),p.ic(83,"translate"),p.Vb(),p.Wb(84,"h4",13),p.Qc(85,"@sisters_entities['entity_id'] : "),p.Vb(),p.Wb(86,"p",14),p.Qc(87),p.ic(88,"translate"),p.Vb(),p.Wb(89,"h4",13),p.Qc(90,"@entity_type['type'] :"),p.Vb(),p.Wb(91,"p",14),p.Qc(92),p.ic(93,"translate"),p.Vb(),p.Wb(94,"h4",13),p.Qc(95,"@all_entities :"),p.Vb(),p.Wb(96,"p",14),p.Qc(97),p.ic(98,"translate"),p.Vb(),p.Wb(99,"h4",13),p.Qc(100," @immediate_children['entity_1',..., 'entity_id'] :"),p.Vb(),p.Wb(101,"p",14),p.Qc(102),p.ic(103,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Rb(104,"span",15),p.Wb(105,"mat-dialog-actions"),p.Wb(106,"button",16),p.dc("click",(function(){return e.saveSettings()})),p.Qc(107),p.ic(108,"translate"),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(2),p.Sc("",p.jc(3,28,"lang.actionParameters")," "),p.Db(3),p.Rc(e.data.action.label_action),p.Db(6),p.oc("ngModel",e.data.action.used_in_action_page),p.Db(1),p.Sc(" ",p.jc(13,30,"lang.usedInActionPage"),""),p.Db(3),p.oc("ngModel",e.data.action.used_in_basketlist),p.Db(1),p.Sc(" ",p.jc(17,32,"lang.usedInBasketlist"),""),p.Db(3),p.oc("ngIf","redirect"==e.data.action.keyword),p.Db(1),p.pc("label",p.jc(21,34,"lang.otherParameters")),p.Db(3),p.pc("title",p.jc(24,36,"lang.whereClauseAction")),p.pc("placeholder",p.jc(25,38,"lang.whereClauseAction")),p.oc("ngModel",e.data.action.where_clause),p.Db(7),p.Sc(" ",p.jc(31,40,"lang.keywordHelp")," "),p.Db(4),p.Rc(p.jc(35,42,"lang.keywordHelpDesc_11")),p.Db(8),p.Rc(p.jc(43,44,"lang.keywordHelpDesc_1")),p.Db(5),p.Rc(p.jc(48,46,"lang.keywordHelpDesc_12")),p.Db(5),p.Rc(p.jc(53,48,"lang.keywordHelpDesc_2")),p.Db(5),p.Rc(p.jc(58,50,"lang.keywordHelpDesc_3")),p.Db(5),p.Rc(p.jc(63,52,"lang.keywordHelpDesc_13")),p.Db(5),p.Rc(p.jc(68,54,"lang.keywordHelpDesc_4")),p.Db(5),p.Rc(p.jc(73,56,"lang.keywordHelpDesc_14")),p.Db(5),p.Rc(p.jc(78,58,"lang.keywordHelpDesc_5")),p.Db(5),p.Rc(p.jc(83,60,"lang.keywordHelpDesc_6")),p.Db(5),p.Rc(p.jc(88,62,"lang.keywordHelpDesc_7")),p.Db(5),p.Rc(p.jc(93,64,"lang.keywordHelpDesc_8")),p.Db(5),p.Rc(p.jc(98,66,"lang.keywordHelpDesc_9")),p.Db(5),p.Rc(p.jc(103,68,"lang.keywordHelpDesc_10")),p.Db(4),p.oc("disabled",!e.data.action.used_in_basketlist&&!e.data.action.used_in_action_page),p.Db(1),p.Rc(p.jc(108,70,"lang.validate")))},directives:[z.i,z.f,c.K,c.v,c.w,Pe.a,c.u,c.x,ke.c,O.t,ke.a,S.c,w.b,w.d,c.d,Re.a,Re.c,Re.g,Re.h,wt.a,k.l,z.c,R.b,ke.d],pipes:[h.d],styles:[".mat-dialog-content[_ngcontent-%COMP%]{height: 65vh;}"]}),t})(),Go=(()=>{class t{constructor(t,e,i,a){this.http=t,this.notify=e,this.data=i,this.dialogRef=a,this.actionAll=[],this.newBasketGroup={}}ngOnInit(){this.http.get("../rest/actions").subscribe(t=>{t.actions.forEach(t=>{t.where_clause="",t.used_in_basketlist=!1,t.default_action_list=!1,t.used_in_action_page=!0,t.statuses=[],t.redirects=[],t.checked=!1,this.actionAll.push(t)})},t=>{this.notify.handleErrors(t)}),this.data.groups.forEach(t=>{this.data.linkedGroups.forEach(e=>{if(t.group_id===e.group_id){const e=this.data.groups.indexOf(t);this.data.groups.splice(e,1)}})})}validateForm(t){0===this.data.linkedGroups.length?(this.actionAll[0].used_in_action_page=!0,this.actionAll[0].default_action_list=!0,this.actionAll[0].used_in_basketlist=!0,this.actionAll[0].checked=!0,this.newBasketGroup.groupActions=this.actionAll):this.newBasketGroup=JSON.parse(JSON.stringify(this.data.linkedGroups[this.data.linkedGroups.length-1])),this.newBasketGroup.basket_id=this.data.basketId,this.newBasketGroup.group_id=t.group_id,this.newBasketGroup.group_desc=t.group_desc,this.dialogRef.close(this.newBasketGroup)}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(u.b),p.Qb(y.a),p.Qb(z.a),p.Qb(z.h))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],decls:7,vars:4,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title","","color","primary"],[4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[3,"click"]],template:function(t,e){1&t&&(p.Wb(0,"div",0),p.Wb(1,"h2",1),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"mat-dialog-content"),p.Wb(5,"mat-nav-list"),p.Oc(6,Ho,2,1,"span",2),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(2),p.Rc(p.jc(3,2,"lang.linkGroup")),p.Db(4),p.oc("ngForOf",e.data.groups))},directives:[z.i,z.f,wt.h,O.s,O.t,wt.d],pipes:[h.d],styles:[".mat-dialog-content[_ngcontent-%COMP%]{height: 65vh;}"]}),t})();const qo=["snav2"],Ko=["adminMenuTemplate"];function Jo(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-nav-list"),p.Wb(1,"h3",14),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"a",15),p.dc("click",(function(){return p.Dc(t),p.hc().prepareDoctypeAdd("firstLevel")})),p.Wb(5,"mat-icon",16),p.Rb(6,"i",17),p.Rb(7,"i",18),p.Vb(),p.Wb(8,"p",19),p.Qc(9),p.ic(10,"translate"),p.Vb(),p.Vb(),p.Wb(11,"a",15),p.dc("click",(function(){return p.Dc(t),p.hc().prepareDoctypeAdd("secondLevel")})),p.Wb(12,"mat-icon",16),p.Rb(13,"i",17),p.Rb(14,"i",18),p.Vb(),p.Wb(15,"p",19),p.Qc(16),p.ic(17,"translate"),p.Vb(),p.Vb(),p.Wb(18,"a",15),p.dc("click",(function(){return p.Dc(t),p.hc().prepareDoctypeAdd("doctype")})),p.Wb(19,"mat-icon",16),p.Rb(20,"i",20),p.Rb(21,"i",18),p.Vb(),p.Wb(22,"p",19),p.Qc(23),p.ic(24,"translate"),p.Vb(),p.Vb(),p.Vb()}2&t&&(p.Db(2),p.Rc(p.jc(3,4,"lang.actions")),p.Db(7),p.Sc(" ",p.jc(10,6,"lang.addFirstLevel")," "),p.Db(7),p.Sc(" ",p.jc(17,8,"lang.addSecondLevel")," "),p.Db(7),p.Sc(" ",p.jc(24,10,"lang.addDoctype")," "))}function Yo(t,e){1&t&&(p.Wb(0,"div",21),p.Rb(1,"mat-spinner",22),p.Vb())}function Zo(t,e){if(1&t&&(p.Wb(0,"mat-card",23),p.Wb(1,"mat-form-field"),p.Rb(2,"input",24),p.ic(3,"translate"),p.Vb(),p.Rb(4,"div",25),p.Wb(5,"div",26),p.Qc(6),p.ic(7,"translate"),p.Vb(),p.Vb()),2&t){const t=p.hc();p.Db(2),p.pc("placeholder",p.jc(3,3,"lang.search")),p.Db(4),p.Tc(" ",t.doctypes.length," ",p.jc(7,5,"lang.documentTypesAlt"),"")}}function ts(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",31),p.Wb(1,"div",32),p.Wb(2,"mat-form-field"),p.Wb(3,"input",38),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).currentFirstLevel.doctypes_first_level_id=e})),p.ic(4,"translate"),p.ic(5,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.Db(3),p.pc("title",p.jc(4,4,"lang.id")),p.pc("placeholder",p.jc(5,6,"lang.id")),p.oc("ngModel",t.currentFirstLevel.doctypes_first_level_id)("disabled",!t.creationMode)}}function es(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",39),p.dc("click",(function(){return p.Dc(t),p.hc(2).removeFirstLevel()})),p.Qc(1),p.ic(2,"translate"),p.Vb()}if(2&t){p.hc();const t=p.zc(3),e=p.hc();p.oc("disabled",!t.form.valid||e.currentFirstLevel.hasChildren),p.Db(1),p.Rc(p.jc(2,2,"lang.delete"))}}function is(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",40),p.dc("click",(function(){return p.Dc(t),p.hc(2).readMode()})),p.Qc(1),p.ic(2,"translate"),p.Vb()}2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.cancel")))}function as(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-tab",27),p.ic(1,"translate"),p.Wb(2,"form",28,29),p.Oc(4,ts,6,8,"div",30),p.Wb(5,"div",31),p.Wb(6,"div",32),p.Wb(7,"mat-form-field"),p.Wb(8,"input",33),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().currentFirstLevel.doctypes_first_level_label=e})),p.ic(9,"translate"),p.ic(10,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(11,"div",31),p.Wb(12,"div",34),p.Wb(13,"button",35),p.dc("click",(function(){return p.Dc(t),p.hc().saveFirstLevel()})),p.Qc(14),p.ic(15,"translate"),p.Vb(),p.Oc(16,es,3,4,"button",36),p.Oc(17,is,3,3,"button",37),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.zc(3),e=p.hc();p.pc("label",p.jc(1,9,"lang.firstLevelDoctype")),p.Db(4),p.oc("ngIf",!e.creationMode),p.Db(4),p.pc("title",p.jc(9,11,"lang.label")),p.pc("placeholder",p.jc(10,13,"lang.label")),p.oc("ngModel",e.currentFirstLevel.doctypes_first_level_label),p.Db(5),p.oc("disabled",!t.form.valid),p.Db(1),p.Rc(p.jc(15,15,"lang.save")),p.Db(2),p.oc("ngIf",!e.creationMode),p.Db(1),p.oc("ngIf",e.creationMode)}}function ns(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",31),p.Wb(1,"div",32),p.Wb(2,"mat-form-field"),p.Wb(3,"input",47),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).currentSecondLevel.doctypes_second_level_id=e})),p.ic(4,"translate"),p.ic(5,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.Db(3),p.pc("title",p.jc(4,4,"lang.id")),p.pc("placeholder",p.jc(5,6,"lang.id")),p.oc("ngModel",t.currentSecondLevel.doctypes_second_level_id)("disabled",!t.creationMode)}}function os(t,e){if(1&t&&(p.Wb(0,"mat-option",48),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t.doctypes_first_level_id),p.Db(1),p.Sc(" ",t.doctypes_first_level_label," ")}}function ss(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",49),p.dc("click",(function(){return p.Dc(t),p.hc(2).removeSecondLevel()})),p.Qc(1),p.ic(2,"translate"),p.Vb()}if(2&t){p.hc();const t=p.zc(3),e=p.hc();p.oc("disabled",!t.form.valid||e.currentSecondLevel.hasChildren),p.Db(1),p.Rc(p.jc(2,2,"lang.delete"))}}function cs(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",50),p.dc("click",(function(){return p.Dc(t),p.hc(2).readMode()})),p.Qc(1),p.ic(2,"translate"),p.Vb()}2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.cancel")))}function rs(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-tab",27),p.ic(1,"translate"),p.Wb(2,"form",28,41),p.Oc(4,ns,6,8,"div",30),p.Wb(5,"div",31),p.Wb(6,"div",32),p.Wb(7,"mat-form-field"),p.Wb(8,"input",42),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().currentSecondLevel.doctypes_second_level_label=e})),p.ic(9,"translate"),p.ic(10,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(11,"div",31),p.Wb(12,"div",32),p.Wb(13,"mat-form-field"),p.Wb(14,"mat-select",43),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().currentSecondLevel.doctypes_first_level_id=e})),p.ic(15,"translate"),p.ic(16,"translate"),p.Oc(17,os,2,2,"mat-option",44),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(18,"div",31),p.Wb(19,"div",34),p.Wb(20,"button",35),p.dc("click",(function(){return p.Dc(t),p.hc().saveSecondLevel()})),p.Qc(21),p.ic(22,"translate"),p.Vb(),p.Oc(23,ss,3,4,"button",45),p.Oc(24,cs,3,3,"button",46),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.zc(3),e=p.hc();p.pc("label",p.jc(1,13,"lang.secondLevelDoctype")),p.Db(4),p.oc("ngIf",!e.creationMode),p.Db(4),p.pc("title",p.jc(9,15,"lang.label")),p.pc("placeholder",p.jc(10,17,"lang.label")),p.oc("ngModel",e.currentSecondLevel.doctypes_second_level_label),p.Db(6),p.pc("title",p.jc(15,19,"lang.firstLevelAttached")),p.pc("placeholder",p.jc(16,21,"lang.firstLevelAttached")),p.oc("ngModel",e.currentSecondLevel.doctypes_first_level_id),p.Db(3),p.oc("ngForOf",e.firstLevels),p.Db(3),p.oc("disabled",!t.form.valid),p.Db(1),p.Rc(p.jc(22,23,"lang.save")),p.Db(2),p.oc("ngIf",!e.creationMode),p.Db(1),p.oc("ngIf",e.creationMode)}}function ls(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",31),p.Wb(1,"div",32),p.Wb(2,"mat-form-field"),p.Wb(3,"input",66),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).currentType.type_id=e})),p.ic(4,"translate"),p.ic(5,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.Db(3),p.pc("title",p.jc(4,4,"lang.id")),p.pc("placeholder",p.jc(5,6,"lang.id")),p.oc("ngModel",t.currentType.type_id)("disabled",!t.creationMode)}}function ds(t,e){if(1&t&&(p.Wb(0,"mat-option",48),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t.doctypes_second_level_id),p.Db(1),p.Sc(" ",t.doctypes_second_level_label," ")}}function bs(t,e){if(1&t&&(p.Wb(0,"mat-option",48),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t),p.Db(1),p.Sc(" ",t," ")}}function ps(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",67),p.dc("click",(function(){return p.Dc(t),p.hc(2).removeType()})),p.ic(1,"translate"),p.Qc(2),p.ic(3,"translate"),p.Vb()}if(2&t){p.hc();const t=p.zc(3);p.pc("matTooltip",p.jc(1,3,"lang.toolTipDeleteDoctype")),p.oc("disabled",!t.form.valid),p.Db(2),p.Rc(p.jc(3,5,"lang.delete"))}}function hs(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",50),p.dc("click",(function(){return p.Dc(t),p.hc(2).readMode()})),p.Qc(1),p.ic(2,"translate"),p.Vb()}2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.cancel")))}function us(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-tab",27),p.ic(1,"translate"),p.Wb(2,"form",28,51),p.Oc(4,ls,6,8,"div",30),p.Wb(5,"div",31),p.Wb(6,"div",32),p.Wb(7,"mat-form-field"),p.Wb(8,"input",52),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().currentType.description=e})),p.ic(9,"translate"),p.ic(10,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(11,"div",31),p.Wb(12,"div",32),p.Wb(13,"mat-form-field"),p.Wb(14,"mat-select",53),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().currentType.doctypes_second_level_id=e})),p.ic(15,"translate"),p.ic(16,"translate"),p.Oc(17,ds,2,2,"mat-option",44),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(18,"div",31),p.Wb(19,"div",32),p.Wb(20,"mat-form-field"),p.Wb(21,"input",54),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().currentType.process_delay=e})),p.ic(22,"translate"),p.ic(23,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(24,"div",31),p.Wb(25,"div",32),p.Wb(26,"mat-form-field"),p.Wb(27,"input",55),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().currentType.delay1=e})),p.ic(28,"translate"),p.ic(29,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(30,"div",31),p.Wb(31,"div",32),p.Wb(32,"mat-form-field"),p.Wb(33,"input",56),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().currentType.delay2=e})),p.ic(34,"translate"),p.ic(35,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(36,"div",31),p.Wb(37,"div",32),p.Wb(38,"mat-form-field"),p.Wb(39,"mat-select",57),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().currentType.process_mode=e})),p.ic(40,"translate"),p.ic(41,"translate"),p.Oc(42,bs,2,2,"mat-option",44),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(43,"mat-accordion"),p.Wb(44,"mat-expansion-panel"),p.Wb(45,"mat-expansion-panel-header"),p.Wb(46,"mat-panel-title"),p.Qc(47),p.ic(48,"translate"),p.Vb(),p.Vb(),p.Wb(49,"div",31),p.Wb(50,"div",32),p.Wb(51,"mat-form-field"),p.Wb(52,"mat-select",58),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().currentType.retention_final_disposition=e})),p.ic(53,"translate"),p.ic(54,"translate"),p.Rb(55,"mat-option",59),p.Wb(56,"mat-option",60),p.Qc(57),p.ic(58,"translate"),p.Vb(),p.Wb(59,"mat-option",61),p.Qc(60),p.ic(61,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(62,"div",31),p.Wb(63,"div",62),p.Wb(64,"mat-form-field"),p.Wb(65,"input",63),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().currentType.retention_rule=e})),p.ic(66,"translate"),p.ic(67,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(68,"div",62),p.Wb(69,"mat-form-field"),p.Wb(70,"input",64),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().currentType.duration_current_use=e})),p.ic(71,"translate"),p.ic(72,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(73,"div",31),p.Wb(74,"div",34),p.Wb(75,"button",35),p.dc("click",(function(){return p.Dc(t),p.hc().saveType()})),p.Qc(76),p.ic(77,"translate"),p.Vb(),p.Oc(78,ps,4,7,"button",65),p.Oc(79,hs,3,3,"button",46),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.zc(3),e=p.hc();p.pc("label",p.jc(1,38,"lang.doctype")),p.Db(4),p.oc("ngIf",!e.creationMode),p.Db(4),p.pc("title",p.jc(9,40,"lang.label")),p.pc("placeholder",p.jc(10,42,"lang.label")),p.oc("ngModel",e.currentType.description),p.Db(6),p.pc("title",p.jc(15,44,"lang.secondLevelAttached")),p.pc("placeholder",p.jc(16,46,"lang.secondLevelAttached")),p.oc("ngModel",e.currentType.doctypes_second_level_id),p.Db(3),p.oc("ngForOf",e.secondLevels),p.Db(4),p.pc("title",p.jc(22,48,"lang.processDelayDay")),p.pc("placeholder",p.jc(23,50,"lang.processDelayDay")),p.oc("ngModel",e.currentType.process_delay),p.Db(6),p.pc("title",p.jc(28,52,"lang.delay1")),p.pc("placeholder",p.jc(29,54,"lang.delay1")),p.oc("ngModel",e.currentType.delay1),p.Db(6),p.pc("title",p.jc(34,56,"lang.delay2")),p.pc("placeholder",p.jc(35,58,"lang.delay2")),p.oc("ngModel",e.currentType.delay2),p.Db(6),p.pc("title",p.jc(40,60,"lang.processMode")),p.pc("placeholder",p.jc(41,62,"lang.processMode")),p.oc("ngModel",e.currentType.process_mode),p.Db(3),p.oc("ngForOf",e.processModes),p.Db(5),p.Sc(" ",p.jc(48,64,"lang.archival")," "),p.Db(5),p.pc("title",p.jc(53,66,"lang.retentionFinalDisposition")),p.pc("placeholder",p.jc(54,68,"lang.retentionFinalDisposition")),p.oc("ngModel",e.currentType.retention_final_disposition),p.Db(5),p.Rc(p.jc(58,70,"lang.destruction")),p.Db(3),p.Rc(p.jc(61,72,"lang.conservation")),p.Db(5),p.pc("title",p.jc(66,74,"lang.retentionRule")),p.pc("placeholder",p.jc(67,76,"lang.retentionRule")),p.oc("ngModel",e.currentType.retention_rule),p.Db(5),p.pc("title",p.jc(71,78,"lang.durationCurrentUse")),p.pc("placeholder",p.jc(72,80,"lang.durationCurrentUse")),p.oc("ngModel",e.currentType.duration_current_use),p.Db(5),p.oc("disabled",!t.form.valid),p.Db(1),p.Rc(p.jc(77,82,"lang.save")),p.Db(2),p.oc("ngIf",!e.creationMode),p.Db(1),p.oc("ngIf",e.creationMode)}}function ms(t,e){if(1&t&&(p.Wb(0,"mat-option",9),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("disabled",t.disabled)("value",t.type_id),p.Db(1),p.Sc(" ",t.description," ")}}let fs=(()=>{class t{constructor(t,e,i,a,n,o,s){this.translate=t,this.http=e,this.notify=i,this.dialog=a,this.headerService=n,this.appService=o,this.viewContainerRef=s,this.config={},this.doctypes=[],this.currentType=!1,this.currentSecondLevel=!1,this.currentFirstLevel=!1,this.firstLevels=!1,this.types=!1,this.secondLevels=!1,this.processModes=!1,this.loading=!1,this.creationMode=!1,this.newSecondLevel=!1,this.newFirstLevel=!1,this.displayedColumns=["label","use","mandatory","column"]}ngOnInit(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.documentTypes")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/doctypes").subscribe(t=>{this.doctypes=t.structure,setTimeout(()=>{$("#jstree").jstree({checkbox:{three_state:!1},core:{force_text:!0,themes:{name:"proton",responsive:!0},multiple:!1,data:this.doctypes,check_callback:function(t,e,i,a,n){if("move_node"===t)return void 0===n.ref||(!isNaN(parseFloat(e.id))&&isFinite(e.id)&&0===n.ref.id.indexOf("secondlevel_")||0===e.id.indexOf("secondlevel_")&&0===n.ref.id.indexOf("firstlevel_"))&&!(n.ref.children.indexOf(e.id)>-1)}},dnd:{is_draggable:function(t){return this.secondLevelSelected=t[0].id.replace("secondlevel_",""),!!(!isNaN(parseFloat(this.secondLevelSelected))&&isFinite(this.secondLevelSelected)||!isNaN(parseFloat(t[0].id))&&isFinite(t[0].id))}},plugins:["search","dnd","contextmenu"]});let t=!1;$("#jstree_search").keyup((function(){t&&clearTimeout(t),t=setTimeout((function(){const t=$("#jstree_search").val();$("#jstree").jstree(!0).search(t)}),250)})),$("#jstree").on("select_node.jstree",(t,e)=>{!1===this.sidenavRight.opened&&this.sidenavRight.open(),this.loadDoctype(e,!1)}).on("move_node.jstree",(t,e)=>{this.loadDoctype(e,!0)}).jstree()},0),$("#jstree").jstree("select_node",this.doctypes[0]),this.loading=!1},t=>{this.notify.handleErrors(t)})}loadDoctype(t,e){this.creationMode=!1,t.node.original.type_id?(this.currentFirstLevel=!1,this.currentSecondLevel=!1,this.http.get("../rest/doctypes/types/"+t.node.original.type_id).subscribe(i=>{this.currentType=i.doctype,this.secondLevels=i.secondLevel,this.processModes=["NORMAL","SVA","SVR"],e&&(this.currentType?(this.newSecondLevel=t.parent.replace("secondlevel_",""),!isNaN(parseFloat(this.newSecondLevel))&&isFinite(this.newSecondLevel)?this.currentType.doctypes_second_level_id!==this.newSecondLevel&&(this.currentType.doctypes_second_level_id=this.newSecondLevel,this.saveType()):alert(this.translate.instant("lang.cantMoveDoctype"))):alert(this.translate.instant("lang.noDoctypeSelected")))},t=>{this.notify.error(t.error.errors)})):t.node.original.doctypes_second_level_id?(this.currentFirstLevel=!1,this.currentType=!1,this.http.get("../rest/doctypes/secondLevel/"+t.node.original.doctypes_second_level_id).subscribe(i=>{this.currentSecondLevel=i.secondLevel,this.firstLevels=i.firstLevel,e&&(this.currentSecondLevel?(this.newFirstLevel=t.parent.replace("firstlevel_",""),!isNaN(parseFloat(this.newFirstLevel))&&isFinite(this.newFirstLevel)?this.currentSecondLevel.doctypes_first_level_id!==this.newFirstLevel&&(this.currentSecondLevel.doctypes_first_level_id=this.newFirstLevel,this.saveSecondLevel()):alert(this.translate.instant("lang.cantMoveFirstLevel"))):alert(this.translate.instant("lang.noFirstLevelSelected")))},t=>{this.notify.error(t.error.errors)})):(this.currentSecondLevel=!1,this.currentType=!1,this.http.get("../rest/doctypes/firstLevel/"+t.node.original.doctypes_first_level_id).subscribe(t=>{this.currentFirstLevel=t.firstLevel},t=>{this.notify.error(t.error.errors)}))}resetDatas(){this.currentFirstLevel=!1,this.currentSecondLevel=!1,this.currentType=!1}refreshTree(){$("#jstree").jstree(!0).settings.core.data=this.doctypes,$("#jstree").jstree("refresh")}saveFirstLevel(){this.creationMode?this.http.post("../rest/doctypes/firstLevel",this.currentFirstLevel).subscribe(t=>{this.resetDatas(),this.readMode(),this.doctypes=t.doctypeTree,this.refreshTree(),this.notify.success(this.translate.instant("lang.firstLevelAdded"))},t=>{this.notify.error(t.error.errors)}):this.http.put("../rest/doctypes/firstLevel/"+this.currentFirstLevel.doctypes_first_level_id,this.currentFirstLevel).subscribe(t=>{this.doctypes=t.doctypeTree,this.refreshTree(),this.notify.success(this.translate.instant("lang.firstLevelUpdated"))},t=>{this.notify.error(t.error.errors)})}saveSecondLevel(){this.creationMode?this.http.post("../rest/doctypes/secondLevel",this.currentSecondLevel).subscribe(t=>{this.resetDatas(),this.readMode(),this.doctypes=t.doctypeTree,this.refreshTree(),this.notify.success(this.translate.instant("lang.secondLevelAdded"))},t=>{this.notify.error(t.error.errors)}):this.http.put("../rest/doctypes/secondLevel/"+this.currentSecondLevel.doctypes_second_level_id,this.currentSecondLevel).subscribe(t=>{this.doctypes=t.doctypeTree,this.refreshTree(),this.notify.success(this.translate.instant("lang.secondLevelUpdated"))},t=>{this.notify.error(t.error.errors)})}saveType(){this.creationMode?this.http.post("../rest/doctypes/types",this.currentType).subscribe(t=>{this.resetDatas(),this.readMode(),this.doctypes=t.doctypeTree,this.refreshTree(),this.notify.success(this.translate.instant("lang.documentTypeAdded"))},t=>{this.notify.error(t.error.errors)}):this.http.put("../rest/doctypes/types/"+this.currentType.type_id,this.currentType).subscribe(t=>{this.doctypes=t.doctypeTree,this.refreshTree(),this.notify.success(this.translate.instant("lang.documentTypeUpdated"))},t=>{this.notify.error(t.error.errors)})}readMode(){this.creationMode=!1,$("#jstree").jstree("deselect_all"),$("#jstree").jstree("select_node",this.doctypes[0])}removeFirstLevel(){confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+this.currentFirstLevel.doctypes_first_level_label+" \xbb")&&this.http.delete("../rest/doctypes/firstLevel/"+this.currentFirstLevel.doctypes_first_level_id).subscribe(t=>{this.resetDatas(),this.readMode(),this.doctypes=t.doctypeTree,this.refreshTree(),this.doctypes[0]?$("#jstree").jstree("select_node",this.doctypes[0]):!0===this.sidenavRight.opened&&this.sidenavRight.close(),this.notify.success(this.translate.instant("lang.firstLevelDeleted"))},t=>{this.notify.error(t.error.errors)})}removeSecondLevel(){confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+this.currentSecondLevel.doctypes_second_level_label+" \xbb")&&this.http.delete("../rest/doctypes/secondLevel/"+this.currentSecondLevel.doctypes_second_level_id).subscribe(t=>{this.resetDatas(),this.readMode(),this.doctypes=t.doctypeTree,this.refreshTree(),$("#jstree").jstree("select_node",this.doctypes[0]),this.notify.success(this.translate.instant("lang.secondLevelDeleted"))},t=>{this.notify.error(t.error.errors)})}removeType(){confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+this.currentType.description+" \xbb")&&this.http.delete("../rest/doctypes/types/"+this.currentType.type_id).subscribe(t=>{0===t.deleted?(this.resetDatas(),this.readMode(),this.doctypes=t.doctypeTree,this.refreshTree(),$("#jstree").jstree("select_node",this.doctypes[0]),this.notify.success(this.translate.instant("lang.documentTypeDeleted"))):(this.config={panelClass:"maarch-modal",data:{count:t.deleted,types:t.doctypes}},this.dialogRef=this.dialog.open(gs,this.config),this.dialogRef.afterClosed().subscribe(t=>{t&&this.http.put("../rest/doctypes/types/"+this.currentType.type_id+"/redirect",t).subscribe(t=>{this.resetDatas(),this.readMode(),this.doctypes=t.doctypeTree,this.refreshTree(),$("#jstree").jstree("select_node",this.doctypes[0]),this.notify.success(this.translate.instant("lang.documentTypeDeleted"))},t=>{this.notify.error(t.error.errors)}),this.dialogRef=null}))},t=>{this.notify.error(t.error.errors)})}prepareDoctypeAdd(t){this.currentFirstLevel=!1,this.currentSecondLevel=!1,this.currentType=!1,"firstLevel"===t&&(this.currentFirstLevel={}),"secondLevel"===t&&(this.currentSecondLevel={}),"doctype"===t&&(this.currentType={}),!1===this.sidenavRight.opened&&this.sidenavRight.open(),$("#jstree").jstree("deselect_all"),this.http.get("../rest/administration/doctypes/new").subscribe(t=>{this.firstLevels=t.firstLevel,this.secondLevels=t.secondLevel,this.processModes=["NORMAL","SVA","SVR"]},t=>{this.notify.error(t.error.errors)}),this.creationMode=t}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(z.b),p.Qb(m.a),p.Qb(f.a),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(qo,!0),p.Kc(Ko,!0),p.Xc(N.a,!0),p.Xc(H.a,!0)),2&t&&(p.yc(i=p.ec())&&(e.sidenavRight=i.first),p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.paginator=i.first),p.yc(i=p.ec())&&(e.sort=i.first))},decls:22,vars:14,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",1,"col-md-4","col-sm-12",3,"mode","fixedInViewport","opened"],["snav2",""],[3,"label",4,"ngIf"],["mat-subheader",""],["mat-list-item","",3,"click"],["color","primary","mat-list-icon","",1,"fa-stack","fa-fw",2,"margin-left","-3px","font-size","18px"],[1,"fa","fa-folder"],[1,"fa","fa-plus",2,"position","absolute"],["mat-line",""],[1,"fa","fa-file"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],["matInput","","id","jstree_search","name","jstree_search","type","text",3,"placeholder"],["id","jstree"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],[3,"label"],[1,"form-horizontal",2,"overflow","hidden"],["firstLevelForm","ngForm"],["class","form-group",4,"ngIf"],[1,"form-group"],[1,"col-sm-12"],["matInput","","required","","name","doctypes_first_level_label","id","doctypes_first_level_label","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary",3,"disabled","click"],["type","button","mat-raised-button","","color","warn",3,"disabled","click",4,"ngIf"],["type","button","mat-raised-button","","color","default",3,"click",4,"ngIf"],["matInput","","required","","name","doctypes_first_level_id","id","doctypes_first_level_id","type","text","maxlength","255",3,"ngModel","title","placeholder","disabled","ngModelChange"],["type","button","mat-raised-button","","color","warn",3,"disabled","click"],["type","button","mat-raised-button","","color","default",3,"click"],["secondLevelForm","ngForm"],["matInput","","required","","name","doctypes_second_level_label","id","doctypes_second_level_label","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["id","doctypes_first_level_id","name","doctypes_first_level_id","required","",3,"title","placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","warn",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","default",3,"click",4,"ngIf"],["matInput","","required","","name","doctypes_second_level_id","id","doctypes_second_level_id","type","text","maxlength","255",3,"ngModel","title","placeholder","disabled","ngModelChange"],[3,"value"],["mat-raised-button","","color","warn",3,"disabled","click"],["mat-raised-button","","color","default",3,"click"],["typeForm","ngForm"],["matInput","","required","","name","description","id","description","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["id","doctypes_second_level_id","name","doctypes_second_level_id","required","",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","required","","name","process_delay","id","process_delay","type","number","pattern","^[0-9]*$",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","required","","name","delay1","id","delay1","type","number","pattern","^[0-9]*$",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","required","","name","delay2","id","delay2","type","number","maxlength","255","pattern","^[0-9]*$",3,"ngModel","title","placeholder","ngModelChange"],["id","process_mode","name","process_mode","required","",3,"title","placeholder","ngModel","ngModelChange"],["id","retention_final_disposition","name","retention_final_disposition",3,"title","placeholder","ngModel","ngModelChange"],["value",""],["value","destruction"],["value","conservation"],[1,"col-sm-6"],["matInput","","name","retention_rule","id","retention_rule","type","text","maxlength","15",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","duration_current_use","id","duration_current_use","type","text","pattern","^[0-9]*$",3,"ngModel","title","placeholder","ngModelChange"],["mat-raised-button","","color","warn",3,"disabled","matTooltip","click",4,"ngIf"],["matInput","","required","","name","type_id","id","type_id","type","text","maxlength","255",3,"ngModel","title","placeholder","disabled","ngModelChange"],["mat-raised-button","","color","warn",3,"disabled","matTooltip","click"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,Jo,25,12,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,Yo,2,0,"div",9),p.Oc(14,Zo,8,7,"mat-card",10),p.Vb(),p.Vb(),p.Vb(),p.Wb(15,"mat-sidenav",11,12),p.Wb(17,"mat-nav-list"),p.Wb(18,"mat-tab-group"),p.Oc(19,as,18,17,"mat-tab",13),p.Oc(20,rs,25,25,"mat-tab",13),p.Oc(21,us,80,84,"mat-tab",13),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading),p.Db(1),p.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!1),p.Db(4),p.oc("ngIf",e.currentFirstLevel||"firstLevel"==e.creationMode),p.Db(1),p.oc("ngIf",e.currentSecondLevel||"secondeLevel"==e.creationMode),p.Db(1),p.oc("ngIf",e.currentType||"doctype"==e.creationMode))},directives:[C.e,C.f,M.a,x.a,O.t,C.d,wt.h,ke.c,wt.g,wt.d,It.a,wt.c,k.l,I.c,j.a,S.c,w.b,ke.a,c.K,c.v,c.w,c.d,c.F,c.p,c.u,c.x,R.b,at.a,O.s,k.p,c.A,c.B,Re.a,Re.c,Re.g,Re.h,kt.b],pipes:[h.d],encapsulation:2}),t})(),gs=(()=>{class t{constructor(t,e,i){this.http=t,this.data=e,this.dialogRef=i}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(u.b),p.Qb(z.a),p.Qb(z.h))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],decls:25,vars:19,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["changeDoctypeForm","ngForm"],["role","alert",1,"alert-message","alert-message-info"],["color","primary","mat-list-icon","",1,"fa","fa-file","fa-2x"],["mat-line",""],["id","new_type_id","name","new_type_id","required","",3,"title","placeholder","ngModel","ngModelChange"],[3,"disabled","value",4,"ngFor","ngForOf"],["mat-raised-button","","color","warn","type","submit",3,"disabled","click"],[3,"disabled","value"]],template:function(t,e){if(1&t&&(p.Wb(0,"div",0),p.Wb(1,"h2",1),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"mat-dialog-content"),p.Wb(5,"form",null,2),p.Wb(7,"div",3),p.Wb(8,"mat-list"),p.Wb(9,"mat-list-item"),p.Rb(10,"mat-icon",4),p.Wb(11,"p",5),p.Wb(12,"b"),p.Qc(13),p.Vb(),p.Qc(14),p.ic(15,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(16,"mat-form-field"),p.Wb(17,"mat-select",6),p.dc("ngModelChange",(function(t){return e.data.new_type_id=t})),p.ic(18,"translate"),p.ic(19,"translate"),p.Oc(20,ms,2,3,"mat-option",7),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(21,"mat-dialog-actions"),p.Wb(22,"button",8),p.dc("click",(function(){return e.dialogRef.close(e.data)})),p.Qc(23),p.ic(24,"translate"),p.Vb(),p.Vb(),p.Vb()),2&t){const t=p.zc(6);p.Db(2),p.Rc(p.jc(3,9,"lang.documentTypeReplacement")),p.Db(11),p.Rc(e.data.count),p.Db(1),p.Sc(" ",p.jc(15,11,"lang.documents")," "),p.Db(3),p.pc("title",p.jc(18,13,"lang.transferToDoctype")),p.pc("placeholder",p.jc(19,15,"lang.transferToDoctype")),p.oc("ngModel",e.data.new_type_id),p.Db(3),p.oc("ngForOf",e.data.types),p.Db(2),p.oc("disabled",!t.form.valid),p.Db(1),p.Rc(p.jc(24,17,"lang.delete"))}},directives:[z.i,z.f,c.K,c.v,c.w,wt.a,wt.d,It.a,wt.c,k.l,S.c,at.a,c.F,c.u,c.x,O.s,z.c,R.b,k.p],pipes:[h.d],encapsulation:2}),t})();const vs=["adminMenuTemplate"];function ys(t,e){1&t&&(p.Wb(0,"mat-nav-list"),p.Wb(1,"h3",11),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"a",12),p.Rb(5,"mat-icon",13),p.Wb(6,"p",14),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(2),p.Rc(p.jc(3,2,"lang.actions")),p.Db(5),p.Sc(" ",p.jc(8,4,"lang.add")," "))}function Ds(t,e){1&t&&(p.Wb(0,"div",15),p.Rb(1,"mat-spinner",16),p.Vb())}function Vs(t,e){1&t&&(p.Wb(0,"mat-header-cell",38),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.label")))}function Cs(t,e){if(1&t&&(p.Wb(0,"mat-cell",39),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.title," ")}}function Ms(t,e){if(1&t&&(p.Wb(0,"mat-header-cell",38),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=p.hc(2);p.Ib("hide-for-mobile",t.appService.getViewMode()),p.Db(1),p.Rc(p.jc(2,3,"lang.description"))}}function Ws(t,e){if(1&t&&(p.Wb(0,"mat-cell",39),p.Qc(1),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.Ib("hide-for-mobile",i.appService.getViewMode()),p.Db(1),p.Sc(" ",t.description," ")}}function xs(t,e){1&t&&(p.Wb(0,"mat-header-cell",38),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.type")))}function Os(t,e){if(1&t&&(p.Wb(0,"mat-cell",39),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.typeLabel," ")}}function _s(t,e){1&t&&p.Rb(0,"mat-header-cell",40)}function Ss(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-cell",41),p.Wb(1,"button",42),p.dc("click",(function(i){p.Dc(t);const a=e.$implicit,n=p.hc(2);return i.stopPropagation(),n.delete(a)})),p.ic(2,"translate"),p.Rb(3,"mat-icon",43),p.Vb(),p.Vb()}2&t&&(p.Db(1),p.pc("matTooltip",p.jc(2,1,"lang.delete")))}function ws(t,e){1&t&&p.Rb(0,"mat-header-row")}function Is(t,e){1&t&&(p.Rb(0,"mat-row",44),p.ic(1,"translate")),2&t&&(p.qc("routerLink","/administration/diffusionModels/",e.$implicit.id,""),p.pc("matTooltip",p.jc(1,2,"lang.view")))}function js(t,e){if(1&t&&(p.Wb(0,"mat-card",17),p.Wb(1,"div",18),p.Wb(2,"div",19),p.Wb(3,"mat-form-field"),p.Rb(4,"input",20),p.ic(5,"translate"),p.Vb(),p.Vb(),p.Wb(6,"div",19),p.Rb(7,"mat-paginator",21,22),p.Vb(),p.Vb(),p.Wb(9,"mat-table",23,24),p.Ub(11,25),p.Oc(12,Vs,3,3,"mat-header-cell",26),p.Oc(13,Cs,2,1,"mat-cell",27),p.Tb(),p.Ub(14,28),p.Oc(15,Ms,3,5,"mat-header-cell",29),p.Oc(16,Ws,2,3,"mat-cell",30),p.Tb(),p.Ub(17,31),p.Oc(18,xs,3,3,"mat-header-cell",26),p.Oc(19,Os,2,1,"mat-cell",27),p.Tb(),p.Ub(20,32),p.Oc(21,_s,1,0,"mat-header-cell",33),p.Oc(22,Ss,4,3,"mat-cell",34),p.Tb(),p.Oc(23,ws,1,0,"mat-header-row",35),p.Oc(24,Is,2,4,"mat-row",36),p.Vb(),p.Wb(25,"div",37),p.Qc(26),p.ic(27,"translate"),p.Vb(),p.Vb()),2&t){const t=p.hc();p.Db(4),p.pc("placeholder",p.jc(5,10,"lang.filterBy")),p.oc("formControl",t.adminService.getFilterField()),p.Db(3),p.oc("length",100)("hidePageSize",!0)("pageSize",10),p.Db(2),p.oc("dataSource",t.adminService.getDataSource()),p.Db(14),p.oc("matHeaderRowDef",t.displayedColumns),p.Db(1),p.oc("matRowDefColumns",t.displayedColumns),p.Db(2),p.Tc("",t.listTemplates.length," ",p.jc(27,12,"lang.workflowModels"),"")}}let ks=(()=>{class t{constructor(t,e,i,a,n,o,s,c,r){this.translate=t,this.http=e,this.notify=i,this.dialog=a,this.headerService=n,this.appService=o,this.functions=s,this.adminService=c,this.viewContainerRef=r,this.loading=!1,this.listTemplates=[],this.listTemplatesForAssign=[],this.displayedColumns=["title","description","typeLabel","actions"],this.filterColumns=["title","description","typeLabel"]}ngOnInit(){return Object(gt.a)(this,void 0,void 0,(function*(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.workflowModels")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,yield this.getListemplates(),this.loadList(),this.loading=!1}))}getListemplates(){return new Promise((t,e)=>{this.http.get("../rest/listTemplates").pipe(Object(l.a)(t=>(t.listTemplates=t.listTemplates.filter(t=>null===t.entityId&&["visaCircuit","opinionCircuit"].indexOf(t.type)>-1).map(t=>Object.assign(Object.assign({},t),{typeLabel:this.translate.instant("lang."+t.type)})),t.listTemplates)),Object(xt.tap)(e=>{this.listTemplates=e,t(!0)}),Object(vt.a)(()=>this.loading=!1),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()})}loadList(){setTimeout(()=>{this.adminService.setDataSource("admin_listmodels",this.listTemplates,this.sort,this.paginator,this.filterColumns)},0)}delete(t){this.dialog.open(q.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete"),msg:this.translate.instant("lang.confirmAction")}}).afterClosed().pipe(Object(K.a)(t=>"ok"===t),Object(J.a)(()=>this.http.delete("../rest/listTemplates/"+t.id)),Object(xt.tap)(()=>{this.listTemplates=this.listTemplates.filter(e=>e.id!==t.id),this.notify.success(this.translate.instant("lang.diffusionModelDeleted")),this.loadList()}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(z.b),p.Qb(m.a),p.Qb(f.a),p.Qb(D.a),p.Qb(St),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(vs,!0),p.Xc(N.a,!0),p.Xc(H.a,!0)),2&t&&(p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.paginator=i.first),p.yc(i=p.ec())&&(e.sort=i.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/diffusionModels/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row",2,"margin","0px"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSortDisableClear","","matSort","",3,"dataSource"],["table",""],["matColumnDef","title"],["mat-sort-header","","style","flex:2;",4,"matHeaderCellDef"],["style","flex:2;",4,"matCellDef"],["matColumnDef","description"],["mat-sort-header","","style","flex:2;",3,"hide-for-mobile",4,"matHeaderCellDef"],["style","flex:2;",3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","typeLabel"],["matColumnDef","actions"],["style","flex:1;",4,"matHeaderCellDef"],["style","justify-content: flex-end;flex:1;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],[2,"flex","1"],[2,"justify-content","flex-end","flex","1"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,ys,9,6,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,Ds,2,0,"div",9),p.Oc(14,js,28,14,"mat-card",10),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading))},directives:[C.e,C.f,M.a,x.a,O.t,wt.h,wt.g,wt.d,o.f,It.a,wt.c,k.l,I.c,j.a,S.c,w.b,c.d,c.u,c.j,N.a,G.o,H.a,G.c,G.i,G.b,G.k,G.n,G.h,H.b,G.a,R.b,kt.b,G.j,G.m,o.d],pipes:[h.d],encapsulation:2}),t})();var Rs=i("jbvq"),Ts=i("XkWp");const Ps=["snav2"],Qs=["appVisaWorkflow"],Fs=["appAvisWorkflow"];function Ls(t,e){1&t&&(p.Wb(0,"div",15),p.Rb(1,"mat-spinner",16),p.Vb())}function Es(t,e){if(1&t&&(p.Wb(0,"mat-option",27),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t.id),p.Db(1),p.Sc(" ",t.label," ")}}function As(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",28),p.dc("click",(function(){return p.Dc(t),p.hc(2).cancelModification()})),p.Qc(1),p.ic(2,"translate"),p.Vb()}2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.cancel")))}function Us(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-card",17),p.Wb(1,"mat-tab-group"),p.Wb(2,"mat-tab",12),p.ic(3,"translate"),p.Wb(4,"form",18,19),p.dc("ngSubmit",(function(){return p.Dc(t),p.hc().onSubmit()})),p.Wb(6,"mat-form-field"),p.Wb(7,"mat-select",20),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().diffusionModel.type=e})),p.ic(8,"translate"),p.Oc(9,Es,2,2,"mat-option",21),p.Vb(),p.Vb(),p.Wb(10,"mat-form-field"),p.Wb(11,"input",22),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().diffusionModel.title=e})),p.ic(12,"translate"),p.ic(13,"translate"),p.Vb(),p.Vb(),p.Wb(14,"mat-form-field"),p.Wb(15,"textarea",23),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().diffusionModel.description=e})),p.ic(16,"translate"),p.ic(17,"translate"),p.Vb(),p.Vb(),p.Wb(18,"div",24),p.Wb(19,"button",25),p.Qc(20),p.ic(21,"translate"),p.Vb(),p.Oc(22,As,3,3,"button",26),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc();p.Db(2),p.pc("label",p.jc(3,14,"lang.informations")),p.Db(5),p.pc("placeholder",p.jc(8,16,"lang.diffusionType")),p.oc("ngModel",t.diffusionModel.type)("disabled",!t.creationMode),p.Db(2),p.oc("ngForOf",t.itemTypeList),p.Db(2),p.pc("title",p.jc(12,18,"lang.label")),p.pc("placeholder",p.jc(13,20,"lang.label")),p.oc("ngModel",t.diffusionModel.title),p.Db(4),p.pc("title",p.jc(16,22,"lang.description")),p.pc("placeholder",p.jc(17,24,"lang.description")),p.oc("ngModel",t.diffusionModel.description),p.Db(4),p.oc("disabled",!t.isValidForm()),p.Db(1),p.Rc(p.jc(21,26,"lang.save")),p.Db(2),p.oc("ngIf",!t.creationMode)}}function $s(t,e){1&t&&p.Rb(0,"app-visa-workflow",29,30),2&t&&p.oc("showListModels",!1)("showComment",!1)("adminMode",!0)}function zs(t,e){1&t&&p.Rb(0,"app-avis-workflow",31,32),2&t&&p.oc("showListModels",!1)("adminMode",!0)}let Ns=(()=>{class t{constructor(t,e,i,a,n,o,s){this.translate=t,this.http=e,this.route=i,this.router=a,this.notify=n,this.headerService=o,this.appService=s,this.loading=!0,this.diffusionModel={title:"",description:"",type:"opinionCircuit",items:[]},this.diffusionModelClone={},this.itemTypeList=[{id:"visaCircuit",label:this.translate.instant("lang.visaCircuit")},{id:"opinionCircuit",label:this.translate.instant("lang.opinionCircuit")}],this.listDiffModified=!1}ngOnInit(){this.loading=!0,this.route.params.subscribe(t=>Object(gt.a)(this,void 0,void 0,(function*(){void 0===t.id?(this.headerService.setHeader(this.translate.instant("lang.diffusionModelCreation")),this.creationMode=!0,this.loading=!1):(this.creationMode=!1,yield this.getTemplate(t.id),"visaCircuit"===this.diffusionModel.type?this.loadVisaCircuit():this.loadOpinionCircuit())})))}getTemplate(t){return new Promise((e,i)=>{this.http.get("../rest/listTemplates/"+t).pipe(Object(d.a)(i=>{this.diffusionModel=i.listTemplate,this.diffusionModel.id=t,e(!0)}),Object(vt.a)(()=>this.loading=!1),Object(b.a)(t=>(this.notify.handleErrors(t),Object(s.a)(!1)))).subscribe()})}loadVisaCircuit(){const t={id:this.diffusionModel.id,type:"entity"};setTimeout(()=>Object(gt.a)(this,void 0,void 0,(function*(){this.appVisaWorkflow.resetWorkflow(),yield this.appVisaWorkflow.addItemToWorkflow(t,!1),this.diffusionModel.items=this.appVisaWorkflow.getWorkflow(),this.diffusionModelClone=JSON.parse(JSON.stringify(this.diffusionModel))})),0)}loadOpinionCircuit(){const t={id:this.diffusionModel.id,type:"entity"};setTimeout(()=>Object(gt.a)(this,void 0,void 0,(function*(){this.appAvisWorkflow.resetWorkflow(),yield this.appAvisWorkflow.addItemToWorkflow(t),this.diffusionModel.items=this.appAvisWorkflow.getWorkflow(),this.diffusionModelClone=JSON.parse(JSON.stringify(this.diffusionModel))})),0)}onSubmit(){this.creationMode?this.createTemplate():this.updateTemplate()}createTemplate(){this.http.post("../rest/listTemplates?admin=true",this.formatCircuit()).pipe(Object(d.a)(()=>{this.router.navigate(["/administration/diffusionModels"]),this.notify.success(this.translate.instant("lang.diffusionModelAdded"))}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(s.a)(!1)))).subscribe()}updateTemplate(){this.http.put("../rest/listTemplates/"+this.diffusionModel.id,this.formatCircuit()).pipe(Object(d.a)(()=>{this.router.navigate(["/administration/diffusionModels"]),this.notify.success(this.translate.instant("lang.diffusionModelUpdated"))}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(s.a)(!1)))).subscribe()}formatCircuit(){return"visaCircuit"===this.diffusionModel.type?(this.diffusionModel.items=this.appVisaWorkflow.getWorkflow().map((t,e)=>({id:t.item_id,type:"user",mode:t.requested_signature?"sign":"visa",sequence:e})),this.diffusionModel):(this.diffusionModel.items=this.appAvisWorkflow.getWorkflow().map((t,e)=>({id:t.item_id,type:"user",mode:"avis",sequence:e})),this.diffusionModel)}checkPrivileges(t){var e=!0;return t.forEach(t=>{t.hasPrivilege||(e=!1)}),e}isValidForm(){return"visaCircuit"===this.diffusionModel.type?void 0!==this.appVisaWorkflow&&this.appVisaWorkflow.getWorkflow().length>0&&""!==this.diffusionModel.title&&this.checkPrivileges(this.appVisaWorkflow.getWorkflow()):void 0!==this.appAvisWorkflow&&this.appAvisWorkflow.getWorkflow().length>0&&""!==this.diffusionModel.title&&this.checkPrivileges(this.appAvisWorkflow.getWorkflow())}cancelModification(){this.diffusionModel=JSON.parse(JSON.stringify(this.diffusionModelClone)),"visaCircuit"===this.diffusionModel.type?this.loadVisaCircuit():this.loadOpinionCircuit()}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(o.a),p.Qb(o.c),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(Ps,!0),p.Xc(Qs,!0),p.Xc(Fs,!0)),2&t&&(p.yc(i=p.ec())&&(e.sidenavRight=i.first),p.yc(i=p.ec())&&(e.appVisaWorkflow=i.first),p.yc(i=p.ec())&&(e.appAvisWorkflow=i.first))},decls:21,vars:16,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",1,"col-md-4","col-xs-11",3,"mode","fixedInViewport","opened"],["snav2",""],[3,"label"],[3,"showListModels","showComment","adminMode",4,"ngIf"],[3,"showListModels","adminMode",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[3,"ngSubmit"],["diffusionModelForm","ngForm"],["id","type","name","type",3,"placeholder","ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","name","title","maxlength","255","required","",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","name","description","matTextareaAutosize","","matAutosizeMinRows","1","matAutosizeMaxRows","5","maxlength","255",3,"title","placeholder","ngModel","ngModelChange"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary",3,"disabled"],["mat-raised-button","","type","button","color","default",3,"click",4,"ngIf"],[3,"value"],["mat-raised-button","","type","button","color","default",3,"click"],[3,"showListModels","showComment","adminMode"],["appVisaWorkflow",""],[3,"showListModels","adminMode"],["appAvisWorkflow",""]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Wb(1,"mat-sidenav-content"),p.Wb(2,"div",1),p.Wb(3,"div",2),p.Wb(4,"div",3),p.Rb(5,"header-left"),p.Vb(),p.Wb(6,"div",4),p.Rb(7,"header-right"),p.Vb(),p.Vb(),p.Rb(8,"div",5),p.Vb(),p.Wb(9,"div",6),p.Wb(10,"div",7),p.Oc(11,Ls,2,0,"div",8),p.Oc(12,Us,23,28,"mat-card",9),p.Vb(),p.Vb(),p.Vb(),p.Wb(13,"mat-sidenav",10,11),p.Wb(15,"mat-nav-list"),p.Wb(16,"mat-tab-group"),p.Wb(17,"mat-tab",12),p.ic(18,"translate"),p.Oc(19,$s,2,3,"app-visa-workflow",13),p.Oc(20,zs,2,2,"app-avis-workflow",14),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(3),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading),p.Db(1),p.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!e.appService.getViewMode()),p.Db(4),p.pc("label",p.jc(18,14,"lang."+e.diffusionModel.type)),p.Db(2),p.oc("ngIf","visaCircuit"===e.diffusionModel.type),p.Db(1),p.oc("ngIf","opinionCircuit"===e.diffusionModel.type))},directives:[C.e,C.f,M.a,x.a,O.t,C.d,wt.h,ke.c,ke.a,I.c,j.a,c.K,c.v,c.w,S.c,at.a,c.u,c.x,O.s,w.b,c.d,c.p,c.F,w.d,R.b,k.p,Rs.a,Ts.a],pipes:[h.d],styles:[".mat-list-item[draggable=false][_ngcontent-%COMP%]:hover{background:inherit}.mat-list-item[draggable=false][_ngcontent-%COMP%]{cursor:not-allowed!important}.mat-list-item[draggable=true][_ngcontent-%COMP%]{cursor:pointer}.mat-list-item[draggable=true][_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:move}.primaryColor[_ngcontent-%COMP%]{color:#135f7f}.redColor[_ngcontent-%COMP%]{color:#e4342b}"]}),t})();const Hs=["listFilter"];function Bs(t,e){1&t&&(p.Wb(0,"div",13),p.Rb(1,"mat-spinner"),p.Vb())}function Xs(t,e){if(1&t&&(p.Wb(0,"mat-option",14),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t),p.Db(1),p.Sc(" ",t," ")}}function Gs(t,e){if(1&t&&(p.Wb(0,"mat-option",14),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t),p.Db(1),p.Sc(" ",t," ")}}function qs(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",15),p.Wb(1,"mat-form-field",5),p.Wb(2,"mat-label"),p.Qc(3),p.ic(4,"translate"),p.Vb(),p.Wb(5,"mat-select",16),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().exportModel.delimiter=e})),p.ic(6,"translate"),p.Oc(7,Gs,2,2,"mat-option",7),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc();p.Db(3),p.Rc(p.jc(4,5,"lang.delimiter")),p.Db(2),p.pc("placeholder",p.jc(6,7,"lang.delimiter")),p.oc("ngModel",t.exportModel.delimiter)("disabled","csv"!=t.exportModel.format),p.Db(2),p.oc("ngForOf",t.delimiters)}}let Ks=(()=>{class t{constructor(t,e,i,a,n,o){this.translate=t,this.http=e,this.notify=i,this.data=a,this.localStorage=n,this.headerService=o,this.loading=!1,this.loadingExport=!1,this.delimiters=[";",",","TAB"],this.formats=["csv"],this.exportModel={delimiter:";",format:"csv"}}ngOnInit(){return Object(gt.a)(this,void 0,void 0,(function*(){this.setConfiguration()}))}exportData(){this.localStorage.save("exportEntities_"+this.headerService.user.id,JSON.stringify(this.exportModel)),this.loadingExport=!0,this.http.put("../rest/entities/export",this.exportModel,{responseType:"blob"}).pipe(Object(d.a)(t=>{if("text/html"!==t.type){const e=document.createElement("a");let i,a,n,o;e.href=window.URL.createObjectURL(t),i=new Date,a=i.getDate(),n=i.getMonth()+1,o=i.getFullYear(),a<10&&(a="0"+a),n<10&&(n="0"+n),i=a+"-"+n+"-"+o,e.setAttribute("download","export_entities_maarch_"+i+"."+this.exportModel.format.toLowerCase()),document.body.appendChild(e),e.click()}else alert(this.translate.instant("lang.tooMuchDatas"))}),Object(vt.a)(()=>this.loadingExport=!1),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}setConfiguration(){null!==this.localStorage.get("exportEntitiesFields_"+this.headerService.user.id)&&(this.exportModel.delimiter=JSON.parse(this.localStorage.get("exportEntitiesFields_"+this.headerService.user.id)).delimiter)}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(z.a),p.Qb(Z.a),p.Qb(m.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&p.Kc(Hs,!0),2&t&&p.yc(i=p.ec())&&(e.listFilter=i.first)},decls:24,vars:23,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["mat-dialog-content",""],["class","loader",4,"ngIf"],[1,"row"],["appearance","outline"],[3,"placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","col-md-9",4,"ngIf"],[1,"divider-modal"],["mat-dialog-actions","",1,"actions"],["mat-raised-button","","mat-button","","color","primary",3,"click"],["mat-raised-button","","mat-button","",3,"mat-dialog-close"],[1,"loader"],[3,"value"],[1,"col-md-9"],[3,"placeholder","ngModel","disabled","ngModelChange"]],template:function(t,e){1&t&&(p.Wb(0,"div",0),p.Wb(1,"h1",1),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"div",2),p.Oc(5,Bs,2,0,"div",3),p.Wb(6,"div",4),p.Wb(7,"div"),p.Wb(8,"mat-form-field",5),p.Wb(9,"mat-label"),p.Qc(10),p.ic(11,"translate"),p.Vb(),p.Wb(12,"mat-select",6),p.dc("ngModelChange",(function(t){return e.exportModel.format=t})),p.ic(13,"translate"),p.Oc(14,Xs,2,2,"mat-option",7),p.Vb(),p.Vb(),p.Vb(),p.Oc(15,qs,8,9,"div",8),p.Vb(),p.Vb(),p.Rb(16,"span",9),p.Wb(17,"div",10),p.Wb(18,"button",11),p.dc("click",(function(){return e.exportData()})),p.Qc(19),p.ic(20,"translate"),p.Vb(),p.Wb(21,"button",12),p.Qc(22),p.ic(23,"translate"),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(2),p.Rc(p.jc(3,13,"lang.exportDatas")),p.Db(3),p.oc("ngIf",e.loadingExport),p.Db(2),p.Ib("col-md-12","csv"!=e.exportModel.format)("col-md-3","csv"==e.exportModel.format),p.Db(3),p.Rc(p.jc(11,15,"lang.format")),p.Db(2),p.pc("placeholder",p.jc(13,17,"lang.format")),p.oc("ngModel",e.exportModel.format),p.Db(2),p.oc("ngForOf",e.formats),p.Db(1),p.oc("ngIf","csv"==e.exportModel.format),p.Db(4),p.Rc(p.jc(20,19,"lang.toExport")),p.Db(3),p.Rc(p.jc(23,21,"lang.cancel")))},directives:[z.i,z.f,O.t,S.c,S.g,at.a,c.u,c.x,O.s,z.c,R.b,z.d,I.c,k.p],pipes:[h.d],styles:[".mat-dialog-container{position:relative}.mat-dialog-content[_ngcontent-%COMP%]{min-height:150px;padding-bottom:10px;overflow-x:hidden}.actions[_ngcontent-%COMP%], .loader[_ngcontent-%COMP%]{justify-content:center}.loader[_ngcontent-%COMP%]{position:absolute;display:flex;width:100%;left:0;top:0;height:100%;background:hsla(0,0%,100%,.6);z-index:1;align-items:center}"]}),t})();var Js=i("y9tK");const Ys=["snav2"],Zs=["adminMenuTemplate"],tc=["paginatorUsers"],ec=["paginatorTemplates"],ic=["tableUsers"],ac=["tableTemplates"],nc=["appDiffusionsList"],oc=["appVisaWorkflow"],sc=["appAvisWorkflow"];function cc(t,e){if(1&t){const t=p.Xb();p.Wb(0,"a",47),p.dc("click",(function(){p.Dc(t);const e=p.hc(2);return p.zc(16).open(),e.prepareEntityAdd()})),p.Rb(1,"mat-icon",50),p.Wb(2,"p",49),p.Qc(3),p.ic(4,"translate"),p.Vb(),p.Vb()}2&t&&(p.Db(3),p.Sc(" ",p.jc(4,1,"lang.add")," "))}const rc=function(t){return{opacity:t}};function lc(t,e){if(1&t){const t=p.Xb();p.Wb(0,"a",52),p.Wb(1,"mat-icon",53),p.Wb(2,"mat-slide-toggle",54),p.dc("click",(function(){p.Dc(t);const e=p.hc().$implicit;return p.hc(2).toggleRole(e),!1})),p.Vb(),p.Vb(),p.Wb(3,"p",55),p.dc("click",(function(){p.Dc(t);const e=p.hc().$implicit;return p.hc(2).toggleRole(e),!1})),p.Qc(4),p.Vb(),p.Vb()}if(2&t){const t=p.hc().$implicit;p.Db(2),p.oc("checked",t.available),p.Db(1),p.oc("ngStyle",p.vc(3,rc,t.available?"":"0.5")),p.Db(1),p.Sc(" ",t.label," ")}}function dc(t,e){if(1&t&&(p.Ub(0),p.Oc(1,lc,5,5,"a",51),p.Tb()),2&t){const t=e.$implicit;p.Db(1),p.oc("ngIf","dest"!=t.id&&"cc"!=t.id)}}function bc(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-nav-list"),p.Wb(1,"h3",45),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Oc(4,cc,5,3,"a",46),p.Wb(5,"a",47),p.dc("click",(function(){return p.Dc(t),p.hc().openExportModal()})),p.Rb(6,"mat-icon",48),p.Wb(7,"p",49),p.Qc(8),p.ic(9,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Rb(10,"mat-divider"),p.Wb(11,"mat-nav-list"),p.Wb(12,"h3",45),p.Qc(13),p.ic(14,"translate"),p.Vb(),p.Oc(15,dc,2,1,"ng-container",21),p.Vb()}if(2&t){const t=p.hc();p.Db(2),p.Rc(p.jc(3,5,"lang.actions")),p.Db(2),p.oc("ngIf",!t.creationMode),p.Db(4),p.Sc(" ",p.jc(9,7,"lang.toExport")," "),p.Db(5),p.Rc(p.jc(14,9,"lang.additionalRoles")),p.Db(2),p.oc("ngForOf",t.listTemplateRoles)}}function pc(t,e){1&t&&(p.Wb(0,"div",56),p.Rb(1,"mat-spinner",57),p.Vb())}function hc(t,e){1&t&&(p.Wb(0,"mat-hint"),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.entityTreeInfo")))}function uc(t,e){1&t&&(p.Wb(0,"mat-hint"),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.entityTreeInfoCreation")))}function mc(t,e){if(1&t&&(p.Wb(0,"mat-card",58),p.Wb(1,"mat-form-field"),p.Rb(2,"input",59),p.ic(3,"translate"),p.Oc(4,hc,3,3,"mat-hint",60),p.Oc(5,uc,3,3,"mat-hint",60),p.Vb(),p.Rb(6,"div",61),p.Wb(7,"div",62),p.Qc(8),p.ic(9,"translate"),p.Vb(),p.Vb()),2&t){const t=p.hc();p.Db(2),p.pc("placeholder",p.jc(3,5,"lang.searchEntities")),p.Db(2),p.oc("ngIf",!t.creationMode),p.Db(1),p.oc("ngIf",t.creationMode),p.Db(3),p.Tc(" ",t.entities.length," ",p.jc(9,7,"lang.entities"),"")}}function fc(t,e){if(1&t&&(p.Wb(0,"mat-option",64),p.Qc(1),p.Vb()),2&t){const t=p.hc().$implicit;p.oc("value",t.entity_id),p.Db(1),p.Sc(" ",t.entity_label," ")}}function gc(t,e){if(1&t&&(p.Ub(0),p.Oc(1,fc,2,2,"mat-option",63),p.Tb()),2&t){const t=e.$implicit,i=p.hc();p.Db(1),p.oc("ngIf",!t.state.disabled&&t.entity_id!=i.currentEntity.entity_id||i.currentEntity.parent_entity_id==t.entity_id)}}function vc(t,e){if(1&t&&(p.Wb(0,"mat-option",64),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t.id),p.Db(1),p.Sc(" ",t.label," ")}}function yc(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",16),p.Wb(1,"div",17),p.Wb(2,"mat-form-field"),p.Wb(3,"input",65),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().currentEntity.id=e})),p.ic(4,"translate"),p.ic(5,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc();p.Db(3),p.pc("title",p.jc(4,3,"lang.technicalId")),p.pc("placeholder",p.jc(5,5,"lang.technicalId")),p.oc("ngModel",t.currentEntity.id)}}function Dc(t,e){1&t&&(p.Rb(0,"input",69),p.ic(1,"translate"),p.ic(2,"translate")),2&t&&(p.pc("title",p.jc(1,2,"lang.siretCode")),p.pc("placeholder",p.jc(2,4,"lang.siretCode")))}function Vc(t,e){if(1&t){const t=p.Xb();p.Wb(0,"input",70),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).currentEntity.business_id=e})),p.ic(1,"translate"),p.ic(2,"translate"),p.Vb()}if(2&t){const t=p.hc(2);p.pc("title",p.jc(1,3,"lang.siretCode")),p.pc("placeholder",p.jc(2,5,"lang.siretCode")),p.oc("ngModel",t.currentEntity.business_id)}}function Cc(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",71),p.dc("click",(function(){return p.Dc(t),p.hc(2).addEntityToAnnuary()})),p.Rb(1,"mat-icon",72),p.Vb()}}function Mc(t,e){if(1&t&&(p.Wb(0,"div",16),p.Wb(1,"div",17),p.Wb(2,"mat-form-field"),p.Oc(3,Dc,3,6,"input",66),p.Oc(4,Vc,3,7,"input",67),p.Oc(5,Cc,2,0,"button",68),p.Vb(),p.Vb(),p.Vb()),2&t){const t=p.hc();p.Db(3),p.oc("ngIf",!t.currentEntity.canSynchronizeSiret),p.Db(1),p.oc("ngIf",t.currentEntity.canSynchronizeSiret),p.Db(1),p.oc("ngIf",t.currentEntity.canSynchronizeSiret)}}function Wc(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",73),p.dc("click",(function(){return p.Dc(t),p.hc().removeEntity()})),p.Qc(1),p.ic(2,"translate"),p.Vb()}if(2&t){const t=p.hc(),e=p.zc(21);p.oc("disabled",!e.form.valid||t.currentEntity.hasChildren),p.Db(1),p.Rc(p.jc(2,2,"lang.delete"))}}function xc(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",74),p.dc("click",(function(){return p.Dc(t),p.hc().readMode()})),p.Qc(1),p.ic(2,"translate"),p.Vb()}2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.cancel")))}function Oc(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",81),p.dc("click",(function(){return p.Dc(t),p.hc(3).deleteDiffList()})),p.Qc(1),p.ic(2,"translate"),p.Vb()}2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.delete")))}function _c(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",16),p.Wb(1,"div",40),p.Wb(2,"button",41),p.dc("click",(function(){return p.Dc(t),p.hc(2).saveDiffList()})),p.Qc(3),p.ic(4,"translate"),p.Vb(),p.Wb(5,"button",79),p.dc("click",(function(){p.Dc(t),p.hc();const e=p.zc(5),i=p.hc();return e.loadListModel(i.currentEntity.id)})),p.Qc(6),p.ic(7,"translate"),p.Vb(),p.Oc(8,Oc,3,3,"button",80),p.Vb(),p.Vb()}if(2&t){p.hc();const t=p.zc(5),e=p.hc();p.Db(2),p.oc("disabled",t.hasEmptyDest()||!t.isModified()),p.Db(1),p.Rc(p.jc(4,5,"lang.save")),p.Db(2),p.oc("disabled",!t.isModified()),p.Db(1),p.Rc(p.jc(7,7,"lang.cancel")),p.Db(2),p.oc("ngIf",!t.isEmptyList()&&e.currentEntity.listTemplate.id)}}function Sc(t,e){if(1&t&&(p.Wb(0,"mat-tab",13),p.ic(1,"translate"),p.Wb(2,"div",75),p.Wb(3,"div",76),p.Rb(4,"app-diffusions-list",77,78),p.Vb(),p.Oc(6,_c,9,9,"div",24),p.Vb(),p.Vb()),2&t){const t=p.hc();p.pc("label",p.jc(1,4,"lang.diffusionList")),p.Db(4),p.oc("adminMode",!0)("target","redirect"),p.Db(2),p.oc("ngIf",t.currentEntity.entity_id)}}function wc(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",16),p.Wb(1,"div",40),p.Wb(2,"button",41),p.dc("click",(function(){return p.Dc(t),p.hc(2).saveDiffListVisa()})),p.Qc(3),p.ic(4,"translate"),p.Vb(),p.Wb(5,"button",79),p.dc("click",(function(){p.Dc(t),p.hc();const e=p.zc(5),i=p.hc();return e.loadListModel(i.currentEntity.id)})),p.Qc(6),p.ic(7,"translate"),p.Vb(),p.Vb(),p.Vb()}if(2&t){p.hc();const t=p.zc(5);p.Db(2),p.oc("disabled",!t.isModified()),p.Db(1),p.Rc(p.jc(4,4,"lang.save")),p.Db(2),p.oc("disabled",!t.isModified()),p.Db(1),p.Rc(p.jc(7,6,"lang.cancel"))}}function Ic(t,e){if(1&t&&(p.Wb(0,"mat-tab",13),p.ic(1,"translate"),p.Wb(2,"div",82),p.Wb(3,"div",76),p.Rb(4,"app-visa-workflow",83,84),p.Vb(),p.Oc(6,wc,8,8,"div",24),p.Vb(),p.Vb()),2&t){const t=p.hc();p.pc("label",p.jc(1,5,"lang.visaWorkflow")),p.Db(4),p.oc("adminMode",!0)("showListModels",!1)("showComment",!1),p.Db(2),p.oc("ngIf",t.currentEntity.entity_id)}}function jc(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",16),p.Wb(1,"div",40),p.Wb(2,"button",41),p.dc("click",(function(){return p.Dc(t),p.hc(2).saveDiffListOpinion()})),p.Qc(3),p.ic(4,"translate"),p.Vb(),p.Wb(5,"button",79),p.dc("click",(function(){p.Dc(t),p.hc();const e=p.zc(5),i=p.hc();return e.loadListModel(i.currentEntity.id)})),p.Qc(6),p.ic(7,"translate"),p.Vb(),p.Vb(),p.Vb()}if(2&t){p.hc();const t=p.zc(5);p.Db(2),p.oc("disabled",!t.isModified()),p.Db(1),p.Rc(p.jc(4,4,"lang.save")),p.Db(2),p.oc("disabled",!t.isModified()),p.Db(1),p.Rc(p.jc(7,6,"lang.cancel"))}}function kc(t,e){if(1&t&&(p.Wb(0,"mat-tab",13),p.ic(1,"translate"),p.Wb(2,"div",85),p.Wb(3,"div",76),p.Rb(4,"app-avis-workflow",86,87),p.Vb(),p.Oc(6,jc,8,8,"div",24),p.Vb(),p.Vb()),2&t){const t=p.hc();p.pc("label",p.jc(1,4,"lang.avis")),p.Db(4),p.oc("adminMode",!0)("showListModels",!1),p.Db(2),p.oc("ngIf",t.currentEntity.entity_id)}}const Rc=function(){return["/rest/autocomplete/users/administration"]};function Tc(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",101),p.Wb(1,"plugin-autocomplete",102),p.dc("triggerEvent",(function(e){return p.Dc(t),p.hc(2).linkUser(e)})),p.Vb(),p.Rb(2,"hr"),p.Vb()}if(2&t){const t=p.hc(2);p.Db(1),p.oc("labelPlaceholder",t.translate.instant("lang.linkUser"))("labelList",t.translate.instant("lang.availableUsers"))("routeDatas",p.uc(5,Rc))("targetSearchKey","idToDisplay")("subInfoKey","descriptionToDisplay")}}function Pc(t,e){1&t&&(p.Wb(0,"mat-header-cell",103),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.firstname")))}function Qc(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.firstname," ")}}function Fc(t,e){1&t&&(p.Wb(0,"mat-header-cell",103),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.lastname")))}function Lc(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.lastname," ")}}function Ec(t,e){1&t&&p.Rb(0,"mat-header-row")}function Ac(t,e){1&t&&(p.Rb(0,"mat-row",104),p.ic(1,"translate")),2&t&&(p.qc("routerLink","/administration/users/",e.$implicit.id,""),p.pc("matTooltip",p.jc(1,2,"lang.view")))}function Uc(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-tab",13),p.ic(1,"translate"),p.Wb(2,"div",75),p.Oc(3,Tc,3,6,"div",88),p.Wb(4,"div",89),p.Wb(5,"mat-form-field"),p.Wb(6,"input",90),p.dc("keyup",(function(e){return p.Dc(t),p.hc().applyFilterUsers(e.target.value)})),p.ic(7,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(8,"div",89),p.Rb(9,"mat-paginator",91,92),p.Vb(),p.Vb(),p.Wb(11,"mat-table",93,94),p.Ub(13,95),p.Oc(14,Pc,3,3,"mat-header-cell",96),p.Oc(15,Qc,2,1,"mat-cell",97),p.Tb(),p.Ub(16,98),p.Oc(17,Fc,3,3,"mat-header-cell",96),p.Oc(18,Lc,2,1,"mat-cell",97),p.Tb(),p.Oc(19,Ec,1,0,"mat-header-row",99),p.Oc(20,Ac,2,4,"mat-row",100),p.Vb(),p.Vb()}if(2&t){const t=p.hc();p.pc("label",p.jc(1,9,"lang.users")),p.Db(3),p.oc("ngIf",t.currentEntity.canAdminUsers),p.Db(3),p.pc("placeholder",p.jc(7,11,"lang.filterBy")),p.Db(3),p.oc("length",100)("hidePageSize",!0)("pageSize",10),p.Db(2),p.oc("dataSource",t.dataSourceUsers),p.Db(8),p.oc("matHeaderRowDef",t.displayedColumnsUsers),p.Db(1),p.oc("matRowDefColumns",t.displayedColumnsUsers)}}function $c(t,e){1&t&&(p.Wb(0,"mat-header-cell",115),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc("",p.jc(2,1,"lang.templateName")," "))}function zc(t,e){if(1&t&&(p.Wb(0,"mat-cell",116),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.pc("matTooltip",t.template_comment),p.Db(1),p.Sc(" ",t.template_label," ")}}function Nc(t,e){1&t&&(p.Wb(0,"mat-header-cell",117),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc("",p.jc(2,1,"lang.templateTarget")," "))}function Hc(t,e){if(1&t&&(p.Wb(0,"mat-cell",118),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",p.jc(2,1,"lang."+t.template_target)," ")}}function Bc(t,e){1&t&&p.Rb(0,"mat-header-row")}const Xc=function(t){return{cursor:t}};function Gc(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-row",119),p.dc("click",(function(){p.Dc(t);const i=e.$implicit;return p.hc(2).showTemplate(i.template_id)})),p.Vb()}if(2&t){const t=p.hc(2);p.oc("ngStyle",p.vc(1,Xc,t.currentEntity.canAdminTemplates?"pointer":"position"))}}function qc(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-tab",13),p.ic(1,"translate"),p.Wb(2,"div",75),p.Wb(3,"div",89),p.Wb(4,"mat-form-field"),p.Wb(5,"input",90),p.dc("keyup",(function(e){return p.Dc(t),p.hc().applyFilterTemplates(e.target.value)})),p.ic(6,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(7,"div",89),p.Rb(8,"mat-paginator",91,105),p.Vb(),p.Vb(),p.Wb(10,"mat-table",106,107),p.Ub(12,108),p.Oc(13,$c,3,3,"mat-header-cell",109),p.Oc(14,zc,2,2,"mat-cell",110),p.Tb(),p.Ub(15,111),p.Oc(16,Nc,3,3,"mat-header-cell",112),p.Oc(17,Hc,3,3,"mat-cell",113),p.Tb(),p.Oc(18,Bc,1,0,"mat-header-row",99),p.Oc(19,Gc,1,3,"mat-row",114),p.Vb(),p.Vb()}if(2&t){const t=p.hc();p.pc("label",p.jc(1,8,"lang.templates")),p.Db(5),p.pc("placeholder",p.jc(6,10,"lang.filterBy")),p.Db(3),p.oc("length",100)("hidePageSize",!0)("pageSize",10),p.Db(2),p.oc("dataSource",t.dataSourceTemplates),p.Db(8),p.oc("matHeaderRowDef",t.displayedColumnsTemplates),p.Db(1),p.oc("matRowDefColumns",t.displayedColumnsTemplates)}}function Kc(t,e){if(1&t&&(p.Wb(0,"mat-list-item"),p.Rb(1,"mat-icon",7),p.Wb(2,"p",8),p.Wb(3,"b"),p.Qc(4),p.Vb(),p.Qc(5),p.ic(6,"translate"),p.Wb(7,"b"),p.Qc(8),p.Vb(),p.Qc(9),p.ic(10,"translate"),p.Vb(),p.Vb()),2&t){const t=p.hc();p.Db(4),p.Rc(t.data.entity.entity_label),p.Db(1),p.Sc(" ",p.jc(6,4,"lang.isDestTo")," "),p.Db(3),p.Rc(t.data.entity.documents),p.Db(1),p.Sc(" ",p.jc(10,6,"lang.documents"),"")}}function Jc(t,e){if(1&t&&(p.Wb(0,"mat-list-item"),p.Rb(1,"mat-icon",9),p.Wb(2,"p",8),p.Wb(3,"b"),p.Qc(4),p.Vb(),p.Qc(5),p.ic(6,"translate"),p.Wb(7,"b"),p.Qc(8),p.Vb(),p.Qc(9),p.ic(10,"translate"),p.Vb(),p.Vb()),2&t){const t=p.hc();p.Db(4),p.Rc(t.data.entity.entity_label),p.Db(1),p.Sc(" ",p.jc(6,4,"lang.isCopyTo")," "),p.Db(3),p.Rc(t.data.entity.instances),p.Db(1),p.Sc(" ",p.jc(10,6,"lang.documents"),"")}}function Yc(t,e){if(1&t&&(p.Wb(0,"mat-list-item"),p.Rb(1,"mat-icon",10),p.Wb(2,"p",8),p.Wb(3,"b"),p.Qc(4),p.Vb(),p.Qc(5),p.ic(6,"lowercase"),p.ic(7,"translate"),p.Wb(8,"b"),p.Qc(9),p.Vb(),p.Qc(10),p.ic(11,"lowercase"),p.ic(12,"translate"),p.Vb(),p.Vb()),2&t){const t=p.hc();p.Db(4),p.Rc(t.data.entity.entity_label),p.Db(1),p.Sc(" ",p.jc(6,4,p.jc(7,6,"lang.isLinkedTo"))," "),p.Db(4),p.Rc(t.data.entity.users.length),p.Db(1),p.Sc(" ",p.jc(11,8,p.jc(12,10,"lang.usersAlt")),"")}}function Zc(t,e){if(1&t&&(p.Wb(0,"mat-list-item"),p.Rb(1,"mat-icon",11),p.Wb(2,"p",8),p.Wb(3,"b"),p.Qc(4),p.Vb(),p.Qc(5),p.ic(6,"lowercase"),p.ic(7,"translate"),p.Wb(8,"b"),p.Qc(9),p.Vb(),p.Qc(10),p.ic(11,"lowercase"),p.ic(12,"translate"),p.Vb(),p.Vb()),2&t){const t=p.hc();p.Db(4),p.Rc(t.data.entity.entity_label),p.Db(1),p.Sc(" ",p.jc(6,4,p.jc(7,6,"lang.isLinkedTo"))," "),p.Db(4),p.Rc(t.data.entity.templates.length),p.Db(1),p.Sc(" ",p.jc(11,8,p.jc(12,10,"lang.templates")),"")}}const tr=function(){return["/rest/autocomplete/entities"]};let er=(()=>{class t{constructor(t,e,i,a,n,o,s,c,r){this.translate=t,this.http=e,this.notify=i,this.dialog=a,this.headerService=n,this.router=o,this.appService=s,this.functions=c,this.viewContainerRef=r,this.loading=!1,this.entities=[],this.listTemplateRoles=[],this.entityTypeList=[],this.currentEntity={},this.isDraggable=!0,this.newEntity=!1,this.creationMode=!1,this.visaCircuitModified=!1,this.opinionCircuitModified=!1,this.config={},this.dataSourceUsers=new G.p(this.currentEntity.users),this.dataSourceTemplates=new G.p(this.currentEntity.templates),this.displayedColumnsUsers=["firstname","lastname"],this.displayedColumnsTemplates=["template_label","template_target"]}applyFilterUsers(t){t=(t=t.trim()).toLowerCase(),this.dataSourceUsers.filter=t}applyFilterTemplates(t){t=(t=t.trim()).toLowerCase(),this.dataSourceTemplates.filter=t}ngOnInit(){return Object(gt.a)(this,void 0,void 0,(function*(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.entities")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,yield this.getEntityTypes(),yield this.getRoles(),yield this.getEntities(),this.loading=!1,this.initEntitiesTree()}))}initEntitiesTree(){setTimeout(()=>{$("#jstree").jstree({checkbox:{deselect_all:!0,three_state:!1},core:{force_text:!0,themes:{name:"proton",responsive:!0},multiple:!1,data:this.entities,check_callback:function(t,e,i,a,n){if("move_node"===t)return"#"!==i.id&&!!i.original.allowed}},dnd:{is_draggable:function(t){let e=0;const i=t.length;for(;e<i;e++)if(!t[e].original.allowed)return!1;return!0}},plugins:["checkbox","search","dnd","sort"]}),$("#jstree").jstree("select_node",this.entities[0]);let t=!1;$("#jstree_search").keyup((function(){t&&clearTimeout(t),t=setTimeout((function(){const t=$("#jstree_search").val();$("#jstree").jstree(!0).search(t)}),250)})),$("#jstree").on("select_node.jstree",(t,e)=>{!1===this.sidenavRight.opened&&this.sidenavRight.open(),!0===this.creationMode?this.currentEntity.parent_entity_id=e.node.id:!0===this.newEntity?(this.loadEntity(this.currentEntity.entity_id),this.newEntity=!1):this.loadEntity(e.node.id)}).on("deselect_node.jstree",(t,e)=>{this.sidenavRight.close()}).on("move_node.jstree",(t,e)=>{this.currentEntity.parent_entity_id!==this.currentEntity.entity_id&&(this.currentEntity.parent_entity_id=e.parent),this.moveEntity()}).jstree(),$(document).on("dnd_start.vakata",(t,e)=>{$("#jstree").jstree("deselect_all"),$("#jstree").jstree("select_node",e.data.nodes[0])})},0)}getEntityTypes(){return new Promise((t,e)=>{this.http.get("../rest/entityTypes").pipe(Object(d.a)(e=>{this.entityTypeList=e.types,t(!0)}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()})}getRoles(){return new Promise((t,e)=>{this.http.get("../rest/listTemplates/types/entity_id/roles").pipe(Object(d.a)(e=>{this.listTemplateRoles=e.roles,t(!0)}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()})}getEntities(){return new Promise((t,e)=>{this.http.get("../rest/entities").pipe(Object(d.a)(e=>{this.entities=e.entities,t(!0)}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()})}loadEntity(t){this.visaCircuitModified=!1,this.opinionCircuitModified=!1,this.http.get("../rest/entities/"+t+"/details").subscribe(t=>{this.currentEntity=t.entity,this.appDiffusionsList.loadListModel(this.currentEntity.id),this.appVisaWorkflow.loadListModel(this.currentEntity.id),this.appAvisWorkflow.loadListModel(this.currentEntity.id),this.idVisaCircuit=this.currentEntity.visaCircuit?this.currentEntity.visaCircuit.id:null,this.idOpinionCircuit=this.currentEntity.opinionCircuit?this.currentEntity.opinionCircuit.id:null,this.dataSourceUsers=new G.p(this.currentEntity.users),this.dataSourceUsers.paginator=this.paginatorUsers,this.dataSourceUsers.sort=this.sortUsers,this.dataSourceTemplates=new G.p(this.currentEntity.templates),this.dataSourceTemplates.paginator=this.paginatorTemplates,this.dataSourceTemplates.sort=this.sortTemplates,this.currentEntity.listTemplate.items||(this.currentEntity.listTemplate.items=[]),this.listTemplateRoles.forEach(t=>{t.available&&!this.currentEntity.listTemplate.items[t.id]&&(this.currentEntity.listTemplate.items[t.id]=[])})},t=>{this.notify.error(t.error.errors)})}addElemListModelVisa(t){this.visaCircuitModified=!0;const e={id:t.id,type:"user",mode:"sign",idToDisplay:t.idToDisplay,descriptionToDisplay:t.otherInfo};this.currentEntity.visaCircuit.items||(this.currentEntity.visaCircuit.items=[]),this.currentEntity.visaCircuit.items.push(e),this.currentEntity.visaCircuit.items.length>1&&(this.currentEntity.visaCircuit.items[this.currentEntity.visaCircuit.items.length-2].mode="visa")}addElemListModelOpinion(t){this.opinionCircuitModified=!0;const e={id:t.id,type:"user",mode:"avis",idToDisplay:t.idToDisplay,descriptionToDisplay:t.otherInfo};this.currentEntity.opinionCircuit.items||(this.currentEntity.opinionCircuit.items=[]),this.currentEntity.opinionCircuit.items.push(e)}saveEntity(){"#"===this.currentEntity.parent_entity_id&&(this.currentEntity.parent_entity_id="");let t=!0;""===this.currentEntity.parent_entity_id&&(t=confirm(this.translate.instant("lang.entityWithoutParentMessage"))),t&&(this.creationMode?this.http.post("../rest/entities",this.currentEntity).subscribe(t=>{this.currentEntity.listTemplate=[],this.entities=t.entities,this.creationMode=!1,this.newEntity=!0,$("#jstree").jstree(!0).settings.core.data=this.entities,$("#jstree").jstree(!0).refresh(),$("#jstree").on("refresh.jstree",t=>{$("#jstree").jstree("deselect_all"),$("#jstree").jstree("select_node",this.currentEntity.entity_id)}),this.notify.success(this.translate.instant("lang.entityAdded"))},t=>{this.notify.error(t.error.errors)}):this.http.put("../rest/entities/"+this.currentEntity.entity_id,this.currentEntity).subscribe(t=>{this.entities=t.entities,$("#jstree").jstree(!0).settings.core.data=this.entities,$("#jstree").jstree("refresh"),this.notify.success(this.translate.instant("lang.entityUpdated"))},t=>{this.notify.error(t.error.errors)}))}moveEntity(){this.http.put("../rest/entities/"+this.currentEntity.entity_id,this.currentEntity).subscribe(()=>{this.notify.success(this.translate.instant("lang.entityUpdated"))},t=>{this.notify.error(t.error.errors)})}readMode(){if(this.creationMode=!1,this.isDraggable=!0,$("#jstree").jstree("deselect_all"),this.currentEntity.parent_entity_id){for(let t=0;t<this.entities.length;t++)if(this.entities[t].entity_id===this.currentEntity.parent_entity_id){$("#jstree").jstree("select_node",this.entities[t]);break}}else this.sidenavRight.close()}selectParentEntity(t){this.creationMode&&($("#jstree").jstree("deselect_all"),$("#jstree").jstree("select_node",t))}removeEntity(){this.currentEntity.documents>0||this.currentEntity.redirects>0||this.currentEntity.instances>0||this.currentEntity.users.length>0||this.currentEntity.templates.length>0?(this.config={panelClass:"maarch-modal",data:{entity:this.currentEntity}},this.dialogRef=this.dialog.open(ir,this.config),this.dialogRef.afterClosed().subscribe(t=>{t&&(this.currentEntity.listTemplate.id&&this.http.delete("../rest/listTemplates/"+this.currentEntity.listTemplate.id).subscribe(t=>{this.currentEntity.listTemplate.id=t.id,this.http.get("../rest/listTemplates/types/entity_id/roles").subscribe(t=>{this.listTemplateRoles=t.roles},t=>{this.notify.error(t.error.errors)})},t=>{this.notify.error(t.error.errors)}),this.idVisaCircuit&&this.http.delete("../rest/listTemplates/"+this.idVisaCircuit).subscribe(()=>{this.idVisaCircuit=null},t=>{this.notify.error(t.error.errors)}),this.http.put("../rest/entities/"+t.entity_id+"/reassign/"+t.redirectEntity,{}).subscribe(t=>{this.entities=t.entities,$("#jstree").jstree(!0).settings.core.data=this.entities,$("#jstree").jstree("refresh"),this.sidenavRight.close(),this.notify.success(this.translate.instant(void 0===t.deleted||t.deleted?"lang.entityDeleted":"lang.entityDeletedButAnnuaryUnreachable"))},t=>{this.notify.error(t.error.errors)})),this.dialogRef=null})):confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+this.currentEntity.entity_label+" \xbb")&&(this.currentEntity.listTemplate.id&&this.http.delete("../rest/listTemplates/"+this.currentEntity.listTemplate.id).subscribe(t=>{this.currentEntity.listTemplate.id=t.id,this.http.get("../rest/listTemplates/types/entity_id/roles").subscribe(t=>{this.listTemplateRoles=t.roles},t=>{this.notify.error(t.error.errors)})},t=>{this.notify.error(t.error.errors)}),this.idVisaCircuit&&this.http.delete("../rest/listTemplates/"+this.idVisaCircuit).subscribe(()=>{this.idVisaCircuit=null},t=>{this.notify.error(t.error.errors)}),this.http.delete("../rest/entities/"+this.currentEntity.entity_id).subscribe(t=>{this.entities=t.entities,$("#jstree").jstree(!0).settings.core.data=this.entities,$("#jstree").jstree("refresh"),this.sidenavRight.close(),this.notify.success(this.translate.instant(void 0===t.deleted||t.deleted?"lang.entityDeleted":"lang.entityDeletedButAnnuaryUnreachable"))},t=>{this.notify.error(t.error.errors)}))}prepareEntityAdd(){if(this.creationMode=!0,this.isDraggable=!1,this.currentEntity.entity_id){for(let t=0;t<this.entities.length;t++)if(this.entities[t].entity_id===this.currentEntity.entity_id){this.currentEntity={entity_type:this.entityTypeList[0].id},this.currentEntity.parent_entity_id=this.entities[t].entity_id;break}}else this.currentEntity={entity_type:this.entityTypeList[0].id},$("#jstree").jstree("deselect_all"),this.sidenavRight.open()}updateStatus(t,e){this.http.put("../rest/entities/"+t.entity_id+"/status",{method:e}).subscribe(t=>{this.notify.success("")},t=>{this.notify.error(t.error.errors)})}saveDiffList(){const t={title:this.currentEntity.entity_id,description:this.currentEntity.entity_id,type:"diffusionList",entityId:this.currentEntity.id,items:this.appDiffusionsList.getCurrentListinstance().map(t=>({id:t.item_id,type:t.item_type,mode:t.item_mode}))};this.functions.empty(this.currentEntity.listTemplate.id)?this.http.post("../rest/listTemplates?admin=true",t).pipe(Object(d.a)(t=>{this.currentEntity.listTemplate.id=t.id,this.notify.success(this.translate.instant("lang.diffusionModelUpdated")),this.appDiffusionsList.loadListModel(this.currentEntity.id)}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe():this.http.put("../rest/listTemplates/"+this.currentEntity.listTemplate.id,t).pipe(Object(d.a)(()=>{this.notify.success(this.translate.instant("lang.diffusionModelUpdated")),this.appDiffusionsList.loadListModel(this.currentEntity.id)}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}deleteDiffList(){this.dialog.open(q.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete"),msg:this.translate.instant("lang.confirmAction")}}).afterClosed().pipe(Object(K.a)(t=>"ok"===t),Object(J.a)(()=>this.http.delete("../rest/listTemplates/"+this.currentEntity.listTemplate.id)),Object(d.a)(()=>{this.currentEntity.listTemplate.id=null,this.notify.success(this.translate.instant("lang.diffusionModelDeleted")),this.appDiffusionsList.loadListModel(this.currentEntity.id)}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}saveDiffListVisa(){const t={title:this.currentEntity.entity_id,description:this.currentEntity.entity_id,type:"visaCircuit",entityId:this.currentEntity.id,items:this.appVisaWorkflow.getWorkflow().map((t,e)=>({id:t.item_id,type:t.item_type,mode:t.requested_signature?"sign":"visa",sequence:e}))};this.appVisaWorkflow.isValidWorkflow()||this.functions.empty(t.items)?this.functions.empty(t.items)?this.http.delete("../rest/listTemplates/"+this.idVisaCircuit).pipe(Object(d.a)(()=>{this.idVisaCircuit=null,this.notify.success(this.translate.instant("lang.diffusionModelDeleted")),this.appVisaWorkflow.loadListModel(this.currentEntity.id)}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe():this.functions.empty(this.idVisaCircuit)?this.http.post("../rest/listTemplates?admin=true",t).pipe(Object(d.a)(t=>{this.idVisaCircuit=t.id,this.notify.success(this.translate.instant("lang.diffusionModelUpdated")),this.appVisaWorkflow.loadListModel(this.currentEntity.id)}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe():this.http.put("../rest/listTemplates/"+this.idVisaCircuit,t).pipe(Object(d.a)(()=>{this.notify.success(this.translate.instant("lang.diffusionModelUpdated")),this.appVisaWorkflow.loadListModel(this.currentEntity.id)}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe():this.notify.error(this.appVisaWorkflow.getError())}saveDiffListOpinion(){const t={title:this.currentEntity.entity_id,description:this.currentEntity.entity_id,type:"opinionCircuit",entityId:this.currentEntity.id,items:this.appAvisWorkflow.getWorkflow().map((t,e)=>({id:t.item_id,type:t.item_type,mode:"avis",sequence:e}))};this.functions.empty(t.items)?this.http.delete("../rest/listTemplates/"+this.idOpinionCircuit).pipe(Object(d.a)(()=>{this.idOpinionCircuit=null,this.notify.success(this.translate.instant("lang.diffusionModelDeleted")),this.appAvisWorkflow.loadListModel(this.currentEntity.id)}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe():this.functions.empty(this.idOpinionCircuit)?this.http.post("../rest/listTemplates?admin=true",t).pipe(Object(d.a)(t=>{this.idOpinionCircuit=t.id,this.notify.success(this.translate.instant("lang.diffusionModelUpdated")),this.appAvisWorkflow.loadListModel(this.currentEntity.id)}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe():this.http.put("../rest/listTemplates/"+this.idOpinionCircuit,t).pipe(Object(d.a)(()=>{this.notify.success(this.translate.instant("lang.diffusionModelUpdated")),this.appAvisWorkflow.loadListModel(this.currentEntity.id)}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}removeDiffListOpinion(t,e){this.opinionCircuitModified=!0,this.currentEntity.opinionCircuit.items.splice(e,1)}toggleRole(t){t.usedIn.length>0?this.dialog.open(q.a,{panelClass:"maarch-modal",autoFocus:!1,data:{title:this.translate.instant("lang.confirmAction"),msg:this.translate.instant("lang.roleUsedInTemplateInfo")+" : <b>"+t.usedIn.join(", ")+"</b><br/>"+this.translate.instant("lang.roleUsedInTemplateInfo2")}}).afterClosed().subscribe(e=>{"ok"===e&&(t.available=!t.available,this.http.put("../rest/listTemplates/types/entity_id/roles",{roles:this.listTemplateRoles}).subscribe(()=>{t.usedIn=[],this.currentEntity.listTemplate&&(this.currentEntity.listTemplate.items[t.id]=[]),this.notify.success(this.translate.instant("lang.listTemplatesRolesUpdated"))},t=>{this.notify.error(t.error.errors)}))}):(t.available=!t.available,this.http.put("../rest/listTemplates/types/entity_id/roles",{roles:this.listTemplateRoles}).subscribe(()=>{this.currentEntity.listTemplate&&(this.currentEntity.listTemplate.items[t.id]=[],this.http.get("../rest/listTemplates/types/entity_id/roles").subscribe(t=>{this.listTemplateRoles=t.roles},t=>{this.notify.error(t.error.errors)})),this.notify.success(this.translate.instant("lang.listTemplatesRolesUpdated"))},t=>{this.notify.error(t.error.errors)}))}linkUser(t){this.http.post("../rest/users/"+t.id+"/entities",{entityId:this.currentEntity.entity_id,role:""}).subscribe(e=>{const i=t.idToDisplay.split(" ");this.currentEntity.users.push({id:t.id,user_id:t.otherInfo,firstname:i[0],lastname:i[1]}),this.dataSourceUsers=new G.p(this.currentEntity.users),this.dataSourceUsers.paginator=this.paginatorUsers,this.dataSourceUsers.sort=this.sortUsers,this.notify.success(this.translate.instant("lang.userAdded"))},t=>{this.notify.error(t.error.errors)})}showTemplate(t){this.currentEntity.canAdminTemplates&&this.router.navigate(["/administration/templates/"+t])}addEntityToAnnuary(){this.http.put("../rest/entities/"+this.currentEntity.id+"/annuaries",this.currentEntity).subscribe(t=>{this.currentEntity.business_id=t.entitySiret,this.notify.success(this.translate.instant(void 0===t.synchronized?"lang.siretGenerated":t.synchronized?"lang.siretGeneratedAndSynchronizationDone":"lang.siretGeneratedButAnnuaryUnreachable"))},t=>{this.notify.handleErrors(t)})}openExportModal(){this.dialog.open(Ks,{panelClass:"maarch-modal",width:"800px",autoFocus:!1})}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(z.b),p.Qb(m.a),p.Qb(o.c),p.Qb(f.a),p.Qb(D.a),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(Ys,!0),p.Kc(Zs,!0),p.Xc(tc,!0),p.Xc(ec,!0),p.Xc(ic,!0),p.Xc(ac,!0),p.Xc(nc,!0),p.Xc(oc,!0),p.Xc(sc,!0)),2&t&&(p.yc(i=p.ec())&&(e.sidenavRight=i.first),p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.paginatorUsers=i.first),p.yc(i=p.ec())&&(e.paginatorTemplates=i.first),p.yc(i=p.ec())&&(e.sortUsers=i.first),p.yc(i=p.ec())&&(e.sortTemplates=i.first),p.yc(i=p.ec())&&(e.appDiffusionsList=i.first),p.yc(i=p.ec())&&(e.appVisaWorkflow=i.first),p.yc(i=p.ec())&&(e.appAvisWorkflow=i.first))},decls:132,vars:142,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",1,"col-md-5","col-xs-11",3,"mode","fixedInViewport","opened"],["snav2",""],[3,"label"],[1,"form-horizontal",2,"overflow","hidden"],["entityForm","ngForm"],[1,"form-group"],[1,"col-sm-12"],["id","parent_entity_id","name","parent_entity_id",3,"title","placeholder","ngModel","ngModelChange","selectionChange"],["value",""],[2,"opacity","0.5","text-align","center"],[4,"ngFor","ngForOf"],["id","entity_type","name","entity_type","maxlength","32","required","",3,"title","placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","form-group",4,"ngIf"],["matInput","","required","","name","entity_id","id","entity_id","type","text","maxlength","32","pattern","^[\\w-]*$",3,"ngModel","title","placeholder","disabled","ngModelChange"],["matInput","","required","","name","entity_label","id","entity_label","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","required","","name","short_label","id","short_label","type","text","maxlength","50",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","email","id","email","type","text","maxlength","255","pattern","(^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$)",3,"ngModel","title","placeholder","ngModelChange"],[1,"col-sm-4"],["matInput","","name","adrs_1","id","adrs_1","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","adrs_2","id","adrs_2","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","adrs_3","id","adrs_3","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","zipcode","id","zipcode","type","text","maxlength","32",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","city","id","city","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","country","id","country","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","entity_full_name","id","entity_full_name","matTextareaAutosize","","matAutosizeMinRows","1","matAutosizeMaxRows","5",3,"ngModel","placeholder","title","ngModelChange"],[1,"col-sm-6"],["matInput","","name","archival_agency","id","archival_agency","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","archival_agreement","id","archival_agreement","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","warn",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","default",3,"click",4,"ngIf"],[3,"label",4,"ngIf"],["mat-subheader",""],["mat-list-item","",3,"click",4,"ngIf"],["mat-list-item","",3,"click"],["color","primary","mat-list-icon","",1,"fas","fa-file-export"],["mat-line",""],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-list-item","","disableRipple","true",4,"ngIf"],["mat-list-item","","disableRipple","true"],["color","primary","mat-list-icon",""],["color","primary",3,"checked","click"],["mat-line","",3,"ngStyle","click"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],["matInput","","id","jstree_search","name","jstree_search","type","text",3,"placeholder"],[4,"ngIf"],["id","jstree"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],[3,"value",4,"ngIf"],[3,"value"],["matInput","","name","id","id","id","type","text","disabled","",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","value","Param\xe8tre SIRET manquant","type","text","maxlength","255","disabled","",3,"title","placeholder",4,"ngIf"],["matInput","","name","business_id","id","business_id","type","text","maxlength","255","disabled","",3,"ngModel","title","placeholder","ngModelChange",4,"ngIf"],["color","primary","mat-icon-button","","matSuffix","","title","G\xe9n\xe9rer un num\xe9ro SIRET",3,"click",4,"ngIf"],["matInput","","value","Param\xe8tre SIRET manquant","type","text","maxlength","255","disabled","",3,"title","placeholder"],["matInput","","name","business_id","id","business_id","type","text","maxlength","255","disabled","",3,"ngModel","title","placeholder","ngModelChange"],["color","primary","mat-icon-button","","matSuffix","","title","G\xe9n\xe9rer un num\xe9ro SIRET",3,"click"],[1,"fas","fa-compress-arrows-alt"],["mat-raised-button","","color","warn",3,"disabled","click"],["mat-raised-button","","color","default",3,"click"],[1,"row",2,"margin","0px"],[1,"col-md-12"],[3,"adminMode","target"],["appDiffusionsList",""],["mat-raised-button","","color","default",3,"disabled","click"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],["id","visaCircuitContent",1,"row",2,"margin","0px"],[3,"adminMode","showListModels","showComment"],["appVisaWorkflow",""],["id","opinionCircuitContent",1,"row",2,"margin","0px"],[3,"adminMode","showListModels"],["appAvisWorkflow",""],["class","col-md-12","style","padding:5px;",4,"ngIf"],[1,"col-md-6","col-xs-6"],["matInput","",3,"placeholder","keyup"],[3,"length","hidePageSize","pageSize"],["paginatorUsers",""],["matSort","","matSortActive","lastname","matSortDirection","asc",3,"dataSource"],["tableUsers","matSort"],["matColumnDef","firstname"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","lastname"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"col-md-12",2,"padding","5px"],[3,"labelPlaceholder","labelList","routeDatas","targetSearchKey","subInfoKey","triggerEvent"],["mat-sort-header",""],[2,"cursor","pointer",3,"routerLink","matTooltip"],["paginatorTemplates",""],["matSort","","matSortActive","template_label","matSortDirection","asc",3,"dataSource"],["tableTemplates","matSort"],["matColumnDef","template_label"],["mat-sort-header","","style","flex:2;",4,"matHeaderCellDef"],["style","flex:2;",3,"matTooltip",4,"matCellDef"],["matColumnDef","template_target"],["mat-sort-header","","style","flex:1;",4,"matHeaderCellDef"],["style","flex:1;",4,"matCellDef"],[3,"ngStyle","click",4,"matRowDef","matRowDefColumns"],["mat-sort-header","",2,"flex","2"],[2,"flex","2",3,"matTooltip"],["mat-sort-header","",2,"flex","1"],[2,"flex","1"],[3,"ngStyle","click"]],template:function(t,e){if(1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,bc,16,11,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,pc,2,0,"div",9),p.Oc(14,mc,10,9,"mat-card",10),p.Vb(),p.Vb(),p.Vb(),p.Wb(15,"mat-sidenav",11,12),p.Wb(17,"mat-nav-list"),p.Wb(18,"mat-tab-group"),p.Wb(19,"mat-tab",13),p.Wb(20,"form",14,15),p.Wb(22,"div",16),p.Wb(23,"div",17),p.Wb(24,"mat-form-field"),p.Wb(25,"mat-select",18),p.dc("ngModelChange",(function(t){return e.currentEntity.parent_entity_id=t}))("selectionChange",(function(){return e.selectParentEntity(e.currentEntity.parent_entity_id)})),p.ic(26,"translate"),p.ic(27,"translate"),p.Wb(28,"mat-option",19),p.Wb(29,"i",20),p.Qc(30),p.ic(31,"translate"),p.Vb(),p.Vb(),p.Oc(32,gc,2,1,"ng-container",21),p.ic(33,"sortBy"),p.Vb(),p.Vb(),p.Wb(34,"mat-form-field"),p.Wb(35,"mat-select",22),p.dc("ngModelChange",(function(t){return e.currentEntity.entity_type=t})),p.ic(36,"translate"),p.ic(37,"translate"),p.Oc(38,vc,2,2,"mat-option",23),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Oc(39,yc,6,7,"div",24),p.Wb(40,"div",16),p.Wb(41,"div",17),p.Wb(42,"mat-form-field"),p.Wb(43,"input",25),p.dc("ngModelChange",(function(t){return e.currentEntity.entity_id=t})),p.ic(44,"translate"),p.ic(45,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(46,"div",16),p.Wb(47,"div",17),p.Wb(48,"mat-form-field"),p.Wb(49,"input",26),p.dc("ngModelChange",(function(t){return e.currentEntity.entity_label=t})),p.ic(50,"translate"),p.ic(51,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(52,"div",16),p.Wb(53,"div",17),p.Wb(54,"mat-form-field"),p.Wb(55,"input",27),p.dc("ngModelChange",(function(t){return e.currentEntity.short_label=t})),p.ic(56,"translate"),p.ic(57,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(58,"div",16),p.Wb(59,"div",17),p.Wb(60,"mat-form-field"),p.Wb(61,"input",28),p.dc("ngModelChange",(function(t){return e.currentEntity.email=t})),p.ic(62,"translate"),p.ic(63,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(64,"mat-accordion"),p.Wb(65,"mat-expansion-panel"),p.Wb(66,"mat-expansion-panel-header"),p.Wb(67,"mat-panel-title"),p.Qc(68),p.ic(69,"translate"),p.Vb(),p.Vb(),p.Wb(70,"div",16),p.Wb(71,"div",29),p.Wb(72,"mat-form-field"),p.Wb(73,"input",30),p.dc("ngModelChange",(function(t){return e.currentEntity.adrs_1=t})),p.ic(74,"translate"),p.ic(75,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(76,"div",29),p.Wb(77,"mat-form-field"),p.Wb(78,"input",31),p.dc("ngModelChange",(function(t){return e.currentEntity.adrs_2=t})),p.ic(79,"translate"),p.ic(80,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(81,"div",29),p.Wb(82,"mat-form-field"),p.Wb(83,"input",32),p.dc("ngModelChange",(function(t){return e.currentEntity.adrs_3=t})),p.ic(84,"translate"),p.ic(85,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(86,"div",16),p.Wb(87,"div",29),p.Wb(88,"mat-form-field"),p.Wb(89,"input",33),p.dc("ngModelChange",(function(t){return e.currentEntity.zipcode=t})),p.ic(90,"translate"),p.ic(91,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(92,"div",29),p.Wb(93,"mat-form-field"),p.Wb(94,"input",34),p.dc("ngModelChange",(function(t){return e.currentEntity.city=t})),p.ic(95,"translate"),p.ic(96,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(97,"div",29),p.Wb(98,"mat-form-field"),p.Wb(99,"input",35),p.dc("ngModelChange",(function(t){return e.currentEntity.country=t})),p.ic(100,"translate"),p.ic(101,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(102,"div",16),p.Wb(103,"div",17),p.Wb(104,"mat-form-field"),p.Wb(105,"textarea",36),p.dc("ngModelChange",(function(t){return e.currentEntity.entity_full_name=t})),p.ic(106,"translate"),p.ic(107,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Oc(108,Mc,6,3,"div",24),p.Wb(109,"div",16),p.Wb(110,"div",37),p.Wb(111,"mat-form-field"),p.Wb(112,"input",38),p.dc("ngModelChange",(function(t){return e.currentEntity.archival_agency=t})),p.ic(113,"translate"),p.ic(114,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(115,"div",37),p.Wb(116,"mat-form-field"),p.Wb(117,"input",39),p.dc("ngModelChange",(function(t){return e.currentEntity.archival_agreement=t})),p.ic(118,"translate"),p.ic(119,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(120,"div",16),p.Wb(121,"div",40),p.Wb(122,"button",41),p.dc("click",(function(){return e.saveEntity()})),p.Qc(123),p.ic(124,"translate"),p.Vb(),p.Oc(125,Wc,3,4,"button",42),p.Oc(126,xc,3,3,"button",43),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Oc(127,Sc,7,6,"mat-tab",44),p.Oc(128,Ic,7,7,"mat-tab",44),p.Oc(129,kc,7,6,"mat-tab",44),p.Oc(130,Uc,21,13,"mat-tab",44),p.Oc(131,qc,20,12,"mat-tab",44),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t){const t=p.zc(21);p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading),p.Db(1),p.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!1),p.Db(4),p.oc("label",e.translate.instant(e.creationMode?"lang.createNewEntity":"lang.informations")),p.Db(6),p.pc("title",p.jc(26,73,"lang.isLinkedTo")),p.pc("placeholder",p.jc(27,75,"lang.isLinkedTo")),p.oc("ngModel",e.currentEntity.parent_entity_id),p.Db(5),p.Sc("- ",p.jc(31,77,"lang.noEntity")," -"),p.Db(2),p.oc("ngForOf",p.kc(33,79,e.entities,"entity_label")),p.Db(3),p.pc("title",p.jc(36,82,"lang.entityType")),p.pc("placeholder",p.jc(37,84,"lang.entityType")),p.oc("ngModel",e.currentEntity.entity_type),p.Db(3),p.oc("ngForOf",e.entityTypeList),p.Db(1),p.oc("ngIf",!e.creationMode),p.Db(4),p.pc("title",p.jc(44,86,"lang.id")),p.pc("placeholder",p.jc(45,88,"lang.id")),p.oc("ngModel",e.currentEntity.entity_id)("disabled",!e.creationMode),p.Db(6),p.pc("title",p.jc(50,90,"lang.label")),p.pc("placeholder",p.jc(51,92,"lang.label")),p.oc("ngModel",e.currentEntity.entity_label),p.Db(6),p.pc("title",p.jc(56,94,"lang.shortLabel")),p.pc("placeholder",p.jc(57,96,"lang.shortLabel")),p.oc("ngModel",e.currentEntity.short_label),p.Db(6),p.pc("title",p.jc(62,98,"lang.email")),p.pc("placeholder",p.jc(63,100,"lang.email")),p.oc("ngModel",e.currentEntity.email),p.Db(7),p.Sc(" ",p.jc(69,102,"lang.otherInformations")," "),p.Db(5),p.qc("title","",p.jc(74,104,"lang.address"),"1"),p.qc("placeholder","",p.jc(75,106,"lang.address"),"1"),p.oc("ngModel",e.currentEntity.adrs_1),p.Db(5),p.qc("title","",p.jc(79,108,"lang.address"),"2"),p.qc("placeholder","",p.jc(80,110,"lang.address"),"2"),p.oc("ngModel",e.currentEntity.adrs_2),p.Db(5),p.qc("title","",p.jc(84,112,"lang.address"),"3"),p.qc("placeholder","",p.jc(85,114,"lang.address"),"3"),p.oc("ngModel",e.currentEntity.adrs_3),p.Db(6),p.pc("title",p.jc(90,116,"lang.zipcode")),p.pc("placeholder",p.jc(91,118,"lang.zipcode")),p.oc("ngModel",e.currentEntity.zipcode),p.Db(5),p.pc("title",p.jc(95,120,"lang.city")),p.pc("placeholder",p.jc(96,122,"lang.city")),p.oc("ngModel",e.currentEntity.city),p.Db(5),p.pc("title",p.jc(100,124,"lang.country")),p.pc("placeholder",p.jc(101,126,"lang.country")),p.oc("ngModel",e.currentEntity.country),p.Db(6),p.pc("placeholder",p.jc(106,128,"lang.entityFullName")),p.pc("title",p.jc(107,130,"lang.entityFullName")),p.oc("ngModel",e.currentEntity.entity_full_name),p.Db(3),p.oc("ngIf",!e.creationMode),p.Db(4),p.pc("title",p.jc(113,132,"lang.archivalAgency")),p.pc("placeholder",p.jc(114,134,"lang.archivalAgency")),p.oc("ngModel",e.currentEntity.archival_agency),p.Db(5),p.pc("title",p.jc(118,136,"lang.archivalAgreement")),p.pc("placeholder",p.jc(119,138,"lang.archivalAgreement")),p.oc("ngModel",e.currentEntity.archival_agreement),p.Db(5),p.oc("disabled",!t.form.valid),p.Db(1),p.Rc(p.jc(124,140,"lang.save")),p.Db(2),p.oc("ngIf",!e.creationMode),p.Db(1),p.oc("ngIf",e.creationMode),p.Db(1),p.oc("ngIf",!e.creationMode),p.Db(1),p.oc("ngIf",!e.creationMode),p.Db(1),p.oc("ngIf",!e.creationMode),p.Db(1),p.oc("ngIf",!e.creationMode),p.Db(1),p.oc("ngIf",!e.creationMode)}},directives:[C.e,C.f,M.a,x.a,O.t,C.d,wt.h,ke.c,ke.a,c.K,c.v,c.w,S.c,at.a,c.u,c.x,k.p,O.s,c.p,c.F,w.b,c.d,c.B,Re.a,Re.c,Re.g,Re.h,w.d,R.b,wt.g,wt.d,It.a,wt.c,k.l,_.a,et.a,O.w,I.c,j.a,S.f,S.j,Js.a,Rs.a,Ts.a,N.a,G.o,H.a,G.c,G.i,G.b,G.k,G.n,Rt.a,G.h,H.b,G.a,G.j,G.m,o.d,kt.b],pipes:[h.d,T.a],styles:[".mat-list-item[draggable=false][_ngcontent-%COMP%]:hover{background:inherit}.mat-list-item[draggable=false][_ngcontent-%COMP%]{cursor:not-allowed!important}.mat-list-item[draggable=true][_ngcontent-%COMP%]{cursor:pointer}.mat-list-item[draggable=true][_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:move}"]}),t})(),ir=(()=>{class t{constructor(t,e,i,a){this.translate=t,this.http=e,this.data=i,this.dialogRef=a,console.log(this.data.entity.redirectEntity)}setRedirectEntity(t){this.data.entity.redirectEntity=t.id}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(z.a),p.Qb(z.h))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],decls:17,vars:17,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["role","alert",1,"alert-message","alert-message-info"],[4,"ngIf"],["singleMode","","required","",3,"labelPlaceholder","labelList","routeDatas","targetSearchKey","subInfoKey","triggerEvent"],[1,"divider-modal"],["mat-raised-button","","color","warn","type","submit",1,"btn","btn-danger",3,"disabled","click"],["color","primary","mat-list-icon","",1,"fa","fa-file","fa-2x"],["mat-line",""],["color","primary","mat-list-icon","",1,"fa","fa-sitemap","fa-2x"],["color","primary","mat-list-icon","",1,"fa","fa-user","fa-2x"],["color","primary","mat-list-icon","",1,"fa","fa-file-alt","fa-2x"]],template:function(t,e){1&t&&(p.Wb(0,"div",0),p.Wb(1,"h2",1),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"mat-dialog-content"),p.Wb(5,"div",2),p.Wb(6,"mat-list"),p.Oc(7,Kc,11,8,"mat-list-item",3),p.Oc(8,Jc,11,8,"mat-list-item",3),p.Oc(9,Yc,13,12,"mat-list-item",3),p.Oc(10,Zc,13,12,"mat-list-item",3),p.Vb(),p.Vb(),p.Wb(11,"plugin-autocomplete",4),p.dc("triggerEvent",(function(t){return e.setRedirectEntity(t)})),p.Vb(),p.Vb(),p.Rb(12,"span",5),p.Wb(13,"mat-dialog-actions"),p.Wb(14,"button",6),p.dc("click",(function(){return e.dialogRef.close(e.data.entity)})),p.Qc(15),p.ic(16,"translate"),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(2),p.Rc(p.jc(3,12,"lang.entityReplacement")),p.Db(5),p.oc("ngIf",e.data.entity.documents>0),p.Db(1),p.oc("ngIf",e.data.entity.instances>0),p.Db(1),p.oc("ngIf",e.data.entity.users.length>0),p.Db(1),p.oc("ngIf",e.data.entity.templates.length>0),p.Db(1),p.oc("labelPlaceholder",e.translate.instant("lang.chooseEntity"))("labelList",e.translate.instant("lang.availableEntities"))("routeDatas",p.uc(16,tr))("targetSearchKey","idToDisplay")("subInfoKey","descriptionToDisplay"),p.Db(3),p.oc("disabled",void 0===e.data.entity.redirectEntity||e.data.entity.redirectEntity==e.data.entity.entity_id),p.Db(1),p.Rc(p.jc(16,14,"lang.delete")))},directives:[z.i,z.f,wt.a,O.t,Rt.a,z.c,R.b,wt.d,It.a,wt.c,k.l],pipes:[h.d,O.p],styles:[".alert-message[_ngcontent-%COMP%] { max-width: inherit; }"]}),t})();const ar=["adminMenuTemplate"];function nr(t,e){1&t&&(p.Wb(0,"mat-nav-list"),p.Wb(1,"h3",11),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"a",12),p.Rb(5,"mat-icon",13),p.Wb(6,"p",14),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(2),p.Rc(p.jc(3,2,"lang.actions")),p.Db(5),p.Sc(" ",p.jc(8,4,"lang.add")," "))}function or(t,e){1&t&&(p.Wb(0,"div",15),p.Rb(1,"mat-spinner",16),p.Vb())}function sr(t,e){1&t&&(p.Wb(0,"mat-header-cell"),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.imgRelated")))}function cr(t,e){if(1&t&&p.Rb(0,"mat-icon",41),2&t){const t=p.hc().$implicit;p.Gb("fm ",t.img_filename," fm-2x")}}function rr(t,e){if(1&t&&p.Rb(0,"mat-icon",41),2&t){const t=p.hc().$implicit;p.Gb("fa ",t.img_filename," fa-2x")}}function lr(t,e){if(1&t&&(p.Wb(0,"mat-cell",39),p.Oc(1,cr,1,3,"mat-icon",40),p.Oc(2,rr,1,3,"mat-icon",40),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.oc("ngIf",0==t.img_filename.indexOf("fm")),p.Db(1),p.oc("ngIf",0==t.img_filename.indexOf("fa"))}}function dr(t,e){if(1&t&&(p.Wb(0,"mat-header-cell",42),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=p.hc(2);p.Ib("hide-for-mobile",t.appService.getViewMode()),p.Db(1),p.Rc(p.jc(2,3,"lang.id"))}}function br(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.Ib("hide-for-mobile",i.appService.getViewMode()),p.Db(1),p.Sc(" ",t.id," ")}}function pr(t,e){1&t&&(p.Wb(0,"mat-header-cell",42),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.statusName")))}function hr(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.label_status," ")}}function ur(t,e){1&t&&p.Rb(0,"mat-header-cell")}function mr(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-cell",43),p.Wb(1,"button",44),p.dc("click",(function(i){p.Dc(t);const a=e.$implicit,n=p.hc(2);return i.stopPropagation(),n.deleteStatus(a)})),p.ic(2,"translate"),p.Rb(3,"mat-icon",45),p.Vb(),p.Vb()}2&t&&(p.Db(1),p.pc("matTooltip",p.jc(2,1,"lang.delete")))}function fr(t,e){1&t&&p.Rb(0,"mat-header-row")}function gr(t,e){1&t&&(p.Rb(0,"mat-row",46),p.ic(1,"translate")),2&t&&(p.qc("routerLink","/administration/statuses/",e.$implicit.identifier,""),p.pc("matTooltip",p.jc(1,2,"lang.view")))}function vr(t,e){if(1&t&&(p.Wb(0,"mat-card",17),p.Wb(1,"div",18),p.Wb(2,"div",19),p.Wb(3,"mat-form-field"),p.Rb(4,"input",20),p.ic(5,"translate"),p.Vb(),p.Vb(),p.Wb(6,"div",19),p.Rb(7,"mat-paginator",21,22),p.Vb(),p.Vb(),p.Wb(9,"mat-table",23,24),p.Ub(11,25),p.Oc(12,sr,3,3,"mat-header-cell",26),p.Oc(13,lr,3,2,"mat-cell",27),p.Tb(),p.Ub(14,28),p.Oc(15,dr,3,5,"mat-header-cell",29),p.Oc(16,br,2,3,"mat-cell",30),p.Tb(),p.Ub(17,31),p.Oc(18,pr,3,3,"mat-header-cell",32),p.Oc(19,hr,2,1,"mat-cell",33),p.Tb(),p.Ub(20,34),p.Oc(21,ur,1,0,"mat-header-cell",26),p.Oc(22,mr,4,3,"mat-cell",35),p.Tb(),p.Oc(23,fr,1,0,"mat-header-row",36),p.Oc(24,gr,2,4,"mat-row",37),p.Vb(),p.Wb(25,"div",38),p.Qc(26),p.ic(27,"translate"),p.Vb(),p.Vb()),2&t){const t=p.hc();p.Db(4),p.pc("placeholder",p.jc(5,10,"lang.filterBy")),p.oc("formControl",t.adminService.getFilterField()),p.Db(3),p.oc("length",100)("hidePageSize",!0)("pageSize",10),p.Db(2),p.oc("dataSource",t.adminService.getDataSource()),p.Db(14),p.oc("matHeaderRowDef",t.displayedColumns),p.Db(1),p.oc("matRowDefColumns",t.displayedColumns),p.Db(2),p.Tc(" ",t.statuses.length," ",p.jc(27,12,"lang.statuses"),"")}}let yr=(()=>{class t{constructor(t,e,i,a,n,o,s,c){this.translate=t,this.http=e,this.notify=i,this.headerService=a,this.appService=n,this.functions=o,this.adminService=s,this.viewContainerRef=c,this.loading=!1,this.statuses=[],this.displayedColumns=["img_filename","id","label_status","identifier"],this.filterColumns=["id","label_status"]}ngOnInit(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.statuses")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/statuses").subscribe(t=>{this.statuses=t.statuses,this.loading=!1,setTimeout(()=>{this.adminService.setDataSource("admin_status",this.statuses,this.sort,this.paginator,this.filterColumns)},0)},t=>{this.notify.error(t.error.errors)})}deleteStatus(t){confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+t.id+" \xbb")&&this.http.delete("../rest/statuses/"+t.identifier).subscribe(t=>{this.statuses=t.statuses,this.adminService.setDataSource("admin_status",this.statuses,this.sort,this.paginator,this.filterColumns),this.notify.success(this.translate.instant("lang.statusDeleted"))},t=>{this.notify.error(t.error.errors)})}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a),p.Qb(D.a),p.Qb(St),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(ar,!0),p.Xc(N.a,!0),p.Xc(H.a,!0)),2&t&&(p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.paginator=i.first),p.yc(i=p.ec())&&(e.sort=i.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/statuses/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","img_filename"],[4,"matHeaderCellDef"],["color","primary",4,"matCellDef"],["matColumnDef","id"],["mat-sort-header","",3,"hide-for-mobile",4,"matHeaderCellDef"],[3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","label_status"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","identifier"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["color","primary"],["aria-hidden","true",3,"class",4,"ngIf"],["aria-hidden","true"],["mat-sort-header",""],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,nr,9,6,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,or,2,0,"div",9),p.Oc(14,vr,28,14,"mat-card",10),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading))},directives:[C.e,C.f,M.a,x.a,O.t,wt.h,wt.g,wt.d,o.f,It.a,wt.c,k.l,I.c,j.a,S.c,w.b,c.d,c.u,c.j,N.a,G.o,H.a,G.c,G.i,G.b,G.k,G.n,G.h,G.a,H.b,R.b,kt.b,G.j,G.m,o.d],pipes:[h.d],encapsulation:2}),t})();function Dr(t,e){1&t&&(p.Wb(0,"div",10),p.Rb(1,"mat-spinner",11),p.Vb())}function Vr(t,e){if(1&t){const t=p.Xb();p.Wb(0,"input",31),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).status.id=e}))("blur",(function(){return p.Dc(t),p.hc(2).isAvailable()})),p.ic(1,"translate"),p.ic(2,"translate"),p.Vb()}if(2&t){const t=p.hc(2);p.pc("title",p.jc(1,4,"lang.id")),p.pc("placeholder",p.jc(2,6,"lang.id")),p.oc("formControl",t.statusId)("ngModel",t.status.id)}}function Cr(t,e){if(1&t){const t=p.Xb();p.Wb(0,"input",32),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).status.id=e})),p.ic(1,"translate"),p.ic(2,"translate"),p.Vb()}if(2&t){const t=p.hc(2);p.pc("title",p.jc(1,3,"lang.id")),p.pc("placeholder",p.jc(2,5,"lang.id")),p.oc("ngModel",t.status.id)}}function Mr(t,e){if(1&t&&(p.Wb(0,"mat-error"),p.Qc(1),p.Vb()),2&t){const t=p.hc(2);p.Db(1),p.Rc(t.getErrorMessage())}}const Wr=function(t){return[t]};function xr(t,e){if(1&t&&(p.Wb(0,"mat-option",33),p.Rb(1,"i",34),p.Qc(2),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t.image_name),p.Db(1),p.Fb(t.image_name),p.oc("ngClass",p.vc(6,Wr,0==t.image_name.indexOf("fm")?"fm":"fa")),p.Db(1),p.Sc(" ",t.image_name," ")}}function Or(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-card",12),p.Wb(1,"form",13,14),p.dc("ngSubmit",(function(){return p.Dc(t),p.hc().submitStatus()})),p.Wb(3,"div",15),p.Wb(4,"div",16),p.Wb(5,"mat-form-field"),p.Oc(6,Vr,3,8,"input",17),p.Oc(7,Cr,3,7,"input",18),p.Oc(8,Mr,2,1,"mat-error",19),p.Vb(),p.Vb(),p.Vb(),p.Wb(9,"div",15),p.Wb(10,"div",16),p.Wb(11,"mat-form-field"),p.Wb(12,"input",20),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().status.label_status=e})),p.ic(13,"translate"),p.ic(14,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(15,"div",15),p.Wb(16,"div",21),p.Wb(17,"mat-slide-toggle",22),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().status.can_be_searched=e})),p.ic(18,"translate"),p.Qc(19),p.ic(20,"translate"),p.Vb(),p.Vb(),p.Wb(21,"div",21),p.Wb(22,"mat-slide-toggle",23),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().status.can_be_modified=e})),p.ic(23,"translate"),p.Qc(24),p.ic(25,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(26,"div",15),p.Wb(27,"div",24),p.Rb(28,"mat-icon",25),p.Vb(),p.Wb(29,"div",26),p.Wb(30,"mat-form-field"),p.Wb(31,"mat-select",27),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().status.img_filename=e})),p.ic(32,"translate"),p.Oc(33,xr,3,8,"mat-option",28),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(34,"div",15),p.Wb(35,"div",29),p.Wb(36,"button",30),p.Qc(37),p.ic(38,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.zc(2),e=p.hc();p.Db(6),p.oc("ngIf",e.creationMode),p.Db(1),p.oc("ngIf",!e.creationMode),p.Db(1),p.oc("ngIf",e.statusId.invalid),p.Db(4),p.pc("title",p.jc(13,23,"lang.label")),p.pc("placeholder",p.jc(14,25,"lang.label")),p.oc("ngModel",e.status.label_status),p.Db(5),p.pc("matTooltip",p.jc(18,27,"lang.tooltipSearchStatus")),p.oc("ngModel",e.status.can_be_searched)("checked",1==e.status.can_be_searched),p.Db(2),p.Sc(" ",p.jc(20,29,"lang.canBeSearched")," "),p.Db(3),p.pc("matTooltip",p.jc(23,31,"lang.tooltipIndexStatus")),p.oc("ngModel",e.status.can_be_modified)("checked",1==e.status.can_be_modified),p.Db(2),p.Sc(" ",p.jc(25,33,"lang.canBeModified")," "),p.Db(4),p.Fb(e.status.img_filename),p.oc("ngClass",p.vc(39,Wr,0==e.status.img_filename.indexOf("fm")?"fm fm-2x":"fa fa-2x")),p.Db(3),p.pc("placeholder",p.jc(32,35,"lang.imgRelated")),p.oc("ngModel",e.status.img_filename),p.Db(2),p.oc("ngForOf",e.statusImages),p.Db(3),p.oc("disabled",!t.form.valid),p.Db(1),p.Rc(p.jc(38,37,"lang.save"))}}let _r=(()=>{class t{constructor(t,e,i,a,n,o,s){this.translate=t,this.http=e,this.route=i,this.router=a,this.notify=n,this.headerService=o,this.appService=s,this.status={id:null,label_status:null,can_be_searched:null,can_be_modified:null,img_filename:"fm-letter"},this.statusImages="",this.loading=!1,this.statusId=new c.i("",[c.I.required,c.I.pattern(/^[\w.-]*$/)])}getErrorMessage(){return this.statusId.hasError("required")?this.translate.instant("lang.enterValue"):this.statusId.hasError("pattern")?this.translate.instant("lang.patternId"):""}ngOnInit(){this.loading=!0,this.route.params.subscribe(t=>{void 0===t.identifier?(this.headerService.setHeader(this.translate.instant("lang.statusCreation")),this.http.get("../rest/administration/statuses/new").subscribe(t=>{this.status.img_filename="fm-letter",this.status.can_be_searched=!0,this.status.can_be_modified=!0,this.statusImages=t.statusImages,this.creationMode=!0,this.loading=!1}),this.statusIdAvailable=!1):(this.creationMode=!1,this.statusIdentifier=t.identifier,this.http.get("../rest/statuses/"+t.identifier).subscribe(t=>{this.status=t.status[0],this.headerService.setHeader(this.translate.instant("lang.statusModification"),this.status.label_status),this.status.can_be_searched="Y"===this.status.can_be_searched,this.status.can_be_modified="Y"===this.status.can_be_modified,this.statusImages=t.statusImages,this.statusIdAvailable=!0,this.loading=!1},t=>{this.notify.error(t.error.errors)}))})}isAvailable(){this.status.id?this.http.get("../rest/status/"+this.status.id).subscribe(()=>{this.statusIdAvailable=!1},t=>{this.statusIdAvailable=!1,"id not found"===t.error.errors&&(this.statusIdAvailable=!0)}):this.statusIdAvailable=!1}submitStatus(){!0===this.creationMode?this.http.post("../rest/statuses",this.status).subscribe(()=>{this.notify.success(this.translate.instant("lang.statusAdded")),this.router.navigate(["administration/statuses"])},t=>{this.notify.error(t.error.errors)}):!1===this.creationMode&&this.http.put("../rest/statuses/"+this.statusIdentifier,this.status).subscribe(()=>{this.notify.success(this.translate.instant("lang.statusUpdated")),this.router.navigate(["administration/statuses"])},t=>{this.notify.error(t.error.errors)})}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(o.a),p.Qb(o.c),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],decls:13,vars:8,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"form-horizontal",3,"ngSubmit"],["statusFormUp","ngForm"],[1,"form-group"],[1,"col-sm-12"],["matInput","","maxlength","10","name","id","id","id","type","text","pattern","^[\\w.-]*$","required","",3,"formControl","ngModel","title","placeholder","ngModelChange","blur",4,"ngIf"],["matInput","","maxlength","10","name","id","id","id","required","","disabled","",3,"ngModel","title","placeholder","ngModelChange",4,"ngIf"],[4,"ngIf"],["matInput","","name","label_status","id","label_status","maxlength","50","type","text","required","",3,"ngModel","title","placeholder","ngModelChange"],[1,"col-sm-6",2,"white-space","nowrap","text-align","center"],["id","can_be_search","name","can_be_search","color","primary",3,"matTooltip","ngModel","checked","ngModelChange"],["id","can_be_modified","name","can_be_modified","color","primary",3,"matTooltip","ngModel","checked","ngModelChange"],[1,"col-sm-1",2,"text-align","right"],["aria-hidden","true","color","primary",3,"ngClass"],[1,"col-sm-11"],["id","status","name","status","required","",3,"ngModel","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-12",2,"text-align","center"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["matInput","","maxlength","10","name","id","id","id","type","text","pattern","^[\\w.-]*$","required","",3,"formControl","ngModel","title","placeholder","ngModelChange","blur"],["matInput","","maxlength","10","name","id","id","id","required","","disabled","",3,"ngModel","title","placeholder","ngModelChange"],[3,"value"],["color","primary",3,"ngClass"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Wb(1,"mat-sidenav-content"),p.Wb(2,"div",1),p.Wb(3,"div",2),p.Wb(4,"div",3),p.Rb(5,"header-left"),p.Vb(),p.Wb(6,"div",4),p.Rb(7,"header-right"),p.Vb(),p.Vb(),p.Rb(8,"div",5),p.Vb(),p.Wb(9,"div",6),p.Wb(10,"div",7),p.Oc(11,Dr,2,0,"div",8),p.Oc(12,Or,39,41,"mat-card",9),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(3),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading))},directives:[C.e,C.f,M.a,x.a,O.t,I.c,j.a,c.K,c.v,c.w,S.c,w.b,c.d,c.p,c.F,c.u,c.x,et.a,kt.b,It.a,O.q,at.a,O.s,R.b,c.B,c.j,S.b,k.p],pipes:[h.d],encapsulation:2}),t})();const Sr=["snav2"],wr=["adminMenuTemplate"];function Ir(t,e){1&t&&(p.Wb(0,"mat-nav-list"),p.Wb(1,"h3",11),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"a",12),p.Rb(5,"mat-icon",13),p.Wb(6,"p",14),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(2),p.Rc(p.jc(3,2,"lang.actions")),p.Db(5),p.Sc(" ",p.jc(8,4,"lang.add")," "))}function jr(t,e){1&t&&(p.Wb(0,"div",15),p.Rb(1,"mat-spinner",16),p.Vb())}function kr(t,e){if(1&t&&(p.Wb(0,"mat-header-cell",38),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=p.hc(2);p.Ib("hide-for-mobile",t.appService.getViewMode()),p.Db(1),p.Rc(p.jc(2,3,"lang.id"))}}function Rr(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.Ib("hide-for-mobile",i.appService.getViewMode()),p.Db(1),p.Sc(" ",t.id," ")}}function Tr(t,e){1&t&&(p.Wb(0,"mat-header-cell",38),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.actionName")))}function Pr(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.label_action," ")}}function Qr(t,e){if(1&t&&(p.Wb(0,"mat-header-cell",38),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=p.hc(2);p.Ib("hide-for-mobile",t.appService.getViewMode()),p.Db(1),p.Sc("",p.jc(2,3,"lang.actionHistory")," ")}}function Fr(t,e){1&t&&(p.Wb(0,"span"),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc(" ",p.jc(2,1,"lang.no")," "))}function Lr(t,e){1&t&&(p.Wb(0,"span"),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc(" ",p.jc(2,1,"lang.yes")," "))}function Er(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Oc(1,Fr,3,3,"span",39),p.Oc(2,Lr,3,3,"span",39),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.Ib("hide-for-mobile",i.appService.getViewMode()),p.Db(1),p.oc("ngIf","N"==t.history),p.Db(1),p.oc("ngIf","Y"==t.history)}}function Ar(t,e){1&t&&p.Rb(0,"mat-header-cell")}function Ur(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-cell",40),p.Wb(1,"button",41),p.dc("click",(function(i){p.Dc(t);const a=e.$implicit,n=p.hc(2);return i.stopPropagation(),n.deleteAction(a)})),p.ic(2,"translate"),p.Rb(3,"mat-icon",42),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit;p.Db(1),p.pc("matTooltip",p.jc(2,2,"lang.delete")),p.oc("disabled","Y"==t.is_system)}}function $r(t,e){1&t&&p.Rb(0,"mat-header-row")}function zr(t,e){1&t&&(p.Rb(0,"mat-row",43),p.ic(1,"translate")),2&t&&(p.qc("routerLink","/administration/actions/",e.$implicit.id,""),p.pc("matTooltip",p.jc(1,2,"lang.view")))}function Nr(t,e){if(1&t&&(p.Wb(0,"mat-card",17),p.Wb(1,"div",18),p.Wb(2,"div",19),p.Wb(3,"mat-form-field"),p.Rb(4,"input",20),p.ic(5,"translate"),p.Vb(),p.Vb(),p.Wb(6,"div",19),p.Rb(7,"mat-paginator",21,22),p.Vb(),p.Vb(),p.Wb(9,"mat-table",23,24),p.Ub(11,25),p.Oc(12,kr,3,5,"mat-header-cell",26),p.Oc(13,Rr,2,3,"mat-cell",27),p.Tb(),p.Ub(14,28),p.Oc(15,Tr,3,3,"mat-header-cell",29),p.Oc(16,Pr,2,1,"mat-cell",30),p.Tb(),p.Ub(17,31),p.Oc(18,Qr,3,5,"mat-header-cell",26),p.Oc(19,Er,3,4,"mat-cell",27),p.Tb(),p.Ub(20,32),p.Oc(21,Ar,1,0,"mat-header-cell",33),p.Oc(22,Ur,4,4,"mat-cell",34),p.Tb(),p.Oc(23,$r,1,0,"mat-header-row",35),p.Oc(24,zr,2,4,"mat-row",36),p.Vb(),p.Wb(25,"div",37),p.Qc(26),p.ic(27,"translate"),p.Vb(),p.Vb()),2&t){const t=p.hc();p.Db(4),p.pc("placeholder",p.jc(5,10,"lang.filterBy")),p.oc("formControl",t.adminService.getFilterField()),p.Db(3),p.oc("length",100)("hidePageSize",!0)("pageSize",10),p.Db(2),p.oc("dataSource",t.adminService.getDataSource()),p.Db(14),p.oc("matHeaderRowDef",t.displayedColumns),p.Db(1),p.oc("matRowDefColumns",t.displayedColumns),p.Db(2),p.Tc(" ",t.actions.length," ",p.jc(27,12,"lang.actions"),"")}}let Hr=(()=>{class t{constructor(t,e,i,a,n,o,s,c){this.translate=t,this.http=e,this.notify=i,this.headerService=a,this.appService=n,this.adminService=o,this.functions=s,this.viewContainerRef=c,this.search=null,this.actions=[],this.titles=[],this.loading=!1,this.displayedColumns=["id","label_action","history","actions"],this.filterColumns=["id","label_action"]}ngOnInit(){this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/actions").subscribe(t=>{this.actions=t.actions,this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.actions")),this.loading=!1,setTimeout(()=>{this.adminService.setDataSource("admin_actions",this.actions,this.sort,this.paginator,this.filterColumns)},0)},t=>{this.notify.handleErrors(t)})}deleteAction(t){confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+t.label_action+" \xbb")&&this.http.delete("../rest/actions/"+t.id).subscribe(t=>{this.actions=t.actions,this.adminService.setDataSource("admin_actions",this.actions,this.sort,this.paginator,this.filterColumns),this.notify.success(this.translate.instant("lang.actionDeleted"))},t=>{this.notify.error(t.error.errors)})}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a),p.Qb(St),p.Qb(D.a),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(Sr,!0),p.Kc(wr,!0),p.Xc(N.a,!0),p.Xc(H.a,!0)),2&t&&(p.yc(i=p.ec())&&(e.sidenavRight=i.first),p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.paginator=i.first),p.yc(i=p.ec())&&(e.sort=i.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/actions/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"placeholder","formControl"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","id"],["mat-sort-header","",3,"hide-for-mobile",4,"matHeaderCellDef"],[3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","label_action"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","history"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header",""],[4,"ngIf"],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"disabled","matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,Ir,9,6,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,jr,2,0,"div",9),p.Oc(14,Nr,28,14,"mat-card",10),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading))},directives:[C.e,C.f,M.a,x.a,O.t,wt.h,wt.g,wt.d,o.f,It.a,wt.c,k.l,I.c,j.a,S.c,w.b,c.d,c.u,c.j,N.a,G.o,H.a,G.c,G.i,G.b,G.k,G.n,G.h,H.b,G.a,R.b,kt.b,G.j,G.m,o.d],pipes:[h.d],encapsulation:2}),t})();var Br=i("fBaO");const Xr=["snav2"];function Gr(t,e){1&t&&(p.Wb(0,"div",10),p.Rb(1,"mat-spinner",11),p.Vb())}function qr(t,e){1&t&&(p.Wb(0,"div",28),p.Wb(1,"b"),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Qc(4),p.ic(5,"translate"),p.Vb()),2&t&&(p.Db(2),p.Sc("",p.jc(3,2,"lang.isSytemAction")," !"),p.Db(2),p.Sc(" ",p.jc(5,4,"lang.doNotModifyUnlessExpert")," "))}function Kr(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-chip",32),p.dc("removed",(function(){p.Dc(t);const i=e.index;return p.hc(3).removeSelectedFields(i)})),p.Qc(1),p.Rb(2,"mat-icon",33),p.Vb()}if(2&t){const t=e.$implicit;p.oc("removable",!0),p.Db(1),p.Sc(" ",t," ")}}function Jr(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",16),p.Wb(1,"div",17),p.Wb(2,"plugin-select-search",29),p.dc("afterSelected",(function(){return p.Dc(t),p.hc(2).getSelectedFields()})),p.Vb(),p.Wb(3,"mat-chip-list",30),p.Oc(4,Kr,3,2,"mat-chip",31),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.Db(2),p.Fb(""),p.oc("showLabel",!0)("label",t.translate.instant("lang.checkEmptyFields"))("placeholderLabel",t.translate.instant("lang.checkEmptyFields"))("formControlSelect",t.customFieldsFormControl)("datas",t.availableCustomFields),p.Db(2),p.oc("ngForOf",t.selectedFieldsValue)}}function Yr(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",16),p.Wb(1,"div",17),p.Wb(2,"mat-form-field"),p.Wb(3,"mat-select",34),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).arMode=e})),p.ic(4,"translate"),p.ic(5,"translate"),p.Wb(6,"mat-option",35),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Wb(9,"mat-option",36),p.Qc(10),p.ic(11,"translate"),p.Vb(),p.Wb(12,"mat-option",37),p.Qc(13),p.ic(14,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.Db(3),p.pc("title",p.jc(4,7,"lang.generateARMode")),p.pc("placeholder",p.jc(5,9,"lang.generateARMode")),p.oc("required","create_acknowledgement_receipt"==t.action.actionPageId)("ngModel",t.arMode),p.Db(4),p.Rc(p.jc(8,11,"lang.autoAR")),p.Db(3),p.Rc(p.jc(11,13,"lang.manualAR")),p.Db(3),p.Rc(p.jc(14,15,"lang.bothAR"))}}function Zr(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",16),p.Wb(1,"div",17),p.Wb(2,"plugin-select-search",29),p.dc("afterSelected",(function(){p.Dc(t);const e=p.hc(2);return e.action.id_status=e.selectStatusId.value})),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.Db(2),p.Fb(""),p.oc("showLabel",!0)("label",t.translate.instant("lang.associatedStatus"))("placeholderLabel",t.translate.instant("lang.associatedStatus"))("formControlSelect",t.selectStatusId)("datas",t.statuses)}}function tl(t,e){if(1&t&&(p.Wb(0,"mat-option",38),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t.value),p.Db(1),p.Sc(" ",t.label," ")}}function el(t,e){if(1&t&&(p.Wb(0,"mat-option",39),p.Qc(1),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.oc("value",t.id)("disabled","registeredMail"!==t.id&&"registeredMail"===i.action.actionPageGroup),p.Db(1),p.Sc(" ",t.label," ")}}function il(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-card",12),p.Oc(1,qr,6,6,"div",13),p.Wb(2,"form",14,15),p.dc("ngSubmit",(function(){return p.Dc(t),p.hc().onSubmit()})),p.Wb(4,"div",16),p.Wb(5,"div",17),p.Wb(6,"mat-form-field"),p.Wb(7,"input",18),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().action.label_action=e})),p.ic(8,"translate"),p.ic(9,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(10,"div",16),p.Wb(11,"div",17),p.Wb(12,"plugin-select-search",19),p.dc("afterSelected",(function(){return p.Dc(t),p.hc().getCustomFields()})),p.Vb(),p.Vb(),p.Vb(),p.Oc(13,Jr,5,8,"div",20),p.Oc(14,Yr,15,17,"div",20),p.Oc(15,Zr,3,7,"div",20),p.Wb(16,"div",16),p.Wb(17,"div",17),p.Wb(18,"mat-form-field"),p.Wb(19,"mat-select",21),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().action.keyword=e})),p.ic(20,"translate"),p.ic(21,"translate"),p.Oc(22,tl,2,2,"mat-option",22),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(23,"div",16),p.Wb(24,"div",23),p.Wb(25,"mat-slide-toggle",24),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().action.history=e})),p.ic(26,"translate"),p.Qc(27),p.ic(28,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(29,"div",16),p.Wb(30,"div",17),p.Wb(31,"mat-form-field"),p.Wb(32,"mat-select",25),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().action.actionCategories=e})),p.ic(33,"translate"),p.ic(34,"translate"),p.Oc(35,el,2,3,"mat-option",26),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(36,"div",16),p.Wb(37,"div",23),p.Wb(38,"button",27),p.Qc(39),p.ic(40,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.zc(3),e=p.hc();p.Db(1),p.oc("ngIf",1==e.action.is_system),p.Db(6),p.pc("title",p.jc(8,30,"lang.label")),p.pc("placeholder",p.jc(9,32,"lang.label")),p.oc("ngModel",e.action.label_action),p.Db(5),p.Fb(""),p.oc("showLabel",!0)("label",e.translate.instant("lang.actionCarriedOut"))("placeholderLabel",e.translate.instant("lang.actionCarriedOut"))("formControlSelect",e.selectActionPageId)("datas",e.actionPages)("optGroupList",e.group)("optGroupTarget","category"),p.Db(1),p.oc("ngIf",!e.functions.empty(e.availableCustomFields)&&"close_mail"==e.action.actionPageId),p.Db(1),p.oc("ngIf","create_acknowledgement_receipt"==e.action.actionPageId),p.Db(1),p.oc("ngIf","reconcile"!=e.action.actionPageId),p.Db(4),p.pc("title",p.jc(20,34,"lang.keyword")),p.pc("placeholder",p.jc(21,36,"lang.keyword")),p.oc("ngModel",e.action.keyword),p.Db(3),p.oc("ngForOf",e.keywordsList),p.Db(3),p.pc("title",p.jc(26,38,"lang.actionHistoryDesc")),p.oc("ngModel",e.action.history)("checked","Y"==e.action.history),p.Db(2),p.Sc(" ",p.jc(28,40,"lang.actionHistory"),""),p.Db(5),p.pc("title",p.jc(33,42,"lang.chooseCategoryAssociation")),p.pc("placeholder",p.jc(34,44,"lang.chooseCategoryAssociation")),p.oc("ngModel",e.action.actionCategories),p.Db(3),p.oc("ngForOf",e.categoriesList),p.Db(3),p.oc("disabled",!t.form.valid),p.Db(1),p.Rc(p.jc(40,46,"lang.save"))}}let al=(()=>{class t{constructor(t,e,i,a,n,o,s,r){this.translate=t,this.http=e,this.route=i,this.router=a,this.notify=n,this.headerService=o,this.appService=s,this.functions=r,this.action={},this.statuses=[],this.actionPages=[],this.categoriesList=[],this.keywordsList=[],this.group=[],this.loading=!1,this.availableCustomFields=[],this.customFieldsFormControl=new c.i({value:"",disabled:!1}),this.selectedFieldsValue=[],this.selectedFieldsId=[],this.selectActionPageId=new c.i,this.selectStatusId=new c.i}ngOnInit(){this.loading=!0,this.route.params.subscribe(t=>{void 0===t.id?(this.creationMode=!0,this.http.get("../rest/initAction").subscribe(t=>{this.action=t.action,this.selectActionPageId.setValue(this.action.actionPageId),this.selectStatusId.setValue(this.action.id_status),this.categoriesList=t.categoriesList,this.statuses=t.statuses.map(t=>({id:t.id,label:t.label_status})),this.actionPages=t.actionPages,this.actionPages.map(t=>t.category).filter((t,e,i)=>i.indexOf(t)===e).forEach(t=>{this.group.push({id:t,label:this.translate.instant("lang."+t)})}),this.keywordsList=t.keywordsList,this.headerService.setHeader(this.translate.instant("lang.actionCreation")),this.loading=!1})):(this.creationMode=!1,this.http.get("../rest/actions/"+t.id).subscribe(t=>Object(gt.a)(this,void 0,void 0,(function*(){this.action=t.action,this.selectActionPageId.setValue(this.action.actionPageId),this.selectStatusId.setValue(this.action.id_status),this.categoriesList=t.categoriesList,this.statuses=t.statuses.map(t=>({id:t.id,label:t.label_status})),this.actionPages=t.actionPages,this.actionPages.map(t=>t.category).filter((t,e,i)=>i.indexOf(t)===e).forEach(t=>{this.group.push({id:t,label:this.translate.instant("lang."+t)})}),this.keywordsList=t.keywordsList,this.headerService.setHeader(this.translate.instant("lang.actionCreation"),t.action.label_action),yield this.getCustomFields(),this.loading=!1,"close_mail"===this.action.actionPageId?(this.customFieldsFormControl=new c.i({value:this.action.parameters.requiredFields,disabled:!1}),this.selectedFieldsId=[],this.action.parameters.requiredFields&&(this.selectedFieldsId=this.action.parameters.requiredFields),this.selectedFieldsId.forEach(t=>{this.availableCustomFields.forEach(e=>{e.id===t&&this.selectedFieldsValue.push(e.label)})})):"create_acknowledgement_receipt"===this.action.actionPageId&&(this.arMode=this.action.parameters.mode)}))))})}getCustomFields(){return this.action.actionPageId=this.selectActionPageId.value,this.action.actionPageGroup=this.actionPages.filter(t=>t.id===this.action.actionPageId)[0].category,"registeredMail"===this.action.actionPageGroup&&(this.action.actionCategories=["registeredMail"]),new Promise((t,e)=>{"close_mail"===this.action.actionPageId&&this.functions.empty(this.availableCustomFields)?this.http.get("../rest/customFields").pipe(Object(d.a)(e=>(this.availableCustomFields=e.customFields.map(t=>(t.id="indexingCustomField_"+t.id,t)),t(!0))),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe():t(!0)})}getSelectedFields(){this.availableCustomFields.forEach(t=>{t.id===this.customFieldsFormControl.value&&(this.selectedValue=t)}),this.selectedFieldsId.indexOf(this.customFieldsFormControl.value)<0&&(this.selectedFieldsValue.push(this.selectedValue.label),this.selectedFieldsId.push(this.customFieldsFormControl.value)),this.customFieldsFormControl.reset()}removeSelectedFields(t){this.selectedFieldsValue.splice(t,1),this.selectedFieldsId.splice(t,1)}onSubmit(){"close_mail"===this.action.actionPageId?this.action.parameters={requiredFields:this.selectedFieldsId}:"create_acknowledgement_receipt"===this.action.actionPageId&&(this.action.parameters={mode:this.arMode}),this.creationMode?this.http.post("../rest/actions",this.action).subscribe(()=>{this.router.navigate(["/administration/actions"]),this.notify.success(this.translate.instant("lang.actionAdded"))},t=>{this.notify.error(t.error.errors)}):this.http.put("../rest/actions/"+this.action.id,this.action).subscribe(()=>{this.router.navigate(["/administration/actions"]),this.notify.success(this.translate.instant("lang.actionUpdated"))},t=>{this.notify.error(t.error.errors)})}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(o.a),p.Qb(o.c),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a),p.Qb(D.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&p.Kc(Xr,!0),2&t&&p.yc(i=p.ec())&&(e.sidenavRight=i.first)},decls:13,vars:8,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"form-horizontal",3,"ngSubmit"],["actionsFormUp","ngForm"],[1,"form-group"],[1,"col-sm-12"],["matInput","","required","","name","action_name","id","action_name","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],[2,"width","100%",3,"showLabel","label","placeholderLabel","formControlSelect","datas","optGroupList","optGroupTarget","afterSelected"],["class","form-group",4,"ngIf"],["id","keyword","name","keyword",3,"title","placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-12",2,"text-align","center"],["name","history","id","history","color","primary",3,"title","ngModel","checked","ngModelChange"],["id","categorieslist","name","categorieslist","multiple","","required","",3,"title","placeholder","ngModel","ngModelChange"],[3,"value","disabled",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["role","alert",1,"alert","alert-danger"],[2,"width","100%",3,"showLabel","label","placeholderLabel","formControlSelect","datas","afterSelected"],[1,"checkbox-selected-list"],["selected","",3,"removable","removed",4,"ngFor","ngForOf"],["selected","",3,"removable","removed"],["matChipRemove","",1,"fa","fa-times-circle"],["id","generateARmode","name","generateARmode",3,"required","title","placeholder","ngModel","ngModelChange"],["value","auto"],["value","manual"],["value","both"],[3,"value"],[3,"value","disabled"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Wb(1,"mat-sidenav-content"),p.Wb(2,"div",1),p.Wb(3,"div",2),p.Wb(4,"div",3),p.Rb(5,"header-left"),p.Vb(),p.Wb(6,"div",4),p.Rb(7,"header-right"),p.Vb(),p.Vb(),p.Rb(8,"div",5),p.Vb(),p.Wb(9,"div",6),p.Wb(10,"div",7),p.Oc(11,Gr,2,0,"div",8),p.Oc(12,il,41,48,"mat-card",9),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(3),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading))},directives:[C.e,C.f,M.a,x.a,O.t,I.c,j.a,c.K,c.v,c.w,S.c,w.b,c.d,c.F,c.p,c.u,c.x,Br.a,at.a,O.s,et.a,R.b,Un.d,Un.a,It.a,Un.e,k.p],pipes:[h.d],encapsulation:2}),t})();function nl(t,e){1&t&&(p.Wb(0,"div",10),p.Rb(1,"mat-spinner",11),p.Vb())}function ol(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-form-field"),p.Wb(1,"input",27),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).parameter.param_value_string=e})),p.ic(2,"translate"),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.Db(1),p.pc("placeholder",p.jc(2,2,"lang.value")),p.oc("ngModel",t.parameter.param_value_string)}}function sl(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-form-field"),p.Wb(1,"input",28),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).parameter.param_value_int=e})),p.ic(2,"translate"),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.Db(1),p.pc("placeholder",p.jc(2,2,"lang.value")),p.oc("ngModel",t.parameter.param_value_int)}}function cl(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-form-field"),p.Wb(1,"input",29),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).parameter.param_value_date=e})),p.ic(2,"translate"),p.Vb(),p.Rb(3,"mat-datepicker-toggle",30),p.Rb(4,"mat-datepicker",31,32),p.Vb()}if(2&t){const t=p.zc(5),e=p.hc(2);p.Db(1),p.pc("placeholder",p.jc(2,4,"lang.date")),p.oc("ngModel",e.parameter.param_value_date)("matDatepicker",t),p.Db(2),p.oc("for",t)}}function rl(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-card",12),p.Wb(1,"form",13,14),p.dc("ngSubmit",(function(){return p.Dc(t),p.hc().onSubmit()})),p.Wb(3,"div",15),p.Wb(4,"div",16),p.Wb(5,"mat-form-field"),p.Wb(6,"input",17),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().parameter.id=e})),p.ic(7,"translate"),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(9,"div",15),p.Wb(10,"div",16),p.Wb(11,"mat-form-field"),p.Wb(12,"input",18),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().parameter.description=e})),p.ic(13,"translate"),p.ic(14,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(15,"div",15),p.Wb(16,"div",19),p.Wb(17,"mat-form-field"),p.Wb(18,"mat-select",20),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().type=e})),p.ic(19,"translate"),p.Wb(20,"mat-option",21),p.Qc(21),p.ic(22,"translate"),p.Vb(),p.Wb(23,"mat-option",22),p.Qc(24),p.ic(25,"translate"),p.Vb(),p.Wb(26,"mat-option",23),p.Qc(27),p.ic(28,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(29,"div",19),p.Oc(30,ol,3,4,"mat-form-field",24),p.Oc(31,sl,3,4,"mat-form-field",24),p.Oc(32,cl,6,6,"mat-form-field",24),p.Vb(),p.Vb(),p.Wb(33,"div",15),p.Wb(34,"div",25),p.Wb(35,"button",26),p.Qc(36),p.ic(37,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.zc(2),e=p.hc();p.Db(6),p.pc("title",p.jc(7,18,"lang.id")),p.pc("placeholder",p.jc(8,20,"lang.id")),p.oc("ngModel",e.parameter.id)("disabled",!e.creationMode),p.Db(6),p.pc("title",p.jc(13,22,"lang.description")),p.pc("placeholder",p.jc(14,24,"lang.description")),p.oc("ngModel",e.parameter.description),p.Db(6),p.pc("placeholder",p.jc(19,26,"lang.type")),p.oc("ngModel",e.type)("disabled",!e.creationMode),p.Db(3),p.Sc(" ",p.jc(22,28,"lang.stringInput")," "),p.Db(3),p.Sc(" ",p.jc(25,30,"lang.integer")," "),p.Db(3),p.Sc(" ",p.jc(28,32,"lang.date")," "),p.Db(3),p.oc("ngIf","string"==e.type),p.Db(1),p.oc("ngIf","int"==e.type),p.Db(1),p.oc("ngIf","date"==e.type),p.Db(3),p.oc("disabled",!t.form.valid),p.Db(1),p.Rc(p.jc(37,34,"lang.save"))}}let ll=(()=>{class t{constructor(t,e,i,a,n,o,s){this.translate=t,this.http=e,this.route=i,this.router=a,this.notify=n,this.headerService=o,this.appService=s,this.loading=!1,this.parameter={}}ngOnInit(){this.loading=!0,this.route.params.subscribe(t=>{void 0===t.id?(this.headerService.setHeader(this.translate.instant("lang.parameterCreation")),this.creationMode=!0,this.loading=!1):(this.creationMode=!1,this.http.get("../rest/parameters/"+t.id).subscribe(t=>{this.parameter=t.parameter,this.headerService.setHeader(this.translate.instant("lang.parameterModification"),this.parameter.id),this.type="number"==typeof this.parameter.param_value_int?"int":this.parameter.param_value_date?"date":"string",this.loading=!1},t=>{this.notify.handleErrors(t)}))})}onSubmit(){"date"===this.type?(this.parameter.param_value_int=null,this.parameter.param_value_string=null):"int"===this.type?(this.parameter.param_value_date=null,this.parameter.param_value_string=null):"string"===this.type&&(this.parameter.param_value_date=null,this.parameter.param_value_int=null),!0===this.creationMode?this.http.post("../rest/parameters",this.parameter).subscribe(()=>{this.router.navigate(["administration/parameters"]),this.notify.success(this.translate.instant("lang.parameterAdded"))},t=>{this.notify.error(t.error.errors)}):!1===this.creationMode&&this.http.put("../rest/parameters/"+this.parameter.id,this.parameter).subscribe(()=>{this.router.navigate(["administration/parameters"]),this.notify.success(this.translate.instant("lang.parameterUpdated"))},t=>{this.notify.error(t.error.errors)})}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(o.a),p.Qb(o.c),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],decls:13,vars:8,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"form-horizontal",3,"ngSubmit"],["parameterForm","ngForm"],[1,"form-group"],[1,"col-sm-12"],["matInput","","name","id","type","text","pattern","^[\\w-]*$","required","",3,"ngModel","disabled","title","placeholder","ngModelChange"],["matInput","","name","description","id","description","type","text",3,"ngModel","title","placeholder","ngModelChange"],[1,"col-sm-6"],["name","type","required","",3,"placeholder","ngModel","disabled","ngModelChange"],["value","string"],["value","int"],["value","date"],[4,"ngIf"],[1,"col-sm-12",2,"text-align","center"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["matInput","","name","paramValueString","type","text","required","",3,"ngModel","placeholder","ngModelChange"],["matInput","","name","paramValueInt","type","number","pattern","^[0-9]*$","required","",3,"ngModel","placeholder","ngModelChange"],["matInput","","name","paramValueDate","required","",3,"ngModel","matDatepicker","placeholder","ngModelChange"],["matSuffix","",3,"for"],["startView","month"],["picker",""]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Wb(1,"mat-sidenav-content"),p.Wb(2,"div",1),p.Wb(3,"div",2),p.Wb(4,"div",3),p.Rb(5,"header-left"),p.Vb(),p.Wb(6,"div",4),p.Rb(7,"header-right"),p.Vb(),p.Vb(),p.Rb(8,"div",5),p.Vb(),p.Wb(9,"div",6),p.Wb(10,"div",7),p.Oc(11,nl,2,0,"div",8),p.Oc(12,rl,38,36,"mat-card",9),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(3),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading))},directives:[C.e,C.f,M.a,x.a,O.t,I.c,j.a,c.K,c.v,c.w,S.c,w.b,c.d,c.B,c.F,c.u,c.x,at.a,k.p,R.b,c.A,Le.h,Le.j,S.j,Le.f],pipes:[h.d],encapsulation:2}),t})();var dl=i("Kj3r"),bl=i("jhN1");function pl(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-card",17),p.dc("click",(function(){p.Dc(t);const i=e.$implicit;return p.hc().selectBg(i.url)})),p.Vb()}if(2&t){const t=e.$implicit,i=p.hc();p.Lc("background","url("+t.url+")"),p.Ib("selected",t.url===i.stepFormGroup.controls.bodyImage.value)("disabled",i.stepFormGroup.controls.bodyImage.disabled)}}function hl(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-card",18),p.dc("click",(function(){return p.Dc(t),p.zc(2).click()})),p.Wb(1,"input",19,20),p.dc("change",(function(e){return p.Dc(t),p.hc().uploadTrigger(e,"bg")})),p.Vb(),p.Rb(3,"i",21),p.Vb()}}let ul=(()=>{class t{constructor(t,e,i,a,n,o){this.translate=t,this._formBuilder=e,this.notify=i,this.sanitizer=a,this.scanPipe=n,this.http=o,this.readonlyState=!1,this.backgroundList=[],c.I.pattern(/^[a-zA-Z0-9_\-]*$/),this.stepFormGroup=this._formBuilder.group({applicationName:["",c.I.required],loginpage_message:[""],homepage_message:[""],traffic_record_summary_sheet:[""],bodyImage:["../rest/images?image=loginPage"],logo:["../rest/images?image=logo"]}),this.backgroundList=Array.from({length:16}).map((t,e)=>({filename:e+1+".jpg",url:`assets/${e+1}.jpg`}))}ngOnInit(){return Object(gt.a)(this,void 0,void 0,(function*(){yield this.getParameters()}))}getParameters(){return new Promise(t=>{this.http.get("../rest/parameters").pipe(Object(d.a)(t=>{this.stepFormGroup.controls.homepage_message.setValue(t.parameters.filter(t=>"homepage_message"===t.id)[0].value),this.stepFormGroup.controls.loginpage_message.setValue(t.parameters.filter(t=>"loginpage_message"===t.id)[0].value),this.stepFormGroup.controls.traffic_record_summary_sheet.setValue(t.parameters.filter(t=>"traffic_record_summary_sheet"===t.id)[0].value)}),Object(J.a)(()=>this.http.get("../rest/authenticationInformations")),Object(d.a)(t=>{this.stepFormGroup.controls.applicationName.setValue(t.applicationName),setTimeout(()=>{this.stepFormGroup.controls.applicationName.valueChanges.pipe(Object(dl.a)(1e3),Object(d.a)(()=>this.saveParameter("applicationName"))).subscribe(),this.stepFormGroup.controls.homepage_message.valueChanges.pipe(Object(dl.a)(100),Object(d.a)(()=>this.saveParameter("homepage_message"))).subscribe(),this.stepFormGroup.controls.loginpage_message.valueChanges.pipe(Object(dl.a)(100),Object(d.a)(()=>this.saveParameter("loginpage_message"))).subscribe(),this.stepFormGroup.controls.traffic_record_summary_sheet.valueChanges.pipe(Object(dl.a)(100),Object(d.a)(()=>this.saveParameter("traffic_record_summary_sheet"))).subscribe(),this.initMce()},100)}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()})}isValidStep(){return void 0!==this.stepFormGroup&&this.stepFormGroup.valid}initMce(t=!1){let e={selector:"#loginpage_message",setup:t=>{t.on("Blur",t=>{this.stepFormGroup.controls[t.target.id].setValue(tinymce.get(t.target.id).getContent())})},base_url:"../node_modules/tinymce/",height:"200",suffix:".min",language:this.translate.instant("lang.langISO").replace("-","_"),language_url:`../node_modules/tinymce-i18n/langs/${this.translate.instant("lang.langISO").replace("-","_")}.js`,menubar:!1,statusbar:!1,readonly:t,plugins:["autolink","table","code"],external_plugins:{maarch_b64image:"../../src/frontend/plugins/tinymce/maarch_b64image/plugin.min.js"},table_toolbar:"",table_sizing_mode:"relative",table_resize_bars:!1,toolbar_sticky:!0,toolbar_drawer:"floating",table_style_by_css:!0,content_style:"table td { padding: 1px; vertical-align: top; }",forced_root_block:!1,toolbar:t?"":"undo redo | fontselect fontsizeselect | bold italic underline strikethrough forecolor | table maarch_b64image |         alignleft aligncenter alignright alignjustify         bullist numlist outdent indent | removeformat code"};tinymce.init(e),e.selector="#homepage_message",tinymce.init(e),e.selector="#traffic_record_summary_sheet",e.height="500",tinymce.init(e)}uploadTrigger(t,e){if(t.target.files&&t.target.files[0]){const i=this.canUploadFile(t.target.files[0],e);if(!0===i){const i=new FileReader;i.readAsDataURL(t.target.files[0]),i.onload=t=>{if("logo"===e)this.stepFormGroup.controls.logo.setValue(t.target.result),this.saveParameter("logo");else{const e=new Image;e.onload=e=>{e.target.width<1920||e.target.height<1080?this.notify.error(this.translate.instant("lang.badImageResolution",{value1:"1920x1080"})):(this.backgroundList.push({filename:t.target.result,url:t.target.result}),this.stepFormGroup.controls.bodyImage.setValue(t.target.result),this.saveParameter("bodyImage"))},e.src=t.target.result}}}else this.notify.error(i)}}canUploadFile(t,e){const i="logo"!==e?["image/jpg","image/jpeg"]:["image/svg+xml"];if("logo"===e){if(t.size>5e6)return this.translate.instant("lang.maxFileSizeExceeded",{value1:"5mo"});if(-1===i.indexOf(t.type))return this.translate.instant("lang.onlyExtensionsAllowed",{value1:i.join(", ")})}else{if(t.size>1e7)return this.translate.instant("lang.maxFileSizeExceeded",{value1:"10mo"});if(-1===i.indexOf(t.type))return this.translate.instant("lang.onlyExtensionsAllowed",{value1:i.join(", ")})}return!0}logoURL(){return this.sanitizer.bypassSecurityTrustUrl(this.stepFormGroup.controls.logo.value)}selectBg(t){this.stepFormGroup.controls.bodyImage.disabled||(this.stepFormGroup.controls.bodyImage.setValue(t),this.saveParameter("bodyImage"))}clickLogoButton(t){this.stepFormGroup.controls.logo.disabled||t.click()}saveParameter(t){let e={};"logo"===t||"bodyImage"===t?e.image=this.stepFormGroup.controls[t].value:"applicationName"===t?e.applicationName=this.stepFormGroup.controls[t].value:e={param_value_string:this.stepFormGroup.controls[t].value},this.http.put("../rest/parameters/"+t,e).subscribe(()=>{this.notify.success(this.translate.instant("lang.parameterUpdated")),"logo"===t&&setTimeout(()=>{window.location.reload()},500)},t=>{this.notify.error(t.error.errors)})}ngOnDestroy(){tinymce.remove()}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(c.h),p.Qb(y.a),p.Qb(bl.b),p.Qb(v.o),p.Qb(u.b))},t.\u0275cmp=p.Kb({type:t,selectors:[["app-parameters-customization"]],features:[p.Cb([v.o])],decls:44,vars:30,consts:[[2,"display","contents",3,"formGroup"],[1,"col-md-6"],["appearance","outline"],["matInput","","formControlName","applicationName"],["name","loginpage_message","id","loginpage_message","formControlName","loginpage_message",2,"padding-top","10px"],["name","homepage_message","id","homepage_message","formControlName","homepage_message",2,"padding-top","10px"],["matRipple","",2,"width","350px","background-size","100%","cursor","pointer"],[2,"width","100%",3,"src","click"],["type","file","name","files[]","accept","image/svg+xml",2,"display","none",3,"change"],["uploadLogo",""],[1,"backgroundList"],[1,"backgroundItem",2,"background","url(../rest/images?image=loginPage)","background-size","cover"],[1,"backgroundItem",2,"background","url(assets/bodylogin.jpg)","background-size","cover",3,"click"],["style","opacity: 0.3;","class","backgroundItem",3,"selected","disabled","background","click",4,"ngFor","ngForOf"],["style","opacity: 0.3;display: flex;align-items: center;justify-content: center;","class","backgroundItem",3,"click",4,"ngIf"],[1,"col-md-10",2,"margin-top","20px"],["name","traffic_record_summary_sheet","id","traffic_record_summary_sheet","formControlName","traffic_record_summary_sheet",2,"padding-top","10px"],[1,"backgroundItem",2,"opacity","0.3",3,"click"],[1,"backgroundItem",2,"opacity","0.3","display","flex","align-items","center","justify-content","center",3,"click"],["type","file","name","files[]","accept","image/jpeg",2,"display","none",3,"change"],["uploadFile",""],[1,"fa","fa-plus",2,"font-size","30px","color","#666"]],template:function(t,e){if(1&t){const t=p.Xb();p.Wb(0,"form",0),p.Wb(1,"div",1),p.Wb(2,"mat-form-field",2),p.Wb(3,"mat-label"),p.Qc(4),p.ic(5,"translate"),p.Vb(),p.Rb(6,"input",3),p.Vb(),p.Wb(7,"div"),p.Qc(8),p.ic(9,"translate"),p.Vb(),p.Rb(10,"textarea",4),p.Rb(11,"br"),p.Rb(12,"br"),p.Wb(13,"div"),p.Qc(14),p.ic(15,"translate"),p.Vb(),p.Rb(16,"textarea",5),p.Rb(17,"br"),p.Rb(18,"br"),p.Vb(),p.Wb(19,"div",1),p.Wb(20,"div"),p.Qc(21),p.ic(22,"translate"),p.Vb(),p.Wb(23,"div"),p.Wb(24,"mat-card",6),p.Wb(25,"img",7),p.dc("click",(function(){p.Dc(t);const i=p.zc(27);return e.clickLogoButton(i)})),p.Vb(),p.Wb(26,"input",8,9),p.dc("change",(function(t){return e.uploadTrigger(t,"logo")})),p.Vb(),p.Vb(),p.Vb(),p.Rb(28,"br"),p.Wb(29,"div"),p.Qc(30),p.ic(31,"translate"),p.Vb(),p.Wb(32,"div",10),p.Rb(33,"mat-card",11),p.Wb(34,"mat-card",12),p.dc("click",(function(){return e.selectBg("assets/bodylogin.jpg")})),p.Vb(),p.Oc(35,pl,1,6,"mat-card",13),p.Oc(36,hl,4,0,"mat-card",14),p.Vb(),p.Vb(),p.Wb(37,"div",15),p.Wb(38,"div"),p.Qc(39),p.ic(40,"translate"),p.Vb(),p.Rb(41,"textarea",16),p.Rb(42,"br"),p.Rb(43,"br"),p.Vb(),p.Vb()}2&t&&(p.oc("formGroup",e.stepFormGroup),p.Db(4),p.Rc(p.jc(5,18,"lang.applicationName")),p.Db(4),p.Sc("",p.jc(9,20,"lang.loginMsg")," : "),p.Db(6),p.Sc("",p.jc(15,22,"lang.homeMsg")," : "),p.Db(7),p.Sc("",p.jc(22,24,"lang.chooseLogo")," : "),p.Db(4),p.oc("src",e.logoURL(),p.Gc),p.Db(5),p.Sc("",p.jc(31,26,"lang.chooseLoginBg")," : "),p.Db(3),p.Ib("disabled",e.stepFormGroup.controls.bodyImage.disabled)("selected","../rest/images?image=loginPage"===e.stepFormGroup.controls.bodyImage.value),p.Db(1),p.Ib("disabled",e.stepFormGroup.controls.bodyImage.disabled)("selected","assets/bodylogin.jpg"===e.stepFormGroup.controls.bodyImage.value),p.Db(1),p.oc("ngForOf",e.backgroundList),p.Db(1),p.oc("ngIf",!e.stepFormGroup.controls.bodyImage.disabled),p.Db(3),p.Sc("",p.jc(40,28,"lang.trafficRecordSummarySheetParameters")," : "))},directives:[c.K,c.v,c.m,S.c,S.g,w.b,c.d,c.u,c.k,j.a,k.u,O.s,O.t],pipes:[h.d],styles:[".backgroundList[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);grid-gap:10px}.selected[_ngcontent-%COMP%]{transition:all .3s;opacity:1!important;border:10px solid #f99830!important}.backgroundItem[_ngcontent-%COMP%]{border:0 solid #f99830;opacity:.5;transition:all .3s;cursor:pointer;height:120px;background-size:cover!important}.disabled[_ngcontent-%COMP%]{cursor:default!important}.backgroundItem[_ngcontent-%COMP%]:not(.disabled):hover{transition:all .3s;opacity:1!important}"]}),t})();const ml=["adminMenuTemplate"];function fl(t,e){1&t&&(p.Wb(0,"mat-nav-list"),p.Wb(1,"h3",11),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"a",12),p.Rb(5,"mat-icon",13),p.Wb(6,"p",14),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(2),p.Rc(p.jc(3,2,"lang.actions")),p.Db(5),p.Sc(" ",p.jc(8,4,"lang.add")," "))}function gl(t,e){1&t&&(p.Wb(0,"div",15),p.Rb(1,"mat-spinner",16),p.Vb())}function vl(t,e){1&t&&(p.Wb(0,"mat-header-cell",40),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc("",p.jc(2,1,"lang.id")," "))}function yl(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.id," ")}}function Dl(t,e){if(1&t&&(p.Wb(0,"mat-header-cell",40),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=p.hc(2);p.Ib("hide-for-mobile",t.appService.getViewMode()),p.Db(1),p.Sc(" ",p.jc(2,3,"lang.description")," ")}}function Vl(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.Ib("hide-for-mobile",i.appService.getViewMode()),p.Db(1),p.Sc(" ",t.description," ")}}function Cl(t,e){1&t&&(p.Wb(0,"mat-header-cell",40),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc("",p.jc(2,1,"lang.value")," "))}function Ml(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.value," ")}}function Wl(t,e){1&t&&p.Rb(0,"mat-header-cell")}function xl(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-cell",41),p.Wb(1,"button",42),p.dc("click",(function(i){p.Dc(t);const a=e.$implicit,n=p.hc(2);return i.stopPropagation(),n.deleteParameter(a.id)})),p.ic(2,"translate"),p.Rb(3,"mat-icon",43),p.Vb(),p.Vb()}2&t&&(p.Db(1),p.pc("matTooltip",p.jc(2,1,"lang.delete")))}function Ol(t,e){1&t&&p.Rb(0,"mat-header-row")}function _l(t,e){1&t&&(p.Rb(0,"mat-row",44),p.ic(1,"translate")),2&t&&(p.qc("routerLink","/administration/parameters/",e.$implicit.id,""),p.pc("matTooltip",p.jc(1,2,"lang.view")))}function Sl(t,e){1&t&&p.Rb(0,"app-parameters-customization")}function wl(t,e){if(1&t&&(p.Wb(0,"mat-card",17),p.Wb(1,"mat-tab-group"),p.Wb(2,"mat-tab",18),p.ic(3,"translate"),p.Wb(4,"div",19),p.Wb(5,"div",20),p.Wb(6,"mat-form-field"),p.Rb(7,"input",21),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Wb(9,"div",20),p.Rb(10,"mat-paginator",22,23),p.Vb(),p.Vb(),p.Wb(12,"mat-table",24,25),p.Ub(14,26),p.Oc(15,vl,3,3,"mat-header-cell",27),p.Oc(16,yl,2,1,"mat-cell",28),p.Tb(),p.Ub(17,29),p.Oc(18,Dl,3,5,"mat-header-cell",30),p.Oc(19,Vl,2,3,"mat-cell",31),p.Tb(),p.Ub(20,32),p.Oc(21,Cl,3,3,"mat-header-cell",27),p.Oc(22,Ml,2,1,"mat-cell",28),p.Tb(),p.Ub(23,33),p.Oc(24,Wl,1,0,"mat-header-cell",34),p.Oc(25,xl,4,3,"mat-cell",35),p.Tb(),p.Oc(26,Ol,1,0,"mat-header-row",36),p.Oc(27,_l,2,4,"mat-row",37),p.Vb(),p.Wb(28,"div",38),p.Qc(29),p.ic(30,"translate"),p.Vb(),p.Vb(),p.Wb(31,"mat-tab",18),p.ic(32,"translate"),p.Oc(33,Sl,1,0,"ng-template",39),p.Vb(),p.Vb(),p.Vb()),2&t){const t=p.hc();p.Db(2),p.oc("label",p.jc(3,12,"lang.technicalParameters")),p.Db(5),p.pc("placeholder",p.jc(8,14,"lang.filterBy")),p.oc("formControl",t.adminService.getFilterField()),p.Db(3),p.oc("length",100)("hidePageSize",!0)("pageSize",10),p.Db(2),p.oc("dataSource",t.adminService.getDataSource()),p.Db(14),p.oc("matHeaderRowDef",t.displayedColumns),p.Db(1),p.oc("matRowDefColumns",t.displayedColumns),p.Db(2),p.Tc(" ",t.parameters.length," ",p.jc(30,16,"lang.parameters"),""),p.Db(2),p.oc("label",p.jc(32,18,"lang.customization"))}}let Il=(()=>{class t{constructor(t,e,i,a,n,o,s,c){this.translate=t,this.http=e,this.notify=i,this.headerService=a,this.appService=n,this.functions=o,this.adminService=s,this.viewContainerRef=c,this.parameters={},this.loading=!1,this.displayedColumns=["id","description","value","actions"],this.filterColumns=["id","description","value"]}ngOnInit(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.parameters")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/parameters").subscribe(t=>{this.parameters=t.parameters.filter(t=>-1===["homepage_message","loginpage_message","traffic_record_summary_sheet"].indexOf(t.id)),this.loading=!1,setTimeout(()=>{this.adminService.setDataSource("admin_parameters",this.parameters,this.sort,this.paginator,this.filterColumns)},0)})}deleteParameter(t){confirm(this.translate.instant("lang.deleteMsg"))&&this.http.delete("../rest/parameters/"+t).subscribe(t=>{this.parameters=t.parameters.filter(t=>-1===["homepage_message","loginpage_message","traffic_record_summary_sheet"].indexOf(t.id)),this.adminService.setDataSource("admin_parameters",this.parameters,this.sort,this.paginator,this.filterColumns),this.notify.success(this.translate.instant("lang.parameterDeleted"))},t=>{this.notify.error(t.error.errors)})}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a),p.Qb(D.a),p.Qb(St),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(ml,!0),p.Xc(N.a,!0),p.Xc(H.a,!0)),2&t&&(p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.paginator=i.first),p.yc(i=p.ec())&&(e.sort=i.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/parameters/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[3,"label"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","description"],["mat-sort-header","",3,"hide-for-mobile",4,"matHeaderCellDef"],[3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","value"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["matTabContent",""],["mat-sort-header",""],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,fl,9,6,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,gl,2,0,"div",9),p.Oc(14,wl,34,20,"mat-card",10),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading))},directives:[C.e,C.f,M.a,x.a,O.t,wt.h,wt.g,wt.d,o.f,It.a,wt.c,k.l,I.c,j.a,ke.c,ke.a,S.c,w.b,c.d,c.u,c.j,N.a,G.o,H.a,G.c,G.i,G.b,G.k,G.n,ke.b,G.h,H.b,G.a,R.b,kt.b,G.j,G.m,o.d,ul],pipes:[h.d],encapsulation:2}),t})();const jl=["snav2"],kl=["adminMenuTemplate"];function Rl(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-nav-list"),p.Wb(1,"h3",16),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"a",17),p.Rb(5,"mat-icon",18),p.Wb(6,"p",19),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Wb(9,"a",20),p.dc("click",(function(){return p.Dc(t),p.hc(),p.zc(16).toggle()})),p.Rb(10,"mat-icon",21),p.Wb(11,"p",19),p.Qc(12),p.ic(13,"translate"),p.Vb(),p.Vb(),p.Vb()}2&t&&(p.Db(2),p.Rc(p.jc(3,3,"lang.actions")),p.Db(5),p.Sc(" ",p.jc(8,5,"lang.add")," "),p.Db(5),p.Sc(" ",p.jc(13,7,"lang.prioritiesOrder")," "))}function Tl(t,e){1&t&&(p.Wb(0,"div",22),p.Rb(1,"mat-spinner",23),p.Vb())}function Pl(t,e){1&t&&(p.Wb(0,"mat-header-cell",45),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc("",p.jc(2,1,"lang.technicalId")," "))}function Ql(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-cell",46),p.Wb(1,"span",47),p.dc("click",(function(e){return p.Dc(t),e.stopPropagation()})),p.Qc(2),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit;p.Db(2),p.Sc(" ",t.id," ")}}function Fl(t,e){1&t&&(p.Wb(0,"mat-header-cell",45),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc("",p.jc(2,1,"lang.label")," "))}function Ll(t,e){if(1&t&&(p.Wb(0,"mat-cell",46),p.Rb(1,"input",48),p.Qc(2),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.pc("value",t.color),p.Db(1),p.Sc(" ",t.label," ")}}function El(t,e){if(1&t&&(p.Wb(0,"mat-header-cell",45),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=p.hc(2);p.Ib("hide-for-mobile",t.appService.getViewMode()),p.Db(1),p.Sc(" ",p.jc(2,3,"lang.processDelayDay"),"")}}function Al(t,e){if(1&t&&(p.Wb(0,"mat-cell",46),p.Wb(1,"span"),p.Qc(2),p.Vb(),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.Ib("hide-for-mobile",i.appService.getViewMode()),p.Db(2),p.Sc(" ",t.delays," ")}}function Ul(t,e){1&t&&p.Rb(0,"mat-header-cell")}function $l(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-cell",49),p.Wb(1,"button",50),p.dc("click",(function(i){p.Dc(t);const a=e.$implicit,n=p.hc(2);return i.stopPropagation(),n.deletePriority(a.id)})),p.ic(2,"translate"),p.Rb(3,"mat-icon",51),p.Vb(),p.Vb()}2&t&&(p.Db(1),p.pc("matTooltip",p.jc(2,1,"lang.delete")))}function zl(t,e){1&t&&p.Rb(0,"mat-header-row")}function Nl(t,e){1&t&&(p.Rb(0,"mat-row",52),p.ic(1,"translate")),2&t&&(p.qc("routerLink","/administration/priorities/",e.$implicit.id,""),p.pc("matTooltip",p.jc(1,2,"lang.view")))}function Hl(t,e){if(1&t&&(p.Wb(0,"mat-card",24),p.Wb(1,"div",25),p.Wb(2,"div",26),p.Wb(3,"mat-form-field"),p.Rb(4,"input",27),p.ic(5,"translate"),p.Vb(),p.Vb(),p.Wb(6,"div",26),p.Rb(7,"mat-paginator",28,29),p.Vb(),p.Vb(),p.Wb(9,"mat-table",30,31),p.Ub(11,32),p.Oc(12,Pl,3,3,"mat-header-cell",33),p.Oc(13,Ql,3,1,"mat-cell",34),p.Tb(),p.Ub(14,35),p.Oc(15,Fl,3,3,"mat-header-cell",33),p.Oc(16,Ll,3,2,"mat-cell",34),p.Tb(),p.Ub(17,36),p.Oc(18,El,3,5,"mat-header-cell",37),p.Oc(19,Al,3,3,"mat-cell",38),p.Tb(),p.Ub(20,39),p.Oc(21,Ul,1,0,"mat-header-cell",40),p.Oc(22,$l,4,3,"mat-cell",41),p.Tb(),p.Oc(23,zl,1,0,"mat-header-row",42),p.Oc(24,Nl,2,4,"mat-row",43),p.Vb(),p.Wb(25,"div",44),p.Qc(26),p.ic(27,"translate"),p.Vb(),p.Vb()),2&t){const t=p.hc();p.Db(4),p.pc("placeholder",p.jc(5,10,"lang.filterBy")),p.oc("formControl",t.adminService.getFilterField()),p.Db(3),p.oc("length",100)("hidePageSize",!0)("pageSize",10),p.Db(2),p.oc("dataSource",t.adminService.getDataSource()),p.Db(14),p.oc("matHeaderRowDef",t.displayedColumns),p.Db(1),p.oc("matRowDefColumns",t.displayedColumns),p.Db(2),p.Tc(" ",t.priorities.length," ",p.jc(27,12,"lang.priorities"),"")}}function Bl(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-list-item",53),p.dc("onDropSuccess",(function(){return p.Dc(t),p.hc().updatePrioritiesOrder()})),p.ic(1,"translate"),p.Rb(2,"mat-icon",54),p.Wb(3,"p",19),p.Qc(4),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit,i=e.index;p.pc("title",p.jc(1,4,"lang.move")),p.oc("sortableIndex",i),p.Db(4),p.Tc("",i+1," - ",t.label,"")}}const Xl=function(){return["boxers-zone"]};let Gl=(()=>{class t{constructor(t,e,i,a,n,o,s,c){this.translate=t,this.http=e,this.notify=i,this.headerService=a,this.appService=n,this.functions=o,this.adminService=s,this.viewContainerRef=c,this.loading=!1,this.priorities=[],this.prioritiesOrder=[],this.displayedColumns=["id","label","delays","actions"],this.filterColumns=["id","label","delays"]}ngOnInit(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.prioritiesAlt")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/priorities").subscribe(t=>{this.priorities=t.priorities,this.loading=!1,this.http.get("../rest/sortedPriorities").subscribe(t=>{this.prioritiesOrder=t.priorities},t=>{this.notify.handleErrors(t)}),setTimeout(()=>{this.adminService.setDataSource("admin_priorities",this.priorities,this.sort,this.paginator,this.filterColumns)},0)},t=>{this.notify.handleErrors(t)})}deletePriority(t){confirm(this.translate.instant("lang.deleteMsg"))&&this.http.delete("../rest/priorities/"+t).subscribe(t=>{this.priorities=t.priorities,this.adminService.setDataSource("admin_priorities",this.priorities,this.sort,this.paginator,this.filterColumns),this.notify.success(this.translate.instant("lang.priorityDeleted"))},t=>{this.notify.error(t.error.errors)})}updatePrioritiesOrder(){this.http.put("../rest/sortedPriorities",this.prioritiesOrder).subscribe(t=>{this.prioritiesOrder=t.priorities,this.notify.success(this.translate.instant("lang.modificationSaved"))},t=>{this.notify.error(t.error.errors)})}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a),p.Qb(D.a),p.Qb(St),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(jl,!0),p.Kc(kl,!0),p.Xc(N.a,!0),p.Xc(H.a,!0)),2&t&&(p.yc(i=p.ec())&&(e.sidenavRight=i.first),p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.paginator=i.first),p.yc(i=p.ec())&&(e.sort=i.first))},decls:23,vars:18,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",3,"mode","fixedInViewport","opened"],["snav2",""],[2,"font-size","15px","padding","5px"],["dnd-sortable-container","",3,"dropZones","sortableData"],["disableRipple","true","dnd-sortable","",3,"title","sortableIndex","onDropSuccess",4,"ngFor","ngForOf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/priorities/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],["mat-list-item","",3,"click"],["color","primary","mat-list-icon","",1,"fa","fa-list-ol"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","id"],["mat-sort-header","","style","flex:2;",4,"matHeaderCellDef"],["style","flex:2;",4,"matCellDef"],["matColumnDef","label"],["matColumnDef","delays"],["mat-sort-header","","style","flex:2;",3,"hide-for-mobile",4,"matHeaderCellDef"],["style","flex:2;",3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],[3,"click"],["type","color","disabled","",2,"background","none","border","none","width","45px",3,"value"],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"],["disableRipple","true","dnd-sortable","",3,"title","sortableIndex","onDropSuccess"],["color","primary","mat-list-icon","",1,"fa","fa-inbox"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,Rl,14,9,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,Tl,2,0,"div",9),p.Oc(14,Hl,28,14,"mat-card",10),p.Vb(),p.Vb(),p.Vb(),p.Wb(15,"mat-sidenav",11,12),p.Wb(17,"p",13),p.Qc(18),p.ic(19,"translate"),p.Vb(),p.Wb(20,"mat-list"),p.Wb(21,"span",14),p.Oc(22,Bl,5,6,"mat-list-item",15),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading),p.Db(1),p.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",(e.appService.getViewMode(),!1)),p.Db(3),p.Sc(" ",p.jc(19,15,"lang.prioritiesHelpDesc")," "),p.Db(3),p.oc("dropZones",p.uc(17,Xl))("sortableData",e.prioritiesOrder),p.Db(1),p.oc("ngForOf",e.prioritiesOrder))},directives:[C.e,C.f,M.a,x.a,O.t,C.d,wt.a,Fe.f,O.s,wt.h,wt.g,wt.d,o.f,It.a,wt.c,k.l,I.c,j.a,S.c,w.b,c.d,c.u,c.j,N.a,G.o,H.a,G.c,G.i,G.b,G.k,G.n,G.h,H.b,G.a,R.b,kt.b,G.j,G.m,o.d,Fe.e],pipes:[h.d],encapsulation:2}),t})();function ql(t,e){1&t&&(p.Wb(0,"div",10),p.Rb(1,"mat-spinner",11),p.Vb())}function Kl(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-card",12),p.Wb(1,"form",13,14),p.dc("ngSubmit",(function(){return p.Dc(t),p.hc().onSubmit()})),p.Wb(3,"div",15),p.Wb(4,"div",16),p.Wb(5,"div",17),p.Wb(6,"mat-form-field"),p.Wb(7,"input",18),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().priority.color=e})),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(9,"div",19),p.Wb(10,"mat-form-field"),p.Wb(11,"input",20),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().priority.label=e})),p.ic(12,"translate"),p.ic(13,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(14,"div",15),p.Wb(15,"div",21),p.Wb(16,"mat-form-field"),p.Wb(17,"input",22),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().priority.delays=e})),p.ic(18,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(19,"div",15),p.Wb(20,"div",23),p.Wb(21,"button",24),p.Qc(22),p.ic(23,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.zc(2),e=p.hc();p.Db(7),p.pc("matTooltip",p.jc(8,9,"lang.chooseColor")),p.oc("ngModel",e.priority.color),p.Db(4),p.pc("title",p.jc(12,11,"lang.label")),p.pc("placeholder",p.jc(13,13,"lang.label")),p.oc("ngModel",e.priority.label),p.Db(6),p.pc("placeholder",p.jc(18,15,"lang.processDelayDay")),p.oc("ngModel",e.priority.delays),p.Db(4),p.oc("disabled",!t.form.valid),p.Db(1),p.Rc(p.jc(23,17,"lang.save"))}}let Jl=(()=>{class t{constructor(t,e,i,a,n,o,s){this.translate=t,this.http=e,this.route=i,this.router=a,this.notify=n,this.headerService=o,this.appService=s,this.loading=!1,this.priority={color:"#135f7f",delays:"0"}}ngOnInit(){this.loading=!0,this.route.params.subscribe(t=>{void 0===t.id?(this.headerService.setHeader(this.translate.instant("lang.priorityCreation")),this.creationMode=!0,this.loading=!1):(this.creationMode=!1,this.id=t.id,this.http.get("../rest/priorities/"+this.id).subscribe(t=>{this.priority=t.priority,this.headerService.setHeader(this.translate.instant("lang.priorityModification"),this.priority.label),this.loading=!1},t=>{this.notify.handleErrors(t)}))})}onSubmit(){this.creationMode?this.http.post("../rest/priorities",this.priority).subscribe(()=>{this.notify.success(this.translate.instant("lang.priorityAdded")),this.router.navigate(["/administration/priorities"])},t=>{this.notify.error(t.error.errors)}):this.http.put("../rest/priorities/"+this.id,this.priority).subscribe(()=>{this.notify.success(this.translate.instant("lang.priorityUpdated")),this.router.navigate(["/administration/priorities"])},t=>{this.notify.error(t.error.errors)})}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(o.a),p.Qb(o.c),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],decls:13,vars:8,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"form-horizontal",3,"ngSubmit"],["priorityForm","ngForm"],[1,"form-group"],[1,"row",2,"margin","0px"],[1,"col-md-1","col-xs-2"],["matInput","","type","color","name","color","required","",3,"matTooltip","ngModel","ngModelChange"],[1,"col-md-11","col-xs-10"],["matInput","","type","text","name","label","maxlength","128","required","",3,"title","placeholder","ngModel","ngModelChange"],[1,"col-md-4"],["matInput","","type","number","name","delays","required","","pattern","^\\d+$",3,"placeholder","ngModel","ngModelChange"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary",3,"disabled"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Wb(1,"mat-sidenav-content"),p.Wb(2,"div",1),p.Wb(3,"div",2),p.Wb(4,"div",3),p.Rb(5,"header-left"),p.Vb(),p.Wb(6,"div",4),p.Rb(7,"header-right"),p.Vb(),p.Vb(),p.Rb(8,"div",5),p.Vb(),p.Wb(9,"div",6),p.Wb(10,"div",7),p.Oc(11,ql,2,0,"div",8),p.Oc(12,Kl,24,19,"mat-card",9),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(3),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading))},directives:[C.e,C.f,M.a,x.a,O.t,I.c,j.a,c.K,c.v,c.w,S.c,w.b,c.d,c.F,kt.b,c.u,c.x,c.p,c.A,c.B,R.b],pipes:[h.d],encapsulation:2}),t})();const Yl=["snav2"],Zl=["adminMenuTemplate"];function td(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-nav-list"),p.Wb(1,"h3",14),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"a",35),p.Rb(5,"mat-icon",36),p.Wb(6,"p",37),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Wb(9,"a",38),p.dc("click",(function(){p.Dc(t);const e=p.hc(),i=p.zc(16);return e.loadCron(),i.toggle()}))("next",(function(){p.Dc(t);const e=p.hc();return p.zc(16).open(),e.paramCron()})),p.Rb(10,"mat-icon",39),p.Wb(11,"p",37),p.Qc(12),p.ic(13,"translate"),p.Vb(),p.Vb(),p.Vb()}2&t&&(p.Db(2),p.Rc(p.jc(3,3,"lang.actions")),p.Db(5),p.Sc(" ",p.jc(8,5,"lang.add")," "),p.Db(5),p.Sc(" ",p.jc(13,7,"lang.toSchedule")," "))}function ed(t,e){1&t&&(p.Wb(0,"div",40),p.Rb(1,"mat-spinner",41),p.Vb())}function id(t,e){if(1&t&&(p.Wb(0,"mat-header-cell",64),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=p.hc(2);p.Ib("hide-for-mobile",t.appService.getViewMode()),p.Db(1),p.Rc(p.jc(2,3,"lang.id"))}}function ad(t,e){if(1&t&&(p.Wb(0,"mat-cell",65),p.Qc(1),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.Ib("hide-for-mobile",i.appService.getViewMode()),p.Db(1),p.Sc(" ",t.notification_id," ")}}function nd(t,e){1&t&&(p.Wb(0,"mat-header-cell",66),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc("",p.jc(2,1,"lang.description")," "))}function od(t,e){if(1&t&&(p.Wb(0,"mat-cell",67),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.description," ")}}function sd(t,e){if(1&t&&(p.Wb(0,"mat-header-cell",64),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=p.hc(2);p.Ib("hide-for-mobile",t.appService.getViewMode()),p.Db(1),p.Rc(p.jc(2,3,"lang.status"))}}function cd(t,e){1&t&&(p.Wb(0,"span",71),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.active")))}function rd(t,e){1&t&&(p.Wb(0,"span",72),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.suspended")))}function ld(t,e){if(1&t&&(p.Wb(0,"mat-cell",68),p.ic(1,"translate"),p.Oc(2,cd,3,3,"span",69),p.Oc(3,rd,3,3,"span",70),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.Ib("hide-for-mobile",i.appService.getViewMode()),p.pc("matTooltip",p.jc(1,5,"lang.view")),p.Db(2),p.oc("ngIf","Y"==t.is_enabled),p.Db(1),p.oc("ngIf","N"==t.is_enabled)}}function dd(t,e){1&t&&p.Rb(0,"mat-header-cell",65)}function bd(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-cell",73),p.Wb(1,"button",74),p.dc("click",(function(i){p.Dc(t);const a=e.$implicit,n=p.hc(2);return i.stopPropagation(),n.deleteNotification(a)})),p.ic(2,"translate"),p.Rb(3,"mat-icon",75),p.Vb(),p.Vb()}2&t&&(p.Db(1),p.pc("matTooltip",p.jc(2,1,"lang.delete")))}function pd(t,e){1&t&&p.Rb(0,"mat-header-row")}function hd(t,e){if(1&t&&(p.Rb(0,"mat-row",76),p.ic(1,"translate")),2&t){const t=e.$implicit;p.qc("routerLink","/administration/notifications/",t.notification_sid,""),p.pc("matTooltip",p.jc(1,3,"lang.view")),p.oc("joyrideStep",t.notification_id+"_Tour")}}function ud(t,e){if(1&t&&(p.Wb(0,"mat-card",42),p.Wb(1,"div",43),p.Wb(2,"div",44),p.Wb(3,"mat-form-field"),p.Rb(4,"input",45),p.ic(5,"translate"),p.Vb(),p.Vb(),p.Wb(6,"div",44),p.Rb(7,"mat-paginator",46,47),p.Vb(),p.Vb(),p.Wb(9,"mat-table",48,49),p.Ub(11,50),p.Oc(12,id,3,5,"mat-header-cell",51),p.Oc(13,ad,2,3,"mat-cell",52),p.Tb(),p.Ub(14,53),p.Oc(15,nd,3,3,"mat-header-cell",54),p.Oc(16,od,2,1,"mat-cell",55),p.Tb(),p.Ub(17,56),p.Oc(18,sd,3,5,"mat-header-cell",51),p.Oc(19,ld,4,7,"mat-cell",57),p.Tb(),p.Ub(20,58),p.Oc(21,dd,1,0,"mat-header-cell",59),p.Oc(22,bd,4,3,"mat-cell",60),p.Tb(),p.Oc(23,pd,1,0,"mat-header-row",61),p.Oc(24,hd,2,5,"mat-row",62),p.Vb(),p.Wb(25,"div",63),p.Qc(26),p.ic(27,"translate"),p.Vb(),p.Vb()),2&t){const t=p.hc();p.Db(4),p.pc("placeholder",p.jc(5,10,"lang.filterBy")),p.oc("formControl",t.adminService.getFilterField()),p.Db(3),p.oc("length",100)("hidePageSize",!0)("pageSize",10),p.Db(2),p.oc("dataSource",t.adminService.getDataSource()),p.Db(14),p.oc("matHeaderRowDef",t.displayedColumns),p.Db(1),p.oc("matRowDefColumns",t.displayedColumns),p.Db(2),p.Tc(" ",t.notifications.length," ",p.jc(27,12,"lang.notifications"),"")}}function md(t,e){if(1&t&&(p.Wb(0,"mat-option",77),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t.value),p.Db(1),p.Sc(" ",t.label," ")}}function fd(t,e){if(1&t&&(p.Wb(0,"mat-option",77),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t.value),p.Db(1),p.Sc(" ",t.label," ")}}function gd(t,e){if(1&t&&(p.Wb(0,"mat-option",77),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t.value),p.Db(1),p.Sc(" ",t.label," ")}}function vd(t,e){if(1&t&&(p.Wb(0,"mat-option",77),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t.value),p.Db(1),p.Sc(" ",t.label," ")}}function yd(t,e){if(1&t&&(p.Wb(0,"mat-option",77),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t.value),p.Db(1),p.Sc(" ",t.label," ")}}function Dd(t,e){if(1&t&&(p.Wb(0,"mat-option",77),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t.path),p.Db(1),p.Sc(" ",t.description," ")}}function Vd(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-chip",79),p.dc("removed",(function(){p.Dc(t);const e=p.hc().index;return p.hc().deleteCron(e)})),p.Qc(1),p.Rb(2,"span",80),p.Wb(3,"b"),p.Qc(4),p.Vb(),p.Rb(5,"mat-icon",81),p.ic(6,"translate"),p.Vb()}if(2&t){const t=p.hc().$implicit;p.Db(1),p.Sc(" ",t.description," "),p.Db(3),p.Wc("",t.m,"\xa0\xa0",t.h,"\xa0\xa0",t.dom,"\xa0\xa0",t.mon,"\xa0\xa0",t.dow,""),p.Db(1),p.pc("matTooltip",p.jc(6,7,"lang.delete"))}}function Cd(t,e){if(1&t&&(p.Wb(0,"span"),p.Oc(1,Vd,7,9,"mat-chip",78),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.oc("ngIf","normal"==t.state)}}let Md=(()=>{class t{constructor(t,e,i,a,n,o,s,c){this.translate=t,this.http=e,this.notify=i,this.headerService=a,this.appService=n,this.functions=o,this.adminService=s,this.viewContainerRef=c,this.notifications=[],this.loading=!1,this.months=[],this.dom=[],this.dow=[],this.newCron={m:"",h:"",dom:"",mon:"",cmd:"",state:"normal"},this.displayedColumns=["notification_id","description","is_enabled","notifications"],this.filterColumns=["notification_id","description"]}ngOnInit(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.notifications")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/notifications").subscribe(t=>{this.notifications=t.notifications,this.loading=!1,setTimeout(()=>{this.adminService.setDataSource("admin_notif",this.notifications,this.sort,this.paginator,this.filterColumns)},0)},t=>{this.notify.error(t.error.errors)})}deleteNotification(t){confirm(this.translate.instant("lang.deleteMsg"))&&this.http.delete("../rest/notifications/"+t.notification_sid).subscribe(t=>{this.notifications=t.notifications,setTimeout(()=>{this.adminService.setDataSource("admin_notif",this.notifications,this.sort,this.paginator,this.filterColumns)},0),this.sidenavRight.close(),this.notify.success(this.translate.instant("lang.notificationDeleted"))},t=>{this.notify.error(t.error.errors)})}loadCron(){return new Promise(t=>{this.hours=[{label:this.translate.instant("lang.eachHour"),value:"*"}],this.minutes=[{label:this.translate.instant("lang.eachMinute"),value:"*"}],this.months=[{label:this.translate.instant("lang.eachMonth"),value:"*"},{label:this.translate.instant("lang.january"),value:"1"},{label:this.translate.instant("lang.february"),value:"2"},{label:this.translate.instant("lang.march"),value:"3"},{label:this.translate.instant("lang.april"),value:"4"},{label:this.translate.instant("lang.may"),value:"5"},{label:this.translate.instant("lang.june"),value:"6"},{label:this.translate.instant("lang.july"),value:"7"},{label:this.translate.instant("lang.august"),value:"8"},{label:this.translate.instant("lang.september"),value:"9"},{label:this.translate.instant("lang.october"),value:"10"},{label:this.translate.instant("lang.november"),value:"11"},{label:this.translate.instant("lang.december"),value:"12"}],this.dom=[{label:this.translate.instant("lang.notUsed"),value:"*"}],this.dow=[{label:this.translate.instant("lang.eachDay"),value:"*"},{label:this.translate.instant("lang.monday"),value:"1"},{label:this.translate.instant("lang.tuesday"),value:"2"},{label:this.translate.instant("lang.wednesday"),value:"3"},{label:this.translate.instant("lang.thursday"),value:"4"},{label:this.translate.instant("lang.friday"),value:"5"},{label:this.translate.instant("lang.saturday"),value:"6"},{label:this.translate.instant("lang.sunday"),value:"7"}],this.newCron={m:"",h:"",dom:"",mon:"",cmd:"",state:"normal"};for(let e=0;e<=23;e++)this.hours.push({label:e,value:String(e)});for(let e=0;e<=59;e++)this.minutes.push({label:e,value:String(e)});for(let e=1;e<=31;e++)this.dom.push({label:e,value:String(e)});this.http.get("../rest/notifications/schedule").pipe(Object(xt.tap)(t=>{this.crontab=t.crontab,this.authorizedNotification=t.authorizedNotification}),Object(vt.a)(()=>t(!0)),Object(X.catchError)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()})}saveCron(){const t=this.newCron.cmd.split("/");this.newCron.description=t[t.length-1],this.crontab.push(this.newCron),this.http.post("../rest/notifications/schedule",this.crontab).subscribe(t=>{this.newCron={m:"",h:"",dom:"",mon:"",cmd:"",description:"",state:"normal"},this.notify.success(this.translate.instant("lang.notificationScheduleUpdated"))},t=>{this.crontab.pop(),this.notify.error(t.error.errors)})}deleteCron(t){this.crontab[t].state="deleted",this.http.post("../rest/notifications/schedule",this.crontab).subscribe(e=>{this.crontab.splice(t,1),this.notify.success(this.translate.instant("lang.notificationScheduleUpdated"))},t=>{this.notify.error(t.error.errors)})}onNext(){return console.log("next"),this.sidenavRight.open(),!1}paramCron(){return Object(gt.a)(this,void 0,void 0,(function*(){yield this.loadCron();const t=this.authorizedNotification.filter(t=>t.path.indexOf("_BASKETS.sh")>-1)[0];this.newCron={m:"0",h:"8",dom:"*",dow:"*",mon:"*",cmd:t.path,description:t.description,state:"normal"}}))}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a),p.Qb(D.a),p.Qb(St),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(Yl,!0),p.Kc(Zl,!0),p.Xc(N.a,!0),p.Xc(H.a,!0)),2&t&&(p.yc(i=p.ec())&&(e.sidenavRight=i.first),p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.paginator=i.first),p.yc(i=p.ec())&&(e.sort=i.first))},decls:76,vars:73,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",3,"mode","fixedInViewport","opened","next"],["snav2",""],["joyrideStep","notifTour3",3,"next"],["mat-subheader",""],[1,"form-horizontal",2,"overflow","hidden"],["notifForm","ngForm"],[1,"form-group",2,"padding-left","15px","padding-right","15px"],[1,"col-sm-4"],["name","hour","id","hour","required","",3,"title","placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","minute","id","minute","required","",3,"title","placeholder","ngModel","ngModelChange"],["name","day","id","day","required","",3,"title","placeholder","ngModel","ngModelChange"],[1,"col-sm-6"],["name","month","id","month","required","",3,"title","placeholder","ngModel","ngModelChange"],["name","dayM","id","dayM","required","",3,"title","placeholder","ngModel","ngModelChange"],[1,"col-sm-12"],["name","script","id","script","required","",3,"title","placeholder","ngModel","ngModelChange"],[1,"col-sm-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary",3,"disabled","click"],["role","alert",1,"alert","alert-info",2,"margin","15px"],["joyrideStep","notifTour4"],[1,"mat-chip-list-stacked"],["chipList",""],[4,"ngFor","ngForOf"],["mat-list-item","","routerLink","/administration/notifications/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],["mat-list-item","","joyrideStep","notifTour",3,"click","next"],["color","primary","mat-list-icon","",1,"fa","fa-clock"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","notification_id"],["mat-sort-header","","style","flex:1;",3,"hide-for-mobile",4,"matHeaderCellDef"],["style","flex:1;",3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","description"],["mat-sort-header","","style","flex:2;",4,"matHeaderCellDef"],["style","flex:2;",4,"matCellDef"],["matColumnDef","is_enabled"],["style","flex:1;",3,"matTooltip","hide-for-mobile",4,"matCellDef"],["matColumnDef","notifications"],["style","flex:1;",4,"matHeaderCellDef"],["style","justify-content: flex-end;flex:1;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip","joyrideStep",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header","",2,"flex","1"],[2,"flex","1"],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],[2,"flex","1",3,"matTooltip"],["color","primary","class","label",4,"ngIf"],["color","warn","class","label",4,"ngIf"],["color","primary",1,"label"],["color","warn",1,"label"],[2,"justify-content","flex-end","flex","1"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip","joyrideStep"],[3,"value"],["color","primary","style","margin:5px;border-radius:0px;display:flex;","selectable","false","removable","true",3,"removed",4,"ngIf"],["color","primary","selectable","false","removable","true",2,"margin","5px","border-radius","0px","display","flex",3,"removed"],[2,"flex","1 1 auto"],["matChipRemove","","color","warn",1,"fa","fa-times",3,"matTooltip"]],template:function(t,e){if(1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,td,14,9,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,ed,2,0,"div",9),p.Oc(14,ud,28,14,"mat-card",10),p.Vb(),p.Vb(),p.Vb(),p.Wb(15,"mat-sidenav",11,12),p.dc("next",(function(){return e.paramCron()})),p.Wb(17,"mat-list",13),p.dc("next",(function(){return e.saveCron()})),p.Wb(18,"h3",14),p.Qc(19),p.ic(20,"translate"),p.Vb(),p.Wb(21,"form",15,16),p.Wb(23,"div",17),p.Wb(24,"div",18),p.Wb(25,"mat-form-field"),p.Wb(26,"mat-select",19),p.dc("ngModelChange",(function(t){return e.newCron.h=t})),p.ic(27,"translate"),p.ic(28,"translate"),p.Oc(29,md,2,2,"mat-option",20),p.Vb(),p.Vb(),p.Vb(),p.Wb(30,"div",18),p.Wb(31,"mat-form-field"),p.Wb(32,"mat-select",21),p.dc("ngModelChange",(function(t){return e.newCron.m=t})),p.ic(33,"translate"),p.ic(34,"translate"),p.Oc(35,fd,2,2,"mat-option",20),p.Vb(),p.Vb(),p.Vb(),p.Wb(36,"div",18),p.Wb(37,"mat-form-field"),p.Wb(38,"mat-select",22),p.dc("ngModelChange",(function(t){return e.newCron.dow=t})),p.ic(39,"translate"),p.ic(40,"translate"),p.Oc(41,gd,2,2,"mat-option",20),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(42,"div",17),p.Wb(43,"div",23),p.Wb(44,"mat-form-field"),p.Wb(45,"mat-select",24),p.dc("ngModelChange",(function(t){return e.newCron.mon=t})),p.ic(46,"translate"),p.ic(47,"translate"),p.Oc(48,vd,2,2,"mat-option",20),p.Vb(),p.Vb(),p.Vb(),p.Wb(49,"div",23),p.Wb(50,"mat-form-field"),p.Wb(51,"mat-select",25),p.dc("ngModelChange",(function(t){return e.newCron.dom=t})),p.ic(52,"translate"),p.ic(53,"translate"),p.Oc(54,yd,2,2,"mat-option",20),p.Vb(),p.Vb(),p.Vb(),p.Wb(55,"div",26),p.Wb(56,"mat-form-field"),p.Wb(57,"mat-select",27),p.dc("ngModelChange",(function(t){return e.newCron.cmd=t})),p.ic(58,"translate"),p.ic(59,"translate"),p.Oc(60,Dd,2,2,"mat-option",20),p.Vb(),p.Vb(),p.Vb(),p.Wb(61,"div",28),p.Wb(62,"button",29),p.dc("click",(function(){return e.saveCron()})),p.Qc(63),p.ic(64,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Rb(65,"mat-divider"),p.Wb(66,"div",30),p.Qc(67),p.ic(68,"translate"),p.Vb(),p.Wb(69,"mat-list",31),p.Wb(70,"h3",14),p.Qc(71),p.ic(72,"translate"),p.Vb(),p.Wb(73,"mat-chip-list",32,33),p.Oc(75,Cd,2,1,"span",34),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t){const t=p.zc(22);p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading),p.Db(1),p.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",(e.appService.getViewMode(),!1)),p.Db(4),p.Rc(p.jc(20,41,"lang.notificationSchedule")),p.Db(7),p.pc("title",p.jc(27,43,"lang.hour")),p.pc("placeholder",p.jc(28,45,"lang.hour")),p.oc("ngModel",e.newCron.h),p.Db(3),p.oc("ngForOf",e.hours),p.Db(3),p.pc("title",p.jc(33,47,"lang.minute")),p.pc("placeholder",p.jc(34,49,"lang.minute")),p.oc("ngModel",e.newCron.m),p.Db(3),p.oc("ngForOf",e.minutes),p.Db(3),p.pc("title",p.jc(39,51,"lang.day")),p.pc("placeholder",p.jc(40,53,"lang.day")),p.oc("ngModel",e.newCron.dow),p.Db(3),p.oc("ngForOf",e.dow),p.Db(4),p.pc("title",p.jc(46,55,"lang.month")),p.pc("placeholder",p.jc(47,57,"lang.month")),p.oc("ngModel",e.newCron.mon),p.Db(3),p.oc("ngForOf",e.months),p.Db(3),p.pc("title",p.jc(52,59,"lang.dayOfMonth")),p.pc("placeholder",p.jc(53,61,"lang.dayOfMonth")),p.oc("ngModel",e.newCron.dom),p.Db(3),p.oc("ngForOf",e.dom),p.Db(3),p.pc("title",p.jc(58,63,"lang.script")),p.pc("placeholder",p.jc(59,65,"lang.script")),p.oc("ngModel",e.newCron.cmd),p.Db(3),p.oc("ngForOf",e.authorizedNotification),p.Db(2),p.oc("disabled",!t.form.valid),p.Db(1),p.Rc(p.jc(64,67,"lang.save")),p.Db(4),p.Sc(" ",p.jc(68,69,"lang.NotificationScheduleInfo")," "),p.Db(4),p.Rc(p.jc(72,71,"lang.activeCron")),p.Db(4),p.oc("ngForOf",e.crontab)}},directives:[C.e,C.f,M.a,x.a,O.t,C.d,wt.a,W.a,wt.g,c.K,c.v,c.w,S.c,at.a,c.F,c.u,c.x,O.s,R.b,_.a,Un.d,wt.h,wt.d,o.f,It.a,wt.c,k.l,I.c,j.a,w.b,c.d,c.j,N.a,G.o,H.a,G.c,G.i,G.b,G.k,G.n,G.h,H.b,G.a,kt.b,G.j,G.m,o.d,k.p,Un.a,Un.e],pipes:[h.d],encapsulation:2}),t})();const Wd=["adminMenuTemplate"];function xd(t,e){1&t&&(p.Wb(0,"h3",14),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.actions")))}function Od(t,e){if(1&t){const t=p.Xb();p.Wb(0,"a",15),p.dc("click",(function(){return p.Dc(t),p.hc(2).createScript()}))("next",(function(){return p.Dc(t),p.hc(2).createScript()})),p.Rb(1,"mat-icon",16),p.Wb(2,"p",17),p.Qc(3),p.ic(4,"translate"),p.Vb(),p.Vb()}2&t&&(p.Db(3),p.Sc(" ",p.jc(4,1,"lang.createScriptNotification")," "))}function _d(t,e){if(1&t){const t=p.Xb();p.Wb(0,"a",18),p.dc("click",(function(){return p.Dc(t),p.hc(2).toggleNotif()})),p.Rb(1,"mat-icon",19),p.Wb(2,"p",17),p.Qc(3),p.ic(4,"translate"),p.Vb(),p.Vb()}2&t&&(p.Db(3),p.Sc(" ",p.jc(4,1,"lang.activateNotification")," "))}function Sd(t,e){if(1&t){const t=p.Xb();p.Wb(0,"a",18),p.dc("click",(function(){return p.Dc(t),p.hc(2).toggleNotif()})),p.Rb(1,"mat-icon",20),p.Wb(2,"p",17),p.Qc(3),p.ic(4,"translate"),p.Vb(),p.Vb()}2&t&&(p.Db(3),p.Sc(" ",p.jc(4,1,"lang.suspendNotification")," "))}function wd(t,e){if(1&t&&(p.Wb(0,"mat-nav-list"),p.Oc(1,xd,3,3,"h3",11),p.Oc(2,Od,5,3,"a",12),p.Oc(3,_d,5,3,"a",13),p.Oc(4,Sd,5,3,"a",13),p.Vb()),2&t){const t=p.hc();p.Db(1),p.oc("ngIf",!t.creationMode),p.Db(1),p.oc("ngIf",!t.creationMode&&!t.loading&&!t.notification.scriptcreated),p.Db(1),p.oc("ngIf",!t.creationMode&&!t.loading&&"N"==t.notification.is_enabled),p.Db(1),p.oc("ngIf",!t.creationMode&&!t.loading&&"Y"==t.notification.is_enabled)}}function Id(t,e){1&t&&(p.Wb(0,"div",21),p.Rb(1,"mat-spinner",22),p.Vb())}function jd(t,e){1&t&&(p.Wb(0,"div",46),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc(" ",p.jc(2,1,"lang.suspended"),""))}function kd(t,e){if(1&t&&(p.Wb(0,"mat-option",48),p.Rb(1,"mat-icon",49),p.Qc(2),p.Vb()),2&t){const t=p.hc().$implicit;p.oc("value",t.id),p.Db(2),p.Sc(" ",t.label_action," ")}}function Rd(t,e){if(1&t&&(p.Ub(0),p.Oc(1,kd,3,2,"mat-option",47),p.Tb()),2&t){const t=e.$implicit,i=p.hc(2);p.Db(1),p.oc("ngIf",!i.isNumber(t.id))}}function Td(t,e){if(1&t&&(p.Wb(0,"mat-option",48),p.Rb(1,"mat-icon",50),p.Qc(2),p.Vb()),2&t){const t=p.hc().$implicit;p.oc("value",t.id),p.Db(2),p.Sc(" ",t.label_action," ")}}function Pd(t,e){if(1&t&&(p.Ub(0),p.Oc(1,Td,3,2,"mat-option",47),p.Tb()),2&t){const t=e.$implicit,i=p.hc(2);p.Db(1),p.oc("ngIf",i.isNumber(t.id))}}function Qd(t,e){if(1&t&&(p.Wb(0,"mat-option",48),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t.template_id),p.Db(1),p.Sc(" ",t.template_label," ")}}function Fd(t,e){if(1&t&&(p.Wb(0,"mat-option",48),p.Qc(1),p.Vb()),2&t){const t=p.hc().$implicit;p.oc("value",t.id),p.Db(1),p.Rc(t.label)}}function Ld(t,e){if(1&t&&(p.Ub(0),p.Oc(1,Fd,2,2,"mat-option",47),p.Tb()),2&t){const t=e.$implicit;p.Db(1),p.oc("ngIf","dest_user"==t.id)}}function Ed(t,e){if(1&t&&(p.Wb(0,"mat-optgroup",32),p.ic(1,"translate"),p.Oc(2,Ld,2,1,"ng-container",33),p.Vb()),2&t){const t=p.hc(2);p.qc("label","",p.jc(1,2,"lang.memberUserDest")," :"),p.Db(2),p.oc("ngForOf",t.notification.data.diffusionType)}}function Ad(t,e){if(1&t&&(p.Wb(0,"mat-option",48),p.Qc(1),p.Vb()),2&t){const t=p.hc().$implicit;p.oc("value",t.id),p.Db(1),p.Rc(t.label)}}function Ud(t,e){if(1&t&&(p.Ub(0),p.Oc(1,Ad,2,2,"mat-option",47),p.Tb()),2&t){const t=e.$implicit;p.Db(1),p.oc("ngIf","copy_list"==t.id)}}function $d(t,e){if(1&t&&(p.Wb(0,"mat-optgroup",32),p.ic(1,"translate"),p.Oc(2,Ud,2,1,"ng-container",33),p.Vb()),2&t){const t=p.hc(2);p.qc("label","",p.jc(1,2,"lang.memberUsersCopy")," :"),p.Db(2),p.oc("ngForOf",t.notification.data.diffusionType)}}function zd(t,e){if(1&t&&(p.Wb(0,"mat-option",48),p.Qc(1),p.Vb()),2&t){const t=p.hc().$implicit;p.oc("value",t.id),p.Db(1),p.Rc(t.label)}}function Nd(t,e){if(1&t&&(p.Ub(0),p.Oc(1,zd,2,2,"mat-option",47),p.Tb()),2&t){const t=e.$implicit,i=p.hc(2);p.Db(1),p.oc("ngIf","group"==t.id||"entity"==t.id&&"baskets"!=i.notification.event_id||"user"==t.id&&"baskets"!=i.notification.event_id)}}function Hd(t,e){if(1&t&&(p.Wb(0,"mat-option",48),p.Qc(1),p.Vb()),2&t){const t=p.hc().$implicit;p.oc("value",t.id),p.Db(1),p.Rc(t.label)}}function Bd(t,e){if(1&t&&(p.Ub(0),p.Oc(1,Hd,2,2,"mat-option",47),p.Tb()),2&t){const t=e.$implicit;p.Db(1),p.oc("ngIf","group"!=t.id&&"entity"!=t.id&&"user"!=t.id&&"copy_list"!=t.id&&"group"!=t.id&&"dest_user"!=t.id)}}function Xd(t,e){if(1&t&&(p.Wb(0,"mat-optgroup",32),p.ic(1,"translate"),p.Oc(2,Bd,2,1,"ng-container",33),p.Vb()),2&t){const t=p.hc(2);p.qc("label","",p.jc(1,2,"lang.others")," :"),p.Db(2),p.oc("ngForOf",t.notification.data.diffusionType)}}function Gd(t,e){if(1&t&&(p.Wb(0,"mat-option",48),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t.group_id),p.Db(1),p.Sc(" ",t.group_desc," ")}}function qd(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-form-field"),p.Wb(1,"mat-select",51),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).notification.diffusion_properties=e})),p.ic(2,"translate"),p.ic(3,"translate"),p.Oc(4,Gd,2,2,"mat-option",36),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.Db(1),p.pc("title",p.jc(2,4,"lang.memberDiffTypeUsers")),p.pc("placeholder",p.jc(3,6,"lang.memberDiffTypeUsers")),p.oc("ngModel",t.notification.diffusion_properties),p.Db(3),p.oc("ngForOf",t.notification.data.groups)}}function Kd(t,e){if(1&t&&(p.Wb(0,"mat-option",48),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t.id),p.Db(1),p.Sc(" ",t.label," ")}}function Jd(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-form-field"),p.Wb(1,"mat-select",51),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).notification.diffusion_properties=e})),p.ic(2,"translate"),p.ic(3,"translate"),p.Oc(4,Kd,2,2,"mat-option",36),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.Db(1),p.pc("title",p.jc(2,4,"lang.memberDiffTypeUsers")),p.pc("placeholder",p.jc(3,6,"lang.memberDiffTypeUsers")),p.oc("ngModel",t.notification.diffusion_properties),p.Db(3),p.oc("ngForOf",t.notification.data.users)}}function Yd(t,e){if(1&t&&(p.Wb(0,"mat-option",48),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t.entity_id),p.Db(1),p.Sc(" ",t.entity_label," ")}}function Zd(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-form-field"),p.Wb(1,"mat-select",51),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).notification.diffusion_properties=e})),p.ic(2,"translate"),p.ic(3,"translate"),p.Oc(4,Yd,2,2,"mat-option",36),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.Db(1),p.pc("title",p.jc(2,4,"lang.memberDiffTypeUsers")),p.pc("placeholder",p.jc(3,6,"lang.memberDiffTypeUsers")),p.oc("ngModel",t.notification.diffusion_properties),p.Db(3),p.oc("ngForOf",t.notification.data.entities)}}function tb(t,e){if(1&t&&(p.Wb(0,"mat-option",48),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t.id),p.Db(1),p.Sc(" ",t.label_status," ")}}function eb(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-form-field"),p.Wb(1,"mat-select",52),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).notification.diffusion_properties=e})),p.ic(2,"translate"),p.ic(3,"translate"),p.ic(4,"translate"),p.Oc(5,tb,2,2,"mat-option",36),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.Db(1),p.qc("title","",p.jc(2,5,"lang.selectedDocumentStatus")," (optionnel)"),p.rc("placeholder","",p.jc(3,7,"lang.selectedDocumentStatus")," (",p.jc(4,9,"lang.optional"),")"),p.oc("ngModel",t.notification.diffusion_properties),p.Db(4),p.oc("ngForOf",t.notification.data.status)}}function ib(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-card",23),p.Oc(1,jd,3,3,"div",24),p.Wb(2,"form",25,26),p.dc("ngSubmit",(function(){return p.Dc(t),p.hc().onSubmit()})),p.Wb(4,"div",27),p.Wb(5,"div",28),p.Wb(6,"mat-form-field"),p.Wb(7,"input",29),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().notification.notification_id=e})),p.ic(8,"translate"),p.ic(9,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(10,"div",27),p.Wb(11,"div",28),p.Wb(12,"mat-form-field"),p.Wb(13,"input",30),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().notification.description=e})),p.ic(14,"translate"),p.ic(15,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(16,"div",27),p.Wb(17,"div",28),p.Wb(18,"mat-form-field"),p.Wb(19,"mat-select",31),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().notification.event_id=e})),p.ic(20,"translate"),p.ic(21,"translate"),p.Wb(22,"mat-optgroup",32),p.ic(23,"translate"),p.Oc(24,Rd,2,1,"ng-container",33),p.Vb(),p.Wb(25,"mat-optgroup",32),p.ic(26,"translate"),p.Oc(27,Pd,2,1,"ng-container",33),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(28,"div",27),p.Wb(29,"div",34),p.Wb(30,"mat-form-field"),p.Wb(31,"mat-select",35),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().notification.template_id=e})),p.ic(32,"translate"),p.ic(33,"translate"),p.Oc(34,Qd,2,2,"mat-option",36),p.Vb(),p.Vb(),p.Vb(),p.Wb(35,"div",37),p.Wb(36,"mat-form-field"),p.Wb(37,"mat-select",38),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().notification.attachfor_type=e})),p.ic(38,"translate"),p.ic(39,"translate"),p.Wb(40,"mat-option",39),p.Qc(41),p.ic(42,"translate"),p.Vb(),p.Wb(43,"mat-option",40),p.Qc(44),p.ic(45,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(46,"div",27),p.Wb(47,"div",37),p.Wb(48,"mat-form-field"),p.Wb(49,"mat-select",41),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().notification.diffusion_type=e})),p.ic(50,"translate"),p.ic(51,"translate"),p.Oc(52,Ed,3,4,"mat-optgroup",42),p.Oc(53,$d,3,4,"mat-optgroup",42),p.Wb(54,"mat-optgroup",32),p.ic(55,"translate"),p.Oc(56,Nd,2,1,"ng-container",33),p.Vb(),p.Oc(57,Xd,3,4,"mat-optgroup",42),p.Vb(),p.Vb(),p.Vb(),p.Wb(58,"div",34),p.Oc(59,qd,5,8,"mat-form-field",43),p.Oc(60,Jd,5,8,"mat-form-field",43),p.Oc(61,Zd,5,8,"mat-form-field",43),p.Oc(62,eb,6,11,"mat-form-field",43),p.Vb(),p.Vb(),p.Wb(63,"div",27),p.Wb(64,"div",44),p.Wb(65,"button",45),p.Qc(66),p.ic(67,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.zc(3),e=p.hc();p.Db(1),p.oc("ngIf","N"==e.notification.is_enabled),p.Db(6),p.pc("title",p.jc(8,38,"lang.id")),p.pc("placeholder",p.jc(9,40,"lang.id")),p.oc("ngModel",e.notification.notification_id)("disabled",!e.creationMode),p.Db(6),p.pc("title",p.jc(14,42,"lang.description")),p.pc("placeholder",p.jc(15,44,"lang.description")),p.oc("ngModel",e.notification.description),p.Db(6),p.pc("title",p.jc(20,46,"lang.NotificationEvent")),p.pc("placeholder",p.jc(21,48,"lang.NotificationEvent")),p.oc("ngModel",e.notification.event_id),p.Db(3),p.qc("label","",p.jc(23,50,"lang.triggerSystem")," :"),p.Db(2),p.oc("ngForOf",e.notification.data.event),p.Db(1),p.qc("label","",p.jc(26,52,"lang.triggerAction")," :"),p.Db(2),p.oc("ngForOf",e.notification.data.event),p.Db(4),p.pc("title",p.jc(32,54,"lang.notificationModel")),p.pc("placeholder",p.jc(33,56,"lang.notificationModel")),p.oc("ngModel",e.notification.template_id),p.Db(3),p.oc("ngForOf",e.notification.data.template),p.Db(3),p.pc("title",p.jc(38,58,"lang.attachment")),p.pc("placeholder",p.jc(39,60,"lang.attachment")),p.oc("ngModel",e.notification.attachfor_type),p.Db(4),p.Sc(" ",p.jc(42,62,"lang.noAttachment")," "),p.Db(3),p.Sc(" ",p.jc(45,64,"lang.notificationJoinDocument")," "),p.Db(5),p.pc("title",p.jc(50,66,"lang.sendTo")),p.pc("placeholder",p.jc(51,68,"lang.sendTo")),p.oc("ngModel",e.notification.diffusion_type),p.Db(3),p.oc("ngIf","baskets"!=e.notification.event_id),p.Db(1),p.oc("ngIf","baskets"!=e.notification.event_id),p.Db(1),p.qc("label","",p.jc(55,70,"lang.memberAllUsers")," :"),p.Db(2),p.oc("ngForOf",e.notification.data.diffusionType),p.Db(1),p.oc("ngIf","baskets"!=e.notification.event_id),p.Db(2),p.oc("ngIf","group"==e.notification.diffusion_type),p.Db(1),p.oc("ngIf","user"==e.notification.diffusion_type),p.Db(1),p.oc("ngIf","entity"==e.notification.diffusion_type),p.Db(1),p.oc("ngIf","dest_user"==e.notification.diffusion_type||"copy_list"==e.notification.diffusion_type||"dest_entity"==e.notification.diffusion_type||"dest_user_visa"==e.notification.diffusion_type||"dest_user_sign"==e.notification.diffusion_type),p.Db(3),p.oc("disabled",!t.form.valid),p.Db(1),p.Rc(p.jc(67,72,"lang.save"))}}let ab=(()=>{class t{constructor(t,e,i,a,n,o,s,c){this.translate=t,this.http=e,this.route=i,this.router=a,this.notify=n,this.headerService=o,this.appService=s,this.viewContainerRef=c,this.notification={diffusionType_label:null},this.loading=!1}ngOnInit(){this.loading=!0,this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.route.params.subscribe(t=>{void 0===t.identifier?(this.headerService.setHeader(this.translate.instant("lang.notificationCreation")),this.creationMode=!0,this.http.get("../rest/administration/notifications/new").subscribe(t=>{this.notification=t.notification,this.notification.attachfor_properties=[],this.loading=!1},t=>{this.notify.error(t.error.errors)})):(this.creationMode=!1,this.http.get("../rest/notifications/"+t.identifier).subscribe(t=>{this.headerService.setHeader(this.translate.instant("lang.notificationModification"),t.notification.description),this.notification=t.notification,this.notification.attachfor_properties=[],this.loading=!1},t=>{this.notify.error(t.error.errors)}))})}createScript(){this.http.post("../rest/scriptNotification",this.notification).subscribe(t=>{this.notification.scriptcreated=t,this.notify.success(this.translate.instant("lang.scriptCreated"))},t=>{this.notify.error(t.error.errors)})}onSubmit(){this.creationMode?(this.notification.is_enabled="Y",this.http.post("../rest/notifications",this.notification).subscribe(t=>{this.router.navigate(["/administration/notifications"]),this.notify.success(this.translate.instant("lang.notificationAdded"))},t=>{this.notify.error(t.error.errors)})):this.http.put("../rest/notifications/"+this.notification.notification_sid,this.notification).subscribe(t=>{this.router.navigate(["/administration/notifications"]),this.notify.success(this.translate.instant("lang.notificationUpdated"))},t=>{this.notify.error(t.error.errors)})}toggleNotif(){this.notification.is_enabled="Y"===this.notification.is_enabled?"N":"Y",this.http.put("../rest/notifications/"+this.notification.notification_sid,this.notification).subscribe(t=>{this.notify.success(this.translate.instant("lang.notificationUpdated"))},t=>{this.notify.error(t.error.errors)})}isNumber(t){return $.isNumeric(t)}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(o.a),p.Qb(o.c),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&p.Kc(Wd,!0),2&t&&p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first)},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader","",4,"ngIf"],["mat-list-item","","joyrideStep","createScriptTour",3,"click","next",4,"ngIf"],["mat-list-item","",3,"click",4,"ngIf"],["mat-subheader",""],["mat-list-item","","joyrideStep","createScriptTour",3,"click","next"],["color","primary","mat-list-icon","",1,"fa","fa-terminal"],["mat-line",""],["mat-list-item","",3,"click"],["color","accent","mat-list-icon","",1,"fa","fa-play"],["color","warn","mat-list-icon","",1,"fa","fa-pause"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],["class","text-warning","style","position: absolute;opacity: 0.1;font-size: 120px;transform: rotate(324deg);-webkit-transform: rotate(324deg);margin-left: 25%;margin-top: 90px;",4,"ngIf"],[1,"form-horizontal",3,"ngSubmit"],["notificationsFormUp","ngForm"],[1,"form-group"],[1,"col-md-12"],["matInput","","required","","name","notification_id","id","notification_id","type","text","pattern","^[\\w.-]*$","maxlength","50",3,"ngModel","title","placeholder","disabled","ngModelChange"],["matInput","","required","","name","description","id","description","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["id","event_id","name","event_id","required","",3,"title","placeholder","ngModel","ngModelChange"],[3,"label"],[4,"ngFor","ngForOf"],[1,"col-md-8"],["id","template_id","name","template_id","required","",3,"title","placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4"],["id","attachfor_type","name","attachfor_type",3,"title","placeholder","ngModel","ngModelChange"],["value",""],["value","main_document"],["id","diffusion_type","name","diffusion_type","required","",3,"title","placeholder","ngModel","ngModelChange"],[3,"label",4,"ngIf"],[4,"ngIf"],[1,"col-sm-12",2,"text-align","center"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[1,"text-warning",2,"position","absolute","opacity","0.1","font-size","120px","transform","rotate(324deg)","-webkit-transform","rotate(324deg)","margin-left","25%","margin-top","90px"],[3,"value",4,"ngIf"],[3,"value"],["color","primary",1,"fa","fa-cog",2,"height","auto"],["color","primary",1,"fa","fa-exchange-alt",2,"height","auto"],["id","diffusion_properties","name","diffusion_properties","required","","multiple","",3,"title","placeholder","ngModel","ngModelChange"],["id","diffusion_properties","name","diffusion_properties","multiple","",3,"title","placeholder","ngModel","ngModelChange"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,wd,5,4,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,Id,2,0,"div",9),p.Oc(14,ib,68,74,"mat-card",10),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading))},directives:[C.e,C.f,M.a,x.a,O.t,wt.h,wt.g,wt.d,W.a,It.a,wt.c,k.l,I.c,j.a,c.K,c.v,c.w,S.c,w.b,c.d,c.F,c.B,c.p,c.u,c.x,at.a,k.o,O.s,k.p,R.b],pipes:[h.d],encapsulation:2}),t})();var nb=i("VdM8");const ob=["adminMenuTemplate"],sb=["appHistoryList"];function cb(t,e){if(1&t&&(p.Wb(0,"a",21),p.Rb(1,"mat-icon",22),p.Wb(2,"p",23),p.Qc(3),p.Vb(),p.Vb()),2&t){const t=e.$implicit;p.Ib("active",t.current),p.oc("routerLink",t.route),p.Db(1),p.Fb(t.icon),p.Db(2),p.Sc(" ",t.label," ")}}function rb(t,e){if(1&t&&(p.Wb(0,"mat-nav-list"),p.Oc(1,cb,4,6,"a",20),p.Vb()),2&t){const t=p.hc();p.Db(1),p.oc("ngForOf",t.subMenus)}}function lb(t,e){if(1&t&&p.Rb(0,"mat-datepicker-toggle",24),2&t){p.hc();const t=p.zc(19);p.oc("for",t)}}function db(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",25),p.dc("click",(function(e){p.Dc(t),p.hc();const i=p.zc(33);return e.stopPropagation(),i.startDateFilter="",i.filterStartDate()})),p.Rb(1,"mat-icon",26),p.Vb()}if(2&t){const t=p.hc();p.oc("title",t.translate.instant("lang.eraseValue"))}}function bb(t,e){if(1&t&&p.Rb(0,"mat-datepicker-toggle",24),2&t){p.hc();const t=p.zc(28);p.oc("for",t)}}function pb(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",25),p.dc("click",(function(e){p.Dc(t),p.hc();const i=p.zc(33);return e.stopPropagation(),i.endDateFilter="",i.filterEndDate()})),p.Rb(1,"mat-icon",26),p.Vb()}if(2&t){const t=p.hc();p.oc("title",t.translate.instant("lang.eraseValue"))}}let hb=(()=>{class t{constructor(t,e,i,a,n,o,s){this.translate=t,this.http=e,this.appService=i,this.functions=a,this.privilegeService=n,this.headerService=o,this.viewContainerRef=s,this.startDateFilter="",this.endDateFilter="",this.subMenus=[{icon:"fa fa-history",route:"/administration/history",label:this.translate.instant("lang.history"),current:!0},{icon:"fa fa-history",route:"/administration/history-batch",label:this.translate.instant("lang.historyBatch"),current:!1}]}ngOnInit(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.history").toLowerCase(),"",""),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.subMenus=this.privilegeService.hasCurrentUserPrivilege("view_history_batch")?[{icon:"fa fa-history",route:"/administration/history",label:this.translate.instant("lang.history"),current:!0},{icon:"fa fa-history",route:"/administration/history-batch",label:this.translate.instant("lang.historyBatch"),current:!1}]:[{icon:"fa fa-history",route:"/administration/history",label:this.translate.instant("lang.history"),current:!0}]}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(f.a),p.Qb(D.a),p.Qb(g.a),p.Qb(m.a),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["admin-history"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(ob,!0),p.Xc(sb,!0)),2&t&&(p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.appHistoryList=i.first))},decls:34,vars:26,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[2,"display","grid","grid-template-columns","repeat(2, 1fr)","grid-gap","10px","width","100%"],[1,"dateFilter",2,"cursor","pointer",3,"click"],[2,"color","white"],["matInput","","readonly","",2,"cursor","pointer",3,"ngModel","matDatepicker","placeholder","max","ngModelChange","dateChange"],["matSuffix","",3,"for",4,"ngIf"],[3,"touchUi"],["startPicker",""],["mat-button","","color","warn","matSuffix","","mat-icon-button","",3,"title","click",4,"ngIf"],["matInput","","readonly","",2,"cursor","pointer",3,"ngModel","matDatepicker","placeholder","min","ngModelChange","dateChange"],["endPicker",""],[1,"container"],[1,"container-content"],["appHistoryList",""],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],["mat-line",""],["matSuffix","",3,"for"],["mat-button","","color","warn","matSuffix","","mat-icon-button","",3,"title","click"],["color","warn",1,"fa","fa-calendar-times"]],template:function(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-sidenav-container",0),p.Oc(1,rb,2,1,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Wb(10,"div",6),p.Wb(11,"div",7),p.Wb(12,"mat-form-field",8),p.dc("click",(function(){return p.Dc(t),p.zc(19).open()})),p.Wb(13,"mat-label",9),p.Qc(14),p.ic(15,"translate"),p.Vb(),p.Wb(16,"input",10),p.dc("ngModelChange",(function(e){return p.Dc(t),p.zc(33).startDateFilter=e}))("dateChange",(function(){return p.Dc(t),p.zc(33).filterStartDate()})),p.Vb(),p.Oc(17,lb,1,1,"mat-datepicker-toggle",11),p.Rb(18,"mat-datepicker",12,13),p.Oc(20,db,2,1,"button",14),p.Vb(),p.Wb(21,"mat-form-field",8),p.dc("click",(function(){return p.Dc(t),p.zc(28).open()})),p.Wb(22,"mat-label",9),p.Qc(23),p.ic(24,"translate"),p.Vb(),p.Wb(25,"input",15),p.dc("ngModelChange",(function(e){return p.Dc(t),p.zc(33).endDateFilter=e}))("dateChange",(function(){return p.Dc(t),p.zc(33).filterEndDate()})),p.Vb(),p.Oc(26,bb,1,1,"mat-datepicker-toggle",11),p.Rb(27,"mat-datepicker",12,16),p.Oc(29,pb,2,1,"button",14),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(30,"div",17),p.Wb(31,"div",18),p.Rb(32,"app-history-list",null,19),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.zc(19),i=p.zc(28),a=p.zc(33);p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(4),p.Sc("",p.jc(15,22,"lang.since")," "),p.Db(2),p.oc("ngModel",a.startDateFilter)("matDatepicker",t)("placeholder",e.translate.instant("lang.since"))("max",a.endDateFilter),p.Db(1),p.oc("ngIf",!a.startDateFilter),p.Db(1),p.oc("touchUi",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",a.startDateFilter),p.Db(3),p.Sc("",p.jc(24,24,"lang.until")," "),p.Db(2),p.oc("ngModel",a.endDateFilter)("matDatepicker",i)("placeholder",e.translate.instant("lang.until"))("min",a.startDateFilter),p.Db(1),p.oc("ngIf",!a.endDateFilter),p.Db(1),p.oc("touchUi",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",a.endDateFilter),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode())}},directives:[C.e,C.f,M.a,x.a,S.c,S.g,w.b,c.d,Le.h,c.u,c.x,O.t,Le.f,nb.a,wt.h,O.s,wt.d,o.f,It.a,wt.c,k.l,Le.j,S.j,R.b],pipes:[h.d],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}.paginatorResultList[_ngcontent-%COMP%]    .mat-paginator-range-label{justify-content:flex-end;display:flex}.filterList[_ngcontent-%COMP%]    .mat-optgroup-label{color:#135f7f;position:-webkit-sticky;position:sticky;top:0;background:#fff!important;z-index:1}.label[_ngcontent-%COMP%]{cursor:pointer;margin:5px}.bg-head-content[_ngcontent-%COMP%]     .mat-focused .mat-form-field-label{color:#fff!important}.bg-head-content[_ngcontent-%COMP%]    .mat-form-field-ripple, .bg-head-content[_ngcontent-%COMP%]    .mat-form-field-underline{background-color:#fff!important}.bg-head-content[_ngcontent-%COMP%]   .mat-datepicker-toggle[_ngcontent-%COMP%], .bg-head-content[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#fff}"]}),t})();var ub=i("XNiG"),mb=i("VRyK"),fb=i("1G5W"),gb=i("eIep"),vb=i("8IW6"),yb=i("ZI/H");const Db=["adminMenuTemplate"],Vb=["tableHistoryListSort"],Cb=["autoCompleteInput"];function Mb(t,e){if(1&t&&(p.Wb(0,"a",53),p.Rb(1,"mat-icon",54),p.Wb(2,"p",55),p.Qc(3),p.Vb(),p.Vb()),2&t){const t=e.$implicit;p.Ib("active",t.current),p.oc("routerLink",t.route),p.Db(1),p.Fb(t.icon),p.Db(2),p.Sc(" ",t.label," ")}}function Wb(t,e){if(1&t&&(p.Wb(0,"mat-nav-list"),p.Oc(1,Mb,4,6,"a",52),p.Vb()),2&t){const t=p.hc();p.Db(1),p.oc("ngForOf",t.subMenus)}}function xb(t,e){if(1&t&&p.Rb(0,"mat-datepicker-toggle",56),2&t){p.hc();const t=p.zc(19);p.oc("for",t)}}function Ob(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",57),p.dc("click",(function(e){p.Dc(t);const i=p.hc();return e.stopPropagation(),i.startDateFilter="",i.filterStartDate()})),p.Rb(1,"mat-icon",58),p.Vb()}if(2&t){const t=p.hc();p.oc("title",t.translate.instant("lang.eraseValue"))}}function _b(t,e){if(1&t&&p.Rb(0,"mat-datepicker-toggle",56),2&t){p.hc();const t=p.zc(28);p.oc("for",t)}}function Sb(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",57),p.dc("click",(function(e){p.Dc(t);const i=p.hc();return e.stopPropagation(),i.endDateFilter="",i.filterEndDate()})),p.Rb(1,"mat-icon",58),p.Vb()}if(2&t){const t=p.hc();p.oc("title",t.translate.instant("lang.eraseValue"))}}function wb(t,e){1&t&&p.Rb(0,"mat-spinner")}function Ib(t,e){if(1&t&&(p.Wb(0,"div",59),p.Oc(1,wb,1,0,"mat-spinner",28),p.Vb()),2&t){const t=p.hc();p.Db(1),p.oc("ngIf",t.isLoadingResults)}}function jb(t,e){1&t&&(p.Wb(0,"mat-option",60),p.Wb(1,"div",61),p.Rb(2,"mat-spinner",62),p.Vb(),p.Vb())}function kb(t,e){if(1&t&&(p.Wb(0,"mat-option",66),p.Qc(1),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2).$implicit,a=p.hc(2);p.Lc("color",t.used?"":a.filterColor[i.key]),p.oc("id",i.key)("value",t)("disabled",t.used),p.Db(1),p.Sc(" ",t.label," ")}}function Rb(t,e){if(1&t&&(p.Wb(0,"mat-optgroup",64),p.Oc(1,kb,2,6,"mat-option",65),p.ic(2,"sortBy"),p.ic(3,"async"),p.Vb()),2&t){const t=p.hc().$implicit,e=p.hc(2);p.oc("label",e.translate.instant("lang."+t.key)),p.Db(1),p.oc("ngForOf",p.kc(2,2,p.jc(3,5,e.filteredList[t.key]),"label"))}}function Tb(t,e){if(1&t&&(p.Ub(0),p.Oc(1,Rb,4,7,"mat-optgroup",63),p.ic(2,"async"),p.Tb()),2&t){const t=e.$implicit,a=p.hc(2);var i;p.Db(1),p.oc("ngIf",(null==(i=p.jc(2,1,a.filteredList[t.key]))?null:i.length)>0)}}function Pb(t,e){if(1&t&&(p.Ub(0),p.Oc(1,Tb,3,3,"ng-container",34),p.ic(2,"keyvalue"),p.Tb()),2&t){const t=p.hc();p.Db(1),p.oc("ngForOf",p.jc(2,1,t.filterList))}}function Qb(t,e){if(1&t){const t=p.Xb();p.Wb(0,"span",68),p.dc("click",(function(){p.Dc(t);const i=e.$implicit,a=e.index,n=p.hc(2).$implicit;return p.hc().removeItemFilter(i,n.key,a)})),p.Qc(1),p.Rb(2,"i",69),p.Vb()}if(2&t){const t=e.$implicit,i=p.hc(2).$implicit,a=p.hc();p.Lc("background",a.filterColor[i.key]),p.oc("title",a.translate.instant("lang."+i.key)),p.Db(1),p.Sc("",t.label," ")}}function Fb(t,e){if(1&t&&(p.Ub(0),p.Oc(1,Qb,3,4,"span",67),p.Tb()),2&t){const t=p.hc().$implicit,e=p.hc();p.Db(1),p.oc("ngForOf",e.filterUsed[t.key])}}const Lb=function(){return["startDate","endDate"]};function Eb(t,e){if(1&t&&(p.Ub(0),p.Oc(1,Fb,2,1,"ng-container",28),p.Tb()),2&t){const t=e.$implicit;p.Db(1),p.oc("ngIf",-1===p.uc(1,Lb).indexOf(t.key))}}function Ab(t,e){1&t&&(p.Wb(0,"mat-header-cell",70),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.event")))}function Ub(t,e){if(1&t&&(p.Wb(0,"mat-cell",71),p.ic(1,"fullDate"),p.Qc(2),p.ic(3,"ucfirst"),p.ic(4,"timeAgo"),p.Vb()),2&t){const t=e.$implicit;p.oc("title",p.jc(1,2,t.event_date)),p.Db(2),p.Sc(" ",p.jc(3,4,p.kc(4,6,t.event_date,"full"))," ")}}function $b(t,e){1&t&&(p.Wb(0,"mat-header-cell",70),p.Qc(1),p.ic(2,"ucfirst"),p.ic(3,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc("",p.jc(2,1,p.jc(3,3,"lang.totalProcessed"))," "))}function zb(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Ib("empty",0===t.total_processed),p.Db(1),p.Sc(" ",t.total_processed," ")}}function Nb(t,e){1&t&&(p.Wb(0,"mat-header-cell",70),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc("",p.jc(2,1,"lang.totalErrors")," "))}function Hb(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Ib("empty",0===t.total_errors)("error",t.total_errors>0),p.Db(1),p.Sc(" ",t.total_errors," ")}}function Bb(t,e){1&t&&(p.Wb(0,"mat-header-cell",72),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc("",p.jc(2,1,"lang.information")," "))}function Xb(t,e){if(1&t&&(p.Wb(0,"mat-cell",73),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.info," ")}}function Gb(t,e){1&t&&(p.Wb(0,"mat-header-cell",70),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc("",p.jc(2,1,"lang.module")," "))}function qb(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.module_name," ")}}function Kb(t,e){1&t&&p.Rb(0,"mat-header-row")}function Jb(t,e){1&t&&p.Rb(0,"mat-row")}let Yb=(()=>{class t{constructor(t,e,i,a,n,o,s,r,l,d){this.translate=t,this.http=e,this.notify=i,this.headerService=a,this.appService=n,this.dialog=o,this.functions=s,this.latinisePipe=r,this.privilegeService=l,this.viewContainerRef=d,this.loading=!1,this.filtersChange=new p.o,this.displayedColumnsHistory=["event_date","total_processed","total_errors","info","module_name"],this.isLoadingResults=!0,this.routeUrl="../rest/batchHistory",this.resultsLength=0,this.searchHistory=new c.i,this.startDateFilter="",this.endDateFilter="",this.filterUrl="",this.filterList=null,this.filteredList={},this.filterUsed={},this.filterColor={startDate:"#b5cfd8",endDate:"#7393a7",totalErrors:"#fc6471",modules:"#009dc5"},this.loadingFilters=!0,this.destroy$=new ub.a,this.subMenus=[]}ngOnInit(){this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.subMenus=this.privilegeService.hasCurrentUserPrivilege("view_history")?[{icon:"fa fa-history",route:"/administration/history",label:this.translate.instant("lang.history"),current:!1},{icon:"fa fa-history",route:"/administration/history-batch",label:this.translate.instant("lang.historyBatch"),current:!0}]:[{icon:"fa fa-history",route:"/administration/history-batch",label:this.translate.instant("lang.historyBatch"),current:!0}],this.loading=!0,this.initHistoryList()}initHistoryList(){this.resultListDatabase=new Zb(this.http),this.paginator.pageIndex=0,this.sort.active="event_date",this.sort.direction="desc",this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),Object(mb.a)(this.sort.sortChange,this.paginator.page,this.filtersChange).pipe(Object(fb.a)(this.destroy$),Object(r.a)({}),Object(gb.a)(()=>(this.isLoadingResults=!0,this.resultListDatabase.getRepoIssues(this.sort.active,this.sort.direction,this.paginator.pageIndex,this.routeUrl,this.filterUrl))),Object(l.a)(t=>(this.isLoadingResults=!1,t=this.processPostData(t),this.resultsLength=t.count,this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.historyBatch").toLowerCase(),"",""),t.history)),Object(b.a)(t=>(this.notify.handleErrors(t),this.isLoadingResults=!1,Object(s.a)([])))).subscribe(t=>this.data=t)}processPostData(t){return t.history=t.history.map(t=>Object.assign(Object.assign({},t),{total_errors:null===t.total_errors?0:t.total_errors})),t}refreshDao(){this.paginator.pageIndex=0,this.filtersChange.emit()}initFilterListHistory(){null===this.filterList&&(this.filterList={},this.loadingFilters=!0,this.http.get("../rest/batchHistory/availableFilters").pipe(Object(l.a)(t=>{let e={modules:[{}],totalErrors:[{}]};return e.modules=t.modules,e.totalErrors=[{id:"errorElement",label:this.translate.instant("lang.totalErrors")}],e}),Object(d.a)(t=>{Object.keys(t).forEach(e=>{this.functions.empty(this.filterList[e])&&(this.filterList[e]=[],this.filteredList[e]=[]),t[e].forEach(t=>{this.filterList[e].push(t)}),this.filteredList[e]=this.searchHistory.valueChanges.pipe(Object(r.a)(""),Object(l.a)(t=>t?this.filter(t,e):this.filterList[e].slice()))})}),Object(vt.a)(()=>this.loadingFilters=!1),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(s.a)(!1)))).subscribe())}filterStartDate(){this.functions.empty(this.filterUsed.startDate)&&(this.filterUsed.startDate=[]),this.filterUsed.startDate[0]={id:this.functions.empty(this.startDateFilter)?"":this.functions.formatDateObjectToDateString(this.startDateFilter),label:this.functions.empty(this.startDateFilter)?"":this.functions.formatDateObjectToDateString(this.startDateFilter)},this.generateUrlFilter(),this.refreshDao()}filterEndDate(){this.functions.empty(this.filterUsed.endDate)&&(this.filterUsed.endDate=[]),this.filterUsed.endDate[0]={id:this.functions.empty(this.endDateFilter)?"":this.functions.formatDateObjectToDateString(this.endDateFilter,!0),label:this.functions.empty(this.endDateFilter)?"":this.functions.formatDateObjectToDateString(this.endDateFilter)},this.generateUrlFilter(),this.refreshDao()}addItemFilter(t){t.value.used=!0,this.functions.empty(this.filterUsed[t.id])&&(this.filterUsed[t.id]=[]),this.filterUsed[t.id].push(t.value),this.generateUrlFilter(),this.searchHistory.reset(),this.autoCompleteInput.nativeElement.blur(),this.refreshDao()}removeItemFilter(t,e,i){t.used=!1,this.filterUsed[e].splice(i,1),this.generateUrlFilter(),this.refreshDao()}generateUrlFilter(){this.filterUrl="";let t=[];Object.keys(this.filterUsed).forEach(e=>{this.filterUsed[e].forEach(i=>{this.functions.empty(i.id)||(["startDate","endDate"].indexOf(e)>-1?t.push(`${e}=${i.id}`):t.push(`${e}[]=${i.id}`))})}),t.length>0&&(this.filterUrl="&"+t.join("&"))}filter(t,e){if("string"==typeof t){const i=this.latinisePipe.transform(t.toLowerCase());return this.filterList[e].filter(t=>this.latinisePipe.transform(t.label.toLowerCase()).includes(i))}return this.filterList[e]}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a),p.Qb(z.b),p.Qb(D.a),p.Qb(v.c),p.Qb(g.a),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(Db,!0),p.Kc(N.a,!0),p.Kc(Vb,!0),p.Kc(Cb,!0)),2&t&&(p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.paginator=i.first),p.yc(i=p.ec())&&(e.sort=i.first),p.yc(i=p.ec())&&(e.autoCompleteInput=i.first))},decls:72,vars:45,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[2,"display","grid","grid-template-columns","repeat(2, 1fr)","grid-gap","10px","width","100%"],[1,"dateFilter",2,"cursor","pointer",3,"click"],[2,"color","white"],["matInput","","readonly","",2,"cursor","pointer",3,"ngModel","matDatepicker","placeholder","max","ngModelChange","dateChange"],["matSuffix","",3,"for",4,"ngIf"],[3,"touchUi"],["startPicker",""],["mat-button","","color","warn","matSuffix","","mat-icon-button","",3,"title","click",4,"ngIf"],["matInput","","readonly","",2,"cursor","pointer",3,"ngModel","matDatepicker","placeholder","min","ngModelChange","dateChange"],["endPicker",""],[1,"container"],[1,"container-content"],["class","example-loading-shade",4,"ngIf"],[1,"table-head"],[1,"table-head-result"],["floatLabel","never",2,"font-size","13px"],["type","text","matInput","","maxlength","128",3,"matAutocomplete","placeholder","formControl","click"],["autoCompleteInput",""],[3,"optionSelected","opened"],["auto","matAutocomplete"],["disabled","",4,"ngIf"],[4,"ngIf"],[1,"table-head-tool"],[1,"paginatorResultList",3,"length","hidePageSize","pageSize"],["paginatorHistoryList",""],[2,"height","90%","overflow","auto","position","absolute","width","100%"],[1,"filterBadges"],[4,"ngFor","ngForOf"],["id","history-list","matSort","","matSortActive","event_date","matSortDirection","desc",2,"width","100%",3,"dataSource"],["tableHistoryListSort","matSort"],["matColumnDef","event_date"],["mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",3,"title",4,"matCellDef"],["matColumnDef","total_processed"],[3,"empty",4,"matCellDef"],["matColumnDef","total_errors"],[3,"empty","error",4,"matCellDef"],["matColumnDef","info"],["mat-sort-header","","style","flex: 2;",4,"matHeaderCellDef"],["style","flex: 2;",4,"matCellDef"],["matColumnDef","module_name"],[4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],["mat-line",""],["matSuffix","",3,"for"],["mat-button","","color","warn","matSuffix","","mat-icon-button","",3,"title","click"],["color","warn",1,"fa","fa-calendar-times"],[1,"example-loading-shade"],["disabled",""],[2,"display","flex","justify-content","center"],["diameter","35"],["class","filterList",3,"label",4,"ngIf"],[1,"filterList",3,"label"],[3,"id","color","value","disabled",4,"ngFor","ngForOf"],[3,"id","value","disabled"],["class","label",3,"background","title","click",4,"ngFor","ngForOf"],[1,"label",3,"title","click"],[1,"fa","fa-times-circle"],["mat-sort-header",""],["mat-cell","",3,"title"],["mat-sort-header","",2,"flex","2"],[2,"flex","2"]],template:function(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-sidenav-container",0),p.Oc(1,Wb,2,1,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Wb(10,"div",6),p.Wb(11,"div",7),p.Wb(12,"mat-form-field",8),p.dc("click",(function(){return p.Dc(t),p.zc(19).open()})),p.Wb(13,"mat-label",9),p.Qc(14),p.ic(15,"translate"),p.Vb(),p.Wb(16,"input",10),p.dc("ngModelChange",(function(t){return e.startDateFilter=t}))("dateChange",(function(){return e.filterStartDate()})),p.Vb(),p.Oc(17,xb,1,1,"mat-datepicker-toggle",11),p.Rb(18,"mat-datepicker",12,13),p.Oc(20,Ob,2,1,"button",14),p.Vb(),p.Wb(21,"mat-form-field",8),p.dc("click",(function(){return p.Dc(t),p.zc(28).open()})),p.Wb(22,"mat-label",9),p.Qc(23),p.ic(24,"translate"),p.Vb(),p.Wb(25,"input",15),p.dc("ngModelChange",(function(t){return e.endDateFilter=t}))("dateChange",(function(){return e.filterEndDate()})),p.Vb(),p.Oc(26,_b,1,1,"mat-datepicker-toggle",11),p.Rb(27,"mat-datepicker",12,16),p.Oc(29,Sb,2,1,"button",14),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(30,"div",17),p.Wb(31,"div",18),p.Oc(32,Ib,2,1,"div",19),p.Wb(33,"div",20),p.Wb(34,"div",21),p.Wb(35,"mat-form-field",22),p.Wb(36,"input",23,24),p.dc("click",(function(t){return t.stopPropagation()})),p.Vb(),p.Wb(38,"mat-autocomplete",25,26),p.dc("optionSelected",(function(t){return e.addItemFilter(t.option)}))("opened",(function(){return e.initFilterListHistory()})),p.Oc(40,jb,3,0,"mat-option",27),p.Oc(41,Pb,3,3,"ng-container",28),p.Vb(),p.Vb(),p.Vb(),p.Wb(42,"div",29),p.Rb(43,"mat-paginator",30,31),p.Vb(),p.Vb(),p.Wb(45,"div",32),p.Wb(46,"div",33),p.Oc(47,Eb,2,2,"ng-container",34),p.ic(48,"keyvalue"),p.Vb(),p.Wb(49,"mat-table",35,36),p.Ub(51,37),p.Oc(52,Ab,3,3,"mat-header-cell",38),p.Oc(53,Ub,5,9,"mat-cell",39),p.Tb(),p.Ub(54,40),p.Oc(55,$b,4,5,"mat-header-cell",38),p.Oc(56,zb,2,3,"mat-cell",41),p.Tb(),p.Ub(57,42),p.Oc(58,Nb,3,3,"mat-header-cell",38),p.Oc(59,Hb,2,5,"mat-cell",43),p.Tb(),p.Ub(60,44),p.Oc(61,Bb,3,3,"mat-header-cell",45),p.Oc(62,Xb,2,1,"mat-cell",46),p.Tb(),p.Ub(63,47),p.Oc(64,Gb,3,3,"mat-header-cell",38),p.Oc(65,qb,2,1,"mat-cell",48),p.Tb(),p.Oc(66,Kb,1,0,"mat-header-row",49),p.Oc(67,Jb,1,0,"mat-row",50),p.Vb(),p.Wb(68,"div",51),p.Qc(69),p.ic(70,"translate"),p.Vb(),p.Vb(),p.Rb(71,"div",20),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.zc(19),i=p.zc(28),a=p.zc(39);p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(4),p.Sc("",p.jc(15,37,"lang.since")," "),p.Db(2),p.oc("ngModel",e.startDateFilter)("matDatepicker",t)("placeholder",e.translate.instant("lang.since"))("max",e.endDateFilter),p.Db(1),p.oc("ngIf",!e.startDateFilter),p.Db(1),p.oc("touchUi",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.startDateFilter),p.Db(3),p.Sc("",p.jc(24,39,"lang.until")," "),p.Db(2),p.oc("ngModel",e.endDateFilter)("matDatepicker",i)("placeholder",e.translate.instant("lang.until"))("min",e.startDateFilter),p.Db(1),p.oc("ngIf",!e.endDateFilter),p.Db(1),p.oc("touchUi",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.endDateFilter),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.isLoadingResults),p.Db(4),p.oc("matAutocomplete",a)("placeholder",e.translate.instant("lang.filterBy"))("formControl",e.searchHistory),p.Db(4),p.oc("ngIf",e.loadingFilters),p.Db(1),p.oc("ngIf",null!==e.filterList&&!e.loadingFilters),p.Db(2),p.oc("length",e.resultsLength)("hidePageSize",!0)("pageSize",10),p.Db(4),p.oc("ngForOf",p.jc(48,41,e.filterUsed)),p.Db(2),p.oc("dataSource",e.data),p.Db(17),p.oc("matHeaderRowDef",e.displayedColumnsHistory),p.Db(1),p.oc("matRowDefColumns",e.displayedColumnsHistory),p.Db(2),p.Tc(" ",e.resultsLength," ",p.jc(70,43,"lang.elements"),"")}},directives:[C.e,C.f,M.a,x.a,S.c,S.g,w.b,c.d,Le.h,c.u,c.x,O.t,Le.f,$n.d,c.p,c.j,$n.a,N.a,O.s,G.o,H.a,G.c,G.i,G.b,G.k,G.n,wt.h,wt.d,o.f,It.a,wt.c,k.l,Le.j,S.j,R.b,I.c,k.p,k.o,G.h,H.b,G.a,G.j,G.m],pipes:[h.d,O.l,O.b,T.a,vb.a,v.u,yb.a],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}.paginatorResultList[_ngcontent-%COMP%]    .mat-paginator-range-label{justify-content:flex-end;display:flex}.filterList[_ngcontent-%COMP%]    .mat-optgroup-label{color:#135f7f;position:-webkit-sticky;position:sticky;top:0;background:#fff!important;z-index:1}.label[_ngcontent-%COMP%]{cursor:pointer;margin:5px}.bg-head-content[_ngcontent-%COMP%]     .mat-focused .mat-form-field-label{color:#fff!important}.bg-head-content[_ngcontent-%COMP%]    .mat-form-field-ripple, .bg-head-content[_ngcontent-%COMP%]    .mat-form-field-underline{background-color:#fff!important}.bg-head-content[_ngcontent-%COMP%]   .mat-datepicker-toggle[_ngcontent-%COMP%], .bg-head-content[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#fff}.empty[_ngcontent-%COMP%]{opacity:.5}.error[_ngcontent-%COMP%]{color:#8e3e52;font-weight:700}"]}),t})();class Zb{constructor(t){this.http=t}getRepoIssues(t,e,i,a,n){return this.http.get(`${a}?limit=10&offset=${10*i}&order=${e}&orderBy=${t}${n}`)}}function tp(t,e){1&t&&(p.Wb(0,"div",10),p.Rb(1,"mat-spinner",11),p.Vb())}function ep(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-chip",32),p.dc("removed",(function(){p.Dc(t);const i=e.$implicit;return p.hc(2).removeChrono(i)})),p.Wb(1,"span",33),p.Qc(2),p.Vb(),p.Qc(3),p.Rb(4,"mat-icon",34),p.Vb()}if(2&t){const t=e.$implicit,i=p.hc(2);p.oc("removable",!0),p.Db(2),p.Rc(i.chronoList.indexOf(t)+1),p.Db(1),p.Sc(" \xa0",t," ")}}function ip(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-chip",32),p.dc("removed",(function(){p.Dc(t);const i=e.$implicit;return p.hc(2).removeResId(i)})),p.Wb(1,"span",33),p.Qc(2),p.Vb(),p.Qc(3),p.Rb(4,"mat-icon",34),p.Vb()}if(2&t){const t=e.$implicit,i=p.hc(2);p.oc("removable",!0),p.Db(2),p.Rc(i.resIdList.indexOf(t)+1),p.Db(1),p.Sc(" \xa0",t," ")}}function ap(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-card",12),p.Wb(1,"form",13,14),p.dc("ngSubmit",(function(){return p.Dc(t),p.hc().onSubmit()})),p.Wb(3,"mat-tab-group",15),p.dc("selectedTabChange",(function(e){return p.Dc(t),p.hc().resetInput(e)})),p.Wb(4,"mat-tab",16),p.ic(5,"translate"),p.Wb(6,"div",17),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Wb(9,"mat-form-field"),p.Wb(10,"input",18),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().chrono=e})),p.ic(11,"translate"),p.ic(12,"translate"),p.Vb(),p.Vb(),p.Wb(13,"div",19),p.Wb(14,"div",20),p.Wb(15,"div",21),p.Wb(16,"button",22),p.dc("click",(function(){return p.Dc(t),p.hc().addChrono()})),p.Qc(17),p.ic(18,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(19,"mat-chip-list",23,24),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().chronoList=e})),p.Oc(21,ep,5,3,"mat-chip",25),p.Vb(),p.Vb(),p.Rb(22,"mat-divider"),p.Vb(),p.Wb(23,"mat-tab",16),p.ic(24,"translate"),p.Wb(25,"div",17),p.Qc(26),p.ic(27,"translate"),p.Vb(),p.Wb(28,"mat-form-field"),p.Wb(29,"input",26),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().resId=e})),p.ic(30,"translate"),p.ic(31,"translate"),p.Vb(),p.Vb(),p.Wb(32,"div",19),p.Wb(33,"div",20),p.Wb(34,"div",21),p.Wb(35,"button",27),p.dc("click",(function(){return p.Dc(t),p.hc().addResId()})),p.Qc(36),p.ic(37,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(38,"mat-chip-list",28,24),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().resIdList=e})),p.Oc(40,ip,5,3,"mat-chip",25),p.Vb(),p.Vb(),p.Rb(41,"mat-divider"),p.Vb(),p.Vb(),p.Wb(42,"plugin-autocomplete",29),p.dc("triggerEvent",(function(e){return p.Dc(t),p.hc().setStatus(e)})),p.Vb(),p.Wb(43,"div",20),p.Wb(44,"div",30),p.Wb(45,"button",31),p.Qc(46),p.ic(47,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc();p.Db(4),p.pc("label",p.jc(5,25,"lang.chronoNumber")),p.Db(3),p.Sc(" ",p.jc(8,27,"lang.updateStatusInformationsChrono")," "),p.Db(3),p.pc("title",p.jc(11,29,"lang.chronoNumber")),p.pc("placeholder",p.jc(12,31,"lang.chronoNumber")),p.oc("ngModel",t.chrono),p.Db(6),p.oc("disabled",!t.chrono),p.Db(1),p.Rc(p.jc(18,33,"lang.add")),p.Db(2),p.oc("ngModel",t.chronoList),p.Db(2),p.oc("ngForOf",t.chronoList),p.Db(2),p.pc("label",p.jc(24,35,"lang.resId")),p.Db(3),p.Sc(" ",p.jc(27,37,"lang.updateStatusInformationsGed")," "),p.Db(3),p.pc("title",p.jc(30,39,"lang.resId")),p.pc("placeholder",p.jc(31,41,"lang.resId")),p.oc("ngModel",t.resId),p.Db(6),p.oc("disabled",!t.resId),p.Db(1),p.Rc(p.jc(37,43,"lang.add")),p.Db(2),p.oc("ngModel",t.resIdList),p.Db(2),p.oc("ngForOf",t.resIdList),p.Db(2),p.oc("labelPlaceholder",t.translate.instant("lang.availableStatuses"))("labelList",t.translate.instant("lang.availableStatuses"))("datas",t.statuses)("targetSearchKey","idToDisplay")("subInfoKey","id"),p.Db(3),p.oc("disabled",0==t.resIdList.length&&0==t.chronoList.length||t.resIdList.length>0&&t.chronoList.length>0||!t.statusId),p.Db(1),p.Rc(p.jc(47,45,"lang.save"))}}let np=(()=>{class t{constructor(t,e,i,a,n){this.translate=t,this.http=e,this.notify=i,this.headerService=a,this.appService=n,this.loading=!1,this.statuses=[],this.statusId="",this.resId="",this.chrono="",this.resIdList=[],this.chronoList=[]}ngOnInit(){this.headerService.setHeader(this.translate.instant("lang.updateStatus")),this.loading=!0,this.http.get("../rest/autocomplete/statuses").pipe(Object(xt.tap)(t=>this.statuses=t),Object(xt.tap)(()=>this.loading=!1)).subscribe()}onSubmit(){const t={status:this.statusId};this.resIdList.length>0?t.resId=this.resIdList:this.chronoList.length>0&&(t.chrono=this.chronoList),this.http.put("../rest/res/resource/status",t).subscribe(()=>{this.resId="",this.chrono="",this.statusId="",this.resIdList=[],this.chronoList=[],this.notify.success(this.translate.instant("lang.modificationSaved"))},t=>{this.notify.error(t.error.errors)})}addResId(){-1===this.resIdList.indexOf(this.resId)&&this.resIdList.push(this.resId),this.resId=""}addChrono(){-1===this.chronoList.indexOf(this.chrono)&&this.chronoList.push(this.chrono),this.chrono=""}setStatus(t){this.statusId=t.id}removeResId(t){const e=this.resIdList.indexOf(t);this.resIdList.splice(e,1)}removeChrono(t){const e=this.chronoList.indexOf(t);this.chronoList.splice(e,1)}resetInput(t){0===t.index?this.resId="":this.chrono=""}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],decls:13,vars:8,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"form-horizontal",3,"ngSubmit"],["updateStatusForm","ngForm"],[3,"selectedTabChange"],[3,"label"],["role","alert",1,"alert","alert-info"],["matInput","","name","chrono",3,"title","placeholder","ngModel","ngModelChange"],[1,"row"],[1,"form-group"],[1,"col-md-12","text-left",2,"padding","10px"],["mat-raised-button","","type","button","color","primary",3,"disabled","click"],["name","chronoChips",3,"ngModel","ngModelChange"],["chipList",""],["color","primary",3,"removable","removed",4,"ngFor","ngForOf"],["type","number","id","","matInput","","name","resId",3,"title","placeholder","ngModel","ngModelChange"],["mat-raised-button","","color","primary","type","button",3,"disabled","click"],["name","resIdChips",3,"ngModel","ngModelChange"],["singleMode","","required","",3,"labelPlaceholder","labelList","datas","targetSearchKey","subInfoKey","triggerEvent"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary",3,"disabled"],["color","primary",3,"removable","removed"],[1,"badge","badge-pill","badge-dark"],["matChipRemove","",1,"fa","fa-times-circle"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Wb(1,"mat-sidenav-content"),p.Wb(2,"div",1),p.Wb(3,"div",2),p.Wb(4,"div",3),p.Rb(5,"header-left"),p.Vb(),p.Wb(6,"div",4),p.Rb(7,"header-right"),p.Vb(),p.Vb(),p.Rb(8,"div",5),p.Vb(),p.Wb(9,"div",6),p.Wb(10,"div",7),p.Oc(11,tp,2,0,"div",8),p.Oc(12,ap,48,47,"mat-card",9),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(3),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading))},directives:[C.e,C.f,M.a,x.a,O.t,I.c,j.a,c.K,c.v,c.w,ke.c,ke.a,S.c,w.b,c.d,c.u,c.x,R.b,Un.d,O.s,_.a,c.A,Rt.a,Un.a,It.a,Un.e],pipes:[h.d],styles:[".mat-tab-body{overflow-y:hidden!important}.row[_ngcontent-%COMP%]{margin-left:0}"]}),t})();const op=["snav2"],sp=["adminMenuTemplate"];function cp(t,e){if(1&t&&(p.Wb(0,"a",18),p.Rb(1,"mat-icon",19),p.Wb(2,"p",16),p.Qc(3),p.Vb(),p.Vb()),2&t){const t=e.$implicit;p.Ib("active",t.current),p.oc("routerLink",t.route),p.Db(1),p.Fb(t.icon),p.Db(2),p.Sc(" ",t.label," ")}}function rp(t,e){if(1&t&&(p.Wb(0,"mat-nav-list"),p.Wb(1,"h3",13),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"a",14),p.Rb(5,"mat-icon",15),p.Wb(6,"p",16),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Rb(9,"mat-divider"),p.Wb(10,"mat-nav-list"),p.Oc(11,cp,4,6,"a",17),p.Vb()),2&t){const t=p.hc();p.Db(2),p.Rc(p.jc(3,3,"lang.actions")),p.Db(5),p.Sc(" ",p.jc(8,5,"lang.add")," "),p.Db(4),p.oc("ngForOf",t.subMenus)}}function lp(t,e){1&t&&(p.Wb(0,"div",20),p.Rb(1,"mat-spinner",21),p.Vb())}function dp(t,e){if(1&t&&(p.Wb(0,"mat-header-cell",49),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=p.hc(2);p.Ib("hide-for-mobile",t.appService.getViewMode()),p.Db(1),p.Sc("",p.jc(2,3,"lang.label")," ")}}function bp(t,e){if(1&t&&(p.Wb(0,"mat-cell",50),p.Qc(1),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.Ib("hide-for-mobile",i.appService.getViewMode()),p.Db(1),p.Rc(t.label)}}function pp(t,e){1&t&&(p.Wb(0,"mat-header-cell",49),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc("",p.jc(2,1,"lang.description")," "))}function hp(t,e){if(1&t&&(p.Wb(0,"mat-cell",50),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.description," ")}}function up(t,e){1&t&&(p.Wb(0,"mat-header-cell",51),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc(" ",p.jc(2,1,"lang.relatedContactNumber")," "))}function mp(t,e){if(1&t&&(p.Wb(0,"span"),p.Qc(1),p.Vb()),2&t){const t=p.hc().$implicit;p.Db(1),p.Rc(t.nbContacts)}}function fp(t,e){if(1&t&&(p.Wb(0,"span",55),p.Qc(1),p.Vb()),2&t){const t=p.hc().$implicit;p.Db(1),p.Rc(t.nbContacts)}}function gp(t,e){if(1&t&&(p.Wb(0,"mat-cell",52),p.Oc(1,mp,2,1,"span",53),p.Oc(2,fp,2,1,"span",54),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.oc("ngIf",0==t.nbContacts),p.Db(1),p.oc("ngIf",t.nbContacts>0)}}function vp(t,e){if(1&t&&(p.Wb(0,"mat-header-cell",51),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=p.hc(2);p.Ib("hide-for-mobile",t.appService.getViewMode()),p.Db(1),p.Sc("",p.jc(2,3,"lang.public")," ")}}function yp(t,e){1&t&&(p.Wb(0,"span"),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc(" ",p.jc(2,1,"lang.no")," "))}function Dp(t,e){1&t&&(p.Wb(0,"span"),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc(" ",p.jc(2,1,"lang.yes")," "))}function Vp(t,e){if(1&t&&(p.Wb(0,"mat-cell",52),p.Oc(1,yp,3,3,"span",53),p.Oc(2,Dp,3,3,"span",53),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.Ib("hide-for-mobile",i.appService.getViewMode()),p.Db(1),p.oc("ngIf",!t.public),p.Db(1),p.oc("ngIf",t.public)}}function Cp(t,e){1&t&&(p.Wb(0,"mat-header-cell",51),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc("",p.jc(2,1,"lang.createdBy")," "))}function Mp(t,e){if(1&t&&(p.Wb(0,"mat-cell",52),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.labelledOwner," ")}}function Wp(t,e){1&t&&p.Rb(0,"mat-header-cell")}function xp(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-cell",56),p.Wb(1,"button",57),p.dc("click",(function(i){p.Dc(t);const a=e.$implicit,n=p.hc(2);return i.stopPropagation(),n.deleteContactsGroup(a.position)})),p.ic(2,"translate"),p.Rb(3,"mat-icon",58),p.Vb(),p.Vb()}2&t&&(p.Db(1),p.pc("matTooltip",p.jc(2,1,"lang.delete")))}function Op(t,e){1&t&&p.Rb(0,"mat-header-row")}function _p(t,e){1&t&&(p.Rb(0,"mat-row",59),p.ic(1,"translate")),2&t&&(p.qc("routerLink","/administration/contacts/contacts-groups/",e.$implicit.id,""),p.pc("matTooltip",p.jc(1,2,"lang.view")))}function Sp(t,e){if(1&t&&(p.Wb(0,"mat-card",22),p.Wb(1,"div",23),p.Wb(2,"div",24),p.Wb(3,"mat-form-field"),p.Rb(4,"input",25),p.ic(5,"translate"),p.Vb(),p.Vb(),p.Wb(6,"div",24),p.Rb(7,"mat-paginator",26,27),p.Vb(),p.Vb(),p.Wb(9,"mat-table",28,29),p.Ub(11,30),p.Oc(12,dp,3,5,"mat-header-cell",31),p.Oc(13,bp,2,3,"mat-cell",32),p.Tb(),p.Ub(14,33),p.Oc(15,pp,3,3,"mat-header-cell",34),p.Oc(16,hp,2,1,"mat-cell",35),p.Tb(),p.Ub(17,36),p.Oc(18,up,3,3,"mat-header-cell",37),p.Oc(19,gp,3,2,"mat-cell",38),p.Tb(),p.Ub(20,39),p.Oc(21,vp,3,5,"mat-header-cell",40),p.Oc(22,Vp,3,4,"mat-cell",41),p.Tb(),p.Ub(23,42),p.Oc(24,Cp,3,3,"mat-header-cell",37),p.Oc(25,Mp,2,1,"mat-cell",38),p.Tb(),p.Ub(26,43),p.Oc(27,Wp,1,0,"mat-header-cell",44),p.Oc(28,xp,4,3,"mat-cell",45),p.Tb(),p.Oc(29,Op,1,0,"mat-header-row",46),p.Oc(30,_p,2,4,"mat-row",47),p.Vb(),p.Wb(31,"div",48),p.Qc(32),p.ic(33,"translate"),p.Vb(),p.Vb()),2&t){const t=p.hc();p.Db(4),p.pc("placeholder",p.jc(5,10,"lang.filterBy")),p.oc("formControl",t.adminService.getFilterField()),p.Db(3),p.oc("length",100)("hidePageSize",!0)("pageSize",10),p.Db(2),p.oc("dataSource",t.adminService.getDataSource()),p.Db(20),p.oc("matHeaderRowDef",t.displayedColumns),p.Db(1),p.oc("matRowDefColumns",t.displayedColumns),p.Db(2),p.Tc(" ",t.contactsGroups.length," ",p.jc(33,12,"lang.contactsGroupsAlt"),"")}}let wp=(()=>{class t{constructor(t,e,i,a,n,o,s,c){this.translate=t,this.http=e,this.notify=i,this.headerService=a,this.appService=n,this.functions=o,this.adminService=s,this.viewContainerRef=c,this.search=null,this.contactsGroups=[],this.titles=[],this.loading=!1,this.subMenus=[{icon:"fa fa-book",route:"/administration/contacts/list",label:this.translate.instant("lang.contactsList"),current:!1},{icon:"fa fa-code",route:"/administration/contacts/contactsCustomFields",label:this.translate.instant("lang.customFieldsAdmin"),current:!1},{icon:"fa fa-cog",route:"/administration/contacts/contacts-parameters",label:this.translate.instant("lang.contactsParameters"),current:!1},{icon:"fa fa-users",route:"/administration/contacts/contacts-groups",label:this.translate.instant("lang.contactsGroups"),current:!0},{icon:"fas fa-magic",route:"/administration/contacts/duplicates",label:this.translate.instant("lang.duplicatesContactsAdmin"),current:!1}],this.displayedColumns=["label","description","nbContacts","public","owner","actions"],this.filterColumns=["label","description"]}ngOnInit(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.contactsGroups")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/contactsGroups").subscribe(t=>{this.contactsGroups=t.contactsGroups,this.loading=!1,setTimeout(()=>{this.adminService.setDataSource("admin_contacts_groups",this.contactsGroups,this.sort,this.paginator,this.filterColumns)},0)},t=>{this.notify.handleErrors(t)})}deleteContactsGroup(t){const e=this.contactsGroups[t];confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+e.label+" \xbb")&&this.http.delete("../rest/contactsGroups/"+e.id).subscribe(()=>{const e=this.contactsGroups.length-1;this.contactsGroups[t]=this.contactsGroups[e],this.contactsGroups[t].position=t,this.contactsGroups.splice(e,1),this.adminService.setDataSource("admin_contacts_groups",this.contactsGroups,this.sort,this.paginator,this.filterColumns),this.notify.success(this.translate.instant("lang.contactsGroupDeleted"))},t=>{this.notify.error(t.error.errors)})}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a),p.Qb(D.a),p.Qb(St),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(op,!0),p.Kc(sp,!0),p.Xc(N.a,!0),p.Xc(H.a,!0)),2&t&&(p.yc(i=p.ec())&&(e.sidenavRight=i.first),p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.paginator=i.first),p.yc(i=p.ec())&&(e.sort=i.first))},decls:17,vars:10,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["position","end",3,"mode","fixedInViewport"],["snav2",""],["mat-subheader",""],["mat-list-item","","routerLink","/administration/contacts/contacts-groups/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSortDisableClear","","matSort","",3,"dataSource"],["table",""],["matColumnDef","label"],["mat-sort-header","","style","flex:2;",3,"hide-for-mobile",4,"matHeaderCellDef"],["style","flex:2;",3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","description"],["mat-sort-header","","style","flex:2;",4,"matHeaderCellDef"],["style","flex:2;",4,"matCellDef"],["matColumnDef","nbContacts"],["mat-sort-header","","style","flex:1;",4,"matHeaderCellDef"],["style","flex:1;",4,"matCellDef"],["matColumnDef","public"],["mat-sort-header","","style","flex:1;",3,"hide-for-mobile",4,"matHeaderCellDef"],["style","flex:1;",3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","owner"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],["mat-sort-header","",2,"flex","1"],[2,"flex","1"],[4,"ngIf"],["color","primary","style","font-weight:bold;",4,"ngIf"],["color","primary",2,"font-weight","bold"],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,rp,12,7,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,lp,2,0,"div",9),p.Oc(14,Sp,34,14,"mat-card",10),p.Vb(),p.Vb(),p.Vb(),p.Rb(15,"mat-sidenav",11,12),p.Vb()),2&t&&(p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading),p.Db(1),p.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode()))},directives:[C.e,C.f,M.a,x.a,O.t,C.d,wt.h,wt.g,wt.d,o.f,It.a,wt.c,k.l,_.a,O.s,I.c,j.a,S.c,w.b,c.d,c.u,c.j,N.a,G.o,H.a,G.c,G.i,G.b,G.k,G.n,G.h,H.b,G.a,R.b,kt.b,G.j,G.m,o.d],pipes:[h.d],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}"]}),t})();var Ip=i("/uUt"),jp=i("bv9b");const kp=["snav2"],Rp=["adminMenuTemplate"],Tp=["paginatorContactList"],Pp=["paginatorAdded"],Qp=["tableAdded"];function Fp(t,e){if(1&t&&(p.Wb(0,"a",31),p.Rb(1,"mat-icon",32),p.Wb(2,"p",33),p.Qc(3),p.Vb(),p.Vb()),2&t){const t=e.$implicit;p.Ib("active",t.current),p.oc("routerLink",t.route),p.Db(1),p.Fb(t.icon),p.Db(2),p.Sc(" ",t.label," ")}}function Lp(t,e){if(1&t&&(p.Wb(0,"mat-nav-list"),p.Oc(1,Fp,4,6,"a",30),p.Vb()),2&t){const t=p.hc();p.Db(1),p.oc("ngForOf",t.subMenus)}}function Ep(t,e){1&t&&(p.Wb(0,"div",34),p.Rb(1,"mat-spinner",35),p.Vb())}function Ap(t,e){if(1&t&&p.Rb(0,"div",60),2&t){const t=p.hc(3);p.oc("innerHTML",t.translate.instant("lang.limitDataReached_1000"),p.Ec)}}function Up(t,e){1&t&&p.Rb(0,"mat-progress-bar",61)}function $p(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-header-cell",68),p.Wb(1,"mat-checkbox",69),p.dc("change",(function(e){p.Dc(t);const i=p.hc(4);return e?i.masterToggle(e):null})),p.Vb(),p.Vb()}if(2&t){const t=p.hc(4);p.Db(1),p.oc("checked",t.selection.hasValue())}}function zp(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-cell",68),p.Wb(1,"mat-checkbox",70),p.dc("click",(function(e){return p.Dc(t),e.stopPropagation()}))("change",(function(i){p.Dc(t);const a=e.$implicit,n=p.hc(4);return i?n.selection.toggle(a.id):null})),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit,i=p.hc(4);p.Db(1),p.qc("id","check_",t.id,""),p.oc("disabled",i.isInGrp(t))("checked",i.selection.isSelected(t.id))}}function Np(t,e){1&t&&(p.Wb(0,"mat-header-cell",71),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc("",p.jc(2,1,"lang.contact")," "))}function Hp(t,e){if(1&t&&(p.Wb(0,"mat-cell",71),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.contact," ")}}function Bp(t,e){1&t&&(p.Wb(0,"mat-header-cell",71),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc("",p.jc(2,1,"lang.address")," "))}function Xp(t,e){if(1&t&&(p.Wb(0,"mat-cell",71),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.address," ")}}function Gp(t,e){1&t&&p.Rb(0,"mat-header-row")}const qp=function(t){return{opacity:t}};function Kp(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-row",72),p.dc("click",(function(){p.Dc(t);const i=e.$implicit;return p.hc(4).selectContact(i.id)})),p.Vb()}if(2&t){const t=e.$implicit,i=p.hc(4);p.oc("ngStyle",p.vc(1,qp,i.isInGrp(t)?"0.5":""))}}function Jp(t,e){if(1&t&&(p.Wb(0,"mat-table",62,63),p.Ub(2,64),p.Oc(3,$p,2,1,"mat-header-cell",26),p.Oc(4,zp,2,3,"mat-cell",65),p.Tb(),p.Ub(5,21),p.Oc(6,Np,3,3,"mat-header-cell",66),p.Oc(7,Hp,2,1,"mat-cell",23),p.Tb(),p.Ub(8,24),p.Oc(9,Bp,3,3,"mat-header-cell",66),p.Oc(10,Xp,2,1,"mat-cell",23),p.Tb(),p.Oc(11,Gp,1,0,"mat-header-row",28),p.Oc(12,Kp,1,3,"mat-row",67),p.Vb()),2&t){const t=p.hc(3);p.oc("dataSource",t.dataSource),p.Db(11),p.oc("matHeaderRowDef",t.displayedColumns),p.Db(1),p.oc("matRowDefColumns",t.displayedColumns)}}function Yp(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-tab",37),p.ic(1,"translate"),p.Wb(2,"div",14),p.Wb(3,"div",49),p.Wb(4,"mat-form-field",50),p.Wb(5,"span",51),p.Rb(6,"mat-icon",52),p.Qc(7,"\xa0\xa0 "),p.Vb(),p.Wb(8,"input",53),p.dc("keyup",(function(){return p.Dc(t),p.hc(2).launchLoading()})),p.ic(9,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(10,"div",15),p.Oc(11,Ap,1,1,"div",54),p.Vb(),p.Wb(12,"div",15),p.Rb(13,"mat-paginator",17,55),p.Vb(),p.Vb(),p.Oc(15,Up,1,0,"mat-progress-bar",56),p.Oc(16,Jp,13,3,"mat-table",57),p.Wb(17,"div",40),p.Wb(18,"div",58),p.Wb(19,"button",59),p.dc("click",(function(e){return p.Dc(t),p.hc(2).saveContactsList(e.target)})),p.Qc(20),p.ic(21,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.pc("label",p.jc(1,11,"lang.addContacts")),p.Db(8),p.pc("placeholder",p.jc(9,13,"lang.linkContact")),p.oc("formControl",t.searchTerm),p.Db(3),p.oc("ngIf",t.dataSource&&1e3==t.dataSource.data.length),p.Db(2),p.oc("length",0)("hidePageSize",!0)("pageSize",10),p.Db(2),p.oc("ngIf",!t.dataSource&&!t.initAutoCompleteContact),p.Db(1),p.oc("ngIf",t.dataSource),p.Db(3),p.oc("disabled",0==t.selection.selected.length),p.Db(1),p.Rc(p.jc(21,15,"lang.add"))}}function Zp(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-card",36),p.Wb(1,"mat-tab-group"),p.Wb(2,"mat-tab",37),p.ic(3,"translate"),p.Wb(4,"form",38,39),p.dc("ngSubmit",(function(){return p.Dc(t),p.hc().onSubmit()})),p.Wb(6,"div",40),p.Wb(7,"div",41),p.Wb(8,"mat-form-field"),p.Wb(9,"input",42),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().contactsGroup.label=e})),p.ic(10,"translate"),p.ic(11,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(12,"div",40),p.Wb(13,"div",41),p.Wb(14,"mat-form-field"),p.Wb(15,"input",43),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().contactsGroup.description=e})),p.ic(16,"translate"),p.ic(17,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(18,"div",40),p.Wb(19,"div",44),p.Wb(20,"mat-slide-toggle",45),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().contactsGroup.public=e})),p.ic(21,"translate"),p.Qc(22),p.ic(23,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(24,"div",40),p.Wb(25,"div",46),p.Wb(26,"button",47),p.Qc(27),p.ic(28,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Oc(29,Yp,22,17,"mat-tab",48),p.Vb(),p.Vb()}if(2&t){const t=p.zc(5),e=p.hc();p.Db(2),p.pc("label",p.jc(3,14,"lang.informations")),p.Db(7),p.pc("title",p.jc(10,16,"lang.label")),p.pc("placeholder",p.jc(11,18,"lang.label")),p.oc("ngModel",e.contactsGroup.label),p.Db(6),p.pc("title",p.jc(16,20,"lang.description")),p.pc("placeholder",p.jc(17,22,"lang.description")),p.oc("ngModel",e.contactsGroup.description),p.Db(5),p.pc("title",p.jc(21,24,"lang.contactsGroupDesc")),p.oc("ngModel",e.contactsGroup.public)("checked",e.contactsGroup.public),p.Db(2),p.Rc(p.jc(23,26,"lang.public")),p.Db(4),p.oc("disabled",!t.form.valid),p.Db(1),p.Rc(p.jc(28,28,"lang.save")),p.Db(2),p.oc("ngIf",!e.creationMode)}}function th(t,e){1&t&&(p.Wb(0,"mat-header-cell",73),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc("",p.jc(2,1,"lang.contact")," "))}function eh(t,e){if(1&t&&(p.Wb(0,"mat-cell",71),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.contact," ")}}function ih(t,e){1&t&&(p.Wb(0,"mat-header-cell",73),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc("",p.jc(2,1,"lang.address")," "))}function ah(t,e){if(1&t&&(p.Wb(0,"mat-cell",71),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.address," ")}}function nh(t,e){1&t&&p.Rb(0,"mat-header-cell",68)}function oh(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-cell",74),p.Wb(1,"button",75),p.dc("click",(function(i){p.Dc(t);const a=e.$implicit,n=p.hc();return i.stopPropagation(),n.preDelete(a.position)})),p.ic(2,"translate"),p.Rb(3,"mat-icon",76),p.Vb(),p.Vb()}2&t&&(p.Db(1),p.pc("matTooltip",p.jc(2,1,"lang.delete")))}function sh(t,e){1&t&&p.Rb(0,"mat-header-row")}function ch(t,e){1&t&&p.Rb(0,"mat-row")}let rh=(()=>{class t{constructor(t,e,i,a,n,o,s,r){this.translate=t,this.http=e,this.route=i,this.router=a,this.notify=n,this.headerService=o,this.appService=s,this.viewContainerRef=r,this.subMenus=[{icon:"fa fa-book",route:"/administration/contacts/list",label:this.translate.instant("lang.contactsList"),current:!1},{icon:"fa fa-code",route:"/administration/contacts/contactsCustomFields",label:this.translate.instant("lang.customFieldsAdmin"),current:!1},{icon:"fa fa-cog",route:"/administration/contacts/contacts-parameters",label:this.translate.instant("lang.contactsParameters"),current:!1},{icon:"fa fa-users",route:"/administration/contacts/contacts-groups",label:this.translate.instant("lang.contactsGroups"),current:!1},{icon:"fas fa-magic",route:"/administration/contacts/duplicates",label:this.translate.instant("lang.duplicatesContactsAdmin"),current:!1}],this.contactsGroup={},this.loading=!1,this.initAutoCompleteContact=!0,this.searchTerm=new c.i,this.searchResult=[],this.displayedColumns=["select","contact","address"],this.displayedColumnsAdded=["contact","address","actions"],this.selection=new xe.c(!0,[]),this.searchTerm.valueChanges.pipe(Object(dl.a)(500),Object(K.a)(t=>t.length>2),Object(Ip.a)(),Object(gb.a)(t=>this.http.get("../rest/autocomplete/contacts",{params:{search:t}}))).subscribe(t=>{this.searchResult=t,this.dataSource=new G.p(this.searchResult),this.dataSource.paginator=this.paginator})}masterToggle(t){t.checked?this.dataSource.data.forEach(t=>{$("#check_"+t.id+"-input").is(":disabled")||this.selection.select(t.id)}):this.selection.clear()}applyFilter(t){t=(t=t.trim()).toLowerCase(),this.dataSourceAdded.filter=t}ngOnInit(){this.loading=!0,this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.route.params.subscribe(t=>{void 0===t.id?(this.headerService.setHeader(this.translate.instant("lang.contactGroupCreation")),this.creationMode=!0,this.contactsGroup.public=!1,this.loading=!1):(this.creationMode=!1,this.http.get("../rest/contactsGroups/"+t.id).subscribe(t=>{this.contactsGroup=t.contactsGroup,this.headerService.setHeader(this.translate.instant("lang.contactsGroupModification"),this.contactsGroup.label),this.nbContact=this.contactsGroup.nbContacts,setTimeout(()=>{this.dataSourceAdded=new G.p(this.contactsGroup.contacts),this.dataSourceAdded.paginator=this.paginatorAdded,this.dataSourceAdded.sort=this.sortAdded},0),this.loading=!1}))})}saveContactsList(t){t.textContent=this.translate.instant("lang.loading")+"...",t.disabled=!0,this.http.post("../rest/contactsGroups/"+this.contactsGroup.id+"/contacts",{contacts:this.selection.selected}).subscribe(e=>{this.notify.success(this.translate.instant("lang.contactAdded")),this.nbContact=this.nbContact+this.selection.selected.length,this.selection.clear(),t.textContent=this.translate.instant("lang.add"),this.contactsGroup=e.contactsGroup,setTimeout(()=>{this.dataSourceAdded=new G.p(this.contactsGroup.contacts),this.dataSourceAdded.paginator=this.paginatorAdded,this.dataSourceAdded.sort=this.sortAdded},0)},t=>{this.notify.error(t.error.errors)})}onSubmit(){this.creationMode?this.http.post("../rest/contactsGroups",this.contactsGroup).subscribe(t=>{this.router.navigate(["/administration/contacts/contacts-groups/"+t.contactsGroup]),this.notify.success(this.translate.instant("lang.contactsGroupAdded"))},t=>{this.notify.error(t.error.errors)}):this.http.put("../rest/contactsGroups/"+this.contactsGroup.id,this.contactsGroup).subscribe(()=>{this.router.navigate(["/administration/contacts-groups"]),this.notify.success(this.translate.instant("lang.contactsGroupUpdated"))},t=>{this.notify.error(t.error.errors)})}preDelete(t){confirm(this.translate.instant("lang.reallyWantToDeleteContactFromGroup"))&&this.removeContact(this.contactsGroup.contacts[t],t)}removeContact(t,e){this.http.delete("../rest/contactsGroups/"+this.contactsGroup.id+"/contacts/"+t.id).subscribe(()=>{const t=this.contactsGroup.contacts.length-1;this.contactsGroup.contacts[e]=this.contactsGroup.contacts[t],this.contactsGroup.contacts[e].position=e,this.contactsGroup.contacts.splice(t,1),this.nbContact=this.nbContact-1,this.dataSourceAdded=new G.p(this.contactsGroup.contacts),this.dataSourceAdded.paginator=this.paginatorAdded,this.dataSourceAdded.sort=this.sortAdded,this.notify.success(this.translate.instant("lang.contactDeletedFromGroup"))},t=>{this.notify.error(t.error.errors)})}launchLoading(){this.searchTerm.value.length>2&&(this.dataSource=null,this.initAutoCompleteContact=!1)}isInGrp(t){let e=!1;return this.contactsGroup.contacts.forEach(i=>{i.id==t.id&&(e=!0)}),e}selectContact(t){$("#check_"+t+"-input").is(":disabled")||this.selection.toggle(t)}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(o.a),p.Qb(o.c),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(kp,!0),p.Kc(Rp,!0),p.Kc(Tp,!0),p.Kc(Pp,!0),p.Kc(Qp,!0)),2&t&&(p.yc(i=p.ec())&&(e.sidenavRight=i.first),p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.paginator=i.first),p.yc(i=p.ec())&&(e.paginatorAdded=i.first),p.yc(i=p.ec())&&(e.sortAdded=i.first))},decls:42,vars:24,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["position","end",2,"overflow-x","hidden","width","40%",3,"mode","fixedInViewport","opened"],["snav2",""],["mat-subheader",""],[1,"row",2,"margin","0px"],[1,"col-md-6","col-xs-6"],["matInput","",3,"placeholder","keyup"],[3,"length","hidePageSize","pageSize"],["paginatorAdded",""],["matSort","","matSortActive","contact","matSortDirection","asc",3,"dataSource"],["tableAdded","matSort"],["matColumnDef","contact"],["mat-sort-header","","style","flex:3;",4,"matHeaderCellDef"],["style","flex:3;",4,"matCellDef"],["matColumnDef","address"],["matColumnDef","actions"],["style","flex:1;",4,"matHeaderCellDef"],["style","justify-content: flex-end;flex:1;",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[3,"label"],[1,"form-horizontal",3,"ngSubmit"],["contactsGroupFormUp","ngForm"],[1,"form-group"],[1,"col-sm-12"],["matInput","","required","","name","label","id","label","type","text","maxlength","32",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","required","","name","description","id","description","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],[1,"col-sm-6",2,"text-align","center"],["name","public","id","public","color","primary",3,"title","ngModel","checked","ngModelChange"],[1,"col-sm-12",2,"text-align","center"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[3,"label",4,"ngIf"],[1,"col-md-8",2,"padding","5px"],["hintLabel","3 caract\xe8res minium"],["matPrefix",""],["color","primary",1,"fa","fa-user-plus"],["type","text","matInput","","autocomplete","off","minlength","3",1,"autocompleteSearch",3,"placeholder","formControl","keyup"],["class","alert alert-danger",3,"innerHTML",4,"ngIf"],["paginatorContactList",""],["mode","indeterminate",4,"ngIf"],[3,"dataSource",4,"ngIf"],[1,"col-sm-12",2,"text-align","center","margin-top","30px"],["mat-raised-button","","color","primary","type","button",3,"disabled","click"],[1,"alert","alert-danger",3,"innerHTML"],["mode","indeterminate"],[3,"dataSource"],["tableContactList",""],["matColumnDef","select"],["style","flex:1;",4,"matCellDef"],["style","flex:3;",4,"matHeaderCellDef"],["style","cursor: pointer;",3,"ngStyle","click",4,"matRowDef","matRowDefColumns"],[2,"flex","1"],["color","primary",3,"checked","change"],["color","primary",3,"id","disabled","checked","click","change"],[2,"flex","3"],[2,"cursor","pointer",3,"ngStyle","click"],["mat-sort-header","",2,"flex","3"],[2,"justify-content","flex-end","flex","1"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,Lp,2,1,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,Ep,2,0,"div",9),p.Oc(14,Zp,30,30,"mat-card",10),p.Vb(),p.Vb(),p.Vb(),p.Wb(15,"mat-sidenav",11,12),p.Wb(17,"mat-list"),p.Wb(18,"h3",13),p.Qc(19),p.ic(20,"translate"),p.Vb(),p.Vb(),p.Wb(21,"div",14),p.Wb(22,"div",15),p.Wb(23,"mat-form-field"),p.Wb(24,"input",16),p.dc("keyup",(function(t){return e.applyFilter(t.target.value)})),p.ic(25,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(26,"div",15),p.Rb(27,"mat-paginator",17,18),p.Vb(),p.Vb(),p.Wb(29,"mat-table",19,20),p.Ub(31,21),p.Oc(32,th,3,3,"mat-header-cell",22),p.Oc(33,eh,2,1,"mat-cell",23),p.Tb(),p.Ub(34,24),p.Oc(35,ih,3,3,"mat-header-cell",22),p.Oc(36,ah,2,1,"mat-cell",23),p.Tb(),p.Ub(37,25),p.Oc(38,nh,1,0,"mat-header-cell",26),p.Oc(39,oh,4,3,"mat-cell",27),p.Tb(),p.Oc(40,sh,1,0,"mat-header-row",28),p.Oc(41,ch,1,0,"mat-row",29),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading),p.Db(1),p.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!e.appService.getViewMode()&&!e.creationMode),p.Db(4),p.Tc("",e.nbContact," ",p.jc(20,20,"lang.relatedContacts")," : "),p.Db(5),p.pc("placeholder",p.jc(25,22,"lang.filterBy")),p.Db(3),p.oc("length",0)("hidePageSize",!0)("pageSize",10),p.Db(2),p.oc("dataSource",e.dataSourceAdded),p.Db(11),p.oc("matHeaderRowDef",e.displayedColumnsAdded),p.Db(1),p.oc("matRowDefColumns",e.displayedColumnsAdded))},directives:[C.e,C.f,M.a,x.a,O.t,C.d,wt.a,wt.g,S.c,w.b,N.a,G.o,H.a,G.c,G.i,G.b,G.k,G.n,wt.h,O.s,wt.d,o.f,It.a,wt.c,k.l,I.c,j.a,ke.c,ke.a,c.K,c.v,c.w,c.d,c.F,c.p,c.u,c.x,et.a,R.b,S.i,c.q,c.j,jp.a,G.h,Pe.a,G.a,G.j,G.m,O.w,H.b,kt.b],pipes:[h.d],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}"]}),t})();var lh=i("5RNC");const dh=["adminMenuTemplate"];function bh(t,e){1&t&&(p.Wb(0,"span"),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.disabledContactsFilling")))}function ph(t,e){1&t&&(p.Wb(0,"span"),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.enabledContactsFilling")))}function hh(t,e){if(1&t&&(p.Wb(0,"a",18),p.Rb(1,"mat-icon",13),p.Wb(2,"p",19),p.Qc(3),p.Vb(),p.Vb()),2&t){const t=e.$implicit;p.Ib("active",t.current),p.oc("routerLink",t.route),p.Db(1),p.Fb(t.icon),p.Db(2),p.Sc(" ",t.label," ")}}const uh=function(t){return{opacity:t}};function mh(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-nav-list"),p.Wb(1,"h3",11),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"a",12),p.Wb(5,"mat-icon",13),p.Wb(6,"mat-slide-toggle",14),p.dc("change",(function(){return p.Dc(t),p.hc().toggleFillingContact()})),p.Vb(),p.Vb(),p.Wb(7,"p",15),p.dc("click",(function(){return p.Dc(t),p.hc().toggleFillingContact()})),p.Oc(8,bh,3,3,"span",16),p.Oc(9,ph,3,3,"span",16),p.Vb(),p.Vb(),p.Vb(),p.Rb(10,"mat-divider"),p.Wb(11,"mat-nav-list"),p.Oc(12,hh,4,6,"a",17),p.Vb()}if(2&t){const t=p.hc();p.Db(2),p.Rc(p.jc(3,6,"lang.actions")),p.Db(4),p.oc("checked",t.contactsFilling.enable),p.Db(1),p.oc("ngStyle",p.vc(8,uh,t.contactsFilling.enable?"":"0.5")),p.Db(1),p.oc("ngIf",t.contactsFilling.enable),p.Db(1),p.oc("ngIf",!t.contactsFilling.enable),p.Db(3),p.oc("ngForOf",t.subMenus)}}function fh(t,e){1&t&&(p.Wb(0,"div",20),p.Rb(1,"mat-spinner",21),p.Vb())}function gh(t,e){1&t&&(p.Wb(0,"mat-header-cell",42),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.label")))}function vh(t,e){if(1&t&&(p.Wb(0,"div"),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=p.hc().$implicit;p.Db(1),p.Rc(p.jc(2,1,"lang.contactsParameters_"+t.identifier))}}function yh(t,e){if(1&t&&(p.Wb(0,"div"),p.Qc(1),p.Vb()),2&t){const t=p.hc().$implicit;p.Db(1),p.Rc(t.label)}}function Dh(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Oc(1,vh,3,3,"div",16),p.Oc(2,yh,2,1,"div",16),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.oc("ngIf",!t.label),p.Db(1),p.oc("ngIf",t.label)}}function Vh(t,e){1&t&&(p.Wb(0,"mat-header-cell",42),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.mandatory")))}function Ch(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-cell"),p.Wb(1,"mat-slide-toggle",43),p.dc("change",(function(i){p.Dc(t);const a=e.$implicit;return p.hc(2).addCriteria(i,a,"mandatory")})),p.ic(2,"translate"),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit;p.Db(1),p.pc("title",p.jc(2,3,"lang.mandatory")),p.oc("disabled","lastname"==t.identifier||"company"==t.identifier)("checked",t.mandatory)}}function Mh(t,e){1&t&&(p.Wb(0,"mat-header-cell",42),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc("",p.jc(2,1,"lang.contactsFillingCriteria")," "))}function Wh(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-cell"),p.Wb(1,"mat-slide-toggle",44),p.dc("change",(function(i){p.Dc(t);const a=e.$implicit;return p.hc(2).addCriteria(i,a,"filling")})),p.ic(2,"translate"),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit;p.Db(1),p.pc("title",p.jc(2,2,"lang.contactsFillingCriteria")),p.oc("checked",t.filling)}}function xh(t,e){1&t&&(p.Wb(0,"mat-header-cell",42),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc("",p.jc(2,1,"lang.autocompletionSearchable")," "))}function Oh(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-cell"),p.Wb(1,"mat-slide-toggle",43),p.dc("change",(function(i){p.Dc(t);const a=e.$implicit;return p.hc(2).addCriteria(i,a,"searchable")})),p.ic(2,"translate"),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit;p.Db(1),p.pc("title",p.jc(2,3,"lang.autocompletionSearchable")),p.oc("disabled","lastname"==t.identifier||"company"==t.identifier||"civility"==t.identifier)("checked",t.searchable)}}function _h(t,e){1&t&&(p.Wb(0,"mat-header-cell",42),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc("",p.jc(2,1,"lang.autocompletionDisplayable")," "))}function Sh(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-cell"),p.Wb(1,"mat-slide-toggle",43),p.dc("change",(function(i){p.Dc(t);const a=e.$implicit;return p.hc(2).addCriteria(i,a,"displayable")})),p.ic(2,"translate"),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit;p.Db(1),p.pc("title",p.jc(2,3,"lang.autocompletionDisplayable")),p.oc("disabled","lastname"==t.identifier||"company"==t.identifier)("checked",t.displayable)}}function wh(t,e){1&t&&p.Rb(0,"mat-header-row")}function Ih(t,e){1&t&&p.Rb(0,"mat-row")}const jh=function(t){return{color:t}};function kh(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-card",22),p.Wb(1,"div",23),p.Wb(2,"div",24),p.Wb(3,"mat-card",25),p.Wb(4,"mat-card-header"),p.Wb(5,"mat-card-title"),p.Qc(6),p.ic(7,"translate"),p.Vb(),p.Vb(),p.Wb(8,"p"),p.Qc(9),p.ic(10,"translate"),p.Wb(11,"b",26),p.Qc(12,"0%"),p.Vb(),p.Qc(13),p.ic(14,"translate"),p.Wb(15,"b",26),p.Qc(16),p.Vb(),p.Qc(17),p.ic(18,"translate"),p.Vb(),p.Wb(19,"mat-slider",27),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().contactsFilling.first_threshold=e}))("change",(function(){return p.Dc(t),p.hc().onSubmit()})),p.Vb(),p.Rb(20,"input",28),p.Vb(),p.Vb(),p.Wb(21,"div",24),p.Wb(22,"mat-card",25),p.Wb(23,"mat-card-header"),p.Wb(24,"mat-card-title"),p.Qc(25),p.ic(26,"translate"),p.Vb(),p.Vb(),p.Wb(27,"p"),p.Qc(28),p.ic(29,"translate"),p.Wb(30,"b",26),p.Qc(31),p.Vb(),p.Qc(32),p.ic(33,"translate"),p.Wb(34,"b",26),p.Qc(35),p.Vb(),p.Qc(36),p.ic(37,"translate"),p.Vb(),p.Wb(38,"mat-slider",29),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().contactsFilling.second_threshold=e}))("change",(function(){return p.Dc(t),p.hc().onSubmit()})),p.Vb(),p.Rb(39,"input",28),p.Vb(),p.Vb(),p.Wb(40,"div",24),p.Wb(41,"mat-card",25),p.Wb(42,"mat-card-header"),p.Wb(43,"mat-card-title"),p.Qc(44),p.ic(45,"translate"),p.Vb(),p.Vb(),p.Wb(46,"p"),p.Qc(47),p.ic(48,"translate"),p.Wb(49,"b",26),p.Qc(50),p.Vb(),p.Qc(51),p.ic(52,"translate"),p.Wb(53,"b",26),p.Qc(54,"100%"),p.Vb(),p.Qc(55),p.ic(56,"translate"),p.Vb(),p.Rb(57,"mat-slider",30),p.Rb(58,"input",28),p.Vb(),p.Vb(),p.Vb(),p.Wb(59,"mat-table",31,32),p.Ub(61,33),p.Oc(62,gh,3,3,"mat-header-cell",34),p.Oc(63,Dh,3,2,"mat-cell",35),p.Tb(),p.Ub(64,36),p.Oc(65,Vh,3,3,"mat-header-cell",34),p.Oc(66,Ch,3,5,"mat-cell",35),p.Tb(),p.Ub(67,37),p.Oc(68,Mh,3,3,"mat-header-cell",34),p.Oc(69,Wh,3,4,"mat-cell",35),p.Tb(),p.Ub(70,38),p.Oc(71,xh,3,3,"mat-header-cell",34),p.Oc(72,Oh,3,5,"mat-cell",35),p.Tb(),p.Ub(73,39),p.Oc(74,_h,3,3,"mat-header-cell",34),p.Oc(75,Sh,3,5,"mat-cell",35),p.Tb(),p.Oc(76,wh,1,0,"mat-header-row",40),p.Oc(77,Ih,1,0,"mat-row",41),p.Vb(),p.Vb()}if(2&t){const t=p.hc();p.Db(6),p.Rc(p.jc(7,31,"lang.contactsFillingStep1")),p.Db(3),p.Sc("",p.jc(10,33,"lang.fromRange")," "),p.Db(2),p.oc("ngStyle",p.vc(55,jh,t.fillingColor.first_threshold)),p.Db(2),p.Sc(" ",p.jc(14,35,"lang.toRange")," "),p.Db(2),p.oc("ngStyle",p.vc(57,jh,t.fillingColor.first_threshold)),p.Db(1),p.Sc("",t.contactsFilling.first_threshold,"%"),p.Db(1),p.Sc(" ",p.jc(18,37,"lang.contactsFillingStr"),""),p.Db(2),p.oc("ngModel",t.contactsFilling.first_threshold),p.Db(1),p.pc("value",t.fillingColor.first_threshold),p.Db(5),p.Rc(p.jc(26,39,"lang.contactsFillingStep2")),p.Db(3),p.Sc("",p.jc(29,41,"lang.fromRange")," "),p.Db(2),p.oc("ngStyle",p.vc(59,jh,t.fillingColor.second_threshold)),p.Db(1),p.Sc("",t.contactsFilling.first_threshold+1,"%"),p.Db(1),p.Sc(" ",p.jc(33,43,"lang.toRange")," "),p.Db(2),p.oc("ngStyle",p.vc(61,jh,t.fillingColor.second_threshold)),p.Db(1),p.Sc("",t.contactsFilling.second_threshold,"%"),p.Db(1),p.Sc(" ",p.jc(37,45,"lang.contactsFillingStr"),""),p.Db(2),p.oc("ngModel",t.contactsFilling.second_threshold)("min",t.contactsFilling.first_threshold+1),p.Db(1),p.pc("value",t.fillingColor.second_threshold),p.Db(5),p.Rc(p.jc(45,47,"lang.contactsFillingStep3")),p.Db(3),p.Sc("",p.jc(48,49,"lang.fromRange")," "),p.Db(2),p.oc("ngStyle",p.vc(63,jh,t.fillingColor.third_threshold)),p.Db(1),p.Sc("",t.contactsFilling.second_threshold+1,"%"),p.Db(1),p.Sc(" ",p.jc(52,51,"lang.toRange")," "),p.Db(2),p.oc("ngStyle",p.vc(65,jh,t.fillingColor.third_threshold)),p.Db(2),p.Sc(" ",p.jc(56,53,"lang.contactsFillingStr"),""),p.Db(3),p.pc("value",t.fillingColor.third_threshold),p.Db(1),p.oc("dataSource",t.dataSource),p.Db(17),p.oc("matHeaderRowDef",t.displayedColumns),p.Db(1),p.oc("matRowDefColumns",t.displayedColumns)}}let Rh=(()=>{class t{constructor(t,e,i,a,n,o){this.translate=t,this.http=e,this.notify=i,this.headerService=a,this.appService=n,this.viewContainerRef=o,this.subMenus=[{icon:"fa fa-book",route:"/administration/contacts/list",label:this.translate.instant("lang.contactsList"),current:!1},{icon:"fa fa-code",route:"/administration/contacts/contactsCustomFields",label:this.translate.instant("lang.customFieldsAdmin"),current:!1},{icon:"fa fa-cog",route:"/administration/contacts/contacts-parameters",label:this.translate.instant("lang.contactsParameters"),current:!0},{icon:"fa fa-users",route:"/administration/contacts/contacts-groups",label:this.translate.instant("lang.contactsGroups"),current:!1},{icon:"fas fa-magic",route:"/administration/contacts/duplicates",label:this.translate.instant("lang.duplicatesContactsAdmin"),current:!1}],this.contactsFilling={enable:!1,first_threshold:"33",second_threshold:"66"},this.contactsParameters=[],this.arrRatingColumns=[],this.fillingColor={first_threshold:"#E81C2B",second_threshold:"#F4891E",third_threshold:"#0AA34F"},this.loading=!1,this.dataSource=new G.p(this.contactsParameters),this.displayedColumns=["identifier","mandatory","filling","searchable","displayable"]}ngOnInit(){this.loading=!0,this.headerService.setHeader(this.translate.instant("lang.contactsParameters")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.http.get("../rest/contactsParameters").subscribe(t=>{this.contactsFilling=t.contactsFilling,this.contactsParameters=t.contactsParameters,this.loading=!1,setTimeout(()=>{this.dataSource=new G.p(this.contactsParameters),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort},0)})}addCriteria(t,e,i){this.contactsParameters.forEach((a,n)=>{a.id==e.id&&(this.contactsParameters[n][i]=t.checked)}),this.onSubmit()}onSubmit(){this.contactsFilling.first_threshold>=this.contactsFilling.second_threshold&&(this.contactsFilling.second_threshold=this.contactsFilling.first_threshold+1),this.http.put("../rest/contactsParameters",{contactsFilling:this.contactsFilling,contactsParameters:this.contactsParameters}).subscribe(()=>{this.notify.success(this.translate.instant("lang.parameterUpdated"))},t=>{this.notify.error(t.error.errors)})}toggleFillingContact(){this.contactsFilling.enable=!0!==this.contactsFilling.enable,this.onSubmit()}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(dh,!0),p.Xc(N.a,!0),p.Xc(H.a,!0)),2&t&&(p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.paginator=i.first),p.yc(i=p.ec())&&(e.sort=i.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","disableRipple","true"],["color","primary","mat-list-icon",""],["color","primary",3,"checked","change"],["mat-line","",3,"ngStyle","click"],[4,"ngIf"],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-4","col-xs-12"],[2,"margin-bottom","5px"],[3,"ngStyle"],["color","primary","max","98","min","1","step","1","thumbLabel","true",2,"width","100%",3,"ngModel","ngModelChange","change"],["disabled","","matInput","","type","color","name","color",3,"value"],["color","primary","max","99","step","1","thumbLabel","true",2,"width","100%",3,"ngModel","min","ngModelChange","change"],["color","primary","max","100","min","100","step","1","thumbLabel","true","disabled","",2,"width","100%"],["matSort","",3,"dataSource"],["table",""],["matColumnDef","identifier"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","mandatory"],["matColumnDef","filling"],["matColumnDef","searchable"],["matColumnDef","displayable"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],["color","primary",2,"margin-left","11px",3,"disabled","title","checked","change"],["color","primary",2,"margin-left","11px",3,"title","checked","change"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,mh,13,10,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,fh,2,0,"div",9),p.Oc(14,kh,78,67,"mat-card",10),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading))},directives:[C.e,C.f,M.a,x.a,O.t,wt.h,wt.g,wt.d,It.a,wt.c,et.a,k.l,O.w,_.a,O.s,o.f,I.c,j.a,j.f,j.m,lh.a,c.u,c.x,w.b,G.o,H.a,G.c,G.i,G.b,G.k,G.n,G.h,H.b,G.a,G.j,G.m],pipes:[h.d],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}"]}),t})();const Th=["snav2"];function Ph(t,e){1&t&&(p.Wb(0,"div",15),p.Rb(1,"mat-spinner",16),p.Qc(2,"\xa0 "),p.Wb(3,"div"),p.Qc(4),p.ic(5,"translate"),p.Vb(),p.Vb()),2&t&&(p.Db(4),p.Sc(" ",p.jc(5,1,"lang.updateInProgress")," "))}function Qh(t,e){1&t&&(p.Wb(0,"div",17),p.Rb(1,"mat-spinner",18),p.Vb())}function Fh(t,e){1&t&&(p.Wb(0,"div",24),p.Rb(1,"mat-icon",25),p.Wb(2,"span",26),p.Qc(3),p.ic(4,"translate"),p.Vb(),p.Rb(5,"mat-icon",27),p.Vb()),2&t&&(p.Db(3),p.Sc("",p.jc(4,1,"lang.appUpToDate")," !"))}function Lh(t,e){if(1&t&&(p.Wb(0,"div",28),p.Rb(1,"mat-icon",29),p.Wb(2,"span",26),p.Qc(3),p.ic(4,"translate"),p.Wb(5,"a",30),p.Qc(6),p.Vb(),p.Vb(),p.Rb(7,"mat-icon",31),p.Vb()),2&t){const t=p.hc(2);p.Db(3),p.Sc(" ",p.jc(4,3,"lang.newVersionAvailable")," ! "),p.Db(2),p.qc("href","https://labs.maarch.org/maarch/MaarchCourrier/tags/",t.versions.lastAvailableMinorVersion,"",p.Gc),p.Db(1),p.Rc(t.versions.lastAvailableMinorVersion)}}function Eh(t,e){if(1&t&&p.Rb(0,"div",32),2&t){const t=p.hc(2);p.oc("innerHTML",t.translate.instant("lang.updateWarn")+t.versions.diffOutput.join("<br/>"),p.Ec)}}function Ah(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",33),p.Wb(1,"button",34),p.dc("click",(function(){return p.Dc(t),p.hc(2).updateVersionAccess()})),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.Db(1),p.oc("disabled",!t.versions.canUpdate),p.Db(1),p.Rc(p.jc(3,2,"lang.makeUpdate"))}}function Uh(t,e){if(1&t&&(p.Wb(0,"mat-card",19),p.Oc(1,Fh,6,3,"div",20),p.Oc(2,Lh,8,5,"div",21),p.Oc(3,Eh,1,1,"div",22),p.Oc(4,Ah,4,4,"div",23),p.Vb()),2&t){const t=p.hc();p.Db(1),p.oc("ngIf",null==t.versions.lastAvailableMinorVersion),p.Db(1),p.oc("ngIf",null!=t.versions.lastAvailableMinorVersion),p.Db(1),p.oc("ngIf",!t.versions.canUpdate&&null!=t.versions.lastAvailableMinorVersion),p.Db(1),p.oc("ngIf",null!=t.versions.lastAvailableMinorVersion)}}function $h(t,e){if(1&t&&(p.Wb(0,"div",35),p.Qc(1," Maarch Courrier\xa0"),p.Wb(2,"a",30),p.Qc(3),p.Vb(),p.Qc(4),p.ic(5,"translate"),p.Vb()),2&t){const t=p.hc();p.Db(2),p.qc("href","https://labs.maarch.org/maarch/MaarchCourrier/tags/",t.versions.lastAvailableMajorVersion,"",p.Gc),p.Db(1),p.Rc(t.versions.lastAvailableMajorVersion),p.Db(1),p.Sc("\xa0",p.jc(5,3,"lang.isAvailable")," ! ")}}let zh=(()=>{class t{constructor(t,e,i,a,n,o){this.translate=t,this.http=e,this.headerService=i,this.notify=a,this.dialog=n,this.appService=o,this.loading=!1,this.updateInprogress=!1,this.versions={}}ngOnInit(){this.headerService.setHeader(this.translate.instant("lang.updateVersionControl")),this.loading=!0,this.http.get("../rest/versionsUpdate").pipe(Object(d.a)(t=>{this.versions=t}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1))),Object(d.a)(()=>{this.loading=!1})).subscribe()}updateVersionAccess(){this.dialogRef=this.dialog.open(q.a,{panelClass:"maarch-modal",data:{title:this.translate.instant("lang.confirm")+" ?",msg:this.translate.instant("lang.updateInfo")}}),this.dialogRef.afterClosed().pipe(Object(K.a)(t=>(this.dialogRef=null,"ok"===t?(this.updateInprogress=!0,!0):(this.updateInprogress=!1,!1))),Object(J.a)(()=>this.http.put("../rest/versionsUpdate",{})),Object(d.a)(()=>{this.dialogRef=this.dialog.open(Y.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.updateOk"),msg:this.translate.instant("lang.saveInDocserversInfo")}})}),Object(J.a)(()=>this.dialogRef.afterClosed()),Object(d.a)(()=>{this.dialogRef=null,window.location.reload(!0)}),Object(b.a)(t=>(this.dialogRef=this.dialog.open(Y.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.updateKO"),msg:this.translate.instant("lang.saveInDocserversInfo")}}),this.notify.handleErrors(t),Object(B.of)(!1))),Object(d.a)(()=>{this.updateInprogress=!1})).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(m.a),p.Qb(y.a),p.Qb(z.b),p.Qb(f.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&p.Kc(Th,!0),2&t&&p.yc(i=p.ec())&&(e.sidenavRight=i.first)},decls:24,vars:17,consts:[["class","updateInProgress",4,"ngIf"],["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",2,"overflow-x","hidden",3,"mode","fixedInViewport","opened"],["snav2",""],["class","alert-message alert-message-info","style","display: flex;",4,"ngIf"],["mat-subheader",""],[1,"updateInProgress"],["diameter","30"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],["class","alert alert-info","style","display: flex;",4,"ngIf"],["class","alert alert-success","style","display: flex;",4,"ngIf"],["class","alert-message alert-message-danger",3,"innerHTML",4,"ngIf"],["class","col-sm-12","style","text-align:center;",4,"ngIf"],[1,"alert","alert-info",2,"display","flex"],[1,"fa","fa-check","fa-2x",2,"flex","1","text-align","left"],[2,"flex","1","text-align","center"],[1,"fa","fa-check","fa-2x",2,"flex","1","text-align","right"],[1,"alert","alert-success",2,"display","flex"],[1,"fa","fa-info-circle","fa-2x",2,"flex","1","text-align","left"],["target","_blank",2,"font-weight","bold",3,"href"],[1,"fa","fa-info-circle","fa-2x",2,"flex","1","text-align","right"],[1,"alert-message","alert-message-danger",3,"innerHTML"],[1,"col-sm-12",2,"text-align","center"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"alert-message","alert-message-info",2,"display","flex"]],template:function(t,e){1&t&&(p.Oc(0,Ph,6,3,"div",0),p.Wb(1,"mat-sidenav-container",1),p.Wb(2,"mat-sidenav-content"),p.Wb(3,"div",2),p.Wb(4,"div",3),p.Wb(5,"div",4),p.Rb(6,"header-left"),p.Vb(),p.Wb(7,"div",5),p.Rb(8,"header-right"),p.Vb(),p.Vb(),p.Rb(9,"div",6),p.Vb(),p.Wb(10,"div",7),p.Wb(11,"div",8),p.Oc(12,Qh,2,0,"div",9),p.Oc(13,Uh,5,4,"mat-card",10),p.Vb(),p.Vb(),p.Vb(),p.Wb(14,"mat-sidenav",11,12),p.Oc(16,$h,6,5,"div",13),p.Wb(17,"mat-list"),p.Wb(18,"h3",14),p.Qc(19),p.ic(20,"translate"),p.Vb(),p.Wb(21,"mat-list-item"),p.Wb(22,"b"),p.Qc(23),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.oc("ngIf",e.updateInprogress),p.Db(4),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading),p.Db(1),p.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!e.appService.getViewMode()),p.Db(2),p.oc("ngIf",null!=e.versions.lastAvailableMajorVersion),p.Db(3),p.Rc(p.jc(20,15,"lang.currentVersion")),p.Db(4),p.Rc(e.versions.currentVersion))},directives:[O.t,C.e,C.f,M.a,x.a,C.d,wt.a,wt.g,wt.d,I.c,j.a,It.a,R.b],pipes:[h.d],styles:[".updateInProgress[_ngcontent-%COMP%]{z-index:2;display:flex;position:fixed;top:0;left:0;width:100%;height:100%;background:hsla(0,0%,100%,.93);justify-content:center;align-items:center}.alert-message-danger[_ngcontent-%COMP%]{width:100%;max-width:100%}"]}),t})();const Nh=["adminMenuTemplate"];function Hh(t,e){1&t&&(p.Wb(0,"mat-nav-list"),p.Wb(1,"h3",11),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"a",12),p.Rb(5,"mat-icon",13),p.Wb(6,"p",14),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(2),p.Rc(p.jc(3,2,"lang.actions")),p.Db(5),p.Sc(" ",p.jc(8,4,"lang.add")," "))}function Bh(t,e){1&t&&(p.Wb(0,"div",15),p.Rb(1,"mat-spinner",16),p.Vb())}function Xh(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",42),p.dc("click",(function(){p.Dc(t);const e=p.hc().$implicit;return p.hc(3).toggleDocserver(e)})),p.ic(1,"translate"),p.Rb(2,"mat-icon",43),p.Vb()}2&t&&p.pc("matTooltip",p.jc(1,1,"lang.lockDocserver"))}function Gh(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",44),p.dc("click",(function(){p.Dc(t);const e=p.hc().$implicit;return p.hc(3).toggleDocserver(e)})),p.ic(1,"translate"),p.Rb(2,"mat-icon",45),p.Vb()}2&t&&p.pc("matTooltip",p.jc(1,1,"lang.unlockDocserver"))}function qh(t,e){if(1&t&&p.Rb(0,"mat-progress-spinner",46),2&t){const t=p.hc().$implicit;p.oc("value",t.percentage)}}function Kh(t,e){if(1&t&&p.Rb(0,"mat-progress-spinner",47),2&t){const t=p.hc().$implicit;p.oc("value",t.percentage)}}function Jh(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",21),p.Wb(1,"mat-card"),p.Wb(2,"form",22,23),p.dc("ngSubmit",(function(){p.Dc(t);const i=e.$implicit,a=e.index;return p.hc(3).onSubmit(i,a)})),p.Oc(4,Xh,3,3,"button",24),p.Oc(5,Gh,3,3,"button",25),p.Wb(6,"div",26),p.Wb(7,"div",27),p.Wb(8,"mat-form-field"),p.Wb(9,"input",28),p.dc("ngModelChange",(function(i){return p.Dc(t),e.$implicit.device_label=i})),p.ic(10,"translate"),p.ic(11,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(12,"div",21),p.Oc(13,qh,1,1,"mat-progress-spinner",29),p.Oc(14,Kh,1,1,"mat-progress-spinner",30),p.Wb(15,"span",31),p.Qc(16),p.Vb(),p.Vb(),p.Wb(17,"div",32),p.Wb(18,"mat-form-field"),p.Wb(19,"input",33),p.dc("ngModelChange",(function(i){return p.Dc(t),e.$implicit.coll_id=i})),p.ic(20,"translate"),p.ic(21,"translate"),p.Vb(),p.Vb(),p.Wb(22,"mat-form-field"),p.Wb(23,"input",34),p.dc("ngModelChange",(function(i){return p.Dc(t),e.$implicit.docserver_id=i})),p.ic(24,"translate"),p.ic(25,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(26,"div",21),p.Wb(27,"mat-form-field"),p.Wb(28,"input",35),p.dc("ngModelChange",(function(i){return p.Dc(t),e.$implicit.limitSizeFormatted=i})),p.ic(29,"translate"),p.ic(30,"translate"),p.Vb(),p.Wb(31,"span",36),p.Qc(32," Go"),p.Vb(),p.Vb(),p.Vb(),p.Rb(33,"div",32),p.Wb(34,"div",27),p.Wb(35,"mat-form-field"),p.Wb(36,"input",37),p.dc("ngModelChange",(function(i){return p.Dc(t),e.$implicit.path_template=i})),p.ic(37,"translate"),p.ic(38,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(39,"div",38),p.Wb(40,"button",39),p.Qc(41),p.ic(42,"translate"),p.Vb(),p.Wb(43,"button",40),p.dc("click",(function(){p.Dc(t);const i=e.index,a=p.hc().$implicit;return p.hc(2).cancelModification(a.docserver_type_id,i)})),p.Qc(44),p.ic(45,"translate"),p.Vb(),p.Wb(46,"button",41),p.dc("click",(function(){p.Dc(t);const i=e.$implicit,a=e.index;return p.hc(3).delete(i,a)})),p.Qc(47),p.ic(48,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit,i=e.index,a=p.hc().$implicit,n=p.hc(2);p.Db(4),p.oc("ngIf",!t.is_readonly),p.Db(1),p.oc("ngIf",t.is_readonly),p.Db(4),p.pc("title",p.jc(10,29,"lang.label")),p.pc("placeholder",p.jc(11,31,"lang.label")),p.oc("ngModel",t.device_label)("disabled",t.is_readonly),p.Db(4),p.oc("ngIf",t.percentage<60),p.Db(1),p.oc("ngIf",t.percentage>=60),p.Db(1),p.pc("title",t.actualSizeFormatted),p.Db(1),p.Sc("",t.percentage,"%"),p.Db(3),p.pc("title",p.jc(20,33,"lang.collection")),p.pc("placeholder",p.jc(21,35,"lang.collection")),p.oc("ngModel",t.coll_id),p.Db(4),p.pc("title",p.jc(24,37,"lang.id")),p.pc("placeholder",p.jc(25,39,"lang.id")),p.oc("ngModel",t.docserver_id),p.Db(5),p.pc("title",p.jc(29,41,"lang.maxSize")),p.pc("placeholder",p.jc(30,43,"lang.maxSize")),p.oc("ngModel",t.limitSizeFormatted)("disabled",t.is_readonly),p.Db(8),p.pc("title",p.jc(37,45,"lang.path")),p.pc("placeholder",p.jc(38,47,"lang.path")),p.oc("ngModel",t.path_template)("disabled",t.is_readonly),p.Db(4),p.oc("disabled",n.checkModif(t,n.docserversClone[a.docserver_type_id][i])),p.Db(1),p.Rc(p.jc(42,49,"lang.update")),p.Db(2),p.oc("disabled",n.checkModif(t,n.docserversClone[a.docserver_type_id][i])),p.Db(1),p.Rc(p.jc(45,51,"lang.cancel")),p.Db(3),p.Rc(p.jc(48,53,"lang.delete"))}}function Yh(t,e){if(1&t&&(p.Wb(0,"mat-expansion-panel"),p.Wb(1,"mat-expansion-panel-header"),p.Wb(2,"mat-panel-title"),p.Qc(3),p.Vb(),p.Wb(4,"mat-panel-description"),p.Qc(5),p.Vb(),p.Vb(),p.Wb(6,"div",19),p.Oc(7,Jh,49,55,"div",20),p.Vb(),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.Db(3),p.Sc(" ",t.docserver_type_label," "),p.Db(2),p.Sc(" ",t.docserver_type_id," "),p.Db(2),p.oc("ngForOf",i.docservers[t.docserver_type_id])}}function Zh(t,e){if(1&t&&(p.Wb(0,"mat-card",17),p.Wb(1,"mat-accordion"),p.Oc(2,Yh,8,3,"mat-expansion-panel",18),p.Vb(),p.Vb()),2&t){const t=p.hc();p.Db(2),p.oc("ngForOf",t.docserversTypes)}}let tu=(()=>{class t{constructor(t,e,i,a,n,o){this.translate=t,this.http=e,this.notify=i,this.headerService=a,this.appService=n,this.viewContainerRef=o,this.loading=!1,this.docservers=[],this.docserversClone=[],this.docserversTypes={}}ngOnInit(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.docservers")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/docservers").subscribe(t=>{this.docservers=t.docservers,this.docserversClone=JSON.parse(JSON.stringify(this.docservers)),this.docserversTypes=t.types,this.loading=!1})}toggleDocserver(t){t.is_readonly=!t.is_readonly}cancelModification(t,e){this.docservers[t][e]=JSON.parse(JSON.stringify(this.docserversClone[t][e]))}checkModif(t,e){return t.size_limit_number=1e9*t.limitSizeFormatted,JSON.stringify(t)===JSON.stringify(e)||!(t.size_limit_number>=t.actual_size_number&&t.limitSizeFormatted>0&&/^[\d]*$/.test(t.limitSizeFormatted))}onSubmit(t,e){t.size_limit_number=1e9*t.limitSizeFormatted,this.http.put("../rest/docservers/"+t.id,t).subscribe(i=>{this.docservers[t.docserver_type_id][e]=i.docserver,this.docserversClone[t.docserver_type_id][e]=JSON.parse(JSON.stringify(this.docservers[t.docserver_type_id][e])),this.notify.success(this.translate.instant("lang.docserverUpdated"))},t=>{this.notify.error(t.error.errors)})}delete(t,e){let i=null;i=0===t.actual_size_number?confirm(this.translate.instant("lang.delete")+" ?"):confirm(this.translate.instant("lang.docserverdeleteWarning")),i&&this.http.delete("../rest/docservers/"+t.id).subscribe(()=>{this.docservers[t.docserver_type_id].splice(e,1),this.notify.success(this.translate.instant("lang.docserverDeleted"))},t=>{this.notify.error(t.error.errors)})}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(Nh,!0),p.Xc(N.a,!0),p.Xc(H.a,!0)),2&t&&(p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.paginator=i.first),p.yc(i=p.ec())&&(e.sort=i.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/docservers/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[4,"ngFor","ngForOf"],[1,"row"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"form-horizontal",3,"ngSubmit"],["docserverFormUp","ngForm"],["mat-icon-button","","color","accent","style","position: absolute;top: 5px;right:10px;",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","color","warn","style","position: absolute;top: 5px;right:10px;",3,"matTooltip","click",4,"ngIf"],[1,"row",2,"margin-top","10px"],[1,"col-md-12"],["matInput","","required","","name","label","id","label","type","text","maxlength","255",3,"title","placeholder","ngModel","disabled","ngModelChange"],["name","percent_val","id","percent_val","color","primary","mode","determinate","style","margin:auto;",3,"value",4,"ngIf"],["name","percent_val","id","percent_val","color","warn","mode","determinate","style","margin:auto;",3,"value",4,"ngIf"],[2,"position","absolute","font-weight","bold","left","50%","transform","translateX(-50%)","top","40%","font-weight","bold",3,"title"],[1,"col-md-8"],["matInput","","required","","name","collection","id","collection","type","text","disabled","",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","required","","name","identifier","id","identifier","type","text","disabled","",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","required","","name","max_size","id","max_size","type","number",3,"title","placeholder","ngModel","disabled","ngModelChange"],["matSuffix",""],["matInput","","required","","name","path","id","path","type","text",3,"title","placeholder","ngModel","disabled","ngModelChange"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-raised-button","","color","default",3,"disabled","click"],["mat-raised-button","","type","button","color","warn",3,"click"],["mat-icon-button","","color","accent",2,"position","absolute","top","5px","right","10px",3,"matTooltip","click"],[1,"fa","fa-lock-open"],["mat-icon-button","","color","warn",2,"position","absolute","top","5px","right","10px",3,"matTooltip","click"],[1,"fa","fa-lock"],["name","percent_val","id","percent_val","color","primary","mode","determinate",2,"margin","auto",3,"value"],["name","percent_val","id","percent_val","color","warn","mode","determinate",2,"margin","auto",3,"value"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,Hh,9,6,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,Bh,2,0,"div",9),p.Oc(14,Zh,3,1,"mat-card",10),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading))},directives:[C.e,C.f,M.a,x.a,O.t,wt.h,wt.g,wt.d,o.f,It.a,wt.c,k.l,I.c,j.a,Re.a,O.s,Re.c,Re.g,Re.h,Re.f,c.K,c.v,c.w,S.c,w.b,c.d,c.F,c.p,c.u,c.x,c.A,S.j,R.b,kt.b,I.a],pipes:[h.d],encapsulation:2}),t})();function eu(t,e){1&t&&(p.Wb(0,"div",10),p.Rb(1,"mat-spinner",11),p.Vb())}function iu(t,e){if(1&t&&(p.Wb(0,"mat-option",30),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t.docserver_type_id),p.Db(1),p.Sc(" ",t.docserver_type_label," ")}}function au(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-card",12),p.Wb(1,"form",13,14),p.dc("ngSubmit",(function(){p.Dc(t);const e=p.hc();return e.onSubmit(e.docserver)})),p.Wb(3,"div",15),p.Wb(4,"div",16),p.Wb(5,"mat-form-field"),p.Wb(6,"mat-select",17),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().docserver.docserver_type_id=e})),p.ic(7,"translate"),p.ic(8,"translate"),p.Oc(9,iu,2,2,"mat-option",18),p.Vb(),p.Vb(),p.Wb(10,"mat-form-field"),p.Wb(11,"input",19),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().docserver.docserver_id=e})),p.ic(12,"translate"),p.ic(13,"translate"),p.Vb(),p.Vb(),p.Wb(14,"mat-form-field"),p.Wb(15,"input",20),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().docserver.device_label=e})),p.ic(16,"translate"),p.ic(17,"translate"),p.Vb(),p.Vb(),p.Wb(18,"mat-form-field"),p.Wb(19,"mat-select",21),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().docserver.coll_id=e})),p.ic(20,"translate"),p.ic(21,"translate"),p.Wb(22,"mat-option",22),p.Qc(23," letterbox_coll "),p.Vb(),p.Wb(24,"mat-option",23),p.Qc(25," attachments_coll "),p.Vb(),p.Wb(26,"mat-option",24),p.Qc(27," archive_transfer_coll "),p.Vb(),p.Vb(),p.Vb(),p.Wb(28,"mat-form-field"),p.Wb(29,"input",25),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().docserver.limitSizeFormatted=e})),p.ic(30,"translate"),p.ic(31,"translate"),p.Vb(),p.Wb(32,"span",26),p.Qc(33," Go"),p.Vb(),p.Vb(),p.Wb(34,"mat-form-field"),p.Wb(35,"input",27),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().docserver.path_template=e})),p.ic(36,"translate"),p.ic(37,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(38,"div",28),p.Wb(39,"button",29),p.Qc(40),p.ic(41,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.zc(2),e=p.hc();p.Db(6),p.pc("title",p.jc(7,23,"lang.docserverType")),p.pc("placeholder",p.jc(8,25,"lang.docserverType")),p.oc("ngModel",e.docserver.docserver_type_id),p.Db(3),p.oc("ngForOf",e.docserversTypes),p.Db(2),p.pc("title",p.jc(12,27,"lang.id")),p.pc("placeholder",p.jc(13,29,"lang.id")),p.oc("ngModel",e.docserver.docserver_id),p.Db(4),p.pc("title",p.jc(16,31,"lang.label")),p.pc("placeholder",p.jc(17,33,"lang.label")),p.oc("ngModel",e.docserver.device_label),p.Db(4),p.pc("title",p.jc(20,35,"lang.collection")),p.pc("placeholder",p.jc(21,37,"lang.collection")),p.oc("ngModel",e.docserver.coll_id),p.Db(10),p.pc("title",p.jc(30,39,"lang.maxSize")),p.pc("placeholder",p.jc(31,41,"lang.maxSize")),p.oc("ngModel",e.docserver.limitSizeFormatted)("disabled",e.docserver.is_readonly),p.Db(6),p.pc("title",p.jc(36,43,"lang.path")),p.pc("placeholder",p.jc(37,45,"lang.path")),p.oc("ngModel",e.docserver.path_template)("disabled",e.docserver.is_readonly),p.Db(4),p.oc("disabled",!t.form.valid),p.Db(1),p.Rc(p.jc(41,47,"lang.add"))}}let nu=(()=>{class t{constructor(t,e,i,a,n,o){this.translate=t,this.http=e,this.router=i,this.notify=a,this.headerService=n,this.appService=o,this.loading=!1,this.docserver={coll_id:"letterbox_coll",docserver_type_id:"DOC",limitSizeFormatted:"50"},this.docserversTypes=[]}ngOnInit(){this.headerService.setHeader(this.translate.instant("lang.docserverCreation")),this.loading=!0,this.http.get("../rest/docserverTypes").subscribe(t=>{this.docserversTypes=t.docserverTypes,this.loading=!1})}onSubmit(t){t.size_limit_number=1e9*t.limitSizeFormatted,this.http.post("../rest/docservers",t).subscribe(t=>{this.notify.success(this.translate.instant("lang.docserverAdded")),this.router.navigate(["/administration/docservers/"])},t=>{this.notify.error(t.error.errors)})}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(o.c),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Xc(N.a,!0),p.Xc(H.a,!0)),2&t&&(p.yc(i=p.ec())&&(e.paginator=i.first),p.yc(i=p.ec())&&(e.sort=i.first))},decls:13,vars:8,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"form-horizontal",3,"ngSubmit"],["docserverForm","ngForm"],[1,"row",2,"margin-top","10px"],[1,"col-md-12"],["required","","name","docserver_type","id","docserver_type",3,"title","placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","required","","name","identifier","id","identifier","type","text","maxlength","32","pattern","^[\\w.-]*$",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","required","","name","label","id","label","type","text","maxlength","255",3,"title","placeholder","ngModel","ngModelChange"],["required","","name","collection","id","collection",3,"title","placeholder","ngModel","ngModelChange"],["value","letterbox_coll","selected",""],["value","attachments_coll"],["value","archive_transfer_coll"],["matInput","","required","","name","max_size","id","max_size","type","number","pattern","^\\d+$",3,"title","placeholder","ngModel","disabled","ngModelChange"],["matSuffix",""],["matInput","","required","","name","path","id","path","type","text",3,"title","placeholder","ngModel","disabled","ngModelChange"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[3,"value"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Wb(1,"mat-sidenav-content"),p.Wb(2,"div",1),p.Wb(3,"div",2),p.Wb(4,"div",3),p.Rb(5,"header-left"),p.Vb(),p.Wb(6,"div",4),p.Rb(7,"header-right"),p.Vb(),p.Vb(),p.Rb(8,"div",5),p.Vb(),p.Wb(9,"div",6),p.Wb(10,"div",7),p.Oc(11,eu,2,0,"div",8),p.Oc(12,au,42,49,"mat-card",9),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(3),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading))},directives:[C.e,C.f,M.a,x.a,O.t,I.c,j.a,c.K,c.v,c.w,S.c,at.a,c.F,c.u,c.x,O.s,w.b,c.d,c.p,c.B,k.p,c.A,S.j,R.b],pipes:[h.d],encapsulation:2}),t})();const ou=["adminMenuTemplate"];function su(t,e){1&t&&(p.Wb(0,"mat-nav-list"),p.Wb(1,"h3",11),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"a",12),p.Rb(5,"mat-icon",13),p.Wb(6,"p",14),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(2),p.Rc(p.jc(3,2,"lang.actions")),p.Db(5),p.Sc(" ",p.jc(8,4,"lang.add")," "))}function cu(t,e){1&t&&(p.Wb(0,"div",15),p.Rb(1,"mat-spinner",16),p.Vb())}function ru(t,e){1&t&&(p.Wb(0,"mat-header-cell",44),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc("",p.jc(2,1,"lang.technicalId")," "))}function lu(t,e){if(1&t&&(p.Wb(0,"mat-cell",45),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.template_id," ")}}function du(t,e){1&t&&(p.Wb(0,"mat-header-cell",46),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc("",p.jc(2,1,"lang.templateName")," "))}function bu(t,e){if(1&t&&(p.Wb(0,"mat-cell",47),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.template_label," ")}}function pu(t,e){if(1&t&&(p.Wb(0,"mat-header-cell",46),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=p.hc(2);p.Ib("hide-for-mobile",t.appService.getViewMode()),p.Db(1),p.Sc("",p.jc(2,3,"lang.description")," ")}}function hu(t,e){if(1&t&&(p.Wb(0,"mat-cell",47),p.Qc(1),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.Ib("hide-for-mobile",i.appService.getViewMode()),p.Db(1),p.Sc(" ",t.template_comment," ")}}function uu(t,e){if(1&t&&(p.Wb(0,"mat-header-cell",44),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=p.hc(2);p.Ib("hide-for-mobile",t.appService.getViewMode()),p.Db(1),p.Sc(" ",p.jc(2,3,"lang.templateTarget"),"")}}function mu(t,e){if(1&t&&(p.Wb(0,"mat-cell",45),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.Ib("hide-for-mobile",i.appService.getViewMode()),p.Db(1),p.Sc(" ",p.jc(2,3,"lang."+t.template_target)," ")}}function fu(t,e){if(1&t&&(p.Wb(0,"mat-header-cell",44),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=p.hc(2);p.Ib("hide-for-mobile",t.appService.getViewMode()),p.Db(1),p.Sc("",p.jc(2,3,"lang.templateType")," ")}}function gu(t,e){if(1&t&&(p.Wb(0,"mat-cell",45),p.Qc(1),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.Ib("hide-for-mobile",i.appService.getViewMode()),p.Db(1),p.Sc(" ",t.template_type," ")}}function vu(t,e){1&t&&p.Rb(0,"mat-header-cell")}function yu(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-cell",48),p.Wb(1,"button",49),p.dc("click",(function(i){p.Dc(t);const a=e.$implicit,n=p.hc(2);return i.stopPropagation(),n.deleteTemplate(a)})),p.ic(2,"translate"),p.Rb(3,"mat-icon",50),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit;p.Db(1),p.pc("matTooltip",p.jc(2,2,"lang.delete")),p.oc("disabled","Y"==t.is_system)}}function Du(t,e){1&t&&p.Rb(0,"mat-header-row")}function Vu(t,e){1&t&&(p.Rb(0,"mat-row",51),p.ic(1,"translate")),2&t&&(p.qc("routerLink","/administration/templates/",e.$implicit.template_id,""),p.pc("matTooltip",p.jc(1,2,"lang.view")))}function Cu(t,e){if(1&t&&(p.Wb(0,"mat-card",17),p.Wb(1,"div",18),p.Wb(2,"div",19),p.Wb(3,"mat-form-field"),p.Rb(4,"input",20),p.ic(5,"translate"),p.Vb(),p.Vb(),p.Wb(6,"div",19),p.Rb(7,"mat-paginator",21,22),p.Vb(),p.Vb(),p.Wb(9,"mat-table",23,24),p.Ub(11,25),p.Oc(12,ru,3,3,"mat-header-cell",26),p.Oc(13,lu,2,1,"mat-cell",27),p.Tb(),p.Ub(14,28),p.Oc(15,du,3,3,"mat-header-cell",29),p.Oc(16,bu,2,1,"mat-cell",30),p.Tb(),p.Ub(17,31),p.Oc(18,pu,3,5,"mat-header-cell",32),p.Oc(19,hu,2,3,"mat-cell",33),p.Tb(),p.Ub(20,34),p.Oc(21,uu,3,5,"mat-header-cell",35),p.Oc(22,mu,3,5,"mat-cell",36),p.Tb(),p.Ub(23,37),p.Oc(24,fu,3,5,"mat-header-cell",35),p.Oc(25,gu,2,3,"mat-cell",36),p.Tb(),p.Ub(26,38),p.Oc(27,vu,1,0,"mat-header-cell",39),p.Oc(28,yu,4,4,"mat-cell",40),p.Tb(),p.Oc(29,Du,1,0,"mat-header-row",41),p.Oc(30,Vu,2,4,"mat-row",42),p.Vb(),p.Wb(31,"div",43),p.Qc(32),p.ic(33,"translate"),p.Vb(),p.Vb()),2&t){const t=p.hc();p.Db(4),p.pc("placeholder",p.jc(5,10,"lang.filterBy")),p.oc("formControl",t.adminService.getFilterField()),p.Db(3),p.oc("length",100)("hidePageSize",!0)("pageSize",10),p.Db(2),p.oc("dataSource",t.adminService.getDataSource()),p.Db(20),p.oc("matHeaderRowDef",t.displayedColumns),p.Db(1),p.oc("matRowDefColumns",t.displayedColumns),p.Db(2),p.Tc(" ",t.templates.length," ",p.jc(33,12,"lang.templates"),"")}}let Mu=(()=>{class t{constructor(t,e,i,a,n,o,s,c){this.translate=t,this.http=e,this.notify=i,this.headerService=a,this.appService=n,this.functions=o,this.adminService=s,this.viewContainerRef=c,this.search=null,this.templates=[],this.titles=[],this.loading=!1,this.displayedColumns=["template_id","template_label","template_comment","template_type","template_target","actions"],this.filterColumns=["template_label","template_comment","template_type","template_target"]}ngOnInit(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.templates")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/templates").subscribe(t=>{this.templates=t.templates,this.loading=!1,setTimeout(()=>{this.adminService.setDataSource("admin_templates",this.templates,this.sort,this.paginator,this.filterColumns)},0)},t=>{this.notify.handleErrors(t)})}deleteTemplate(t){confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+t.template_label+" \xbb")&&this.http.delete("../rest/templates/"+t.template_id).subscribe(()=>{for(const e in this.templates)this.templates[e].template_id===t.template_id&&this.templates.splice(Number(e),1);this.adminService.setDataSource("admin_templates",this.templates,this.sort,this.paginator,this.filterColumns),this.notify.success(this.translate.instant("lang.templateDeleted"))},t=>{this.notify.error(t.error.errors)})}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a),p.Qb(D.a),p.Qb(St),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(ou,!0),p.Xc(N.a,!0),p.Xc(H.a,!0)),2&t&&(p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.paginator=i.first),p.yc(i=p.ec())&&(e.sort=i.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/templates/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","template_id"],["mat-sort-header","","style","flex:1;",4,"matHeaderCellDef"],["style","flex:1;",4,"matCellDef"],["matColumnDef","template_label"],["mat-sort-header","","style","flex:2;",4,"matHeaderCellDef"],["style","flex:2;",4,"matCellDef"],["matColumnDef","template_comment"],["mat-sort-header","","style","flex:2;",3,"hide-for-mobile",4,"matHeaderCellDef"],["style","flex:2;",3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","template_target"],["mat-sort-header","","style","flex:1;",3,"hide-for-mobile",4,"matHeaderCellDef"],["style","flex:1;",3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","template_type"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header","",2,"flex","1"],[2,"flex","1"],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"disabled","matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,su,9,6,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,cu,2,0,"div",9),p.Oc(14,Cu,34,14,"mat-card",10),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading))},directives:[C.e,C.f,M.a,x.a,O.t,wt.h,wt.g,wt.d,o.f,It.a,wt.c,k.l,I.c,j.a,S.c,w.b,c.d,c.u,c.j,N.a,G.o,H.a,G.c,G.i,G.b,G.k,G.n,G.h,H.b,G.a,R.b,kt.b,G.j,G.m,o.d],pipes:[h.d],encapsulation:2}),t})();var Wu=i("Dxa7"),xu=i("+AL4"),Ou=i("IOqN");const _u=["onlyofficeViewer"],Su=["collaboraOnlineViewer"];function wu(t,e){if(1&t){const t=p.Xb();p.Wb(0,"onlyoffice-viewer",8,9),p.dc("triggerAfterUpdatedDoc",(function(){return p.Dc(t),p.hc().close()}))("triggerCloseEditor",(function(){return p.Dc(t),p.hc().dialogRef.close("")}))("triggerModifiedDocument",(function(){return p.Dc(t),p.hc().documentIsModified=!0})),p.Vb()}if(2&t){const t=p.hc();p.oc("hideCloseEditor",!0)("params",t.editorOptions)("file",t.file)("editMode",!0)}}function Iu(t,e){if(1&t){const t=p.Xb();p.Wb(0,"app-collabora-online-viewer",10,11),p.dc("triggerAfterUpdatedDoc",(function(){return p.Dc(t),p.hc().close()}))("triggerCloseEditor",(function(){return p.Dc(t),p.hc().dialogRef.close("")}))("triggerModifiedDocument",(function(){return p.Dc(t),p.hc().documentIsModified=!0})),p.Vb()}if(2&t){const t=p.hc();p.oc("params",t.editorOptions)("file",t.file)("editMode",!0)}}let ju=(()=>{class t{constructor(t,e,i){this.translate=t,this.dialogRef=e,this.data=i,this.loading=!1,this.editorOptions=null,this.file=null,this.editorType=null,this.documentIsModified=!1}ngOnInit(){this.editorOptions=this.data.editorOptions,this.file=this.data.file,this.editorType=this.data.editorType}close(){"onlyoffice"===this.editorType?this.onlyofficeViewer.getFile().pipe(Object(Wu.take)(1),Object(xt.tap)(t=>{this.dialogRef.close(t)})).subscribe():"collaboraonline"===this.editorType?this.collaboraOnlineViewer.getFile().pipe(Object(Wu.take)(1),Object(xt.tap)(t=>{this.dialogRef.close(t)})).subscribe():this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(z.h),p.Qb(z.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Xc(_u,!0),p.Xc(Su,!0)),2&t&&(p.yc(i=p.ec())&&(e.onlyofficeViewer=i.first),p.yc(i=p.ec())&&(e.collaboraOnlineViewer=i.first))},decls:12,vars:10,consts:[[1,"mat-dialog-content-container"],[2,"padding","0px"],["style","height:100%;width:100%;",3,"hideCloseEditor","params","file","editMode","triggerAfterUpdatedDoc","triggerCloseEditor","triggerModifiedDocument",4,"ngIf"],["style","height:100%;width:100%;",3,"params","file","editMode","triggerAfterUpdatedDoc","triggerCloseEditor","triggerModifiedDocument",4,"ngIf"],[1,"divider-modal"],["mat-dialog-actions","",1,"actions"],["mat-raised-button","","mat-button","","color","primary",3,"disabled","click"],["mat-raised-button","","mat-button","",3,"disabled","mat-dialog-close"],[2,"height","100%","width","100%",3,"hideCloseEditor","params","file","editMode","triggerAfterUpdatedDoc","triggerCloseEditor","triggerModifiedDocument"],["onlyofficeViewer",""],[2,"height","100%","width","100%",3,"params","file","editMode","triggerAfterUpdatedDoc","triggerCloseEditor","triggerModifiedDocument"],["collaboraOnlineViewer",""]],template:function(t,e){1&t&&(p.Wb(0,"div",0),p.Wb(1,"mat-dialog-content",1),p.Oc(2,wu,2,4,"onlyoffice-viewer",2),p.Oc(3,Iu,2,3,"app-collabora-online-viewer",3),p.Vb(),p.Rb(4,"span",4),p.Wb(5,"div",5),p.Wb(6,"button",6),p.dc("click",(function(){return e.close()})),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Wb(9,"button",7),p.Qc(10),p.ic(11,"translate"),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(2),p.oc("ngIf","onlyoffice"===e.editorType),p.Db(1),p.oc("ngIf","collaboraonline"===e.editorType),p.Db(3),p.oc("disabled",!e.documentIsModified),p.Db(1),p.Rc(p.jc(8,6,"lang.validate")),p.Db(2),p.oc("disabled",e.loading),p.Db(1),p.Rc(p.jc(11,8,"lang.cancel")))},directives:[z.f,O.t,z.c,R.b,z.d,xu.a,Ou.a],pipes:[h.d],styles:[""]}),t})();const ku=["snav2"],Ru=["adminMenuTemplate"],Tu=["maarchTree"];function Pu(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-nav-list"),p.Wb(1,"h3",13),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"a",17),p.dc("click",(function(){return p.Dc(t),p.hc(2).duplicateTemplate()})),p.Rb(5,"mat-icon",18),p.Wb(6,"p",19),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.Db(2),p.Rc(p.jc(3,5,"lang.actions")),p.Db(2),p.Ib("disabled",t.lockFound||"acknowledgementReceipt"==t.template.target),p.oc("disableRipple",t.lockFound||"acknowledgementReceipt"==t.template.target),p.Db(3),p.Sc(" ",p.jc(8,7,"lang.duplicate")," ")}}function Qu(t,e){if(1&t&&p.Oc(0,Pu,9,9,"mat-nav-list",16),2&t){const t=p.hc();p.oc("ngIf",!t.creationMode&&!t.loading)}}function Fu(t,e){1&t&&(p.Wb(0,"div",20),p.Rb(1,"mat-spinner",21),p.Vb())}function Lu(t,e){if(1&t&&(p.Wb(0,"div",27),p.Wb(1,"div",25),p.Wb(2,"mat-form-field"),p.Rb(3,"input",34),p.ic(4,"translate"),p.ic(5,"translate"),p.Vb(),p.Vb(),p.Vb()),2&t){const t=p.hc(2);p.Db(3),p.pc("title",p.jc(4,3,"lang.technicalId")),p.pc("value",t.template.id),p.pc("placeholder",p.jc(5,5,"lang.technicalId"))}}function Eu(t,e){if(1&t&&(p.Wb(0,"mat-option",35),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t),p.Db(1),p.Sc(" ",p.jc(2,2,"lang."+t),"")}}function Au(t,e){if(1&t&&(p.Wb(0,"mat-option",35),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t.id),p.Db(1),p.Sc(" ",t.label," ")}}function Uu(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",27),p.Wb(1,"div",25),p.Wb(2,"mat-form-field"),p.Wb(3,"mat-select",36),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).template.template_attachment_type=e})),p.ic(4,"translate"),p.ic(5,"translate"),p.Wb(6,"mat-option",37),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Oc(9,Au,2,2,"mat-option",31),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.Db(3),p.pc("title",p.jc(4,5,"lang.attachmentType")),p.pc("placeholder",p.jc(5,7,"lang.attachmentType")),p.oc("ngModel",t.template.template_attachment_type),p.Db(4),p.Rc(p.jc(8,9,"lang.allAttachments")),p.Db(2),p.oc("ngForOf",t.attachmentTypesList)}}function $u(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",27),p.Wb(1,"div",25),p.Wb(2,"mat-form-field"),p.Wb(3,"mat-select",38),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).template.template_attachment_type=e})),p.ic(4,"translate"),p.ic(5,"translate"),p.Wb(6,"mat-option",39),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Wb(9,"mat-option",40),p.Qc(10),p.ic(11,"translate"),p.Vb(),p.Wb(12,"mat-option",41),p.Qc(13),p.ic(14,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.Db(3),p.pc("title",p.jc(4,7,"lang.acknowledgementReceiptType")),p.pc("placeholder",p.jc(5,9,"lang.acknowledgementReceiptType")),p.oc("disabled",!t.creationMode)("ngModel",t.template.template_attachment_type),p.Db(4),p.Rc(p.jc(8,11,"lang.ARsimple")),p.Db(3),p.Rc(p.jc(11,13,"lang.ARsva")),p.Db(3),p.Rc(p.jc(14,15,"lang.ARsvr"))}}function zu(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",27),p.Wb(1,"div",25),p.Wb(2,"mat-form-field"),p.Wb(3,"input",42),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).template.subject=e})),p.ic(4,"translate"),p.ic(5,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.Db(3),p.pc("title",p.jc(4,3,"lang.emailSubject")),p.pc("placeholder",p.jc(5,5,"lang.emailSubject")),p.oc("ngModel",t.template.subject)}}function Nu(t,e){if(1&t&&(p.Wb(0,"mat-radio-button",45),p.Qc(1),p.Vb()),2&t){const t=e.$implicit,i=p.hc(3);p.oc("value",t)("checked",i.template.type===t),p.Db(1),p.Sc(" ",t,"")}}function Hu(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",27),p.Wb(1,"div",25),p.Wb(2,"mat-radio-group",43),p.dc("change",(function(e){return p.Dc(t),p.hc(2).changeType(e)})),p.Oc(3,Nu,2,3,"mat-radio-button",44),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.Db(2),p.oc("disabled",!t.creationMode),p.Db(1),p.oc("ngForOf",t.availableTypes)}}function Bu(t,e){if(1&t&&(p.Wb(0,"mat-option",35),p.Qc(1),p.Vb()),2&t){const t=p.hc().$implicit;p.rc("value","",t.fileExt,": ",t.fileName,""),p.Db(1),p.Tc(" ",t.fileExt,": ",t.fileName," ")}}function Xu(t,e){if(1&t&&(p.Ub(0),p.Oc(1,Bu,2,4,"mat-option",57),p.Tb()),2&t){const t=e.$implicit,i=p.hc().$implicit;p.Db(1),p.oc("ngIf",i==t.fileExt)}}function Gu(t,e){if(1&t&&(p.Ub(0),p.Wb(1,"mat-optgroup",53),p.Oc(2,Xu,2,1,"ng-container",56),p.Vb(),p.Tb()),2&t){const t=e.$implicit,i=p.hc(4);p.Db(1),p.qc("label","",t," :"),p.Db(1),p.oc("ngForOf",i.defaultTemplatesList)}}function qu(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-form-field"),p.Wb(1,"mat-select",52),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(3).selectedModelFile=e}))("selectionChange",(function(){return p.Dc(t),p.hc(3).changeModel()})),p.ic(2,"translate"),p.ic(3,"translate"),p.Wb(4,"mat-optgroup",53),p.ic(5,"translate"),p.Wb(6,"mat-option",54),p.dc("click",(function(){return p.Dc(t),p.hc(),p.zc(5).click()})),p.Rb(7,"mat-icon",55),p.Qc(8),p.Vb(),p.Vb(),p.Oc(9,Gu,3,2,"ng-container",56),p.Vb(),p.Vb()}if(2&t){const t=p.hc(3);p.Db(1),p.pc("title",p.jc(2,9,"lang.defaultTemplate")),p.pc("placeholder",p.jc(3,11,"lang.chosenModel")),p.oc("disabled",!t.creationMode)("ngModel",t.selectedModelFile)("required","acknowledgementReceipt"!=t.template.target),p.Db(3),p.qc("label","",p.jc(5,13,"lang.loadedFile")," :"),p.Db(2),p.oc("value",t.template.file.name),p.Db(2),p.Sc(" ",t.functionsService.empty(t.template.file)||t.functionsService.empty(t.template.file.name)?t.translate.instant("lang.importFile"):t.template.file.name," "),p.Db(1),p.oc("ngForOf",t.extensionModels)}}function Ku(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",58),p.dc("click",(function(e){p.Dc(t);const i=p.hc(3);return e.stopPropagation(),i.editFile()})),p.Qc(1),p.ic(2,"translate"),p.Vb()}if(2&t){const t=p.hc(3);p.oc("disabled",t.lockFound),p.Db(1),p.Rc(p.jc(2,2,"lang.templateEdition"))}}function Ju(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",58),p.dc("click",(function(e){p.Dc(t),p.hc();const i=p.zc(5);return e.stopPropagation(),i.click()})),p.Qc(1),p.ic(2,"translate"),p.Vb()}if(2&t){const t=p.hc(3);p.oc("disabled",t.lockFound),p.Db(1),p.Rc(p.jc(2,2,"lang.importFile"))}}function Yu(t,e){if(1&t&&p.Rb(0,"iframe",59),2&t){const t=p.hc(3);p.oc("src",t.templateDocView,p.Fc)}}function Zu(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",27),p.Wb(1,"div",46),p.Wb(2,"div",47),p.Wb(3,"div",27),p.Wb(4,"input",48,49),p.dc("change",(function(e){return p.Dc(t),p.hc(2).uploadFileTrigger(e)})),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(6,"div",25),p.Oc(7,qu,10,15,"mat-form-field",16),p.Oc(8,Ku,3,4,"button",50),p.Oc(9,Ju,3,4,"button",50),p.Vb(),p.Oc(10,Yu,1,1,"iframe",51),p.Vb()}if(2&t){const t=p.hc(2);p.Db(7),p.oc("ngIf",t.creationMode||t.template.file.name),p.Db(1),p.oc("ngIf",t.creationMode&&t.selectedModelFile||!t.creationMode),p.Db(1),p.oc("ngIf",t.creationMode&&!t.selectedModelFile||!t.creationMode&&!t.functionsService.empty(t.template.file.name)&&"java"!==t.headerService.user.preferences.documentEdition),p.Db(1),p.oc("ngIf",null!==t.templateDocView)}}function tm(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",27),p.Wb(1,"div",25),p.Wb(2,"mat-form-field"),p.Wb(3,"textarea",60),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).template.file.content=e})),p.ic(4,"translate"),p.ic(5,"translate"),p.Qc(6,"                                    "),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.Db(3),p.pc("placeholder",p.jc(4,4,"lang.contentTxtTemplate")),p.pc("title",p.jc(5,6,"lang.contentTxtTemplate")),p.oc("ngModel",t.template.file.content)("required","acknowledgementReceipt"!=t.template.target)}}function em(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",27),p.Wb(1,"div",25),p.Wb(2,"div",61),p.Wb(3,"textarea",62),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).template.file.content=e})),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.Db(3),p.oc("ngModel",t.template.file.content)("required","acknowledgementReceipt"!=t.template.target)}}function im(t,e){if(1&t&&(p.Wb(0,"mat-option",35),p.Qc(1),p.Vb()),2&t){const t=p.hc().$implicit;p.oc("value",t.id),p.Db(1),p.Rc(t.label)}}function am(t,e){if(1&t&&(p.Ub(0),p.Oc(1,im,2,2,"mat-option",57),p.Tb()),2&t){const t=e.$implicit,i=p.hc(3);p.Db(1),p.oc("ngIf",i.displayDatasources(t))}}function nm(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",27),p.Wb(1,"div",25),p.Wb(2,"mat-form-field"),p.Wb(3,"mat-select",63),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).template.datasource=e})),p.ic(4,"translate"),p.ic(5,"translate"),p.Wb(6,"mat-option",64),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Oc(9,am,2,1,"ng-container",56),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.Db(3),p.pc("title",p.jc(4,5,"lang.templateDatasource")),p.pc("placeholder",p.jc(5,7,"lang.templateDatasource")),p.oc("ngModel",t.template.datasource),p.Db(4),p.Rc(p.jc(8,9,"lang.noDatasource")),p.Db(2),p.oc("ngForOf",t.datasourcesList)}}function om(t,e){if(1&t&&(p.Wb(0,"mat-option",35),p.Qc(1),p.Vb()),2&t){const t=p.hc().$implicit;p.rc("value","",t.fileExt,": ",t.fileName,""),p.Db(1),p.Tc(" ",t.fileExt,": ",t.fileName," ")}}function sm(t,e){if(1&t&&(p.Ub(0),p.Oc(1,om,2,4,"mat-option",57),p.Tb()),2&t){const t=e.$implicit,i=p.hc().$implicit;p.Db(1),p.oc("ngIf",i==t.fileExt)}}function cm(t,e){if(1&t&&(p.Ub(0),p.Wb(1,"mat-optgroup",53),p.Oc(2,sm,2,1,"ng-container",56),p.Vb(),p.Tb()),2&t){const t=e.$implicit,i=p.hc(3);p.Db(1),p.qc("label","",t," :"),p.Db(1),p.oc("ngForOf",i.defaultTemplatesList)}}function rm(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",58),p.dc("click",(function(e){p.Dc(t);const i=p.hc(3);return e.stopPropagation(),i.editFile()})),p.Qc(1),p.ic(2,"translate"),p.Vb()}if(2&t){const t=p.hc(3);p.oc("disabled",t.lockFound),p.Db(1),p.Rc(p.jc(2,2,"lang.templateEdition"))}}function lm(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",58),p.dc("click",(function(e){p.Dc(t),p.hc();const i=p.zc(13);return e.stopPropagation(),i.click()})),p.Qc(1),p.ic(2,"translate"),p.Vb()}if(2&t){const t=p.hc(3);p.oc("disabled",t.lockFound),p.Db(1),p.Rc(p.jc(2,2,"lang.importFile"))}}function dm(t,e){if(1&t&&p.Rb(0,"iframe",59),2&t){const t=p.hc(3);p.oc("src",t.templateDocView,p.Fc)}}function bm(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",27),p.Wb(1,"mat-tab-group",65),p.dc("selectedTabChange",(function(e){return p.Dc(t),p.hc(2).loadTab(e)})),p.Wb(2,"mat-tab",53),p.ic(3,"translate"),p.Wb(4,"div",25),p.Wb(5,"div",61),p.Wb(6,"textarea",66),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).template.file.electronic.content=e})),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(7,"mat-tab",53),p.ic(8,"translate"),p.Wb(9,"div",46),p.Wb(10,"div",47),p.Wb(11,"div",27),p.Wb(12,"input",48,67),p.dc("change",(function(e){return p.Dc(t),p.hc(2).uploadFileTrigger(e)})),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(14,"div",25),p.Wb(15,"mat-form-field"),p.Wb(16,"mat-select",68),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).selectedModelFile=e})),p.ic(17,"translate"),p.ic(18,"translate"),p.Wb(19,"mat-optgroup",53),p.ic(20,"translate"),p.Wb(21,"mat-option",69),p.dc("click",(function(){return p.Dc(t),p.zc(13).click()})),p.Rb(22,"mat-icon",55),p.Qc(23),p.Vb(),p.Vb(),p.Oc(24,cm,3,2,"ng-container",56),p.Vb(),p.Vb(),p.Oc(25,rm,3,4,"button",50),p.Oc(26,lm,3,4,"button",50),p.Vb(),p.Oc(27,dm,1,1,"iframe",51),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.Db(2),p.pc("label",p.jc(3,16,"lang.electronicTemplate")),p.Db(4),p.oc("ngModel",t.template.file.electronic.content)("required","acknowledgementReceipt"!=t.template.target),p.Db(1),p.pc("label",p.jc(8,18,"lang.paperTemplate")),p.Db(9),p.pc("title",p.jc(17,20,"lang.defaultTemplate")),p.pc("placeholder",p.jc(18,22,"lang.chosenModel")),p.oc("disabled",!t.creationMode&&null!==t.template.file.paper.name)("ngModel",t.selectedModelFile)("required","acknowledgementReceipt"!=t.template.target),p.Db(3),p.qc("label","",p.jc(20,24,"lang.loadedFile")," :"),p.Db(2),p.oc("value",t.template.file.paper.name),p.Db(2),p.Sc(" ",t.functionsService.empty(t.template.file.paper)||t.functionsService.empty(t.template.file.paper.name)?t.translate.instant("lang.importFile"):t.template.file.paper.name," "),p.Db(1),p.oc("ngForOf",t.extensionModels),p.Db(1),p.oc("ngIf",t.creationMode&&t.selectedModelFile||!t.creationMode&&!t.functionsService.empty(t.template.file.paper.name)),p.Db(1),p.oc("ngIf",!t.selectedModelFile||!t.creationMode&&"java"!==t.headerService.user.preferences.documentEdition),p.Db(1),p.oc("ngIf",null!==t.templateDocView)}}function pm(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-card",22),p.Wb(1,"form",23,24),p.dc("ngSubmit",(function(){return p.Dc(t),p.hc().onSubmit()})),p.Wb(3,"div",25),p.Oc(4,Lu,6,7,"div",26),p.Wb(5,"div",27),p.Wb(6,"div",25),p.Wb(7,"mat-form-field"),p.Wb(8,"input",28),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().template.label=e})),p.ic(9,"translate"),p.ic(10,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(11,"div",27),p.Wb(12,"div",25),p.Wb(13,"mat-form-field"),p.Wb(14,"textarea",29),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().template.description=e})),p.ic(15,"translate"),p.ic(16,"translate"),p.Qc(17,"                                    "),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(18,"div",27),p.Wb(19,"div",25),p.Wb(20,"mat-form-field"),p.Wb(21,"mat-select",30),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().template.target=e}))("selectionChange",(function(){return p.Dc(t),p.hc().updateTemplateType()})),p.ic(22,"translate"),p.ic(23,"translate"),p.Oc(24,Eu,3,4,"mat-option",31),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Oc(25,Uu,10,11,"div",26),p.Oc(26,$u,15,17,"div",26),p.Oc(27,zu,6,7,"div",26),p.Oc(28,Hu,4,2,"div",26),p.Oc(29,Zu,11,4,"div",26),p.Oc(30,tm,7,8,"div",26),p.Oc(31,em,4,2,"div",26),p.Oc(32,nm,10,11,"div",26),p.Oc(33,bm,28,26,"div",26),p.Vb(),p.Wb(34,"div",32),p.Wb(35,"button",33),p.Qc(36),p.ic(37,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.zc(2),e=p.hc();p.Db(4),p.oc("ngIf",!e.creationMode),p.Db(4),p.pc("title",p.jc(9,23,"lang.templateName")),p.pc("placeholder",p.jc(10,25,"lang.templateName")),p.oc("ngModel",e.template.label),p.Db(6),p.pc("placeholder",p.jc(15,27,"lang.description")),p.pc("title",p.jc(16,29,"lang.description")),p.oc("ngModel",e.template.description),p.Db(7),p.pc("title",p.jc(22,31,"lang.templateTarget")),p.pc("placeholder",p.jc(23,33,"lang.templateTarget")),p.oc("disabled",!e.creationMode)("ngModel",e.template.target),p.Db(3),p.oc("ngForOf",e.targetTypes),p.Db(1),p.oc("ngIf","attachments"==e.template.target),p.Db(1),p.oc("ngIf","acknowledgementReceipt"==e.template.target),p.Db(1),p.oc("ngIf","sendmail"==e.template.target),p.Db(1),p.oc("ngIf",e.availableTypes.length>1),p.Db(1),p.oc("ngIf","OFFICE"==e.template.type),p.Db(1),p.oc("ngIf","TXT"==e.template.type),p.Db(1),p.oc("ngIf","HTML"==e.template.type),p.Db(1),p.oc("ngIf","notifications"==e.template.target),p.Db(1),p.oc("ngIf","OFFICE_HTML"==e.template.type),p.Db(2),p.oc("disabled",!t.form.valid||e.lockFound),p.Db(1),p.Rc(p.jc(37,35,"lang.save"))}}function hm(t,e){if(1&t&&(p.Wb(0,"mat-list-item"),p.Wb(1,"mat-icon",5),p.Rb(2,"i",6),p.Vb(),p.Wb(3,"span",7),p.Qc(4),p.Vb(),p.Vb()),2&t){const t=e.$implicit;p.Db(4),p.Sc(" ",t.entity_label," ")}}let um=(()=>{class t{constructor(t,e,i,a,n,o,s,c,r,l,d){this.http=t,this.sanitizer=e,this.route=i,this.router=a,this.notify=n,this.headerService=o,this.dialog=s,this.appService=c,this.viewContainerRef=r,this.functionsService=l,this.translate=d,this.loading=!1,this.template={id:0,label:"",description:"",datasource:"letterbox_attachment",target:"",type:"",file:null},this.targetTypes=["acknowledgementReceipt","notes","sendmail","indexingFile","notifications","attachments"],this.allowedExtensions=["doc","docx","dotx","odt","ott","html","xlsl","xlsx","xltx","ods","ots","csv"],this.selectedModelFile=null,this.availableTypes=[],this.statuses=[],this.categoriesList=[],this.keywordsList=[],this.jnlpValue={},this.extensionModels=[],this.buttonFileName=this.translate.instant("lang.importFile"),this.lockFound=!1,this.templateDocView=null,this.data=[],this.config={}}ngOnInit(){this.loading=!0,this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.route.params.subscribe(t=>{void 0===t.id?(this.headerService.setHeader(this.translate.instant("lang.templateCreation")),this.creationMode=!0,this.http.get("../rest/administration/templates/new").subscribe(t=>{this.setInitialValue(t),this.loading=!1})):(this.creationMode=!1,this.http.get("../rest/templates/"+t.id+"/details").subscribe(t=>{this.setInitialValue(t),this.template={id:t.template.template_id,label:t.template.template_label,description:t.template.template_comment,datasource:t.template.template_datasource,target:t.template.template_target,type:t.template.template_type,subject:t.template.subject,file:{}},this.updateTemplateType(),this.selectedModelFile=t.template.template_file_name,this.template.template_attachment_type=t.template.template_attachment_type,"HTML"===this.template.type||"TXT"===this.template.type?this.template.file.content=t.template.template_content:"OFFICE"===this.template.type?(this.template.file.format=t.template.template_file_name.split(".").pop(),this.template.file.name=t.template.template_file_name,this.getViewTemplateContent()):"acknowledgementReceipt"===this.template.target&&(this.functionsService.empty(t.template.template_file_name)||(this.template.file.paper.format=t.template.template_file_name.split(".").pop()),this.template.file.paper.name=t.template.template_file_name,this.template.file.electronic.content=t.template.template_content,this.getViewTemplateContent()),this.headerService.setHeader(this.translate.instant("lang.templateModification"),this.template.template_label),this.loading=!1})),this.template.template_attachment_type||(this.template.template_attachment_type="all")})}getViewTemplateContent(){this.http.get(`../rest/templates/${this.template.id}/content`).pipe(Object(d.a)(t=>{this.templateDocView=this.sanitizer.bypassSecurityTrustResourceUrl("data:application/pdf;base64,"+t.encodedDocument)}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}initMce(t){setTimeout(()=>{tinymce.remove("textarea"),tinymce.baseURL="../node_modules/tinymce",tinymce.suffix=".min",tinymce.init({selector:t,statusbar:!1,language:this.translate.instant("lang.langISO").replace("-","_"),language_url:`../node_modules/tinymce-i18n/langs/${this.translate.instant("lang.langISO").replace("-","_")}.js`,height:"200",plugins:["autoresize","code"],external_plugins:{maarch_b64image:"../../src/frontend/plugins/tinymce/maarch_b64image/plugin.min.js"},menubar:!1,toolbar:"undo | bold italic underline | alignleft aligncenter alignright | maarch_b64image | forecolor | code",theme_buttons1_add:"fontselect,fontsizeselect",theme_buttons2_add_before:"cut,copy,paste,pastetext,pasteword,separator,search,replace,separator",theme_buttons2_add:"separator,insertdate,inserttime,preview,separator,forecolor,backcolor",theme_buttons3_add_before:"tablecontrols,separator",theme_buttons3_add:"separator,print,separator,ltr,rtl,separator,fullscreen,separator,insertlayer,moveforward,movebackward,absolut",theme_toolbar_align:"left",theme_advanced_toolbar_location:"top",theme_styles:"Header 1=header1;Header 2=header2;Header 3=header3;Table Row=tableRow1",setup:t=>{t.on("keyup",t=>{"HTML"===this.template.type&&null!=tinymce.get("templateHtml")&&(this.template.file.content=tinymce.get("templateHtml").getContent()),"OFFICE_HTML"===this.template.type&&null!=tinymce.get("templateOfficeHtml")&&(this.template.file.electronic.content=tinymce.get("templateOfficeHtml").getContent())})}})},20)}setInitialValue(t){this.extensionModels=[],t.templatesModels.forEach(t=>{-1===this.extensionModels.indexOf(t.fileExt)&&this.extensionModels.push(t.fileExt)}),this.defaultTemplatesList=t.templatesModels,this.attachmentTypesList=t.attachmentTypes,this.datasourcesList=t.datasources,this.maarchTree.initData(t.entities.map(t=>Object.assign(Object.assign({},t),{id:t.serialId})))}getBase64Document(t){const e=new Uint8Array(t).reduce((t,e)=>t+String.fromCharCode(e),"");return btoa(e)}uploadFileTrigger(t){if(t.target.files&&t.target.files[0]&&this.isExtensionAllowed(t.target.files[0])){const e=new FileReader;"acknowledgementReceipt"===this.template.target?(this.template.file.paper={name:"",type:"",content:""},this.template.file.paper.name=t.target.files[0].name,this.selectedModelFile=this.template.file.paper.name,this.template.file.paper.type=t.target.files[0].type,this.template.file.paper.format=this.template.file.paper.name.split(".").pop()):(this.template.file={name:"",type:"",content:""},this.template.file.name=t.target.files[0].name,this.selectedModelFile=this.template.file.name,this.template.file.type=t.target.files[0].type,this.template.file.format=this.template.file.name.split(".").pop()),e.readAsArrayBuffer(t.target.files[0]),e.onload=t=>{"acknowledgementReceipt"===this.template.target?this.template.file.paper.content=this.getBase64Document(t.target.result):this.template.file.content=this.getBase64Document(t.target.result),this.getViewTemplateFile()}}}isExtensionAllowed(t){const e=t.name.toLowerCase().split(".").pop();return 0!==this.allowedExtensions.filter(t=>t.toLowerCase()===e.toLowerCase()).length||(this.dialog.open(Y.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.notAllowedExtension")+" !",msg:this.translate.instant("lang.file")+" : <b>"+t.name+"</b>, "+this.translate.instant("lang.type")+" : <b>"+t.type+"</b><br/><br/><u>"+this.translate.instant("lang.allowedExtensions")+"</u> : <br/>"+this.allowedExtensions.filter((t,e,i)=>e===i.indexOf(t)).join(", ")}}),!1)}editFile(){const t={docUrl:"rest/onlyOffice/mergedFile"};if(this.creationMode){if("acknowledgementReceipt"!==this.template.target)if(this.functionsService.empty(this.template.file.content)){t.objectType="templateCreation";for(const e of this.defaultTemplatesList)this.selectedModelFile===e.fileExt+": "+e.fileName&&(t.objectId=e.filePath);t.extension=t.objectId.toLowerCase().split(".").pop()}else t.objectType="encodedResource",t.objectId=this.template.file.content,t.extension=this.template.file.format;else if("acknowledgementReceipt"===this.template.target)if(this.functionsService.empty(this.template.file.paper.content)){t.objectType="templateCreation";for(const e of this.defaultTemplatesList)this.selectedModelFile===e.fileExt+": "+e.fileName&&(t.objectId=e.filePath);t.extension=t.objectId.toLowerCase().split(".").pop()}else t.objectType="encodedResource",t.objectId=this.template.file.paper.content,t.extension=this.template.file.paper.format}else"acknowledgementReceipt"!==this.template.target?this.functionsService.empty(this.template.file.content)?(t.objectType="templateModification",t.objectId=this.template.id,t.extension=this.template.file.name.toLowerCase().split(".").pop()):(t.objectType="encodedResource",t.objectId=this.template.file.content,t.extension=this.template.file.format):"acknowledgementReceipt"===this.template.target&&(this.functionsService.empty(this.template.file.paper.content)?(t.objectType="templateModification",t.objectId=this.template.id,t.extension=this.template.file.paper.name.toLowerCase().split(".").pop()):(t.objectType="encodedResource",t.objectId=this.template.file.paper.content,t.extension=this.template.file.paper.format));if("java"===this.headerService.user.preferences.documentEdition){if(this.creationMode){t.objectId="",t.objectType="templateCreation";for(const e of this.defaultTemplatesList)this.selectedModelFile===e.fileExt+": "+e.fileName&&(t.objectId=e.filePath);if(this.functionsService.empty(t.objectId))return alert(this.translate.instant("lang.canNotEditImportedDocumentWhenJava")),!1}else t.objectType="templateModification",t.objectId=this.template.id;this.launchJavaEditor(t)}else"java"!==this.headerService.user.preferences.documentEdition&&this.launchIntegratedEditor(t,this.headerService.user.preferences.documentEdition)}launchJavaEditor(t){this.http.post("../rest/jnlp",t).pipe(Object(d.a)(e=>{window.location.href="../rest/jnlp/"+e.generatedJnlp,this.checkLockFile(e.jnlpUniqueId,t.extension)}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}launchIntegratedEditor(t,e){this.dialogRef=this.dialog.open(ju,{autoFocus:!1,panelClass:"maarch-full-height-modal",minWidth:"80%",disableClose:!0,data:{title:this.template.template_style,editorOptions:t,file:{format:t.extension},editorType:e}}),this.dialogRef.afterClosed().pipe(Object(K.a)(t=>!this.functionsService.empty(t)),Object(d.a)(e=>{"acknowledgementReceipt"===this.template.target?(this.template.file.paper.name=this.selectedModelFile,this.template.file.paper.format=t.extension,this.template.file.paper.content=e.content):(this.template.file.name=this.selectedModelFile,this.template.file.format=t.extension,this.template.file.content=e.content),this.getViewTemplateFile()}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}getViewTemplateFile(){this.http.post("../rest/convertedFile/encodedFile",{encodedFile:"acknowledgementReceipt"===this.template.target?this.template.file.paper.content:this.template.file.content,format:"acknowledgementReceipt"===this.template.target?this.template.file.paper.format:this.template.file.format}).pipe(Object(d.a)(t=>{this.templateDocView=this.sanitizer.bypassSecurityTrustResourceUrl("data:application/pdf;base64,"+t.encodedResource)}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}checkLockFile(t,e){this.intervalLockFile=setInterval(()=>{this.http.get("../rest/jnlp/lock/"+t).pipe(Object(d.a)(t=>{this.lockFound=t.lockFileFound,this.lockFound||(clearInterval(this.intervalLockFile),this.loadTmpFile(`${t.fileTrunk}.${e}`))})).subscribe()},1e3)}loadTmpFile(t){this.http.get(`../rest/convertedFile/${t}?convert=true`).pipe(Object(d.a)(e=>{"acknowledgementReceipt"===this.template.target?(this.template.file.paper.name=this.selectedModelFile,this.template.file.paper.format=t.toLowerCase().split(".").pop(),this.template.file.paper.content=e.encodedResource):(this.template.file.name=this.selectedModelFile,this.template.file.format=t.toLowerCase().split(".").pop(),this.template.file.content=e.encodedResource),this.templateDocView=this.sanitizer.bypassSecurityTrustResourceUrl("data:application/pdf;base64,"+e.encodedConvertedResource)})).subscribe()}duplicateTemplate(){this.lockFound||"acknowledgementReceipt"===this.template.target||confirm(this.translate.instant("lang.confirmDuplicate"))&&this.http.post("../rest/templates/"+this.template.id+"/duplicate",{id:this.template.id}).subscribe(t=>{this.notify.success(this.translate.instant("lang.templateDuplicated")),this.router.navigate(["/administration/templates/"+t.id])},t=>{this.notify.error(t.error.errors)})}onSubmit(){this.isValidTemplate()&&(this.creationMode?this.http.post("../rest/templates",this.formatTemplate()).pipe(Object(d.a)(t=>{t.checkEntities?(this.config={panelClass:"maarch-modal",data:{entitiesList:t.checkEntities,template_attachment_type:this.template.template_attachment_type}},this.dialog.open(mm,this.config)):(this.router.navigate(["/administration/templates"]),this.notify.success(this.translate.instant("lang.templateAdded")))}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe():this.http.put("../rest/templates/"+this.template.id,this.formatTemplate()).pipe(Object(d.a)(t=>{!this.functionsService.empty(t)&&t.checkEntities?(this.config={panelClass:"maarch-modal",data:{entitiesList:t.checkEntities,template_attachment_type:this.template.template_attachment_type}},this.dialogRef=this.dialog.open(mm,this.config)):(this.router.navigate(["/administration/templates"]),this.notify.success(this.translate.instant("lang.templateUpdated")))}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe())}formatTemplate(){const t=Object.assign({},this.template);return t.entities=this.maarchTree.getSelectedNodes().map(t=>t.entity_id),t}isValidTemplate(){return"acknowledgementReceipt"===this.template.target&&this.functionsService.empty(this.template.file.paper.name)&&this.functionsService.empty(this.template.file.electronic.content)?(alert(this.translate.instant("lang.mustCompleteAR")),!1):"acknowledgementReceipt"===this.template.target||"OFFICE"!==this.template.type||!this.functionsService.empty(this.template.file.name)||(alert(this.translate.instant("lang.editModelFirst")),!1)}displayDatasources(t){return"notification"===t.target&&"notifications"===this.template.target||"document"===t.target&&"notifications"!==this.template.target}updateTemplateType(){this.template.file={name:"",type:"",content:""},this.templateDocView=null,["attachments","indexingFile"].indexOf(this.template.target)>-1?(this.template.type="OFFICE",this.availableTypes=["OFFICE"]):["notifications","sendmail"].indexOf(this.template.target)>-1?(this.template.type="HTML",this.availableTypes=["HTML","TXT"],this.initMce("textarea#templateHtml")):"notes"===this.template.target?(this.template.type="TXT",this.availableTypes=["TXT"]):"acknowledgementReceipt"===this.template.target&&(this.template.file={electronic:{name:"",type:"",content:""},paper:{name:"",type:"",content:""}},this.template.type="OFFICE_HTML",this.availableTypes=[],this.template.template_attachment_type="",this.initMce("textarea#templateOfficeHtml"))}changeType(t){"HTML"===t.value?this.initMce("textarea#templateHtml"):tinymce.remove("textarea"),this.template.type=t.value}changeModel(){this.template.file={name:"",type:"",content:""},this.template.file={electronic:{name:"",type:"",content:""}}}loadTab(t){0===t.index?this.initMce("textarea#templateOfficeHtml"):(tinymce.remove("textarea"),null==this.template.template_file_name&&null==this.template.template_style&&(this.buttonFileName=this.translate.instant("lang.importFile")))}ngOnDestroy(){tinymce.remove("textarea"),this.intervalLockFile&&clearInterval(this.intervalLockFile)}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(u.b),p.Qb(bl.b),p.Qb(o.a),p.Qb(o.c),p.Qb(y.a),p.Qb(m.a),p.Qb(z.b),p.Qb(f.a),p.Qb(p.T),p.Qb(D.a),p.Qb(h.e))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(ku,!0),p.Kc(Ru,!0),p.Kc(Tu,!0)),2&t&&(p.yc(i=p.ec())&&(e.sidenavRight=i.first),p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.maarchTree=i.first))},decls:24,vars:14,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content",2,"padding","10px 10px 0px 10px"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content","style","display: contents;",4,"ngIf"],["fixedTopGap","56","position","end",2,"overflow-x","hidden","width","400px",3,"mode","fixedInViewport","opened"],["snav2",""],["mat-subheader",""],[2,"padding","10px"],["maarchTree",""],[4,"ngIf"],["mat-list-item","",3,"disableRipple","click"],["color","primary","mat-list-icon","",1,"fa","fa-copy"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content",2,"display","contents"],[1,"form-horizontal",2,"display","contents",3,"ngSubmit"],["templatesFormUp","ngForm"],[1,"col-sm-12"],["class","form-group",4,"ngIf"],[1,"form-group"],["matInput","","name","label","type","text","maxlength","255","required","",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","description","name","template_comment","matTextareaAutosize","","matAutosizeMinRows","2","matAutosizeMaxRows","5","required","",3,"ngModel","placeholder","title","ngModelChange"],["name","target","required","",3,"disabled","title","placeholder","ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-12",2,"background","white","position","sticky","bottom","0px","text-align","center"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["matInput","","type","number","disabled","",3,"title","value","placeholder"],[3,"value"],["id","template_attachment_type","name","template_attachment_type",3,"title","placeholder","ngModel","ngModelChange"],["value","all"],["id","template_attachment_type","name","template_attachment_type","required","",3,"disabled","title","placeholder","ngModel","ngModelChange"],["value","simple"],["value","sva"],["value","svr"],["matInput","","name","subject","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["required","","name","type",3,"disabled","change"],["style","margin-left:10px","color","primary","name","type",3,"value","checked",4,"ngFor","ngForOf"],["color","primary","name","type",2,"margin-left","10px",3,"value","checked"],[1,"col-md-12",2,"display","none"],[1,"form-inline","hide"],["type","file","name","files[]","accept","application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml\u200c.slideshow,application/vnd.oasis.opendocument.text,application/vnd.oasis.opendocument.presentation,application/vnd.oasis.opendocument.spreadsheet",3,"change"],["uploadSignFileOffice",""],["mat-raised-button","","color","default","type","button",3,"disabled","click",4,"ngIf"],["style","width:100%;height:800px;",3,"src",4,"ngIf"],["id","template_style","name","template_style",3,"disabled","title","placeholder","ngModel","required","ngModelChange","selectionChange"],[3,"label"],[1,"selectFile",3,"value","click"],["color","primary",1,"fa","fa-paperclip",2,"height","auto"],[4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],["mat-raised-button","","color","default","type","button",3,"disabled","click"],[2,"width","100%","height","800px",3,"src"],["matInput","","name","templateTxt","id","templateTxt","matTextareaAutosize","","matAutosizeMinRows","5","matAutosizeMaxRows","5",3,"ngModel","placeholder","title","required","ngModelChange"],["id","html_mode",2,"display","block","width","100%"],["name","templateHtml","id","templateHtml","rows","15","cols","60",2,"width","100%",3,"ngModel","required","ngModelChange"],["id","datasource","name","datasource",3,"title","placeholder","ngModel","ngModelChange"],["value",""],[3,"selectedTabChange"],["name","templateOfficeHtml","id","templateOfficeHtml","rows","15","cols","60",2,"width","100%",3,"ngModel","required","ngModelChange"],["uploadSignFileOfficeHtml",""],["id","template_style","name","template_style",3,"disabled","title","placeholder","ngModel","required","ngModelChange"],[2,"text-align","center",3,"value","click"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,Qu,1,1,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,Fu,2,0,"div",9),p.Oc(14,pm,38,37,"mat-card",10),p.Vb(),p.Vb(),p.Vb(),p.Wb(15,"mat-sidenav",11,12),p.Wb(17,"mat-list"),p.Wb(18,"h3",13),p.Qc(19),p.ic(20,"translate"),p.Vb(),p.Wb(21,"div",14),p.Rb(22,"app-maarch-flat-tree",null,15),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading),p.Db(1),p.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!e.appService.getViewMode()),p.Db(4),p.Rc(p.jc(20,12,"lang.chooseEntityAssociationModel")))},directives:[C.e,C.f,M.a,x.a,O.t,C.d,wt.a,wt.g,Te.a,wt.h,wt.d,It.a,wt.c,k.l,I.c,j.a,c.K,c.v,c.w,S.c,w.b,c.d,c.p,c.F,c.u,c.x,w.d,at.a,O.s,R.b,k.p,Ae.b,Ae.a,k.o,ke.c,ke.a],pipes:[h.d],styles:[".mat-list-item.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:default}.mat-list-item.disabled[_ngcontent-%COMP%]:active, .mat-list-item.disabled[_ngcontent-%COMP%]:focus, .mat-list-item.disabled[_ngcontent-%COMP%]:hover{background:initial}.selectFile[_ngcontent-%COMP%]{text-align:center}.selectFile[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex!important;align-items:center;justify-content:center}"]}),t})(),mm=(()=>{class t{constructor(t,e,i){this.http=t,this.data=e,this.dialogRef=i}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(u.b),p.Qb(z.a),p.Qb(z.h))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],decls:18,vars:13,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["role","alert",1,"alert-message","alert-message-info"],[4,"ngFor","ngForOf"],["mat-raised-button","","color","primary","type","submit",3,"click"],["mat-list-icon",""],["color","primary",1,"fa","fa-share-alt"],["mat-line",""]],template:function(t,e){1&t&&(p.Wb(0,"div",0),p.Wb(1,"h1",1),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"mat-dialog-content"),p.Wb(5,"div",2),p.Wb(6,"p"),p.Qc(7),p.ic(8,"translate"),p.Wb(9,"b"),p.Qc(10),p.ic(11,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(12,"mat-list"),p.Oc(13,hm,5,1,"mat-list-item",3),p.Vb(),p.Vb(),p.Wb(14,"mat-dialog-actions"),p.Wb(15,"button",4),p.dc("click",(function(){return e.dialogRef.close()})),p.Qc(16),p.ic(17,"translate"),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(2),p.Rc(p.jc(3,5,"lang.templateAssociateEntities")),p.Db(5),p.Rc(p.jc(8,7,"lang.templateCheckEntities")),p.Db(3),p.Rc(p.jc(11,9,"lang.AR"+e.data.template_attachment_type)),p.Db(3),p.oc("ngForOf",e.data.entitiesList),p.Db(3),p.Rc(p.jc(17,11,"lang.close")))},directives:[z.i,z.f,wt.a,O.s,z.c,R.b,wt.d,It.a,wt.c,k.l],pipes:[h.d],styles:[".alert-message[_ngcontent-%COMP%]{max-width:inherit}"]}),t})();function fm(t,e){1&t&&(p.Wb(0,"div",10),p.Rb(1,"mat-spinner",11),p.Vb())}function gm(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-card",12),p.Wb(1,"mat-tab-group"),p.Wb(2,"mat-tab",13),p.ic(3,"translate"),p.Wb(4,"form",14,15),p.dc("ngSubmit",(function(){return p.Dc(t),p.hc().onSubmit()})),p.Wb(6,"mat-list"),p.Wb(7,"p",16),p.Wb(8,"mat-slide-toggle",17),p.dc("change",(function(){p.Dc(t);const e=p.hc();return e.toggleRule(e.passwordRules.complexityUpper)})),p.Qc(9),p.Vb(),p.Wb(10,"mat-slide-toggle",17),p.dc("change",(function(){p.Dc(t);const e=p.hc();return e.toggleRule(e.passwordRules.complexityNumber)})),p.Qc(11),p.Vb(),p.Wb(12,"mat-slide-toggle",17),p.dc("change",(function(){p.Dc(t);const e=p.hc();return e.toggleRule(e.passwordRules.complexitySpecial)})),p.Qc(13),p.Vb(),p.Vb(),p.Wb(14,"mat-list-item",18),p.Wb(15,"mat-icon",19),p.Wb(16,"mat-slide-toggle",20),p.dc("change",(function(){p.Dc(t);const e=p.hc();return e.toggleRule(e.passwordRules.minLength)})),p.Vb(),p.Vb(),p.Wb(17,"p",21),p.Wb(18,"mat-form-field"),p.Wb(19,"input",22),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().passwordRules.minLength.value=e})),p.Vb(),p.Wb(20,"span",23),p.Qc(21),p.ic(22,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(23,"mat-list-item",18),p.Wb(24,"mat-icon",19),p.Wb(25,"mat-slide-toggle",20),p.dc("change",(function(){p.Dc(t);const e=p.hc();return e.toggleRule(e.passwordRules.lockAttempts)})),p.Vb(),p.Vb(),p.Wb(26,"p",24),p.Wb(27,"mat-form-field",25),p.Wb(28,"input",22),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().passwordRules.lockAttempts.value=e})),p.Vb(),p.Vb(),p.Wb(29,"mat-form-field",26),p.Wb(30,"input",22),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().passwordRules.lockTime.value=e})),p.Vb(),p.Wb(31,"span",23),p.Qc(32),p.ic(33,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(34,"mat-list-item",18),p.Wb(35,"mat-icon",19),p.Wb(36,"mat-slide-toggle",20),p.dc("change",(function(){p.Dc(t);const e=p.hc();return e.toggleRule(e.passwordRules.renewal)})),p.Vb(),p.Vb(),p.Wb(37,"p",21),p.Wb(38,"mat-form-field"),p.Wb(39,"input",22),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().passwordRules.renewal.value=e})),p.Vb(),p.Wb(40,"span",23),p.Qc(41),p.ic(42,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(43,"mat-list-item",18),p.Wb(44,"mat-icon",19),p.Wb(45,"mat-slide-toggle",20),p.dc("change",(function(){p.Dc(t);const e=p.hc();return e.toggleRule(e.passwordRules.historyLastUse)})),p.Vb(),p.Vb(),p.Wb(46,"p",21),p.Wb(47,"mat-form-field"),p.Wb(48,"input",22),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().passwordRules.historyLastUse.value=e})),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(49,"div",27),p.Wb(50,"button",28),p.Qc(51),p.ic(52,"translate"),p.Vb(),p.Wb(53,"button",29),p.dc("click",(function(){return p.Dc(t),p.hc().cancelModification()})),p.Qc(54),p.ic(55,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.zc(5),e=p.hc();p.Db(2),p.pc("label",p.jc(3,41,"lang.password")),p.Db(6),p.oc("name",e.passwordRules.complexityUpper.label)("checked",e.passwordRules.complexityUpper.enabled),p.Db(1),p.Sc(" ",e.passwordRules.complexityUpper.label,""),p.Db(1),p.oc("name",e.passwordRules.complexityNumber.label)("checked",e.passwordRules.complexityNumber.enabled),p.Db(1),p.Sc(" ",e.passwordRules.complexityNumber.label,""),p.Db(1),p.oc("name",e.passwordRules.complexitySpecial.label)("checked",e.passwordRules.complexitySpecial.enabled),p.Db(1),p.Sc(" ",e.passwordRules.complexitySpecial.label,""),p.Db(3),p.oc("checked",e.passwordRules.minLength.enabled),p.Db(3),p.pc("placeholder",e.passwordRules.minLength.label),p.oc("disabled",!e.passwordRules.minLength.enabled)("name",e.passwordRules.minLength.label)("ngModel",e.passwordRules.minLength.value),p.Db(2),p.Sc("\xa0",p.jc(22,43,"lang.chars"),""),p.Db(4),p.oc("checked",e.passwordRules.lockAttempts.enabled),p.Db(3),p.pc("placeholder",e.passwordRules.lockAttempts.label),p.oc("disabled",!e.passwordRules.lockAttempts.enabled)("name",e.passwordRules.lockAttempts.label)("ngModel",e.passwordRules.lockAttempts.value),p.Db(2),p.pc("placeholder",e.passwordRules.lockTime.label),p.oc("disabled",!e.passwordRules.lockTime.enabled)("name",e.passwordRules.lockTime.label)("ngModel",e.passwordRules.lockTime.value),p.Db(2),p.Sc("\xa0",p.jc(33,45,"lang.minutes"),""),p.Db(4),p.oc("checked",e.passwordRules.renewal.enabled),p.Db(3),p.pc("placeholder",e.passwordRules.renewal.label),p.oc("disabled",!e.passwordRules.renewal.enabled)("name",e.passwordRules.renewal.label)("ngModel",e.passwordRules.renewal.value),p.Db(2),p.Sc("\xa0",p.jc(42,47,"lang.days"),""),p.Db(4),p.oc("checked",e.passwordRules.historyLastUse.enabled),p.Db(3),p.pc("placeholder",e.passwordRules.historyLastUse.label),p.oc("disabled",!e.passwordRules.historyLastUse.enabled)("name",e.passwordRules.historyLastUse.label)("ngModel",e.passwordRules.historyLastUse.value),p.Db(2),p.oc("disabled",!t.valid&&!e.disabledForm()||e.checkModif()),p.Db(1),p.Rc(p.jc(52,49,"lang.validate")),p.Db(2),p.oc("disabled",e.checkModif()),p.Db(1),p.Rc(p.jc(55,51,"lang.cancel"))}}let vm=(()=>{class t{constructor(t,e,i,a,n){this.translate=t,this.http=e,this.notify=i,this.headerService=a,this.appService=n,this.loading=!1,this.passwordRules={minLength:{enabled:!1,value:0},complexityUpper:{enabled:!1,value:0},complexityNumber:{enabled:!1,value:0},complexitySpecial:{enabled:!1,value:0},renewal:{enabled:!1,value:0},historyLastUse:{enabled:!1,value:0},lockTime:{enabled:!1,value:0},lockAttempts:{enabled:!1,value:0}},this.passwordRulesClone={},this.passwordRulesList=[]}ngOnInit(){this.headerService.setHeader(this.translate.instant("lang.securitiesAdministration")),this.loading=!0,this.http.get("../rest/passwordRules").subscribe(t=>{this.passwordRulesList=t.rules,t.rules.forEach(t=>{this.passwordRules[t.label].enabled=t.enabled,this.passwordRules[t.label].value=t.value,this.passwordRules[t.label].label=this.translate.instant("lang.password"+t.label+"Required"),this.passwordRules[t.label].id=t.label,this.loading=!1}),this.passwordRulesClone=JSON.parse(JSON.stringify(this.passwordRules))},t=>{this.notify.error(t.error.errors)})}cancelModification(){this.passwordRules=JSON.parse(JSON.stringify(this.passwordRulesClone)),this.passwordRulesList.forEach(t=>{t.enabled=this.passwordRules[t.label].enabled,t.value=this.passwordRules[t.label].value})}checkModif(){return JSON.stringify(this.passwordRules)===JSON.stringify(this.passwordRulesClone)}disabledForm(){return!(this.passwordRules.lockTime.enabled||this.passwordRules.minLength.enabled||this.passwordRules.lockAttempts.enabled||this.passwordRules.renewal.enabled||this.passwordRules.historyLastUse.enabled)}toggleRule(t){t.enabled=!t.enabled,this.passwordRulesList.forEach(e=>{"lockAttempts"!==t.id||"lockTime"!==e.label&&"lockAttempts"!==e.label?t.id===e.label&&(e.enabled=t.enabled):(e.enabled=t.enabled,this.passwordRules.lockTime.enabled=t.enabled)})}onSubmit(){this.passwordRulesList.forEach(t=>{t.enabled=this.passwordRules[t.label].enabled,t.value=this.passwordRules[t.label].value}),this.http.put("../rest/passwordRules",{rules:this.passwordRulesList}).subscribe(t=>{this.passwordRulesClone=JSON.parse(JSON.stringify(this.passwordRules)),this.notify.success(this.translate.instant("lang.passwordRulesUpdated"))},t=>{this.notify.error(t.error.errors)})}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],decls:13,vars:8,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[3,"label"],[3,"ngSubmit"],["passwordForm","ngForm"],[2,"margin-bottom","40px","text-align","center"],["color","primary",2,"padding-left","10px","padding-right","10px",3,"name","checked","change"],[2,"margin-top","15px","margin-bottom","15px"],["mat-list-icon",""],["color","primary",2,"position","relative","top","-10px",3,"checked","change"],["mat-line",""],["type","number","min","1","pattern","^[1-9][0-9]*","matInput","","required","",3,"disabled","name","ngModel","placeholder","ngModelChange"],["matSuffix",""],["mat-line","",2,"display","flex"],[2,"flex","1","padding-right","10px"],[2,"flex","1"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","type","submit","color","primary",3,"disabled"],["mat-raised-button","","type","button","color","default",3,"disabled","click"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Wb(1,"mat-sidenav-content"),p.Wb(2,"div",1),p.Wb(3,"div",2),p.Wb(4,"div",3),p.Rb(5,"header-left"),p.Vb(),p.Wb(6,"div",4),p.Rb(7,"header-right"),p.Vb(),p.Vb(),p.Rb(8,"div",5),p.Vb(),p.Wb(9,"div",6),p.Wb(10,"div",7),p.Oc(11,fm,2,0,"div",8),p.Oc(12,gm,56,53,"mat-card",9),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(3),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading))},directives:[C.e,C.f,M.a,x.a,O.t,I.c,j.a,ke.c,ke.a,c.K,c.v,c.w,wt.a,et.a,wt.d,It.a,wt.c,k.l,S.c,c.A,w.b,c.d,c.B,c.F,c.u,c.x,S.j,R.b],pipes:[h.d],encapsulation:2}),t})();const ym=["snav2"],Dm=["adminMenuTemplate"],Vm=["sendmailForm"];function Cm(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-nav-list"),p.Wb(1,"h3",14),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"a",22),p.dc("click",(function(){return p.Dc(t),p.hc(),p.zc(16).toggle()})),p.Rb(5,"mat-icon",23),p.Wb(6,"p",24),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Vb()}2&t&&(p.Db(2),p.Rc(p.jc(3,2,"lang.actions")),p.Db(5),p.Sc(" ",p.jc(8,4,"lang.checkSendmail")," "))}function Mm(t,e){1&t&&(p.Wb(0,"div",25),p.Rb(1,"mat-spinner",26),p.Vb())}function Wm(t,e){if(1&t&&(p.Wb(0,"mat-option",49),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t.id),p.Db(1),p.Sc(" ",t.label," ")}}function xm(t,e){if(1&t&&(p.Wb(0,"mat-option",49),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t.id),p.Db(1),p.Sc(" ",t.label," ")}}const Om=function(){return["smtp","mail"]},_m=function(t){return[t]};function Sm(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-card",27),p.Wb(1,"mat-tab-group"),p.Wb(2,"mat-tab",28),p.ic(3,"translate"),p.Wb(4,"form",29,30),p.dc("ngSubmit",(function(){return p.Dc(t),p.hc().onSubmit()})),p.Wb(6,"div",15),p.Wb(7,"div",31),p.Wb(8,"mat-form-field"),p.Wb(9,"mat-select",32,33),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().sendmail.type=e})),p.ic(11,"translate"),p.Oc(12,Wm,2,2,"mat-option",34),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(13,"div",15),p.Wb(14,"div",35),p.Wb(15,"mat-form-field"),p.Wb(16,"mat-select",36),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().sendmail.secure=e})),p.ic(17,"translate"),p.Oc(18,xm,2,2,"mat-option",34),p.Vb(),p.Vb(),p.Vb(),p.Wb(19,"div",37),p.Wb(20,"mat-form-field"),p.Wb(21,"input",38),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().sendmail.host=e})),p.ic(22,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(23,"div",39),p.Wb(24,"mat-form-field"),p.Wb(25,"input",40),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().sendmail.port=e})),p.ic(26,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(27,"div",15),p.Wb(28,"div",16),p.Wb(29,"mat-slide-toggle",41),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().sendmail.auth=e}))("change",(function(e){return p.Dc(t),p.hc().cleanAuthInfo(e)})),p.Qc(30),p.ic(31,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(32,"div",15),p.Wb(33,"div",16),p.Wb(34,"mat-form-field"),p.Wb(35,"input",42),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().sendmail.user=e})),p.ic(36,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(37,"div",16),p.Wb(38,"mat-form-field"),p.Wb(39,"input",43),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().sendmail.password=e})),p.Vb(),p.Wb(40,"mat-icon",44),p.dc("click",(function(){p.Dc(t);const e=p.hc();return e.hidePassword=!e.hidePassword})),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(41,"div",15),p.Wb(42,"div",16),p.Wb(43,"mat-form-field"),p.Wb(44,"input",45),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().sendmail.from=e})),p.ic(45,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(46,"div",46),p.Wb(47,"button",47),p.Qc(48),p.ic(49,"translate"),p.Vb(),p.Wb(50,"button",48),p.dc("click",(function(){return p.Dc(t),p.hc().cancelModification()})),p.Qc(51),p.ic(52,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.zc(5),e=p.hc();p.Db(2),p.pc("label",p.jc(3,38,"lang.informations")),p.Db(7),p.pc("placeholder",p.jc(11,40,"lang.configurationType")),p.oc("ngModel",e.sendmail.type),p.Db(3),p.oc("ngForOf",e.smtpTypeList),p.Db(1),p.Lc("opacity",p.uc(58,Om).indexOf(e.sendmail.type)>-1?"1":"0.5"),p.Db(3),p.pc("placeholder",p.jc(17,42,"lang.smtpAuth")),p.oc("disabled",-1==p.uc(59,Om).indexOf(e.sendmail.type))("ngModel",e.sendmail.secure),p.Db(2),p.oc("ngForOf",e.smtpSecList),p.Db(3),p.pc("placeholder",p.jc(22,44,"lang.host")),p.oc("disabled",-1==p.uc(60,Om).indexOf(e.sendmail.type))("ngModel",e.sendmail.host),p.Db(4),p.pc("placeholder",p.jc(26,46,"lang.port")),p.oc("ngModel",e.sendmail.port)("disabled",-1==p.uc(61,Om).indexOf(e.sendmail.type)),p.Db(2),p.Lc("opacity",p.uc(62,Om).indexOf(e.sendmail.type)>-1?"1":"0.5"),p.Db(2),p.oc("ngModel",e.sendmail.auth)("disabled",-1==p.uc(63,Om).indexOf(e.sendmail.type)),p.Db(1),p.Rc(p.jc(31,48,"lang.enableAuth")),p.Db(2),p.Lc("opacity",p.uc(64,Om).indexOf(e.sendmail.type)>-1?"1":"0.5"),p.Db(3),p.pc("placeholder",p.jc(36,50,"lang.id")),p.oc("ngModel",e.sendmail.user)("disabled",!e.sendmail.auth||-1==p.uc(65,Om).indexOf(e.sendmail.type)),p.Db(4),p.oc("type",e.hidePassword?"password":"text")("ngModel",e.sendmail.password)("disabled",!e.sendmail.auth||-1==p.uc(66,Om).indexOf(e.sendmail.type))("placeholder",e.translate.instant(!0===e.sendmail.passwordAlreadyExists?"lang.passwordModification":"lang.password"))("required",!e.sendmail.passwordAlreadyExists),p.Db(1),p.oc("ngClass",p.vc(67,_m,e.hidePassword?"fa-eye-slash":"fa-eye")),p.Db(4),p.pc("placeholder",p.jc(45,52,"lang.mailFrom")),p.oc("ngModel",e.sendmail.from),p.Db(3),p.oc("disabled",e.checkModif()||!t.valid),p.Db(1),p.Rc(p.jc(49,54,"lang.validate")),p.Db(2),p.oc("disabled",e.checkModif()),p.Db(1),p.Rc(p.jc(52,56,"lang.cancel"))}}function wm(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-icon",50),p.dc("click",(function(){return p.Dc(t),p.hc().testEmailSend()})),p.ic(1,"translate"),p.Vb()}2&t&&p.pc("title",p.jc(1,1,"lang.beginSendTest"))}function Im(t,e){if(1&t&&(p.Wb(0,"mat-list-item"),p.Rb(1,"mat-icon",51),p.Wb(2,"p",24),p.Qc(3),p.Vb(),p.Vb()),2&t){const t=p.hc();p.Db(1),p.Gb("fas ",t.emailSendResult.icon," fa-2x"),p.Db(2),p.Sc(" ",t.emailSendResult.msg," ")}}function jm(t,e){if(1&t&&(p.Wb(0,"div",52),p.Qc(1),p.Vb()),2&t){const t=p.hc();p.Db(1),p.Sc(" ",t.emailSendResult.debug," ")}}let km=(()=>{class t{constructor(t,e,i,a,n,o){this.translate=t,this.http=e,this.notify=i,this.headerService=a,this.appService=n,this.viewContainerRef=o,this.loading=!1,this.sendmail={type:"smtp",host:"",auth:!0,user:"",password:"",secure:"ssl",port:"465",charset:"utf-8",from:""},this.smtpTypeList=[{id:"smtp",label:this.translate.instant("lang.smtpclient")},{id:"sendmail",label:this.translate.instant("lang.smtprelay")},{id:"qmail",label:this.translate.instant("lang.qmail")},{id:"mail",label:this.translate.instant("lang.phpmail")}],this.smtpSecList=[{id:"",label:this.translate.instant("lang.none")},{id:"ssl",label:"ssl"},{id:"tls",label:"tls"}],this.sendmailClone={},this.hidePassword=!0,this.serverConnectionLoading=!1,this.emailSendLoading=!1,this.emailSendResult={icon:"",msg:"",debug:""},this.currentUser={},this.recipientTest="",this.passwordLabel=""}ngOnInit(){this.headerService.setHeader(this.translate.instant("lang.sendmailShort")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/configurations/admin_email_server").subscribe(t=>{this.sendmail=t.configuration.value,this.sendmailClone=JSON.parse(JSON.stringify(this.sendmail)),this.loading=!1},t=>{this.notify.handleErrors(t)})}cancelModification(){this.sendmail=JSON.parse(JSON.stringify(this.sendmailClone))}onSubmit(){this.sendmailFormCpt.invalid?this.notify.handleErrors({error:{errors:this.translate.instant("lang.notSavedBecauseInvalid")}}):this.http.put("../rest/configurations/admin_email_server",this.sendmail).subscribe(t=>{this.sendmailClone=JSON.parse(JSON.stringify(this.sendmail)),this.notify.success(this.translate.instant("lang.configurationUpdated"))},t=>{this.notify.handleErrors(t)})}checkModif(){return JSON.stringify(this.sendmailClone)===JSON.stringify(this.sendmail)}initEmailSend(){this.emailSendResult={icon:"",msg:"",debug:""},void 0===this.currentUser.mail&&this.http.get("../rest/currentUser/profile").subscribe(t=>{this.currentUser=t,this.recipientTest=t.mail})}testEmailSend(){JSON.stringify(this.sendmailClone)!==JSON.stringify(this.sendmail)&&this.onSubmit(),this.emailSendResult={icon:"fa-paper-plane primary",msg:this.translate.instant("lang.emailSendInProgress"),debug:""};const t={sender:{email:this.currentUser.mail},recipients:[this.recipientTest],object:"["+this.translate.instant("lang.doNotReply")+"] "+this.translate.instant("lang.emailSendTest"),status:"EXPRESS",body:this.translate.instant("lang.emailSendTest"),isHtml:!1};this.emailSendLoading=!0,this.http.post("../rest/emails",t).subscribe(t=>{this.emailSendLoading=!1,this.emailSendResult={icon:"fa-check green",msg:this.translate.instant("lang.emailSendSuccess"),debug:""}},t=>{this.emailSendLoading=!1,this.emailSendResult={icon:"fa-times red",msg:this.translate.instant("lang.emailSendFailed"),debug:t.error.errors}})}cleanAuthInfo(t){this.sendmail.passwordAlreadyExists=!1,this.sendmail.user="",this.sendmail.password=""}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(ym,!0),p.Kc(Dm,!0),p.Xc(Vm,!0)),2&t&&(p.yc(i=p.ec())&&(e.sidenavRight=i.first),p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.sendmailFormCpt=i.first))},decls:31,vars:22,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],["joyrideStep","emailTour",1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",2,"overflow-x","hidden","width","500px",3,"mode","fixedInViewport","opened"],["snav2",""],["disableRipple","true",2,"display","flex","flex-direction","column"],["mat-subheader",""],[1,"form-group"],[1,"col-md-12"],["testSendmailForm","ngForm"],["name","recipientTest","matInput","","pattern","(^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$)",3,"placeholder","ngModel","disabled","ngModelChange"],["color","primary","style","cursor: pointer;","matSuffix","","class","fa fa-paper-plane fa-2x",3,"title","click",4,"ngIf"],[4,"ngIf"],["class","bash",4,"ngIf"],["mat-list-item","","joyrideStep","emailTour2",3,"click"],["color","primary","mat-list-icon","",1,"fas","fa-signal"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[3,"label"],[3,"ngSubmit"],["sendmailForm","ngForm"],[1,"col-md-12",2,"margin-bottom","20px"],["name","smtpType","required","",3,"placeholder","ngModel","ngModelChange"],["smtpType",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-2"],["name","SMTPSecure",3,"placeholder","disabled","ngModel","ngModelChange"],[1,"col-md-9"],["matInput","","name","host","required","",3,"disabled","ngModel","placeholder","ngModelChange"],[1,"col-md-1"],["name","port","type","number","matInput","","required","",3,"ngModel","disabled","placeholder","ngModelChange"],["color","primary","name","SMTPAuth",3,"ngModel","disabled","ngModelChange","change"],["name","user","matInput","","required","",3,"ngModel","disabled","placeholder","ngModelChange"],["name","password","matInput","",3,"type","ngModel","disabled","placeholder","required","ngModelChange"],["color","primary","matSuffix","",1,"fa","fa-2x",2,"cursor","pointer",3,"ngClass","click"],["name","mailFrom","required","","matInput","","pattern","(^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$)",3,"ngModel","placeholder","ngModelChange"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","type","submit","color","primary",3,"disabled"],["mat-raised-button","","type","button","color","default",3,"disabled","click"],[3,"value"],["color","primary","matSuffix","",1,"fa","fa-paper-plane","fa-2x",2,"cursor","pointer",3,"title","click"],["mat-list-icon",""],[1,"bash"]],template:function(t,e){if(1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,Cm,9,6,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,Mm,2,0,"div",9),p.Oc(14,Sm,53,69,"mat-card",10),p.Vb(),p.Vb(),p.Vb(),p.Wb(15,"mat-sidenav",11,12),p.dc("opened",(function(){return e.onSubmit(),e.initEmailSend()})),p.Wb(17,"mat-nav-list",13),p.Wb(18,"h3",14),p.Qc(19),p.ic(20,"translate"),p.Vb(),p.Wb(21,"div",15),p.Wb(22,"div",16),p.Wb(23,"form",null,17),p.Wb(25,"mat-form-field"),p.Wb(26,"input",18),p.dc("ngModelChange",(function(t){return e.recipientTest=t})),p.ic(27,"translate"),p.Vb(),p.Oc(28,wm,2,3,"mat-icon",19),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Oc(29,Im,4,4,"mat-list-item",20),p.Vb(),p.Oc(30,jm,2,1,"div",21),p.Vb(),p.Vb()),2&t){const t=p.zc(24);p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading),p.Db(1),p.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",(e.appService.getViewMode(),!1)),p.Db(4),p.Rc(p.jc(20,18,"lang.emailSendTest")),p.Db(7),p.pc("placeholder",p.jc(27,20,"lang.mailTo")),p.oc("ngModel",e.recipientTest)("disabled",e.emailSendLoading),p.Db(2),p.oc("ngIf",!e.emailSendLoading&&t.valid),p.Db(1),p.oc("ngIf",""!=e.emailSendResult.msg),p.Db(1),p.oc("ngIf",e.emailSendResult.msg===e.translate.instant("lang.emailSendFailed"))}},directives:[C.e,C.f,M.a,x.a,W.a,O.t,C.d,wt.h,wt.g,c.K,c.v,c.w,S.c,w.b,c.d,c.B,c.u,c.x,wt.d,It.a,wt.c,k.l,I.c,j.a,ke.c,ke.a,at.a,c.F,O.s,c.A,et.a,S.j,O.q,R.b,k.p],pipes:[h.d],styles:[".mat-list-item[_ngcontent-%COMP%]:hover{background:inherit}.green[_ngcontent-%COMP%]{color:green}.primary[_ngcontent-%COMP%]{color:#135f7f}.red[_ngcontent-%COMP%]{color:red}.bash[_ngcontent-%COMP%]{background:#34495e;height:310px;border-radius:5px;top:40px;display:absolute;color:#fff;padding:10px;margin:10px}"]}),t})();const Rm=["adminMenuTemplate"];function Tm(t,e){1&t&&(p.Wb(0,"mat-nav-list"),p.Wb(1,"h3",11),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"a",12),p.Rb(5,"mat-icon",13),p.Wb(6,"p",14),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(2),p.Rc(p.jc(3,2,"lang.actions")),p.Db(5),p.Sc(" ",p.jc(8,4,"lang.add")," "))}function Pm(t,e){1&t&&(p.Wb(0,"div",15),p.Rb(1,"mat-spinner",16),p.Vb())}function Qm(t,e){if(1&t&&(p.Wb(0,"mat-header-cell",38),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=p.hc(2);p.Ib("hide-for-mobile",t.appService.getViewMode()),p.Db(1),p.Rc(p.jc(2,3,"lang.label"))}}function Fm(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.Ib("hide-for-mobile",i.appService.getViewMode()),p.Db(1),p.Sc(" ",t.label," ")}}function Lm(t,e){1&t&&(p.Wb(0,"mat-header-cell",38),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.description")))}function Em(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.description," ")}}function Am(t,e){1&t&&(p.Wb(0,"mat-header-cell",38),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.mailevaAccount")))}function Um(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.accountid," ")}}function $m(t,e){1&t&&p.Rb(0,"mat-header-cell")}function zm(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-cell",39),p.Wb(1,"button",40),p.dc("click",(function(i){p.Dc(t);const a=e.$implicit,n=p.hc(2);return i.stopPropagation(),n.deleteShipping(a.id)})),p.ic(2,"translate"),p.Rb(3,"mat-icon",41),p.Vb(),p.Vb()}2&t&&(p.Db(1),p.pc("matTooltip",p.jc(2,1,"lang.delete")))}function Nm(t,e){1&t&&p.Rb(0,"mat-header-row")}function Hm(t,e){1&t&&(p.Rb(0,"mat-row",42),p.ic(1,"translate")),2&t&&(p.qc("routerLink","/administration/shippings/",e.$implicit.id,""),p.pc("matTooltip",p.jc(1,2,"lang.view")))}function Bm(t,e){if(1&t&&(p.Wb(0,"mat-card",17),p.Wb(1,"div",18),p.Wb(2,"div",19),p.Wb(3,"mat-form-field"),p.Rb(4,"input",20),p.ic(5,"translate"),p.Vb(),p.Vb(),p.Wb(6,"div",19),p.Rb(7,"mat-paginator",21,22),p.Vb(),p.Vb(),p.Wb(9,"mat-table",23,24),p.Ub(11,25),p.Oc(12,Qm,3,5,"mat-header-cell",26),p.Oc(13,Fm,2,3,"mat-cell",27),p.Tb(),p.Ub(14,28),p.Oc(15,Lm,3,3,"mat-header-cell",29),p.Oc(16,Em,2,1,"mat-cell",30),p.Tb(),p.Ub(17,31),p.Oc(18,Am,3,3,"mat-header-cell",29),p.Oc(19,Um,2,1,"mat-cell",30),p.Tb(),p.Ub(20,32),p.Oc(21,$m,1,0,"mat-header-cell",33),p.Oc(22,zm,4,3,"mat-cell",34),p.Tb(),p.Oc(23,Nm,1,0,"mat-header-row",35),p.Oc(24,Hm,2,4,"mat-row",36),p.Vb(),p.Wb(25,"div",37),p.Qc(26),p.ic(27,"translate"),p.Vb(),p.Vb()),2&t){const t=p.hc();p.Db(4),p.pc("placeholder",p.jc(5,10,"lang.filterBy")),p.oc("formControl",t.adminService.getFilterField()),p.Db(3),p.oc("length",100)("hidePageSize",!0)("pageSize",10),p.Db(2),p.oc("dataSource",t.adminService.getDataSource()),p.Db(14),p.oc("matHeaderRowDef",t.displayedColumns),p.Db(1),p.oc("matRowDefColumns",t.displayedColumns),p.Db(2),p.Tc(" ",t.shippings.length," ",p.jc(27,12,"lang.shippings"),"")}}let Xm=(()=>{class t{constructor(t,e,i,a,n,o,s,c){this.translate=t,this.http=e,this.notify=i,this.headerService=a,this.appService=n,this.functions=o,this.adminService=s,this.viewContainerRef=c,this.shippings=[],this.loading=!1,this.displayedColumns=["label","description","accountid","actions"],this.filterColumns=["label","description","accountid"]}ngOnInit(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.shippings")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/administration/shippings").subscribe(t=>{this.shippings=t.shippings,setTimeout(()=>{this.adminService.setDataSource("admin_shippings",this.shippings,this.sort,this.paginator,this.filterColumns)},0),this.loading=!1})}deleteShipping(t){confirm(this.translate.instant("lang.deleteMsg"))&&this.http.delete("../rest/administration/shippings/"+t).subscribe(t=>{this.shippings=t.shippings,this.adminService.setDataSource("admin_shippings",this.shippings,this.sort,this.paginator,this.filterColumns),this.notify.success(this.translate.instant("lang.shippingDeleted"))},t=>{this.notify.error(t.error.errors)})}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a),p.Qb(D.a),p.Qb(St),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(Rm,!0),p.Xc(N.a,!0),p.Xc(H.a,!0)),2&t&&(p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.paginator=i.first),p.yc(i=p.ec())&&(e.sort=i.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/shippings/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","label"],["mat-sort-header","",3,"hide-for-mobile",4,"matHeaderCellDef"],[3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","description"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","accountid"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header",""],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,Tm,9,6,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,Pm,2,0,"div",9),p.Oc(14,Bm,28,14,"mat-card",10),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading))},directives:[C.e,C.f,M.a,x.a,O.t,wt.h,wt.g,wt.d,o.f,It.a,wt.c,k.l,I.c,j.a,S.c,w.b,c.d,c.u,c.j,N.a,G.o,H.a,G.c,G.i,G.b,G.k,G.n,G.h,H.b,G.a,R.b,kt.b,G.j,G.m,o.d],pipes:[h.d],encapsulation:2}),t})();const Gm=["snav2"],qm=["maarchTree"];function Km(t,e){1&t&&(p.Wb(0,"div",16),p.Rb(1,"mat-spinner",17),p.Vb())}function Jm(t,e){if(1&t&&p.Rb(0,"div",54),2&t){const t=p.hc(2);p.oc("innerHTML",t.translate.instant("lang.shippingUnavailable"),p.Ec)}}function Ym(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-list-item",55),p.Wb(1,"mat-slide-toggle",56),p.dc("change",(function(){p.Dc(t);const i=e.$implicit;return p.hc(2).toggleShapingOption(i)})),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit,i=p.hc(2);p.Db(1),p.pc("name",t),p.oc("checked",i.shipping.options.shapingOptions.indexOf(t)>-1),p.Db(1),p.Rc(p.jc(3,3,"lang.maileva_"+t))}}function Zm(t,e){if(1&t&&p.Rb(0,"div",57),2&t){const t=p.hc(2);p.oc("innerHTML",t.translate.instant("lang.warnShapingOption"),p.Ec)}}function tf(t,e){if(1&t&&(p.Wb(0,"mat-radio-button",58),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=e.$implicit;p.pc("name",t),p.oc("value",t),p.Db(1),p.Sc(" ",p.jc(2,3,"lang.maileva_"+t)," ")}}const ef=function(t){return[t]};function af(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-card",18),p.Oc(1,Jm,1,1,"div",19),p.Wb(2,"form",20,21),p.dc("ngSubmit",(function(){return p.Dc(t),p.hc().onSubmit()})),p.Wb(4,"div",22),p.Wb(5,"div",23),p.Wb(6,"mat-form-field"),p.Wb(7,"input",24),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().shipping.label=e})),p.ic(8,"translate"),p.ic(9,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(10,"div",22),p.Wb(11,"div",23),p.Wb(12,"mat-form-field"),p.Wb(13,"input",25),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().shipping.description=e})),p.ic(14,"translate"),p.ic(15,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(16,"div",26),p.Wb(17,"div",27),p.Wb(18,"div",28),p.Qc(19),p.ic(20,"translate"),p.Vb(),p.Wb(21,"mat-list",29),p.Oc(22,Ym,4,5,"mat-list-item",30),p.Oc(23,Zm,1,1,"div",31),p.Vb(),p.Vb(),p.Wb(24,"div",32),p.Wb(25,"div",28),p.Qc(26),p.ic(27,"translate"),p.Vb(),p.Wb(28,"mat-radio-group",33),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().shipping.options.sendMode=e})),p.Oc(29,tf,3,5,"mat-radio-button",34),p.Vb(),p.Vb(),p.Vb(),p.Wb(30,"div",26),p.Wb(31,"div",35),p.Wb(32,"div",28),p.Qc(33),p.ic(34,"translate"),p.Vb(),p.Wb(35,"div",36),p.Wb(36,"label",37),p.Qc(37),p.ic(38,"translate"),p.Vb(),p.Wb(39,"mat-form-field",38),p.Wb(40,"input",39),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().shipping.fee.firstPagePrice=e})),p.ic(41,"translate"),p.Vb(),p.Wb(42,"span",40),p.Qc(43,"\xa0\u20ac"),p.Vb(),p.Vb(),p.Vb(),p.Wb(44,"div",36),p.Wb(45,"label",41),p.Qc(46),p.ic(47,"translate"),p.Vb(),p.Wb(48,"mat-form-field",38),p.Wb(49,"input",42),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().shipping.fee.nextPagePrice=e})),p.ic(50,"translate"),p.Vb(),p.Wb(51,"span",40),p.Qc(52,"\xa0\u20ac"),p.Vb(),p.Vb(),p.Vb(),p.Wb(53,"div",36),p.Wb(54,"label",43),p.Qc(55),p.ic(56,"translate"),p.Vb(),p.Wb(57,"mat-form-field",38),p.Wb(58,"input",44),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().shipping.fee.postagePrice=e})),p.ic(59,"translate"),p.Vb(),p.Wb(60,"span",40),p.Qc(61,"\xa0\u20ac"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(62,"div",45),p.Wb(63,"div",28),p.Qc(64),p.ic(65,"translate"),p.Vb(),p.Wb(66,"div",46),p.Qc(67),p.ic(68,"translate"),p.Vb(),p.Wb(69,"div",23),p.Wb(70,"mat-form-field"),p.Wb(71,"input",47),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().shipping.account.id=e})),p.ic(72,"translate"),p.ic(73,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(74,"div",23),p.Wb(75,"mat-form-field"),p.Wb(76,"input",48),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().shipping.account.password=e})),p.Vb(),p.Wb(77,"mat-icon",49),p.dc("click",(function(){p.Dc(t);const e=p.hc();return e.hidePassword=!e.hidePassword})),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(78,"div",50),p.Wb(79,"div",51),p.Wb(80,"button",52),p.Qc(81),p.ic(82,"translate"),p.Vb(),p.Wb(83,"button",53),p.dc("click",(function(){return p.Dc(t),p.hc().cancelModification()})),p.Qc(84),p.ic(85,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.zc(3),e=p.hc();p.Db(1),p.oc("ngIf",!e.shippingAvailable),p.Db(6),p.pc("title",p.jc(8,37,"lang.label")),p.pc("placeholder",p.jc(9,39,"lang.label")),p.oc("ngModel",e.shipping.label),p.Db(6),p.pc("title",p.jc(14,41,"lang.description")),p.pc("placeholder",p.jc(15,43,"lang.description")),p.oc("ngModel",e.shipping.description),p.Db(6),p.Sc(" ",p.jc(20,45,"lang.shapingOptions")," "),p.Db(3),p.oc("ngForOf",e.shapingOptions),p.Db(1),p.oc("ngIf",-1==e.shipping.options.shapingOptions.indexOf("addressPage")),p.Db(3),p.Sc(" ",p.jc(27,47,"lang.sendModes")," "),p.Db(2),p.oc("ngModel",e.shipping.options.sendMode),p.Db(1),p.oc("ngForOf",e.sendModes),p.Db(4),p.Sc(" ",p.jc(34,49,"lang.pricesInformations")," "),p.Db(4),p.Sc(" ",p.jc(38,51,"lang.maileva_firstPagePrice")," "),p.Db(3),p.pc("title",p.jc(41,53,"lang.maileva_firstPagePrice")),p.oc("ngModel",e.shipping.fee.firstPagePrice),p.Db(6),p.Sc(" ",p.jc(47,55,"lang.maileva_nextPagePrice")," "),p.Db(3),p.pc("title",p.jc(50,57,"lang.maileva_nextPagePrice")),p.oc("ngModel",e.shipping.fee.nextPagePrice),p.Db(6),p.Sc(" ",p.jc(56,59,"lang.maileva_postagePrice")," "),p.Db(3),p.pc("title",p.jc(59,61,"lang.maileva_postagePrice")),p.oc("ngModel",e.shipping.fee.postagePrice),p.Db(6),p.Sc(" ",p.jc(65,63,"lang.mailevaAccount")," "),p.Db(3),p.Rc(p.jc(68,65,"lang.infoMailevaAccount")),p.Db(4),p.pc("title",p.jc(72,67,"lang.login")),p.pc("placeholder",p.jc(73,69,"lang.id")),p.oc("ngModel",e.shipping.account.id),p.Db(5),p.oc("type",e.hidePassword?"password":"text")("ngModel",e.shipping.account.password)("placeholder",e.translate.instant(!1===e.creationMode?"lang.passwordModification":"lang.password"))("required",e.creationMode),p.Db(1),p.oc("ngClass",p.vc(75,ef,e.hidePassword?"fa-eye-slash":"fa-eye")),p.Db(3),p.oc("disabled",e.checkModif()||!t.valid),p.Db(1),p.Rc(p.jc(82,71,"lang.validate")),p.Db(2),p.oc("disabled",e.checkModif()),p.Db(1),p.Rc(p.jc(85,73,"lang.cancel"))}}let nf=(()=>{class t{constructor(t,e,i,a,n,o,s){this.translate=t,this.http=e,this.route=i,this.router=a,this.notify=n,this.headerService=o,this.appService=s,this.loading=!1,this.creationMode=!0,this.shipping={label:"",description:"",options:{shapingOptions:["addressPage"],sendMode:"fast"},fee:{firstPagePrice:0,nextPagePrice:0,postagePrice:0},account:{id:"",password:""},entities:[]},this.entities=[],this.entitiesClone=null,this.shippingClone=null,this.shapingOptions=["color","duplexPrinting","addressPage"],this.sendModes=["fast","economic"],this.hidePassword=!0,this.shippingAvailable=!1}ngOnInit(){this.http.get("../rest/externalConnectionsEnabled").pipe(Object(d.a)(t=>{this.shippingAvailable=!0===t.connection.maileva}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe(),this.route.params.subscribe(t=>{void 0===t.id?(this.headerService.setHeader(this.translate.instant("lang.shippingCreation")),this.creationMode=!0,this.http.get("../rest/administration/shippings/new").subscribe(t=>{this.entities=t.entities.map(t=>Object.assign(Object.assign({},t),{id:parseInt(t.id)})),this.entitiesClone=JSON.parse(JSON.stringify(this.entities)),this.initEntitiesTree(this.entities),this.shippingClone=JSON.parse(JSON.stringify(this.shipping)),this.loading=!1},t=>{this.notify.handleErrors(t)}),this.loading=!1):(this.headerService.setHeader(this.translate.instant("lang.shippingModification")),this.creationMode=!1,this.http.get("../rest/administration/shippings/"+t.id).subscribe(t=>{this.shipping=t.shipping,this.entities=t.entities,this.entitiesClone=JSON.parse(JSON.stringify(this.entities)),this.initEntitiesTree(this.entities),this.shippingClone=JSON.parse(JSON.stringify(this.shipping)),this.loading=!1},t=>{this.notify.handleErrors(t)}))})}initEntitiesTree(t){this.maarchTree.initData(t)}updateSelectedEntities(){this.shipping.entities=this.maarchTree.getSelectedNodes().map(t=>t.id)}onSubmit(){this.creationMode?this.http.post("../rest/administration/shippings",this.shipping).subscribe(t=>{this.shippingClone=JSON.parse(JSON.stringify(this.shipping)),this.notify.success(this.translate.instant("lang.shippingAdded")),this.router.navigate(["/administration/shippings"])},t=>{this.notify.handleErrors(t)}):this.http.put("../rest/administration/shippings/"+this.shipping.id,this.shipping).subscribe(t=>{this.shippingClone=JSON.parse(JSON.stringify(this.shipping)),this.notify.success(this.translate.instant("lang.shippingUpdated")),this.router.navigate(["/administration/shippings"])},t=>{this.notify.handleErrors(t)})}checkModif(){return JSON.stringify(this.shippingClone)===JSON.stringify(this.shipping)}toggleShapingOption(t){const e=this.shipping.options.shapingOptions.indexOf(t);e>-1?this.shipping.options.shapingOptions.splice(e,1):this.shipping.options.shapingOptions.push(t)}cancelModification(){this.shipping=JSON.parse(JSON.stringify(this.shippingClone)),this.entities=JSON.parse(JSON.stringify(this.entitiesClone)),this.initEntitiesTree(this.entities)}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(o.a),p.Qb(o.c),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(Gm,!0),p.Kc(qm,!0)),2&t&&(p.yc(i=p.ec())&&(e.sidenavRight=i.first),p.yc(i=p.ec())&&(e.maarchTree=i.first))},decls:22,vars:14,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",2,"overflow-x","hidden","width","400px",3,"mode","fixedInViewport","opened"],["snav2",""],["mat-subheader",""],[2,"padding","10px"],[3,"afterSelectNode","afterDeselectNode"],["maarchTree",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],["class","alert-message alert-message-danger","role","alert","style","max-width: 100%",3,"innerHTML",4,"ngIf"],[1,"form-horizontal",3,"ngSubmit"],["shippingForm","ngForm"],[1,"form-group"],[1,"col-sm-12"],["matInput","","required","","name","label","id","label","type","text","maxlength","64",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","required","","name","description","id","description","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],[1,"form-group",2,"flex-direction","row","flex-wrap","wrap"],[1,"formType","ratio-2","col-sm-12"],[1,"formType-title"],["role","list"],["role","listitem",4,"ngFor","ngForOf"],["class","alert-message alert-message-danger","role","alert","style","margin-top: 30px;max-width: none;",3,"innerHTML",4,"ngIf"],[1,"formType","ratio-1","col-sm-12"],["name","sendMode",1,"radio-group",3,"ngModel","ngModelChange"],["color","primary",3,"name","value",4,"ngFor","ngForOf"],[1,"formType","ratio-2",2,"flex-direction","column"],[1,"priceContent"],["for","firstPagePrice",1,"priceContent-label"],["appearance","outline"],["matInput","","required","","name","firstPagePrice","id","firstPagePrice","type","number","maxlength","255","min","0","step","0.1","pattern","^(?=.+)(?:[1-9]\\d*|0)?(?:\\.\\d+)?$",3,"ngModel","title","ngModelChange"],["matSuffix",""],["for","nextPagePrice",1,"priceContent-label"],["matInput","","required","","name","nextPagePrice","id","nextPagePrice","type","number","maxlength","255","min","0","step","0.1","pattern","^(?=.+)(?:[1-9]\\d*|0)?(?:\\.\\d+)?$",3,"ngModel","title","ngModelChange"],["for","postagePrice",1,"priceContent-label"],["matInput","","required","","name","postagePrice","id","postagePrice","type","number","maxlength","255","min","0","step","0.1","pattern","^(?=.+)(?:[1-9]\\d*|0)?(?:\\.\\d+)?$",3,"ngModel","title","ngModelChange"],[1,"formType","ratio-1",2,"flex-direction","column","justify-content","center"],[1,"alert-message","alert-message-info",2,"max-width","none"],["matInput","","required","","name","login","id","login","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["name","password","matInput","",3,"type","ngModel","placeholder","required","ngModelChange"],["color","primary","matSuffix","","maxlength","255",1,"fa","fa-2x",2,"cursor","pointer",3,"ngClass","click"],[1,"form-group",2,"flex-direction","row","align-items","center"],[1,"col-sm-12","text-center",2,"padding","10px"],["mat-raised-button","","type","submit","color","primary",3,"disabled"],["mat-raised-button","","type","button","color","default",3,"disabled","click"],["role","alert",1,"alert-message","alert-message-danger",2,"max-width","100%",3,"innerHTML"],["role","listitem"],["color","primary",3,"name","checked","change"],["role","alert",1,"alert-message","alert-message-danger",2,"margin-top","30px","max-width","none",3,"innerHTML"],["color","primary",3,"name","value"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Wb(1,"mat-sidenav-content"),p.Wb(2,"div",1),p.Wb(3,"div",2),p.Wb(4,"div",3),p.Rb(5,"header-left"),p.Vb(),p.Wb(6,"div",4),p.Rb(7,"header-right"),p.Vb(),p.Vb(),p.Rb(8,"div",5),p.Vb(),p.Wb(9,"div",6),p.Wb(10,"div",7),p.Oc(11,Km,2,0,"div",8),p.Oc(12,af,86,77,"mat-card",9),p.Vb(),p.Vb(),p.Vb(),p.Wb(13,"mat-sidenav",10,11),p.Wb(15,"mat-list"),p.Wb(16,"h3",12),p.Qc(17),p.ic(18,"translate"),p.Vb(),p.Wb(19,"div",13),p.Wb(20,"app-maarch-flat-tree",14,15),p.dc("afterSelectNode",(function(){return e.updateSelectedEntities()}))("afterDeselectNode",(function(){return e.updateSelectedEntities()})),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(3),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading),p.Db(1),p.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!e.appService.getViewMode()),p.Db(4),p.Rc(p.jc(18,12,"lang.chooseEntityAssociationModel")))},directives:[C.e,C.f,M.a,x.a,O.t,C.d,wt.a,wt.g,Te.a,I.c,j.a,c.K,c.v,c.w,S.c,w.b,c.d,c.F,c.p,c.u,c.x,O.s,Ae.b,c.A,c.B,S.j,It.a,O.q,R.b,wt.d,et.a,Ae.a],pipes:[h.d],styles:[".radio-group[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column}.radio-group[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]{padding:10px}.form-group[_ngcontent-%COMP%], .formType[_ngcontent-%COMP%]{display:flex}.formType[_ngcontent-%COMP%]{align-items:center;margin:10px;border-radius:4px;border:1px solid #ccc;position:relative;padding:10px}.formType-title[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;max-width:85%;text-overflow:ellipsis;z-index:1;font-size:10px;font-weight:700;background:#fff;position:absolute;top:-7px;left:10px;padding:0;margin:0;color:#135f7f}.formType[_ngcontent-%COMP%]    .mat-slide-toggle-label{color:#666;font-weight:700}.formType[_ngcontent-%COMP%]    .mat-radio-button, .formType[_ngcontent-%COMP%]    .mat-slide-toggle{opacity:.5;color:#666;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.formType[_ngcontent-%COMP%]    .mat-checked, .formType[_ngcontent-%COMP%]    .mat-radio-checked{opacity:1;color:#135f7f}.formType[_ngcontent-%COMP%]    .mat-checked .mat-slide-toggle-label{color:#135f7f}.formType[_ngcontent-%COMP%]    .mat-form-field-suffix{color:#f99830;font-size:15px;top:0}.ratio-1[_ngcontent-%COMP%], .ratio-2[_ngcontent-%COMP%]{flex:1}.priceContent[_ngcontent-%COMP%]{display:flex;align-items:first baseline;width:100%}.priceContent-label[_ngcontent-%COMP%]{text-align:right;color:#135f7f;flex:1;justify-content:flex-end;display:flex;padding-right:10px}.priceContent[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:90px!important}.priceContent[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-weight:700;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.priceInfo[_ngcontent-%COMP%]{font-size:10px;font-weight:700;opacity:.5}label[_ngcontent-%COMP%]{cursor:pointer}"]}),t})();const of=["snav2"];function sf(t,e){1&t&&(p.Wb(0,"div",14),p.Rb(1,"mat-spinner",15),p.Vb())}function cf(t,e){if(1&t&&p.Rb(0,"div",19),2&t){const t=p.hc(2);p.oc("innerHTML",t.translate.instant("lang.noCustomFieldInfo"),p.Ec)}}function rf(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",31),p.dc("click",(function(){p.Dc(t);const e=p.hc().$implicit;return p.hc(2).switchSQLMode(e)})),p.Rb(1,"mat-icon",32),p.Vb()}}function lf(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",41),p.dc("click",(function(){p.Dc(t);const e=p.hc(3).$implicit;return p.hc(2).sortValues(e)})),p.Rb(1,"mat-icon",42),p.Vb()}if(2&t){const t=p.hc(5);p.oc("title",t.translate.instant("lang.orderValues"))}}function df(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-form-field",43),p.Wb(1,"input",44),p.dc("ngModelChange",(function(i){return p.Dc(t),e.$implicit.label=i})),p.Vb(),p.Wb(2,"button",45),p.dc("click",(function(){p.Dc(t);const i=e.index,a=p.hc(3).$implicit;return p.hc(2).removeValue(a,i)})),p.Rb(3,"mat-icon",46),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit,i=p.hc(5);p.Db(1),p.oc("ngModel",t.label)("placeholder",i.translate.instant("lang.newValue")),p.Db(1),p.oc("title",i.translate.instant("lang.delete"))}}function bf(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-expansion-panel",35),p.Wb(1,"mat-expansion-panel-header"),p.Wb(2,"mat-panel-title",36),p.Qc(3),p.ic(4,"translate"),p.Vb(),p.Vb(),p.Wb(5,"div",37),p.Wb(6,"div",33),p.Wb(7,"button",38),p.dc("click",(function(){p.Dc(t);const e=p.hc(2).index;return p.hc(2).addValue(e)})),p.Qc(8),p.ic(9,"translate"),p.Vb(),p.Vb(),p.Wb(10,"div"),p.Oc(11,lf,2,1,"button",39),p.Vb(),p.Vb(),p.Wb(12,"div",21),p.Oc(13,df,4,3,"mat-form-field",40),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2).$implicit;p.Db(2),p.oc("matBadge",t.values.length),p.Db(1),p.Sc(" ",p.jc(4,5,"lang.valuesList")," "),p.Db(5),p.Sc(" ",p.jc(9,7,"lang.addValue"),""),p.Db(3),p.oc("ngIf",t.values.length>0),p.Db(2),p.oc("ngForOf",t.values)}}function pf(t,e){if(1&t&&(p.Wb(0,"div",33),p.Oc(1,bf,14,9,"mat-expansion-panel",34),p.Vb()),2&t){const t=p.hc().$implicit;p.Db(1),p.oc("ngIf",!t.SQLMode)}}function hf(t,e){if(1&t&&(p.Ub(0),p.Qc(1),p.ic(2,"translate"),p.Tb()),2&t){const t=p.hc().$implicit;p.Db(1),p.Sc(" (",p.jc(2,1,"lang."+t.key),") ")}}function uf(t,e){if(1&t&&(p.Wb(0,"mat-option",54),p.Qc(1),p.Oc(2,hf,3,3,"ng-container",52),p.Vb()),2&t){const t=e.$implicit,i=p.hc(5);p.oc("value",t.key),p.Db(1),p.Sc(" ",t.key," "),p.Db(1),p.oc("ngIf",!i.functionsService.empty(i.translate.instant("lang."+t.key)))}}function mf(t,e){if(1&t){const t=p.Xb();p.Wb(0,"span"),p.Wb(1,"input",61),p.dc("ngModelChange",(function(i){return p.Dc(t),e.$implicit.delimiterStart=i})),p.Vb(),p.Wb(2,"mat-chip",62),p.dc("removed",(function(){p.Dc(t);const i=e.index,a=p.hc(4).$implicit;return p.hc(2).removeColumnLabel(a.values.label,i)})),p.Qc(3),p.Rb(4,"mat-icon",63),p.Vb(),p.Wb(5,"input",61),p.dc("ngModelChange",(function(i){return p.Dc(t),e.$implicit.delimiterEnd=i})),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit;p.Db(1),p.Lc("width",8*(t.delimiterStart.length+1),"px"),p.oc("ngModel",t.delimiterStart),p.Db(2),p.Sc(" ",t.column," "),p.Db(2),p.Lc("width",8*(t.delimiterEnd.length+1),"px"),p.oc("ngModel",t.delimiterEnd)}}function ff(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",64),p.dc("click",(function(){p.Dc(t);const i=e.$implicit,a=p.hc(4).$implicit;return p.hc(2).addColumnLabel(a.values.label,i)})),p.Qc(1),p.Vb()}if(2&t){const t=e.$implicit;p.Db(1),p.Rc(t)}}function gf(t,e){if(1&t&&(p.Wb(0,"div",55),p.Wb(1,"mat-label",56),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Oc(4,mf,6,7,"span",18),p.Wb(5,"button",57),p.Rb(6,"i",58),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Wb(9,"mat-menu",null,59),p.Oc(11,ff,2,1,"button",60),p.Vb(),p.Vb()),2&t){const t=p.zc(10),e=p.hc(3).$implicit,i=p.hc(2);p.Db(2),p.Sc(" ",p.jc(3,5,"lang.targetLabel")," *"),p.Db(2),p.oc("ngForOf",e.values.label),p.Db(1),p.oc("matMenuTriggerFor",t),p.Db(2),p.Sc(" ",p.jc(8,7,"lang.addColumn")," "),p.Db(4),p.oc("ngForOf",i.availaibleTables[e.values.table])}}function vf(t,e){if(1&t&&(p.Wb(0,"mat-option",54),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t),p.Db(1),p.Sc(" ",t," ")}}function yf(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-form-field"),p.Wb(1,"mat-label"),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"mat-select",49),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(3).$implicit.values.key=e})),p.Oc(5,vf,2,2,"mat-option",50),p.Vb(),p.Vb()}if(2&t){const t=p.hc(3).$implicit,e=p.hc(2);p.Db(2),p.Rc(p.jc(3,3,"lang.targetIdentifier")),p.Db(2),p.oc("ngModel",t.values.key),p.Db(1),p.oc("ngForOf",e.availaibleTables[t.values.table])}}const Df=function(){return["string","integer","date"]};function Vf(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-expansion-panel",35),p.Wb(1,"mat-expansion-panel-header"),p.Wb(2,"mat-panel-title"),p.Qc(3),p.ic(4,"translate"),p.Vb(),p.Vb(),p.Wb(5,"div",21),p.Wb(6,"div",48),p.Wb(7,"mat-form-field"),p.Wb(8,"mat-label"),p.Qc(9),p.ic(10,"translate"),p.Vb(),p.Wb(11,"mat-select",49),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).$implicit.values.table=e})),p.Oc(12,uf,3,3,"mat-option",50),p.ic(13,"keyvalue"),p.Vb(),p.Vb(),p.Oc(14,gf,12,9,"div",51),p.Oc(15,yf,6,5,"mat-form-field",52),p.Vb(),p.Wb(16,"mat-form-field"),p.Wb(17,"mat-label"),p.Qc(18),p.ic(19,"translate"),p.Vb(),p.Wb(20,"textarea",53),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).$implicit.values.clause=e})),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2).$implicit,e=p.hc(2);p.Db(3),p.Sc(" ",p.jc(4,8,"lang.database")," "),p.Db(6),p.Rc(p.jc(10,10,"lang.targetTable")),p.Db(2),p.oc("ngModel",t.values.table),p.Db(1),p.oc("ngForOf",p.jc(13,12,e.availaibleTables)),p.Db(2),p.oc("ngIf",-1===p.uc(16,Df).indexOf(t.type)&&t.values.table),p.Db(1),p.oc("ngIf",t.values.table),p.Db(3),p.Rc(p.jc(19,14,"lang.clause")),p.Db(2),p.oc("ngModel",t.values.clause)}}function Cf(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",24),p.Wb(1,"div"),p.Wb(2,"button",31),p.dc("click",(function(){p.Dc(t);const e=p.hc().$implicit;return p.hc(2).switchSQLMode(e)})),p.Rb(3,"mat-icon",47),p.Vb(),p.Vb(),p.Wb(4,"div",33),p.Oc(5,Vf,21,17,"mat-expansion-panel",34),p.Vb(),p.Vb()}if(2&t){const t=p.hc().$implicit;p.Db(5),p.oc("ngIf",t.SQLMode)}}const Mf=function(){return["banAutocomplete","contact"]},Wf=function(){return["select","radio","checkbox"]};function xf(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-expansion-panel"),p.Wb(1,"mat-expansion-panel-header"),p.Wb(2,"mat-panel-title",20),p.Qc(3),p.Vb(),p.Wb(4,"mat-panel-description"),p.Qc(5),p.ic(6,"translate"),p.Vb(),p.Vb(),p.Wb(7,"div",21),p.Wb(8,"mat-form-field"),p.Wb(9,"input",22),p.dc("ngModelChange",(function(i){return p.Dc(t),e.$implicit.id=i})),p.Vb(),p.Vb(),p.Wb(10,"mat-form-field"),p.Wb(11,"input",23),p.dc("ngModelChange",(function(i){return p.Dc(t),e.$implicit.label=i})),p.Vb(),p.Vb(),p.Vb(),p.Wb(12,"div",24),p.Wb(13,"div"),p.Oc(14,rf,2,0,"button",25),p.Vb(),p.Oc(15,pf,2,1,"div",26),p.Vb(),p.Oc(16,Cf,6,1,"div",27),p.Wb(17,"div",28),p.Wb(18,"button",29),p.dc("click",(function(){p.Dc(t);const i=e.$implicit,a=e.index;return p.hc(2).updateCustomField(i,a)})),p.Qc(19),p.ic(20,"translate"),p.Vb(),p.Wb(21,"button",30),p.dc("click",(function(){p.Dc(t);const i=e.index;return p.hc(2).removeCustomField(i)})),p.Qc(22),p.ic(23,"translate"),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit,i=e.index,a=p.hc(2);p.Db(3),p.Sc(" ",t.label," "),p.Db(2),p.Sc(" ",p.jc(6,14,"lang."+t.type+"Input")," "),p.Db(4),p.oc("ngModel",t.id)("placeholder",a.translate.instant("lang.technicalId"))("value",t.id),p.Db(2),p.oc("ngModel",t.label)("placeholder",a.translate.instant("lang.label"))("value",t.label),p.Db(3),p.oc("ngIf",!t.SQLMode&&-1===p.uc(20,Mf).indexOf(t.type)),p.Db(1),p.oc("ngIf",p.uc(21,Wf).indexOf(t.type)>-1),p.Db(1),p.oc("ngIf",t.SQLMode),p.Db(2),p.oc("disabled",a.isModified(t,i)||!a.isValidField(t)),p.Db(1),p.Rc(p.jc(20,16,"lang.update")),p.Db(3),p.Rc(p.jc(23,18,"lang.delete"))}}function Of(t,e){if(1&t&&(p.Wb(0,"mat-card",16),p.Wb(1,"mat-tab-group"),p.Wb(2,"mat-tab",12),p.Oc(3,cf,1,1,"div",17),p.Wb(4,"mat-accordion"),p.Oc(5,xf,24,22,"mat-expansion-panel",18),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t){const t=p.hc();p.Db(2),p.oc("label",t.translate.instant("lang.usableFields")),p.Db(1),p.oc("ngIf",0===t.customFields.length),p.Db(2),p.oc("ngForOf",t.customFields)}}function _f(t,e){if(1&t&&(p.Ub(0),p.Wb(1,"mat-form-field",70),p.Rb(2,"textarea",71),p.Vb(),p.Tb()),2&t){const t=p.hc().$implicit,e=p.hc();p.Db(2),p.oc("placeholder",e.translate.instant("lang."+t.type+"Input"))}}function Sf(t,e){if(1&t&&(p.Ub(0),p.Wb(1,"mat-form-field",70),p.Rb(2,"input",72),p.Vb(),p.Tb()),2&t){const t=p.hc().$implicit,e=p.hc();p.Db(2),p.oc("placeholder",e.translate.instant("lang."+t.type+"Input"))}}function wf(t,e){if(1&t&&(p.Wb(0,"mat-option",54),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t),p.Db(1),p.Tc(" ",p.jc(2,3,"lang.choice")," ",t," ")}}function If(t,e){if(1&t&&(p.Ub(0),p.Wb(1,"mat-form-field",70),p.Wb(2,"mat-select",73),p.Oc(3,wf,3,5,"mat-option",50),p.Vb(),p.Vb(),p.Tb()),2&t){const t=p.hc().$implicit,e=p.hc();p.Db(2),p.oc("placeholder",e.translate.instant("lang."+t.type+"Input")),p.Db(1),p.oc("ngForOf",e.sampleIncrement)}}function jf(t,e){if(1&t){const t=p.Xb();p.Ub(0),p.Wb(1,"mat-form-field",70),p.Wb(2,"input",74),p.dc("click",(function(){return p.Dc(t),p.zc(5).open()})),p.Vb(),p.Rb(3,"mat-datepicker-toggle",75),p.Rb(4,"mat-datepicker",null,76),p.Vb(),p.Tb()}if(2&t){const t=p.zc(5),e=p.hc().$implicit,i=p.hc();p.Db(2),p.oc("matDatepicker",t)("placeholder",i.translate.instant("lang."+e.type+"Input")),p.Db(1),p.oc("for",t)}}function kf(t,e){if(1&t&&(p.Wb(0,"mat-radio-button",54),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t),p.Db(1),p.Tc(" ",p.jc(2,3,"lang.choice")," ",t," ")}}function Rf(t,e){if(1&t&&(p.Ub(0),p.Wb(1,"mat-radio-group",77),p.Oc(2,kf,3,5,"mat-radio-button",50),p.Vb(),p.Tb()),2&t){const t=p.hc(2);p.Db(2),p.oc("ngForOf",t.sampleIncrement)}}function Tf(t,e){if(1&t&&(p.Wb(0,"mat-list-option",83),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t),p.Db(1),p.Tc(" ",p.jc(2,3,"lang.choice")," ",t," ")}}function Pf(t,e){1&t&&(p.Wb(0,"mat-chip"),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc(" ",p.jc(2,1,"lang.selectedValue")," "))}function Qf(t,e){if(1&t&&(p.Ub(0),p.Wb(1,"div",78),p.Wb(2,"mat-selection-list",79,80),p.Oc(4,Tf,3,5,"mat-list-option",81),p.Vb(),p.Vb(),p.Wb(5,"mat-chip-list",82),p.Oc(6,Pf,3,3,"mat-chip",18),p.Vb(),p.Tb()),2&t){const t=p.zc(3),e=p.hc(2);p.Db(4),p.oc("ngForOf",e.sampleIncrement),p.Db(2),p.oc("ngForOf",t.selectedOptions.selected)}}const Ff=function(){return["string","banAutocomplete","contact"]};function Lf(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",65),p.Wb(1,"div",66),p.Wb(2,"button",67),p.dc("click",(function(){p.Dc(t);const i=e.$implicit;return p.hc().addCustomField(i)})),p.Rb(3,"mat-icon",68),p.Vb(),p.Vb(),p.Wb(4,"div",33),p.Wb(5,"div",69),p.Qc(6),p.Vb(),p.Oc(7,_f,3,1,"ng-container",52),p.Oc(8,Sf,3,1,"ng-container",52),p.Oc(9,If,4,2,"ng-container",52),p.Oc(10,jf,6,3,"ng-container",52),p.Oc(11,Rf,3,1,"ng-container",52),p.Oc(12,Qf,7,2,"ng-container",52),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit,i=p.hc();p.Db(2),p.oc("title",i.translate.instant("lang.add")),p.Db(4),p.Sc("",t.label," :"),p.Db(1),p.oc("ngIf",p.uc(8,Ff).indexOf(t.type)>-1),p.Db(1),p.oc("ngIf","integer"===t.type),p.Db(1),p.oc("ngIf","select"===t.type),p.Db(1),p.oc("ngIf","date"===t.type),p.Db(1),p.oc("ngIf","radio"===t.type),p.Db(1),p.oc("ngIf","checkbox"===t.type)}}let Ef=(()=>{class t{constructor(t,e,i,a,n,o,s,c){this.translate=t,this.http=e,this.notify=i,this.dialog=a,this.headerService=n,this.appService=o,this.sortPipe=s,this.functionsService=c,this.loading=!0,this.customFieldsTypes=[{label:this.translate.instant("lang.stringInput"),type:"string"},{label:this.translate.instant("lang.integerInput"),type:"integer"},{label:this.translate.instant("lang.selectInput"),type:"select"},{label:this.translate.instant("lang.dateInput"),type:"date"},{label:this.translate.instant("lang.radioInput"),type:"radio"},{label:this.translate.instant("lang.checkboxInput"),type:"checkbox"},{label:this.translate.instant("lang.banAutocompleteInput"),type:"banAutocomplete"},{label:this.translate.instant("lang.contactInput"),type:"contact"}],this.customFields=[],this.customFieldsClone=[],this.incrementCreation=1,this.sampleIncrement=[1,2,3,4],this.SQLMode=!1,this.availaibleTables={}}ngOnInit(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.customFieldsAdmin")),this.getTables(),this.http.get("../rest/customFields?admin=true").pipe(Object(l.a)(t=>(t.customFields.forEach(t=>{this.functionsService.empty(t.values.key)?(t.SQLMode=!1,t.values=Object.values(t.values).map(t=>({label:t}))):t.SQLMode=!0}),t)),Object(d.a)(t=>{this.customFields=t.customFields,this.customFieldsClone=JSON.parse(JSON.stringify(this.customFields))}),Object(vt.a)(()=>this.loading=!1),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}addCustomField(t){let e={};this.dialogRef=this.dialog.open(q.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.add"),msg:this.translate.instant("lang.confirmAction")}}),this.dialogRef.afterClosed().pipe(Object(K.a)(t=>"ok"===t),Object(d.a)(()=>{e={label:this.translate.instant("lang.newField")+" "+this.incrementCreation,type:t.type,values:[]}}),Object(J.a)(t=>this.http.post("../rest/customFields",e)),Object(d.a)(t=>{e.id=t.customFieldId,this.customFields.push(e),this.notify.success(this.translate.instant("lang.customFieldAdded")),this.incrementCreation++}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}addValue(t){this.customFields[t].values.push({label:""})}removeValue(t,e){t.values.splice(e,1)}removeCustomField(t){this.dialogRef=this.dialog.open(q.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete")+' "'+this.customFields[t].label+'"',msg:this.translate.instant("lang.confirmAction")}}),this.dialogRef.afterClosed().pipe(Object(K.a)(t=>"ok"===t),Object(J.a)(()=>this.http.delete("../rest/customFields/"+this.customFields[t].id)),Object(d.a)(()=>{this.customFields.splice(t,1),this.notify.success(this.translate.instant("lang.customFieldDeleted"))}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}updateCustomField(t,e){const i=Object.assign({},t);if(t.SQLMode)["string","integer","date"].indexOf(t.type)>-1&&(t.values.label=[{column:t.values.key,delimiterEnd:"",delimiterStart:""}]);else if(t.values=t.values.filter((t,e,i)=>i.map(t=>t.label).indexOf(t.label)===e),i.values=t.values.map(t=>t.label),this.customFields.filter(t=>t.label===i.label).length>1)return this.notify.handleErrors(this.translate.instant("lang.customFieldAlreadyExists")),Object(B.of)(!1);this.http.put("../rest/customFields/"+t.id,i).pipe(Object(d.a)(()=>{this.customFieldsClone[e]=JSON.parse(JSON.stringify(t)),this.notify.success(this.translate.instant("lang.customFieldUpdated"))}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}sortValues(t){t.values=this.sortPipe.transform(t.values,"label")}isModified(t,e){return!(JSON.stringify(t)!==JSON.stringify(this.customFieldsClone[e])&&""!==t.label&&!this.SQLMode)}switchSQLMode(t){t.SQLMode=!t.SQLMode,t.values=t.SQLMode?{key:"id",label:[{column:"id",delimiterEnd:"",delimiterStart:""}],table:"users",clause:"1=1"}:[]}getTables(){this.http.get("../rest/customFieldsWhiteList").pipe(Object(d.a)(t=>{t.allowedTables.forEach(t=>{this.availaibleTables[t.name]=t.columns})}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}addColumnLabel(t,e){t.push({delimiterStart:"",delimiterEnd:"",column:e})}removeColumnLabel(t,e){t.splice(e,1)}isValidField(t){return!t.SQLMode||!(this.functionsService.empty(t.values.key)||this.functionsService.empty(t.values.label)||this.functionsService.empty(t.values.table)||this.functionsService.empty(t.values.clause))}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(z.b),p.Qb(m.a),p.Qb(f.a),p.Qb(T.a),p.Qb(D.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&p.Kc(of,!0),2&t&&p.yc(i=p.ec())&&(e.sidenavRight=i.first)},features:[p.Cb([T.a])],decls:18,vars:12,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end","opened","",1,"col-md-4","col-sm-12","customFielsdPanel",3,"mode","fixedInViewport"],["snav2",""],[3,"label"],["class","customFieldsTypesItem",4,"ngFor","ngForOf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],["class","alert-message alert-message-info","role","alert",3,"innerHTML",4,"ngIf"],[4,"ngFor","ngForOf"],["role","alert",1,"alert-message","alert-message-info",3,"innerHTML"],["color","primary"],[1,"col-md-12"],["matInput","","name","id","disabled","",3,"ngModel","placeholder","value","ngModelChange"],["matInput","","name","label",3,"ngModel","placeholder","value","ngModelChange"],[1,"col-md-12",2,"display","flex","align-items","center"],["mat-mini-fab","","color","primary",3,"click",4,"ngIf"],["style","flex:1;",4,"ngIf"],["class","col-md-12","style","display: flex;align-items: center;",4,"ngIf"],[1,"col-md-12","text-center"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","warn",3,"click"],["mat-mini-fab","","color","primary",3,"click"],[1,"fas","fa-database",2,"height","auto"],[2,"flex","1"],["class","customFieldValues","opened","",4,"ngIf"],["opened","",1,"customFieldValues"],["matBadgeSize","small",3,"matBadge"],[1,"actionValuesCustom"],["mat-raised-button","","color","primary",3,"click"],["mat-mini-fab","","color","default",3,"title","click",4,"ngIf"],["floatLabel","never",4,"ngFor","ngForOf"],["mat-mini-fab","","color","default",3,"title","click"],["color","primary",1,"fas","fa-sort-alpha-down",2,"height","auto"],["floatLabel","never"],["matInput","",3,"ngModel","placeholder","ngModelChange"],["color","warn","mat-icon-button","","matSuffix","",3,"title","click"],[1,"fa","fa-trash"],[1,"fas","fa-list-ol",2,"height","auto"],[2,"display","flex","flex-direction","column"],["required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["style","width:100%;padding-bottom: 20px;",4,"ngIf"],[4,"ngIf"],["matInput","","placeholder","Ex. status='OK'","required","",3,"ngModel","ngModelChange"],[3,"value"],[2,"width","100%","padding-bottom","20px"],[2,"font-size","75%","color","rgba(0,0,0,0.54)","width","100%","display","block"],["mat-button","","color","primary",3,"matMenuTriggerFor"],[1,"fa","fa-plus-circle"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[2,"min-width","8px",3,"ngModel","ngModelChange"],[3,"removed"],["matChipRemove","",1,"fa","fa-times-circle"],["mat-menu-item","",3,"click"],[1,"customFieldsTypesItem"],[1,"addCustomFieldTypeContainer"],["mat-icon-button","","color","primary",3,"title","click"],[1,"fas","fa-plus-circle","fa-2x"],[2,"color","rgba(0,0,0,0.54)"],["floatLabel","never",1,"input-form"],["matInput","","matTextareaAutosize","","matAutosizeMinRows","1","cdkAutosizeMaxRows","6","disabled","",3,"placeholder"],["type","number","matInput","","disabled","",3,"placeholder"],["disabled","",3,"placeholder"],["matInput","","disabled","",3,"matDatepicker","placeholder","click"],["matSuffix","",3,"for"],["picker",""],["color","primary","disabled","",1,"radio-form"],[1,"input-form","checkbox-form"],["disabled","",1,"div-list"],["sampleList",""],["checkboxPosition","before",3,"value",4,"ngFor","ngForOf"],[1,"checkbox-selected-list"],["checkboxPosition","before",3,"value"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Wb(1,"mat-sidenav-content"),p.Wb(2,"div",1),p.Wb(3,"div",2),p.Wb(4,"div",3),p.Rb(5,"header-left"),p.Vb(),p.Wb(6,"div",4),p.Rb(7,"header-right"),p.Vb(),p.Vb(),p.Rb(8,"div",5),p.Vb(),p.Wb(9,"div",6),p.Wb(10,"div",7),p.Oc(11,sf,2,0,"div",8),p.Oc(12,Of,6,3,"mat-card",9),p.Vb(),p.Vb(),p.Vb(),p.Wb(13,"mat-sidenav",10,11),p.Wb(15,"mat-tab-group"),p.Wb(16,"mat-tab",12),p.Oc(17,Lf,13,9,"div",13),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(3),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading),p.Db(1),p.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode()),p.Db(3),p.oc("label",e.translate.instant("lang.customFieldsTypesAvailable")),p.Db(1),p.oc("ngForOf",e.customFieldsTypes))},directives:[C.e,C.f,M.a,x.a,O.t,C.d,ke.c,ke.a,O.s,I.c,j.a,Re.a,Re.c,Re.g,Re.h,Re.f,S.c,w.b,c.d,c.u,c.x,R.b,It.a,zn.a,S.j,S.g,at.a,c.F,k.p,Qe.d,Qe.e,Un.a,Un.e,Qe.b,w.d,Le.h,Le.j,Le.f,Ae.b,Ae.a,wt.i,Un.d,wt.f],pipes:[h.d,O.l],styles:[".mat-divider[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.customFielsdPanel[_ngcontent-%COMP%], .customFielsdPanel[_ngcontent-%COMP%]    .mat-tab-body-wrapper{padding-left:0}.mat-expansion-panel-header-description[_ngcontent-%COMP%]{flex-direction:row-reverse}.customFieldValues[_ngcontent-%COMP%]{box-shadow:none;border:1px solid rgba(0,0,0,.12)}.mat-expansion-panel[_ngcontent-%COMP%]{margin:5px}.mat-accordion[_ngcontent-%COMP%]{padding:5px}.mat-tab-body-content[_ngcontent-%COMP%], .mat-tab-body-wrapper[_ngcontent-%COMP%], .mat-tab-group[_ngcontent-%COMP%]{height:100%}.actionsCustomFields[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.actionValuesCustom[_ngcontent-%COMP%]{display:flex}.alert-message-info[_ngcontent-%COMP%]{margin-top:30px;max-width:100%}.addCustomFieldTypeContainer[_ngcontent-%COMP%]{justify-content:center;display:flex;align-items:center;width:60px}.customFieldsTypesItem[_ngcontent-%COMP%]{display:flex;padding-top:10px;padding-bottom:10px}.mat-badge-content[_ngcontent-%COMP%]{top:2px!important}",".banner[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:30px;border-radius:20px;border:1px solid #ccc;position:relative;padding:20px;width:100%}.banner[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;max-width:85%;text-overflow:ellipsis;z-index:1;font-size:20px;font-weight:700;letter-spacing:2px;position:absolute;top:-18px;left:20px;padding:0;margin:0;color:#135f7f}.banner[_ngcontent-%COMP%]   .title-divider[_ngcontent-%COMP%]{position:absolute;width:99%;z-index:-1;top:17px;background:#fff;height:1px}.banner[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:50%;padding-right:10px}.banner[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{font-size:16px}.fieldRow[_ngcontent-%COMP%]{display:flex;padding-top:10px;padding-bottom:10px}.fieldLabel[_ngcontent-%COMP%]{color:#4a4a4a}.fieldLabel[_ngcontent-%COMP%]   .cdk-drag-handle[_ngcontent-%COMP%]{margin-right:10px}.fieldState[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px;width:40px;justify-content:center;align-items:normal!important;padding-top:15px}.fieldState[_ngcontent-%COMP%]   .fieldRequired[_ngcontent-%COMP%]{font-size:5px;color:#135f7f}.fieldState[_ngcontent-%COMP%]   .fieldError[_ngcontent-%COMP%]{font-size:15px;color:#f99830}.fieldState[_ngcontent-%COMP%]   .fieldFull[_ngcontent-%COMP%]{font-size:15px;color:green}.fieldInput[_ngcontent-%COMP%]{position:relative}.fieldInput[_ngcontent-%COMP%], .fieldLabel[_ngcontent-%COMP%]{font-size:13px;flex:1}@media (max-width:768px){.fieldInput[_ngcontent-%COMP%], .fieldLabel[_ngcontent-%COMP%]{font-size:1em}}.fieldInput[_ngcontent-%COMP%], .fieldLabel[_ngcontent-%COMP%], .fieldState[_ngcontent-%COMP%]{align-items:center;display:flex}.input-form[_ngcontent-%COMP%]{font-size:13px;color:#666;width:500px}.input-form[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{color:#135f7f;padding-left:20px}.input-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.input-form[_ngcontent-%COMP%]    .mat-select-value-text{padding-left:20px;color:#135f7f}.input-form[_ngcontent-%COMP%]    .mat-form-field-label{top:15px;left:20px}.input-form[_ngcontent-%COMP%]    .mat-form-field-infix{display:flex;padding-top:0;padding-bottom:5px}.input-form[_ngcontent-%COMP%]    .mat-form-field-label-wrapper{top:-13px}.input-form[_ngcontent-%COMP%]    .mat-form-field-flex{background:#fff;height:40px;border-radius:10px;border:1px solid #135f7f}.input-form[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.input-form[_ngcontent-%COMP%]    .mat-form-field-suffix{margin-right:20px}.input-form[_ngcontent-%COMP%]    .mat-select-arrow-wrapper{padding-right:20px}.input-form[_ngcontent-%COMP%]    .mat-list-option{color:rgba(0,0,0,.54)}.input-form[_ngcontent-%COMP%]    .mat-form-field-wrapper{padding:0}.input-form[_ngcontent-%COMP%]    .mat-datepicker-toggle-default-icon{height:auto}.input-form.search-select[_ngcontent-%COMP%]    .mat-form-field-label-wrapper{top:-15px}.input-form.input-date[_ngcontent-%COMP%]    .mat-form-field-flex{align-items:center}.input-form.input-date[_ngcontent-%COMP%]    .mat-date-range-input-start-wrapper{flex:1}.input-form.input-date[_ngcontent-%COMP%]    .mat-date-range-input-inner{color:#135f7f}.input-form-filled[_ngcontent-%COMP%]{color:#fff;width:500px;transition:all .1s}.input-form-filled[_ngcontent-%COMP%]:hover    .mat-form-field-flex, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-form-field-flex{background:#fff!important;border:1px solid #fff!important;color:#135f7f!important;transition:all .1s}.input-form-filled[_ngcontent-%COMP%]:hover    .mat-form-field-label, .input-form-filled[_ngcontent-%COMP%]:hover    .mat-select-placeholder, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-form-field-label, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-select-placeholder{color:#135f7f!important}.input-form-filled[_ngcontent-%COMP%]:hover    .mat-select-arrow, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-select-arrow{color:rgba(19,95,127,.54)}.input-form-filled[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{color:#135f7f;padding-left:20px}.input-form-filled[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-select-value{text-align:left;font-weight:400}.input-form-filled[_ngcontent-%COMP%]    .mat-select-value-text{padding-left:20px;color:#fff}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-label{color:#fff;left:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-infix{padding-bottom:15px}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-flex{background:#135f7f;border-radius:30px;border:1px solid #fff}.input-form-filled[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-suffix{margin-right:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-select-arrow-wrapper{padding-right:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-select-arrow{color:hsla(0,0%,100%,.54)}.input-form-filled[_ngcontent-%COMP%]    .mat-select-placeholder{color:#fff}.input-form-filled[_ngcontent-%COMP%]    .mat-list-option{color:rgba(0,0,0,.54)}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-wrapper{padding:0}.input-form-filled[_ngcontent-%COMP%]   textarea.cdk-textarea-autosize-measuring[_ngcontent-%COMP%]{padding:4px 0!important}.input-form-filled[_ngcontent-%COMP%]    .mat-datepicker-toggle-default-icon{height:auto}.input-form.mat-form-field-disabled[_ngcontent-%COMP%]    .mat-input-element{cursor:not-allowed;padding-left:20px}.input-form.mat-form-field-disabled[_ngcontent-%COMP%]    .mat-form-field-flex{cursor:not-allowed;border:1px dashed #353232}.opt-group[_ngcontent-%COMP%]{font-weight:700}.smallInput[_ngcontent-%COMP%]{font-size:11px;padding-left:20px;padding-right:20px}.smallInput[_ngcontent-%COMP%]    .mat-form-field-infix{padding:0 0 5px}.button-form-primary[_ngcontent-%COMP%]{background:#fff;border:1px solid #135f7f;color:#135f7f;border-radius:30px;padding-left:20px;padding-right:20px;width:240px;height:45px;transition:all .1s}@media (max-width:768px){.button-form-primary[_ngcontent-%COMP%]{width:auto}}.button-form-primary[_ngcontent-%COMP%]:hover, .button-form-primary[aria-expanded=true][_ngcontent-%COMP%]{background:#135f7f!important;border:1px solid #fff!important;color:#fff!important;transition:all .1s}.button-form-primary[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;align-items:center;justify-content:center;width:100%}.button-form-primary[_ngcontent-%COMP%]    .mat-button-wrapper .menu-label{display:flex;flex:1;overflow:hidden;text-overflow:ellipsis;margin-right:10px}.button-form-primary[_ngcontent-%COMP%]    .mat-button-wrapper .menu-icon{display:flex}.button-form-primary-filled[_ngcontent-%COMP%]{background:#135f7f;border:1px solid #fff;color:#fff;border-radius:30px;padding-left:20px;padding-right:20px;width:240px;height:45px;transition:all .1s}@media (max-width:768px){.button-form-primary-filled[_ngcontent-%COMP%]{width:auto}}.button-form-primary-filled[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;align-items:center;justify-content:center;width:100%}.button-form-primary-filled[_ngcontent-%COMP%]    .mat-button-wrapper .menu-label{display:flex;flex:1;overflow:hidden;text-overflow:ellipsis;margin-right:10px}.button-form-primary-filled[_ngcontent-%COMP%]    .mat-button-wrapper .menu-icon{display:flex}.button-form-primary-alt[_ngcontent-%COMP%]{font-size:13px;background:#135f7f;border:1px solid #fff;color:#fff;border-radius:30px;padding:5px 20px;width:240px;transition:all .1s}@media (max-width:768px){.button-form-primary-alt[_ngcontent-%COMP%]{font-size:1em}}.button-form-primary-alt[_ngcontent-%COMP%]:hover, .button-form-primary-alt[aria-expanded=true][_ngcontent-%COMP%]{background:#fff!important;border:1px solid #fff!important;color:#135f7f!important;transition:all .1s}.button-form-primary-alt[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;align-items:center;justify-content:center;width:100%}.button-form-primary-alt[_ngcontent-%COMP%]    .mat-button-wrapper .menu-label{display:flex;flex:1}.button-form-primary-alt[_ngcontent-%COMP%]    .mat-button-wrapper .menu-icon{display:flex}.button-form-primary[aria-expanded=true][_ngcontent-%COMP%]{color:#135f7f;background:#fff;transition:all .1s;border:1px solid #135f7f}.button-form[_ngcontent-%COMP%]{background:#fff;color:#135f7f;border-radius:30px;padding:5px 20px;width:240px;transition:all .1s}.button-form[aria-expanded=true][_ngcontent-%COMP%]{transition:all .1s;border-bottom-left-radius:0;border-bottom-right-radius:0;border-top-left-radius:30px;border-top-right-radius:30px} .menuForm{width:240px;border-radius:30px;border:1px solid #fff;min-height:auto} .menuForm .mat-menu-content{padding-top:0;padding-bottom:0} .menuForm .mat-menu-content .mat-menu-item{transition:all .1s;font-size:13px;color:#666}@media (max-width:768px){ .menuForm .mat-menu-content .mat-menu-item{font-size:1em}} .menuForm .mat-menu-content .mat-menu-item:hover{transition:all .1s;color:#fff;background:#1a80ab} .parametersFieldsMenu{min-height:auto}.div-list[_ngcontent-%COMP%]{padding:0;max-height:150px;overflow:auto}.div-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{font-size:13px}@media (max-width:768px){.div-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{font-size:1em}}.checkbox-form[_ngcontent-%COMP%]{width:100%;padding:0;border:1px solid #135f7f;border-radius:30px;overflow:hidden}.checkbox-selected-list[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:center}.checkbox-selected-list[_ngcontent-%COMP%]    .mat-chip-list-wrapper{justify-content:center}.checkbox-selected-list[_ngcontent-%COMP%]   .mat-chip[_ngcontent-%COMP%]{font-size:13px}@media (max-width:768px){.checkbox-selected-list[_ngcontent-%COMP%]   .mat-chip[_ngcontent-%COMP%]{font-size:1em}}.radio-form[_ngcontent-%COMP%]{padding-left:20px;display:grid;grid-template-columns:repeat(2,1fr);width:100%}.radio-form[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]{flex:1}.radio-form[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]    .mat-radio-label-content{font-weight:400;color:rgba(0,0,0,.54)}.radio-form[_ngcontent-%COMP%]   .mat-radio-disabled[_ngcontent-%COMP%]{opacity:.5}.input-radio[_ngcontent-%COMP%]    .mat-form-field-infix{overflow:auto;padding-top:0}.input-radio[_ngcontent-%COMP%]    .mat-form-field-flex{height:auto}.input-radio[_ngcontent-%COMP%]    .mat-form-field-label{top:0;font-size:12px}.disabled[_ngcontent-%COMP%]{opacity:.2}.customFieldRow[_ngcontent-%COMP%]{display:flex;padding-top:20px;padding-bottom:20px}.customFieldDrag[_ngcontent-%COMP%]{cursor:move;width:50px;display:flex;align-items:center;justify-content:center}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drag-preview[_ngcontent-%COMP%]{background:#fff;box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.indexingModelsCustomFieldsList.cdk-drop-list-dragging[_ngcontent-%COMP%]   .indexingModelsCustomFieldsList[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.advancedInput[_ngcontent-%COMP%]{flex-direction:column}.noMandatory[_ngcontent-%COMP%]{visibility:hidden}.checkboxInput[_ngcontent-%COMP%]{display:block}.categoryLabel[_ngcontent-%COMP%]{letter-spacing:1px;font-size:13px;color:#135f7f;font-weight:700}@media (max-width:768px){.categoryLabel[_ngcontent-%COMP%]{font-size:1em}}.textareaInput[_ngcontent-%COMP%]    .mat-form-field{line-height:normal}.textareaInput[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{padding:0;margin:0;color:#135f7f}.textareaInput[_ngcontent-%COMP%]    .mat-form-field-flex{padding-left:20px;height:auto!important;min-height:40px!important}.textareaInput[_ngcontent-%COMP%]    .mat-form-field-label{left:0}"]}),t})();var Af=i("87bG"),Uf=i("enVo"),$f=i("sTim");const zf=["snav2"],Nf=["indexingForm"];function Hf(t,e){1&t&&(p.Wb(0,"div",15),p.Rb(1,"mat-spinner",16),p.Vb())}function Bf(t,e){if(1&t&&(p.Wb(0,"mat-option",30),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t.id),p.Db(1),p.Sc(" ",t.label," ")}}function Xf(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-card",17),p.Wb(1,"div",18),p.Wb(2,"mat-form-field"),p.Wb(3,"mat-label"),p.Qc(4),p.ic(5,"translate"),p.Vb(),p.Wb(6,"mat-select",19),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().indexingModel.category=e}))("selectionChange",(function(e){return p.Dc(t),p.hc().changeCategory(e)})),p.Oc(7,Bf,2,2,"mat-option",20),p.Vb(),p.Vb(),p.Vb(),p.Wb(8,"div",18),p.Wb(9,"div",21),p.Wb(10,"mat-form-field",22),p.Wb(11,"mat-label"),p.Qc(12),p.ic(13,"translate"),p.Vb(),p.Wb(14,"input",23),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().indexingModel.label=e})),p.Vb(),p.Vb(),p.Vb(),p.Wb(15,"div",24),p.Wb(16,"mat-slide-toggle",25),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().indexingModel.default=e})),p.Qc(17),p.ic(18,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(19,"mat-tab-group"),p.Wb(20,"mat-tab",12),p.Rb(21,"app-indexing-form",26,27),p.Wb(23,"div",28),p.Wb(24,"button",29),p.dc("click",(function(){return p.Dc(t),p.hc().onSubmit()})),p.Qc(25),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.zc(22),e=p.hc();p.Db(4),p.Rc(p.jc(5,13,"lang.category_id")),p.Db(2),p.oc("ngModel",e.indexingModel.category)("placeholder",e.translate.instant("lang.category_id")),p.Db(1),p.oc("ngForOf",e.categoriesList),p.Db(5),p.Rc(p.jc(13,15,"lang.modelName")),p.Db(2),p.oc("ngModel",e.indexingModel.label),p.Db(2),p.oc("ngModel",e.indexingModel.default),p.Db(1),p.Sc(" ",p.jc(18,17,"lang.defaultModel")," "),p.Db(3),p.oc("label",e.translate.instant("lang.indexingForm")),p.Db(1),p.oc("indexingFormId",e.indexingModel.id)("admin",!0),p.Db(3),p.oc("disabled",!t.isModified()&&!e.isModified()||""===e.indexingModel.label),p.Db(1),p.Rc(e.translate.instant(e.creationMode?"lang.save":"lang.update"))}}function Gf(t,e){if(1&t&&p.Rb(0,"app-field-list",31),2&t){const t=p.hc();p.oc("dataFields",t.indexingForm.getAvailableFields())}}function qf(t,e){if(1&t&&p.Rb(0,"app-field-list",32),2&t){const t=p.hc();p.oc("dataCustomFields",t.indexingForm.getAvailableCustomFields())}}let Kf=(()=>{class t{constructor(t,e,i,a,n,o,s,c){this.translate=t,this.http=e,this.route=i,this.router=a,this.notify=n,this.dialog=o,this.headerService=s,this.appService=c,this.loading=!0,this.indexingModel={id:0,label:"",category:"incoming",default:!1,owner:0,private:!1},this.indexingModelsCustomFields=[],this.creationMode=!0}ngOnInit(){this.route.params.subscribe(t=>{void 0===t.id?(this.creationMode=!0,this.headerService.setHeader(this.translate.instant("lang.indexingModelCreation")),this.http.get("../rest/categories").pipe(Object(d.a)(t=>{this.categoriesList=t.categories}),Object(d.a)(t=>{this.loading=!1,setTimeout(()=>{this.indexingForm.changeCategory(this.indexingModel.category)},0)}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe(),this.indexingModelClone=JSON.parse(JSON.stringify(this.indexingModel))):(this.creationMode=!1,this.http.get("../rest/indexingModels/"+t.id).pipe(Object(d.a)(t=>{this.indexingModel=t.indexingModel,this.headerService.setHeader(this.translate.instant("lang.indexingModelModification"),this.indexingModel.label),this.indexingModelClone=JSON.parse(JSON.stringify(this.indexingModel))}),Object(J.a)(()=>this.http.get("../rest/categories")),Object(d.a)(t=>{this.categoriesList=t.categories}),Object(vt.a)(()=>this.loading=!1),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe())})}onSubmit(){const t=this.indexingForm.getDatas();t.forEach((e,i)=>{t[i].default_value=["string","integer","date"].indexOf(t[i].type)>-1&&t[i].SQLMode?null:t[i].default_value,delete t[i].event,delete t[i].label,delete t[i].system,delete t[i].type,delete t[i].values}),this.indexingModel.fields=t,this.creationMode?this.http.post("../rest/indexingModels",this.indexingModel).pipe(Object(d.a)(t=>{this.indexingForm.setModification(),this.setModification(),this.router.navigate(["/administration/indexingModels"]),this.notify.success(this.translate.instant("lang.indexingModelAdded"))}),Object(vt.a)(()=>this.loading=!1),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe():this.http.put("../rest/indexingModels/"+this.indexingModel.id,this.indexingModel).pipe(Object(d.a)(t=>{this.indexingForm.setModification(),this.setModification(),this.router.navigate(["/administration/indexingModels"]),this.notify.success(this.translate.instant("lang.indexingModelUpdated"))}),Object(vt.a)(()=>this.loading=!1),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}isModified(){let t="",e="";return t=JSON.stringify(this.indexingModel),e=JSON.stringify(this.indexingModelClone),t!==e}setModification(){this.indexingModelClone=JSON.parse(JSON.stringify(this.indexingModel))}changeCategory(t){this.indexingForm.changeCategory(t.value)}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(o.a),p.Qb(o.c),p.Qb(y.a),p.Qb(z.b),p.Qb(m.a),p.Qb(f.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(zf,!0),p.Xc(Nf,!0)),2&t&&(p.yc(i=p.ec())&&(e.sidenavRight=i.first),p.yc(i=p.ec())&&(e.indexingForm=i.first))},features:[p.Cb([f.a,T.a])],decls:20,vars:14,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end","opened","",1,"col-md-4","col-sm-12",3,"mode","fixedInViewport"],["snav2",""],[3,"label"],[3,"dataFields",4,"ngIf"],[3,"dataCustomFields",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[2,"display","flex"],["name","category","required","",3,"ngModel","placeholder","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[2,"flex","1"],["appearance","outline",1,"indexingModelLabel"],["matInput","","name","label",3,"ngModel","ngModelChange"],[1,"defaultModel"],["color","primary","name","default",3,"ngModel","ngModelChange"],[3,"indexingFormId","admin"],["indexingForm",""],[1,"col-md-12","text-center"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"],[3,"dataFields"],[3,"dataCustomFields"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Wb(1,"mat-sidenav-content"),p.Wb(2,"div",1),p.Wb(3,"div",2),p.Wb(4,"div",3),p.Rb(5,"header-left"),p.Vb(),p.Wb(6,"div",4),p.Rb(7,"header-right"),p.Vb(),p.Vb(),p.Rb(8,"div",5),p.Vb(),p.Wb(9,"div",6),p.Wb(10,"div",7),p.Oc(11,Hf,2,0,"div",8),p.Oc(12,Xf,26,19,"mat-card",9),p.Vb(),p.Vb(),p.Vb(),p.Wb(13,"mat-sidenav",10,11),p.Wb(15,"mat-tab-group"),p.Wb(16,"mat-tab",12),p.Oc(17,Gf,1,1,"app-field-list",13),p.Vb(),p.Wb(18,"mat-tab",12),p.Oc(19,qf,1,1,"app-field-list",14),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(3),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading),p.Db(1),p.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode()),p.Db(3),p.oc("label",e.translate.instant("lang.availableFields")),p.Db(1),p.oc("ngIf",void 0!==e.indexingForm),p.Db(1),p.oc("label",e.translate.instant("lang.availableCustomFields")),p.Db(1),p.oc("ngIf",void 0!==e.indexingForm))},directives:[C.e,C.f,M.a,x.a,O.t,C.d,ke.c,ke.a,I.c,j.a,S.c,S.g,at.a,c.F,c.u,c.x,O.s,w.b,c.d,et.a,Uf.a,R.b,k.p,$f.a],pipes:[h.d],styles:[".indexingModelLabel[_ngcontent-%COMP%]    .mat-form-field-wrapper{padding:0}.defaultModel[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding-left:10px}",".banner[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:30px;border-radius:20px;border:1px solid #ccc;position:relative;padding:20px;width:100%}.banner[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;max-width:85%;text-overflow:ellipsis;z-index:1;font-size:20px;font-weight:700;letter-spacing:2px;position:absolute;top:-18px;left:20px;padding:0;margin:0;color:#135f7f}.banner[_ngcontent-%COMP%]   .title-divider[_ngcontent-%COMP%]{position:absolute;width:99%;z-index:-1;top:17px;background:#fff;height:1px}.banner[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:50%;padding-right:10px}.banner[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{font-size:16px}.fieldRow[_ngcontent-%COMP%]{display:flex;padding-top:10px;padding-bottom:10px}.fieldLabel[_ngcontent-%COMP%]{color:#4a4a4a}.fieldLabel[_ngcontent-%COMP%]   .cdk-drag-handle[_ngcontent-%COMP%]{margin-right:10px}.fieldState[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px;width:40px;justify-content:center;align-items:normal!important;padding-top:15px}.fieldState[_ngcontent-%COMP%]   .fieldRequired[_ngcontent-%COMP%]{font-size:5px;color:#135f7f}.fieldState[_ngcontent-%COMP%]   .fieldError[_ngcontent-%COMP%]{font-size:15px;color:#f99830}.fieldState[_ngcontent-%COMP%]   .fieldFull[_ngcontent-%COMP%]{font-size:15px;color:green}.fieldInput[_ngcontent-%COMP%]{position:relative}.fieldInput[_ngcontent-%COMP%], .fieldLabel[_ngcontent-%COMP%]{font-size:13px;flex:1}@media (max-width:768px){.fieldInput[_ngcontent-%COMP%], .fieldLabel[_ngcontent-%COMP%]{font-size:1em}}.fieldInput[_ngcontent-%COMP%], .fieldLabel[_ngcontent-%COMP%], .fieldState[_ngcontent-%COMP%]{align-items:center;display:flex}.input-form[_ngcontent-%COMP%]{font-size:13px;color:#666;width:500px}.input-form[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{color:#135f7f;padding-left:20px}.input-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.input-form[_ngcontent-%COMP%]    .mat-select-value-text{padding-left:20px;color:#135f7f}.input-form[_ngcontent-%COMP%]    .mat-form-field-label{top:15px;left:20px}.input-form[_ngcontent-%COMP%]    .mat-form-field-infix{display:flex;padding-top:0;padding-bottom:5px}.input-form[_ngcontent-%COMP%]    .mat-form-field-label-wrapper{top:-13px}.input-form[_ngcontent-%COMP%]    .mat-form-field-flex{background:#fff;height:40px;border-radius:10px;border:1px solid #135f7f}.input-form[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.input-form[_ngcontent-%COMP%]    .mat-form-field-suffix{margin-right:20px}.input-form[_ngcontent-%COMP%]    .mat-select-arrow-wrapper{padding-right:20px}.input-form[_ngcontent-%COMP%]    .mat-list-option{color:rgba(0,0,0,.54)}.input-form[_ngcontent-%COMP%]    .mat-form-field-wrapper{padding:0}.input-form[_ngcontent-%COMP%]    .mat-datepicker-toggle-default-icon{height:auto}.input-form.search-select[_ngcontent-%COMP%]    .mat-form-field-label-wrapper{top:-15px}.input-form.input-date[_ngcontent-%COMP%]    .mat-form-field-flex{align-items:center}.input-form.input-date[_ngcontent-%COMP%]    .mat-date-range-input-start-wrapper{flex:1}.input-form.input-date[_ngcontent-%COMP%]    .mat-date-range-input-inner{color:#135f7f}.input-form-filled[_ngcontent-%COMP%]{color:#fff;width:500px;transition:all .1s}.input-form-filled[_ngcontent-%COMP%]:hover    .mat-form-field-flex, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-form-field-flex{background:#fff!important;border:1px solid #fff!important;color:#135f7f!important;transition:all .1s}.input-form-filled[_ngcontent-%COMP%]:hover    .mat-form-field-label, .input-form-filled[_ngcontent-%COMP%]:hover    .mat-select-placeholder, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-form-field-label, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-select-placeholder{color:#135f7f!important}.input-form-filled[_ngcontent-%COMP%]:hover    .mat-select-arrow, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-select-arrow{color:rgba(19,95,127,.54)}.input-form-filled[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{color:#135f7f;padding-left:20px}.input-form-filled[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-select-value{text-align:left;font-weight:400}.input-form-filled[_ngcontent-%COMP%]    .mat-select-value-text{padding-left:20px;color:#fff}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-label{color:#fff;left:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-infix{padding-bottom:15px}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-flex{background:#135f7f;border-radius:30px;border:1px solid #fff}.input-form-filled[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-suffix{margin-right:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-select-arrow-wrapper{padding-right:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-select-arrow{color:hsla(0,0%,100%,.54)}.input-form-filled[_ngcontent-%COMP%]    .mat-select-placeholder{color:#fff}.input-form-filled[_ngcontent-%COMP%]    .mat-list-option{color:rgba(0,0,0,.54)}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-wrapper{padding:0}.input-form-filled[_ngcontent-%COMP%]   textarea.cdk-textarea-autosize-measuring[_ngcontent-%COMP%]{padding:4px 0!important}.input-form-filled[_ngcontent-%COMP%]    .mat-datepicker-toggle-default-icon{height:auto}.input-form.mat-form-field-disabled[_ngcontent-%COMP%]    .mat-input-element{cursor:not-allowed;padding-left:20px}.input-form.mat-form-field-disabled[_ngcontent-%COMP%]    .mat-form-field-flex{cursor:not-allowed;border:1px dashed #353232}.opt-group[_ngcontent-%COMP%]{font-weight:700}.smallInput[_ngcontent-%COMP%]{font-size:11px;padding-left:20px;padding-right:20px}.smallInput[_ngcontent-%COMP%]    .mat-form-field-infix{padding:0 0 5px}.button-form-primary[_ngcontent-%COMP%]{background:#fff;border:1px solid #135f7f;color:#135f7f;border-radius:30px;padding-left:20px;padding-right:20px;width:240px;height:45px;transition:all .1s}@media (max-width:768px){.button-form-primary[_ngcontent-%COMP%]{width:auto}}.button-form-primary[_ngcontent-%COMP%]:hover, .button-form-primary[aria-expanded=true][_ngcontent-%COMP%]{background:#135f7f!important;border:1px solid #fff!important;color:#fff!important;transition:all .1s}.button-form-primary[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;align-items:center;justify-content:center;width:100%}.button-form-primary[_ngcontent-%COMP%]    .mat-button-wrapper .menu-label{display:flex;flex:1;overflow:hidden;text-overflow:ellipsis;margin-right:10px}.button-form-primary[_ngcontent-%COMP%]    .mat-button-wrapper .menu-icon{display:flex}.button-form-primary-filled[_ngcontent-%COMP%]{background:#135f7f;border:1px solid #fff;color:#fff;border-radius:30px;padding-left:20px;padding-right:20px;width:240px;height:45px;transition:all .1s}@media (max-width:768px){.button-form-primary-filled[_ngcontent-%COMP%]{width:auto}}.button-form-primary-filled[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;align-items:center;justify-content:center;width:100%}.button-form-primary-filled[_ngcontent-%COMP%]    .mat-button-wrapper .menu-label{display:flex;flex:1;overflow:hidden;text-overflow:ellipsis;margin-right:10px}.button-form-primary-filled[_ngcontent-%COMP%]    .mat-button-wrapper .menu-icon{display:flex}.button-form-primary-alt[_ngcontent-%COMP%]{font-size:13px;background:#135f7f;border:1px solid #fff;color:#fff;border-radius:30px;padding:5px 20px;width:240px;transition:all .1s}@media (max-width:768px){.button-form-primary-alt[_ngcontent-%COMP%]{font-size:1em}}.button-form-primary-alt[_ngcontent-%COMP%]:hover, .button-form-primary-alt[aria-expanded=true][_ngcontent-%COMP%]{background:#fff!important;border:1px solid #fff!important;color:#135f7f!important;transition:all .1s}.button-form-primary-alt[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;align-items:center;justify-content:center;width:100%}.button-form-primary-alt[_ngcontent-%COMP%]    .mat-button-wrapper .menu-label{display:flex;flex:1}.button-form-primary-alt[_ngcontent-%COMP%]    .mat-button-wrapper .menu-icon{display:flex}.button-form-primary[aria-expanded=true][_ngcontent-%COMP%]{color:#135f7f;background:#fff;transition:all .1s;border:1px solid #135f7f}.button-form[_ngcontent-%COMP%]{background:#fff;color:#135f7f;border-radius:30px;padding:5px 20px;width:240px;transition:all .1s}.button-form[aria-expanded=true][_ngcontent-%COMP%]{transition:all .1s;border-bottom-left-radius:0;border-bottom-right-radius:0;border-top-left-radius:30px;border-top-right-radius:30px} .menuForm{width:240px;border-radius:30px;border:1px solid #fff;min-height:auto} .menuForm .mat-menu-content{padding-top:0;padding-bottom:0} .menuForm .mat-menu-content .mat-menu-item{transition:all .1s;font-size:13px;color:#666}@media (max-width:768px){ .menuForm .mat-menu-content .mat-menu-item{font-size:1em}} .menuForm .mat-menu-content .mat-menu-item:hover{transition:all .1s;color:#fff;background:#1a80ab} .parametersFieldsMenu{min-height:auto}.div-list[_ngcontent-%COMP%]{padding:0;max-height:150px;overflow:auto}.div-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{font-size:13px}@media (max-width:768px){.div-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{font-size:1em}}.checkbox-form[_ngcontent-%COMP%]{width:100%;padding:0;border:1px solid #135f7f;border-radius:30px;overflow:hidden}.checkbox-selected-list[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:center}.checkbox-selected-list[_ngcontent-%COMP%]    .mat-chip-list-wrapper{justify-content:center}.checkbox-selected-list[_ngcontent-%COMP%]   .mat-chip[_ngcontent-%COMP%]{font-size:13px}@media (max-width:768px){.checkbox-selected-list[_ngcontent-%COMP%]   .mat-chip[_ngcontent-%COMP%]{font-size:1em}}.radio-form[_ngcontent-%COMP%]{padding-left:20px;display:grid;grid-template-columns:repeat(2,1fr);width:100%}.radio-form[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]{flex:1}.radio-form[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]    .mat-radio-label-content{font-weight:400;color:rgba(0,0,0,.54)}.radio-form[_ngcontent-%COMP%]   .mat-radio-disabled[_ngcontent-%COMP%]{opacity:.5}.input-radio[_ngcontent-%COMP%]    .mat-form-field-infix{overflow:auto;padding-top:0}.input-radio[_ngcontent-%COMP%]    .mat-form-field-flex{height:auto}.input-radio[_ngcontent-%COMP%]    .mat-form-field-label{top:0;font-size:12px}.disabled[_ngcontent-%COMP%]{opacity:.2}.customFieldRow[_ngcontent-%COMP%]{display:flex;padding-top:20px;padding-bottom:20px}.customFieldDrag[_ngcontent-%COMP%]{cursor:move;width:50px;display:flex;align-items:center;justify-content:center}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drag-preview[_ngcontent-%COMP%]{background:#fff;box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.indexingModelsCustomFieldsList.cdk-drop-list-dragging[_ngcontent-%COMP%]   .indexingModelsCustomFieldsList[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.advancedInput[_ngcontent-%COMP%]{flex-direction:column}.noMandatory[_ngcontent-%COMP%]{visibility:hidden}.checkboxInput[_ngcontent-%COMP%]{display:block}.categoryLabel[_ngcontent-%COMP%]{letter-spacing:1px;font-size:13px;color:#135f7f;font-weight:700}@media (max-width:768px){.categoryLabel[_ngcontent-%COMP%]{font-size:1em}}.textareaInput[_ngcontent-%COMP%]    .mat-form-field{line-height:normal}.textareaInput[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{padding:0;margin:0;color:#135f7f}.textareaInput[_ngcontent-%COMP%]    .mat-form-field-flex{padding-left:20px;height:auto!important;min-height:40px!important}.textareaInput[_ngcontent-%COMP%]    .mat-form-field-label{left:0}"]}),t})();function Jf(t,e){if(1&t&&(p.Wb(0,"li"),p.Wb(1,"b"),p.Qc(2),p.Vb(),p.Qc(3),p.ic(4,"translate"),p.Wb(5,"b"),p.Qc(6),p.Vb(),p.Vb()),2&t){const t=e.$implicit;p.Db(2),p.Rc(t.count),p.Db(1),p.Sc(" ",p.jc(4,3,"lang.mailsWithStatus")," "),p.Db(3),p.Rc(t.status)}}function Yf(t,e){if(1&t&&(p.Wb(0,"mat-option",14),p.Qc(1),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.oc("value",t.id)("disabled",t.id===i.mainIndexingModel.id),p.Db(1),p.Sc(" ",t.label," ")}}function Zf(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div"),p.Wb(1,"mat-form-field",11),p.Wb(2,"mat-select",12),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().modelIds=e}))("selectionChange",(function(e){return p.Dc(t),p.hc().changeModel(e)})),p.Oc(3,Yf,2,3,"mat-option",13),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc();p.Db(2),p.oc("ngModel",t.modelIds)("placeholder",t.translate.instant("lang.indexingModel")),p.Db(1),p.oc("ngForOf",t.indexingModels)}}function tg(t,e){if(1&t&&(p.Wb(0,"li"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.label," ")}}function eg(t,e){if(1&t&&(p.Wb(0,"div",15),p.Qc(1),p.ic(2,"translate"),p.Wb(3,"ul"),p.Oc(4,tg,2,1,"li",4),p.Vb(),p.Qc(5),p.ic(6,"translate"),p.Vb()),2&t){const t=p.hc();p.Db(1),p.Sc(" ",p.jc(2,3,"lang.indexingModelFieldsReset")," "),p.Db(3),p.oc("ngForOf",t.resetFields),p.Db(1),p.Sc(" ",p.jc(6,5,"lang.confirmAction")," ")}}let ig=(()=>{class t{constructor(t,e,i,a,n,o){this.translate=t,this.data=e,this.dialogRef=i,this.http=a,this.notify=n,this.sortPipe=o,this.indexingModels=[],this.modelIds=[],this.resetFields=[],this.statuses=[],this.customFields=[],this.availableFields=[{identifier:"doctype",label:this.translate.instant("lang.doctype")},{identifier:"subject",label:this.translate.instant("lang.subject")},{identifier:"recipients",label:this.translate.instant("lang.getRecipients")},{identifier:"priority",label:this.translate.instant("lang.priority")},{identifier:"confidentiality",label:this.translate.instant("lang.confidential")},{identifier:"initiator",label:this.translate.instant("lang.initiatorEntityAlt")},{identifier:"departureDate",label:this.translate.instant("lang.departureDate")},{identifier:"processLimitDate",label:this.translate.instant("lang.processLimitDate")},{identifier:"tags",label:this.translate.instant("lang.tags")},{identifier:"senders",label:this.translate.instant("lang.getSenders")},{identifier:"destination",label:this.translate.instant("lang.destination")},{identifier:"folders",label:this.translate.instant("lang.folders")},{identifier:"documentDate",label:this.translate.instant("lang.docDate")},{identifier:"arrivalDate",label:this.translate.instant("lang.arrivalDate")}],this.loading=!1,this.mainIndexingModel=e.indexingModel}ngOnInit(){return Object(gt.a)(this,void 0,void 0,(function*(){this.loadIndexingModels(),this.loadStatuses(),this.loadCustomFields(),this.loadIndexingModelFields()}))}loadIndexingModels(){this.http.get("../rest/indexingModels").pipe(Object(l.a)(t=>t.indexingModels.filter(t=>!1===t.private)),Object(d.a)(t=>{this.indexingModels=t,this.sortPipe.transform(this.indexingModels,"label"),this.modelIds=this.indexingModels.map(t=>t.id)}),Object(vt.a)(()=>this.loading=!1),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}loadIndexingModelFields(){this.http.get("../rest/indexingModels/"+this.mainIndexingModel.id).pipe(Object(d.a)(t=>{this.mainIndexingModelFields=t.indexingModel.fields,this.mainIndexingModelFields=this.mainIndexingModelFields.map(t=>{const e=this.availableFields.find(e=>e.identifier===t.identifier);return t.label=void 0===e?this.translate.instant("lang.undefined"):e.label,t})}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}loadStatuses(){this.http.get("../rest/statuses").pipe(Object(d.a)(t=>{this.statuses=t.statuses,this.mainIndexingModel.used.forEach(t=>{const e=this.statuses.find(e=>e.id===t.status);void 0!==e&&(t.status=e.label_status)})}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}loadCustomFields(){this.http.get("../rest/customFields").pipe(Object(d.a)(t=>{t.customFields=t.customFields.map(t=>({identifier:"indexingCustomField_"+t.id,label:t.label})),t.customFields.forEach(t=>{this.availableFields.push(t)}),this.sortPipe.transform(this.availableFields,"label"),this.loadIndexingModelFields()}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}changeModel(t){this.selectedModelId=t.value,this.http.get("../rest/indexingModels/"+this.selectedModelId).pipe(Object(d.a)(t=>{this.selectedModelFields=t.indexingModel.fields,this.resetFields=this.mainIndexingModelFields.filter(t=>void 0===this.selectedModelFields.find(e=>e.identifier===t.identifier)),this.sortPipe.transform(this.resetFields,"label")}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}onSubmit(){this.http.request("DELETE","../rest/indexingModels/"+this.mainIndexingModel.id,{body:{targetId:this.selectedModelId}}).pipe(Object(d.a)(()=>{this.notify.success(this.translate.instant("lang.indexingModelDeleted")),this.dialogRef.close("ok")}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(z.a),p.Qb(z.h),p.Qb(u.b),p.Qb(y.a),p.Qb(T.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],features:[p.Cb([T.a])],decls:22,vars:19,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"alert-message","alert-message-info"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","alert-message alert-message-danger",4,"ngIf"],[1,"divider-modal"],["mat-dialog-actions",""],["color","primary","mat-raised-button","",1,"actions",3,"disabled","click"],["color","","mat-raised-button","",1,"actions",3,"click"],[2,"padding","10px","margin-top","15px"],["name","model","required","",3,"ngModel","placeholder","ngModelChange","selectionChange"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"],[1,"alert-message","alert-message-danger"]],template:function(t,e){1&t&&(p.Wb(0,"div",0),p.Wb(1,"h1",1),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Qc(6),p.ic(7,"translate"),p.Wb(8,"ul"),p.Oc(9,Jf,7,5,"li",4),p.Vb(),p.Qc(10),p.ic(11,"translate"),p.Vb(),p.Oc(12,Zf,4,3,"div",5),p.Oc(13,eg,7,7,"div",6),p.Rb(14,"span",7),p.Wb(15,"div",8),p.Wb(16,"button",9),p.dc("click",(function(){return e.onSubmit()})),p.Qc(17),p.ic(18,"translate"),p.Vb(),p.Wb(19,"button",10),p.dc("click",(function(){return e.dialogRef.close("")})),p.Qc(20),p.ic(21,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(2),p.Rc(p.jc(3,9,"lang.indexingModelReassign")),p.Db(4),p.Sc(" ",p.jc(7,11,"lang.indexingModelUsedBy")," "),p.Db(3),p.oc("ngForOf",e.mainIndexingModel.used),p.Db(1),p.Sc(" ",p.jc(11,13,"lang.indexingModelReplaceToDelete")," "),p.Db(2),p.oc("ngIf",!e.loading),p.Db(1),p.oc("ngIf",0!==e.resetFields.length),p.Db(3),p.oc("disabled",void 0===e.selectedModelId),p.Db(1),p.Rc(p.jc(18,15,"lang.validate")),p.Db(3),p.Rc(p.jc(21,17,"lang.cancel")))},directives:[z.i,z.f,O.s,O.t,z.c,R.b,S.c,at.a,c.F,c.u,c.x,k.p],pipes:[h.d],styles:[".alert-message-info[_ngcontent-%COMP%]{margin:0;font-size:16px}"]}),t})();const ag=["adminMenuTemplate"];function ng(t,e){1&t&&(p.Wb(0,"mat-nav-list"),p.Wb(1,"h3",11),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"a",12),p.Rb(5,"mat-icon",13),p.Wb(6,"p",14),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(2),p.Rc(p.jc(3,2,"lang.actions")),p.Db(5),p.Sc(" ",p.jc(8,4,"lang.add")," "))}function og(t,e){1&t&&(p.Wb(0,"div",15),p.Rb(1,"mat-spinner",16),p.Vb())}function sg(t,e){1&t&&(p.Wb(0,"mat-header-cell",41),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.technicalId")))}function cg(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.id," ")}}function rg(t,e){1&t&&(p.Wb(0,"mat-header-cell",41),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.category_id")))}function lg(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",p.jc(2,1,"lang."+t.category)," ")}}function dg(t,e){1&t&&(p.Wb(0,"mat-header-cell",42),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.label")))}function bg(t,e){if(1&t&&(p.Wb(0,"mat-cell",43),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.label," ")}}function pg(t,e){1&t&&(p.Wb(0,"mat-header-cell",41),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.perimeter")))}const hg=function(t,e){return{dataLabelWarn:t,dataLabelPrimary:e}};function ug(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Wb(1,"span",44),p.Qc(2),p.Vb(),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.Db(1),p.oc("ngClass",p.wc(2,hg,t.private,!t.private)),p.Db(1),p.Rc(i.translate.instant(t.private?"lang.private":"lang.public"))}}function mg(t,e){1&t&&(p.Wb(0,"mat-header-cell",41),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.default")))}function fg(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Wb(1,"span",44),p.Qc(2),p.Vb(),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.Db(1),p.oc("ngClass",p.wc(2,hg,!t.default,t.default)),p.Db(1),p.Rc(i.translate.instant(t.default?"lang.yes":"lang.no"))}}function gg(t,e){1&t&&(p.Wb(0,"mat-header-cell",41),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.status")))}function vg(t,e){1&t&&(p.Wb(0,"span",47),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.active")))}function yg(t,e){1&t&&(p.Wb(0,"span",48),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.inactive")))}function Dg(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Oc(1,vg,3,3,"span",45),p.Oc(2,yg,3,3,"span",46),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.oc("ngIf",t.enabled),p.Db(1),p.oc("ngIf",!t.enabled)}}function Vg(t,e){1&t&&p.Rb(0,"mat-header-cell")}function Cg(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",54),p.dc("click",(function(e){p.Dc(t);const i=p.hc().$implicit,a=p.hc(2);return e.stopPropagation(),a.disableIndexingModel(i)})),p.ic(1,"translate"),p.Rb(2,"mat-icon",55),p.Vb()}if(2&t){const t=p.hc().$implicit;p.pc("matTooltip",p.jc(1,2,"lang.suspend")),p.oc("disabled",t.default)}}function Mg(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",56),p.dc("click",(function(e){p.Dc(t);const i=p.hc().$implicit,a=p.hc(2);return e.stopPropagation(),a.enableIndexingModel(i)})),p.ic(1,"translate"),p.Rb(2,"mat-icon",57),p.Vb()}2&t&&p.pc("matTooltip",p.jc(1,1,"lang.authorize"))}function Wg(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-cell",49),p.Oc(1,Cg,3,4,"button",50),p.Oc(2,Mg,3,3,"button",51),p.Wb(3,"button",52),p.dc("click",(function(i){p.Dc(t);const a=e.$implicit,n=p.hc(2);return i.stopPropagation(),n.delete(a)})),p.ic(4,"translate"),p.Rb(5,"mat-icon",53),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit;p.Db(1),p.oc("ngIf",t.enabled),p.Db(1),p.oc("ngIf",!t.enabled),p.Db(1),p.pc("matTooltip",p.jc(4,4,"lang.delete")),p.oc("disabled",t.default)}}function xg(t,e){1&t&&p.Rb(0,"mat-header-row")}function Og(t,e){1&t&&(p.Rb(0,"mat-row",58),p.ic(1,"translate")),2&t&&(p.qc("routerLink","/administration/indexingModels/",e.$implicit.id,""),p.pc("matTooltip",p.jc(1,2,"lang.view")))}function _g(t,e){if(1&t&&(p.Wb(0,"mat-card",17),p.Wb(1,"div",18),p.Wb(2,"div",19),p.Wb(3,"mat-form-field"),p.Rb(4,"input",20),p.ic(5,"translate"),p.Vb(),p.Vb(),p.Wb(6,"div",19),p.Rb(7,"mat-paginator",21,22),p.Vb(),p.Vb(),p.Wb(9,"mat-table",23,24),p.Ub(11,25),p.Oc(12,sg,3,3,"mat-header-cell",26),p.Oc(13,cg,2,1,"mat-cell",27),p.Tb(),p.Ub(14,28),p.Oc(15,rg,3,3,"mat-header-cell",26),p.Oc(16,lg,3,3,"mat-cell",27),p.Tb(),p.Ub(17,29),p.Oc(18,dg,3,3,"mat-header-cell",30),p.Oc(19,bg,2,1,"mat-cell",31),p.Tb(),p.Ub(20,32),p.Oc(21,pg,3,3,"mat-header-cell",26),p.Oc(22,ug,3,5,"mat-cell",27),p.Tb(),p.Ub(23,33),p.Oc(24,mg,3,3,"mat-header-cell",26),p.Oc(25,fg,3,5,"mat-cell",27),p.Tb(),p.Ub(26,34),p.Oc(27,gg,3,3,"mat-header-cell",26),p.Oc(28,Dg,3,2,"mat-cell",27),p.Tb(),p.Ub(29,35),p.Oc(30,Vg,1,0,"mat-header-cell",36),p.Oc(31,Wg,6,6,"mat-cell",37),p.Tb(),p.Oc(32,xg,1,0,"mat-header-row",38),p.Oc(33,Og,2,4,"mat-row",39),p.Vb(),p.Wb(34,"div",40),p.Qc(35),p.ic(36,"translate"),p.Vb(),p.Vb()),2&t){const t=p.hc();p.Db(4),p.pc("placeholder",p.jc(5,10,"lang.filterBy")),p.oc("formControl",t.adminService.getFilterField()),p.Db(3),p.oc("length",100)("hidePageSize",!0)("pageSize",10),p.Db(2),p.oc("dataSource",t.adminService.getDataSource()),p.Db(23),p.oc("matHeaderRowDef",t.displayedColumns),p.Db(1),p.oc("matRowDefColumns",t.displayedColumns),p.Db(2),p.Tc(" ",t.indexingModels.length," ",p.jc(36,12,"lang.indexingModels"),"")}}let Sg=(()=>{class t{constructor(t,e,i,a,n,o,s,c,r){this.translate=t,this.http=e,this.notify=i,this.headerService=a,this.appService=n,this.dialog=o,this.functions=s,this.adminService=c,this.viewContainerRef=r,this.search=null,this.indexingModels=[],this.loading=!1,this.displayedColumns=["id","category","label","private","default","enabled","actions"],this.filterColumns=["id","label"]}ngOnInit(){this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/indexingModels?showDisabled=true").pipe(Object(l.a)(t=>t.indexingModels.filter(t=>!1===t.private)),Object(d.a)(t=>{this.indexingModels=t,this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.indexingModels")),setTimeout(()=>{this.adminService.setDataSource("admin_indexing_models",this.indexingModels,this.sort,this.paginator,this.filterColumns)},0)}),Object(vt.a)(()=>this.loading=!1),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}delete(t){0===t.used.length?(this.dialogRef=this.dialog.open(q.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete"),msg:this.translate.instant("lang.confirmAction")}}),this.dialogRef.afterClosed().pipe(Object(K.a)(t=>"ok"===t),Object(J.a)(()=>this.http.delete("../rest/indexingModels/"+t.id)),Object(d.a)(()=>{for(const e in this.indexingModels)this.indexingModels[e].id===t.id&&this.indexingModels.splice(Number(e),1);this.adminService.setDataSource("admin_indexing_models",this.indexingModels,this.sort,this.paginator,this.filterColumns),this.notify.success(this.translate.instant("lang.indexingModelDeleted"))}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()):(this.dialogRef=this.dialog.open(ig,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete"),msg:this.translate.instant("lang.confirmAction"),indexingModel:t}}),this.dialogRef.afterClosed().pipe(Object(K.a)(t=>"ok"===t),Object(d.a)(()=>{for(const e in this.indexingModels)this.indexingModels[e].id===t.id&&this.indexingModels.splice(Number(e),1);this.adminService.setDataSource("admin_indexing_models",this.indexingModels,this.sort,this.paginator,this.filterColumns)}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe())}disableIndexingModel(t){this.dialogRef=this.dialog.open(q.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.disable"),msg:this.translate.instant("lang.confirmAction")}}),this.dialogRef.afterClosed().pipe(Object(K.a)(t=>"ok"===t),Object(J.a)(()=>this.http.request("PUT","../rest/indexingModels/"+t.id+"/disable")),Object(d.a)(e=>{for(const i in this.indexingModels)this.indexingModels[i].id===t.id&&(this.indexingModels[i].enabled=!1);this.notify.success(this.translate.instant("lang.indexingModelDisabled"))}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}enableIndexingModel(t){this.dialogRef=this.dialog.open(q.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.enable"),msg:this.translate.instant("lang.confirmAction")}}),this.dialogRef.afterClosed().pipe(Object(K.a)(t=>"ok"===t),Object(J.a)(()=>this.http.request("PUT","../rest/indexingModels/"+t.id+"/enable")),Object(d.a)(e=>{for(let i in this.indexingModels)this.indexingModels[i].id===t.id&&(this.indexingModels[i].enabled=!0);this.notify.success(this.translate.instant("lang.indexingModelEnabled"))}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a),p.Qb(z.b),p.Qb(D.a),p.Qb(St),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(ag,!0),p.Xc(N.a,!0),p.Xc(H.a,!0)),2&t&&(p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.paginator=i.first),p.yc(i=p.ec())&&(e.sort=i.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/indexingModels/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSortDisableClear","","matSort","",3,"dataSource"],["table",""],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","category"],["matColumnDef","label"],["mat-sort-header","","style","flex:2",4,"matHeaderCellDef"],["style","flex:2",4,"matCellDef"],["matColumnDef","private"],["matColumnDef","default"],["matColumnDef","enabled"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header",""],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],[1,"label",3,"ngClass"],["class","label dataLabelPrimary",4,"ngIf"],["class","label dataLabelWarn",4,"ngIf"],[1,"label","dataLabelPrimary"],[1,"label","dataLabelWarn"],[2,"justify-content","flex-end"],["mat-icon-button","","color","primary",3,"matTooltip","disabled","click",4,"ngIf"],["mat-icon-button","","color","accent",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","color","warn",3,"matTooltip","disabled","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],["mat-icon-button","","color","primary",3,"matTooltip","disabled","click"],["aria-hidden","true",1,"fa","fa-pause","fa-2x"],["mat-icon-button","","color","accent",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-check","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,ng,9,6,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,og,2,0,"div",9),p.Oc(14,_g,37,14,"mat-card",10),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading))},directives:[C.e,C.f,M.a,x.a,O.t,wt.h,wt.g,wt.d,o.f,It.a,wt.c,k.l,I.c,j.a,S.c,w.b,c.d,c.u,c.j,N.a,G.o,H.a,G.c,G.i,G.b,G.k,G.n,G.h,H.b,G.a,O.q,R.b,kt.b,G.j,G.m,o.d],pipes:[h.d],styles:[".dataLabelWarn[_ngcontent-%COMP%]{color:#8e3e52}.dataLabelPrimary[_ngcontent-%COMP%]{color:#135f7f}.label[_ngcontent-%COMP%]{font-size:75%;font-weight:700}"]}),t})();const wg=["listFilter"];function Ig(t,e){1&t&&(p.Wb(0,"div",32),p.Rb(1,"mat-spinner"),p.Vb())}function jg(t,e){if(1&t&&(p.Wb(0,"mat-option",33),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t),p.Db(1),p.Sc(" ",t," ")}}function kg(t,e){if(1&t&&(p.Wb(0,"mat-option",33),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t),p.Db(1),p.Sc(" ",t," ")}}function Rg(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",34),p.Wb(1,"mat-form-field",5),p.Wb(2,"mat-label"),p.Qc(3),p.ic(4,"translate"),p.Vb(),p.Wb(5,"mat-select",35),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().exportModel.delimiter=e})),p.ic(6,"translate"),p.Oc(7,kg,2,2,"mat-option",7),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc();p.Db(3),p.Rc(p.jc(4,5,"lang.delimiter")),p.Db(2),p.pc("placeholder",p.jc(6,7,"lang.delimiter")),p.oc("ngModel",t.exportModel.delimiter)("disabled","csv"!=t.exportModel.format),p.Db(2),p.oc("ngForOf",t.delimiters)}}function Tg(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",36),p.Qc(1),p.Wb(2,"i",37),p.dc("click",(function(){p.Dc(t);const i=e.$implicit;return p.hc().addData(i)})),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit;p.pc("id",t.value),p.Db(1),p.Sc("",t.label," ")}}function Pg(t,e){1&t&&(p.Wb(0,"div",38),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.noDataAvailable")))}function Qg(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",36),p.Qc(1),p.Wb(2,"i",39),p.dc("click",(function(){p.Dc(t);const i=e.index;return p.hc().removeData(i)})),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit;p.pc("id",t.value),p.Db(1),p.Sc("",t.label," ")}}function Fg(t,e){1&t&&(p.Wb(0,"div",38),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.noDataAvailable")))}const Lg=function(t){return[t]};let Eg=(()=>{class t{constructor(t,e,i,a,n,o,s){this.translate=t,this.http=e,this.notify=i,this.data=a,this.sortPipe=n,this.localStorage=o,this.headerService=s,this.loading=!1,this.loadingExport=!1,this.delimiters=[";",",","TAB"],this.formats=["csv"],this.exportModel={delimiter:";",format:"csv",data:[]},this.dataAvailable=[{value:"id",label:this.translate.instant("lang.id")},{value:"externalId",label:"External Id"},{value:"enabled",label:this.translate.instant("lang.status")},{value:"communicationMeans",label:this.translate.instant("lang.communicationMean")}]}ngOnInit(){return Object(gt.a)(this,void 0,void 0,(function*(){yield this.getContactFields(),this.setConfiguration()}))}getContactFields(){return new Promise((t,e)=>{this.http.get("../rest/contactsParameters").pipe(Object(l.a)(t=>{const e=/contactCustomField_[.]*/g;return t.contactsParameters=t.contactsParameters.filter(t=>null===t.identifier.match(e)).map(t=>({value:t.identifier,label:this.translate.instant("lang.contactsParameters_"+t.identifier)})),t.contactsParameters}),Object(d.a)(t=>{this.dataAvailable=this.dataAvailable.concat(t)}),Object(J.a)(()=>this.http.get("../rest/contactsCustomFields")),Object(l.a)(t=>(t.customFields=t.customFields.map(t=>({value:"contactCustomField_"+t.id,label:t.label})),t.customFields)),Object(d.a)(e=>{this.dataAvailable=this.dataAvailable.concat(e),this.dataAvailable=this.sortPipe.transform(this.dataAvailable,"label"),t(!0)}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()})}drop(t){if(t.previousContainer===t.container)Object(Ma.h)(t.container.data,t.previousIndex,t.currentIndex);else{let e=t.previousIndex;if("selectedElements"===t.container.id&&(e=0,void 0!==$(".available-data .columns")[t.previousIndex])){const i=$(".available-data .columns")[t.previousIndex].id;e=this.dataAvailable.map(t=>t.value).indexOf(i)}Object(Ma.i)(t.previousContainer.data,t.container.data,e,t.currentIndex);const i=this.listFilter.nativeElement.value;this.listFilter.nativeElement.value="",setTimeout(()=>{this.listFilter.nativeElement.value=i},10)}}exportData(){this.localStorage.save("exportContactFields_"+this.headerService.user.id,JSON.stringify(this.exportModel)),this.loadingExport=!0,this.http.put("../rest/contacts/export",this.exportModel,{responseType:"blob"}).pipe(Object(d.a)(t=>{if("text/html"!==t.type){const e=document.createElement("a");let i,a,n,o;e.href=window.URL.createObjectURL(t),i=new Date,a=i.getDate(),n=i.getMonth()+1,o=i.getFullYear(),a<10&&(a="0"+a),n<10&&(n="0"+n),i=a+"-"+n+"-"+o,e.setAttribute("download","export_contact_maarch_"+i+"."+this.exportModel.format.toLowerCase()),document.body.appendChild(e),e.click()}else alert(this.translate.instant("lang.tooMuchDatas"))}),Object(vt.a)(()=>this.loadingExport=!1),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}addData(t){let e=0;this.dataAvailable.forEach((i,a)=>{i.value===t.value&&(e=a)}),Object(Ma.i)(this.dataAvailable,this.exportModel.data,e,this.exportModel.data.length);const i=this.listFilter.nativeElement.value;this.listFilter.nativeElement.value="",setTimeout(()=>{this.listFilter.nativeElement.value=i},10)}removeData(t){Object(Ma.i)(this.exportModel.data,this.dataAvailable,t,this.dataAvailable.length),this.sortPipe.transform(this.dataAvailable,"label")}removeAllData(){this.dataAvailable=this.dataAvailable.concat(this.exportModel.data),this.exportModel.data=[]}addAllData(){for(this.exportModel.data=this.exportModel.data.concat(this.dataAvailable);this.dataAvailable.length>0;)this.dataAvailable.pop();this.listFilter.nativeElement.value=""}setConfiguration(){null!==this.localStorage.get("exportContactFields_"+this.headerService.user.id)&&(JSON.parse(this.localStorage.get("exportContactFields_"+this.headerService.user.id)).data.forEach(t=>{this.addData(t)}),this.exportModel.delimiter=JSON.parse(this.localStorage.get("exportContactFields_"+this.headerService.user.id)).delimiter)}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(z.a),p.Qb(T.a),p.Qb(Z.a),p.Qb(m.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&p.Kc(wg,!0),2&t&&p.yc(i=p.ec())&&(e.listFilter=i.first)},features:[p.Cb([T.a])],decls:63,vars:62,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["mat-dialog-content",""],["class","loader",4,"ngIf"],[1,"row"],["appearance","outline"],[3,"placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","col-md-9",4,"ngIf"],[3,"expanded"],[1,"col-md-12"],["appearance","outline",1,"listFilter"],["matInput","","cdkFocusInitial","",3,"placeholder"],["listFilter",""],[1,"row","exportList"],[1,"col-md-6","available-data"],[1,"title"],["color","primary",1,"fa","fa-plus-circle","removeAllDatas",3,"title","click"],["id","availableElements","cdkDropList","",1,"cdk-list",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["dataAvailableList","cdkDropList"],["class","columns","cdkDrag","",3,"id",4,"ngFor","ngForOf"],["class","noData",4,"ngIf"],[2,"display","flex","align-items","center"],[1,"fas","fa-arrow-right"],[1,"col-md-6","active-data"],["color","warn",1,"fa","fa-minus-circle","removeAllDatas",3,"title","click"],["id","selectedElements","cdkDropList","",1,"cdk-list",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["dataExportList","cdkDropList"],[1,"divider-modal"],["mat-dialog-actions","",1,"actions"],["mat-raised-button","","mat-button","","color","primary",3,"disabled","click"],["mat-raised-button","","mat-button","",3,"mat-dialog-close"],[1,"loader"],[3,"value"],[1,"col-md-9"],[3,"placeholder","ngModel","disabled","ngModelChange"],["cdkDrag","",1,"columns",3,"id"],["color","primary",1,"fa","fa-plus",2,"cursor","pointer",3,"click"],[1,"noData"],["color","warn",1,"fa","fa-minus",2,"cursor","pointer",3,"click"]],template:function(t,e){if(1&t&&(p.Wb(0,"div",0),p.Wb(1,"h1",1),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"div",2),p.Oc(5,Ig,2,0,"div",3),p.Wb(6,"div",4),p.Wb(7,"div"),p.Wb(8,"mat-form-field",5),p.Wb(9,"mat-label"),p.Qc(10),p.ic(11,"translate"),p.Vb(),p.Wb(12,"mat-select",6),p.dc("ngModelChange",(function(t){return e.exportModel.format=t})),p.ic(13,"translate"),p.Oc(14,jg,2,2,"mat-option",7),p.Vb(),p.Vb(),p.Vb(),p.Oc(15,Rg,8,9,"div",8),p.Vb(),p.Wb(16,"mat-accordion"),p.Wb(17,"mat-expansion-panel",9),p.Wb(18,"mat-expansion-panel-header"),p.Wb(19,"mat-panel-title"),p.Qc(20),p.ic(21,"translate"),p.Vb(),p.Vb(),p.Wb(22,"div",4),p.Wb(23,"div",10),p.Wb(24,"mat-form-field",11),p.Rb(25,"input",12,13),p.ic(27,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(28,"div",14),p.Wb(29,"div",15),p.Wb(30,"h2"),p.Wb(31,"span",16),p.Qc(32),p.ic(33,"translate"),p.Vb(),p.Wb(34,"i",17),p.dc("click",(function(){return e.addAllData()})),p.ic(35,"translate"),p.Vb(),p.Vb(),p.Wb(36,"div",18,19),p.dc("cdkDropListDropped",(function(t){return e.drop(t)})),p.Oc(38,Tg,3,2,"div",20),p.ic(39,"filterList"),p.ic(40,"sortBy"),p.Oc(41,Pg,3,3,"div",21),p.Vb(),p.Vb(),p.Wb(42,"div",22),p.Rb(43,"i",23),p.Vb(),p.Wb(44,"div",24),p.Wb(45,"h2"),p.Wb(46,"span",16),p.Qc(47),p.ic(48,"translate"),p.Vb(),p.Wb(49,"i",25),p.dc("click",(function(){return e.removeAllData()})),p.ic(50,"translate"),p.Vb(),p.Vb(),p.Wb(51,"div",26,27),p.dc("cdkDropListDropped",(function(t){return e.drop(t)})),p.Oc(53,Qg,3,2,"div",20),p.Oc(54,Fg,3,3,"div",21),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Rb(55,"span",28),p.Wb(56,"div",29),p.Wb(57,"button",30),p.dc("click",(function(){return e.exportData()})),p.Qc(58),p.ic(59,"translate"),p.Vb(),p.Wb(60,"button",31),p.Qc(61),p.ic(62,"translate"),p.Vb(),p.Vb(),p.Vb()),2&t){const t=p.zc(26),i=p.zc(37),a=p.zc(52);p.Db(2),p.Rc(p.jc(3,29,"lang.exportDatas")),p.Db(3),p.oc("ngIf",e.loadingExport),p.Db(2),p.Ib("col-md-12","csv"!=e.exportModel.format)("col-md-3","csv"==e.exportModel.format),p.Db(3),p.Rc(p.jc(11,31,"lang.format")),p.Db(2),p.pc("placeholder",p.jc(13,33,"lang.format")),p.oc("ngModel",e.exportModel.format),p.Db(2),p.oc("ngForOf",e.formats),p.Db(1),p.oc("ngIf","csv"==e.exportModel.format),p.Db(2),p.oc("expanded",!0),p.Db(3),p.Sc(" ",p.jc(21,35,"lang.datasToExport")," "),p.Db(5),p.pc("placeholder",p.jc(27,37,"lang.searchDatas")),p.Db(7),p.Rc(p.jc(33,39,"lang.availableDatas")),p.Db(2),p.pc("title",p.jc(35,41,"lang.addAllData")),p.Db(2),p.oc("cdkDropListData",e.dataAvailable)("cdkDropListConnectedTo",p.vc(58,Lg,a)),p.Db(2),p.oc("ngForOf",p.lc(39,43,p.kc(40,47,e.dataAvailable,"label"),t.value,"label")),p.Db(3),p.oc("ngIf",0==e.dataAvailable.length),p.Db(6),p.Rc(p.jc(48,50,"lang.chosenDatas")),p.Db(2),p.pc("title",p.jc(50,52,"lang.removeAllDatas")),p.Db(2),p.oc("cdkDropListData",e.exportModel.data)("cdkDropListConnectedTo",p.vc(60,Lg,i)),p.Db(2),p.oc("ngForOf",e.exportModel.data),p.Db(1),p.oc("ngIf",0==e.exportModel.data.length),p.Db(3),p.oc("disabled",0==e.exportModel.data.length),p.Db(1),p.Rc(p.jc(59,54,"lang.toExport")),p.Db(3),p.Rc(p.jc(62,56,"lang.cancel"))}},directives:[z.i,z.f,O.t,S.c,S.g,at.a,c.u,c.x,O.s,Re.a,Re.c,Re.g,Re.h,w.b,Ma.e,z.c,R.b,z.d,I.c,k.p,Ma.a],pipes:[h.d,wa.a,T.a],styles:[".mat-dialog-container{position:relative}.mat-dialog-content[_ngcontent-%COMP%]{padding-bottom:10px;overflow-x:hidden} .mat-expansion-panel-body{padding-bottom:50px}.mat-expansion-panel-header[_ngcontent-%COMP%], .noData[_ngcontent-%COMP%]{opacity:.5}.noData[_ngcontent-%COMP%]{text-align:center}.removeAllDatas[_ngcontent-%COMP%]{float:right;font-size:14px;opacity:1;cursor:pointer;margin-right:10px}.listFilter[_ngcontent-%COMP%]{font-size:10px;margin-bottom:-20px}.exportList[_ngcontent-%COMP%]{display:flex}.exportList[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{float:left;height:20px;font-size:10px;font-weight:700;opacity:.5}.exportList[_ngcontent-%COMP%]   .cdk-list[_ngcontent-%COMP%]{height:100%}.cdk-list[_ngcontent-%COMP%]{max-width:100%;border:1px solid #ccc;display:block;border-radius:4px;max-height:310px;min-height:310px;overflow:auto}.cdk-list[_ngcontent-%COMP%], .columns[_ngcontent-%COMP%]{width:100%;background:#fff}.columns[_ngcontent-%COMP%]{height:50px;padding:20px 10px;border-bottom:1px solid #ccc;color:rgba(0,0,0,.87);display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;font-size:14px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.columns[_ngcontent-%COMP%]:last-child{border:none}.cdk-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .columns[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.actions[_ngcontent-%COMP%], .loader[_ngcontent-%COMP%]{justify-content:center}.loader[_ngcontent-%COMP%]{position:absolute;display:flex;width:100%;left:0;top:0;height:100%;background:hsla(0,0%,100%,.6);z-index:1;align-items:center}"]}),t})();var Ag=i("NpuA");let Ug=(()=>{let t=class{constructor(){this._papa=Ag}parse(t,e){return this._papa.parse(t,e)}unparse(t,e){return this._papa.unparse(t,e)}setLocalChunkSize(t){this._papa.LocalChunkSize=t}setRemoteChunkSize(t){this._papa.RemoteChunkSize=t}setDefaultDelimiter(t){this._papa.DefaultDelimiter=t}get badDelimiters(){return this._papa.BAD_DELIMITERS}get recordSeparator(){return this._papa.RECORD_SEP}get unitSeparator(){return this._papa.UNIT_SEP}get workersSupported(){return this._papa.WORKERS_SUPPORTED}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(p.Mb)({factory:function(){return new t},token:t,providedIn:"root"}),t})();function $g(t,e){1&t&&(p.Ub(0),p.Wb(1,"div",18),p.Rb(2,"mat-spinner"),p.Vb(),p.Tb())}function zg(t,e){if(1&t&&(p.Wb(0,"mat-option",34),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t),p.Db(1),p.Sc(" ","\t"===t?"TAB":t," ")}}function Ng(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",30),p.dc("click",(function(){return p.Dc(t),p.hc(),p.zc(1).click()}))("onFileDropped",(function(e){return p.Dc(t),p.hc(2).dndUploadFile(e)})),p.Wb(1,"div"),p.Qc(2),p.ic(3,"translate"),p.Wb(4,"mat-form-field",31),p.dc("click",(function(e){return p.Dc(t),e.stopPropagation()})),p.Wb(5,"mat-label"),p.Qc(6),p.ic(7,"translate"),p.Vb(),p.Wb(8,"mat-select",32),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc(2).currentDelimiter=e}))("click",(function(e){return p.Dc(t),e.stopPropagation()})),p.Oc(9,zg,2,2,"mat-option",33),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc(2);p.Db(2),p.Sc(" ",p.jc(3,4,"lang.dndFileCsvDesc")," "),p.Db(4),p.Rc(p.jc(7,6,"lang.delimiter")),p.Db(2),p.oc("ngModel",t.currentDelimiter),p.Db(1),p.oc("ngForOf",t.delimiters)}}function Hg(t,e){if(1&t&&(p.Wb(0,"mat-option",34),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t),p.Db(1),p.Sc(" ",t," ")}}function Bg(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-header-cell",43),p.Rb(1,"i",44),p.ic(2,"translate"),p.Qc(3,"\xa0"),p.Wb(4,"b",45),p.ic(5,"translate"),p.Qc(6),p.Vb(),p.Qc(7," \xa0"),p.Rb(8,"i",46),p.Qc(9,"\xa0 "),p.Rb(10,"i",47),p.ic(11,"translate"),p.Qc(12,"\xa0 "),p.Wb(13,"mat-form-field",48),p.dc("click",(function(e){return p.Dc(t),e.stopPropagation()})),p.ic(14,"translate"),p.Wb(15,"mat-select",49),p.dc("ngModelChange",(function(e){p.Dc(t);const i=p.hc().$implicit;return p.hc(3).associatedColmuns[i.id]=e}))("selectionChange",(function(e){p.Dc(t);const i=p.hc().$implicit;return p.hc(3).changeColumn(i,e.value)})),p.Rb(16,"mat-option",50),p.Oc(17,Hg,2,2,"mat-option",33),p.Vb(),p.Vb(),p.Wb(18,"mat-checkbox",51),p.dc("change",(function(e){p.Dc(t);const i=p.hc().$implicit;return p.hc(3).toggleEmptyMode(i.id,e.checked)})),p.ic(19,"translate"),p.Vb(),p.Vb()}if(2&t){const t=p.hc().$implicit,e=p.hc(3);p.Db(1),p.oc("title",p.jc(2,8,"lang.dbColumn")),p.Db(3),p.oc("title",p.jc(5,10,"lang.dbColumn")),p.Db(2),p.Rc(t.label),p.Db(4),p.oc("title",p.jc(11,12,"lang.csvColumn")),p.Db(3),p.oc("title",p.jc(14,14,"lang.csvColumn")),p.Db(2),p.oc("ngModel",e.associatedColmuns[t.id]),p.Db(2),p.oc("ngForOf",e.csvColumns),p.Db(1),p.oc("title",p.jc(19,16,"lang.toggleEmptyValues"))}}function Xg(t,e){1&t&&(p.Ub(0),p.Wb(1,"i",52),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Tb()),2&t&&(p.Db(2),p.Rc(p.jc(3,1,"lang.emptyValue")))}function Gg(t,e){if(1&t&&p.Qc(0),2&t){const t=p.hc().$implicit,e=p.hc().$implicit;p.Sc(" ",t[e.id]," ")}}function qg(t,e){if(1&t&&(p.Wb(0,"mat-cell",43),p.Oc(1,Xg,4,3,"ng-container",12),p.Oc(2,Gg,1,1,"ng-template",null,13,p.Pc),p.Vb()),2&t){const t=e.$implicit,i=p.zc(3),a=p.hc().$implicit,n=p.hc(3);p.Db(1),p.oc("ngIf",a.emptyValueMode&&n.functionsService.empty(t[a.id]))("ngIfElse",i)}}function Kg(t,e){if(1&t&&(p.Ub(0),p.Ub(1,40),p.Oc(2,Bg,20,18,"mat-header-cell",41),p.Oc(3,qg,4,2,"mat-cell",42),p.Tb(),p.Tb()),2&t){const t=e.$implicit;p.Db(1),p.oc("matColumnDef",t.id)}}function Jg(t,e){1&t&&p.Rb(0,"mat-header-row")}function Yg(t,e){1&t&&p.Rb(0,"mat-row")}function Zg(t,e){if(1&t&&(p.Wb(0,"mat-table",35,36),p.Oc(2,Kg,4,1,"ng-container",37),p.Oc(3,Jg,1,0,"mat-header-row",38),p.Oc(4,Yg,1,0,"mat-row",39),p.Vb()),2&t){const t=p.hc(2);p.Lc("width",300*t.contactColumns.length,"px"),p.oc("dataSource",t.dataSource),p.Db(2),p.oc("ngForOf",t.contactColumns),p.Db(1),p.oc("matHeaderRowDef",t.getcontactColumnsIds()),p.Db(1),p.oc("matRowDefColumns",t.getcontactColumnsIds())}}function tv(t,e){if(1&t){const t=p.Xb();p.Wb(0,"input",19,20),p.dc("change",(function(e){return p.Dc(t),p.hc().uploadCsv(e)})),p.Vb(),p.Oc(2,Ng,10,8,"div",21),p.Wb(3,"div",22),p.Wb(4,"div",23),p.Rb(5,"mat-paginator",24,25),p.Vb(),p.Vb(),p.Wb(7,"div",26),p.Wb(8,"div",27),p.Oc(9,Zg,5,6,"mat-table",28),p.Vb(),p.Vb(),p.Rb(10,"div",29),p.ic(11,"translate"),p.Rb(12,"div",29),p.ic(13,"translate")}if(2&t){const t=p.hc();p.Db(2),p.oc("ngIf",0===t.csvData.length),p.Db(3),p.oc("length",100)("hidePageSize",!0)("pageSize",10),p.Db(4),p.oc("ngIf",t.csvData.length>0),p.Db(1),p.oc("innerHTML",p.jc(11,7,"lang.infoImportcontacts"),p.Ec),p.Db(2),p.oc("innerHTML",p.jc(13,9,"lang.infoImportcontacts2"),p.Ec)}}function ev(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",53),p.dc("click",(function(){return p.Dc(t),p.hc().onSubmit()})),p.Qc(1),p.ic(2,"translate"),p.Vb()}if(2&t){const t=p.hc();p.oc("disabled",t.loading),p.Db(1),p.Rc(p.jc(2,2,"lang.validate"))}}let iv=(()=>{class t{constructor(t,e,i,a,n,o,s,c,r,l){this.translate=t,this.http=e,this.notify=i,this.functionsService=a,this.localStorage=n,this.headerService=o,this.dialog=s,this.dialogRef=c,this.papa=r,this.data=l,this.loading=!1,this.contactColumns=[{id:"id",label:this.translate.instant("lang.id"),emptyValueMode:!1},{id:"company",label:this.translate.instant("lang.contactsParameters_company"),emptyValueMode:!1},{id:"civility",label:this.translate.instant("lang.contactsParameters_civility"),emptyValueMode:!1},{id:"firstname",label:this.translate.instant("lang.contactsParameters_firstname"),emptyValueMode:!1},{id:"lastname",label:this.translate.instant("lang.contactsParameters_lastname"),emptyValueMode:!1},{id:"function",label:this.translate.instant("lang.contactsParameters_function"),emptyValueMode:!1},{id:"department",label:this.translate.instant("lang.contactsParameters_department"),emptyValueMode:!1},{id:"email",label:this.translate.instant("lang.contactsParameters_email"),emptyValueMode:!1},{id:"phone",label:this.translate.instant("lang.contactsParameters_phone"),emptyValueMode:!1},{id:"addressAdditional1",label:this.translate.instant("lang.contactsParameters_addressAdditional1"),emptyValueMode:!1},{id:"addressNumber",label:this.translate.instant("lang.contactsParameters_addressNumber"),emptyValueMode:!1},{id:"addressStreet",label:this.translate.instant("lang.contactsParameters_addressStreet"),emptyValueMode:!1},{id:"addressAdditional2",label:this.translate.instant("lang.contactsParameters_addressAdditional2"),emptyValueMode:!1},{id:"addressPostcode",label:this.translate.instant("lang.contactsParameters_addressPostcode"),emptyValueMode:!1},{id:"addressTown",label:this.translate.instant("lang.contactsParameters_addressTown"),emptyValueMode:!1},{id:"addressCountry",label:this.translate.instant("lang.contactsParameters_addressCountry"),emptyValueMode:!1}],this.csvColumns=[],this.delimiters=[";",",","\t"],this.currentDelimiter=";",this.associatedColmuns={},this.dataSource=new G.p(null),this.hasHeader=!0,this.csvData=[],this.contactData=[],this.countAll=0,this.countAdd=0,this.countUp=0}ngOnInit(){this.setConfiguration(),this.initCustomFields()}getcontactColumnsIds(){return this.contactColumns.map(t=>t.id)}initCustomFields(){this.http.get("../rest/contactsCustomFields").pipe(Object(l.a)(t=>t.customFields.map(t=>({id:"contactCustomField_"+t.id,label:t.label,type:t.type}))),Object(d.a)(t=>{this.contactColumns=this.contactColumns.concat(t)}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}toggleEmptyMode(t,e){this.contactColumns.filter(e=>e.id===t)[0].emptyValueMode=e}changeColumn(t,e){this.contactData=[];for(let i=this.hasHeader?1:0;i<this.csvData.length;i++){const a=this.csvData[i],n={};this.contactColumns.forEach(i=>{n[i.id]=t===i.id?a[this.csvColumns.filter(t=>t===e)[0]]:a[this.associatedColmuns[i.id]]}),this.contactData.push(n)}this.countAdd=this.csvData.filter((t,e)=>e>0&&this.functionsService.empty(t[this.associatedColmuns.id])).length,this.countUp=this.csvData.filter((t,e)=>e>0&&!this.functionsService.empty(t[this.associatedColmuns.id])).length,setTimeout(()=>{this.dataSource=new G.p(this.contactData),this.dataSource.paginator=this.paginator},0)}uploadCsv(t){if(t.target.files&&t.target.files[0]&&("text/csv"===t.target.files[0].type||"application/vnd.ms-excel"===t.target.files[0].type)){this.loading=!0;let e=[];const i=new FileReader;i.readAsText(t.target.files[0]),i.onload=t=>{this.papa.parse(t.target.result,{complete:t=>{e=t.data,e=e.filter(t=>t.length===e[0].length);let i=[],a={};this.setCsvColumns(e[0]),this.countAll=this.hasHeader?e.length-1:e.length;for(let n=0;n<e.length;n++)a={},i=e[n],i.forEach((t,e)=>{a[this.csvColumns[e]]=t}),this.csvData.push(a);this.initData(),this.countAdd=this.csvData.filter((t,e)=>e>0&&this.functionsService.empty(t[this.associatedColmuns.id])).length,this.countUp=this.csvData.filter((t,e)=>e>0&&!this.functionsService.empty(t[this.associatedColmuns.id])).length,this.localStorage.save("importContactFields_"+this.headerService.user.id,this.currentDelimiter),this.loading=!1}})}}else this.dialog.open(Y.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.notAllowedExtension")+" !",msg:this.translate.instant("lang.file")+" : <b>"+t.target.files[0].name+"</b>, "+this.translate.instant("lang.type")+" : <b>"+t.target.files[0].type+"</b><br/><br/><u>"+this.translate.instant("lang.allowedExtensions")+"</u> : <br/>text/csv"}})}setCsvColumns(t=null){this.csvColumns=t.filter(t=>this.functionsService.empty(t)).length>0?Object.keys(t).map((t,e)=>""+e):t}toggleHeader(){this.hasHeader=!this.hasHeader,this.countAll=this.hasHeader?this.csvData.length-1:this.csvData.length,this.hasHeader?(this.countAdd=this.csvData.filter((t,e)=>e>0&&this.functionsService.empty(t[this.associatedColmuns.id])).length,this.countUp=this.csvData.filter((t,e)=>e>0&&!this.functionsService.empty(t[this.associatedColmuns.id])).length):(this.countAdd=this.csvData.filter((t,e)=>this.functionsService.empty(t[this.associatedColmuns.id])).length,this.countUp=this.csvData.filter((t,e)=>!this.functionsService.empty(t[this.associatedColmuns.id])).length),this.initData()}initData(){this.contactData=[];for(let t=this.hasHeader?1:0;t<this.csvData.length;t++){const e=this.csvData[t],i={};this.contactColumns.forEach((t,a)=>{const n=this.csvColumns.indexOf(t.label);this.associatedColmuns[t.id]=n>-1?this.csvColumns[n]:"",i[t.id]=n>-1?e[this.csvColumns[n]]:""}),this.contactData.push(i)}setTimeout(()=>{this.dataSource=new G.p(this.contactData),this.dataSource.paginator=this.paginator},0)}dndUploadFile(t){this.uploadCsv({target:{files:[t[0]]}})}onSubmit(){const t=[];let e="";this.translate.get("lang.confirmImportContacts",{0:this.countAll}).subscribe(t=>{e=t+" ?<br/><br/>",e+=`<ul><li><b>${this.countAdd}</b> ${this.translate.instant("lang.additions")}</li><li><b>${this.countUp}</b> ${this.translate.instant("lang.modifications")}</li></ul>`});let i=this.dialog.open(q.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.import"),msg:e}});i.afterClosed().pipe(Object(K.a)(t=>"ok"===t),Object(d.a)(()=>{this.loading=!0,this.csvData.forEach((e,i)=>{if(this.hasHeader&&i>0||!this.hasHeader){const i={};this.contactColumns.forEach(t=>{i[t.id]=(!t.emptyValueMode||void 0!==e[this.associatedColmuns[t.id]]&&!this.functionsService.empty(e[this.associatedColmuns[t.id]]))&&(void 0===e[this.associatedColmuns[t.id]]?"":"checkbox"===t.type?this.functionsService.empty(e[this.associatedColmuns[t.id]])?[]:e[this.associatedColmuns[t.id]].split("\n"):e[this.associatedColmuns[t.id]])}),t.push(i)}})}),Object(J.a)(()=>this.http.put("../rest/contacts/import",{contacts:t})),Object(d.a)(t=>{let e="";t.errors.count>0&&(e+=`<br/>${t.errors.count} ${this.translate.instant("lang.withErrors")}  : <ul>`,t.errors.details.forEach(t=>{e+=`<li> ${this.translate.instant("lang."+t.lang,{0:t.langParam})} (${this.translate.instant("lang.line")} : ${this.hasHeader?t.index+2:t.index+1})</li>`}),e+="</ul>"),i=this.dialog.open(Y.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.import"),msg:"<b>"+t.success+"</b> / <b>"+this.countAll+"</b> "+this.translate.instant("lang.importedContacts")+"."+e}})}),Object(J.a)(()=>i.afterClosed()),Object(d.a)(()=>{this.dialogRef.close("success")}),Object(b.a)(t=>(this.loading=!1,this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}setConfiguration(){null!==this.localStorage.get("importContactFields_"+this.headerService.user.id)&&(this.currentDelimiter=this.localStorage.get("importContactFields_"+this.headerService.user.id))}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(D.a),p.Qb(Z.a),p.Qb(m.a),p.Qb(z.b),p.Qb(z.h),p.Qb(Ug),p.Qb(z.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&p.Xc(N.a,!0),2&t&&p.yc(i=p.ec())&&(e.paginator=i.first)},decls:37,vars:28,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"import-tool"],[2,"flex","1"],["color","primary",3,"checked","change"],[2,"flex","1","text-align","center"],["color","primary",1,"fa","fa-users"],["color","primary"],["color","primary",1,"fa","fa-user-plus"],[2,"flex","1","text-align","right"],["color","primary",1,"fa","fa-user-edit"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"divider-modal"],["mat-dialog-actions","",1,"actions"],["mat-raised-button","","mat-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","mat-button","",3,"disabled","mat-dialog-close"],[1,"loader"],["type","file","name","files[]","id","uploadFile","accept",".csv",2,"display","none",3,"change"],["uploadFile",""],["appUploadFileDragDrop","","class","dndFile",3,"click","onFileDropped",4,"ngIf"],[1,"row",2,"margin","0px"],[1,"col-md-12"],[3,"length","hidePageSize","pageSize"],["paginator",""],[2,"width","100%","box-shadow","inset 0px 0px 5px 0px rgba(0,0,0,0.75)","padding","10px"],[2,"overflow","auto"],[3,"dataSource","width",4,"ngIf"],[1,"alert-message","alert-message-info",2,"min-width","100%",3,"innerHTML"],["appUploadFileDragDrop","",1,"dndFile",3,"click","onFileDropped"],["appearance","outline",2,"font-size","14px",3,"click"],[3,"ngModel","ngModelChange","click"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"dataSource"],["table",""],[4,"ngFor","ngForOf"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["style","padding-left: 5px;padding-right: 5px;",4,"matHeaderCellDef"],["style","padding-left: 5px;padding-right: 5px;",4,"matCellDef"],[2,"padding-left","5px","padding-right","5px"],["color","primary",1,"fas","fa-database",3,"title"],["color","primary",3,"title"],[1,"fas","fa-arrows-alt-h"],[1,"fas","fa-file-csv",3,"title"],[2,"width","80px !important",3,"title","click"],[3,"ngModel","ngModelChange","selectionChange"],["value",""],["color","primary",3,"title","change"],[2,"opacity","0.5"],["mat-raised-button","","mat-button","","color","primary",3,"disabled","click"]],template:function(t,e){if(1&t&&(p.Wb(0,"div",0),p.Wb(1,"h1",1),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"div",2),p.Wb(5,"mat-toolbar",3),p.Wb(6,"span",4),p.Wb(7,"mat-slide-toggle",5),p.dc("change",(function(){return e.toggleHeader()})),p.Qc(8),p.ic(9,"translate"),p.Vb(),p.Vb(),p.Wb(10,"span",6),p.Rb(11,"i",7),p.Qc(12),p.ic(13,"translate"),p.Wb(14,"b",8),p.Qc(15),p.Vb(),p.Vb(),p.Wb(16,"span",6),p.Rb(17,"i",9),p.Qc(18),p.ic(19,"translate"),p.Wb(20,"b",8),p.Qc(21),p.Vb(),p.Vb(),p.Wb(22,"span",10),p.Rb(23,"i",11),p.Qc(24),p.ic(25,"translate"),p.Wb(26,"b",8),p.Qc(27),p.Vb(),p.Vb(),p.Vb(),p.Oc(28,$g,3,0,"ng-container",12),p.Oc(29,tv,14,11,"ng-template",null,13,p.Pc),p.Vb(),p.Rb(31,"span",14),p.Wb(32,"div",15),p.Oc(33,ev,3,4,"button",16),p.Wb(34,"button",17),p.Qc(35),p.ic(36,"translate"),p.Vb(),p.Vb(),p.Vb()),2&t){const t=p.zc(30);p.Db(2),p.Rc(p.jc(3,16,"lang.importContacts")),p.Db(3),p.Ib("hide",0===e.csvData.length||e.loading),p.Db(2),p.oc("checked",e.hasHeader),p.Db(1),p.Sc(" ",p.jc(9,18,"lang.csvHeader")," "),p.Db(4),p.Sc("\xa0",p.jc(13,20,"lang.contactsOfFile")," : "),p.Db(3),p.Rc(e.countAll),p.Db(3),p.Sc("\xa0",p.jc(19,22,"lang.additions")," : "),p.Db(3),p.Rc(e.countAdd),p.Db(3),p.Sc("\xa0",p.jc(25,24,"lang.modifications")," : "),p.Db(3),p.Rc(e.countUp),p.Db(1),p.oc("ngIf",e.loading)("ngIfElse",t),p.Db(5),p.oc("ngIf",e.csvData.length>0),p.Db(1),p.oc("disabled",e.loading),p.Db(1),p.Rc(p.jc(36,26,"lang.cancel"))}},directives:[z.i,z.f,tt.a,et.a,O.t,z.c,R.b,z.d,I.c,N.a,it.a,S.c,S.g,at.a,c.u,c.x,O.s,k.p,G.o,G.k,G.n,G.c,G.i,G.b,G.h,Pe.a,G.a,G.j,G.m],pipes:[h.d],styles:[".loader[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center;justify-content:center}.hide[_ngcontent-%COMP%]{display:none}.import-tool[_ngcontent-%COMP%]{font-size:14px}.dndFile[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;margin:0;justify-content:center;font-size:30px;opacity:.5!important;cursor:pointer}"]}),t})();const av=["snav2"],nv=["adminMenuTemplate"],ov=["tableContactListSort"];function sv(t,e){if(1&t&&(p.Wb(0,"a",47),p.Rb(1,"mat-icon",48),p.Wb(2,"p",42),p.Qc(3),p.Vb(),p.Vb()),2&t){const t=e.$implicit;p.Ib("active",t.current),p.oc("routerLink",t.route),p.Db(1),p.Fb(t.icon),p.Db(2),p.Sc(" ",t.label," ")}}function cv(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-nav-list"),p.Wb(1,"h3",39),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"a",40),p.Rb(5,"mat-icon",41),p.Wb(6,"p",42),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Wb(9,"a",43),p.dc("click",(function(){return p.Dc(t),p.hc().openContactExport()})),p.Rb(10,"mat-icon",44),p.Wb(11,"p",42),p.Qc(12),p.ic(13,"translate"),p.Vb(),p.Vb(),p.Wb(14,"a",43),p.dc("click",(function(){return p.Dc(t),p.hc().openContactImportModal()})),p.Rb(15,"mat-icon",45),p.Wb(16,"p",42),p.Qc(17),p.ic(18,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Rb(19,"mat-divider"),p.Wb(20,"mat-nav-list"),p.Oc(21,sv,4,6,"a",46),p.Vb()}if(2&t){const t=p.hc();p.Db(2),p.Rc(p.jc(3,5,"lang.actions")),p.Db(5),p.Sc(" ",p.jc(8,7,"lang.add")," "),p.Db(5),p.Sc(" ",p.jc(13,9,"lang.exportContacts")," "),p.Db(5),p.Sc(" ",p.jc(18,11,"lang.importContacts")," "),p.Db(4),p.oc("ngForOf",t.subMenus)}}function rv(t,e){1&t&&p.Rb(0,"mat-spinner")}function lv(t,e){if(1&t&&(p.Wb(0,"div",49),p.Oc(1,rv,1,0,"mat-spinner",50),p.Vb()),2&t){const t=p.hc();p.Db(1),p.oc("ngIf",t.isLoadingResults)}}function dv(t,e){if(1&t&&p.Rb(0,"mat-header-cell",51),2&t){const t=p.hc();p.Ib("hide-for-mobile",t.appService.getViewMode())}}function bv(t,e){if(1&t&&(p.Wb(0,"mat-cell",52),p.Rb(1,"i",53),p.Vb()),2&t){const t=e.$implicit,i=p.hc();p.Ib("hide-for-mobile",i.appService.getViewMode()),p.Db(1),p.Gb("fas fa-circle threshold_",t.filling.thresholdLevel,""),p.oc("title",i.translate.instant("lang.contactFilledTo")+" "+t.filling.rate+"%")}}function pv(t,e){1&t&&(p.Wb(0,"mat-header-cell",54),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.firstname")))}function hv(t,e){if(1&t&&(p.Wb(0,"mat-cell",55),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.firstname," ")}}function uv(t,e){1&t&&(p.Wb(0,"mat-header-cell",54),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.lastname")))}function mv(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.lastname," ")}}function fv(t,e){1&t&&(p.Wb(0,"mat-header-cell",54),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc("",p.jc(2,1,"lang.contactsParameters_company")," "))}function gv(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.company," ")}}function vv(t,e){if(1&t&&(p.Wb(0,"mat-header-cell",56),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=p.hc();p.Ib("hide-for-mobile",t.appService.getViewMode()),p.Db(1),p.Sc(" ",p.jc(2,3,"lang.address"),"")}}function yv(t,e){if(1&t&&(p.Wb(0,"mat-cell",56),p.Qc(1),p.Vb()),2&t){const t=e.$implicit,i=p.hc();p.Ib("hide-for-mobile",i.appService.getViewMode()),p.Db(1),p.Sc(" ",t.formatedAddress," ")}}function Dv(t,e){1&t&&p.Rb(0,"mat-header-cell")}function Vv(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",62),p.dc("click",(function(e){p.Dc(t);const i=p.hc().$implicit,a=p.hc();return e.stopPropagation(),a.toggleContact(i)})),p.Rb(1,"mat-icon",63),p.Vb()}if(2&t){const t=p.hc(2);p.oc("title",t.translate.instant("lang.suspend"))}}function Cv(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",64),p.dc("click",(function(e){p.Dc(t);const i=p.hc().$implicit,a=p.hc();return e.stopPropagation(),a.toggleContact(i)})),p.Rb(1,"mat-icon",65),p.Vb()}if(2&t){const t=p.hc(2);p.oc("title",t.translate.instant("lang.authorize"))}}function Mv(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-cell",57),p.Oc(1,Vv,2,1,"button",58),p.Oc(2,Cv,2,1,"button",59),p.Wb(3,"button",60),p.dc("click",(function(i){p.Dc(t);const a=e.$implicit,n=p.hc();return i.stopPropagation(),n.deleteContact(a)})),p.Rb(4,"mat-icon",61),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit,i=p.hc();p.Db(1),p.oc("ngIf",t.enabled),p.Db(1),p.oc("ngIf",!t.enabled),p.Db(1),p.oc("title",i.translate.instant("lang.delete"))}}function Wv(t,e){1&t&&p.Rb(0,"mat-header-row")}function xv(t,e){1&t&&p.Rb(0,"mat-row",66),2&t&&p.qc("routerLink","/administration/contacts/list/",e.$implicit.id,"")}const Ov=function(){return["/rest/autocomplete/contacts"]};function _v(t,e){if(1&t){const t=p.Xb();p.Wb(0,"plugin-autocomplete",14),p.dc("triggerEvent",(function(e){return p.Dc(t),p.hc().setRedirectUser(e)})),p.Vb()}if(2&t){const t=p.hc();p.oc("labelPlaceholder",t.translate.instant("lang.contactReplacement"))("labelList",t.translate.instant("lang.availableContacts"))("routeDatas",p.uc(4,Ov))("targetSearchKey","contact")}}function Sv(t,e){1&t&&(p.Wb(0,"span"),p.Wb(1,"em"),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Vb()),2&t&&(p.Db(2),p.Rc(p.jc(3,1,"lang.deleteContactInformations")))}function wv(t,e){1&t&&(p.Wb(0,"span"),p.Wb(1,"em"),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Vb()),2&t&&(p.Db(2),p.Rc(p.jc(3,1,"lang.reaffectContactInformations")))}function Iv(t,e){if(1&t&&(p.Wb(0,"div",15),p.Oc(1,Sv,4,3,"span",16),p.Oc(2,wv,4,3,"span",16),p.Vb()),2&t){const t=p.hc();p.Db(1),p.oc("ngIf","delete"==t.processMode),p.Db(1),p.oc("ngIf","reaffect"==t.processMode)}}let jv=(()=>{class t{constructor(t,e,i,a,n,o,s,r,l){this.translate=t,this.http=e,this.notify=i,this.headerService=a,this.appService=n,this.dialog=o,this.functions=s,this.adminService=r,this.viewContainerRef=l,this.loading=!1,this.filtersChange=new p.o,this.displayedColumnsContact=["filling","firstname","lastname","company","formatedAddress","actions"],this.isLoadingResults=!0,this.routeUrl="../rest/contacts",this.resultsLength=0,this.searchContact=new c.i,this.search="",this.destroy$=new ub.a,this.subMenus=[{icon:"fa fa-book",route:"/administration/contacts/list",label:this.translate.instant("lang.contactsList"),current:!0},{icon:"fa fa-code",route:"/administration/contacts/contactsCustomFields",label:this.translate.instant("lang.customFieldsAdmin"),current:!1},{icon:"fa fa-cog",route:"/administration/contacts/contacts-parameters",label:this.translate.instant("lang.contactsParameters"),current:!1},{icon:"fa fa-users",route:"/administration/contacts/contacts-groups",label:this.translate.instant("lang.contactsGroups"),current:!1},{icon:"fas fa-magic",route:"/administration/contacts/duplicates",label:this.translate.instant("lang.duplicatesContactsAdmin"),current:!1}]}ngOnInit(){this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.adminService.setAdminId("admin_contacts_list"),this.functions.empty(this.adminService.getFilter())&&this.adminService.saveDefaultFilter(),this.initContactList(),this.initAutocompleteContacts()}initContactList(){this.resultListDatabase=new kv(this.http),this.paginator.pageIndex=this.adminService.getFilter("page"),this.sort.active=this.adminService.getFilter("sort"),this.sort.direction=this.adminService.getFilter("sortDirection"),this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),Object(mb.a)(this.sort.sortChange,this.paginator.page,this.filtersChange).pipe(Object(fb.a)(this.destroy$),Object(r.a)({}),Object(gb.a)(()=>(this.adminService.saveFilter({sort:this.sort.active,sortDirection:this.sort.direction,page:this.paginator.pageIndex,field:this.adminService.getFilter("field")}),this.search=this.adminService.getFilter("field"),this.isLoadingResults=!0,this.resultListDatabase.getRepoIssues(this.sort.active,this.sort.direction,this.paginator.pageIndex,this.routeUrl,this.search))),Object(l.a)(t=>(this.isLoadingResults=!1,t=this.processPostData(t),this.resultsLength=t.count,this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.contacts").toLowerCase(),"",""),t.contacts)),Object(b.a)(t=>(this.notify.handleErrors(t),this.isLoadingResults=!1,Object(s.a)([])))).subscribe(t=>this.data=t)}processPostData(t){return t.contacts.forEach(t=>{let e=[];e.push(t.addressNumber),e.push(t.addressStreet),e.push(t.addressPostcode),e.push(t.addressTown),e.push(t.addressCountry),t.formatedAddress=e.filter(t=>!this.isEmptyValue(t)).join(" ")}),this.displayedColumnsContact=this.functions.empty(t.contacts[0])||this.functions.empty(t.contacts[0].filling)?["firstname","lastname","company","formatedAddress","actions"]:["filling","firstname","lastname","company","formatedAddress","actions"],t}deleteContact(t){t.isUsed?(this.dialogRef=this.dialog.open(Rv,{panelClass:"maarch-modal",autoFocus:!1}),this.dialogRef.afterClosed().subscribe(e=>{if(void 0!==e&&""!=e){var i="";"reaffect"==e.processMode&&(i="?redirect="+e.contactId),this.http.request("DELETE",`../rest/contacts/${t.id}${i}`).subscribe(()=>{this.refreshDao(),this.notify.success(this.translate.instant("lang.contactDeleted"))},t=>{this.notify.error(t.error.errors)})}this.dialogRef=null})):this.dialog.open(q.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete"),msg:this.translate.instant("lang.confirmAction")}}).afterClosed().pipe(Object(K.a)(t=>"ok"===t),Object(J.a)(()=>this.http.delete("../rest/contacts/"+t.id)),Object(d.a)(t=>{this.refreshDao(),this.notify.success(this.translate.instant("lang.contactDeleted"))}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(s.a)(!1)))).subscribe()}toggleContact(t){this.dialog.open(q.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.suspend"),msg:this.translate.instant("lang.confirmAction")}}).afterClosed().pipe(Object(K.a)(t=>"ok"===t),Object(J.a)(()=>this.http.put(`../rest/contacts/${t.id}/activation`,{enabled:!t.enabled})),Object(d.a)(e=>{this.refreshDao(),this.notify.success(this.translate.instant(1==!t.enabled?"lang.contactEnabled":"lang.contactDisabled"))}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(s.a)(!1)))).subscribe()}openContactExport(){this.dialog.open(Eg,{panelClass:"maarch-modal",width:"800px",autoFocus:!1})}openContactImportModal(){this.dialog.open(iv,{disableClose:!0,width:"99vw",maxWidth:"99vw",panelClass:"maarch-full-height-modal"}).afterClosed().pipe(Object(K.a)(t=>"success"===t),Object(d.a)(()=>{this.refreshDao()}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(s.a)(!1)))).subscribe()}refreshDao(){this.filtersChange.emit()}initAutocompleteContacts(){this.searchContact=new c.i(this.adminService.getFilter("field")),this.searchContact.valueChanges.pipe(Object(d.a)(t=>{this.adminService.setFilter("field",t),this.adminService.saveFilter(this.adminService.getFilter()),0===t.length&&(this.search="",this.paginator.pageIndex=0,this.refreshDao())}),Object(dl.a)(300),Object(K.a)(t=>t.length>2),Object(Ip.a)(),Object(d.a)(t=>{this.search=t,this.paginator.pageIndex=0,this.refreshDao()})).subscribe()}isEmptyValue(t){return null===t||(Array.isArray(t)?!(t.length>0):""===String(t))}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a),p.Qb(z.b),p.Qb(D.a),p.Qb(St),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["contact-list"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(av,!0),p.Kc(nv,!0),p.Kc(N.a,!0),p.Kc(ov,!0)),2&t&&(p.yc(i=p.ec())&&(e.sidenavRight=i.first),p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.paginator=i.first),p.yc(i=p.ec())&&(e.sort=i.first))},decls:49,vars:19,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["class","example-loading-shade",4,"ngIf"],[1,"table-head"],[1,"table-head-result"],["floatLabel","never",2,"font-size","13px"],["type","text","matInput","","maxlength","128",3,"placeholder","formControl","click"],["autoCompleteInput",""],[1,"table-head-tool"],[1,"paginatorResultList",3,"length","hidePageSize","pageSize"],["paginatorContactList",""],[2,"height","90%","overflow","auto","position","absolute","width","100%"],["id","contact-list","matSort","","matSortDisableClear","",2,"width","100%",3,"dataSource"],["tableContactListSort","matSort"],["matColumnDef","filling"],["style","flex: initial;width: 60px;",3,"hide-for-mobile",4,"matHeaderCellDef"],["mat-cell","","style","flex: initial;width: 60px;",3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","firstname"],["mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","lastname"],[4,"matCellDef"],["matColumnDef","company"],["matColumnDef","formatedAddress"],["style","flex: 2;",3,"hide-for-mobile",4,"matHeaderCellDef"],["style","flex: 2;",3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor: pointer;",3,"routerLink",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/contacts/list/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],["mat-list-item","",3,"click"],["color","primary","mat-list-icon","",1,"fa","fa-file-export"],["color","primary","mat-list-icon","",1,"fas","fa-file-import"],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],[1,"example-loading-shade"],[4,"ngIf"],[2,"flex","initial","width","60px"],["mat-cell","",2,"flex","initial","width","60px"],[3,"title"],["mat-sort-header",""],["mat-cell",""],[2,"flex","2"],[2,"justify-content","flex-end"],["mat-icon-button","","color","primary",3,"title","click",4,"ngIf"],["mat-icon-button","","color","accent",3,"title","click",4,"ngIf"],["mat-icon-button","","color","warn","data-toggle","modal","data-target","#changeDiffListDest",3,"title","click"],[1,"fa","fa-trash-alt","fa-2x"],["mat-icon-button","","color","primary",3,"title","click"],["aria-hidden","true",1,"fa","fa-pause","fa-2x"],["mat-icon-button","","color","accent",3,"title","click"],["aria-hidden","true",1,"fa","fa-check","fa-2x"],[2,"cursor","pointer",3,"routerLink"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,cv,22,13,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,lv,2,1,"div",9),p.Wb(14,"div",10),p.Wb(15,"div",11),p.Wb(16,"mat-form-field",12),p.Wb(17,"input",13,14),p.dc("click",(function(t){return t.stopPropagation()})),p.Vb(),p.Vb(),p.Vb(),p.Wb(19,"div",15),p.Rb(20,"mat-paginator",16,17),p.Vb(),p.Vb(),p.Wb(22,"div",18),p.Wb(23,"mat-table",19,20),p.Ub(25,21),p.Oc(26,dv,1,2,"mat-header-cell",22),p.Oc(27,bv,2,6,"mat-cell",23),p.Tb(),p.Ub(28,24),p.Oc(29,pv,3,3,"mat-header-cell",25),p.Oc(30,hv,2,1,"mat-cell",26),p.Tb(),p.Ub(31,27),p.Oc(32,uv,3,3,"mat-header-cell",25),p.Oc(33,mv,2,1,"mat-cell",28),p.Tb(),p.Ub(34,29),p.Oc(35,fv,3,3,"mat-header-cell",25),p.Oc(36,gv,2,1,"mat-cell",28),p.Tb(),p.Ub(37,30),p.Oc(38,vv,3,5,"mat-header-cell",31),p.Oc(39,yv,2,3,"mat-cell",32),p.Tb(),p.Ub(40,33),p.Oc(41,Dv,1,0,"mat-header-cell",34),p.Oc(42,Mv,5,3,"mat-cell",35),p.Tb(),p.Oc(43,Wv,1,0,"mat-header-row",36),p.Oc(44,xv,1,1,"mat-row",37),p.Vb(),p.Wb(45,"div",38),p.Qc(46),p.ic(47,"translate"),p.Vb(),p.Vb(),p.Rb(48,"div",10),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.isLoadingResults),p.Db(4),p.oc("placeholder",e.translate.instant("lang.filterBy"))("formControl",e.searchContact),p.Db(3),p.oc("length",e.resultsLength)("hidePageSize",!0)("pageSize",10),p.Db(3),p.oc("dataSource",e.data),p.Db(20),p.oc("matHeaderRowDef",e.displayedColumnsContact),p.Db(1),p.oc("matRowDefColumns",e.displayedColumnsContact),p.Db(2),p.Tc(" ",e.resultsLength," ",p.jc(47,17,"lang.contactsAlt"),""))},directives:[C.e,C.f,M.a,x.a,O.t,S.c,w.b,c.d,c.p,c.u,c.j,N.a,G.o,H.a,G.c,G.i,G.b,G.k,G.n,wt.h,wt.g,wt.d,o.f,It.a,wt.c,k.l,_.a,O.s,I.c,G.h,G.a,H.b,R.b,G.j,G.m,o.d],pipes:[h.d],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}.paginatorResultList[_ngcontent-%COMP%]    .mat-paginator-range-label{justify-content:flex-end;display:flex}.threshold_first[_ngcontent-%COMP%]{color:#e81c2b}.threshold_second[_ngcontent-%COMP%]{color:#f4891e}.threshold_third[_ngcontent-%COMP%]{color:#0aa34f}"]}),t})();class kv{constructor(t){this.http=t}getRepoIssues(t,e,i,a,n){return this.http.get(`${a}?limit=10&offset=${10*i}&order=${e}&orderBy=${t}&search=${n}`)}}let Rv=(()=>{class t{constructor(t,e,i,a,n){this.translate=t,this.http=e,this.data=i,this.dialogRef=a,this.notify=n,this.modalTitle=this.translate.instant("lang.confirmAction"),this.processMode="delete"}ngOnInit(){}setRedirectUser(t){this.redirectContact=t.id}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(z.a),p.Qb(z.h),p.Qb(y.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],decls:29,vars:22,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["redirectConfForm","ngForm"],[1,"modal-body"],["role","alert",1,"alert-message","alert-message-danger"],[1,"input-group"],["id","processMode","name","processMode","color","primary","required","",2,"display","inline-flex","flex-direction","column",3,"ngModel","ngModelChange"],["value","delete","color","primary"],["value","reaffect","color","primary"],["singleMode","","required","",3,"labelPlaceholder","labelList","routeDatas","targetSearchKey","triggerEvent",4,"ngIf"],["class","alert-message alert-message-info","role","alert",4,"ngIf"],[1,"divider-modal"],["mat-raised-button","","color","primary","type","submit",3,"disabled","click"],["color","","mat-raised-button","",1,"actions",3,"click"],["singleMode","","required","",3,"labelPlaceholder","labelList","routeDatas","targetSearchKey","triggerEvent"],["role","alert",1,"alert-message","alert-message-info"],[4,"ngIf"]],template:function(t,e){if(1&t&&(p.Wb(0,"div",0),p.Wb(1,"h1",1),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"mat-dialog-content"),p.Wb(5,"form",null,2),p.Wb(7,"div",3),p.Wb(8,"div",4),p.Qc(9),p.ic(10,"translate"),p.Vb(),p.Wb(11,"div",5),p.Wb(12,"mat-radio-group",6),p.dc("ngModelChange",(function(t){return e.processMode=t})),p.Wb(13,"mat-radio-button",7),p.Qc(14),p.ic(15,"translate"),p.Vb(),p.Wb(16,"mat-radio-button",8),p.Qc(17),p.ic(18,"translate"),p.Vb(),p.Vb(),p.Oc(19,_v,1,5,"plugin-autocomplete",9),p.Oc(20,Iv,3,2,"div",10),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Rb(21,"span",11),p.Wb(22,"mat-dialog-actions"),p.Wb(23,"button",12),p.dc("click",(function(){return e.dialogRef.close({contactId:e.redirectContact,processMode:e.processMode})})),p.Qc(24),p.ic(25,"translate"),p.Vb(),p.Wb(26,"button",13),p.dc("click",(function(){return e.dialogRef.close("")})),p.Qc(27),p.ic(28,"translate"),p.Vb(),p.Vb(),p.Vb()),2&t){const t=p.zc(6);p.Db(2),p.Rc(p.jc(3,10,"lang.contactsReassign")),p.Db(7),p.Sc(" ",p.jc(10,12,"lang.contactLinkedToMails")," "),p.Db(3),p.oc("ngModel",e.processMode),p.Db(2),p.Sc(" ",p.jc(15,14,"lang.deleteContactwithtoutReassign")," "),p.Db(3),p.Sc(" ",p.jc(18,16,"lang.reaffectContactRedirect")," "),p.Db(2),p.oc("ngIf","reaffect"==e.processMode),p.Db(1),p.oc("ngIf",e.processMode),p.Db(3),p.oc("disabled",!t.form.valid||!e.redirectContact&&"reaffect"==e.processMode),p.Db(1),p.Rc(p.jc(25,18,"lang.delete")),p.Db(3),p.Rc(p.jc(28,20,"lang.cancel"))}},directives:[z.i,z.f,c.K,c.v,c.w,Ae.b,c.F,c.u,c.x,Ae.a,O.t,z.c,R.b,Rt.a],pipes:[h.d],encapsulation:2}),t})();const Tv=["snav2"],Pv=["adminMenuTemplate"];function Qv(t,e){if(1&t&&(p.Wb(0,"a",16),p.Rb(1,"mat-icon",17),p.Wb(2,"p",18),p.Qc(3),p.Vb(),p.Vb()),2&t){const t=e.$implicit;p.Ib("active",t.current),p.oc("routerLink",t.route),p.Db(1),p.Fb(t.icon),p.Db(2),p.Sc(" ",t.label," ")}}function Fv(t,e){if(1&t&&(p.Wb(0,"mat-nav-list"),p.Oc(1,Qv,4,6,"a",15),p.Vb()),2&t){const t=p.hc();p.Db(1),p.oc("ngForOf",t.subMenus)}}function Lv(t,e){if(1&t&&p.Rb(0,"div",19),2&t){const t=p.hc();p.oc("innerHTML",t.translate.instant("lang.noCustomFieldInfo"),p.Ec)}}function Ev(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",35),p.dc("click",(function(){p.Dc(t);const e=p.hc(2).$implicit;return p.hc().sortValues(e)})),p.Rb(1,"mat-icon",36),p.Vb()}if(2&t){const t=p.hc(3);p.oc("title",t.translate.instant("lang.orderValues"))}}function Av(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-form-field",37),p.Wb(1,"input",38),p.dc("ngModelChange",(function(i){return p.Dc(t),e.$implicit.label=i})),p.Vb(),p.Wb(2,"button",39),p.dc("click",(function(){p.Dc(t);const i=e.index,a=p.hc(2).$implicit;return p.hc().removeValue(a,i)})),p.Rb(3,"mat-icon",40),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit,i=p.hc(3);p.Db(1),p.oc("ngModel",t.label)("placeholder",i.translate.instant("lang.newValue")),p.Db(1),p.oc("title",i.translate.instant("lang.delete"))}}function Uv(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",21),p.Wb(1,"mat-expansion-panel",28),p.Wb(2,"mat-expansion-panel-header"),p.Wb(3,"mat-panel-title",29),p.Qc(4),p.ic(5,"translate"),p.Vb(),p.Vb(),p.Wb(6,"div",30),p.Wb(7,"div",31),p.Wb(8,"button",32),p.dc("click",(function(){p.Dc(t);const e=p.hc().index;return p.hc().addValue(e)})),p.Qc(9),p.ic(10,"translate"),p.Vb(),p.Vb(),p.Wb(11,"div"),p.Oc(12,Ev,2,1,"button",33),p.Vb(),p.Vb(),p.Wb(13,"div",21),p.Oc(14,Av,4,3,"mat-form-field",34),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc().$implicit;p.Db(3),p.oc("matBadge",t.values.length),p.Db(1),p.Sc(" ",p.jc(5,5,"lang.valuesList")," "),p.Db(5),p.Sc(" ",p.jc(10,7,"lang.addValue"),""),p.Db(3),p.oc("ngIf",t.values.length>0),p.Db(2),p.oc("ngForOf",t.values)}}const $v=function(){return["select","radio","checkbox"]};function zv(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-expansion-panel"),p.Wb(1,"mat-expansion-panel-header"),p.Wb(2,"mat-panel-title",20),p.Qc(3),p.Vb(),p.Wb(4,"mat-panel-description"),p.Qc(5),p.ic(6,"translate"),p.Vb(),p.Vb(),p.Wb(7,"div",21),p.Wb(8,"mat-form-field"),p.Wb(9,"input",22),p.dc("ngModelChange",(function(i){return p.Dc(t),e.$implicit.id=i})),p.Vb(),p.Vb(),p.Wb(10,"mat-form-field"),p.Wb(11,"input",23),p.dc("ngModelChange",(function(i){return p.Dc(t),e.$implicit.label=i})),p.Vb(),p.Vb(),p.Vb(),p.Oc(12,Uv,15,9,"div",24),p.Wb(13,"div",25),p.Wb(14,"button",26),p.dc("click",(function(){p.Dc(t);const i=e.$implicit,a=e.index;return p.hc().updateCustomField(i,a)})),p.Qc(15),p.ic(16,"translate"),p.Vb(),p.Wb(17,"button",27),p.dc("click",(function(){p.Dc(t);const i=e.index;return p.hc().removeCustomField(i)})),p.Qc(18),p.ic(19,"translate"),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit,i=e.index,a=p.hc();p.Db(3),p.Sc(" ",t.label," "),p.Db(2),p.Sc(" ",p.jc(6,12,"lang."+t.type+"Input")," "),p.Db(4),p.oc("ngModel",t.id)("placeholder",a.translate.instant("lang.technicalId"))("value",t.id),p.Db(2),p.oc("ngModel",t.label)("placeholder",a.translate.instant("lang.label"))("value",t.label),p.Db(1),p.oc("ngIf",p.uc(18,$v).indexOf(t.type)>-1),p.Db(2),p.oc("disabled",a.isModified(t,i)),p.Db(1),p.Rc(p.jc(16,14,"lang.update")),p.Db(3),p.Rc(p.jc(19,16,"lang.delete"))}}function Nv(t,e){if(1&t&&(p.Ub(0),p.Wb(1,"mat-form-field",47),p.Rb(2,"textarea",48),p.Vb(),p.Tb()),2&t){const t=p.hc().$implicit,e=p.hc();p.Db(2),p.oc("placeholder",e.translate.instant("lang."+t.type+"Input"))}}function Hv(t,e){if(1&t&&(p.Ub(0),p.Wb(1,"mat-form-field",47),p.Rb(2,"input",49),p.Vb(),p.Tb()),2&t){const t=p.hc().$implicit,e=p.hc();p.Db(2),p.oc("placeholder",e.translate.instant("lang."+t.type+"Input"))}}function Bv(t,e){if(1&t&&(p.Wb(0,"mat-option",52),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t),p.Db(1),p.Tc(" ",p.jc(2,3,"lang.choice")," ",t," ")}}function Xv(t,e){if(1&t&&(p.Ub(0),p.Wb(1,"mat-form-field",47),p.Wb(2,"mat-select",50),p.Oc(3,Bv,3,5,"mat-option",51),p.Vb(),p.Vb(),p.Tb()),2&t){const t=p.hc().$implicit,e=p.hc();p.Db(2),p.oc("placeholder",e.translate.instant("lang."+t.type+"Input")),p.Db(1),p.oc("ngForOf",e.sampleIncrement)}}function Gv(t,e){if(1&t){const t=p.Xb();p.Ub(0),p.Wb(1,"mat-form-field",47),p.Wb(2,"input",53),p.dc("click",(function(){return p.Dc(t),p.zc(5).open()})),p.Vb(),p.Rb(3,"mat-datepicker-toggle",54),p.Rb(4,"mat-datepicker",null,55),p.Vb(),p.Tb()}if(2&t){const t=p.zc(5),e=p.hc().$implicit,i=p.hc();p.Db(2),p.oc("matDatepicker",t)("placeholder",i.translate.instant("lang."+e.type+"Input")),p.Db(1),p.oc("for",t)}}function qv(t,e){if(1&t&&(p.Wb(0,"mat-radio-button",52),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t),p.Db(1),p.Tc(" ",p.jc(2,3,"lang.choice")," ",t," ")}}function Kv(t,e){if(1&t&&(p.Ub(0),p.Wb(1,"mat-radio-group",56),p.Oc(2,qv,3,5,"mat-radio-button",51),p.Vb(),p.Tb()),2&t){const t=p.hc(2);p.Db(2),p.oc("ngForOf",t.sampleIncrement)}}function Jv(t,e){if(1&t&&(p.Wb(0,"mat-list-option",62),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t),p.Db(1),p.Tc(" ",p.jc(2,3,"lang.choice")," ",t," ")}}function Yv(t,e){1&t&&(p.Wb(0,"mat-chip"),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc(" ",p.jc(2,1,"lang.selectedValue")," "))}function Zv(t,e){if(1&t&&(p.Ub(0),p.Wb(1,"div",57),p.Wb(2,"mat-selection-list",58,59),p.Oc(4,Jv,3,5,"mat-list-option",60),p.Vb(),p.Vb(),p.Wb(5,"mat-chip-list",61),p.Oc(6,Yv,3,3,"mat-chip",11),p.Vb(),p.Tb()),2&t){const t=p.zc(3),e=p.hc(2);p.Db(4),p.oc("ngForOf",e.sampleIncrement),p.Db(2),p.oc("ngForOf",t.selectedOptions.selected)}}function ty(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",41),p.Wb(1,"div",42),p.Wb(2,"button",43),p.dc("click",(function(){p.Dc(t);const i=e.$implicit;return p.hc().addCustomField(i)})),p.Rb(3,"mat-icon",44),p.Vb(),p.Vb(),p.Wb(4,"div",31),p.Wb(5,"div",45),p.Qc(6),p.Vb(),p.Oc(7,Nv,3,1,"ng-container",46),p.Oc(8,Hv,3,1,"ng-container",46),p.Oc(9,Xv,4,2,"ng-container",46),p.Oc(10,Gv,6,3,"ng-container",46),p.Oc(11,Kv,3,1,"ng-container",46),p.Oc(12,Zv,7,2,"ng-container",46),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit,i=p.hc();p.Db(2),p.oc("title",i.translate.instant("lang.add")),p.Db(4),p.Sc("",t.label," :"),p.Db(1),p.oc("ngIf","string"===t.type),p.Db(1),p.oc("ngIf","integer"===t.type),p.Db(1),p.oc("ngIf","select"===t.type),p.Db(1),p.oc("ngIf","date"===t.type),p.Db(1),p.oc("ngIf","radio"===t.type),p.Db(1),p.oc("ngIf","checkbox"===t.type)}}let ey=(()=>{class t{constructor(t,e,i,a,n,o,s,c){this.translate=t,this.http=e,this.notify=i,this.dialog=a,this.headerService=n,this.appService=o,this.sortPipe=s,this.viewContainerRef=c,this.loading=!0,this.subMenus=[{icon:"fa fa-book",route:"/administration/contacts/list",label:this.translate.instant("lang.contactsList"),current:!1},{icon:"fa fa-code",route:"/administration/contacts/contactsCustomFields",label:this.translate.instant("lang.customFieldsAdmin"),current:!0},{icon:"fa fa-cog",route:"/administration/contacts/contacts-parameters",label:this.translate.instant("lang.contactsParameters"),current:!1},{icon:"fa fa-users",route:"/administration/contacts/contacts-groups",label:this.translate.instant("lang.contactsGroups"),current:!1},{icon:"fas fa-magic",route:"/administration/contacts/duplicates",label:this.translate.instant("lang.duplicatesContactsAdmin"),current:!1}],this.customFieldsTypes=[{label:this.translate.instant("lang.stringInput"),type:"string"},{label:this.translate.instant("lang.integerInput"),type:"integer"},{label:this.translate.instant("lang.selectInput"),type:"select"},{label:this.translate.instant("lang.dateInput"),type:"date"},{label:this.translate.instant("lang.radioInput"),type:"radio"},{label:this.translate.instant("lang.checkboxInput"),type:"checkbox"}],this.customFields=[],this.customFieldsClone=[],this.incrementCreation=1,this.sampleIncrement=[1,2,3,4]}ngOnInit(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.customFields")+" "+this.translate.instant("lang.contacts")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.http.get("../rest/contactsCustomFields").pipe(Object(l.a)(t=>(t.customFields.forEach(t=>{t.values=t.values.map(t=>({label:t}))}),t)),Object(d.a)(t=>{this.customFields=t.customFields,this.customFieldsClone=JSON.parse(JSON.stringify(this.customFields))}),Object(vt.a)(()=>this.loading=!1),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}addCustomField(t){let e={};this.dialogRef=this.dialog.open(q.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.add"),msg:this.translate.instant("lang.confirmAction")}}),this.dialogRef.afterClosed().pipe(Object(K.a)(t=>"ok"===t),Object(d.a)(()=>{e={label:this.translate.instant("lang.newField")+" "+this.incrementCreation,type:t.type,values:[]}}),Object(J.a)(t=>this.http.post("../rest/contactsCustomFields",e)),Object(d.a)(t=>{e.id=t.id,this.customFields.push(e),this.notify.success(this.translate.instant("lang.customFieldAdded")),this.incrementCreation++}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}addValue(t){this.customFields[t].values.push({label:""})}removeValue(t,e){t.values.splice(e,1)}removeCustomField(t){this.dialogRef=this.dialog.open(q.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete")+' "'+this.customFields[t].label+'"',msg:this.translate.instant("lang.confirmAction")}}),this.dialogRef.afterClosed().pipe(Object(K.a)(t=>"ok"===t),Object(J.a)(()=>this.http.delete("../rest/contactsCustomFields/"+this.customFields[t].id)),Object(d.a)(()=>{this.customFields.splice(t,1),this.notify.success(this.translate.instant("lang.customFieldDeleted"))}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}updateCustomField(t,e){t.values=t.values.filter((t,e,i)=>i.map(t=>t.label).indexOf(t.label)===e);const i=Object.assign({},t);if(i.values=t.values.map(t=>t.label),this.customFields.filter(t=>t.label===i.label).length>1)return this.notify.handleErrors(this.translate.instant("lang.customFieldAlreadyExists")),Object(B.of)(!1);this.http.put("../rest/contactsCustomFields/"+t.id,i).pipe(Object(d.a)(()=>{this.customFieldsClone[e]=JSON.parse(JSON.stringify(t)),this.notify.success(this.translate.instant("lang.customFieldUpdated"))}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}sortValues(t){t.values=this.sortPipe.transform(t.values,"label")}isModified(t,e){return JSON.stringify(t)===JSON.stringify(this.customFieldsClone[e])||""===t.label}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(z.b),p.Qb(m.a),p.Qb(f.a),p.Qb(T.a),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(Tv,!0),p.Kc(Pv,!0)),2&t&&(p.yc(i=p.ec())&&(e.sidenavRight=i.first),p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first))},features:[p.Cb([T.a])],decls:23,vars:13,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],[3,"label"],["class","alert-message alert-message-info","role","alert",3,"innerHTML",4,"ngIf"],[4,"ngFor","ngForOf"],["position","end","opened","",1,"col-md-4","col-sm-12","customFielsdPanel",3,"mode","fixedInViewport"],["snav2",""],["class","customFieldsTypesItem",4,"ngFor","ngForOf"],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],["mat-line",""],["role","alert",1,"alert-message","alert-message-info",3,"innerHTML"],["color","primary"],[1,"col-md-12"],["matInput","","name","id","disabled","",3,"ngModel","placeholder","value","ngModelChange"],["matInput","","name","label",3,"ngModel","placeholder","value","ngModelChange"],["class","col-md-12",4,"ngIf"],[1,"col-md-12","text-center"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","warn",3,"click"],["opened","",1,"customFieldValues"],["matBadgeSize","small",3,"matBadge"],[1,"actionValuesCustom"],[2,"flex","1"],["mat-raised-button","","color","primary",3,"click"],["mat-mini-fab","","color","default",3,"title","click",4,"ngIf"],["floatLabel","never",4,"ngFor","ngForOf"],["mat-mini-fab","","color","default",3,"title","click"],["color","primary",1,"fas","fa-sort-alpha-down",2,"height","auto"],["floatLabel","never"],["matInput","",3,"ngModel","placeholder","ngModelChange"],["color","warn","mat-icon-button","","matSuffix","",3,"title","click"],[1,"fa","fa-trash"],[1,"customFieldsTypesItem"],[1,"addCustomFieldTypeContainer"],["mat-icon-button","","color","primary",3,"title","click"],[1,"fas","fa-plus-circle","fa-2x"],[2,"color","rgba(0,0,0,0.54)"],[4,"ngIf"],["floatLabel","never",1,"input-form"],["matInput","","matTextareaAutosize","","matAutosizeMinRows","1","cdkAutosizeMaxRows","6","disabled","",3,"placeholder"],["type","number","matInput","","disabled","",3,"placeholder"],["disabled","",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","disabled","",3,"matDatepicker","placeholder","click"],["matSuffix","",3,"for"],["picker",""],["color","primary","disabled","",1,"radio-form"],[1,"input-form","checkbox-form"],["disabled","",1,"div-list"],["sampleList",""],["checkboxPosition","before",3,"value",4,"ngFor","ngForOf"],[1,"checkbox-selected-list"],["checkboxPosition","before",3,"value"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,Fv,2,1,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Wb(13,"mat-tab-group"),p.Wb(14,"mat-tab",9),p.Oc(15,Lv,1,1,"div",10),p.Wb(16,"mat-accordion"),p.Oc(17,zv,20,19,"mat-expansion-panel",11),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(18,"mat-sidenav",12,13),p.Wb(20,"mat-tab-group"),p.Wb(21,"mat-tab",9),p.Oc(22,ty,13,8,"div",14),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(3),p.oc("label",e.translate.instant("lang.usableFields")),p.Db(1),p.oc("ngIf",0===e.customFields.length),p.Db(2),p.oc("ngForOf",e.customFields),p.Db(1),p.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode()),p.Db(3),p.oc("label",e.translate.instant("lang.customFieldsTypesAvailable")),p.Db(1),p.oc("ngForOf",e.customFieldsTypes))},directives:[C.e,C.f,M.a,x.a,ke.c,ke.a,O.t,Re.a,O.s,C.d,wt.h,wt.d,o.f,It.a,wt.c,k.l,Re.c,Re.g,Re.h,Re.f,S.c,w.b,c.d,c.u,c.x,R.b,zn.a,S.j,w.d,at.a,k.p,Le.h,Le.j,Le.f,Ae.b,Ae.a,wt.i,Un.d,wt.f,Un.a],pipes:[h.d],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}.mat-divider[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.customFielsdPanel[_ngcontent-%COMP%], .customFielsdPanel[_ngcontent-%COMP%]    .mat-tab-body-wrapper{padding-left:0}.mat-expansion-panel-header-description[_ngcontent-%COMP%]{flex-direction:row-reverse}.customFieldValues[_ngcontent-%COMP%]{box-shadow:none;border:1px solid rgba(0,0,0,.12)}.mat-expansion-panel[_ngcontent-%COMP%]{margin:5px}.mat-accordion[_ngcontent-%COMP%]{padding:5px}.mat-tab-body-content[_ngcontent-%COMP%], .mat-tab-body-wrapper[_ngcontent-%COMP%], .mat-tab-group[_ngcontent-%COMP%]{height:100%}.actionsCustomFields[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.actionValuesCustom[_ngcontent-%COMP%]{display:flex}.alert-message-info[_ngcontent-%COMP%]{margin-top:30px;max-width:100%}.addCustomFieldTypeContainer[_ngcontent-%COMP%]{justify-content:center;display:flex;align-items:center;width:60px}.customFieldsTypesItem[_ngcontent-%COMP%]{display:flex;padding-top:10px;padding-bottom:10px}.mat-badge-content[_ngcontent-%COMP%]{top:2px!important}",".banner[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:30px;border-radius:20px;border:1px solid #ccc;position:relative;padding:20px;width:100%}.banner[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;max-width:85%;text-overflow:ellipsis;z-index:1;font-size:20px;font-weight:700;letter-spacing:2px;position:absolute;top:-18px;left:20px;padding:0;margin:0;color:#135f7f}.banner[_ngcontent-%COMP%]   .title-divider[_ngcontent-%COMP%]{position:absolute;width:99%;z-index:-1;top:17px;background:#fff;height:1px}.banner[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:50%;padding-right:10px}.banner[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{font-size:16px}.fieldRow[_ngcontent-%COMP%]{display:flex;padding-top:10px;padding-bottom:10px}.fieldLabel[_ngcontent-%COMP%]{color:#4a4a4a}.fieldLabel[_ngcontent-%COMP%]   .cdk-drag-handle[_ngcontent-%COMP%]{margin-right:10px}.fieldState[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px;width:40px;justify-content:center;align-items:normal!important;padding-top:15px}.fieldState[_ngcontent-%COMP%]   .fieldRequired[_ngcontent-%COMP%]{font-size:5px;color:#135f7f}.fieldState[_ngcontent-%COMP%]   .fieldError[_ngcontent-%COMP%]{font-size:15px;color:#f99830}.fieldState[_ngcontent-%COMP%]   .fieldFull[_ngcontent-%COMP%]{font-size:15px;color:green}.fieldInput[_ngcontent-%COMP%]{position:relative}.fieldInput[_ngcontent-%COMP%], .fieldLabel[_ngcontent-%COMP%]{font-size:13px;flex:1}@media (max-width:768px){.fieldInput[_ngcontent-%COMP%], .fieldLabel[_ngcontent-%COMP%]{font-size:1em}}.fieldInput[_ngcontent-%COMP%], .fieldLabel[_ngcontent-%COMP%], .fieldState[_ngcontent-%COMP%]{align-items:center;display:flex}.input-form[_ngcontent-%COMP%]{font-size:13px;color:#666;width:500px}.input-form[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{color:#135f7f;padding-left:20px}.input-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.input-form[_ngcontent-%COMP%]    .mat-select-value-text{padding-left:20px;color:#135f7f}.input-form[_ngcontent-%COMP%]    .mat-form-field-label{top:15px;left:20px}.input-form[_ngcontent-%COMP%]    .mat-form-field-infix{display:flex;padding-top:0;padding-bottom:5px}.input-form[_ngcontent-%COMP%]    .mat-form-field-label-wrapper{top:-13px}.input-form[_ngcontent-%COMP%]    .mat-form-field-flex{background:#fff;height:40px;border-radius:10px;border:1px solid #135f7f}.input-form[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.input-form[_ngcontent-%COMP%]    .mat-form-field-suffix{margin-right:20px}.input-form[_ngcontent-%COMP%]    .mat-select-arrow-wrapper{padding-right:20px}.input-form[_ngcontent-%COMP%]    .mat-list-option{color:rgba(0,0,0,.54)}.input-form[_ngcontent-%COMP%]    .mat-form-field-wrapper{padding:0}.input-form[_ngcontent-%COMP%]    .mat-datepicker-toggle-default-icon{height:auto}.input-form.search-select[_ngcontent-%COMP%]    .mat-form-field-label-wrapper{top:-15px}.input-form.input-date[_ngcontent-%COMP%]    .mat-form-field-flex{align-items:center}.input-form.input-date[_ngcontent-%COMP%]    .mat-date-range-input-start-wrapper{flex:1}.input-form.input-date[_ngcontent-%COMP%]    .mat-date-range-input-inner{color:#135f7f}.input-form-filled[_ngcontent-%COMP%]{color:#fff;width:500px;transition:all .1s}.input-form-filled[_ngcontent-%COMP%]:hover    .mat-form-field-flex, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-form-field-flex{background:#fff!important;border:1px solid #fff!important;color:#135f7f!important;transition:all .1s}.input-form-filled[_ngcontent-%COMP%]:hover    .mat-form-field-label, .input-form-filled[_ngcontent-%COMP%]:hover    .mat-select-placeholder, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-form-field-label, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-select-placeholder{color:#135f7f!important}.input-form-filled[_ngcontent-%COMP%]:hover    .mat-select-arrow, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-select-arrow{color:rgba(19,95,127,.54)}.input-form-filled[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{color:#135f7f;padding-left:20px}.input-form-filled[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-select-value{text-align:left;font-weight:400}.input-form-filled[_ngcontent-%COMP%]    .mat-select-value-text{padding-left:20px;color:#fff}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-label{color:#fff;left:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-infix{padding-bottom:15px}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-flex{background:#135f7f;border-radius:30px;border:1px solid #fff}.input-form-filled[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-suffix{margin-right:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-select-arrow-wrapper{padding-right:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-select-arrow{color:hsla(0,0%,100%,.54)}.input-form-filled[_ngcontent-%COMP%]    .mat-select-placeholder{color:#fff}.input-form-filled[_ngcontent-%COMP%]    .mat-list-option{color:rgba(0,0,0,.54)}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-wrapper{padding:0}.input-form-filled[_ngcontent-%COMP%]   textarea.cdk-textarea-autosize-measuring[_ngcontent-%COMP%]{padding:4px 0!important}.input-form-filled[_ngcontent-%COMP%]    .mat-datepicker-toggle-default-icon{height:auto}.input-form.mat-form-field-disabled[_ngcontent-%COMP%]    .mat-input-element{cursor:not-allowed;padding-left:20px}.input-form.mat-form-field-disabled[_ngcontent-%COMP%]    .mat-form-field-flex{cursor:not-allowed;border:1px dashed #353232}.opt-group[_ngcontent-%COMP%]{font-weight:700}.smallInput[_ngcontent-%COMP%]{font-size:11px;padding-left:20px;padding-right:20px}.smallInput[_ngcontent-%COMP%]    .mat-form-field-infix{padding:0 0 5px}.button-form-primary[_ngcontent-%COMP%]{background:#fff;border:1px solid #135f7f;color:#135f7f;border-radius:30px;padding-left:20px;padding-right:20px;width:240px;height:45px;transition:all .1s}@media (max-width:768px){.button-form-primary[_ngcontent-%COMP%]{width:auto}}.button-form-primary[_ngcontent-%COMP%]:hover, .button-form-primary[aria-expanded=true][_ngcontent-%COMP%]{background:#135f7f!important;border:1px solid #fff!important;color:#fff!important;transition:all .1s}.button-form-primary[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;align-items:center;justify-content:center;width:100%}.button-form-primary[_ngcontent-%COMP%]    .mat-button-wrapper .menu-label{display:flex;flex:1;overflow:hidden;text-overflow:ellipsis;margin-right:10px}.button-form-primary[_ngcontent-%COMP%]    .mat-button-wrapper .menu-icon{display:flex}.button-form-primary-filled[_ngcontent-%COMP%]{background:#135f7f;border:1px solid #fff;color:#fff;border-radius:30px;padding-left:20px;padding-right:20px;width:240px;height:45px;transition:all .1s}@media (max-width:768px){.button-form-primary-filled[_ngcontent-%COMP%]{width:auto}}.button-form-primary-filled[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;align-items:center;justify-content:center;width:100%}.button-form-primary-filled[_ngcontent-%COMP%]    .mat-button-wrapper .menu-label{display:flex;flex:1;overflow:hidden;text-overflow:ellipsis;margin-right:10px}.button-form-primary-filled[_ngcontent-%COMP%]    .mat-button-wrapper .menu-icon{display:flex}.button-form-primary-alt[_ngcontent-%COMP%]{font-size:13px;background:#135f7f;border:1px solid #fff;color:#fff;border-radius:30px;padding:5px 20px;width:240px;transition:all .1s}@media (max-width:768px){.button-form-primary-alt[_ngcontent-%COMP%]{font-size:1em}}.button-form-primary-alt[_ngcontent-%COMP%]:hover, .button-form-primary-alt[aria-expanded=true][_ngcontent-%COMP%]{background:#fff!important;border:1px solid #fff!important;color:#135f7f!important;transition:all .1s}.button-form-primary-alt[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;align-items:center;justify-content:center;width:100%}.button-form-primary-alt[_ngcontent-%COMP%]    .mat-button-wrapper .menu-label{display:flex;flex:1}.button-form-primary-alt[_ngcontent-%COMP%]    .mat-button-wrapper .menu-icon{display:flex}.button-form-primary[aria-expanded=true][_ngcontent-%COMP%]{color:#135f7f;background:#fff;transition:all .1s;border:1px solid #135f7f}.button-form[_ngcontent-%COMP%]{background:#fff;color:#135f7f;border-radius:30px;padding:5px 20px;width:240px;transition:all .1s}.button-form[aria-expanded=true][_ngcontent-%COMP%]{transition:all .1s;border-bottom-left-radius:0;border-bottom-right-radius:0;border-top-left-radius:30px;border-top-right-radius:30px} .menuForm{width:240px;border-radius:30px;border:1px solid #fff;min-height:auto} .menuForm .mat-menu-content{padding-top:0;padding-bottom:0} .menuForm .mat-menu-content .mat-menu-item{transition:all .1s;font-size:13px;color:#666}@media (max-width:768px){ .menuForm .mat-menu-content .mat-menu-item{font-size:1em}} .menuForm .mat-menu-content .mat-menu-item:hover{transition:all .1s;color:#fff;background:#1a80ab} .parametersFieldsMenu{min-height:auto}.div-list[_ngcontent-%COMP%]{padding:0;max-height:150px;overflow:auto}.div-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{font-size:13px}@media (max-width:768px){.div-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{font-size:1em}}.checkbox-form[_ngcontent-%COMP%]{width:100%;padding:0;border:1px solid #135f7f;border-radius:30px;overflow:hidden}.checkbox-selected-list[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:center}.checkbox-selected-list[_ngcontent-%COMP%]    .mat-chip-list-wrapper{justify-content:center}.checkbox-selected-list[_ngcontent-%COMP%]   .mat-chip[_ngcontent-%COMP%]{font-size:13px}@media (max-width:768px){.checkbox-selected-list[_ngcontent-%COMP%]   .mat-chip[_ngcontent-%COMP%]{font-size:1em}}.radio-form[_ngcontent-%COMP%]{padding-left:20px;display:grid;grid-template-columns:repeat(2,1fr);width:100%}.radio-form[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]{flex:1}.radio-form[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]    .mat-radio-label-content{font-weight:400;color:rgba(0,0,0,.54)}.radio-form[_ngcontent-%COMP%]   .mat-radio-disabled[_ngcontent-%COMP%]{opacity:.5}.input-radio[_ngcontent-%COMP%]    .mat-form-field-infix{overflow:auto;padding-top:0}.input-radio[_ngcontent-%COMP%]    .mat-form-field-flex{height:auto}.input-radio[_ngcontent-%COMP%]    .mat-form-field-label{top:0;font-size:12px}.disabled[_ngcontent-%COMP%]{opacity:.2}.customFieldRow[_ngcontent-%COMP%]{display:flex;padding-top:20px;padding-bottom:20px}.customFieldDrag[_ngcontent-%COMP%]{cursor:move;width:50px;display:flex;align-items:center;justify-content:center}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drag-preview[_ngcontent-%COMP%]{background:#fff;box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.indexingModelsCustomFieldsList.cdk-drop-list-dragging[_ngcontent-%COMP%]   .indexingModelsCustomFieldsList[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.advancedInput[_ngcontent-%COMP%]{flex-direction:column}.noMandatory[_ngcontent-%COMP%]{visibility:hidden}.checkboxInput[_ngcontent-%COMP%]{display:block}.categoryLabel[_ngcontent-%COMP%]{letter-spacing:1px;font-size:13px;color:#135f7f;font-weight:700}@media (max-width:768px){.categoryLabel[_ngcontent-%COMP%]{font-size:1em}}.textareaInput[_ngcontent-%COMP%]    .mat-form-field{line-height:normal}.textareaInput[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{padding:0;margin:0;color:#135f7f}.textareaInput[_ngcontent-%COMP%]    .mat-form-field-flex{padding-left:20px;height:auto!important;min-height:40px!important}.textareaInput[_ngcontent-%COMP%]    .mat-form-field-label{left:0}"]}),t})();var iy=i("Gon0");const ay=["adminMenuTemplate"];function ny(t,e){if(1&t&&(p.Wb(0,"a",11),p.Rb(1,"mat-icon",12),p.Wb(2,"p",13),p.Qc(3),p.Vb(),p.Vb()),2&t){const t=e.$implicit;p.Ib("active",t.current),p.oc("routerLink",t.route),p.Db(1),p.Fb(t.icon),p.Db(2),p.Sc(" ",t.label," ")}}function oy(t,e){if(1&t&&(p.Wb(0,"mat-nav-list"),p.Oc(1,ny,4,6,"a",10),p.Vb()),2&t){const t=p.hc();p.Db(1),p.oc("ngForOf",t.subMenus)}}function sy(t,e){if(1&t){const t=p.Xb();p.Wb(0,"app-contact-form",14),p.dc("onSubmitEvent",(function(){return p.Dc(t),p.hc().goToList()})),p.Vb()}if(2&t){const t=p.hc();p.oc("creationMode",t.creationMode)("contactId",t.contactId)}}let cy=(()=>{class t{constructor(t,e,i,a,n,o,s,c){this.translate=t,this.http=e,this.route=i,this.router=a,this.headerService=n,this.appService=o,this.dialog=s,this.viewContainerRef=c,this.loading=!1,this.creationMode=!0,this.subMenus=[{icon:"fa fa-book",route:"/administration/contacts/list",label:this.translate.instant("lang.contactsList"),current:!1},{icon:"fa fa-code",route:"/administration/contacts/contactsCustomFields",label:this.translate.instant("lang.customFieldsAdmin"),current:!1},{icon:"fa fa-cog",route:"/administration/contacts/contacts-parameters",label:this.translate.instant("lang.contactsParameters"),current:!1},{icon:"fa fa-users",route:"/administration/contacts/contacts-groups",label:this.translate.instant("lang.contactsGroups"),current:!1},{icon:"fas fa-magic",route:"/administration/contacts/duplicates",label:this.translate.instant("lang.duplicatesContactsAdmin"),current:!1}],this.contactId=null}ngOnInit(){this.loading=!0,this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.route.params.subscribe(t=>{void 0===t.id?(this.headerService.setHeader(this.translate.instant("lang.contactCreation")),this.creationMode=!0,this.loading=!1):(this.headerService.setHeader(this.translate.instant("lang.contactModification")),this.creationMode=!1,this.contactId=t.id,this.loading=!1)})}goToList(){this.router.navigate(["/administration/contacts/list"])}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(o.a),p.Qb(o.c),p.Qb(m.a),p.Qb(f.a),p.Qb(z.b),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&p.Kc(ay,!0),2&t&&p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first)},decls:14,vars:7,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],[3,"creationMode","contactId","onSubmitEvent",4,"ngIf"],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],["mat-line",""],[3,"creationMode","contactId","onSubmitEvent"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,oy,2,1,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,sy,1,2,"app-contact-form",9),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",!e.loading))},directives:[C.e,C.f,M.a,x.a,O.t,wt.h,O.s,wt.d,o.f,It.a,wt.c,k.l,iy.a],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}"]}),t})();const ry=["adminMenuTemplate"];function ly(t,e){1&t&&(p.Wb(0,"mat-nav-list"),p.Wb(1,"h3",29),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"a",30),p.Rb(5,"mat-icon",31),p.Wb(6,"p",32),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(2),p.Rc(p.jc(3,2,"lang.actions")),p.Db(5),p.Sc(" ",p.jc(8,4,"lang.add")," "))}function dy(t,e){1&t&&(p.Wb(0,"mat-header-cell",33),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.label")))}function by(t,e){if(1&t&&(p.Wb(0,"mat-cell",34),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.label," ")}}function py(t,e){1&t&&(p.Wb(0,"mat-header-cell",33),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.description")))}function hy(t,e){if(1&t&&(p.Wb(0,"mat-cell",34),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.description," ")}}function uy(t,e){1&t&&p.Rb(0,"mat-header-cell")}function my(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-cell",35),p.Wb(1,"button",36),p.dc("click",(function(i){p.Dc(t);const a=e.$implicit,n=p.hc();return i.stopPropagation(),n.deleteTag(a)})),p.Rb(2,"mat-icon",37),p.Vb(),p.Vb()}if(2&t){const t=p.hc();p.Db(1),p.oc("title",t.translate.instant("lang.delete"))}}function fy(t,e){1&t&&p.Rb(0,"mat-header-row")}function gy(t,e){1&t&&p.Rb(0,"mat-row",38),2&t&&p.qc("routerLink","/administration/tags/",e.$implicit.id,"")}let vy=(()=>{class t{constructor(t,e,i,a,n,o,s,c,r){this.translate=t,this.http=e,this.notify=i,this.headerService=a,this.appService=n,this.dialog=o,this.functions=s,this.adminService=c,this.viewContainerRef=r,this.loading=!0,this.resultsLength=0,this.displayedColumns=["label","description","actions"],this.filterColumns=["label","description"]}ngOnInit(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.tags")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loadList()}loadList(){this.loading=!0,this.http.get("../rest/tags").pipe(Object(d.a)(t=>{this.resultsLength=t.tags.length,setTimeout(()=>{this.adminService.setDataSource("admin_tag",t.tags,this.sort,this.paginator,this.filterColumns)},0)}),Object(vt.a)(()=>this.loading=!1)).subscribe()}deleteTag(t){this.dialog.open(q.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:`${this.translate.instant("lang.delete")} "${t.label}"`,msg:this.translate.instant("lang.confirmAction")}}).afterClosed().pipe(Object(K.a)(t=>"ok"===t),Object(J.a)(()=>this.http.delete("../rest/tags/"+t.id)),Object(d.a)(()=>{this.loadList(),this.notify.success(this.translate.instant("lang.tagDeleted"))}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a),p.Qb(z.b),p.Qb(D.a),p.Qb(St),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(ry,!0),p.Xc(N.a,!0),p.Xc(H.a,!0)),2&t&&(p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.paginator=i.first),p.yc(i=p.ec())&&(e.sort=i.first))},decls:38,vars:20,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],[1,"table-head"],[1,"table-head-result"],[2,"font-size","13px"],["matInput","",3,"formControl","placeholder"],[1,"table-head-tool"],[3,"length","hidePageSize","pageSize"],["paginator",""],[2,"height","90%","overflow","auto","position","absolute","width","100%"],["id","contact-list","matSort","","matSortDisableClear","",2,"width","100%",3,"dataSource"],["tableContactListSort","matSort"],["matColumnDef","label"],["mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor: pointer;",3,"routerLink",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","display","flex","justify-content","end","align-items","center","padding-left","20px"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/tags/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],["mat-sort-header",""],["mat-cell",""],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"title","click"],[1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,ly,9,6,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Wb(13,"div",9),p.Wb(14,"div",10),p.Wb(15,"mat-form-field",11),p.Rb(16,"input",12),p.ic(17,"translate"),p.Vb(),p.Vb(),p.Wb(18,"div",13),p.Rb(19,"mat-paginator",14,15),p.Vb(),p.Vb(),p.Wb(21,"div",16),p.Wb(22,"mat-table",17,18),p.Ub(24,19),p.Oc(25,dy,3,3,"mat-header-cell",20),p.Oc(26,by,2,1,"mat-cell",21),p.Tb(),p.Ub(27,22),p.Oc(28,py,3,3,"mat-header-cell",20),p.Oc(29,hy,2,1,"mat-cell",21),p.Tb(),p.Ub(30,23),p.Oc(31,uy,1,0,"mat-header-cell",24),p.Oc(32,my,3,1,"mat-cell",25),p.Tb(),p.Oc(33,fy,1,0,"mat-header-row",26),p.Oc(34,gy,1,1,"mat-row",27),p.Vb(),p.Wb(35,"div",28),p.Qc(36),p.ic(37,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(5),p.pc("placeholder",p.jc(17,16,"lang.filterBy")),p.oc("formControl",e.adminService.getFilterField()),p.Db(3),p.oc("length",100)("hidePageSize",!0)("pageSize",10),p.Db(3),p.oc("dataSource",e.adminService.getDataSource()),p.Db(11),p.oc("matHeaderRowDef",e.displayedColumns),p.Db(1),p.oc("matRowDefColumns",e.displayedColumns),p.Db(2),p.Tc(" ",e.resultsLength," ",p.jc(37,18,"lang.tags"),""))},directives:[C.e,C.f,M.a,x.a,S.c,w.b,c.d,c.u,c.j,N.a,G.o,H.a,G.c,G.i,G.b,G.k,G.n,wt.h,wt.g,wt.d,o.f,It.a,wt.c,k.l,G.h,H.b,G.a,R.b,G.j,G.m,o.d],pipes:[h.d],encapsulation:2}),t})();const yy=["linkedTagInput"];function Dy(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-chip",31),p.dc("click",(function(){p.Dc(t);const i=e.$implicit;return p.hc(2).remove(i)}))("removed",(function(){p.Dc(t);const i=e.$implicit;return p.hc(2).remove(i)})),p.Qc(1),p.Rb(2,"mat-icon",32),p.Vb()}if(2&t){const t=e.$implicit,i=p.hc(2);p.Db(1),p.Sc(" ",i.getTagLabel(t)," ")}}function Vy(t,e){if(1&t&&(p.Wb(0,"mat-option",33),p.Qc(1),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.oc("value",t)("disabled",i.isSelected(t)||t.id==i.id),p.Db(1),p.Sc(" ",t.label," ")}}function Cy(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-form-field"),p.Wb(1,"mat-chip-list",null,24),p.Oc(3,Dy,3,1,"mat-chip",25),p.Rb(4,"input",26,27),p.Vb(),p.Wb(6,"mat-autocomplete",28,29),p.dc("optionSelected",(function(e){return p.Dc(t),p.hc().selected(e)})),p.Oc(8,Vy,2,3,"mat-option",30),p.ic(9,"async"),p.Vb(),p.Vb()}if(2&t){const t=p.zc(2),e=p.zc(7),i=p.hc();p.Db(3),p.oc("ngForOf",i.tag.links.value),p.Db(1),p.oc("placeholder",i.translate.instant("lang.linkedTags"))("formControl",i.myControl)("matAutocomplete",e)("matChipInputFor",t),p.Db(4),p.oc("ngForOf",p.jc(9,6,i.filteredOptions))}}function My(t,e){1&t&&(p.Wb(0,"div",34),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc(" ",p.jc(2,1,"lang.cannotMergeTags")," "))}function Wy(t,e){if(1&t){const t=p.Xb();p.Wb(0,"plugin-select-search",35),p.dc("afterOpened",(function(){return p.Dc(t),p.hc().getTags()}))("afterSelected",(function(e){return p.Dc(t),p.hc().mergeTag(e)})),p.Vb()}if(2&t){const t=p.hc();p.oc("label",t.translate.instant("lang.mergeTagWith"))("placeholderLabel",t.translate.instant("lang.mergeTagWith"))("formControlSelect",t.selectMergeTag)("datas",t.tags)}}let xy=(()=>{class t{constructor(t,e,i,a,n,o,s,r,l){this.translate=t,this.http=e,this.route=i,this.router=a,this.notify=n,this.headerService=o,this.appService=s,this.functions=r,this.dialog=l,this.loading=!1,this.loadingTags=!0,this.advancedMode=!1,this.tags=[],this.tag={label:new c.i({value:"",disabled:!1},[c.I.required]),description:new c.i({value:"",disabled:!1}),parentId:new c.i({value:"",disabled:!1}),links:new c.i({value:[],disabled:!1}),usage:new c.i({value:"",disabled:!1}),canMerge:new c.i({value:!0,disabled:!1}),countResources:new c.i({value:0,disabled:!1})},this.myControl=new c.i,this.selectMergeTag=new c.i({value:"",disabled:!1}),this.tagFormGroup=new c.l(this.tag),this.currTagChildren=[]}ngOnInit(){this.loading=!0,this.route.params.subscribe(t=>Object(gt.a)(this,void 0,void 0,(function*(){this.id=t.id,yield this.getTags(),void 0===t.id?(this.headerService.setHeader(this.translate.instant("lang.tagCreation")),this.creationMode=!0,this.loading=!1):(this.creationMode=!1,this.http.get("../rest/tags/"+this.id).pipe(Object(d.a)(t=>{Object.keys(this.tag).forEach(e=>{this.functions.empty(t[e])||this.tag[e].setValue(t[e])}),this.functions.empty(this.tag.parentId.value)||this.toggleAdvancedTag(),this.headerService.setHeader(this.translate.instant("lang.tagModification"),this.tag.label.value)}),Object(vt.a)(()=>this.loading=!1),Object(b.a)(t=>(this.notify.handleErrors(t),Object(s.a)(!1)))).subscribe())})))}onSubmit(){this.creationMode?this.createTag():this.updateTag()}formatTag(){const t={};return Object.keys(this.tag).forEach(e=>{t[e]=this.tag[e].value}),t}createTag(){this.http.post("../rest/tags",this.formatTag()).pipe(Object(d.a)(()=>{this.notify.success(this.translate.instant("lang.tagAdded")),this.router.navigate(["/administration/tags"])}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(s.a)(!1)))).subscribe()}updateTag(){this.http.put("../rest/tags/"+this.id,this.formatTag()).pipe(Object(d.a)(()=>{this.notify.success(this.translate.instant("lang.tagUpdated")),this.router.navigate(["/administration/tags"])}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(s.a)(!1)))).subscribe()}getTags(){return new Promise(t=>{this.http.get("../rest/tags").pipe(Object(d.a)(e=>{this.tags=e.tags.map(t=>({id:t.id,label:t.label,parentId:t.parentId,countResources:t.countResources,disabled:t.id==this.id})),t(!0)}),Object(vt.a)(()=>this.loadingTags=!1),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(s.a)(!1)))).subscribe()})}mergeTag(t){this.selectMergeTag.reset();const e=this.tags.filter(e=>e.id===t)[0],i=`${this.translate.instant("lang.confirmAction")}<br/><br/>${this.translate.instant("lang.theTag")}<b> "${this.tag.label.value}" </b>${this.translate.instant("lang.willBeDeletedAndMerged")}<b> "${e.label}"</b><br/><br/>${this.translate.instant("lang.willBeTransferredToNewTag")}<b> "${e.label}"</b> : <b>${this.tag.countResources.value}</b>`;this.dialog.open(q.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:`${this.translate.instant("lang.mergeWith")}  "${e.label}"`,msg:i}}).afterClosed().pipe(Object(K.a)(t=>"ok"===t),Object(J.a)(()=>this.http.put("../rest/mergeTags",{idMaster:e.id,idMerge:this.id})),Object(d.a)(()=>{this.notify.success(this.translate.instant("lang.tagMerged")),this.router.navigate(["/administration/tags/"+e.id])}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(s.a)(!1)))).subscribe()}toggleAdvancedTag(){return Object(gt.a)(this,void 0,void 0,(function*(){this.advancedMode=!this.advancedMode,this.getTagsTree(),this.filteredOptions=this.myControl.valueChanges.pipe(Object(r.a)(null),Object(l.a)(t=>t?this._filter(t):this.tags.slice()))}))}_filter(t){let e=t;return"string"==typeof t&&(e=t.toLowerCase()),this.tags.filter(t=>t.label.toLowerCase().indexOf(e)>-1)}isSelected(t){return this.tag.links.value.filter(e=>e==t.id).length>0}remove(t){const e=this.tag.links.value.indexOf(t);e>=0&&this.tag.links.value.splice(e,1)}selected(t){const e=this.tag.links.value;e.push(t.option.value.id),this.tag.links.setValue(e),this.linkedTagInput.nativeElement.value="",this.myControl.setValue(null)}getTagsTree(){this.functions.empty(this.id)||this.getChildrens(this.id);const t=this.tags.map(t=>({id:t.id,text:t.label,parent:this.functions.empty(t.parentId)?"#":t.parentId,state:{opened:this.tag.parentId.value==t.id,selected:this.tag.parentId.value==t.id,disabled:this.currTagChildren.indexOf(t.id.toString())>-1}}));setTimeout(()=>{$("#jstree").on("select_node.jstree",(t,e)=>{this.tag.parentId.setValue(parseInt(e.node.id))}).on("deselect_node.jstree",(t,e)=>{this.tag.parentId.setValue(null)}).jstree({checkbox:{deselect_all:!0,three_state:!1},core:{force_text:!0,themes:{name:"proton",responsive:!0},multiple:!1,data:t},plugins:["checkbox","search","sort"]});let e=!1;$("#jstree_search").keyup((function(){e&&clearTimeout(e),e=setTimeout((function(){const t=$("#jstree_search").val();$("#jstree").jstree(!0).search(t)}),250)}))},0)}getChildrens(t){this.currTagChildren.push(t.toString()),this.tags.filter(e=>e.parentId==t).forEach(t=>{this.getChildrens(t.id)})}getTagLabel(t){return this.tags.filter(e=>e.id==t)[0].label}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(o.a),p.Qb(o.c),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a),p.Qb(D.a),p.Qb(z.b))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&p.Xc(yy,!0),2&t&&p.yc(i=p.ec())&&(e.linkedTagInput=i.first)},decls:39,vars:29,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],[2,"height","90%","overflow","auto","position","absolute","width","100%"],[2,"padding","20px",3,"ngSubmit"],["matInput","","type","text","maxlength","128","required","",3,"formControl","placeholder"],["matInput","","type","text",3,"formControl","placeholder"],[4,"ngIf"],["class","alert-message alert-message-danger","style","min-width: 100%;",4,"ngIf"],["style","width:100%;",3,"label","placeholderLabel","formControlSelect","datas","afterOpened","afterSelected",4,"ngIf"],[1,"text-center"],["mat-raised-button","","color","primary",3,"disabled"],["type","button","mat-raised-button","","color","default",3,"click"],["fixedTopGap","56","position","end",2,"overflow-x","hidden","width","450px",3,"mode","fixedInViewport","opened"],["snav2",""],["mat-subheader",""],[2,"padding","10px"],["matInput","","id","jstree_search","name","jstree_search","type","text",3,"placeholder"],["id","jstree"],["chipList",""],["style","cursor: pointer;",3,"click","removed",4,"ngFor","ngForOf"],[3,"placeholder","formControl","matAutocomplete","matChipInputFor"],["linkedTagInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],[2,"cursor","pointer",3,"click","removed"],["matChipRemove","",1,"fa","fa-times-circle"],[3,"value","disabled"],[1,"alert-message","alert-message-danger",2,"min-width","100%"],[2,"width","100%",3,"label","placeholderLabel","formControlSelect","datas","afterOpened","afterSelected"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Wb(1,"mat-sidenav-content"),p.Wb(2,"div",1),p.Wb(3,"div",2),p.Wb(4,"div",3),p.Rb(5,"header-left"),p.Vb(),p.Wb(6,"div",4),p.Rb(7,"header-right"),p.Vb(),p.Vb(),p.Rb(8,"div",5),p.Vb(),p.Wb(9,"div",6),p.Wb(10,"div",7),p.Wb(11,"div",8),p.Wb(12,"form",9),p.dc("ngSubmit",(function(){return e.onSubmit()})),p.Wb(13,"mat-form-field"),p.Rb(14,"input",10),p.Vb(),p.Wb(15,"mat-form-field"),p.Rb(16,"textarea",11),p.Vb(),p.Wb(17,"mat-form-field"),p.Rb(18,"input",11),p.Vb(),p.Oc(19,Cy,10,8,"mat-form-field",12),p.Oc(20,My,3,3,"div",13),p.Oc(21,Wy,1,4,"plugin-select-search",14),p.Wb(22,"div",15),p.Wb(23,"button",16),p.Qc(24),p.ic(25,"translate"),p.Vb(),p.Wb(26,"button",17),p.dc("click",(function(){return e.toggleAdvancedTag()})),p.Qc(27),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(28,"mat-sidenav",18,19),p.Wb(30,"mat-list"),p.Wb(31,"h3",20),p.Qc(32),p.ic(33,"translate"),p.Vb(),p.Wb(34,"div",21),p.Wb(35,"mat-form-field"),p.Rb(36,"input",22),p.ic(37,"translate"),p.Vb(),p.Rb(38,"div",23),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(3),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(5),p.oc("formControl",e.tag.label)("placeholder",e.translate.instant("lang.label")),p.Db(2),p.oc("formControl",e.tag.description)("placeholder",e.translate.instant("lang.description")),p.Db(2),p.oc("formControl",e.tag.usage)("placeholder",e.translate.instant("lang.usage")),p.Db(1),p.oc("ngIf",e.advancedMode),p.Db(1),p.oc("ngIf",!e.creationMode&&!e.tag.canMerge.value),p.Db(1),p.oc("ngIf",!e.loadingTags&&e.tag.canMerge.value),p.Db(2),p.oc("disabled",!e.tagFormGroup.valid),p.Db(1),p.Rc(p.jc(25,23,"lang.validate")),p.Db(3),p.Sc(" ",e.translate.instant(e.advancedMode?"lang.defaultMode":"lang.advancedMode")," "),p.Db(1),p.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",e.advancedMode),p.Db(4),p.Sc("",p.jc(33,25,"lang.selectParentTag")," :"),p.Db(4),p.pc("placeholder",p.jc(37,27,"lang.searchTag")))},directives:[C.e,C.f,M.a,x.a,c.K,c.v,c.w,S.c,w.b,c.d,c.p,c.F,c.u,c.j,O.t,R.b,C.d,wt.a,wt.g,Un.d,O.s,$n.d,Un.c,$n.a,Un.a,It.a,Un.e,k.p,Br.a],pipes:[h.d,O.b],encapsulation:2}),t})();var Oy=i("q3Kh");const _y=["snav2"],Sy=["maarchTree"];function wy(t,e){1&t&&(p.Wb(0,"div",15),p.Rb(1,"mat-spinner",16),p.Vb())}const Iy=function(t){return[t]};function jy(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-card",17),p.Wb(1,"form",18,19),p.dc("ngSubmit",(function(){return p.Dc(t),p.hc().onSubmit()})),p.Wb(3,"mat-form-field"),p.Wb(4,"input",20),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().alfresco.label=e})),p.ic(5,"translate"),p.ic(6,"translate"),p.Vb(),p.Vb(),p.Wb(7,"div",21),p.Wb(8,"div",22),p.Wb(9,"div",23),p.Qc(10),p.ic(11,"translate"),p.Vb(),p.Wb(12,"div",24),p.Wb(13,"mat-form-field"),p.Wb(14,"input",25),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().alfresco.account.id=e})),p.ic(15,"translate"),p.ic(16,"translate"),p.Vb(),p.Vb(),p.Wb(17,"mat-form-field"),p.Wb(18,"input",26),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().alfresco.account.password=e})),p.Vb(),p.Wb(19,"mat-icon",27),p.dc("click",(function(){p.Dc(t);const e=p.hc();return e.hidePassword=!e.hidePassword})),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(20,"div",28),p.Wb(21,"div",23),p.Qc(22),p.ic(23,"translate"),p.Vb(),p.Wb(24,"mat-form-field"),p.Wb(25,"input",29),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().alfresco.rootFolder=e})),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(26,"div",30),p.Wb(27,"button",31),p.dc("click",(function(){return p.Dc(t),p.hc().checkAccount()})),p.Qc(28),p.ic(29,"translate"),p.Vb(),p.Wb(30,"button",32),p.Qc(31),p.ic(32,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.zc(2),e=p.hc();p.Db(4),p.pc("title",p.jc(5,20,"lang.label")),p.pc("placeholder",p.jc(6,22,"lang.label")),p.oc("ngModel",e.alfresco.label),p.Db(6),p.Sc(" ",p.jc(11,24,"lang.alfrescoAccount")," "),p.Db(4),p.pc("title",p.jc(15,26,"lang.id")),p.pc("placeholder",p.jc(16,28,"lang.id")),p.oc("ngModel",e.alfresco.account.id),p.Db(4),p.oc("ngModel",e.alfresco.account.password)("required",e.creationMode)("title",e.translate.instant(e.creationMode?"lang.password":"lang.changePassword"))("type",e.hidePassword?"password":"text")("placeholder",e.translate.instant(e.creationMode?"lang.password":"lang.changePassword")),p.Db(1),p.oc("ngClass",p.vc(36,Iy,e.hidePassword?"fa-eye-slash":"fa-eye")),p.Db(3),p.Sc(" ",p.jc(23,30,"lang.rootFolder")," "),p.Db(3),p.oc("ngModel",e.alfresco.rootFolder)("title",e.translate.instant("lang.id")),p.Db(2),p.oc("disabled",e.functionsService.empty(e.alfresco.account.id)||e.functionsService.empty(e.alfresco.account.password)&&e.creationMode),p.Db(1),p.Rc(p.jc(29,32,"lang.test")),p.Db(2),p.oc("disabled",!t.valid||!e.validAccount()),p.Db(1),p.Rc(p.jc(32,34,"lang.validate"))}}let ky=(()=>{class t{constructor(t,e,i,a,n,o,s,c){this.translate=t,this.http=e,this.route=i,this.router=a,this.notify=n,this.headerService=o,this.appService=s,this.functionsService=c,this.loading=!1,this.creationMode=!0,this.entities=[],this.availableEntities=[],this.alfresco={id:0,label:"",account:{id:"",password:""},rootFolder:null,linkedEntities:[]},this.hidePassword=!0,this.alfrescoTreeLoaded=!1}ngOnInit(){this.loading=!1,this.route.params.subscribe(t=>Object(gt.a)(this,void 0,void 0,(function*(){void 0===t.id?(this.headerService.setHeader(this.translate.instant("lang.alfrescoCreation")),this.creationMode=!0):(this.headerService.setHeader(this.translate.instant("lang.alfrescoModification")),this.alfresco.id=t.id,this.creationMode=!1),yield this.getEntities(),yield this.getAvailableEntities(),yield this.initAccount(),this.loading=!1})))}onSubmit(){this.creationMode?this.createAccount():this.updateAccount()}createAccount(){this.http.post("../rest/alfresco/accounts",this.formatData()).pipe(Object(xt.tap)(()=>{this.notify.success(this.translate.instant("lang.accountAdded")),this.router.navigate(["/administration/alfresco"])}),Object(X.catchError)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}updateAccount(){this.http.put("../rest/alfresco/accounts/"+this.alfresco.id,this.formatData()).pipe(Object(xt.tap)(()=>{this.notify.success(this.translate.instant("lang.accountUpdated")),this.router.navigate(["/administration/alfresco"])}),Object(X.catchError)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}formatData(){const t={label:this.alfresco.label,login:this.alfresco.account.id,nodeId:this.alfresco.rootFolder,entities:this.maarchTree.getSelectedNodes().map(t=>t.id)};return this.functionsService.empty(this.alfresco.account.password)||(t.password=this.alfresco.account.password),t}getAvailableEntities(){return new Promise((t,e)=>{this.http.get("../rest/alfresco/availableEntities").pipe(Object(xt.tap)(e=>{this.availableEntities=e.availableEntities,t(!0)}),Object(X.catchError)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()})}getEntities(){return new Promise((t,e)=>{this.http.get("../rest/entities").pipe(Object(Oy.map)(t=>(t.entities=t.entities.map(t=>({text:t.entity_label,icon:t.icon,parent_id:t.parentSerialId,id:t.serialId,state:{opened:!0}})),t.entities)),Object(xt.tap)(e=>{this.entities=e,t(!0)}),Object(X.catchError)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()})}initAccount(){return new Promise((t,e)=>{this.creationMode?this.http.get("../rest/entities").pipe(Object(Oy.map)(t=>(t.entities=t.entities.map(t=>({text:t.entity_label,icon:t.icon,parent_id:t.parentSerialId,id:t.serialId,state:{opened:!0}})),t.entities)),Object(xt.tap)(e=>{this.entities=e,this.entities.forEach(t=>{t.state.disabled=!(this.availableEntities.indexOf(+t.id)>-1)}),setTimeout(()=>{this.initEntitiesTree(this.entities)},0),t(!0)}),Object(X.catchError)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe():this.http.get("../rest/alfresco/accounts/"+this.alfresco.id).pipe(Object(xt.tap)(e=>{this.alfresco={id:e.id,label:e.label,account:{id:e.login},rootFolder:e.nodeId,linkedEntities:e.entities},this.entities.forEach(t=>{t.state.disabled=!(this.availableEntities.indexOf(+t.id)>-1),this.alfresco.linkedEntities.indexOf(+t.id)>-1&&(t.state.disabled=!1,t.state.selected=!0)}),setTimeout(()=>{this.initEntitiesTree(this.entities)},0),t(!0)}),Object(X.catchError)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()})}initEntitiesTree(t){this.maarchTree.initData(t)}validAccount(){return!this.functionsService.empty(this.alfresco.rootFolder)&&0!==this.maarchTree.getSelectedNodes().length}checkAccount(){let t={};t=this.creationMode?{login:this.alfresco.account.id,password:this.alfresco.account.password,nodeId:this.alfresco.rootFolder}:{accountId:this.alfresco.id,login:this.alfresco.account.id,password:this.alfresco.account.password,nodeId:this.alfresco.rootFolder},this.http.post("../rest/alfresco/checkAccounts",t).pipe(Object(xt.tap)(()=>{this.notify.success(this.translate.instant("lang.testSucceeded"))}),Object(X.catchError)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(o.a),p.Qb(o.c),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a),p.Qb(D.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["app-alfresco"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(_y,!0),p.Kc(Sy,!0)),2&t&&(p.yc(i=p.ec())&&(e.sidenavRight=i.first),p.yc(i=p.ec())&&(e.maarchTree=i.first))},decls:22,vars:14,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",2,"overflow-x","hidden","width","400px",3,"mode","fixedInViewport","opened"],["snav2",""],["mat-subheader",""],[2,"padding","10px"],["maarchTree",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[3,"ngSubmit"],["alfrescoForm","ngForm"],["matInput","","required","","name","label","id","label","type","text","maxlength","64",3,"ngModel","title","placeholder","ngModelChange"],[1,"form-group",2,"flex-direction","row","flex-wrap","wrap"],[1,"formType","ratio-2","col-sm-12"],[1,"formType-title"],[2,"width","100%","text-align","center"],["matInput","","required","","name","accountId","id","accountId","type","text",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","password","id","password",3,"ngModel","required","title","type","placeholder","ngModelChange"],["color","primary","matSuffix","",1,"fa","fa-2x",2,"cursor","pointer",3,"ngClass","click"],[1,"formType","ratio-1","col-sm-12"],["matInput","","required","","name","rootFolder","id","rootFolder","type","text","placeholder","D\xe9p\xf4t racine",3,"ngModel","title","ngModelChange"],[1,"col-sm-12","text-center",2,"padding","10px"],["mat-raised-button","","type","button","color","primary",3,"disabled","click"],["mat-raised-button","","type","submit","color","primary",3,"disabled"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Wb(1,"mat-sidenav-content"),p.Wb(2,"div",1),p.Wb(3,"div",2),p.Wb(4,"div",3),p.Rb(5,"header-left"),p.Vb(),p.Wb(6,"div",4),p.Rb(7,"header-right"),p.Vb(),p.Vb(),p.Rb(8,"div",5),p.Vb(),p.Wb(9,"div",6),p.Wb(10,"div",7),p.Oc(11,wy,2,0,"div",8),p.Oc(12,jy,33,38,"mat-card",9),p.Vb(),p.Vb(),p.Vb(),p.Wb(13,"mat-sidenav",10,11),p.Wb(15,"mat-list"),p.Wb(16,"h3",12),p.Qc(17),p.ic(18,"translate"),p.Vb(),p.Wb(19,"div",13),p.Rb(20,"app-maarch-flat-tree",null,14),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(3),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading),p.Db(1),p.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!e.appService.getViewMode()),p.Db(4),p.Rc(p.jc(18,12,"lang.chooseEntityAssociationAccount")))},directives:[C.e,C.f,M.a,x.a,O.t,C.d,wt.a,wt.g,Te.a,I.c,j.a,c.K,c.v,c.w,S.c,w.b,c.d,c.F,c.p,c.u,c.x,It.a,S.j,O.q,R.b],pipes:[h.d],styles:[".form-group[_ngcontent-%COMP%], .formType[_ngcontent-%COMP%]{display:flex}.formType[_ngcontent-%COMP%]{align-items:center;margin:10px;border-radius:4px;border:1px solid #ccc;position:relative;padding:10px}.formType-title[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;max-width:85%;text-overflow:ellipsis;z-index:1;font-size:10px;font-weight:700;background:#fff;position:absolute;top:-7px;left:10px;padding:0;margin:0;color:#135f7f}.formType[_ngcontent-%COMP%]    .mat-slide-toggle-label{color:#666;font-weight:700}.formType[_ngcontent-%COMP%]    .mat-radio-button, .formType[_ngcontent-%COMP%]    .mat-slide-toggle{opacity:.5;color:#666;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.formType[_ngcontent-%COMP%]    .mat-checked, .formType[_ngcontent-%COMP%]    .mat-radio-checked{opacity:1;color:#135f7f}.formType[_ngcontent-%COMP%]    .mat-checked .mat-slide-toggle-label{color:#135f7f}.formType[_ngcontent-%COMP%]    .mat-form-field-suffix{color:#f99830;font-size:15px;top:0}.ratio-1[_ngcontent-%COMP%]{flex:1}.ratio-2[_ngcontent-%COMP%]{flex:1;align-items:baseline}"]}),t})();var Ry=i("4ik+"),Ty=i("/JYr");const Py=["adminMenuTemplate"];function Qy(t,e){1&t&&(p.Wb(0,"mat-nav-list"),p.Wb(1,"h3",11),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"a",12),p.Rb(5,"mat-icon",13),p.Wb(6,"p",14),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(2),p.Rc(p.jc(3,2,"lang.actions")),p.Db(5),p.Sc(" ",p.jc(8,4,"lang.add")," "))}function Fy(t,e){1&t&&(p.Wb(0,"div",15),p.Rb(1,"mat-spinner",16),p.Vb())}function Ly(t,e){if(1&t&&(p.Wb(0,"mat-header-cell",40),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=p.hc(2);p.Ib("hide-for-mobile",t.appService.getViewMode()),p.Db(1),p.Rc(p.jc(2,3,"lang.label"))}}function Ey(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.Ib("hide-for-mobile",i.appService.getViewMode()),p.Db(1),p.Sc(" ",t.label," ")}}function Ay(t,e){1&t&&(p.Wb(0,"mat-header-cell",41),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.linkedEntities")))}function Uy(t,e){if(1&t&&(p.Wb(0,"span",44),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Rc(t)}}function $y(t,e){if(1&t&&(p.Wb(0,"mat-cell",42),p.Wb(1,"div"),p.Oc(2,Uy,2,1,"span",43),p.Vb(),p.Vb()),2&t){const t=e.$implicit;p.Db(2),p.oc("ngForOf",t.entitiesLabel)}}function zy(t,e){1&t&&p.Rb(0,"mat-header-cell",45)}function Ny(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-cell",46),p.Wb(1,"button",47),p.dc("click",(function(i){p.Dc(t);const a=e.$implicit,n=p.hc(2);return i.stopPropagation(),n.deleteAccount(a.id)})),p.ic(2,"translate"),p.Rb(3,"mat-icon",48),p.Vb(),p.Vb()}2&t&&(p.Db(1),p.pc("matTooltip",p.jc(2,1,"lang.delete")))}function Hy(t,e){1&t&&p.Rb(0,"mat-header-row")}function By(t,e){1&t&&(p.Rb(0,"mat-row",49),p.ic(1,"translate")),2&t&&(p.qc("routerLink","/administration/alfresco/",e.$implicit.id,""),p.pc("matTooltip",p.jc(1,2,"lang.view")))}function Xy(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-card",17),p.Wb(1,"div",18),p.Wb(2,"div",19),p.Wb(3,"mat-form-field",20),p.Wb(4,"mat-label"),p.Qc(5),p.ic(6,"translate"),p.Vb(),p.Wb(7,"input",21),p.dc("ngModelChange",(function(e){return p.Dc(t),p.hc().alfrescoUrl=e}))("blur",(function(){return p.Dc(t),p.hc().saveUrl()})),p.Vb(),p.Vb(),p.Vb(),p.Wb(8,"div",22),p.Wb(9,"mat-form-field"),p.Rb(10,"input",23),p.ic(11,"translate"),p.Vb(),p.Vb(),p.Wb(12,"div",22),p.Rb(13,"mat-paginator",24,25),p.Vb(),p.Vb(),p.Wb(15,"mat-table",26,27),p.Ub(17,28),p.Oc(18,Ly,3,5,"mat-header-cell",29),p.Oc(19,Ey,2,3,"mat-cell",30),p.Tb(),p.Ub(20,31),p.Oc(21,Ay,3,3,"mat-header-cell",32),p.Oc(22,$y,3,1,"mat-cell",33),p.Tb(),p.Ub(23,34),p.Oc(24,zy,1,0,"mat-header-cell",35),p.Oc(25,Ny,4,3,"mat-cell",36),p.Tb(),p.Oc(26,Hy,1,0,"mat-header-row",37),p.Oc(27,By,2,4,"mat-row",38),p.Vb(),p.Wb(28,"div",39),p.Qc(29),p.ic(30,"translate"),p.Vb(),p.Vb()}if(2&t){const t=p.hc();p.Db(5),p.Rc(p.jc(6,13,"lang.alfrescoAPI")),p.Db(2),p.oc("ngModel",t.alfrescoUrl)("title",t.alfrescoUrl),p.Db(3),p.pc("placeholder",p.jc(11,15,"lang.filterBy")),p.oc("formControl",t.adminService.getFilterField()),p.Db(3),p.oc("length",100)("hidePageSize",!0)("pageSize",10),p.Db(2),p.oc("dataSource",t.adminService.getDataSource()),p.Db(11),p.oc("matHeaderRowDef",t.displayedColumns),p.Db(1),p.oc("matRowDefColumns",t.displayedColumns),p.Db(2),p.Tc(" ",t.accounts.length," ",p.jc(30,17,"lang.accounts"),"")}}let Gy=(()=>{class t{constructor(t,e,i,a,n,o,s,c,r){this.translate=t,this.http=e,this.notify=i,this.headerService=a,this.appService=n,this.dialog=o,this.functions=s,this.adminService=c,this.viewContainerRef=r,this.alfrescoUrl="",this.accounts=[],this.loading=!1,this.displayedColumns=["label","entitiesLabel","actions"],this.filterColumns=["label","entitiesLabel"]}ngOnInit(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.alfresco")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/alfresco/configuration").pipe(Object(Ry.filter)(t=>!this.functions.empty(t.configuration)),Object(xt.tap)(t=>{this.alfrescoUrl=t.configuration.uri})).subscribe(),this.http.get("../rest/alfresco/accounts").subscribe(t=>{this.accounts=t.accounts,this.loading=!1,setTimeout(()=>{this.adminService.setDataSource("admin_alfresco",this.accounts,this.sort,this.paginator,this.filterColumns)},0)})}deleteAccount(t){this.dialogRef=this.dialog.open(q.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete"),msg:this.translate.instant("lang.confirmAction")}}),this.dialogRef.afterClosed().pipe(Object(Ry.filter)(t=>"ok"===t),Object(Ty.exhaustMap)(()=>this.http.delete("../rest/alfresco/accounts/"+t)),Object(xt.tap)(()=>{this.accounts=this.accounts.filter(e=>e.id!==t),setTimeout(()=>{this.adminService.setDataSource("admin_alfresco",this.accounts,this.sort,this.paginator,this.filterColumns)},0),this.notify.success(this.translate.instant("lang.accountDeleted"))}),Object(X.catchError)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}saveUrl(){this.http.put("../rest/alfresco/configuration",{uri:this.alfrescoUrl}).pipe(Object(X.catchError)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a),p.Qb(z.b),p.Qb(D.a),p.Qb(St),p.Qb(p.T))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(Py,!0),p.Xc(N.a,!0),p.Xc(H.a,!0)),2&t&&(p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.paginator=i.first),p.yc(i=p.ec())&&(e.sort=i.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/alfresco/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-12"],["appearance","outline"],["matInput","","required","","name","accountId","id","accountId","type","text","placeholder","https://alfresco/api/",3,"ngModel","title","ngModelChange","blur"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSortDisableClear","","matSort","",3,"dataSource"],["table",""],["matColumnDef","label"],["mat-sort-header","",3,"hide-for-mobile",4,"matHeaderCellDef"],[3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","entitiesLabel"],["mat-sort-header","","style","flex: 2",4,"matHeaderCellDef"],["style","flex: 2",4,"matCellDef"],["matColumnDef","actions"],["style","flex:none",4,"matHeaderCellDef"],["style","flex:none;justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header",""],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],["class","label",4,"ngFor","ngForOf"],[1,"label"],[2,"flex","none"],[2,"flex","none","justify-content","flex-end"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,Qy,9,6,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,Fy,2,0,"div",9),p.Oc(14,Xy,31,19,"mat-card",10),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading))},directives:[C.e,C.f,M.a,x.a,O.t,wt.h,wt.g,wt.d,o.f,It.a,wt.c,k.l,I.c,j.a,S.c,S.g,w.b,c.d,c.F,c.u,c.x,c.j,N.a,G.o,H.a,G.c,G.i,G.b,G.k,G.n,G.h,H.b,G.a,O.s,R.b,kt.b,G.j,G.m,o.d],pipes:[h.d],styles:[".label[_ngcontent-%COMP%]{white-space:break-spaces;background:#135f7f;margin:5px}"]}),t})();var qy=i("OigG");const Ky=["appContactDetail"];function Jy(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",13),p.dc("click",(function(){p.Dc(t);const e=p.hc().$implicit,i=p.hc();return i.toggleExcludeContact(e),i.mergeContact()})),p.Qc(1),p.ic(2,"translate"),p.Vb()}2&t&&(p.Db(1),p.Rc(p.jc(2,1,"lang.exludeContact")))}function Yy(t,e){1&t&&p.Rb(0,"i",14)}function Zy(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",15),p.dc("click",(function(){p.Dc(t);const e=p.hc().$implicit,i=p.hc();return i.toggleExcludeContact(e),i.mergeContact()})),p.Rb(1,"i",16),p.Qc(2),p.ic(3,"translate"),p.Vb()}2&t&&(p.Db(2),p.Sc("\xa0",p.jc(3,1,"lang.contactExcluded"),""))}function tD(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",7),p.Wb(1,"app-contact-detail",8,9),p.dc("afterSelectedEvent",(function(){p.Dc(t);const i=e.index;return p.hc().mergeContact(i)}))("afterDeselectedEvent",(function(i){p.Dc(t);const a=e.index;return p.hc().resetContact(i,a)})),p.Vb(),p.Oc(3,Jy,3,3,"button",10),p.Oc(4,Yy,1,0,"i",11),p.Oc(5,Zy,4,3,"button",12),p.Vb()}if(2&t){const t=e.$implicit,i=e.index,a=p.hc();p.Db(1),p.Ib("merged",a.contactSelected!==i&&null!==a.contactSelected&&-1===a.contactsExcluded.indexOf(t.id)),p.oc("contact",t)("selectable",a.contactSelected===i||null===a.contactSelected),p.Db(2),p.oc("ngIf",a.contactSelected!==i&&null!==a.contactSelected&&-1===a.contactsExcluded.indexOf(t.id)),p.Db(1),p.oc("ngIf",a.contactSelected!==i&&null!==a.contactSelected&&a.contactsExcluded.indexOf(t.id)>-1),p.Db(1),p.oc("ngIf",a.contactSelected!==i&&null!==a.contactSelected&&a.contactsExcluded.indexOf(t.id)>-1)}}let eD=(()=>{class t{constructor(t,e,i,a,n,o,s){this.translate=t,this.http=e,this.notify=i,this.data=a,this.dialogRef=n,this.headerService=o,this.functionsService=s,this.loading=!1,this.contactSelected=null,this.contactsExcluded=[]}ngOnInit(){}mergeContact(t=this.contactSelected){this.appContactDetail.toArray()[t].resetContact(),this.appContactDetail.toArray()[t].contact.selected=!0,this.functionsService.empty(t)||(this.contactSelected=t),this.data.duplicate.forEach((e,i)=>{-1===this.contactsExcluded.indexOf(this.appContactDetail.toArray()[i].getContactInfo().id)&&Object.keys(this.appContactDetail.toArray()[i].getContactInfo()).forEach(e=>{"customFields"!==e||this.functionsService.empty(this.appContactDetail.toArray()[i].getContactInfo()[e])?"civility"!==e||this.functionsService.empty(this.appContactDetail.toArray()[i].getContactInfo()[e].id)?this.functionsService.empty(this.appContactDetail.toArray()[t].getContactInfo()[e])&&this.appContactDetail.toArray()[t].getContactInfo()[e]!==this.appContactDetail.toArray()[i].getContactInfo()[e]&&this.appContactDetail.toArray()[t].setContactInfo(e,this.appContactDetail.toArray()[i].getContactInfo()[e]):this.appContactDetail.toArray()[t].setContactInfo(e,this.appContactDetail.toArray()[i].getContactInfo()[e]):this.appContactDetail.toArray()[i].getContactInfo()[e].forEach(i=>{0===this.appContactDetail.toArray()[t].getContactInfo()[e].filter(t=>t.label===i.label).length&&this.appContactDetail.toArray()[t].setContactInfo(e,i)})})})}toggleExcludeContact(t){const e=this.contactsExcluded.indexOf(t.id);-1===e?this.contactsExcluded.push(t.id):this.contactsExcluded.splice(e,1)}resetContact(t,e){this.contactSelected=null,this.appContactDetail.toArray()[e].resetContact()}onSubmit(){this.loading=!0;const t=this.data.duplicate.filter((t,e)=>e===this.contactSelected).map(t=>t.id)[0],e=this.data.duplicate.filter((t,e)=>e!==this.contactSelected).filter((t,e)=>-1===this.contactsExcluded.indexOf(t.id)).map(t=>t.id);this.http.put(`../rest/contacts/${t}/merge`,{duplicates:e}).pipe(Object(d.a)(()=>{this.dialogRef.close(e.length===this.data.duplicate.length-1?"removeAll":e)}),Object(vt.a)(()=>this.loading=!1),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(z.a),p.Qb(z.h),p.Qb(m.a),p.Qb(D.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["app-manage-duplicate"]],viewQuery:function(t,e){var i;1&t&&p.Xc(Ky,!0),2&t&&p.yc(i=p.ec())&&(e.appContactDetail=i)},decls:11,vars:12,consts:[[1,"mat-dialog-content-container"],["mat-dialog-content","",1,"contact-list-container"],["style","position: relative;",4,"ngFor","ngForOf"],[1,"divider-modal"],["mat-dialog-actions","",1,"actions"],["mat-raised-button","","mat-button","","color","primary",3,"disabled","click"],["mat-raised-button","","mat-button","",3,"mat-dialog-close"],[2,"position","relative"],[2,"height","100%",3,"contact","selectable","afterSelectedEvent","afterDeselectedEvent"],["appContactDetail",""],["mat-raised-button","","mat-button","","style","position: absolute;bottom: 0px;left: 50%;transform: translateX(-50%);",3,"click",4,"ngIf"],["class","fas fa-ban excludeLogo",4,"ngIf"],["mat-raised-button","","mat-button","","color","primary","style","position: absolute;bottom: 0px;left: 50%;transform: translateX(-50%);",3,"click",4,"ngIf"],["mat-raised-button","","mat-button","",2,"position","absolute","bottom","0px","left","50%","transform","translateX(-50%)",3,"click"],[1,"fas","fa-ban","excludeLogo"],["mat-raised-button","","mat-button","","color","primary",2,"position","absolute","bottom","0px","left","50%","transform","translateX(-50%)",3,"click"],[1,"fas","fa-ban"]],template:function(t,e){1&t&&(p.Wb(0,"div",0),p.Wb(1,"div",1),p.Oc(2,tD,6,7,"div",2),p.Vb(),p.Rb(3,"span",3),p.Wb(4,"div",4),p.Wb(5,"button",5),p.dc("click",(function(){return e.onSubmit()})),p.Qc(6),p.ic(7,"translate"),p.Vb(),p.Wb(8,"button",6),p.Qc(9),p.ic(10,"translate"),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(1),p.Ib("contact-list-container-1",1==e.data.duplicate.length)("contact-list-container-2",2==e.data.duplicate.length),p.Db(1),p.oc("ngForOf",e.data.duplicate),p.Db(3),p.oc("disabled",null===e.contactSelected||e.loading||e.contactsExcluded.length===e.data.duplicate.length-1),p.Db(1),p.Rc(p.jc(7,8,"lang.merge")),p.Db(3),p.Rc(p.jc(10,10,"lang.cancel")))},directives:[z.f,O.s,z.c,R.b,z.d,qy.a,O.t],pipes:[h.d],styles:[".merged[_ngcontent-%COMP%]{opacity:.5}.contact-list-container[_ngcontent-%COMP%]{padding:20px;display:grid;grid-template-columns:repeat(3,33%);grid-gap:10px}.contact-list-container-1[_ngcontent-%COMP%]{grid-template-columns:1fr}.contact-list-container-2[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.excludeLogo[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:80px;color:#8e3e52}"]}),t})();var iD=i("vxfF");const aD=["adminMenuTemplate"];function nD(t,e){if(1&t&&(p.Wb(0,"a",19),p.Rb(1,"mat-icon",20),p.Wb(2,"p",21),p.Qc(3),p.Vb(),p.Vb()),2&t){const t=e.$implicit;p.Ib("active",t.current),p.oc("routerLink",t.route),p.Db(1),p.Fb(t.icon),p.Db(2),p.Sc(" ",t.label," ")}}function oD(t,e){if(1&t&&(p.Wb(0,"mat-nav-list"),p.Oc(1,nD,4,6,"a",18),p.Vb()),2&t){const t=p.hc();p.Db(1),p.oc("ngForOf",t.subMenus)}}function sD(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-chip",31),p.dc("removed",(function(){p.Dc(t);const i=e.$implicit;return p.hc(2).removeCriteria(i)}))("click",(function(){p.Dc(t);const i=e.$implicit;return p.hc(2).removeCriteria(i)})),p.Qc(1),p.Rb(2,"mat-icon",32),p.Vb()}if(2&t){const t=e.$implicit;p.oc("removable",!0),p.Db(1),p.Sc(" ",t.label," ")}}function cD(t,e){if(1&t){const t=p.Xb();p.Wb(0,"div",22),p.Wb(1,"mat-accordion",23),p.Wb(2,"mat-expansion-panel",24),p.Wb(3,"mat-expansion-panel-header"),p.Wb(4,"mat-panel-title"),p.Qc(5),p.ic(6,"translate"),p.Vb(),p.Vb(),p.Wb(7,"plugin-select-search",25),p.dc("afterSelected",(function(e){return p.Dc(t),p.hc().addCriteria(e)})),p.Vb(),p.Rb(8,"mat-divider",26),p.Wb(9,"mat-chip-list",27),p.Oc(10,sD,3,2,"mat-chip",28),p.Vb(),p.Wb(11,"div",29),p.Wb(12,"button",30),p.dc("click",(function(){return p.Dc(t),p.hc().searchDuplicates()})),p.Qc(13),p.ic(14,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc();p.Db(2),p.oc("expanded",t.openedSearchTool),p.Db(3),p.Sc(" ",p.jc(6,9,"lang.criteriaSearch")," "),p.Db(2),p.oc("label",t.translate.instant("lang.addCriteria"))("formControlSelect",t.addCriteriaSelect)("placeholderLabel",t.translate.instant("lang.addCriteria"))("datas",t.contactFields),p.Db(3),p.oc("ngForOf",t.currentFieldsSearch),p.Db(2),p.oc("disabled",0===t.currentFieldsSearch.length||t.isLoadingResults),p.Db(1),p.Rc(p.jc(14,11,"lang.launchSearch"))}}function rD(t,e){1&t&&(p.Wb(0,"div",33),p.Wb(1,"em"),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Vb()),2&t&&(p.Db(2),p.Rc(p.jc(3,1,"lang.noDuplicatesFound")))}const lD=function(t,e){return{value1:t,value2:e}};function dD(t,e){if(1&t&&(p.Wb(0,"div",34),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t){const t=p.hc();p.Db(1),p.Sc(" ",p.kc(2,1,"lang.duplicatesContactDisplayed",p.wc(4,lD,t.duplicatesContactsRealCount,t.duplicatesContactsCount))," ")}}function bD(t,e){if(1&t&&(p.Wb(0,"span",38),p.Qc(1),p.Vb()),2&t){const t=e.$implicit,i=p.hc(2);p.Db(1),p.Sc(" ",i.getLabel(t)," ")}}function pD(t,e){if(1&t&&(p.Wb(0,"mat-list",15),p.Wb(1,"mat-list-item",35),p.Wb(2,"p",36),p.Oc(3,bD,2,1,"span",37),p.Vb(),p.Vb(),p.Vb()),2&t){const t=p.hc();p.Db(2),p.Gb("contact-list-container-",t.displayedColumns.length,""),p.Db(1),p.oc("ngForOf",t.displayedColumns)}}function hD(t,e){if(1&t&&(p.Wb(0,"span",42),p.Qc(1),p.Vb()),2&t){const t=e.$implicit,i=p.hc().$implicit;p.Db(1),p.Sc(" ",i[t]," ")}}function uD(t,e){if(1&t){const t=p.Xb();p.Ub(0),p.Wb(1,"mat-list-item",39),p.dc("mouseover",(function(){p.Dc(t);const i=e.$implicit;return p.hc().selectDuplicates(i.duplicateId)}))("click",(function(){p.Dc(t);const i=e.$implicit;return p.hc().manageDuplicate(i.duplicateId)})),p.Wb(2,"p",40),p.Oc(3,hD,2,1,"span",41),p.Vb(),p.Vb(),p.Tb()}if(2&t){const t=e.$implicit,i=e.index,a=p.hc();p.Db(1),p.Ib("odd",void 0!==a.duplicatesContacts[i+1]&&t.odd!==a.duplicatesContacts[i+1].odd)("hovered",t.duplicateId===a.currentDuplicateId),p.Db(1),p.Gb("contact-list-container-",a.displayedColumns.length,""),p.Db(1),p.oc("ngForOf",a.displayedColumns)}}function mD(t,e){1&t&&(p.Wb(0,"div",43),p.Rb(1,"mat-spinner"),p.Vb())}let fD=(()=>{class t{constructor(t,e,i,a,n,o,s,r,l,d){this.translate=t,this.http=e,this.notify=i,this.headerService=a,this.appService=n,this.dialog=o,this.functions=s,this.sortPipe=r,this.viewContainerRef=l,this.functionsService=d,this.loading=!0,this.subMenus=[{icon:"fa fa-book",route:"/administration/contacts/list",label:this.translate.instant("lang.contactsList"),current:!1},{icon:"fa fa-code",route:"/administration/contacts/contactsCustomFields",label:this.translate.instant("lang.customFieldsAdmin"),current:!1},{icon:"fa fa-cog",route:"/administration/contacts/contacts-parameters",label:this.translate.instant("lang.contactsParameters"),current:!1},{icon:"fa fa-users",route:"/administration/contacts/contacts-groups",label:this.translate.instant("lang.contactsGroups"),current:!1},{icon:"fas fa-magic",route:"/administration/contacts/duplicates",label:this.translate.instant("lang.duplicatesContactsAdmin"),current:!0}],this.contactFields=[],this.addCriteriaSelect=new c.i,this.currentFieldsSearch=[],this.currentDuplicateId=null,this.duplicatesContacts=[],this.duplicatesContactsCount=-1,this.duplicatesContactsRealCount=0,this.displayedColumns=["companyLastname","lastname","company"],this.isLoadingResults=!1,this.openedSearchTool=!0}ngOnInit(){return Object(gt.a)(this,void 0,void 0,(function*(){this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.headerService.setHeader(this.translate.instant("lang.contactsDuplicates"),"",""),yield this.getContactFields(),this.setDefaultSearchCriteria(),this.loading=!1}))}getContactFields(){return new Promise((t,e)=>{this.http.get("../rest/contactsParameters").pipe(Object(l.a)(t=>{const e=/contactCustomField_[.]*/g;return t.contactsParameters=t.contactsParameters.filter(t=>null===t.identifier.match(e)).map(t=>Object.assign(Object.assign({},t),{label:this.translate.instant("lang.contactsParameters_"+t.identifier)})),t.contactsParameters}),Object(d.a)(t=>{this.contactFields=t}),Object(J.a)(()=>this.http.get("../rest/contactsCustomFields")),Object(l.a)(t=>(t.customFields=t.customFields.map(t=>Object.assign(Object.assign({},t),{id:"contactCustomField_"+t.id,identifier:"contactCustomField_"+t.id})),t.customFields)),Object(d.a)(e=>{this.contactFields=this.contactFields.concat(e),this.contactFields=this.sortPipe.transform(this.contactFields,"label"),t(!0)}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()})}setDefaultSearchCriteria(t=["lastname","company"]){this.contactFields.filter(e=>t.indexOf(e.identifier)>-1).forEach(t=>{t.disabled=!0,this.currentFieldsSearch.push(t)})}addCriteria(t){this.contactFields.filter(e=>e.id===t).forEach(t=>{t.disabled=!0,this.currentFieldsSearch.push(t)}),this.addCriteriaSelect.reset()}removeCriteria(t){this.contactFields.forEach((e,i)=>{e.id===t.id&&(this.currentFieldsSearch=this.currentFieldsSearch.filter(e=>e.id!==t.id),e.disabled=!1)})}searchDuplicates(){this.duplicatesContacts=[],this.isLoadingResults=!0;const t="?criteria[]="+this.currentFieldsSearch.map(t=>t.identifier).join("&criteria[]=");this.http.get("../rest/duplicatedContacts"+t).pipe(Object(l.a)(t=>(this.duplicatesContactsRealCount=t.realCount,this.duplicatesContactsCount=t.returnedCount,t.contacts.forEach((e,i)=>{e.odd=0===i||(void 0!==t.contacts[i-1]&&t.contacts[i-1].duplicateId===e.duplicateId?t.contacts[i-1].odd:!t.contacts[i-1].odd);const a=[];a.push(e.company),a.push(e.lastname),e.companyLastname=a.filter(t=>!this.functions.empty(t)).join(" / "),this.functionsService.empty(e.customFields)||Object.keys(e.customFields).forEach(t=>{e[t]=e.customFields[t]})}),t.contacts)),Object(d.a)(t=>{this.duplicatesContacts=t,setTimeout(()=>{const t=/contactCustomField_[.]*/g;this.displayedColumns=this.currentFieldsSearch.filter(e=>null===e.identifier.match(t)).map(t=>t.identifier).concat(this.currentFieldsSearch.filter(e=>null!==e.identifier.match(t)).map(t=>t.identifier.replace("contactCustomField_",""))),this.displayedColumns.unshift("companyLastname"),this.openedSearchTool=!1},0)}),Object(vt.a)(()=>this.isLoadingResults=!1),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}selectDuplicates(t){this.currentDuplicateId=t}manageDuplicate(t){this.dialog.open(eD,{panelClass:"maarch-modal",data:{duplicate:this.duplicatesContacts.filter(e=>e.duplicateId===t).map(t=>({id:t.id,type:"contact"}))}}).afterClosed().pipe(Object(K.a)(t=>!this.functionsService.empty(t)),Object(d.a)(e=>{this.notify.success(this.translate.instant("lang.contactsMerged")),this.duplicatesContactsCount--,this.duplicatesContactsRealCount--,this.duplicatesContacts=this.duplicatesContacts.filter("removeAll"!==e?t=>-1===e.indexOf(t.id):e=>e.duplicateId!==t)}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}getLabel(t){return void 0!==this.translate.instant("lang.contactsParameters_"+t)?this.translate.instant("lang.contactsParameters_"+t):void 0!==this.translate.instant("lang."+t)?this.translate.instant("lang."+t):this.contactFields.filter(e=>e.id==="contactCustomField_"+t)[0].label}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a),p.Qb(z.b),p.Qb(D.a),p.Qb(T.a),p.Qb(p.T),p.Qb(D.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["app-contact-duplicate"]],viewQuery:function(t,e){var i;1&t&&p.Kc(aD,!0),2&t&&p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first)},features:[p.Cb([T.a])],decls:22,vars:12,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content",2,"display","flex","flex-direction","column","overflow","hidden"],["class","criteria-container",4,"ngIf"],["style","padding: 10px;text-align: center;color: rgba(0,0,0,0.54);",4,"ngIf"],["style","padding: 10px;text-align: right;color: rgba(0,0,0,0.54);",4,"ngIf"],["role","list",4,"ngIf"],[2,"position","relative","height","100%","overflow","auto"],["itemSize","48",1,"example-viewport"],["role","list"],[4,"cdkVirtualFor","cdkVirtualForOf"],["class","example-loading-shade",4,"ngIf"],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],["mat-line",""],[1,"criteria-container"],[2,"margin-bottom","10px"],[3,"expanded"],[3,"label","formControlSelect","placeholderLabel","datas","afterSelected"],[2,"margin-top","20px","margin-bottom","20px"],[1,"checkbox-selected-list"],["selected","",3,"removable","removed","click",4,"ngFor","ngForOf"],[1,"col-md-12","text-center"],["mat-raised-button","","color","primary","type","button",3,"disabled","click"],["selected","",3,"removable","removed","click"],["matChipRemove","",1,"fa","fa-times-circle"],[2,"padding","10px","text-align","center","color","rgba(0,0,0,0.54)"],[2,"padding","10px","text-align","right","color","rgba(0,0,0,0.54)"],["role","listitem"],["mat-line","",2,"font-size","80%","display","grid","grid-gap","10px"],["class","primary","style","overflow: hidden;text-overflow: ellipsis;",4,"ngFor","ngForOf"],[1,"primary",2,"overflow","hidden","text-overflow","ellipsis"],["role","listitem",2,"cursor","pointer","font-size","14px",3,"mouseover","click"],["mat-line","",2,"display","grid","grid-gap","10px","align-items","center"],["style","overflow: hidden;text-overflow: ellipsis;",4,"ngFor","ngForOf"],[2,"overflow","hidden","text-overflow","ellipsis"],[1,"example-loading-shade"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,oD,2,1,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,cD,15,13,"div",9),p.Oc(14,rD,4,3,"div",10),p.Oc(15,dD,3,7,"div",11),p.Oc(16,pD,4,4,"mat-list",12),p.Wb(17,"div",13),p.Wb(18,"cdk-virtual-scroll-viewport",14),p.Wb(19,"mat-list",15),p.Oc(20,uD,4,8,"ng-container",16),p.Vb(),p.Vb(),p.Oc(21,mD,2,0,"div",17),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",!e.loading),p.Db(1),p.oc("ngIf",0===e.duplicatesContactsCount),p.Db(1),p.oc("ngIf",e.duplicatesContacts.length>0),p.Db(1),p.oc("ngIf",e.duplicatesContacts.length>0),p.Db(4),p.oc("cdkVirtualForOf",e.duplicatesContacts),p.Db(1),p.oc("ngIf",e.isLoadingResults))},directives:[C.e,C.f,M.a,x.a,O.t,iD.e,iD.a,wt.a,iD.d,wt.h,O.s,wt.d,o.f,It.a,wt.c,k.l,Re.a,Re.c,Re.g,Re.h,Br.a,_.a,Un.d,R.b,Un.a,Un.e,I.c],pipes:[h.d],styles:[".example-viewport[_ngcontent-%COMP%]{flex:1;width:100%;background:#fff;height:100%}.example-viewport[_ngcontent-%COMP%]    .cdk-virtual-scroll-content-wrapper{overflow:hidden;text-overflow:ellipsis;width:100%}.active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}.criteria-container[_ngcontent-%COMP%]{margin:20px}.hovered[_ngcontent-%COMP%]{background:rgba(0,0,0,.04)!important;transition:all .3s}.odd[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.12)}.contact-list-container-1[_ngcontent-%COMP%]{grid-template-columns:1fr}.contact-list-container-2[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.contact-list-container-3[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}.contact-list-container-4[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}.contact-list-container-5[_ngcontent-%COMP%]{grid-template-columns:repeat(5,1fr)}"]}),t})();const gD=["adminMenuTemplate"];function vD(t,e){if(1&t&&(p.Wb(0,"a",16),p.Rb(1,"mat-icon",17),p.Wb(2,"p",14),p.Qc(3),p.Vb(),p.Vb()),2&t){const t=e.$implicit;p.Ib("active",t.current),p.oc("routerLink",t.route),p.Db(1),p.Fb(t.icon),p.Db(2),p.Sc(" ",t.label," ")}}function yD(t,e){if(1&t&&(p.Wb(0,"mat-nav-list"),p.Wb(1,"h3",11),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"a",12),p.Rb(5,"mat-icon",13),p.Wb(6,"p",14),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Rb(9,"mat-divider"),p.Wb(10,"mat-nav-list"),p.Oc(11,vD,4,6,"a",15),p.Vb()),2&t){const t=p.hc();p.Db(2),p.Rc(p.jc(3,3,"lang.actions")),p.Db(5),p.Sc(" ",p.jc(8,5,"lang.add")," "),p.Db(4),p.oc("ngForOf",t.subMenus)}}function DD(t,e){1&t&&(p.Wb(0,"div",18),p.Rb(1,"mat-spinner",19),p.Vb())}function VD(t,e){1&t&&(p.Wb(0,"mat-header-cell",39),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc("",p.jc(2,1,"lang.coclicoNumber")," "))}function CD(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.accountNumber," ")}}function MD(t,e){1&t&&(p.Wb(0,"mat-header-cell",39),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc(" ",p.jc(2,1,"lang.label")," "))}function WD(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.label," ")}}function xD(t,e){1&t&&(p.Wb(0,"mat-header-cell",39),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc(" ",p.jc(2,1,"lang.postOffice")," "))}function OD(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.postOfficeLabel," ")}}function _D(t,e){1&t&&p.Rb(0,"mat-header-cell")}function SD(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-cell",40),p.Wb(1,"button",41),p.dc("click",(function(i){p.Dc(t);const a=e.$implicit,n=p.hc(2);return i.stopPropagation(),n.delete(a)})),p.ic(2,"translate"),p.Rb(3,"mat-icon",42),p.Vb(),p.Vb()}2&t&&(p.Db(1),p.pc("matTooltip",p.jc(2,1,"lang.delete")))}function wD(t,e){1&t&&p.Rb(0,"mat-header-row")}function ID(t,e){1&t&&(p.Rb(0,"mat-row",43),p.ic(1,"translate")),2&t&&(p.qc("routerLink","/administration/issuingSites/",e.$implicit.id,""),p.pc("matTooltip",p.jc(1,2,"lang.view")))}function jD(t,e){if(1&t&&(p.Wb(0,"mat-card",20),p.Wb(1,"div",21),p.Wb(2,"div",22),p.Wb(3,"mat-form-field"),p.Rb(4,"input",23),p.ic(5,"translate"),p.Vb(),p.Vb(),p.Wb(6,"div",22),p.Rb(7,"mat-paginator",24,25),p.Vb(),p.Vb(),p.Wb(9,"mat-table",26,27),p.Ub(11,28),p.Oc(12,VD,3,3,"mat-header-cell",29),p.Oc(13,CD,2,1,"mat-cell",30),p.Tb(),p.Ub(14,31),p.Oc(15,MD,3,3,"mat-header-cell",29),p.Oc(16,WD,2,1,"mat-cell",30),p.Tb(),p.Ub(17,32),p.Oc(18,xD,3,3,"mat-header-cell",29),p.Oc(19,OD,2,1,"mat-cell",30),p.Tb(),p.Ub(20,33),p.Oc(21,_D,1,0,"mat-header-cell",34),p.Oc(22,SD,4,3,"mat-cell",35),p.Tb(),p.Oc(23,wD,1,0,"mat-header-row",36),p.Oc(24,ID,2,4,"mat-row",37),p.Vb(),p.Wb(25,"div",38),p.Qc(26),p.ic(27,"translate"),p.Vb(),p.Vb()),2&t){const t=p.hc();p.Db(4),p.pc("placeholder",p.jc(5,10,"lang.filterBy")),p.oc("formControl",t.adminService.getFilterField()),p.Db(3),p.oc("length",100)("hidePageSize",!0)("pageSize",10),p.Db(2),p.oc("dataSource",t.adminService.getDataSource()),p.Db(14),p.oc("matHeaderRowDef",t.displayedColumns),p.Db(1),p.oc("matRowDefColumns",t.displayedColumns),p.Db(2),p.Tc(" ",t.data.length," ",p.jc(27,12,"lang.issuingSites"),"")}}let kD=(()=>{class t{constructor(t,e,i,a,n,o,s,c,r){this.translate=t,this.http=e,this.notify=i,this.headerService=a,this.appService=n,this.functions=o,this.adminService=s,this.viewContainerRef=c,this.dialog=r,this.subMenus=[{icon:"fas fa-dolly-flatbed",route:"/administration/registeredMails",label:this.translate.instant("lang.registeredMailNumberRanges"),current:!1},{icon:"fas fa-warehouse",route:"/administration/issuingSites",label:this.translate.instant("lang.issuingSites"),current:!0}],this.parameters={},this.loading=!0,this.data=[],this.displayedColumns=["accountNumber","label","postOfficeLabel","actions"],this.filterColumns=["accountNumber","label","postOfficeLabel"]}ngOnInit(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.issuingSites")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!1,this.getData()}getData(){this.data=[],this.http.get("../rest/registeredMail/sites").pipe(Object(xt.tap)(t=>{this.data=t.sites,this.loading=!1,setTimeout(()=>{this.adminService.setDataSource("admin_regitered_mail_issuing_site",this.data,this.sort,this.paginator,this.filterColumns)},0)}),Object(X.catchError)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}delete(t){this.dialog.open(q.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete"),msg:this.translate.instant("lang.confirmAction")}}).afterClosed().pipe(Object(K.a)(t=>"ok"===t),Object(J.a)(()=>this.http.delete("../rest/registeredMail/sites/"+t.id)),Object(xt.tap)(()=>{this.data=this.data.filter(e=>e.id!==t.id),setTimeout(()=>{this.adminService.setDataSource("admin_regitered_mail_issuing_site",this.data,this.sort,this.paginator,this.filterColumns)},0),this.notify.success(this.translate.instant("lang.issuingSiteDeleted"))}),Object(X.catchError)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a),p.Qb(D.a),p.Qb(St),p.Qb(p.T),p.Qb(z.b))},t.\u0275cmp=p.Kb({type:t,selectors:[["app-issuing-site-list"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(gD,!0),p.Xc(N.a,!0),p.Xc(H.a,!0)),2&t&&(p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.paginator=i.first),p.yc(i=p.ec())&&(e.sort=i.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/issuingSites/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","accountNumber"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","label"],["matColumnDef","postOfficeLabel"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header",""],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,yD,12,7,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,DD,2,0,"div",9),p.Oc(14,jD,28,14,"mat-card",10),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading))},directives:[C.e,C.f,M.a,x.a,O.t,wt.h,wt.g,wt.d,o.f,It.a,wt.c,k.l,_.a,O.s,I.c,j.a,S.c,w.b,c.d,c.u,c.j,N.a,G.o,H.a,G.c,G.i,G.b,G.k,G.n,G.h,H.b,G.a,R.b,kt.b,G.j,G.m,o.d],pipes:[h.d],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}"]}),t})();const RD=["maarchTree"];function TD(t,e){1&t&&(p.Wb(0,"div",15),p.Rb(1,"mat-spinner",16),p.Vb())}function PD(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",49),p.dc("click",(function(){p.Dc(t);const i=e.$implicit;return p.hc(2).addressBANCurrentDepartment=i})),p.Qc(1),p.Vb()}if(2&t){const t=e.$implicit;p.Db(1),p.Rc(t)}}function QD(t,e){if(1&t&&(p.Wb(0,"mat-option",50),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t),p.Db(1),p.Sc(" ",t.address," ")}}function FD(t,e){if(1&t&&(p.Ub(0),p.Oc(1,QD,2,2,"mat-option",46),p.ic(2,"async"),p.Tb()),2&t){const t=p.hc(2);p.Db(1),p.oc("ngForOf",p.jc(2,1,t.addressBANFilteredResult))}}function LD(t,e){if(1&t&&p.Rb(0,"mat-option",51),2&t){const t=p.hc(2);p.oc("innerHTML",t.addressBANInfo,p.Ec)}}function ED(t,e){1&t&&(p.Wb(0,"mat-option",52),p.Rb(1,"mat-spinner",53),p.Vb())}function AD(t,e){if(1&t&&(p.Wb(0,"mat-option",50),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t),p.Db(1),p.Sc(" ",t," ")}}function UD(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-card",17),p.Wb(1,"form",18),p.dc("ngSubmit",(function(){return p.Dc(t),p.hc().onSubmit()})),p.Wb(2,"div"),p.Wb(3,"mat-form-field"),p.Wb(4,"mat-label"),p.Qc(5),p.ic(6,"translate"),p.Vb(),p.Rb(7,"input",19),p.Vb(),p.Wb(8,"mat-form-field"),p.Wb(9,"mat-label"),p.Qc(10),p.ic(11,"translate"),p.Vb(),p.Rb(12,"input",20),p.Vb(),p.Wb(13,"mat-form-field"),p.Wb(14,"mat-label"),p.Qc(15),p.ic(16,"translate"),p.Vb(),p.Rb(17,"input",21),p.Vb(),p.Wb(18,"div",22),p.Wb(19,"div",23),p.Qc(20),p.ic(21,"translate"),p.Vb(),p.Wb(22,"mat-form-field",24),p.Wb(23,"button",25),p.dc("click",(function(e){return p.Dc(t),e.stopPropagation()})),p.Qc(24),p.Rb(25,"i",26),p.Vb(),p.Wb(26,"mat-menu",null,27),p.Oc(28,PD,2,1,"button",28),p.Vb(),p.Rb(29,"mat-icon",29),p.Wb(30,"input",30,31),p.dc("click",(function(e){return p.Dc(t),e.stopPropagation()}))("focus",(function(){return p.Dc(t),p.hc().resetAutocompleteAddressBan()})),p.Vb(),p.Wb(32,"mat-autocomplete",32,33),p.dc("optionSelected",(function(e){return p.Dc(t),p.hc().selectAddressBan(e)})),p.Oc(34,FD,3,3,"ng-container",34),p.Oc(35,LD,1,1,"mat-option",35),p.Oc(36,ED,2,0,"mat-option",36),p.Vb(),p.Vb(),p.Wb(37,"mat-form-field"),p.Wb(38,"mat-label"),p.Qc(39),p.ic(40,"translate"),p.Vb(),p.Rb(41,"input",37),p.Vb(),p.Wb(42,"mat-form-field"),p.Wb(43,"mat-label"),p.Qc(44),p.ic(45,"translate"),p.Vb(),p.Rb(46,"input",38),p.Vb(),p.Wb(47,"mat-form-field"),p.Wb(48,"mat-label"),p.Qc(49),p.ic(50,"translate"),p.Vb(),p.Rb(51,"input",39),p.Vb(),p.Wb(52,"mat-form-field"),p.Wb(53,"mat-label"),p.Qc(54),p.ic(55,"translate"),p.Vb(),p.Rb(56,"input",40),p.Vb(),p.Wb(57,"mat-form-field"),p.Wb(58,"mat-label"),p.Qc(59),p.ic(60,"translate"),p.Vb(),p.Rb(61,"input",41),p.Vb(),p.Wb(62,"mat-form-field"),p.Wb(63,"mat-label"),p.Qc(64),p.ic(65,"translate"),p.Vb(),p.Rb(66,"input",42),p.Vb(),p.Wb(67,"mat-form-field"),p.Wb(68,"mat-label"),p.Qc(69),p.ic(70,"translate"),p.Vb(),p.Rb(71,"input",43,31),p.Wb(73,"mat-autocomplete",44,45),p.dc("optionSelected",(function(e){return p.Dc(t),p.hc().adminFormGroup.controls.addressCountry.setValue(e.option.value)})),p.Oc(75,AD,2,2,"mat-option",46),p.ic(76,"async"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(77,"div",47),p.Wb(78,"button",48),p.Qc(79),p.ic(80,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.zc(27),e=p.zc(33),i=p.zc(74),a=p.hc();p.Db(1),p.oc("formGroup",a.adminFormGroup),p.Db(4),p.Rc(p.jc(6,26,"lang.siteName")),p.Db(5),p.Rc(p.jc(11,28,"lang.coclicoNumber")),p.Db(5),p.Rc(p.jc(16,30,"lang.postOffice")),p.Db(5),p.Sc(" ",p.jc(21,32,"lang.address")," "),p.Db(3),p.oc("matMenuTriggerFor",t)("title",a.translate.instant("lang.targetDepartment")),p.Db(1),p.Sc(" ",a.addressBANCurrentDepartment,"\xa0"),p.Db(4),p.oc("ngForOf",a.departmentList),p.Db(2),p.oc("placeholder",a.translate.instant("lang.searchAddressBan"))("formControl",a.addressBANControl)("matAutocomplete",e),p.Db(4),p.oc("ngIf",a.addressBANResult.length>0&&!a.addressBANLoading),p.Db(1),p.oc("ngIf",0===a.addressBANResult.length&&!a.addressBANLoading),p.Db(1),p.oc("ngIf",a.addressBANLoading),p.Db(3),p.Rc(p.jc(40,34,"lang.contactsParameters_addressAdditional1")),p.Db(5),p.Rc(p.jc(45,36,"lang.contactsParameters_addressNumber")),p.Db(5),p.Rc(p.jc(50,38,"lang.contactsParameters_addressStreet")),p.Db(5),p.Rc(p.jc(55,40,"lang.contactsParameters_addressAdditional2")),p.Db(5),p.Rc(p.jc(60,42,"lang.contactsParameters_addressPostcode")),p.Db(5),p.Rc(p.jc(65,44,"lang.contactsParameters_addressTown")),p.Db(5),p.Rc(p.jc(70,46,"lang.contactsParameters_addressCountry")),p.Db(2),p.oc("matAutocomplete",i),p.Db(4),p.oc("ngForOf",p.jc(76,48,a.countriesFilteredResult)),p.Db(3),p.oc("disabled",!a.adminFormGroup.valid),p.Db(1),p.Rc(p.jc(80,50,"lang.save"))}}let $D=(()=>{class t{constructor(t,e,i,a,n,o,s,r,l){this.translate=t,this.http=e,this.route=i,this.router=a,this.notify=n,this.headerService=o,this.appService=s,this._formBuilder=r,this.latinisePipe=l,this.loading=!0,this.entities=[],this.countries=[],this.id=null,this.addressBANInfo="",this.addressBANMode=!0,this.addressBANControl=new c.i,this.addressBANLoading=!1,this.addressBANResult=[],this.addressBANCurrentDepartment="75",this.departmentList=[]}ngOnInit(){this.route.params.subscribe(t=>Object(gt.a)(this,void 0,void 0,(function*(){void 0===t.id?(this.creationMode=!0,this.headerService.setHeader(this.translate.instant("lang.issuingSiteCreation")),this.initBanSearch(),this.initAutocompleteAddressBan(),this.adminFormGroup=this._formBuilder.group({id:[null],label:["",c.I.required],postOfficeLabel:["",c.I.required],accountNumber:["",c.I.required],addressNumber:["",c.I.required],addressStreet:["",c.I.required],addressAdditional1:[""],addressAdditional2:[""],addressPostcode:["",c.I.required],addressTown:["",c.I.required],addressCountry:[""]}),this.getCountries(),this.initAutocompleteCountries(),this.loading=!1,yield this.getEntities(),this.maarchTree.initData(this.entities)):(this.id=t.id,this.creationMode=!1,this.headerService.setHeader(this.translate.instant("lang.issuingSiteModification")),this.initBanSearch(),this.initAutocompleteAddressBan(),yield this.getEntities(),yield this.getData(),this.getCountries(),this.initAutocompleteCountries(),this.maarchTree.initData(this.entities))})))}getData(){return new Promise(t=>{this.http.get("../rest/registeredMail/sites/"+this.id).pipe(Object(d.a)(e=>{this.adminFormGroup=this._formBuilder.group({id:[this.id],label:[e.site.label,c.I.required],postOfficeLabel:[e.site.postOfficeLabel,c.I.required],accountNumber:[e.site.accountNumber,c.I.required],addressNumber:[e.site.addressNumber,c.I.required],addressStreet:[e.site.addressStreet,c.I.required],addressAdditional1:[e.site.addressAdditional1],addressAdditional2:[e.site.addressAdditional2],addressPostcode:[e.site.addressPostcode,c.I.required],addressTown:[e.site.addressTown,c.I.required],addressCountry:[e.site.addressCountry],entities:[e.site.entities]}),this.entities=this.entities.map(t=>Object.assign(Object.assign({},t),{state:{opened:!0,selected:e.site.entities.indexOf(t.id)>-1}})),t(!0),this.loading=!1}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()})}initBanSearch(){this.http.get("../rest/ban/availableDepartments").pipe(Object(d.a)(t=>{null!==t.default&&-1!==t.departments.indexOf(t.default.toString())&&(this.addressBANCurrentDepartment=t.default),this.departmentList=t.departments}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}initAutocompleteCountries(){this.countriesFilteredResult=this.adminFormGroup.controls.addressCountry.valueChanges.pipe(Object(r.a)(""),Object(l.a)(t=>this._filter(t)))}_filter(t){const e=t.toLowerCase();return this.countries.filter(t=>t.toLowerCase().includes(e))}initAutocompleteAddressBan(){this.addressBANInfo=this.translate.instant("lang.autocompleteInfo"),this.addressBANResult=[],this.addressBANControl.valueChanges.pipe(Object(dl.a)(300),Object(K.a)(t=>t.length>2),Object(Ip.a)(),Object(d.a)(()=>this.addressBANLoading=!0),Object(gb.a)(t=>this.http.get("../rest/autocomplete/banAddresses",{params:{address:t,department:this.addressBANCurrentDepartment}})),Object(d.a)(t=>{this.addressBANInfo=0===t.length?this.translate.instant("lang.noAvailableValue"):"",this.addressBANResult=t,this.addressBANFilteredResult=Object(B.of)(this.addressBANResult),this.addressBANLoading=!1})).subscribe()}resetAutocompleteAddressBan(){this.addressBANResult=[],this.addressBANInfo=this.translate.instant("lang.autocompleteInfo")}selectAddressBan(t){this.adminFormGroup.controls.addressNumber.setValue(t.option.value.number),this.adminFormGroup.controls.addressStreet.setValue(t.option.value.afnorName),this.adminFormGroup.controls.addressPostcode.setValue(t.option.value.postalCode),this.adminFormGroup.controls.addressTown.setValue(t.option.value.city),this.adminFormGroup.controls.addressCountry.setValue("FRANCE"),this.addressBANControl.setValue("")}getEntities(){return new Promise(t=>{this.http.get("../rest/entities").pipe(Object(l.a)(t=>(t.entities=t.entities.map(t=>({text:t.entity_label,icon:t.icon,parent_id:t.parentSerialId,id:t.serialId,state:{opened:!0}})),t.entities)),Object(d.a)(e=>{this.entities=e,t(!0)}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()})}getCountries(){this.http.get("../rest/registeredMail/countries").pipe(Object(d.a)(t=>{this.countries=t.countries.map(t=>this.latinisePipe.transform(t.toUpperCase()))}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}onSubmit(){const t={};Object.keys(this.adminFormGroup.controls).forEach(e=>{t[e]=this.adminFormGroup.controls[e].value}),t.entities=this.maarchTree.getSelectedNodes().map(t=>t.id),this.creationMode?this.http.post("../rest/registeredMail/sites",t).subscribe(()=>{this.notify.success(this.translate.instant("lang.issuingSiteAdded")),this.router.navigate(["/administration/issuingSites"])},t=>{this.notify.handleSoftErrors(t)}):this.http.put("../rest/registeredMail/sites/"+this.id,t).subscribe(()=>{this.notify.success(this.translate.instant("lang.issuingSiteUpdated")),this.router.navigate(["/administration/issuingSites"])},t=>{this.notify.handleSoftErrors(t)})}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(o.a),p.Qb(o.c),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a),p.Qb(c.h),p.Qb(v.c))},t.\u0275cmp=p.Kb({type:t,selectors:[["app-issuing-site"]],viewQuery:function(t,e){var i;1&t&&p.Kc(RD,!0),2&t&&p.yc(i=p.ec())&&(e.maarchTree=i.first)},decls:22,vars:14,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",2,"overflow-x","hidden","width","400px",3,"mode","fixedInViewport","opened"],["snav2",""],["mat-subheader",""],[2,"padding","10px"],["maarchTree",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[2,"display","contents",3,"formGroup","ngSubmit"],["matInput","","formControlName","label"],["type","text","pattern","[0-9]+","maxlength","10","matInput","","formControlName","accountNumber"],["matInput","","formControlName","postOfficeLabel"],[1,"formType","ratio-1","col-sm-12"],[1,"formType-title"],["appearance","outline",1,"smallInput"],["type","button","mat-button","","matSuffix","",3,"matMenuTriggerFor","title","click"],[1,"fa","fa-chevron-down"],["menuDep","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["color","primary","matPrefix","",1,"fa","fa-search",2,"font-size","15px"],["type","text","matInput","","maxlength","128",3,"placeholder","formControl","matAutocomplete","click","focus"],["autoCompleteInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[4,"ngIf"],["class","autoCompleteInfoResult smallInputInfo","disabled","",3,"innerHTML",4,"ngIf"],["disabled","",4,"ngIf"],["matInput","","formControlName","addressAdditional1"],["matInput","","formControlName","addressNumber"],["matInput","","formControlName","addressStreet"],["matInput","","formControlName","addressAdditional2"],["matInput","","formControlName","addressPostcode"],["matInput","","formControlName","addressTown"],["matInput","","formControlName","addressCountry",3,"matAutocomplete"],["isOpen","true",3,"optionSelected"],["matAutocompleteCountries","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[2,"text-align","center"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-menu-item","",3,"click"],[3,"value"],["disabled","",1,"autoCompleteInfoResult","smallInputInfo",3,"innerHTML"],["disabled",""],["diameter","20"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Wb(1,"mat-sidenav-content"),p.Wb(2,"div",1),p.Wb(3,"div",2),p.Wb(4,"div",3),p.Rb(5,"header-left"),p.Vb(),p.Wb(6,"div",4),p.Rb(7,"header-right"),p.Vb(),p.Vb(),p.Rb(8,"div",5),p.Vb(),p.Wb(9,"div",6),p.Wb(10,"div",7),p.Oc(11,TD,2,0,"div",8),p.Oc(12,UD,81,52,"mat-card",9),p.Vb(),p.Vb(),p.Vb(),p.Wb(13,"mat-sidenav",10,11),p.Wb(15,"mat-list"),p.Wb(16,"h3",12),p.Qc(17),p.ic(18,"translate"),p.Vb(),p.Wb(19,"div",13),p.Rb(20,"app-maarch-flat-tree",null,14),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(3),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading),p.Db(1),p.oc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!e.appService.getViewMode()),p.Db(4),p.Rc(p.jc(18,12,"lang.chooseEntityAssociationModel")))},directives:[C.e,C.f,M.a,x.a,O.t,C.d,wt.a,wt.g,Te.a,I.c,j.a,c.K,c.v,c.m,S.c,S.g,w.b,c.d,c.u,c.k,c.B,c.p,R.b,S.j,Qe.d,Qe.e,O.s,It.a,S.i,$n.d,c.j,$n.a,Qe.b,k.p],pipes:[h.d,O.b],styles:[".formType[_ngcontent-%COMP%]{align-items:center;display:flex;border-radius:4px;border:1px solid #ccc;position:relative;padding:10px 20px;flex-direction:column}.formType-title[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;max-width:85%;text-overflow:ellipsis;z-index:1;font-size:10px;font-weight:700;background:#fff;position:absolute;top:-7px;left:10px;padding:0;margin:0;color:#135f7f}.formType[_ngcontent-%COMP%]    .mat-slide-toggle-label{color:#666;font-weight:700}.formType[_ngcontent-%COMP%]    .mat-radio-button, .formType[_ngcontent-%COMP%]    .mat-slide-toggle{opacity:.5;color:#666;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.formType[_ngcontent-%COMP%]    .mat-checked, .formType[_ngcontent-%COMP%]    .mat-radio-checked{opacity:1;color:#135f7f}.formType[_ngcontent-%COMP%]    .mat-checked .mat-slide-toggle-label{color:#135f7f}.formType[_ngcontent-%COMP%]    .mat-form-field-suffix{color:#f99830;font-size:15px;top:0}.ratio-1[_ngcontent-%COMP%], .ratio-2[_ngcontent-%COMP%]{flex:1}.smallInput[_ngcontent-%COMP%]{font-size:11px;padding-left:20px;padding-right:20px}.smallInput[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]{width:30px;height:25px;color:#135f7f}.smallInput[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;line-height:normal;align-items:center}.smallInput[_ngcontent-%COMP%]    .mat-form-field-infix{padding:0 0 5px}"]}),t})();const zD=["adminMenuTemplate"];function ND(t,e){if(1&t&&(p.Wb(0,"a",16),p.Rb(1,"mat-icon",17),p.Wb(2,"p",14),p.Qc(3),p.Vb(),p.Vb()),2&t){const t=e.$implicit;p.Ib("active",t.current),p.oc("routerLink",t.route),p.Db(1),p.Fb(t.icon),p.Db(2),p.Sc(" ",t.label," ")}}function HD(t,e){if(1&t&&(p.Wb(0,"mat-nav-list"),p.Wb(1,"h3",11),p.Qc(2),p.ic(3,"translate"),p.Vb(),p.Wb(4,"a",12),p.Rb(5,"mat-icon",13),p.Wb(6,"p",14),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Rb(9,"mat-divider"),p.Wb(10,"mat-nav-list"),p.Oc(11,ND,4,6,"a",15),p.Vb()),2&t){const t=p.hc();p.Db(2),p.Rc(p.jc(3,3,"lang.actions")),p.Db(5),p.Sc(" ",p.jc(8,5,"lang.add")," "),p.Db(4),p.oc("ngForOf",t.subMenus)}}function BD(t,e){1&t&&(p.Wb(0,"div",18),p.Rb(1,"mat-spinner",19),p.Vb())}function XD(t,e){1&t&&(p.Wb(0,"mat-header-cell",44),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc(" ",p.jc(2,1,"lang.trackerNumber")," "))}function GD(t,e){if(1&t&&(p.Wb(0,"mat-cell",45),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.trackerNumber," ")}}function qD(t,e){1&t&&(p.Wb(0,"mat-header-cell",44),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc(" ",p.jc(2,1,"lang.type")," "))}function KD(t,e){if(1&t&&(p.Wb(0,"mat-cell",45),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.typeLabel," ")}}function JD(t,e){1&t&&(p.Wb(0,"mat-header-cell",46),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc(" ",p.jc(2,1,"lang.rangeNumber")," "))}function YD(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.rangeNumber," ")}}function ZD(t,e){1&t&&(p.Wb(0,"mat-header-cell",46),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc(" ",p.jc(2,1,"lang.currentNumber")," "))}function tV(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Sc(" ",t.currentNumber," ")}}function eV(t,e){1&t&&(p.Wb(0,"mat-header-cell",46),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc(" ",p.jc(2,1,"lang.status")," "))}const iV=function(){return["OK"]},aV=function(){return["SPD"]},nV=function(){return["END"]},oV=function(t,e,i){return{statusLabelPrimary:t,statusLabelWarn:e,statusLabelDanger:i}};function sV(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Wb(1,"span",47),p.Qc(2),p.Vb(),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.oc("ngClass",p.xc(5,oV,p.uc(2,iV).indexOf(t.status)>-1,p.uc(3,aV).indexOf(t.status)>-1,p.uc(4,nV).indexOf(t.status)>-1)),p.Db(1),p.Rc(t.statusLabel)}}function cV(t,e){1&t&&(p.Wb(0,"mat-header-cell",46),p.Qc(1),p.ic(2,"translate"),p.Vb()),2&t&&(p.Db(1),p.Sc(" ",p.jc(2,1,"lang.fullness")," "))}function rV(t,e){if(1&t&&(p.Wb(0,"mat-cell"),p.Wb(1,"div",48),p.Rb(2,"mat-progress-spinner",49),p.Wb(3,"div",50),p.Qc(4),p.Vb(),p.Vb(),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.Ib("fullness-ok",t.fullness<50)("fullness-warning",t.fullness>=50&&t.fullness<80)("fullness-danger",t.fullness>=80),p.Db(1),p.oc("value",t.fullness),p.Db(2),p.Sc("",t.fullness,"%")}}function lV(t,e){1&t&&p.Rb(0,"mat-header-cell")}function dV(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",56),p.dc("click",(function(e){p.Dc(t);const i=p.hc().$implicit,a=p.hc(2);return e.stopPropagation(),a.activate(i)})),p.ic(1,"translate"),p.Rb(2,"mat-icon",57),p.Vb()}if(2&t){const t=p.hc().$implicit;p.pc("matTooltip",p.jc(1,2,"Activer la plage")),p.oc("disabled",100===t.fullness)}}function bV(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",58),p.dc("click",(function(e){p.Dc(t);const i=p.hc().$implicit,a=p.hc(2);return e.stopPropagation(),a.stop(i)})),p.ic(1,"translate"),p.Rb(2,"mat-icon",59),p.Vb()}2&t&&p.pc("matTooltip",p.jc(1,1,"Cl\xf4turer la plage"))}function pV(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-cell",51),p.Oc(1,dV,3,4,"button",52),p.Oc(2,bV,3,3,"button",53),p.Wb(3,"button",54),p.dc("click",(function(i){p.Dc(t);const a=e.$implicit,n=p.hc(2);return i.stopPropagation(),n.delete(a)})),p.ic(4,"translate"),p.Rb(5,"mat-icon",55),p.Vb(),p.Vb()}if(2&t){const t=e.$implicit;p.Db(1),p.oc("ngIf","SPD"===t.status),p.Db(1),p.oc("ngIf","OK"===t.status),p.Db(1),p.pc("matTooltip",p.jc(4,4,"lang.delete")),p.oc("disabled","OK"===t.status)}}function hV(t,e){1&t&&p.Rb(0,"mat-header-row")}function uV(t,e){1&t&&(p.Rb(0,"mat-row",60),p.ic(1,"translate")),2&t&&(p.qc("routerLink","/administration/registeredMails/",e.$implicit.id,""),p.pc("matTooltip",p.jc(1,2,"lang.view")))}function mV(t,e){if(1&t&&(p.Wb(0,"mat-card",20),p.Wb(1,"div",21),p.Wb(2,"div",22),p.Wb(3,"mat-form-field"),p.Rb(4,"input",23),p.ic(5,"translate"),p.Vb(),p.Vb(),p.Wb(6,"div",22),p.Rb(7,"mat-paginator",24,25),p.Vb(),p.Vb(),p.Wb(9,"mat-table",26,27),p.Ub(11,28),p.Oc(12,XD,3,3,"mat-header-cell",29),p.Oc(13,GD,2,1,"mat-cell",30),p.Tb(),p.Ub(14,31),p.Oc(15,qD,3,3,"mat-header-cell",29),p.Oc(16,KD,2,1,"mat-cell",30),p.Tb(),p.Ub(17,32),p.Oc(18,JD,3,3,"mat-header-cell",33),p.Oc(19,YD,2,1,"mat-cell",34),p.Tb(),p.Ub(20,35),p.Oc(21,ZD,3,3,"mat-header-cell",33),p.Oc(22,tV,2,1,"mat-cell",34),p.Tb(),p.Ub(23,36),p.Oc(24,eV,3,3,"mat-header-cell",33),p.Oc(25,sV,3,9,"mat-cell",34),p.Tb(),p.Ub(26,37),p.Oc(27,cV,3,3,"mat-header-cell",33),p.Oc(28,rV,5,8,"mat-cell",34),p.Tb(),p.Ub(29,38),p.Oc(30,lV,1,0,"mat-header-cell",39),p.Oc(31,pV,6,6,"mat-cell",40),p.Tb(),p.Oc(32,hV,1,0,"mat-header-row",41),p.Oc(33,uV,2,4,"mat-row",42),p.Vb(),p.Wb(34,"div",43),p.Qc(35),p.ic(36,"translate"),p.Vb(),p.Vb()),2&t){const t=p.hc();p.Db(4),p.pc("placeholder",p.jc(5,10,"lang.filterBy")),p.oc("formControl",t.adminService.getFilterField()),p.Db(3),p.oc("length",100)("hidePageSize",!0)("pageSize",10),p.Db(2),p.oc("dataSource",t.adminService.getDataSource()),p.Db(23),p.oc("matHeaderRowDef",t.displayedColumns),p.Db(1),p.oc("matRowDefColumns",t.displayedColumns),p.Db(2),p.Tc(" ",t.data.length," ",p.jc(36,12,"lang.registeredMailNumberRanges"),"")}}let fV=(()=>{class t{constructor(t,e,i,a,n,o,s,c,r){this.translate=t,this.http=e,this.notify=i,this.headerService=a,this.appService=n,this.functions=o,this.adminService=s,this.viewContainerRef=c,this.dialog=r,this.subMenus=[{icon:"fas fa-dolly-flatbed",route:"/administration/registeredMails",label:this.translate.instant("lang.registeredMailNumberRanges"),current:!0},{icon:"fas fa-warehouse",route:"/administration/issuingSites",label:this.translate.instant("lang.issuingSites"),current:!1}],this.parameters={},this.loading=!0,this.data=[],this.displayedColumns=["trackerNumber","typeLabel","rangeNumber","currentNumber","status","fullness","actions"],this.filterColumns=["trackerNumber","typeLabel","rangeNumber","currentNumber","fullness","statusLabel"]}ngOnInit(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.registeredMailNumberRanges")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!1,this.getData()}getData(){this.data=[],this.http.get("../rest/registeredMail/ranges").pipe(Object(d.a)(t=>{this.data=t.ranges.map(t=>Object.assign(Object.assign({},t),{statusLabel:this.translate.instant("lang.registeredMail_"+t.status),typeLabel:this.translate.instant("lang.registeredMail_"+t.registeredMailType),rangeNumber:`${t.rangeStart} - ${t.rangeEnd}`})),this.loading=!1,setTimeout(()=>{this.adminService.setDataSource("admin_regitered_mail",this.data,this.sort,this.paginator,this.filterColumns)},0)}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}activate(t){const e=JSON.parse(JSON.stringify(t));e.status="OK",this.dialog.open(q.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.activate"),msg:"En activant cette plage, cela cl\xf4turera la plage actuelle utilis\xe9e pour ce type de recommand\xe9."}}).afterClosed().pipe(Object(K.a)(t=>"ok"===t),Object(J.a)(()=>this.http.put("../rest/registeredMail/ranges/"+t.id,e)),Object(d.a)(()=>{this.data.forEach(e=>{"OK"===e.status&&e.registeredMailType===t.registeredMailType&&e.siteId===t.siteId?(e.status="END",e.currentNumber=null,e.statusLabel=this.translate.instant("lang.registeredMail_"+e.status)):e.id===t.id&&(e.status="OK",e.currentNumber=e.rangeStart,e.statusLabel=this.translate.instant("lang.registeredMail_"+e.status))}),setTimeout(()=>{this.adminService.setDataSource("admin_regitered_mail",this.data,this.sort,this.paginator,this.filterColumns)},0),this.notify.success(this.translate.instant("lang.registeredMailNumberRangesActivated"))}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}stop(t){const e=JSON.parse(JSON.stringify(t));e.status="END",this.dialog.open(q.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.suspend"),msg:"En cl\xf4turant la plage, vous ne pourrez plus utiliser de recommand\xe9 de ce type tant que vous n'en n'aurez pas activ\xe9 une autre."}}).afterClosed().pipe(Object(K.a)(t=>"ok"===t),Object(J.a)(()=>this.http.put("../rest/registeredMail/ranges/"+t.id,e)),Object(d.a)(()=>{t.status="END",t.statusLabel=this.translate.instant("lang.registeredMail_"+t.status),setTimeout(()=>{this.adminService.setDataSource("admin_regitered_mail",this.data,this.sort,this.paginator,this.filterColumns)},0),this.notify.success(this.translate.instant("lang.registeredMailNumberRangesClosed"))}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}delete(t){this.dialog.open(q.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete"),msg:this.translate.instant("lang.confirmAction")}}).afterClosed().pipe(Object(K.a)(t=>"ok"===t),Object(J.a)(()=>this.http.delete("../rest/registeredMail/ranges/"+t.id)),Object(d.a)(()=>{this.data=this.data.filter(e=>e.id!==t.id),setTimeout(()=>{this.adminService.setDataSource("admin_regitered_mail",this.data,this.sort,this.paginator,this.filterColumns)},0),this.notify.success(this.translate.instant("lang.registeredMailNumberRangesRemoved"))}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a),p.Qb(D.a),p.Qb(St),p.Qb(p.T),p.Qb(z.b))},t.\u0275cmp=p.Kb({type:t,selectors:[["app-registered-mail-list"]],viewQuery:function(t,e){var i;1&t&&(p.Kc(zD,!0),p.Xc(N.a,!0),p.Xc(H.a,!0)),2&t&&(p.yc(i=p.ec())&&(e.adminMenuTemplate=i.first),p.yc(i=p.ec())&&(e.paginator=i.first),p.yc(i=p.ec())&&(e.sort=i.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/registeredMails/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","trackerNumber"],["mat-sort-header","","style","flex:2",4,"matHeaderCellDef"],["style","flex:2",4,"matCellDef"],["matColumnDef","typeLabel"],["matColumnDef","rangeNumber"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","currentNumber"],["matColumnDef","status"],["matColumnDef","fullness"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],["mat-sort-header",""],[1,"label",3,"ngClass"],[1,"fullness","full"],["color","primay","mode","determinate","diameter","54",3,"value"],[1,"percent"],[2,"justify-content","flex-end"],["mat-icon-button","","color","accent",3,"matTooltip","disabled","click",4,"ngIf"],["mat-icon-button","","color","warn",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","color","warn",3,"matTooltip","disabled","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],["mat-icon-button","","color","accent",3,"matTooltip","disabled","click"],["aria-hidden","true",1,"fa","fas","fa-play","fa-2x"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fas","fa-stop-circle","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Oc(1,HD,12,7,"ng-template",null,1,p.Pc),p.Wb(3,"mat-sidenav-content"),p.Wb(4,"div",2),p.Wb(5,"div",3),p.Wb(6,"div",4),p.Rb(7,"header-left"),p.Vb(),p.Wb(8,"div",5),p.Rb(9,"header-right"),p.Vb(),p.Vb(),p.Rb(10,"div",6),p.Vb(),p.Wb(11,"div",7),p.Wb(12,"div",8),p.Oc(13,BD,2,0,"div",9),p.Oc(14,mV,37,14,"mat-card",10),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(5),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading))},directives:[C.e,C.f,M.a,x.a,O.t,wt.h,wt.g,wt.d,o.f,It.a,wt.c,k.l,_.a,O.s,I.c,j.a,S.c,w.b,c.d,c.u,c.j,N.a,G.o,H.a,G.c,G.i,G.b,G.k,G.n,G.h,H.b,G.a,O.q,I.a,R.b,kt.b,G.j,G.m,o.d],pipes:[h.d],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}.fullness[_ngcontent-%COMP%]{position:relative}.percent[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translate(-50%,-50%);left:50%;font-size:10px;font-weight:700;color:#888}.fullness-ok[_ngcontent-%COMP%]     .mat-progress-spinner circle, .mat-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:green}.fullness-warning[_ngcontent-%COMP%]     .mat-progress-spinner circle, .mat-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:orange}.fullness-danger[_ngcontent-%COMP%]     .mat-progress-spinner circle, .mat-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:red}.statusLabelDanger[_ngcontent-%COMP%]{color:#8e3e52}.statusLabelWarn[_ngcontent-%COMP%]{color:#f99830}.statusLabelPrimary[_ngcontent-%COMP%]{color:#135f7f}"]}),t})();function gV(t,e){1&t&&(p.Wb(0,"div",10),p.Rb(1,"mat-spinner",11),p.Vb())}function vV(t,e){1&t&&(p.Rb(0,"div",22),p.ic(1,"translate")),2&t&&p.oc("innerHTML",p.jc(1,1,"lang.registeredMailNumberRangeModificationMsg"),p.Ec)}function yV(t,e){if(1&t){const t=p.Xb();p.Wb(0,"mat-card",12),p.Oc(1,vV,2,3,"div",13),p.Wb(2,"form",14),p.dc("ngSubmit",(function(){return p.Dc(t),p.hc().onSubmit()})),p.Wb(3,"div"),p.Wb(4,"mat-form-field"),p.Wb(5,"mat-label"),p.Qc(6),p.ic(7,"translate"),p.Vb(),p.Rb(8,"input",15),p.Vb(),p.Rb(9,"plugin-select-search",16),p.Wb(10,"div",17),p.Wb(11,"mat-form-field"),p.Wb(12,"mat-label"),p.Qc(13),p.ic(14,"translate"),p.Vb(),p.Wb(15,"input",18),p.dc("keypress",(function(e){return p.Dc(t),p.hc().onlyNumbers(e)})),p.Vb(),p.Vb(),p.Wb(16,"mat-form-field"),p.Wb(17,"mat-label"),p.Qc(18),p.ic(19,"translate"),p.Vb(),p.Wb(20,"input",19),p.dc("keypress",(function(e){return p.Dc(t),p.hc().onlyNumbers(e)})),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(21,"div",20),p.Wb(22,"button",21),p.Qc(23),p.ic(24,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb()}if(2&t){const t=p.hc();p.Db(1),p.oc("ngIf","OK"===t.adminFormGroup.controls.status.value||"END"===t.adminFormGroup.controls.status.value),p.Db(1),p.oc("formGroup",t.adminFormGroup),p.Db(4),p.Rc(p.jc(7,16,"lang.trackerNumber")),p.Db(3),p.Fb(""),p.oc("showLabel",!0)("label",t.translate.instant("lang.registeredMailType"))("placeholderLabel",t.translate.instant("lang.registeredMailType"))("datas",t.registeredMailType)("formControlSelect",t.adminFormGroup.controls.registeredMailType),p.Db(4),p.Rc(p.jc(14,18,"lang.registeredMailStart")),p.Db(2),p.oc("min",t.minRange),p.Db(3),p.Rc(p.jc(19,20,"lang.registeredMailEnd")),p.Db(2),p.oc("min",t.adminFormGroup.controls.rangeStart.value),p.Db(2),p.oc("disabled",!t.adminFormGroup.valid),p.Db(1),p.Rc(p.jc(24,22,"lang.save"))}}let DV=(()=>{class t{constructor(t,e,i,a,n,o,s,c){this.translate=t,this.http=e,this.route=i,this.router=a,this.notify=n,this.headerService=o,this.appService=s,this._formBuilder=c,this.loading=!0,this.id=null,this.minRange=1,this.registeredMailType=[{id:"2D",label:this.translate.instant("lang.registeredMail_2D")},{id:"2C",label:this.translate.instant("lang.registeredMail_2C")},{id:"RW",label:this.translate.instant("lang.registeredMail_RW")}]}ngOnInit(){this.route.params.subscribe(t=>Object(gt.a)(this,void 0,void 0,(function*(){void 0===t.id?(this.creationMode=!0,this.headerService.setHeader(this.translate.instant("lang.registeredMailNumberRangeCreation")),this.adminFormGroup=this._formBuilder.group({id:[null],trackerNumber:[null,c.I.required],registeredMailType:[null,c.I.required],rangeStart:[1,c.I.required],rangeEnd:[2,c.I.required],status:["SPD"]}),this.loading=!1):(this.headerService.setHeader(this.translate.instant("lang.registeredMailNumberRangeModification")),this.id=t.id,this.creationMode=!1,yield this.getData()),this.adminFormGroup.controls.registeredMailType.valueChanges.pipe(Object(d.a)(()=>{this.creationMode&&this.getMinRange()})).subscribe(),this.adminFormGroup.controls.rangeStart.valueChanges.pipe(Object(d.a)(t=>{t>this.adminFormGroup.controls.rangeEnd.value?this.adminFormGroup.controls.rangeStart.setErrors({rangeError:!0}):(this.adminFormGroup.controls.rangeStart.setErrors(null),this.adminFormGroup.controls.rangeEnd.setErrors(null))})).subscribe(),this.adminFormGroup.controls.rangeEnd.valueChanges.pipe(Object(d.a)(t=>{t<this.adminFormGroup.controls.rangeStart.value?this.adminFormGroup.controls.rangeEnd.setErrors({rangeError:!0}):(this.adminFormGroup.controls.rangeStart.setErrors(null),this.adminFormGroup.controls.rangeEnd.setErrors(null))})).subscribe()})))}getData(){return new Promise(t=>{this.http.get("../rest/registeredMail/ranges/"+this.id).pipe(Object(d.a)(e=>{this.adminFormGroup=this._formBuilder.group({id:[this.id],trackerNumber:[e.range.trackerNumber],registeredMailType:[e.range.registeredMailType],rangeStart:[e.range.rangeStart],rangeEnd:[e.range.rangeEnd],status:[e.range.status]}),"OK"!==e.range.status&&"END"!==e.range.status||this.adminFormGroup.disable(),t(!0),this.loading=!1}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()})}onlyNumbers(t){let e;return e=t.charCode,(null!==this.adminFormGroup.controls.rangeStart.value||48!==e)&&e>=48&&e<=57}getMinRange(){this.http.get(`../rest/registeredMail/ranges/type/${this.adminFormGroup.controls.registeredMailType.value}/last`).pipe(Object(d.a)(t=>{this.minRange=1===t.lastNumber?t.lastNumber:t.lastNumber+1,this.adminFormGroup.controls.rangeStart.setValue(this.minRange),this.adminFormGroup.controls.rangeEnd.value<this.adminFormGroup.controls.rangeStart.value&&this.adminFormGroup.controls.rangeEnd.setValue(this.adminFormGroup.controls.rangeStart.value+1)}),Object(b.a)(t=>(this.notify.handleSoftErrors(t),Object(B.of)(!1)))).subscribe()}onSubmit(){const t={};Object.keys(this.adminFormGroup.controls).forEach(e=>{t[e]=this.adminFormGroup.controls[e].value}),this.creationMode?this.http.post("../rest/registeredMail/ranges",t).subscribe(()=>{this.notify.success(this.translate.instant("lang.registeredMailNumberRangesAdded")),this.router.navigate(["/administration/registeredMails"])},t=>{this.notify.handleSoftErrors(t)}):this.http.put("../rest/registeredMail/ranges/"+this.id,t).subscribe(()=>{this.notify.success(this.translate.instant("lang.registeredMailNumberRangesUpdated")),this.router.navigate(["/administration/registeredMails"])},t=>{this.notify.handleSoftErrors(t)})}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(o.a),p.Qb(o.c),p.Qb(y.a),p.Qb(m.a),p.Qb(f.a),p.Qb(c.h))},t.\u0275cmp=p.Kb({type:t,selectors:[["app-registered-mail"]],decls:13,vars:8,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],["class","alert-message alert-message-danger","style","min-width: 100%;",3,"innerHTML",4,"ngIf"],[2,"display","contents",3,"formGroup","ngSubmit"],["matInput","","formControlName","trackerNumber"],[3,"showLabel","label","placeholderLabel","datas","formControlSelect"],[2,"display","grid","grid-template-columns","1fr 1fr","grid-gap","20px"],["matInput","","type","number","formControlName","rangeStart",3,"min","keypress"],["matInput","","type","number","formControlName","rangeEnd",3,"min","keypress"],[2,"text-align","center"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[1,"alert-message","alert-message-danger",2,"min-width","100%",3,"innerHTML"]],template:function(t,e){1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Wb(1,"mat-sidenav-content"),p.Wb(2,"div",1),p.Wb(3,"div",2),p.Wb(4,"div",3),p.Rb(5,"header-left"),p.Vb(),p.Wb(6,"div",4),p.Rb(7,"header-right"),p.Vb(),p.Vb(),p.Rb(8,"div",5),p.Vb(),p.Wb(9,"div",6),p.Wb(10,"div",7),p.Oc(11,gV,2,0,"div",8),p.Oc(12,yV,25,24,"mat-card",9),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t&&(p.Db(3),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(2),p.oc("ngIf",e.loading),p.Db(1),p.oc("ngIf",!e.loading))},directives:[C.e,C.f,M.a,x.a,O.t,I.c,j.a,c.K,c.v,c.m,S.c,S.g,w.b,c.d,c.u,c.k,Br.a,c.A,R.b],pipes:[h.d],styles:[""]}),t})();function VV(t,e){if(1&t&&(p.Wb(0,"mat-option",38),p.Qc(1),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t.id),p.Db(1),p.Sc(" ",t.label," ")}}function CV(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",39),p.dc("click",(function(){return p.Dc(t),p.hc().toggleData()})),p.ic(1,"translate"),p.Rb(2,"mat-icon",40),p.Vb()}2&t&&p.pc("title",p.jc(1,1,"lang.preview"))}function MV(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",39),p.dc("click",(function(){return p.Dc(t),p.hc().toggleData()})),p.ic(1,"translate"),p.Rb(2,"mat-icon",41),p.Vb()}2&t&&p.pc("title",p.jc(1,1,"lang.edition"))}function WV(t,e){if(1&t){const t=p.Xb();p.Wb(0,"button",42),p.dc("click",(function(){p.Dc(t);const i=e.$implicit;return p.hc().selectedTemplateDisplayedSecondaryData=i})),p.Qc(1),p.Vb()}if(2&t){const t=e.$implicit;p.Db(1),p.Sc("",t," colonne(s)")}}function xV(t,e){if(1&t&&(p.Wb(0,"mat-option",43),p.Wb(1,"span",44),p.Wb(2,"span",45),p.Rb(3,"i",46),p.Vb(),p.Wb(4,"span",47),p.Qc(5),p.Vb(),p.Vb(),p.Vb()),2&t){const t=e.$implicit;p.oc("value",t),p.Db(3),p.Gb("fa ",t.icon," fa-2x"),p.Db(2),p.Sc(" ",t.label," ")}}function OV(t,e){if(1&t&&(p.Wb(0,"button",61),p.Rb(1,"mat-icon",62),p.Vb()),2&t){p.hc();const t=p.zc(3);p.oc("matMenuTriggerFor",t)}}function _V(t,e){if(1&t){const t=p.Xb();p.Wb(0,"span",51),p.Oc(1,OV,2,1,"button",52),p.Wb(2,"mat-menu",null,15),p.Wb(4,"button",42),p.dc("click",(function(){p.Dc(t);const e=p.hc(),i=e.$implicit,a=e.index;return p.hc(2).removeData(i,a)})),p.Rb(5,"mat-icon",53),p.Wb(6,"span"),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Rb(9,"mat-divider"),p.Wb(10,"button",42),p.dc("click",(function(){p.Dc(t);const e=p.hc().$implicit;return p.hc(2).setStyle(e,"boldFontData")})),p.Rb(11,"mat-icon",54),p.Wb(12,"span"),p.Qc(13),p.ic(14,"translate"),p.Vb(),p.Vb(),p.Wb(15,"button",42),p.dc("click",(function(){p.Dc(t);const e=p.hc().$implicit;return p.hc(2).setStyle(e,"align_leftData")})),p.Rb(16,"mat-icon",55),p.Wb(17,"span"),p.Qc(18),p.ic(19,"translate"),p.Vb(),p.Vb(),p.Wb(20,"button",42),p.dc("click",(function(){p.Dc(t);const e=p.hc().$implicit;return p.hc(2).setStyle(e,"align_centerData")})),p.Rb(21,"mat-icon",56),p.Wb(22,"span"),p.Qc(23),p.ic(24,"translate"),p.Vb(),p.Vb(),p.Wb(25,"button",42),p.dc("click",(function(){p.Dc(t);const e=p.hc().$implicit;return p.hc(2).setStyle(e,"align_rightData")})),p.Rb(26,"mat-icon",57),p.Wb(27,"span"),p.Qc(28),p.ic(29,"translate"),p.Vb(),p.Vb(),p.Wb(30,"button",42),p.dc("click",(function(){p.Dc(t);const e=p.hc().$implicit;return p.hc(2).setStyle(e,"bigFontData")})),p.Rb(31,"mat-icon",58),p.Wb(32,"span"),p.Qc(33),p.ic(34,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(35,"span",59),p.Rb(36,"i"),p.Qc(37,"\xa0 "),p.Rb(38,"span",60),p.Vb(),p.Vb()}if(2&t){const t=p.hc().$implicit,e=p.hc(2);p.Db(1),p.oc("ngIf","label"==e.displayMode),p.Db(6),p.Rc(p.jc(8,23,"lang.delete")),p.Db(3),p.Ib("isSelectedMenu",t.cssClasses.indexOf("boldFontData")>-1),p.Db(3),p.Rc(p.jc(14,25,"lang.fontBold")),p.Db(2),p.Ib("isSelectedMenu",t.cssClasses.indexOf("align_leftData")>-1),p.Db(3),p.Rc(p.jc(19,27,"lang.alignLeft")),p.Db(2),p.Ib("isSelectedMenu",t.cssClasses.indexOf("align_centerData")>-1),p.Db(3),p.Rc(p.jc(24,29,"lang.alignCenter")),p.Db(2),p.Ib("isSelectedMenu",t.cssClasses.indexOf("align_rightData")>-1),p.Db(3),p.Rc(p.jc(29,31,"lang.alignRight")),p.Db(2),p.Ib("isSelectedMenu",t.cssClasses.indexOf("bigFontData")>-1),p.Db(3),p.Rc(p.jc(34,33,"lang.fontBig")),p.Db(2),p.Fb(t.cssClasses.join(" ")),p.Db(1),p.Gb("fa ",t.icon,""),p.Db(2),p.oc("innerHTML",t[e.displayMode],p.Ec)}}function SV(t,e){if(1&t&&(p.Ub(0),p.Oc(1,_V,39,35,"span",50),p.Tb()),2&t){const t=e.$implicit;p.Db(1),p.oc("ngIf","getFolders"!=t.value)}}function wV(t,e){if(1&t){const t=p.Xb();p.Ub(0),p.Wb(1,"mat-toolbar",48),p.dc("cdkDropListDropped",(function(e){return p.Dc(t),p.hc().drop(e)})),p.Oc(2,SV,2,1,"ng-container",49),p.Vb(),p.Tb()}if(2&t){const t=p.hc();p.Db(1),p.Gb("secondaryInformations example-list column-",t.selectedTemplateDisplayedSecondaryData,"-list"),p.oc("cdkDropListData",t.displayedSecondaryData),p.Db(1),p.oc("ngForOf",t.displayedSecondaryData)}}function IV(t,e){1&t&&p.Rb(0,"mat-icon",67)}function jV(t,e){1&t&&p.Rb(0,"mat-icon",68)}function kV(t,e){if(1&t&&(p.Wb(0,"span"),p.Oc(1,IV,1,0,"mat-icon",64),p.Oc(2,jV,1,0,"mat-icon",65),p.Rb(3,"br"),p.Wb(4,"span",66),p.Qc(5),p.Vb(),p.Vb()),2&t){const t=p.hc().$implicit,e=p.hc();p.Db(1),p.oc("ngIf","label"==e.displayMode),p.Db(1),p.oc("ngIf","sample"==e.displayMode),p.Db(3),p.Rc(t[e.displayMode])}}function RV(t,e){if(1&t&&(p.Wb(0,"span"),p.Qc(1),p.Vb()),2&t){const t=p.hc().$implicit,e=p.hc();p.Db(1),p.Sc(" ",t[e.displayMode]," ")}}function TV(t,e){if(1&t&&(p.Wb(0,"span",63),p.Oc(1,kV,6,3,"span",24),p.Oc(2,RV,2,1,"span",24),p.Vb()),2&t){const t=e.index;p.Fb(e.$implicit.cssClasses.join(" ")),p.Db(1),p.oc("ngIf",0==t),p.Db(1),p.oc("ngIf",1==t)}}function PV(t,e){if(1&t&&(p.Wb(0,"button",61),p.Rb(1,"mat-icon",62),p.Vb()),2&t){p.hc();const t=p.zc(3);p.oc("matMenuTriggerFor",t)}}function QV(t,e){if(1&t){const t=p.Xb();p.Ub(0),p.Oc(1,PV,2,1,"button",52),p.Wb(2,"mat-menu",null,15),p.Wb(4,"button",42),p.dc("click",(function(){p.Dc(t);const e=p.hc(),i=e.$implicit,a=e.index;return p.hc().removeData(i,a)})),p.Rb(5,"mat-icon",53),p.Wb(6,"span"),p.Qc(7),p.ic(8,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(9,"span",70),p.Rb(10,"i",71),p.Qc(11),p.Vb(),p.Tb()}if(2&t){const t=p.hc().$implicit,e=p.hc();p.Db(1),p.oc("ngIf","label"==e.displayMode),p.Db(6),p.Rc(p.jc(8,3,"lang.delete")),p.Db(4),p.Sc(" ",t[e.displayMode],"")}}function FV(t,e){if(1&t&&(p.Wb(0,"div",69),p.Oc(1,QV,12,5,"ng-container",24),p.Vb()),2&t){const t=e.$implicit;p.Db(1),p.oc("ngIf","getFolders"==t.value)}}let LV=(()=>{class t{constructor(t,e,i,a,n){this.translate=t,this.http=e,this.notify=i,this.appService=a,this.headerService=n,this.loading=!1,this.customFieldsFormControl=new c.i({value:"",disabled:!1}),this.displayedMainData=[{value:"chronoNumberShort",label:this.translate.instant("lang.chronoNumberShort"),sample:"MAARCH/2019A/1",cssClasses:["align_centerData","normalData"],icon:""},{value:"object",label:this.translate.instant("lang.object"),sample:this.translate.instant("lang.objectSample"),cssClasses:["longData"],icon:""}],this.availableData=[{value:"getPriority",label:this.translate.instant("lang.getPriority"),sample:this.translate.instant("lang.getPrioritySample"),cssClasses:["align_leftData"],icon:"fa-traffic-light"},{value:"getCategory",label:this.translate.instant("lang.getCategory"),sample:this.translate.instant("lang.incoming"),cssClasses:["align_leftData"],icon:"fa-exchange-alt"},{value:"getDoctype",label:this.translate.instant("lang.getDoctype"),sample:this.translate.instant("lang.getDoctypeSample"),cssClasses:["align_leftData"],icon:"fa-suitcase"},{value:"getAssignee",label:this.translate.instant("lang.getAssignee"),sample:this.translate.instant("lang.getAssigneeSample"),cssClasses:["align_leftData"],icon:"fa-sitemap"},{value:"getRecipients",label:this.translate.instant("lang.getRecipients"),sample:"Patricia PETIT",cssClasses:["align_leftData"],icon:"fa-user"},{value:"getSenders",label:this.translate.instant("lang.getSenders"),sample:"Alain DUBOIS (MAARCH)",cssClasses:["align_leftData"],icon:"fa-book"},{value:"getCreationAndProcessLimitDates",label:this.translate.instant("lang.getCreationAndProcessLimitDates"),sample:this.translate.instant("lang.getCreationAndProcessLimitDatesSample"),cssClasses:["align_leftData"],icon:"fa-calendar"},{value:"getVisaWorkflow",label:this.translate.instant("lang.getVisaWorkflow"),sample:'<i color="accent" class="fa fa-check"></i> Barbara BAIN -> <i class="fa fa-hourglass-half"></i> <b>Bruno BOULE</b> -> <i class="fa fa-hourglass-half"></i> Patricia PETIT',cssClasses:["align_leftData"],icon:"fa-list-ol"},{value:"getSignatories",label:this.translate.instant("lang.getSignatories"),sample:"Denis DAULL, Patricia PETIT",cssClasses:["align_leftData"],icon:"fa-certificate"},{value:"getModificationDate",label:this.translate.instant("lang.getModificationDate"),sample:"01-01-2019",cssClasses:["align_leftData"],icon:"fa-calendar-check"},{value:"getOpinionLimitDate",label:this.translate.instant("lang.getOpinionLimitDate"),sample:"01-01-2019",cssClasses:["align_leftData"],icon:"fa-stopwatch"},{value:"getParallelOpinionsNumber",label:this.translate.instant("lang.getParallelOpinionsNumber"),sample:this.translate.instant("lang.getParallelOpinionsNumberSample"),cssClasses:["align_leftData"],icon:"fa-comment-alt"},{value:"getFolders",label:this.translate.instant("lang.getFolders"),sample:this.translate.instant("lang.getFoldersSample"),cssClasses:["align_leftData"],icon:"fa-folder"},{value:"getResId",label:this.translate.instant("lang.getResId"),sample:this.translate.instant("lang.getResIdSample"),cssClasses:["align_leftData"],icon:"fa-envelope"},{value:"getBarcode",label:this.translate.instant("lang.getBarcode"),sample:this.translate.instant("lang.getBarcodeSample"),cssClasses:["align_leftData"],icon:"fa-barcode"}],this.availableDataClone=[],this.displayedSecondaryData=[],this.displayedSecondaryDataClone=[],this.displayMode="label",this.dataControl=new c.i,this.listEvent=[{id:"detailDoc",value:"documentDetails"},{id:"eventVisaMail",value:"signatureBookAction"},{id:"eventProcessDoc",value:"processDocument"},{id:"eventViewDoc",value:"viewDoc"}],this.templateDisplayedSecondaryData=[1,2,3,4,5,6,7],this.selectedTemplateDisplayedSecondaryData=7,this.selectedTemplateDisplayedSecondaryDataClone=7,this.selectedListEvent=null,this.selectedListEventClone=null,this.processTool=[{id:"dashboard",icon:"fas fa-columns",label:this.translate.instant("lang.newsFeed")},{id:"history",icon:"fas fa-history",label:this.translate.instant("lang.history")},{id:"notes",icon:"fas fa-pen-square",label:this.translate.instant("lang.notesAlt")},{id:"attachments",icon:"fas fa-paperclip",label:this.translate.instant("lang.attachments")},{id:"linkedResources",icon:"fas fa-link",label:this.translate.instant("lang.links")},{id:"diffusionList",icon:"fas fa-share-alt",label:this.translate.instant("lang.diffusionList")},{id:"emails",icon:"fas fa-envelope",label:this.translate.instant("lang.mailsSentAlt")},{id:"visaCircuit",icon:"fas fa-list-ol",label:this.translate.instant("lang.visaWorkflow")},{id:"opinionCircuit",icon:"fas fa-comment-alt",label:this.translate.instant("lang.avis")},{id:"info",icon:"fas fa-info-circle",label:this.translate.instant("lang.informations")}],this.selectedProcessTool={defaultTab:null,canUpdateData:!1,canUpdateModel:!1,canUpdateDocuments:!1},this.selectedProcessToolClone=null,this.searchAdv={list_event:{},list_display:{}}}ngOnInit(){return Object(gt.a)(this,void 0,void 0,(function*(){this.headerService.setHeader(this.translate.instant("lang.searchAdministration")),yield this.initCustomFields(),this.filteredDataOptions=this.dataControl.valueChanges.pipe(Object(r.a)(""),Object(l.a)(t=>this._filterData(t))),this.availableDataClone=JSON.parse(JSON.stringify(this.availableData)),this.displayedSecondaryData=[],this.selectedTemplateDisplayedSecondaryData=this.searchAdv.list_display.templateColumns,this.selectedTemplateDisplayedSecondaryDataClone=this.selectedTemplateDisplayedSecondaryData,this.selectedListEvent=this.searchAdv.list_event,this.selectedListEventClone=this.selectedListEvent,"processDocument"===this.searchAdv.list_event?(this.selectedProcessTool.defaultTab=null===this.searchAdv.list_event_data?"dashboard":this.searchAdv.list_event_data.defaultTab,this.selectedProcessTool.canUpdateData=null!==this.searchAdv.list_event_data&&this.searchAdv.list_event_data.canUpdateData,this.selectedProcessTool.canUpdateModel=null!==this.searchAdv.list_event_data&&this.searchAdv.list_event_data.canUpdateModel):"signatureBookAction"===this.searchAdv.list_event&&(this.selectedProcessTool.canUpdateDocuments=null!==this.searchAdv.list_event_data&&this.searchAdv.list_event_data.canUpdateDocuments),this.selectedProcessToolClone=JSON.parse(JSON.stringify(this.selectedProcessTool)),this.displayedSecondaryDataClone=JSON.parse(JSON.stringify(this.displayedSecondaryData))}))}initCustomFields(){return new Promise((t,e)=>{this.http.get("../rest/customFields").pipe(Object(l.a)(t=>(t.customFields=t.customFields.map(t=>({value:"indexingCustomField_"+t.id,label:t.label,sample:this.translate.instant("lang.customField")+t.id,cssClasses:["align_leftData"],icon:"fa-hashtag"})),t.customFields)),Object(d.a)(e=>{console.log(e),this.availableData=this.availableData.concat(e),t(!0)}),Object(b.a)(t=>(this.notify.handleErrors(t),Object(B.of)(!1)))).subscribe()})}toggleData(){this.dataControl.disabled?this.dataControl.enable():this.dataControl.disable(),this.displayMode="label"===this.displayMode?"sample":"label"}setStyle(t,e){const i=e.split("_");2===i.length&&t.cssClasses.forEach((a,n)=>{a.includes(i[0])&&a!==e&&t.cssClasses.splice(n,1)});const a=t.cssClasses.indexOf(e);-1===a?t.cssClasses.push(e):t.cssClasses.splice(a,1)}addData(t){const e=this.availableData.map(t=>t.value).indexOf(t.option.value.value);this.displayedSecondaryData.push(t.option.value),this.availableData.splice(e,1),$("#availableData").blur(),this.dataControl.setValue("")}removeData(t,e){this.availableData.push(t),this.displayedSecondaryData.splice(e,1),this.dataControl.setValue("")}removeAllData(){this.availableData=this.availableData.concat(this.displayedSecondaryData),this.displayedSecondaryData=[],this.dataControl.setValue("")}drop(t){t.previousContainer===t.container&&Object(Ma.h)(t.container.data,t.previousIndex,t.currentIndex)}saveTemplate(){let t={};const e=[];this.displayedSecondaryData.forEach(t=>{e.push({value:t.value,cssClasses:t.cssClasses,icon:t.icon})}),t={templateColumns:this.selectedTemplateDisplayedSecondaryData,subInfos:e},this.http.put("../rest/baskets/"+this.searchAdv.basket_id+"/groups/"+this.searchAdv.group_id,{list_display:t,list_event:this.selectedListEvent,list_event_data:this.selectedProcessTool}).subscribe(()=>{this.displayedSecondaryDataClone=JSON.parse(JSON.stringify(this.displayedSecondaryData)),this.searchAdv.list_display=e,this.searchAdv.list_event=this.selectedListEvent,this.selectedListEventClone=this.selectedListEvent,this.searchAdv.list_event_data=this.selectedProcessTool,this.selectedProcessToolClone=JSON.parse(JSON.stringify(this.selectedProcessTool)),this.selectedTemplateDisplayedSecondaryDataClone=JSON.parse(JSON.stringify(this.selectedTemplateDisplayedSecondaryData)),this.notify.success(this.translate.instant("lang.modificationsProcessed"))},t=>{this.notify.error(t.error.errors)})}_filterData(t){let e="";return"string"==typeof t?e=t.toLowerCase():null!==t&&(e=t.label.toLowerCase()),this.availableData.filter(t=>t.label.toLowerCase().includes(e))}checkModif(){return JSON.stringify(this.displayedSecondaryData)===JSON.stringify(this.displayedSecondaryDataClone)&&this.selectedListEvent===this.selectedListEventClone&&JSON.stringify(this.selectedProcessTool)===JSON.stringify(this.selectedProcessToolClone)&&JSON.stringify(this.selectedTemplateDisplayedSecondaryData)===JSON.stringify(this.selectedTemplateDisplayedSecondaryDataClone)}cancelModification(){this.displayedSecondaryData=JSON.parse(JSON.stringify(this.displayedSecondaryDataClone)),this.selectedListEvent=this.selectedListEventClone,this.selectedProcessTool=JSON.parse(JSON.stringify(this.selectedProcessToolClone)),this.availableData=JSON.parse(JSON.stringify(this.availableDataClone)),this.selectedTemplateDisplayedSecondaryData=JSON.parse(JSON.stringify(this.selectedTemplateDisplayedSecondaryDataClone));let t=0;this.displayedSecondaryData.forEach(e=>{t=this.availableData.map(t=>t.value).indexOf(e.value),this.availableData.splice(t,1)}),this.dataControl.setValue("")}hasFolder(){return this.displayedSecondaryData.map(t=>t.value).indexOf("getFolders")>-1}changeEventList(t){this.selectedProcessTool="processDocument"===t.value?{defaultTab:"dashboard"}:{}}toggleCanUpdate(t){t||(this.selectedProcessTool.canUpdateModel=t)}}return t.\u0275fac=function(e){return new(e||t)(p.Qb(h.e),p.Qb(u.b),p.Qb(y.a),p.Qb(f.a),p.Qb(m.a))},t.\u0275cmp=p.Kb({type:t,selectors:[["ng-component"]],decls:69,vars:63,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["appearance","outline",1,"eventList"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"editorTool"],["color","primary","mat-icon-button","",3,"title","click",4,"ngIf"],["color","primary","mat-button","",3,"title","matMenuTriggerFor"],[1,"fas","fa-columns"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"area"],["appearance","outline","floatLabel","never"],["id","availableData","name","availableData","type","text","matInput","",3,"formControl","placeholder","matAutocomplete"],[3,"optionSelected"],["auto","matAutocomplete"],["class","dataList",3,"value",4,"ngFor","ngForOf"],["color","warn","mat-button","",2,"float","right",3,"disabled","click"],[4,"ngIf"],[1,"resultRow","newRow"],["class","resultCol",3,"class",4,"ngFor","ngForOf"],["multiple","",1,"actions"],["color","primary","mat-icon-button","",3,"title","disabled"],["fontSet","fas","matBadge","2","fontIcon","fa-comments fa-2x",3,"matBadgeHidden"],["fontSet","fas","matBadge","7","fontIcon","fa-paperclip fa-2x",3,"matBadgeHidden"],["fontSet","fas","fontIcon","fa-sitemap fa-2x"],["fontSet","fas","fontIcon","fa-info-circle fa-2x"],["class","folder-info",4,"ngFor","ngForOf"],[1,"row"],[1,"col-md-12","text-center",2,"margin-top","30px"],["color","primary","mat-raised-button","",3,"disabled","click"],["color","default","mat-raised-button","",3,"disabled","click"],[3,"value"],["color","primary","mat-icon-button","",3,"title","click"],["fontSet","fas","fontIcon","fa-eye"],["fontSet","fas","fontIcon","fa-edit"],["mat-menu-item","",3,"click"],[1,"dataList",3,"value"],[1,"optionContent"],[1,"dataIcon"],["color","primary"],[1,"dataLabel"],["cdkDropListOrientation","horizontal","cdkDropList","",3,"cdkDropListData","cdkDropListDropped"],[4,"ngFor","ngForOf"],["class","example-box","cdkDrag","",4,"ngIf"],["cdkDrag","",1,"example-box"],["color","primary","mat-icon-button","",3,"matMenuTriggerFor",4,"ngIf"],["color","warn","fontSet","fas","fontIcon","fa-trash fa-2x",1,"secondaryInformations_icon"],["fontSet","fas","fontIcon","fa-bold fa-2x",1,"secondaryInformations_icon"],["fontSet","fas","fontIcon","fa-align-left fa-2x",1,"secondaryInformations_icon"],["fontSet","fas","fontIcon","fa-align-center fa-2x",1,"secondaryInformations_icon"],["fontSet","fas","fontIcon","fa-align-right fa-2x",1,"secondaryInformations_icon"],["fontSet","fas","fontIcon","fa-text-height fa-2x",1,"secondaryInformations_icon"],[2,"width","100%"],[1,"secondaryInformations_label",3,"innerHTML"],["color","primary","mat-icon-button","",3,"matMenuTriggerFor"],["fontSet","fas","fontIcon","fa-ellipsis-v fa-2x"],[1,"resultCol"],["color","primary","class","fm fm-letter fm-2x",4,"ngIf"],["color","warn","class","fm fm-letter-status-inprogress fm-2x",4,"ngIf"],[1,"resultCol_chrono"],["color","primary",1,"fm","fm-letter","fm-2x"],["color","warn",1,"fm","fm-letter-status-inprogress","fm-2x"],[1,"folder-info"],[1,"badge","badge-folder"],[1,"fa","fa-folder"]],template:function(t,e){if(1&t&&(p.Wb(0,"mat-sidenav-container",0),p.Wb(1,"mat-sidenav-content"),p.Wb(2,"div",1),p.Wb(3,"div",2),p.Wb(4,"div",3),p.Rb(5,"header-left"),p.Vb(),p.Wb(6,"div",4),p.Rb(7,"header-right"),p.Vb(),p.Vb(),p.Rb(8,"div",5),p.Vb(),p.Wb(9,"div",6),p.Wb(10,"div",7),p.Wb(11,"mat-form-field",8),p.Wb(12,"mat-label"),p.Qc(13),p.ic(14,"translate"),p.Vb(),p.Wb(15,"mat-select",9),p.dc("ngModelChange",(function(t){return e.selectedProcessTool.defaultTab=t})),p.Oc(16,VV,2,2,"mat-option",10),p.ic(17,"sortBy"),p.Vb(),p.Vb(),p.Rb(18,"hr"),p.Wb(19,"mat-toolbar",11),p.Wb(20,"span"),p.Oc(21,CV,3,3,"button",12),p.Oc(22,MV,3,3,"button",12),p.Wb(23,"button",13),p.ic(24,"translate"),p.Qc(25),p.Rb(26,"i",14),p.Vb(),p.Wb(27,"mat-menu",null,15),p.Oc(29,WV,2,1,"button",16),p.Vb(),p.Vb(),p.Wb(30,"span",17),p.Wb(31,"form"),p.Wb(32,"mat-form-field",18),p.Rb(33,"input",19),p.ic(34,"translate"),p.Wb(35,"mat-autocomplete",20,21),p.dc("optionSelected",(function(t){return e.addData(t)})),p.Oc(37,xV,6,5,"mat-option",22),p.ic(38,"async"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Wb(39,"span"),p.Wb(40,"button",23),p.dc("click",(function(){return e.removeAllData()})),p.Qc(41),p.ic(42,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Wb(43,"mat-card"),p.Oc(44,wV,3,5,"ng-container",24),p.Wb(45,"div",25),p.Oc(46,TV,3,4,"span",26),p.Wb(47,"mat-button-toggle-group",27),p.Wb(48,"button",28),p.ic(49,"translate"),p.Rb(50,"mat-icon",29),p.Vb(),p.Wb(51,"button",28),p.ic(52,"translate"),p.Rb(53,"mat-icon",30),p.Vb(),p.Wb(54,"button",28),p.ic(55,"translate"),p.Rb(56,"mat-icon",31),p.Vb(),p.Wb(57,"button",28),p.ic(58,"translate"),p.Rb(59,"mat-icon",32),p.Vb(),p.Vb(),p.Vb(),p.Oc(60,FV,2,1,"div",33),p.Vb(),p.Wb(61,"div",34),p.Wb(62,"div",35),p.Wb(63,"button",36),p.dc("click",(function(){return e.saveTemplate()})),p.Qc(64),p.ic(65,"translate"),p.Vb(),p.Wb(66,"button",37),p.dc("click",(function(){return e.cancelModification()})),p.Qc(67),p.ic(68,"translate"),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb(),p.Vb()),2&t){const t=p.zc(28),i=p.zc(36);p.Db(3),p.Ib("customContainerRight",e.appService.getViewMode()),p.Db(5),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(1),p.Ib("fullContainer",e.appService.getViewMode()),p.Db(4),p.Rc(p.jc(14,38,"lang.tabProcessPosition")),p.Db(2),p.oc("ngModel",e.selectedProcessTool.defaultTab),p.Db(1),p.oc("ngForOf",p.kc(17,40,e.processTool,"label")),p.Db(5),p.oc("ngIf","label"==e.displayMode),p.Db(1),p.oc("ngIf","sample"==e.displayMode),p.Db(1),p.oc("title",p.jc(24,43,"lang.templateUsed"))("matMenuTriggerFor",t),p.Db(2),p.Sc(" ",e.selectedTemplateDisplayedSecondaryData," "),p.Db(4),p.oc("ngForOf",e.templateDisplayedSecondaryData),p.Db(4),p.pc("placeholder",p.jc(34,45,"lang.availableDatas")),p.oc("formControl",e.dataControl)("matAutocomplete",i),p.Db(4),p.oc("ngForOf",p.jc(38,47,e.filteredDataOptions)),p.Db(3),p.oc("disabled","sample"==e.displayMode),p.Db(1),p.Sc(" ",p.jc(42,49,"lang.eraseAll")," "),p.Db(3),p.oc("ngIf",e.displayedSecondaryData.length>0&&"sample"==e.displayMode||"label"==e.displayMode),p.Db(2),p.oc("ngForOf",e.displayedMainData),p.Db(2),p.pc("title",p.jc(49,51,"lang.notes")),p.oc("disabled","label"==e.displayMode),p.Db(2),p.oc("matBadgeHidden","label"==e.displayMode),p.Db(1),p.pc("title",p.jc(52,53,"lang.attachments")),p.oc("disabled","label"==e.displayMode),p.Db(2),p.oc("matBadgeHidden","label"==e.displayMode),p.Db(1),p.pc("title",p.jc(55,55,"lang.diffusionList")),p.oc("disabled","label"==e.displayMode),p.Db(3),p.pc("title",p.jc(58,57,"lang.linkDetails")),p.oc("disabled","label"==e.displayMode),p.Db(3),p.oc("ngForOf",e.displayedSecondaryData),p.Db(3),p.oc("disabled",e.checkModif()),p.Db(1),p.Sc(" ",p.jc(65,59,"lang.validate")," "),p.Db(2),p.oc("disabled",e.checkModif()),p.Db(1),p.Sc(" ",p.jc(68,61,"lang.cancel")," ")}},directives:[C.e,C.f,M.a,x.a,S.c,S.g,at.a,c.u,c.x,O.s,tt.a,O.t,R.b,Qe.d,Qe.e,c.K,c.v,c.w,w.b,c.d,$n.d,c.j,$n.a,j.a,jt.b,It.a,zn.a,k.p,Qe.b,Ma.e,Ma.a,_.a],pipes:[h.d,T.a,O.b],styles:[".availableData[_ngcontent-%COMP%]{margin:10px;display:flex}.secondaryInformations[_ngcontent-%COMP%]{border:1px solid rgba(249,152,48,.4);font-size:10px;height:30px;color:#666}.secondaryInformations_icon[_ngcontent-%COMP%]{height:auto}.secondaryInformations_label[_ngcontent-%COMP%]{width:100%}.resultRow[_ngcontent-%COMP%]{align-items:center;display:flex;padding:5px}.resultRow-mobile[_ngcontent-%COMP%]{font-size:80%}.resultCol[_ngcontent-%COMP%]{flex:1;overflow:hidden;text-overflow:ellipsis}.resultCol-mobile[_ngcontent-%COMP%]{overflow:inherit;text-overflow:inherit;word-break:break-all}.resultCol_chrono[_ngcontent-%COMP%]{color:rgba(0,0,0,.4);font-size:90%}.actions[_ngcontent-%COMP%]{text-align:right;box-shadow:none;border:none;flex:1;justify-content:flex-end;overflow:inherit}.elemToDrag[_ngcontent-%COMP%]{flex:1;border:1px dashed;padding:10px;height:10px;line-height:0;cursor:move;margin-right:5px;margin-left:5px}.columns[_ngcontent-%COMP%]{width:100%;height:90px;padding:20px 10px;border-bottom:1px solid #ccc;color:rgba(0,0,0,.87);display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;background:#fff;font-size:14px}.mat-badge-content[_ngcontent-%COMP%]{background:#f99830}.example-list[_ngcontent-%COMP%]{display:grid;gap:10px;height:auto;max-width:100%;border-radius:4px;border:1px solid rgba(249,152,48,.4);font-size:10px;background:#f5f5f5}.example-box[_ngcontent-%COMP%]{color:#666;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;background:#f5f5f5;flex-grow:1;flex-basis:0;height:20px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.editorTool[_ngcontent-%COMP%]{display:flex;height:44px;font-size:10px;margin-bottom:30px}.editorTool[_ngcontent-%COMP%]   .area[_ngcontent-%COMP%]{flex:1}.editorTool[_ngcontent-%COMP%]   .area[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.editorTool[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{border-left:1px solid #666;height:70%;margin-left:10px;margin-right:10px}.editorTool[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{height:35px}.editorTool[_ngcontent-%COMP%]     .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{background:inherit}.editorTool[_ngcontent-%COMP%]     .mat-form-field-outline{background:#fff}.optionContent[_ngcontent-%COMP%]{display:flex!important}.optionContent[_ngcontent-%COMP%]   .dataIcon[_ngcontent-%COMP%]{width:30px}.optionContent[_ngcontent-%COMP%]   .dataIcon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.optionContent[_ngcontent-%COMP%]   .dataLabel[_ngcontent-%COMP%]{flex:1}.isSelectedMenu[_ngcontent-%COMP%]{background:rgba(249,152,48,.14)}.align_leftData[_ngcontent-%COMP%]{text-align:left}.align_centerData[_ngcontent-%COMP%]{text-align:center}.align_rightData[_ngcontent-%COMP%]{text-align:right}.boldFontData[_ngcontent-%COMP%]{font-weight:700}.bigFontData[_ngcontent-%COMP%]{font-size:14px}.smallFontData[_ngcontent-%COMP%]{font-size:10px}.normalData[_ngcontent-%COMP%]{flex:1}.longData[_ngcontent-%COMP%]{flex:3}.eventList[_ngcontent-%COMP%]{padding-top:10px}.badge-folder[_ngcontent-%COMP%]{cursor:default;background:#135f7f;margin:5px;font-size:8px;max-width:250px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.formType[_ngcontent-%COMP%]{align-items:center;margin-bottom:10px;border-radius:4px;border:1px solid #ccc;position:relative;padding:10px}.formType-title[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;max-width:85%;text-overflow:ellipsis;z-index:1;font-size:10px;font-weight:700;background:#fff;position:absolute;top:-7px;left:10px;padding:0;margin:0;color:#135f7f}"]}),t})(),EV=(()=>{class t{}return t.\u0275mod=p.Ob({type:t}),t.\u0275inj=p.Nb({factory:function(e){return new(e||t)},imports:[[o.g.forChild([{path:"",canActivate:[Af.b],component:U},{path:"users",canActivate:[Af.b],component:Me},{path:"users/new",canActivate:[Af.b],component:na},{path:"users/:id",canActivate:[Af.b],component:na},{path:"groups",canActivate:[Af.b],component:Va},{path:"groups/new",canActivate:[Af.b],component:Cn},{path:"groups/:id",canActivate:[Af.b],component:Cn},{path:"baskets",canActivate:[Af.b],component:An},{path:"baskets/new",canActivate:[Af.b],component:Bo},{path:"baskets/:id",canActivate:[Af.b],component:Bo},{path:"doctypes",canActivate:[Af.b],component:fs},{path:"diffusionModels",canActivate:[Af.b],component:ks},{path:"diffusionModels/new",canActivate:[Af.b],component:Ns},{path:"diffusionModels/:id",canActivate:[Af.b],component:Ns},{path:"entities",canActivate:[Af.b],component:er},{path:"statuses",canActivate:[Af.b],component:yr},{path:"statuses/new",canActivate:[Af.b],component:_r},{path:"statuses/:identifier",canActivate:[Af.b],component:_r},{path:"parameters",canActivate:[Af.b],component:Il},{path:"parameters/new",canActivate:[Af.b],component:ll},{path:"parameters/:id",canActivate:[Af.b],component:ll},{path:"priorities",canActivate:[Af.b],component:Gl},{path:"priorities/new",canActivate:[Af.b],component:Jl},{path:"priorities/:id",canActivate:[Af.b],component:Jl},{path:"actions",canActivate:[Af.b],component:Hr},{path:"actions/new",canActivate:[Af.b],component:al},{path:"actions/:id",canActivate:[Af.b],component:al},{path:"notifications",canActivate:[Af.b],component:Md},{path:"notifications/new",canActivate:[Af.b],component:ab},{path:"notifications/:identifier",canActivate:[Af.b],component:ab},{path:"history",canActivate:[Af.b],component:hb},{path:"history-batch",canActivate:[Af.b],component:Yb},{path:"update-status",canActivate:[Af.b],component:np},{path:"contacts",canActivate:[Af.b],component:jv},{path:"contacts/duplicates",canActivate:[Af.b],component:fD},{path:"contacts/list",redirectTo:"contacts",pathMatch:"full"},{path:"contacts/list/new",canActivate:[Af.b],component:cy},{path:"contacts/list/:id",canActivate:[Af.b],component:cy},{path:"contacts/contactsCustomFields",canActivate:[Af.b],component:ey},{path:"contacts/contacts-groups",canActivate:[Af.b],component:wp},{path:"contacts/contacts-groups/new",canActivate:[Af.b],component:rh},{path:"contacts/contacts-groups/:id",canActivate:[Af.b],component:rh},{path:"contacts/contacts-parameters",canActivate:[Af.b],component:Rh},{path:"versions-update",canActivate:[Af.b],component:zh},{path:"docservers",canActivate:[Af.b],component:tu},{path:"docservers/new",canActivate:[Af.b],component:nu},{path:"templates",canActivate:[Af.b],component:Mu},{path:"templates/new",canActivate:[Af.b],component:um},{path:"templates/:id",canActivate:[Af.b],component:um},{path:"securities",canActivate:[Af.b],component:vm},{path:"sendmail",canActivate:[Af.b],component:km},{path:"shippings",canActivate:[Af.b],component:Xm},{path:"shippings/new",canActivate:[Af.b],component:nf},{path:"shippings/:id",canActivate:[Af.b],component:nf},{path:"customFields",canActivate:[Af.b],component:Ef},{path:"indexingModels",canActivate:[Af.b],component:Sg},{path:"indexingModels/new",canActivate:[Af.b],component:Kf},{path:"indexingModels/:id",canActivate:[Af.b],component:Kf},{path:"tags",canActivate:[Af.b],component:vy},{path:"tags/new",canActivate:[Af.b],component:xy},{path:"tags/:id",canActivate:[Af.b],component:xy},{path:"alfresco",canActivate:[Af.b],component:Gy},{path:"alfresco/new",canActivate:[Af.b],component:ky},{path:"alfresco/:id",canActivate:[Af.b],component:ky},{path:"registeredMails",canActivate:[Af.b],component:fV},{path:"registeredMails/new",canActivate:[Af.b],component:DV},{path:"registeredMails/:id",canActivate:[Af.b],component:DV},{path:"issuingSites",canActivate:[Af.b],component:kD},{path:"issuingSites/new",canActivate:[Af.b],component:$D},{path:"issuingSites/:id",canActivate:[Af.b],component:$D},{path:"searchAdministration",canActivate:[Af.b],component:LV}])],o.g]}),t})();var AV=i("U+qY");let UV=(()=>{class t{constructor(t){t.setDefaultLang("fr")}}return t.\u0275mod=p.Ob({type:t}),t.\u0275inj=p.Nb({factory:function(e){return new(e||t)(p.ac(h.e))},providers:[St],imports:[[a.a,n.a,W.b.forChild(),EV,AV.a]]}),t})()}}]);