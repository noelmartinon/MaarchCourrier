function _createForOfIteratorHelper(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){o=!0,r=t},f:function(){try{c||null==n.return||n.return()}finally{if(o)throw r}}}}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"/JYr":function(t,e,n){"use strict";var a,i=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=n("q3Kh"),c=n("gTqA"),o=n("wjEo");e.exhaustMap=function t(e,n){return n?function(a){return a.pipe(t((function(t,a){return c.from(e(t,a)).pipe(r.map((function(e,i){return n(t,e,a,i)})))})))}:function(t){return t.lift(new s(e))}};var s=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.project))},t}(),l=function(t){function e(e,n){var a=t.call(this,e)||this;return a.project=n,a.hasSubscription=!1,a.hasCompleted=!1,a.index=0,a}return i(e,t),e.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},e.prototype.tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(a){return void this.destination.error(a)}this.hasSubscription=!0,this._innerSub(e)},e.prototype._innerSub=function(t){var e=new o.SimpleInnerSubscriber(this),n=this.destination;n.add(e);var a=o.innerSubscribe(t,e);a!==e&&n.add(a)},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(o.SimpleOuterSubscriber)},Dxa7:function(t,e,n){"use strict";var a,i=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=n("FWf1"),c=n("IKal"),o=n("aJGj");e.take=function(t){return function(e){return 0===t?o.empty():e.lift(new s(t))}};var s=function(){function t(t){if(this.total=t,this.total<0)throw new c.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.total))},t}(),l=function(t){function e(e,n){var a=t.call(this,e)||this;return a.total=n,a.count=0,a}return i(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(r.Subscriber)},IKal:function(t,e,n){"use strict";e.ArgumentOutOfRangeError=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}()},NpuA:function(t,e,n){var a,i;void 0===(i="function"==typeof(a=function t(){"use strict";var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},n=!e.document&&!!e.postMessage,a=n&&/blob:/i.test((e.location||{}).protocol),i={},r=0,c={parse:function(n,a){var o=(a=a||{}).dynamicTyping||!1;if(E(o)&&(a.dynamicTypingFunction=o,o={}),a.dynamicTyping=o,a.transform=!!E(a.transform)&&a.transform,a.worker&&c.WORKERS_SUPPORTED){var s=function(){if(!c.WORKERS_SUPPORTED)return!1;var n,a,o=(n=e.URL||e.webkitURL||null,a=t.toString(),c.BLOB_URL||(c.BLOB_URL=n.createObjectURL(new Blob(["(",a,")();"],{type:"text/javascript"})))),s=new e.Worker(o);return s.onmessage=g,s.id=r++,i[s.id]=s}();return s.userStep=a.step,s.userChunk=a.chunk,s.userComplete=a.complete,s.userError=a.error,a.step=E(a.step),a.chunk=E(a.chunk),a.complete=E(a.complete),a.error=E(a.error),delete a.worker,void s.postMessage({input:n,config:a,workerId:s.id})}var m=null;return"string"==typeof n?m=a.download?new l(a):new b(a):!0===n.readable&&E(n.read)&&E(n.on)?m=new u(a):(e.File&&n instanceof File||n instanceof Object)&&(m=new d(a)),m.stream(n)},unparse:function(t,e){var n=!1,a=!0,i=",",r="\r\n",o='"',s=o+o,l=!1,d=null,b=!1;!function(){if("object"==typeof e){if("string"!=typeof e.delimiter||c.BAD_DELIMITERS.filter((function(t){return-1!==e.delimiter.indexOf(t)})).length||(i=e.delimiter),("boolean"==typeof e.quotes||"function"==typeof e.quotes||Array.isArray(e.quotes))&&(n=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(l=e.skipEmptyLines),"string"==typeof e.newline&&(r=e.newline),"string"==typeof e.quoteChar&&(o=e.quoteChar),"boolean"==typeof e.header&&(a=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");d=e.columns}void 0!==e.escapeChar&&(s=e.escapeChar+o),"boolean"==typeof e.escapeFormulae&&(b=e.escapeFormulae)}}();var u=new RegExp(f(o),"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return p(null,t,l);if("object"==typeof t[0])return p(d||m(t[0]),t,l)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:m(t.data[0])),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),p(t.fields||[],t.data||[],l);throw new Error("Unable to serialize unrecognized input");function m(t){if("object"!=typeof t)return[];var e=[];for(var n in t)e.push(n);return e}function p(t,e,n){var c="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var o=Array.isArray(t)&&0<t.length,s=!Array.isArray(e[0]);if(o&&a){for(var l=0;l<t.length;l++)0<l&&(c+=i),c+=g(t[l],l);0<e.length&&(c+=r)}for(var d=0;d<e.length;d++){var b=o?t.length:e[d].length,u=!1,m=o?0===Object.keys(e[d]).length:0===e[d].length;if(n&&!o&&(u="greedy"===n?""===e[d].join("").trim():1===e[d].length&&0===e[d][0].length),"greedy"===n&&o){for(var f=[],p=0;p<b;p++)f.push(e[d][s?t[p]:p]);u=""===f.join("").trim()}if(!u){for(var h=0;h<b;h++)0<h&&!m&&(c+=i),c+=g(e[d][o&&s?t[h]:h],h);d<e.length-1&&(!n||0<b&&!m)&&(c+=r)}}return c}function g(t,e){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);!0===b&&"string"==typeof t&&null!==t.match(/^[=+\-@].*$/)&&(t="'"+t);var a=t.toString().replace(u,s);return"boolean"==typeof n&&n||"function"==typeof n&&n(t,e)||Array.isArray(n)&&n[e]||function(t,e){for(var n=0;n<e.length;n++)if(-1<t.indexOf(e[n]))return!0;return!1}(a,c.BAD_DELIMITERS)||-1<a.indexOf(i)||" "===a.charAt(0)||" "===a.charAt(a.length-1)?o+a+o:a}}};if(c.RECORD_SEP=String.fromCharCode(30),c.UNIT_SEP=String.fromCharCode(31),c.BYTE_ORDER_MARK="\ufeff",c.BAD_DELIMITERS=["\r","\n",'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!n&&!!e.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=p,c.ParserHandle=m,c.NetworkStreamer=l,c.FileStreamer=d,c.StringStreamer=b,c.ReadableStreamStreamer=u,e.jQuery){var o=e.jQuery;o.fn.parse=function(t){var n=t.config||{},a=[];return this.each((function(t){if("INPUT"!==o(this).prop("tagName").toUpperCase()||"file"!==o(this).attr("type").toLowerCase()||!e.FileReader||!this.files||0===this.files.length)return!0;for(var i=0;i<this.files.length;i++)a.push({file:this.files[i],inputElem:this,instanceConfig:o.extend({},n)})})),i(),this;function i(){if(0!==a.length){var e,n,i,s=a[0];if(E(t.before)){var l=t.before(s.file,s.inputElem);if("object"==typeof l){if("abort"===l.action)return e=s.file,n=s.inputElem,i=l.reason,void(E(t.error)&&t.error({name:"AbortError"},e,n,i));if("skip"===l.action)return void r();"object"==typeof l.config&&(s.instanceConfig=o.extend(s.instanceConfig,l.config))}else if("skip"===l)return void r()}var d=s.instanceConfig.complete;s.instanceConfig.complete=function(t){E(d)&&d(t,s.file,s.inputElem),r()},c.parse(s.file,s.instanceConfig)}else E(t.complete)&&t.complete()}function r(){a.splice(0,1),i()}}}function s(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(t){var e=y(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new m(e),(this._handle.streamer=this)._config=e}).call(this,t),this.parseChunk=function(t,n){if(this.isFirstChunk&&E(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(t);void 0!==i&&(t=i)}this.isFirstChunk=!1,this._halted=!1;var r=this._partialLine+t;this._partialLine="";var o=this._handle.parse(r,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var s=o.meta.cursor;this._finished||(this._partialLine=r.substring(s-this._baseIndex),this._baseIndex=s),o&&o.data&&(this._rowCount+=o.data.length);var l=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(a)e.postMessage({results:o,workerId:c.WORKER_ID,finished:l});else if(E(this._config.chunk)&&!n){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);o=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),this._completed||!l||!E(this._config.complete)||o&&o.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),l||o&&o.meta.paused||this._nextChunk(),o}this._halted=!0},this._sendError=function(t){E(this._config.error)?this._config.error(t):a&&this._config.error&&e.postMessage({workerId:c.WORKER_ID,error:t,finished:!1})}}function l(t){var e;(t=t||{}).chunkSize||(t.chunkSize=c.RemoteChunkSize),s.call(this,t),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),n||(e.onload=C(this._chunkLoaded,this),e.onerror=C(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var a in t)e.setRequestHeader(a,t[a])}this._config.chunkSize&&e.setRequestHeader("Range","bytes="+this._start+"-"+(this._start+this._config.chunkSize-1));try{e.send(this._config.downloadRequestBody)}catch(t){this._chunkError(t.message)}n&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(t){var e=t.getResponseHeader("Content-Range");return null===e?-1:parseInt(e.substring(e.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){this._sendError(new Error(e.statusText||t))}}function d(t){var e,n;(t=t||{}).chunkSize||(t.chunkSize=c.LocalChunkSize),s.call(this,t);var a="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,n=t.slice||t.webkitSlice||t.mozSlice,a?((e=new FileReader).onload=C(this._chunkLoaded,this),e.onerror=C(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var i=Math.min(this._start+this._config.chunkSize,this._input.size);t=n.call(t,this._start,i)}var r=e.readAsText(t,this._config.encoding);a||this._chunkLoaded({target:{result:r}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function b(t){var e;s.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t,n=this._config.chunkSize;return n?(t=e.substring(0,n),e=e.substring(n)):(t=e,e=""),this._finished=!e,this.parseChunk(t)}}}function u(t){s.call(this,t=t||{});var e=[],n=!0,a=!1;this.pause=function(){s.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){s.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){a&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):n=!0},this._streamData=C((function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}}),this),this._streamError=C((function(t){this._streamCleanUp(),this._sendError(t)}),this),this._streamEnd=C((function(){this._streamCleanUp(),a=!0,this._streamData("")}),this),this._streamCleanUp=C((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function m(t){var e,n,a,i=Math.pow(2,53),r=-i,o=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)(e[-+]?\d+)?\s*$/,s=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,l=this,d=0,b=0,u=!1,m=!1,g=[],h={data:[],errors:[],meta:{}};if(E(t.step)){var v=t.step;t.step=function(e){if(h=e,M())S();else{if(S(),0===h.data.length)return;d+=e.data.length,t.preview&&d>t.preview?n.abort():(h.data=h.data[0],v(h,l))}}}function C(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function S(){if(h&&a&&(Y("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),a=!1),t.skipEmptyLines)for(var e=0;e<h.data.length;e++)C(h.data[e])&&h.data.splice(e--,1);return M()&&function(){if(h)if(Array.isArray(h.data[0])){for(var e=0;M()&&e<h.data.length;e++)h.data[e].forEach(n);h.data.splice(0,1)}else h.data.forEach(n);function n(e,n){E(t.transformHeader)&&(e=t.transformHeader(e,n)),g.push(e)}}(),function(){if(!h||!t.header&&!t.dynamicTyping&&!t.transform)return h;function e(e,n){var a,i=t.header?{}:[];for(a=0;a<e.length;a++){var r=a,c=e[a];t.header&&(r=a>=g.length?"__parsed_extra":g[a]),t.transform&&(c=t.transform(c,r)),c=x(r,c),"__parsed_extra"===r?(i[r]=i[r]||[],i[r].push(c)):i[r]=c}return t.header&&(a>g.length?Y("FieldMismatch","TooManyFields","Too many fields: expected "+g.length+" fields but parsed "+a,b+n):a<g.length&&Y("FieldMismatch","TooFewFields","Too few fields: expected "+g.length+" fields but parsed "+a,b+n)),i}var n=1;return!h.data.length||Array.isArray(h.data[0])?(h.data=h.data.map(e),n=h.data.length):h.data=e(h.data,0),t.header&&h.meta&&(h.meta.fields=g),b+=n,h}()}function M(){return t.header&&0===g.length}function x(e,n){return a=e,t.dynamicTypingFunction&&void 0===t.dynamicTyping[a]&&(t.dynamicTyping[a]=t.dynamicTypingFunction(a)),!0===(t.dynamicTyping[a]||t.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(function(t){if(o.test(t)){var e=parseFloat(t);if(r<e&&e<i)return!0}return!1}(n)?parseFloat(n):s.test(n)?new Date(n):""===n?null:n):n;var a}function Y(t,e,n,a){var i={type:t,code:e,message:n};void 0!==a&&(i.row=a),h.errors.push(i)}this.parse=function(i,r,o){if(t.newline||(t.newline=function(t,e){t=t.substring(0,1048576);var n=new RegExp(f(e)+"([^]*?)"+f(e),"gm"),a=(t=t.replace(n,"")).split("\r"),i=t.split("\n");if(1===a.length||1<i.length&&i[0].length<a[0].length)return"\n";for(var r=0,c=0;c<a.length;c++)"\n"===a[c][0]&&r++;return r>=a.length/2?"\r\n":"\r"}(i,t.quoteChar||'"')),a=!1,t.delimiter)E(t.delimiter)&&(t.delimiter=t.delimiter(i),h.meta.delimiter=t.delimiter);else{var s=function(e,n,a,i,r){var o,s,l,d;r=r||[",","\t","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var b=0;b<r.length;b++){var u=r[b],m=0,f=0,g=0;l=void 0;for(var h=new p({comments:i,delimiter:u,newline:n,preview:10}).parse(e),v=0;v<h.data.length;v++)if(a&&C(h.data[v]))g++;else{var y=h.data[v].length;f+=y,void 0!==l?0<y&&(m+=Math.abs(y-l),l=y):l=y}0<h.data.length&&(f/=h.data.length-g),(void 0===s||m<=s)&&(void 0===d||d<f)&&1.99<f&&(s=m,o=u,d=f)}return{successful:!!(t.delimiter=o),bestDelimiter:o}}(i,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);s.successful?t.delimiter=s.bestDelimiter:(a=!0,t.delimiter=c.DefaultDelimiter),h.meta.delimiter=t.delimiter}var l=y(t);return t.preview&&t.header&&l.preview++,e=i,n=new p(l),h=n.parse(e,r,o),S(),u?{meta:{paused:!0}}:h||{meta:{paused:!1}}},this.paused=function(){return u},this.pause=function(){u=!0,n.abort(),e=E(t.chunk)?"":e.substring(n.getCharIndex())},this.resume=function(){l.streamer._halted?(u=!1,l.streamer.parseChunk(e,!0)):setTimeout(l.resume,3)},this.aborted=function(){return m},this.abort=function(){m=!0,n.abort(),h.meta.aborted=!0,E(t.complete)&&t.complete(h),e=""}}function f(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function p(t){var e,n=(t=t||{}).delimiter,a=t.newline,i=t.comments,r=t.step,o=t.preview,s=t.fastMode,l=e=void 0===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(l=t.escapeChar),("string"!=typeof n||-1<c.BAD_DELIMITERS.indexOf(n))&&(n=","),i===n)throw new Error("Comment character same as delimiter");!0===i?i="#":("string"!=typeof i||-1<c.BAD_DELIMITERS.indexOf(i))&&(i=!1),"\n"!==a&&"\r"!==a&&"\r\n"!==a&&(a="\n");var d=0,b=!1;this.parse=function(t,c,u){if("string"!=typeof t)throw new Error("Input must be a string");var m=t.length,p=n.length,g=a.length,h=i.length,v=E(r),y=[],C=[],S=[],M=d=0;if(!t)return L();if(s||!1!==s&&-1===t.indexOf(e)){for(var x=t.split(a),Y=0;Y<x.length;Y++){if(d+=(S=x[Y]).length,Y!==x.length-1)d+=a.length;else if(u)return L();if(!i||S.substring(0,h)!==i){if(v){if(y=[],D(S.split(n)),j(),b)return L()}else D(S.split(n));if(o&&o<=Y)return y=y.slice(0,o),L(!0)}}return L()}for(var Z=t.indexOf(n,d),_=t.indexOf(a,d),k=new RegExp(f(l)+f(e),"g"),w=t.indexOf(e,d);;)if(t[d]!==e)if(i&&0===S.length&&t.substring(d,d+h)===i){if(-1===_)return L();_=t.indexOf(a,d=_+g),Z=t.indexOf(n,d)}else{if(-1!==Z&&(Z<_||-1===_)){if(!(Z<w)){S.push(t.substring(d,Z)),Z=t.indexOf(n,d=Z+p);continue}var O=R(Z,w,_);if(O&&void 0!==O.nextDelim){w=O.quoteSearch,S.push(t.substring(d,Z=O.nextDelim)),Z=t.indexOf(n,d=Z+p);continue}}if(-1===_)break;if(S.push(t.substring(d,_)),F(_+g),v&&(j(),b))return L();if(o&&y.length>=o)return L(!0)}else for(w=d,d++;;){if(-1===(w=t.indexOf(e,w+1)))return u||C.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:y.length,index:d}),P();if(w===m-1)return P(t.substring(d,w).replace(k,e));if(e!==l||t[w+1]!==l){if(e===l||0===w||t[w-1]!==l){-1!==Z&&Z<w+1&&(Z=t.indexOf(n,w+1)),-1!==_&&_<w+1&&(_=t.indexOf(a,w+1));var T=U(-1===_?Z:Math.min(Z,_));if(t[w+1+T]===n){S.push(t.substring(d,w).replace(k,e)),t[d=w+1+T+p]!==e&&(w=t.indexOf(e,d)),Z=t.indexOf(n,d),_=t.indexOf(a,d);break}var I=U(_);if(t.substring(w+1+I,w+1+I+g)===a){if(S.push(t.substring(d,w).replace(k,e)),F(w+1+I+g),Z=t.indexOf(n,d),w=t.indexOf(e,d),v&&(j(),b))return L();if(o&&y.length>=o)return L(!0);break}C.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:y.length,index:d}),w++}}else w++}return P();function D(t){y.push(t),M=d}function U(e){var n=0;if(-1!==e){var a=t.substring(w+1,e);a&&""===a.trim()&&(n=a.length)}return n}function P(e){return u||(void 0===e&&(e=t.substring(d)),S.push(e),d=m,D(S),v&&j()),L()}function F(e){d=e,D(S),S=[],_=t.indexOf(a,d)}function L(t){return{data:y,errors:C,meta:{delimiter:n,linebreak:a,aborted:b,truncated:!!t,cursor:M+(c||0)}}}function j(){r(L()),y=[],C=[]}function R(a,i,r){var c={nextDelim:void 0,quoteSearch:void 0},o=t.indexOf(e,i+1);if(i<a&&a<o&&(o<r||-1===r)){var s=t.indexOf(n,o);if(-1===s)return c;o<s&&(o=t.indexOf(e,o+1)),c=R(s,o,r)}else c={nextDelim:a,quoteSearch:i};return c}},this.abort=function(){b=!0},this.getCharIndex=function(){return d}}function g(t){var e=t.data,n=i[e.workerId],a=!1;if(e.error)n.userError(e.error,e.file);else if(e.results&&e.results.data){var r={abort:function(){a=!0,h(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:v,resume:v};if(E(n.userStep)){for(var c=0;c<e.results.data.length&&(n.userStep({data:e.results.data[c],errors:e.results.errors,meta:e.results.meta},r),!a);c++);delete e.results}else E(n.userChunk)&&(n.userChunk(e.results,r,e.file),delete e.results)}e.finished&&!a&&h(e.workerId,e.results)}function h(t,e){var n=i[t];E(n.userComplete)&&n.userComplete(e),n.terminate(),delete i[t]}function v(){throw new Error("Not implemented.")}function y(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var n in t)e[n]=y(t[n]);return e}function C(t,e){return function(){t.apply(e,arguments)}}function E(t){return"function"==typeof t}return a&&(e.onmessage=function(t){var n=t.data;if(void 0===c.WORKER_ID&&n&&(c.WORKER_ID=n.workerId),"string"==typeof n.input)e.postMessage({workerId:c.WORKER_ID,results:c.parse(n.input,n.config),finished:!0});else if(e.File&&n.input instanceof File||n.input instanceof Object){var a=c.parse(n.input,n.config);a&&e.postMessage({workerId:c.WORKER_ID,results:a,finished:!0})}}),(l.prototype=Object.create(s.prototype)).constructor=l,(d.prototype=Object.create(s.prototype)).constructor=d,(b.prototype=Object.create(b.prototype)).constructor=b,(u.prototype=Object.create(s.prototype)).constructor=u,c})?a.apply(e,[]):a)||(t.exports=i)},aJGj:function(t,e,n){"use strict";var a=n("Q1FS");e.EMPTY=new a.Observable((function(t){return t.complete()})),e.empty=function(t){return t?function(t){return new a.Observable((function(e){return t.schedule((function(){return e.complete()}))}))}(t):e.EMPTY}},aPMI:function(t,e,n){"use strict";n.r(e),n.d(e,"AdministrationModule",(function(){return GS}));var a=n("vWc3"),i=n("cMWS"),r=n("tyNb"),c=n("LRne"),o=n("3Pt+"),s=n("JX91"),l=n("lJxs"),d=n("vkgz"),b=n("JIr8"),u=n("fXoL"),m=n("sYmb"),f=n("tk/3"),p=n("4zkx"),g=n("A6w4"),h=n("eiH7"),v=n("aEDk"),y=n("AXEc"),C=n("rH+9"),E=n("d7/a"),S=n("XhcP"),M=n("Ro8j"),x=n("zZ42"),Y=n("F8Z3"),Z=n("ofXK"),_=n("f0Cb"),k=n("kmnG"),w=n("qFsG"),O=n("Xa2L"),T=n("Wp6s"),I=n("FKr1"),D=n("bTqV"),U=n("1YbM"),P=["snav2"],F=["searchServiceInput"];function L(t,e){1&t&&(u.Zb(0,"div",18),u.Ub(1,"mat-spinner",19),u.Yb())}function j(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-card",20),u.hc("click",(function(){u.Hc(n);var t=e.$implicit;return u.lc().goToSpecifiedAdministration(t)})),u.Zb(1,"div",21),u.Ub(2,"i",22),u.Yb(),u.Zb(3,"span",23),u.Sc(4),u.Yb(),u.Sc(5),u.mc(6,"translate"),u.Yb()}if(2&t){var a=e.$implicit;u.Eb(2),u.Gb(a.style),u.Eb(2),u.Tc(a.count),u.Eb(1),u.Uc("\xa0 ",u.nc(6,5,a.label)," ")}}function R(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",24),u.hc("click",(function(){u.Hc(n);var t=e.$implicit;return u.lc().goToSpecifiedAdministration(t)})),u.mc(1,"translate"),u.Zb(2,"div",25),u.Zb(3,"span",26),u.Ub(4,"i"),u.Yb(),u.Zb(5,"span",27),u.Sc(6),u.mc(7,"translate"),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit;u.sc("joyrideStep",a.id)("title",u.nc(1,6,a.comment)),u.Eb(4),u.Hb("avatarCount2 ",a.style,""),u.Eb(2),u.Uc(" ",u.nc(7,8,a.label)," ")}}var Q,A=function(t){return{width:t}},H=((Q=function(){function t(e,n,a,i,r,c,s,l,d,b){_classCallCheck(this,t),this.translate=e,this.http=n,this.router=a,this.headerService=i,this.appService=r,this.privilegeService=c,this.latinisePipe=s,this.notify=l,this.functionService=d,this.featureTourService=b,this.loading=!1,this.shortcutsAdmin=[],this.organisationServices=[],this.productionServices=[],this.classementServices=[],this.supervisionServices=[],this.searchService=new o.h,this.administrations=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.administration")),this.organisationServices=this.privilegeService.getCurrentUserAdministrationsByUnit("organisation"),this.productionServices=this.privilegeService.getCurrentUserAdministrationsByUnit("production"),this.classementServices=this.privilegeService.getCurrentUserAdministrationsByUnit("classement"),this.supervisionServices=this.privilegeService.getCurrentUserAdministrationsByUnit("supervision"),this.administrations=this.organisationServices.concat(this.productionServices).concat(this.classementServices).concat(this.supervisionServices),this.shortcutsAdmin=this.administrations.filter((function(t){return["admin_users","admin_groups","manage_entities"].indexOf(t.id)>-1})).map((function(t){return Object.assign(Object.assign({},t),{count:0})})),this.getNbShortcuts(),this.filteredAdministrations=this.searchService.valueChanges.pipe(Object(s.a)(""),Object(l.a)((function(e){return t._filter(e,"administrations")}))),this.loading=!1,setTimeout((function(){t.searchServiceInput.nativeElement.focus()}),0)}},{key:"ngAfterViewInit",value:function(){"root_visible"!==this.headerService.user.mode&&"root_invisible"!==this.headerService.user.mode||this.featureTourService.init()}},{key:"goToSpecifiedAdministration",value:function(t){!0===t.angular?this.router.navigate([t.route]):window.location.assign(t.route)}},{key:"_filter",value:function(t,e){var n=this;if("string"==typeof t){var a=this.latinisePipe.transform(t.toLowerCase());return this[e].filter((function(t){return n.latinisePipe.transform(t.label.toLowerCase()).includes(a)}))}return this[e]}},{key:"getNbShortcuts",value:function(){var t=this;this.http.get("../rest/administration/details").pipe(Object(d.a)((function(e){t.functionService.empty(e.count.users)||(t.shortcutsAdmin.filter((function(t){return"admin_users"===t.id}))[0].count=e.count.users),t.functionService.empty(e.count.groups)||(t.shortcutsAdmin.filter((function(t){return"admin_groups"===t.id}))[0].count=e.count.groups),t.functionService.empty(e.count.entities)||(t.shortcutsAdmin.filter((function(t){return"manage_entities"===t.id}))[0].count=e.count.entities)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(c.a)(!1)}))).subscribe()}}]),t}()).\u0275fac=function(t){return new(t||Q)(u.Tb(m.e),u.Tb(f.b),u.Tb(r.c),u.Tb(p.a),u.Tb(g.a),u.Tb(h.a),u.Tb(v.c),u.Tb(y.a),u.Tb(C.a),u.Tb(E.a))},Q.\u0275cmp=u.Nb({type:Q,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(P,!0),u.Oc(F,!0)),2&t&&(u.Cc(n=u.ic())&&(e.sidenavRight=n.first),u.Cc(n=u.ic())&&(e.searchServiceInput=n.first))},decls:24,vars:22,consts:[[1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],["stepNumber","1","joyrideStep","firstStep","title","demoTour","text","Hi, Welcome to demo tour",1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content",2,"display","flex","flex-direction","column"],["class","loading",4,"ngIf"],[2,"display","grid","grid-template-columns","repeat(auto-fill, minmax(400px, 1fr))","gap","20px","padding","20px"],["class","countCard","matRipple","",3,"click",4,"ngFor","ngForOf"],[2,"padding","10px","font-size","10px","width","250px !important"],["matInput","",3,"formControl","placeholder"],["searchServiceInput",""],[2,"margin","20px","display","grid","grid-template-columns","repeat(auto-fill, minmax(300px, 1fr))","gap","20px","padding","20px","padding-top","0px","margin-top","0px"],["mat-button","","style","font-size:20px;height:80px;",3,"joyrideStep","title","click",4,"ngFor","ngForOf"],["position","end","autoFocus","false",1,"panel-right",2,"overflow-x","hidden",3,"fixedInViewport","opened","mode","ngStyle"],["snav2",""],[1,"loading"],[2,"margin","auto"],["matRipple","",1,"countCard",3,"click"],["mat-card-avatar","",1,"avatarCount",2,"margin-right","10px"],[2,"position","absolute"],[2,"font-size","40px"],["mat-button","",2,"font-size","20px","height","80px",3,"joyrideStep","title","click"],[2,"display","flex","align-items","center"],[2,"padding-right","10px"],[1,"countLabel",2,"white-space","initial","text-align","left"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Zb(1,"mat-sidenav-content"),u.Zb(2,"div",1),u.Zb(3,"div",2),u.Zb(4,"div",3),u.Ub(5,"header-left"),u.Yb(),u.Zb(6,"div",4),u.Ub(7,"header-right"),u.Yb(),u.Yb(),u.Ub(8,"div",5),u.Yb(),u.Zb(9,"div",6),u.Zb(10,"div",7),u.Qc(11,L,2,0,"div",8),u.Zb(12,"div",9),u.Qc(13,j,7,7,"mat-card",10),u.Yb(),u.Ub(14,"mat-divider"),u.Zb(15,"mat-form-field",11),u.Ub(16,"input",12,13),u.Yb(),u.Zb(18,"div",14),u.Qc(19,R,8,10,"button",15),u.mc(20,"sortBy"),u.mc(21,"async"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Ub(22,"mat-sidenav",16,17),u.Yb()),2&t&&(u.Eb(3),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(2),u.sc("ngForOf",e.shortcutsAdmin),u.Eb(3),u.sc("formControl",e.searchService)("placeholder",e.translate.instant("lang.filterBy")),u.Eb(3),u.sc("ngForOf",u.oc(20,15,u.nc(21,18,e.filteredAdministrations),"label")),u.Eb(3),u.sc("fixedInViewport",e.appService.getViewMode())("opened",(e.appService.getViewMode(),!1))("mode",e.appService.getViewMode()?"over":"side")("ngStyle",u.zc(20,A,e.appService.getViewMode()?"80%":"30%")))},directives:[S.e,S.f,M.a,x.a,Y.a,Z.t,Z.s,_.a,k.c,w.b,o.c,o.t,o.i,S.d,Z.w,O.c,T.a,I.t,T.c,D.b],pipes:[U.a,Z.b,m.d],styles:[".adminArea[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap}.adminArea_1[_ngcontent-%COMP%]{flex:1}.adminArea_1[_ngcontent-%COMP%], .adminArea_2[_ngcontent-%COMP%], .adminArea_3[_ngcontent-%COMP%], .adminArea_4[_ngcontent-%COMP%]{overflow:hidden;padding:20px}.loading[_ngcontent-%COMP%]{display:flex;height:100%}.adminArea-label[_ngcontent-%COMP%]{font-size:20px;font-weight:bolder;opacity:.2;text-align:center}.adminArea-button[_ngcontent-%COMP%]{white-space:inherit;height:100px;line-height:20px} .autocompleteServices .mat-optgroup-label{position:-webkit-sticky;position:sticky;top:0;background:#fff;z-index:1}.countCard[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;height:100px;color:#fff;background:#135f7f;cursor:pointer}.avatarCount[_ngcontent-%COMP%]{color:#135f7f;font-size:20px;background:#fff}.avatarCount[_ngcontent-%COMP%], .avatarCount2[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:center;border-radius:40px;padding:10px}.avatarCount2[_ngcontent-%COMP%]{color:#fff;font-size:30px;background:#135f7f;width:55px!important;height:55px!important}.countLabel[_ngcontent-%COMP%]{color:#135f7f;font-size:16px}"]}),Q),z=n("0IaG"),V=n("M9IT"),N=n("Dh3D"),J=n("I65S"),G=n("rNzc"),B=n("+0xr"),W=n("2c88"),q=n("pLZG"),X=n("XqQ8"),K=n("SIQe"),tt=n("5cI5"),et=n("/t3+"),nt=n("1jcm"),at=n("w9N8"),it=n("d3UM");function rt(t,e){1&t&&(u.Xb(0),u.Zb(1,"div",18),u.Ub(2,"mat-spinner"),u.Yb(),u.Wb())}function ct(t,e){if(1&t&&(u.Zb(0,"mat-option",32),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n),u.Eb(1),u.Uc(" ","\t"===n?"TAB":n," ")}}function ot(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",28),u.hc("click",(function(){return u.Hc(n),u.lc(),u.Dc(1).click()}))("onFileDropped",(function(t){return u.Hc(n),u.lc(2).dndUploadFile(t)})),u.Zb(1,"div"),u.Sc(2),u.mc(3,"translate"),u.Zb(4,"mat-form-field",29),u.hc("click",(function(t){return u.Hc(n),t.stopPropagation()})),u.Zb(5,"mat-label"),u.Sc(6),u.mc(7,"translate"),u.Yb(),u.Zb(8,"mat-select",30),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).currentDelimiter=t}))("click",(function(t){return u.Hc(n),t.stopPropagation()})),u.Qc(9,ct,2,2,"mat-option",31),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(2),u.Uc(" ",u.nc(3,4,"lang.dndFileCsvDesc")," "),u.Eb(4),u.Tc(u.nc(7,6,"lang.delimiter")),u.Eb(2),u.sc("ngModel",a.currentDelimiter),u.Eb(1),u.sc("ngForOf",a.delimiters)}}function st(t,e){if(1&t&&(u.Zb(0,"mat-option",32),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n),u.Eb(1),u.Uc(" ",n," ")}}function lt(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-header-cell"),u.Ub(1,"i",41),u.mc(2,"translate"),u.Sc(3,"\xa0"),u.Zb(4,"b",42),u.mc(5,"translate"),u.Sc(6),u.Yb(),u.Sc(7," \xa0"),u.Ub(8,"i",43),u.Sc(9,"\xa0 "),u.Ub(10,"i",44),u.mc(11,"translate"),u.Sc(12,"\xa0"),u.Zb(13,"mat-form-field",45),u.hc("click",(function(t){return u.Hc(n),t.stopPropagation()})),u.mc(14,"translate"),u.Zb(15,"mat-select",46),u.hc("ngModelChange",(function(t){u.Hc(n);var e=u.lc().$implicit;return u.lc(3).associatedColmuns[e]=t}))("selectionChange",(function(t){u.Hc(n);var e=u.lc().$implicit;return u.lc(3).changeColumn(e,t.value)})),u.Ub(16,"mat-option",47),u.Qc(17,st,2,2,"mat-option",31),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc().$implicit,i=u.lc(3);u.Eb(1),u.sc("title",u.nc(2,7,"lang.dbColumn")),u.Eb(3),u.sc("title",u.nc(5,9,"lang.dbColumn")),u.Eb(2),u.Tc(a),u.Eb(4),u.sc("title",u.nc(11,11,"lang.csvColumn")),u.Eb(3),u.sc("title",u.nc(14,13,"lang.csvColumn")),u.Eb(2),u.sc("ngModel",i.associatedColmuns[a]),u.Eb(2),u.sc("ngForOf",i.csvColumns)}}function dt(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit,a=u.lc().$implicit;u.Eb(1),u.Uc(" ",n[a]," ")}}function bt(t,e){if(1&t&&(u.Xb(0),u.Xb(1,38),u.Qc(2,lt,18,15,"mat-header-cell",39),u.Qc(3,dt,2,1,"mat-cell",40),u.Wb(),u.Wb()),2&t){var n=e.$implicit;u.Eb(1),u.sc("matColumnDef",n)}}function ut(t,e){1&t&&u.Ub(0,"mat-header-row")}function mt(t,e){1&t&&u.Ub(0,"mat-row")}function ft(t,e){if(1&t&&(u.Zb(0,"mat-table",33,34),u.Qc(2,bt,4,1,"ng-container",35),u.Qc(3,ut,1,0,"mat-header-row",36),u.Qc(4,mt,1,0,"mat-row",37),u.Yb()),2&t){var n=u.lc(2);u.sc("dataSource",n.dataSource),u.Eb(2),u.sc("ngForOf",n.userColmuns),u.Eb(1),u.sc("matHeaderRowDef",n.userColmuns),u.Eb(1),u.sc("matRowDefColumns",n.userColmuns)}}function pt(t,e){if(1&t){var n=u.ac();u.Zb(0,"input",19,20),u.hc("change",(function(t){return u.Hc(n),u.lc().uploadCsv(t)})),u.Yb(),u.Qc(2,ot,10,8,"div",21),u.Zb(3,"div",22),u.Zb(4,"div",23),u.Ub(5,"mat-paginator",24,25),u.Yb(),u.Yb(),u.Qc(7,ft,5,4,"mat-table",26),u.Ub(8,"div",27),u.mc(9,"translate"),u.Ub(10,"div",27),u.mc(11,"translate")}if(2&t){var a=u.lc();u.Eb(2),u.sc("ngIf",0===a.csvData.length),u.Eb(3),u.sc("length",100)("hidePageSize",!0)("pageSize",10),u.Eb(2),u.sc("ngIf",a.csvData.length>0),u.Eb(1),u.sc("innerHTML",u.nc(9,7,"lang.infoImportusers"),u.Ic),u.Eb(2),u.sc("innerHTML",u.nc(11,9,"lang.infoImportusers2"),u.Ic)}}function gt(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",48),u.hc("click",(function(){return u.Hc(n),u.lc().onSubmit()})),u.Sc(1),u.mc(2,"translate"),u.Yb()}if(2&t){var a=u.lc();u.sc("disabled",a.loading),u.Eb(1),u.Tc(u.nc(2,2,"lang.validate"))}}var ht,vt=((ht=function(){function t(e,n,a,i,r,c,o,s,l){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.functionsService=i,this.localStorage=r,this.headerService=c,this.dialog=o,this.dialogRef=s,this.data=l,this.loading=!1,this.userColmuns=["id","user_id","firstname","lastname","mail","phone"],this.csvColumns=[],this.delimiters=[";",",","\t"],this.currentDelimiter=";",this.associatedColmuns={},this.dataSource=new B.o(null),this.hasHeader=!0,this.csvData=[],this.userData=[],this.countAll=0,this.countAdd=0,this.countUp=0}return _createClass(t,[{key:"ngOnInit",value:function(){this.setConfiguration()}},{key:"changeColumn",value:function(t,e){var n=this;this.userData=[];for(var a=this.hasHeader?1:0;a<this.csvData.length;a++){var i=this.csvData[a];this.userData.push({id:"id"===t?i[this.csvColumns.filter((function(t){return t===e}))[0]]:i[this.associatedColmuns.id],user_id:"user_id"===t?i[this.csvColumns.filter((function(t){return t===e}))[0]]:i[this.associatedColmuns.user_id],firstname:"firstname"===t?i[this.csvColumns.filter((function(t){return t===e}))[0]]:i[this.associatedColmuns.firstname],lastname:"lastname"===t?i[this.csvColumns.filter((function(t){return t===e}))[0]]:i[this.associatedColmuns.lastname],mail:"mail"===t?i[this.csvColumns.filter((function(t){return t===e}))[0]]:i[this.associatedColmuns.mail],phone:"phone"===t?i[this.csvColumns.filter((function(t){return t===e}))[0]]:i[this.associatedColmuns.phone]})}this.countAdd=this.csvData.filter((function(t,e){return e>0&&n.functionsService.empty(t[n.associatedColmuns.id])})).length,this.countUp=this.csvData.filter((function(t,e){return e>0&&!n.functionsService.empty(t[n.associatedColmuns.id])})).length,setTimeout((function(){n.dataSource=new B.o(n.userData),n.dataSource.paginator=n.paginator}),0)}},{key:"uploadCsv",value:function(t){var e=this;if(t.target.files&&t.target.files[0]&&("text/csv"===t.target.files[0].type||"application/vnd.ms-excel"===t.target.files[0].type)){this.loading=!0;var n=[],a=new FileReader;a.readAsText(t.target.files[0],"ISO-8859-1"),a.onload=function(t){(n=(n=t.target.result.split("\n")).filter((function(t){return""!==t})))[0].split(e.currentDelimiter).map((function(t){return t.replace(/"/gi,"").trim()})).length>=e.userColmuns.length-1?function(){var t={};e.setCsvColumns(n[0].split(e.currentDelimiter).map((function(t){return t.replace(/"/gi,"").trim()}))),e.countAll=e.hasHeader?n.length-1:n.length;for(var a=0;a<n.length;a++)t={},n[a].split(e.currentDelimiter).map((function(t){return t.replace(/"/gi,"").trim()})).forEach((function(n,a){t[e.csvColumns[a]]=n})),e.csvData.push(t);e.initData(),e.countAdd=e.csvData.filter((function(t,n){return n>0&&e.functionsService.empty(t[e.associatedColmuns.id])})).length,e.countUp=e.csvData.filter((function(t,n){return n>0&&!e.functionsService.empty(t[e.associatedColmuns.id])})).length,e.localStorage.save("importUsersFields_"+e.headerService.user.id,e.currentDelimiter)}():e.notify.error(e.translate.instant("lang.mustAtLeastMinValues")),e.loading=!1}}else this.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.notAllowedExtension")+" !",msg:this.translate.instant("lang.file")+" : <b>"+t.target.files[0].name+"</b>, "+this.translate.instant("lang.type")+" : <b>"+t.target.files[0].type+"</b><br/><br/><u>"+this.translate.instant("lang.allowedExtensions")+"</u> : <br/>text/csv"}})}},{key:"setCsvColumns",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.csvColumns=e.filter((function(e){return t.functionsService.empty(e)})).length>0?Object.keys(e).map((function(t,e){return""+e})):e}},{key:"toggleHeader",value:function(){var t=this;this.hasHeader=!this.hasHeader,this.countAll=this.hasHeader?this.csvData.length-1:this.csvData.length,this.hasHeader?(this.countAdd=this.csvData.filter((function(e,n){return n>0&&t.functionsService.empty(e[t.associatedColmuns.id])})).length,this.countUp=this.csvData.filter((function(e,n){return n>0&&!t.functionsService.empty(e[t.associatedColmuns.id])})).length):(this.countAdd=this.csvData.filter((function(e,n){return t.functionsService.empty(e[t.associatedColmuns.id])})).length,this.countUp=this.csvData.filter((function(e,n){return!t.functionsService.empty(e[t.associatedColmuns.id])})).length),this.initData()}},{key:"initData",value:function(){var t=this;this.userData=[];for(var e=this.hasHeader?1:0;e<this.csvData.length;e++){var n=this.csvData[e];this.associatedColmuns.id=this.csvColumns[0],this.associatedColmuns.user_id=this.csvColumns[1],this.associatedColmuns.firstname=this.csvColumns[2],this.associatedColmuns.lastname=this.csvColumns[3],this.associatedColmuns.mail=this.csvColumns[4],this.associatedColmuns.phone=this.csvColumns[5],this.userData.push({id:n[this.csvColumns[0]],user_id:n[this.csvColumns[1]],firstname:n[this.csvColumns[2]],lastname:n[this.csvColumns[3]],mail:n[this.csvColumns[4]],phone:n[this.csvColumns[5]]})}setTimeout((function(){t.dataSource=new B.o(t.userData),t.dataSource.paginator=t.paginator}),0)}},{key:"dndUploadFile",value:function(t){this.uploadCsv({target:{files:[t[0]]}})}},{key:"onSubmit",value:function(){var t=this,e=[],n="";this.translate.get("lang.confirmImportUsers",{0:this.countAll}).subscribe((function(e){n=e+" ?<br/><br/>",n+="<ul><li><b>".concat(t.countAdd,"</b> ").concat(t.translate.instant("lang.additions"),"</li><li><b>").concat(t.countUp,"</b> ").concat(t.translate.instant("lang.modifications"),"</li></ul>")}));var a=this.dialog.open(W.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.import"),msg:n}});a.afterClosed().pipe(Object(q.a)((function(t){return"ok"===t})),Object(d.a)((function(){t.loading=!0,t.csvData.forEach((function(n,a){(t.hasHeader&&a>0||!t.hasHeader)&&e.push({id:n[t.associatedColmuns.id],user_id:n[t.associatedColmuns.user_id],firstname:n[t.associatedColmuns.firstname],lastname:n[t.associatedColmuns.lastname],mail:n[t.associatedColmuns.mail],phone:n[t.associatedColmuns.phone]})}))})),Object(X.a)((function(){return t.http.put("../rest/users/import",{users:e})})),Object(d.a)((function(e){var n="";e.warnings.count>0&&(n="<br/>".concat(e.warnings.count," ").concat(t.translate.instant("lang.withWarnings"),"  : <ul>"),e.warnings.details.forEach((function(e){n+="<li> ".concat(t.translate.instant("lang."+e.lang)," (").concat(t.translate.instant("lang.line")," : ").concat(t.hasHeader?e.index+2:e.index+1,")</li>")})),n+="</ul>"),e.errors.count>0&&(n+="<br/>".concat(e.errors.count," ").concat(t.translate.instant("lang.withErrors"),"  : <ul>"),e.errors.details.forEach((function(e){n+="<li> ".concat(t.translate.instant("lang."+e.lang)," (").concat(t.translate.instant("lang.line")," : ").concat(t.hasHeader?e.index+2:e.index+1,")</li>")})),n+="</ul>"),a=t.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:t.translate.instant("lang.import"),msg:"<b>"+e.success+"</b> / <b>"+t.countAll+"</b> "+t.translate.instant("lang.importedUsers")+"."+n}})})),Object(X.a)((function(){return a.afterClosed()})),Object(d.a)((function(){t.dialogRef.close("success")})),Object(b.a)((function(e){return t.loading=!1,t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"setConfiguration",value:function(){null!==this.localStorage.get("importUsersFields_"+this.headerService.user.id)&&(this.currentDelimiter=this.localStorage.get("importUsersFields_"+this.headerService.user.id))}}]),t}()).\u0275fac=function(t){return new(t||ht)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(C.a),u.Tb(tt.a),u.Tb(p.a),u.Tb(z.b),u.Tb(z.h),u.Tb(z.a))},ht.\u0275cmp=u.Nb({type:ht,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&u.ad(V.a,!0),2&t&&u.Cc(n=u.ic())&&(e.paginator=n.first)},decls:37,vars:28,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"import-tool"],[2,"flex","1"],["color","primary",3,"checked","change"],[2,"flex","1","text-align","center"],["color","primary",1,"fa","fa-users"],["color","primary"],["color","primary",1,"fa","fa-user-plus"],[2,"flex","1","text-align","right"],["color","primary",1,"fa","fa-user-edit"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"divider-modal"],["mat-dialog-actions","",1,"actions"],["mat-raised-button","","mat-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","mat-button","",3,"disabled","mat-dialog-close"],[1,"loader"],["type","file","name","files[]","id","uploadFile","accept",".csv",2,"display","none",3,"change"],["uploadFile",""],["appUploadFileDragDrop","","class","dndFile",3,"click","onFileDropped",4,"ngIf"],[1,"row",2,"margin","0px"],[1,"col-md-12"],[3,"length","hidePageSize","pageSize"],["paginator",""],[3,"dataSource",4,"ngIf"],[1,"alert-message","alert-message-info",2,"min-width","100%",3,"innerHTML"],["appUploadFileDragDrop","",1,"dndFile",3,"click","onFileDropped"],["appearance","outline",2,"font-size","14px",3,"click"],[3,"ngModel","ngModelChange","click"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"dataSource"],["table",""],[4,"ngFor","ngForOf"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],[4,"matHeaderCellDef"],[4,"matCellDef"],["color","primary",1,"fas","fa-database",3,"title"],["color","primary",3,"title"],[1,"fas","fa-arrows-alt-h"],[1,"fas","fa-file-csv",3,"title"],[2,"width","80px !important",3,"title","click"],[3,"ngModel","ngModelChange","selectionChange"],["value",""],["mat-raised-button","","mat-button","","color","primary",3,"disabled","click"]],template:function(t,e){if(1&t&&(u.Zb(0,"div",0),u.Zb(1,"h1",1),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"div",2),u.Zb(5,"mat-toolbar",3),u.Zb(6,"span",4),u.Zb(7,"mat-slide-toggle",5),u.hc("change",(function(){return e.toggleHeader()})),u.Sc(8),u.mc(9,"translate"),u.Yb(),u.Yb(),u.Zb(10,"span",6),u.Ub(11,"i",7),u.Sc(12),u.mc(13,"translate"),u.Zb(14,"b",8),u.Sc(15),u.Yb(),u.Yb(),u.Zb(16,"span",6),u.Ub(17,"i",9),u.Sc(18),u.mc(19,"translate"),u.Zb(20,"b",8),u.Sc(21),u.Yb(),u.Yb(),u.Zb(22,"span",10),u.Ub(23,"i",11),u.Sc(24),u.mc(25,"translate"),u.Zb(26,"b",8),u.Sc(27),u.Yb(),u.Yb(),u.Yb(),u.Qc(28,rt,3,0,"ng-container",12),u.Qc(29,pt,12,11,"ng-template",null,13,u.Rc),u.Yb(),u.Ub(31,"span",14),u.Zb(32,"div",15),u.Qc(33,gt,3,4,"button",16),u.Zb(34,"button",17),u.Sc(35),u.mc(36,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t){var n=u.Dc(30);u.Eb(2),u.Tc(u.nc(3,16,"lang.usersImport")),u.Eb(3),u.Jb("hide",0===e.csvData.length||e.loading),u.Eb(2),u.sc("checked",e.hasHeader),u.Eb(1),u.Tc(u.nc(9,18,"lang.csvHeader")),u.Eb(4),u.Uc("\xa0",u.nc(13,20,"lang.usersOfFile")," : "),u.Eb(3),u.Tc(e.countAll),u.Eb(3),u.Uc("\xa0",u.nc(19,22,"lang.additions")," : "),u.Eb(3),u.Tc(e.countAdd),u.Eb(3),u.Uc("\xa0",u.nc(25,24,"lang.modifications")," : "),u.Eb(3),u.Tc(e.countUp),u.Eb(1),u.sc("ngIf",e.loading)("ngIfElse",n),u.Eb(5),u.sc("ngIf",e.csvData.length>0),u.Eb(1),u.sc("disabled",e.loading),u.Eb(1),u.Tc(u.nc(36,26,"lang.cancel"))}},directives:[z.i,z.f,et.a,nt.a,Z.t,z.c,D.b,z.d,O.c,V.a,at.a,k.c,k.g,it.a,o.t,o.w,Z.s,I.o,B.n,B.k,B.m,B.c,B.i,B.b,B.h,B.a,B.j,B.l],pipes:[m.d],styles:[".loader[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center;justify-content:center}.hide[_ngcontent-%COMP%]{display:none}.import-tool[_ngcontent-%COMP%]{font-size:14px}.dndFile[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;margin:0;justify-content:center;font-size:30px;opacity:.5!important;cursor:pointer}"]}),ht),yt=n("mrSG"),Ct=n("nYR2"),Et=["listFilter"];function St(t,e){1&t&&(u.Zb(0,"div",13),u.Ub(1,"mat-spinner"),u.Yb())}function Mt(t,e){if(1&t&&(u.Zb(0,"mat-option",14),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n),u.Eb(1),u.Uc(" ",n," ")}}function xt(t,e){if(1&t&&(u.Zb(0,"mat-option",14),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n),u.Eb(1),u.Uc(" ",n," ")}}function Yt(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",15),u.Zb(1,"mat-form-field",5),u.Zb(2,"mat-label"),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Zb(5,"mat-select",16),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().exportModel.delimiter=t})),u.mc(6,"translate"),u.Qc(7,xt,2,2,"mat-option",7),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc();u.Eb(3),u.Tc(u.nc(4,5,"lang.delimiter")),u.Eb(2),u.tc("placeholder",u.nc(6,7,"lang.delimiter")),u.sc("ngModel",a.exportModel.delimiter)("disabled","csv"!=a.exportModel.format),u.Eb(2),u.sc("ngForOf",a.delimiters)}}var Zt,_t,kt=((Zt=function(){function t(e,n,a,i,r,c){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.data=i,this.localStorage=r,this.headerService=c,this.loading=!1,this.loadingExport=!1,this.delimiters=[";",",","TAB"],this.formats=["csv"],this.exportModel={delimiter:";",format:"csv"}}return _createClass(t,[{key:"ngOnInit",value:function(){return Object(yt.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.setConfiguration();case 1:case"end":return t.stop()}}),t,this)})))}},{key:"exportData",value:function(){var t=this;this.localStorage.save("exportUsersFields_"+this.headerService.user.id,JSON.stringify(this.exportModel)),this.loadingExport=!0,this.http.put("../rest/users/export",this.exportModel,{responseType:"blob"}).pipe(Object(d.a)((function(e){if("text/html"!==e.type){var n,a,i,r,c=document.createElement("a");c.href=window.URL.createObjectURL(e),a=(n=new Date).getDate(),i=n.getMonth()+1,r=n.getFullYear(),a<10&&(a="0"+a),i<10&&(i="0"+i),n=a+"-"+i+"-"+r,c.setAttribute("download","export_users_maarch_"+n+"."+t.exportModel.format.toLowerCase()),document.body.appendChild(c),c.click()}else alert(t.translate.instant("lang.tooMuchDatas"))})),Object(Ct.a)((function(){return t.loadingExport=!1})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"setConfiguration",value:function(){null!==this.localStorage.get("exportUsersFields_"+this.headerService.user.id)&&(this.exportModel.delimiter=JSON.parse(this.localStorage.get("exportUsersFields_"+this.headerService.user.id)).delimiter)}}]),t}()).\u0275fac=function(t){return new(t||Zt)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(z.a),u.Tb(tt.a),u.Tb(p.a))},Zt.\u0275cmp=u.Nb({type:Zt,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&u.Oc(Et,!0),2&t&&u.Cc(n=u.ic())&&(e.listFilter=n.first)},decls:24,vars:23,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["mat-dialog-content",""],["class","loader",4,"ngIf"],[1,"row"],["appearance","outline"],[3,"placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","col-md-9",4,"ngIf"],[1,"divider-modal"],["mat-dialog-actions","",1,"actions"],["mat-raised-button","","mat-button","","color","primary",3,"click"],["mat-raised-button","","mat-button","",3,"mat-dialog-close"],[1,"loader"],[3,"value"],[1,"col-md-9"],[3,"placeholder","ngModel","disabled","ngModelChange"]],template:function(t,e){1&t&&(u.Zb(0,"div",0),u.Zb(1,"h1",1),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"div",2),u.Qc(5,St,2,0,"div",3),u.Zb(6,"div",4),u.Zb(7,"div"),u.Zb(8,"mat-form-field",5),u.Zb(9,"mat-label"),u.Sc(10),u.mc(11,"translate"),u.Yb(),u.Zb(12,"mat-select",6),u.hc("ngModelChange",(function(t){return e.exportModel.format=t})),u.mc(13,"translate"),u.Qc(14,Mt,2,2,"mat-option",7),u.Yb(),u.Yb(),u.Yb(),u.Qc(15,Yt,8,9,"div",8),u.Yb(),u.Yb(),u.Ub(16,"span",9),u.Zb(17,"div",10),u.Zb(18,"button",11),u.hc("click",(function(){return e.exportData()})),u.Sc(19),u.mc(20,"translate"),u.Yb(),u.Zb(21,"button",12),u.Sc(22),u.mc(23,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(2),u.Tc(u.nc(3,13,"lang.exportDatas")),u.Eb(3),u.sc("ngIf",e.loadingExport),u.Eb(2),u.Jb("col-md-12","csv"!=e.exportModel.format)("col-md-3","csv"==e.exportModel.format),u.Eb(3),u.Tc(u.nc(11,15,"lang.format")),u.Eb(2),u.tc("placeholder",u.nc(13,17,"lang.format")),u.sc("ngModel",e.exportModel.format),u.Eb(2),u.sc("ngForOf",e.formats),u.Eb(1),u.sc("ngIf","csv"==e.exportModel.format),u.Eb(4),u.Tc(u.nc(20,19,"lang.toExport")),u.Eb(3),u.Tc(u.nc(23,21,"lang.cancel")))},directives:[z.i,z.f,Z.t,k.c,k.g,it.a,o.t,o.w,Z.s,z.c,D.b,z.d,O.c,I.o],pipes:[m.d],styles:[".mat-dialog-container{position:relative}.mat-dialog-content[_ngcontent-%COMP%]{min-height:150px;padding-bottom:10px;overflow-x:hidden}.actions[_ngcontent-%COMP%], .loader[_ngcontent-%COMP%]{justify-content:center}.loader[_ngcontent-%COMP%]{position:absolute;display:flex;width:100%;left:0;top:0;height:100%;background:hsla(0,0%,100%,.6);z-index:1;align-items:center}"]}),Zt),wt=n("pWCv"),Ot=n("6eB1"),Tt=n("RmLz"),It=((_t=function(){function t(e,n,a,i){_classCallCheck(this,t),this.notify=e,this.headerService=n,this.functionsService=a,this.localStorage=i,this.filters={},this.defaultFilters={admin_users:{sort:"user_id",sortDirection:"asc",page:0,field:""},admin_actions:{sort:"id",sortDirection:"asc",page:0,field:""},admin_baskets:{sort:"basket_id",sortDirection:"asc",page:0,field:""},admin_contacts_groups:{sort:"label",sortDirection:"asc",page:0,field:""},admin_listmodels:{sort:"title",sortDirection:"asc",page:0,field:""},admin_groups:{sort:"group_desc",sortDirection:"asc",page:0,field:""},admin_indexing_models:{sort:"label",sortDirection:"asc",page:0,field:""},admin_notif:{sort:"notification_id",sortDirection:"asc",page:0,field:""},admin_parameters:{sort:"id",sortDirection:"asc",page:0,field:""},admin_priorities:{sort:"label",sortDirection:"asc",page:0,field:""},admin_shippings:{sort:"label",sortDirection:"asc",page:0,field:""},admin_status:{sort:"label_status",sortDirection:"asc",page:0,field:""},admin_tag:{sort:"label",sortDirection:"asc",page:0,field:""},admin_templates:{sort:"template_label",sortDirection:"asc",page:0,field:""},admin_alfresco:{sort:"label",sortDirection:"asc",page:0,field:""},admin_contacts_list:{sort:"lastname",sortDirection:"asc",page:0,field:""},admin_regitered_mail_issuing_site:{sort:"accountNumber",sortDirection:"asc",page:0,field:""},admin_regitered_mail:{sort:"rangeNumber",sortDirection:"asc",page:0,field:""}},this.searchTerm=new o.h(""),this.currentAdminId="",null!==this.localStorage.get("filtersAdmin_"+this.headerService.user.id)&&(this.filters=JSON.parse(this.localStorage.get("filtersAdmin_"+this.headerService.user.id)))}return _createClass(t,[{key:"setAdminId",value:function(t){this.currentAdminId=t}},{key:"setDataSource",value:function(t,e,n,a,i){var r=this;this.currentAdminId=t,this.searchTerm=new o.h(""),this.searchTerm.valueChanges.pipe(Object(wt.tap)((function(t){r.setFilter("field",t),r.saveFilter(r.filters[r.currentAdminId]),t=(t=t.trim()).toLowerCase(),setTimeout((function(){r.dataSource.filter=t}),0),r.dataSource.filterPredicate=function(t,e){return r.functionsService.filterUnSensitive(t,e,r.filterColumns)}}))).subscribe(),this.filterColumns=i,this.dataSource=new B.o(e),this.dataSource.paginator=a,this.dataSource.sortingDataAccessor=this.functionsService.listSortingDataAccessor,this.functionsService.empty(this.getFilter())&&this.saveDefaultFilter(),a.pageIndex=this.getFilter("page"),this.dataSource.sort=n;var c=document.getElementsByClassName("mat-column-"+this.getFilter("sort"))[0];c.click(),"desc"===this.getFilter("sortDirection")&&c.click(),this.searchTerm.setValue(this.getFilter("field")),Object(Ot.merge)(n.sortChange,a.page).pipe(Object(Tt.startWith)({}),Object(wt.tap)((function(){r.saveFilter({sort:n.active,sortDirection:n.direction,page:a.pageIndex,field:r.getFilter("field")})})),Object(G.catchError)((function(t){return r.notify.handleSoftErrors(t),Object(J.of)(!1)}))).subscribe()}},{key:"saveDefaultFilter",value:function(){this.saveFilter(this.defaultFilters[this.currentAdminId])}},{key:"setFilter",value:function(t,e){this.filters[this.currentAdminId][t]=e}},{key:"saveFilter",value:function(t){this.filters[this.currentAdminId]=t,this.localStorage.save("filtersAdmin_"+this.headerService.user.id,JSON.stringify(this.filters))}},{key:"getFilterField",value:function(){return this.searchTerm}},{key:"getDataSource",value:function(){return this.dataSource}},{key:"getFilter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.functionsService.empty(this.filters[this.currentAdminId])?null:this.functionsService.empty(t)?this.functionsService.empty(this.filters[this.currentAdminId])?"":this.filters[this.currentAdminId]:this.functionsService.empty(this.filters[this.currentAdminId][t])?"":this.filters[this.currentAdminId][t]}}]),t}()).\u0275fac=function(t){return new(t||_t)(u.dc(y.a),u.dc(p.a),u.dc(C.a),u.dc(tt.a))},_t.\u0275prov=u.Pb({token:_t,factory:_t.\u0275fac}),_t),Dt=n("MutI"),Ut=n("NFeN"),Pt=n("jaxi"),Ft=n("Qu3c"),Lt=n("63qU"),jt=["adminMenuTemplate"];function Rt(t,e){1&t&&u.Ub(0,"mat-divider")}function Qt(t,e){if(1&t&&(u.Zb(0,"mat-nav-list"),u.Zb(1,"h3",11),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"p",19),u.Sc(5),u.mc(6,"translate"),u.Yb(),u.Zb(7,"p",19),u.Sc(8),u.mc(9,"translate"),u.Yb(),u.Zb(10,"p",19),u.Sc(11),u.mc(12,"translate"),u.Yb(),u.Yb()),2&t){var n=u.lc(2);u.Eb(2),u.Tc(u.nc(3,7,"lang.quota")),u.Eb(3),u.Vc("",u.nc(6,9,"lang.actives")," : ",n.quota.actives,""),u.Eb(3),u.Vc("",u.nc(9,11,"lang.inactives")," : ",n.quota.inactives,""),u.Eb(3),u.Vc("",u.nc(12,13,"lang.quota")," : ",n.quota.userQuota,"")}}function At(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-nav-list"),u.Zb(1,"h3",11),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"a",12),u.Ub(5,"mat-icon",13),u.Zb(6,"p",14),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Yb(),u.Zb(9,"a",15),u.hc("click",(function(){return u.Hc(n),u.lc().openUsersExportModal()})),u.Ub(10,"mat-icon",16),u.Zb(11,"p",14),u.Sc(12),u.mc(13,"translate"),u.Yb(),u.Yb(),u.Zb(14,"a",15),u.hc("click",(function(){return u.Hc(n),u.lc().openUsersImportModal()})),u.Ub(15,"mat-icon",17),u.Zb(16,"p",14),u.Sc(17),u.mc(18,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Ub(19,"mat-divider"),u.Qc(20,Rt,1,0,"mat-divider",18),u.Qc(21,Qt,13,15,"mat-nav-list",18)}if(2&t){var a=u.lc();u.Eb(2),u.Tc(u.nc(3,6,"lang.actions")),u.Eb(5),u.Uc(" ",u.nc(8,8,"lang.add")," "),u.Eb(5),u.Uc(" ",u.nc(13,10,"lang.usersExport")," "),u.Eb(5),u.Uc(" ",u.nc(18,12,"lang.usersImport")," "),u.Eb(3),u.sc("ngIf",a.quota.userQuota),u.Eb(1),u.sc("ngIf",a.quota.userQuota)}}function Ht(t,e){1&t&&(u.Zb(0,"div",20),u.Ub(1,"mat-spinner",21),u.Yb())}function zt(t,e){if(1&t&&(u.Zb(0,"mat-header-cell",48),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=u.lc(2);u.Jb("hide-for-mobile",n.appService.getViewMode()),u.Eb(1),u.Uc("",u.nc(2,3,"lang.technicalId")," ")}}function $t(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.Jb("hide-for-mobile",a.appService.getViewMode()),u.Eb(1),u.Uc(" ",n.id," ")}}function Vt(t,e){if(1&t&&(u.Zb(0,"mat-header-cell",48),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=u.lc(2);u.Jb("hide-for-mobile",n.appService.getViewMode()),u.Eb(1),u.Tc(u.nc(2,3,"lang.id"))}}function Nt(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.Jb("hide-for-mobile",a.appService.getViewMode()),u.Eb(1),u.Uc(" ",n.user_id," ")}}function Jt(t,e){1&t&&(u.Zb(0,"mat-header-cell",48),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.lastname")))}function Gt(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.lastname," ")}}function Bt(t,e){1&t&&(u.Zb(0,"mat-header-cell",48),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.firstname")))}function Wt(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.firstname," ")}}function qt(t,e){1&t&&(u.Zb(0,"mat-header-cell",48),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.status")))}var Xt=function(){return["SPD","ABS"]},Kt=function(t,e){return{statusUserLabelWarn:t,statusUserLabelPrimary:e}};function te(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Zb(1,"span",49),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.sc("ngClass",u.Ac(6,Kt,u.yc(4,Xt).indexOf(n.status)>-1,-1==u.yc(5,Xt).indexOf(n.status))),u.Eb(1),u.Tc(u.nc(3,2,"lang.user"+n.status))}}function ee(t,e){if(1&t&&(u.Zb(0,"mat-header-cell",48),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=u.lc(2);u.Jb("hide-for-mobile",n.appService.getViewMode()),u.Eb(1),u.Tc(u.nc(2,3,"lang.email"))}}function ne(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.Jb("hide-for-mobile",a.appService.getViewMode()),u.Eb(1),u.Uc(" ",n.mail," ")}}function ae(t,e){1&t&&u.Ub(0,"mat-header-cell")}var ie=function(){return["root_visible","root_invisible"]};function re(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",55),u.hc("click",(function(t){u.Hc(n);var e=u.lc().$implicit,a=u.lc(2);return t.stopPropagation(),a.deleteUser(e,"suspend")})),u.mc(1,"translate"),u.Ub(2,"mat-icon",56),u.Yb()}if(2&t){var a=u.lc().$implicit,i=u.lc(2);u.tc("matTooltip",u.nc(1,2,"lang.suspend")),u.sc("disabled",a.id===i.user.id||u.yc(4,ie).indexOf(a.mode)>-1&&"standard"===i.headerService.user.mode)}}function ce(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",57),u.hc("click",(function(t){u.Hc(n);var e=u.lc().$implicit,a=u.lc(2);return t.stopPropagation(),a.activateUser(e)})),u.mc(1,"translate"),u.Ub(2,"mat-icon",58),u.Yb()}if(2&t){var a=u.lc().$implicit,i=u.lc(2);u.tc("matTooltip",u.nc(1,2,"lang.authorize")),u.sc("disabled",u.yc(4,ie).indexOf(a.mode)>-1&&"standard"===i.headerService.user.mode)}}function oe(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-cell",50),u.Qc(1,re,3,5,"button",51),u.Qc(2,ce,3,5,"button",52),u.Zb(3,"button",53),u.hc("click",(function(t){u.Hc(n);var a=e.$implicit,i=u.lc(2);return t.stopPropagation(),i.deleteUser(a,"delete")})),u.mc(4,"translate"),u.Ub(5,"mat-icon",54),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit,i=u.lc(2);u.Eb(1),u.sc("ngIf","SPD"!=a.status),u.Eb(1),u.sc("ngIf","SPD"==a.status),u.Eb(1),u.tc("matTooltip",u.nc(4,4,"lang.delete")),u.sc("disabled",a.id===i.user.id||u.yc(6,ie).indexOf(a.mode)>-1)}}function se(t,e){1&t&&u.Ub(0,"mat-header-row")}function le(t,e){if(1&t&&(u.Ub(0,"mat-row",59),u.mc(1,"translate")),2&t){var n=e.$implicit;u.Jb("admin",u.yc(6,ie).indexOf(n.mode)>-1),u.uc("routerLink","/administration/users/",n.id,""),u.tc("matTooltip",u.nc(1,4,"lang.view"))}}function de(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-card",22),u.Zb(1,"div",23),u.Zb(2,"div",24),u.Zb(3,"mat-form-field"),u.Ub(4,"input",25),u.mc(5,"translate"),u.Zb(6,"mat-button-toggle",26),u.hc("click",(function(t){u.Hc(n);var e=u.lc();return t.stopPropagation(),e.toggleWebserviceAccount()})),u.mc(7,"translate"),u.Ub(8,"mat-icon",27),u.Yb(),u.Yb(),u.Yb(),u.Zb(9,"div",24),u.Ub(10,"mat-paginator",28,29),u.Yb(),u.Yb(),u.Zb(12,"mat-table",30,31),u.Xb(14,32),u.Qc(15,zt,3,5,"mat-header-cell",33),u.Qc(16,$t,2,3,"mat-cell",34),u.Wb(),u.Xb(17,35),u.Qc(18,Vt,3,5,"mat-header-cell",33),u.Qc(19,Nt,2,3,"mat-cell",34),u.Wb(),u.Xb(20,36),u.Qc(21,Jt,3,3,"mat-header-cell",37),u.Qc(22,Gt,2,1,"mat-cell",38),u.Wb(),u.Xb(23,39),u.Qc(24,Bt,3,3,"mat-header-cell",37),u.Qc(25,Wt,2,1,"mat-cell",38),u.Wb(),u.Xb(26,40),u.Qc(27,qt,3,3,"mat-header-cell",37),u.Qc(28,te,4,9,"mat-cell",38),u.Wb(),u.Xb(29,41),u.Qc(30,ee,3,5,"mat-header-cell",33),u.Qc(31,ne,2,3,"mat-cell",34),u.Wb(),u.Xb(32,42),u.Qc(33,ae,1,0,"mat-header-cell",43),u.Qc(34,oe,6,7,"mat-cell",44),u.Wb(),u.Qc(35,se,1,0,"mat-header-row",45),u.Qc(36,le,2,7,"mat-row",46),u.Yb(),u.Zb(37,"div",47),u.Sc(38),u.mc(39,"translate"),u.Yb(),u.Yb()}if(2&t){var a=u.lc();u.Eb(4),u.tc("placeholder",u.nc(5,12,"lang.filterBy")),u.sc("formControl",a.adminService.getFilterField()),u.Eb(2),u.tc("title",u.nc(7,14,"lang.displayWebserviceAccount")),u.sc("checked",a.withWebserviceAccount),u.Eb(4),u.sc("length",100)("hidePageSize",!0)("pageSize",10),u.Eb(2),u.sc("dataSource",a.adminService.getDataSource()),u.Eb(23),u.sc("matHeaderRowDef",a.displayedColumns),u.Eb(1),u.sc("matRowDefColumns",a.displayedColumns),u.Eb(2),u.Vc(" ",a.data.length," ",u.nc(39,16,"lang.usersAlt"),"")}}var be=function(){return["/rest/autocomplete/users"]};function ue(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",10),u.Zb(1,"plugin-autocomplete",11),u.hc("triggerEvent",(function(t){u.Hc(n);var a=e.index;return u.lc(3).setRedirectUserListModels(a,t)})),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit,i=u.lc(3);u.tc("id",a.object_id),u.Eb(1),u.sc("labelPlaceholder",i.translate.instant("lang.newDest")+" : "+a.title)("labelList",i.translate.instant("lang.availableUsers"))("routeDatas",u.yc(6,be))("targetSearchKey","idToDisplay")("subInfoKey","descriptionToDisplay")}}function me(t,e){if(1&t&&(u.Xb(0),u.Zb(1,"h2"),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"div",7),u.Zb(5,"b"),u.Sc(6),u.Yb(),u.Sc(7,"\xa0"),u.Ub(8,"span",8),u.Sc(9," : "),u.Yb(),u.Qc(10,ue,2,7,"div",9),u.Wb()),2&t){var n=u.lc(2);u.Eb(2),u.Tc(u.nc(3,5,"lang.redirectUserListDiff")),u.Eb(4),u.Vc("",n.data.userDestRedirect.firstname," ",n.data.userDestRedirect.lastname,""),u.Eb(2),u.sc("innerHTML",n.translate.instant("lang.chooseNewDest"),u.Ic),u.Eb(2),u.sc("ngForOf",n.data.redirectListModels)}}function fe(t,e){if(1&t){var n=u.ac();u.Xb(0),u.Zb(1,"h2"),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"div",7),u.Zb(5,"b"),u.Sc(6),u.Yb(),u.Sc(7,"\xa0"),u.Ub(8,"span",8),u.Sc(9," : "),u.Yb(),u.Zb(10,"div",10),u.Zb(11,"plugin-autocomplete",11),u.hc("triggerEvent",(function(t){return u.Hc(n),u.lc(2).setRedirectUserRes(t)})),u.Yb(),u.Yb(),u.Wb()}if(2&t){var a=u.lc(2);u.Eb(2),u.Tc(u.nc(3,10,"lang.redirectUserListInstances")),u.Eb(4),u.Vc("",a.data.userDestRedirect.firstname," ",a.data.userDestRedirect.lastname,""),u.Eb(2),u.sc("innerHTML",a.translate.instant("lang.chooseNewDestUser"),u.Ic),u.Eb(2),u.tc("id",a.data.userDestRedirect.user_id),u.Eb(1),u.sc("labelPlaceholder",a.translate.instant("lang.newDestRes"))("labelList",a.translate.instant("lang.availableUsers"))("routeDatas",u.yc(12,be))("targetSearchKey","idToDisplay")("subInfoKey","descriptionToDisplay")}}function pe(t,e){if(1&t&&(u.Zb(0,"b"),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=u.lc(3);u.Eb(1),u.Wc("",u.nc(2,3,"lang.delete")," ",n.data.userDestRedirect.firstname," ",n.data.userDestRedirect.lastname,"")}}function ge(t,e){if(1&t&&(u.Zb(0,"b"),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=u.lc(3);u.Eb(1),u.Wc("",u.nc(2,3,"lang.suspend")," ",n.data.userDestRedirect.firstname," ",n.data.userDestRedirect.lastname,"")}}function he(t,e){if(1&t&&(u.Xb(0),u.Zb(1,"div",12),u.Qc(2,pe,3,5,"b",2),u.Sc(3,"\xa0 "),u.Qc(4,ge,3,5,"b",2),u.Sc(5,"\xa0 "),u.Yb(),u.Wb()),2&t){var n=u.lc(2);u.Eb(2),u.sc("ngIf","delete"==n.data.userDestRedirect.actionMode),u.Eb(2),u.sc("ngIf","suspend"==n.data.userDestRedirect.actionMode)}}function ve(t,e){if(1&t&&(u.Xb(0),u.Qc(1,me,11,7,"ng-container",2),u.Qc(2,fe,12,13,"ng-container",2),u.Qc(3,he,6,2,"ng-container",2),u.Wb()),2&t){var n=u.lc();u.Eb(1),u.sc("ngIf",n.data.inDiffListDest),u.Eb(1),u.sc("ngIf",n.data.isResDestUser),u.Eb(1),u.sc("ngIf",!n.data.inDiffListDest&&!n.data.isResDestUser)}}function ye(t,e){if(1&t&&(u.Zb(0,"mat-list-item"),u.Zb(1,"mat-icon",17),u.Ub(2,"i",18),u.Yb(),u.Zb(3,"p",15),u.Zb(4,"span"),u.Sc(5),u.Yb(),u.Yb(),u.Yb()),2&t){var n=e.$implicit;u.Eb(5),u.Uc(" ",n," ")}}function Ce(t,e){if(1&t&&(u.Zb(0,"div",14),u.Zb(1,"mat-list"),u.Zb(2,"p",15),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Qc(5,ye,6,1,"mat-list-item",16),u.Yb(),u.Yb()),2&t){var n=u.lc(2);u.Eb(3),u.Tc(u.nc(4,2,"lang.diffusionList")),u.Eb(2),u.sc("ngForOf",n.data.listTemplateEntities)}}function Ee(t,e){if(1&t&&(u.Zb(0,"mat-list-item"),u.Zb(1,"mat-icon",17),u.Ub(2,"i",19),u.Yb(),u.Zb(3,"p",15),u.Zb(4,"span"),u.Sc(5),u.Yb(),u.Yb(),u.Yb()),2&t){var n=e.$implicit;u.Eb(5),u.Uc(" ",n," ")}}function Se(t,e){if(1&t&&(u.Zb(0,"div",14),u.Zb(1,"mat-list"),u.Zb(2,"p",15),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Qc(5,Ee,6,1,"mat-list-item",16),u.Yb(),u.Yb()),2&t){var n=u.lc(2);u.Eb(3),u.Tc(u.nc(4,2,"lang.mailEntitiesList")),u.Eb(2),u.sc("ngForOf",n.data.listInstanceEntities)}}function Me(t,e){if(1&t&&(u.Xb(0),u.Zb(1,"div",7),u.Zb(2,"p"),u.Ub(3,"span",8),u.Zb(4,"b"),u.Sc(5),u.Yb(),u.Sc(6,"\xa0"),u.Yb(),u.Zb(7,"p"),u.Ub(8,"span",8),u.Yb(),u.Yb(),u.Qc(9,Ce,6,4,"div",13),u.Qc(10,Se,6,4,"div",13),u.Wb()),2&t){var n=u.lc();u.Eb(3),u.sc("innerHTML",n.translate.instant("lang.userIsNotDeletable"),u.Ic),u.Eb(2),u.Vc("",n.data.userDestRedirect.firstname," ",n.data.userDestRedirect.lastname,""),u.Eb(3),u.sc("innerHTML",n.translate.instant("lang.userIsDeletableBy"),u.Ic),u.Eb(1),u.sc("ngIf",n.data.inTemplateList),u.Eb(1),u.sc("ngIf",n.data.inInstanceList)}}function xe(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",20),u.hc("click",(function(){u.Hc(n);var t=u.lc();return t.dialogRef.close(t.data)})),u.Sc(1),u.mc(2,"translate"),u.mc(3,"translate"),u.Yb()}if(2&t){var a=u.lc();u.sc("disabled",!a.sendFunction()),u.Eb(1),u.Vc("",u.nc(2,3,"lang.delete")," ",u.nc(3,5,"lang.user"),"")}}function Ye(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",21),u.hc("click",(function(){u.Hc(n);var t=u.lc();return t.dialogRef.close(t.data)})),u.Sc(1),u.mc(2,"translate"),u.mc(3,"translate"),u.Yb()}if(2&t){var a=u.lc();u.sc("disabled",!a.sendFunction()),u.Eb(1),u.Vc("",u.nc(2,3,"lang.suspend")," ",u.nc(3,5,"lang.user"),"")}}function Ze(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",22),u.hc("click",(function(){return u.Hc(n),u.lc().dialogRef.close()})),u.Sc(1),u.mc(2,"translate"),u.Yb()}2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.close")))}var _e,ke,we=((ke=function(){function t(e,n,a,i,r,c,o,s,l){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.dialog=i,this.headerService=r,this.appService=c,this.functions=o,this.adminService=s,this.viewContainerRef=l,this.loading=!0,this.updateListModel=!0,this.updateListInstance=!0,this.data=[],this.config={},this.userDestRedirect={},this.userDestRedirectModels=[],this.listinstances=[],this.quota={},this.user={},this.withWebserviceAccount=!1,this.webserviceAccounts=[],this.noWebserviceAccounts=[],this.displayedColumns=["id","user_id","lastname","firstname","status","mail","actions"],this.filterColumns=["id","user_id","lastname","firstname","mail"]}return _createClass(t,[{key:"ngOnInit",value:function(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.users")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.user=this.headerService.user,this.getData()}},{key:"getData",value:function(){var t=this;this.webserviceAccounts=[],this.noWebserviceAccounts=[],this.data=[],this.http.get("../rest/users").pipe(Object(wt.tap)((function(e){t.data=e.users,t.data.forEach((function(e){e.statusLabel=t.translate.instant("lang.user"+e.status),"rest"===e.mode?t.webserviceAccounts.push(e):t.noWebserviceAccounts.push(e)})),t.data=t.noWebserviceAccounts,t.quota=e.quota,t.quota.actives>t.quota.userQuota&&t.notify.error(t.translate.instant("lang.quotaExceeded")),t.loading=!1,setTimeout((function(){t.adminService.setDataSource("admin_users",t.data,t.sort,t.paginator,t.filterColumns)}),0)})),Object(G.catchError)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"activateUser",value:function(t){var e=this;confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.authorize")+" \xab "+t.user_id+" \xbb")&&(t.status="OK",this.http.put("../rest/users/"+t.id,t).subscribe((function(){e.notify.success(e.translate.instant("lang.userAuthorized")),e.quota.userQuota&&(e.quota.inactives--,e.quota.actives++,e.quota.actives>e.quota.userQuota&&e.notify.error(e.translate.instant("lang.quotaExceeded")))}),(function(n){t.status="SPD",e.notify.error(n.error.errors)})))}},{key:"deleteUser",value:function(t,e){var n=this;t.actionMode=e,this.http.get("../rest/users/"+t.id+"/isDeletable").subscribe((function(e){e&&e.hasOwnProperty("errors")?n.notify.error(e.errors):(t.isDeletable=e.isDeletable,n.config=e.isDeletable?{panelClass:"maarch-modal",data:{userDestRedirect:t,isDeletable:e.isDeletable,redirectListInstances:e.listInstances,redirectListModels:e.listTemplates}}:{panelClass:"maarch-modal",data:{userDestRedirect:t,isDeletable:e.isDeletable,listInstanceEntities:e.listInstanceEntities,listTemplateEntities:e.listTemplateEntities}},n.dialogRef=n.dialog.open(Oe,n.config),n.dialogRef.afterClosed().subscribe((function(e){e&&t.isDeletable&&(t.inDiffListDest=e.inDiffListDest,t.isResDestUser=e.isResDestUser,e.inDiffListDest&&(t.redirectListModels=e.redirectListModels),e.isResDestUser&&(t.redirectDestResUserId=e.redirectDestResUserId,e.redirectListInstances.forEach((function(e){e.listInstances.forEach((function(e){"dest"===e.item_mode&&e.item_id===t.user_id&&(e.item_id=t.redirectDestResUserId)}))})),t.redirectListInstances=e.redirectListInstances),t.inDiffListDest&&t.isResDestUser?n.http.put("../rest/listTemplates/entityDest/itemId/"+t.id,t).subscribe((function(){n.http.put("../rest/listinstances",t.redirectListInstances).subscribe((function(e){null!=e&&e.errors?n.notify.error(e.errors):"delete"===t.actionMode?n.http.delete("../rest/users/"+t.id).subscribe((function(){for(var e in n.data)n.data[e].id==t.id&&n.data.splice(Number(e),1);n.adminService.setDataSource("admin_users",n.data,n.sort,n.paginator,n.filterColumns),n.quota.userQuota&&"SPD"!==t.status?n.quota.actives--:n.quota.userQuota&&"SPD"===t.status&&n.quota.inactives--,n.notify.success(n.translate.instant("lang.userDeleted")+" \xab "+t.user_id+" \xbb")}),(function(t){n.notify.error(t.error.errors)})):"suspend"===t.actionMode&&n.http.put("../rest/users/"+t.id+"/suspend",t).subscribe((function(){t.status="SPD",n.notify.success(n.translate.instant("lang.userSuspended")),n.quota.userQuota&&(n.quota.inactives++,n.quota.actives--)}),(function(e){t.status="OK",n.notify.error(e.error.errors)}))}),(function(t){n.notify.error(t.error.errors)}))}),(function(t){n.notify.error(t.error.errors)})):t.inDiffListDest&&!t.isResDestUser?n.http.put("../rest/listTemplates/entityDest/itemId/"+t.id,t).subscribe((function(){"delete"===t.actionMode?n.http.delete("../rest/users/"+t.id).subscribe((function(){for(var e in n.data)n.data[e].id==t.id&&n.data.splice(Number(e),1);n.adminService.setDataSource("admin_users",n.data,n.sort,n.paginator,n.filterColumns),n.quota.userQuota&&"OK"===t.status?n.quota.actives--:n.quota.userQuota&&"SPD"===t.status&&n.quota.inactives--,n.notify.success(n.translate.instant("lang.userDeleted")+" \xab "+t.user_id+" \xbb")}),(function(t){n.notify.error(t.error.errors)})):"suspend"===t.actionMode&&n.http.put("../rest/users/"+t.id+"/suspend",t).subscribe((function(){t.status="SPD",n.notify.success(n.translate.instant("lang.userSuspended")),n.quota.userQuota&&(n.quota.inactives++,n.quota.actives--)}),(function(e){t.status="OK",n.notify.error(e.error.errors)}))}),(function(t){n.notify.error(t.error.errors)})):!t.inDiffListDest&&t.isResDestUser?n.http.put("../rest/listinstances",t.redirectListInstances).subscribe((function(e){e&&e.hasOwnProperty("errors")?n.notify.error(e.errors):"delete"===t.actionMode?n.http.delete("../rest/users/"+t.id).subscribe((function(){for(var e in n.data)n.data[e].id===t.id&&n.data.splice(Number(e),1);n.adminService.setDataSource("admin_users",n.data,n.sort,n.paginator,n.filterColumns),n.quota.userQuota&&"OK"===t.status?n.quota.actives--:n.quota.userQuota&&"SPD"===t.status&&n.quota.inactives--,n.notify.success(n.translate.instant("lang.userDeleted")+" \xab "+t.user_id+" \xbb")}),(function(t){n.notify.error(t.error.errors)})):"suspend"===t.actionMode&&n.http.put("../rest/users/"+t.id+"/suspend",t).subscribe((function(){t.status="SPD",n.notify.success(n.translate.instant("lang.userSuspended")),n.quota.userQuota&&(n.quota.inactives++,n.quota.actives--)}),(function(e){t.status="OK",n.notify.error(e.error.errors)}))}),(function(t){n.notify.error(t.error.errors)})):t.inDiffListDest||t.isResDestUser||("delete"===t.actionMode?n.http.delete("../rest/users/"+t.id).subscribe((function(){for(var e in n.data)n.data[e].id==t.id&&n.data.splice(Number(e),1);n.adminService.setDataSource("admin_users",n.data,n.sort,n.paginator,n.filterColumns),n.quota.userQuota&&"OK"===t.status?n.quota.actives--:n.quota.userQuota&&"SPD"===t.status&&n.quota.inactives--,n.notify.success(n.translate.instant("lang.userDeleted")+" \xab "+t.user_id+" \xbb")}),(function(t){n.notify.error(t.error.errors)})):"suspend"===t.actionMode&&n.http.put("../rest/users/"+t.id+"/suspend",t).subscribe((function(){t.status="SPD",n.notify.success(n.translate.instant("lang.userSuspended")),n.quota.userQuota&&(n.quota.inactives++,n.quota.actives--)}),(function(e){t.status="OK",n.notify.error(e.error.errors)}))))})))}),(function(t){n.notify.error(t.error.errors)}))}},{key:"toggleWebserviceAccount",value:function(){this.withWebserviceAccount=!this.withWebserviceAccount,this.data=this.withWebserviceAccount?this.webserviceAccounts:this.noWebserviceAccounts,this.adminService.setDataSource("admin_users",this.data,this.sort,this.paginator,this.filterColumns)}},{key:"openUsersImportModal",value:function(){var t=this;this.dialog.open(vt,{disableClose:!0,width:"99vw",maxWidth:"99vw",panelClass:"maarch-full-height-modal"}).afterClosed().pipe(Object(q.a)((function(t){return"success"===t})),Object(wt.tap)((function(){t.getData()})),Object(G.catchError)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"openUsersExportModal",value:function(){this.dialog.open(kt,{panelClass:"maarch-modal",width:"800px",autoFocus:!1})}}]),t}()).\u0275fac=function(t){return new(t||ke)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(z.b),u.Tb(p.a),u.Tb(g.a),u.Tb(C.a),u.Tb(It),u.Tb(u.R))},ke.\u0275cmp=u.Nb({type:ke,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(jt,!0),u.ad(V.a,!0),u.ad(N.a,!0)),2&t&&(u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.paginator=n.first),u.Cc(n=u.ic())&&(e.sort=n.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/users/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],["mat-list-item","",3,"click"],["color","primary","mat-list-icon","",1,"fas","fa-file-export"],["color","primary","mat-list-icon","",1,"fas","fa-file-import"],[4,"ngIf"],["mat-line","",2,"margin-left","20px"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],["matSuffix","",1,"webserviceAccount",3,"checked","title","click"],["fontSet","fas","fontIcon","fa-user-shield fa-2x",2,"margin-left","-2px","margin-top","-4px"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","id"],["mat-sort-header","",3,"hide-for-mobile",4,"matHeaderCellDef"],[3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","user_id"],["matColumnDef","lastname"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","firstname"],["matColumnDef","status"],["matColumnDef","mail"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip","admin",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header",""],[1,"label",3,"ngClass"],[2,"justify-content","flex-end"],["mat-icon-button","","color","primary",3,"disabled","matTooltip","click",4,"ngIf"],["mat-icon-button","","color","accent",3,"matTooltip","disabled","click",4,"ngIf"],["mat-icon-button","","color","warn","data-toggle","modal","data-target","#changeDiffListDest",3,"disabled","matTooltip","click"],[1,"fa","fa-trash-alt","fa-2x"],["mat-icon-button","","color","primary",3,"disabled","matTooltip","click"],["aria-hidden","true",1,"fa","fa-pause","fa-2x"],["mat-icon-button","","color","accent",3,"matTooltip","disabled","click"],["aria-hidden","true",1,"fa","fa-check","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,At,22,14,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,Ht,2,0,"div",9),u.Qc(14,de,40,18,"mat-card",10),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading))},directives:[S.e,S.f,M.a,Y.a,Z.t,Dt.h,Dt.g,Dt.d,r.f,Ut.a,Dt.c,I.k,_.a,O.c,T.a,k.c,w.b,o.c,o.t,o.i,Pt.a,k.j,V.a,B.n,N.a,B.c,B.i,B.b,B.k,B.m,B.h,N.b,B.a,Z.q,D.b,Ft.b,B.j,B.l,r.d],pipes:[m.d],styles:["button[_ngcontent-%COMP%]:disabled{opacity:.3!important}.statusUserLabelWarn[_ngcontent-%COMP%]{color:#8e3e52}.statusUserLabelPrimary[_ngcontent-%COMP%]{color:#135f7f}.webserviceAccount[_ngcontent-%COMP%]{color:#666;width:37px;height:37px;font-size:x-small;border-radius:18px!important}.mat-button-toggle-checked[_ngcontent-%COMP%]{background-color:#f99830!important;color:#fff}.admin[_ngcontent-%COMP%]{font-weight:700}"]}),ke),Oe=((_e=function(){function t(e,n,a,i,r){_classCallCheck(this,t),this.translate=e,this.http=n,this.data=a,this.dialogRef=i,this.notify=r,this.loadModel=!1,this.loadInstance=!1,this.modalTitle=this.translate.instant("lang.confirmAction")}return _createClass(t,[{key:"ngOnInit",value:function(){this.data.isDeletable?(this.data.redirectListModels.length>0&&(this.data.inDiffListDest=!0),this.data.redirectListInstances.length>0&&(this.data.isResDestUser=!0)):(this.modalTitle=this.translate.instant("delete"===this.data.userDestRedirect.actionMode?"lang.unableToDelete":"lang.unableToSuspend"),this.data.listTemplateEntities.length>0&&(this.data.inTemplateList=!0),this.data.listInstanceEntities.length>0&&(this.data.inInstanceList=!0))}},{key:"setRedirectUserListModels",value:function(t,e){this.data.userDestRedirect.user_id!=e.id?this.data.redirectListModels[t].redirectUserId=e.id:(this.data.redirectListModels[t].redirectUserId=null,this.notify.error(this.translate.instant("lang.userUnauthorized")))}},{key:"setRedirectUserRes",value:function(t){this.data.userDestRedirect.user_id!=t.id?this.data.redirectDestResUserId=t.id:(this.data.redirectDestResUserId=null,this.notify.error(this.translate.instant("lang.userUnauthorized")))}},{key:"sendFunction",value:function(){var t=!0;return this.data.inDiffListDest&&this.data.redirectListModels.forEach((function(e){e.redirectUserId||(t=!1)})),this.data.isResDestUser&&(this.data.redirectDestResUserId||(t=!1)),t}}]),t}()).\u0275fac=function(t){return new(t||_e)(u.Tb(m.e),u.Tb(f.b),u.Tb(z.a),u.Tb(z.h),u.Tb(y.a))},_e.\u0275cmp=u.Nb({type:_e,selectors:[["ng-component"]],decls:11,vars:6,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],[4,"ngIf"],[1,"divider-modal"],["mat-raised-button","","color","warn","type","submit","class","btn btn-danger",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",3,"click",4,"ngIf"],["role","alert",1,"alert-message","alert-message-info"],[3,"innerHTML"],["class","form-group",3,"id",4,"ngFor","ngForOf"],[1,"form-group",3,"id"],["singleMode","","required","",3,"labelPlaceholder","labelList","routeDatas","targetSearchKey","subInfoKey","triggerEvent"],["role","alert",1,"alert"],["class","modal-body","class","col-md-6",4,"ngIf"],[1,"col-md-6"],["mat-line",""],[4,"ngFor","ngForOf"],["mat-list-icon",""],["color","primary",1,"fa","fa-share-alt"],["color","primary",1,"fa","fa-inbox"],["mat-raised-button","","color","warn","type","submit",1,"btn","btn-danger",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"click"]],template:function(t,e){1&t&&(u.Zb(0,"div",0),u.Zb(1,"h1",1),u.Sc(2),u.Yb(),u.Zb(3,"mat-dialog-content"),u.Qc(4,ve,4,3,"ng-container",2),u.Qc(5,Me,11,6,"ng-container",2),u.Yb(),u.Ub(6,"span",3),u.Zb(7,"mat-dialog-actions"),u.Qc(8,xe,4,7,"button",4),u.Qc(9,Ye,4,7,"button",5),u.Qc(10,Ze,3,3,"button",6),u.Yb(),u.Yb()),2&t&&(u.Eb(2),u.Tc(e.modalTitle),u.Eb(2),u.sc("ngIf",e.data.isDeletable),u.Eb(1),u.sc("ngIf",!e.data.isDeletable),u.Eb(3),u.sc("ngIf","delete"==e.data.userDestRedirect.actionMode&&e.data.isDeletable),u.Eb(1),u.sc("ngIf","suspend"==e.data.userDestRedirect.actionMode&&e.data.isDeletable),u.Eb(1),u.sc("ngIf",!e.data.isDeletable))},directives:[z.i,z.f,Z.t,z.c,Z.s,Lt.a,Dt.a,I.k,Dt.d,Ut.a,Dt.c,D.b],pipes:[m.d],styles:["mat-icon[_ngcontent-%COMP%]{height:auto!important}.alert-message[_ngcontent-%COMP%]{max-width:100%}"]}),_e),Te=n("0EQZ");function Ie(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-list"),u.Zb(1,"mat-list-item"),u.Ub(2,"mat-icon",8),u.Zb(3,"h4",9),u.Sc(4),u.Yb(),u.Zb(5,"p",10),u.Sc(6),u.Yb(),u.Zb(7,"button",11),u.hc("click",(function(){return u.Hc(n),u.lc().unlinkMaarchParapheurAccount()})),u.Ub(8,"mat-icon",12),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc();u.Eb(2),u.Pc("background-image","url("+a.externalUser.picture+")",u.Mb),u.Eb(2),u.Vc("",a.externalUser.firstname," ",a.externalUser.lastname,""),u.Eb(2),u.Tc(a.externalUser.email),u.Eb(1),u.sc("title",a.translate.instant("lang.unlinkAccount"))}}function De(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-form-field"),u.Zb(1,"input",13),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().externalUser.login=t})),u.mc(2,"translate"),u.Yb(),u.Yb()}if(2&t){var a=u.lc();u.Eb(1),u.tc("placeholder",u.nc(2,2,"lang.newLoginInMaarchParapheur")),u.sc("ngModel",a.externalUser.login)}}function Ue(t,e){if(1&t&&u.Ub(0,"div",14),2&t){var n=u.lc();u.sc("innerHTML",n.translate.instant("lang.maarchParapheurAccountMsg")+" <b>"+n.externalUser.login+"</b> "+n.translate.instant("lang.maarchParapheurAccountMsg2"),u.Ic)}}var Pe,Fe=function(){return["/rest/autocomplete/maarchParapheurUsers?exludeAlreadyConnected=true"]},Le=((Pe=function(){function t(e,n,a,i,r){_classCallCheck(this,t),this.translate=e,this.http=n,this.data=a,this.dialogRef=i,this.notify=r,this.externalUser={inMaarchParapheur:!1,login:"",firstname:"",lastname:"",email:"",picture:""}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.http.get("../rest/autocomplete/maarchParapheurUsers",{params:{search:this.data.user.mail,exludeAlreadyConnected:"true"}}).subscribe((function(e){e.length>0?(t.externalUser=e[0],t.externalUser.inMaarchParapheur=!0,t.http.get("../rest/maarchParapheur/user/"+t.externalUser.id+"/picture").subscribe((function(e){t.externalUser.picture=e.picture}),(function(e){t.notify.handleErrors(e)}))):(t.externalUser.inMaarchParapheur=!1,t.externalUser=t.data.user,t.externalUser.login=t.data.user.user_id,t.externalUser.email=t.data.user.mail)}),(function(e){t.notify.handleErrors(e)}))}},{key:"selectUser",value:function(t){var e=this;this.externalUser=t,this.externalUser.inMaarchParapheur=!0,this.http.get("../rest/maarchParapheur/user/"+this.externalUser.id+"/picture").subscribe((function(t){e.externalUser.picture=t.picture}),(function(t){e.notify.handleErrors(t)}))}},{key:"unlinkMaarchParapheurAccount",value:function(){this.externalUser.inMaarchParapheur=!1,this.externalUser=this.data.user,this.externalUser.login=this.data.user.user_id,this.externalUser.email=this.data.user.mail}}]),t}()).\u0275fac=function(t){return new(t||Pe)(u.Tb(m.e),u.Tb(f.b),u.Tb(z.a),u.Tb(z.h),u.Tb(y.a))},Pe.\u0275cmp=u.Nb({type:Pe,selectors:[["ng-component"]],decls:17,vars:18,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["appearance","outline",3,"labelPlaceholder","routeDatas","targetSearchKey","subInfoKey","triggerEvent"],[4,"ngIf"],["class","alert-message alert-message-danger","role","alert","style","margin-top: 30px;",3,"innerHTML",4,"ngIf"],[1,"divider-modal"],["color","primary","mat-raised-button","",3,"disabled","click"],["mat-raised-button","",3,"click"],["color","primary","mat-list-icon","",1,"avatarAccount"],["mat-line",""],["mat-line","",2,"color","#666"],["mat-icon-button","","color","warn",3,"title","click"],[1,"fas","fa-unlink"],["type","text","matInput","",3,"placeholder","ngModel","ngModelChange"],["role","alert",1,"alert-message","alert-message-danger",2,"margin-top","30px",3,"innerHTML"]],template:function(t,e){1&t&&(u.Zb(0,"div",0),u.Zb(1,"h1",1),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"mat-dialog-content"),u.Zb(5,"plugin-autocomplete",2),u.hc("triggerEvent",(function(t){return e.selectUser(t)})),u.Yb(),u.Qc(6,Ie,9,6,"mat-list",3),u.Qc(7,De,3,4,"mat-form-field",3),u.Qc(8,Ue,1,1,"div",4),u.Yb(),u.Ub(9,"span",5),u.Zb(10,"mat-dialog-actions"),u.Zb(11,"button",6),u.hc("click",(function(){return e.dialogRef.close(e.externalUser)})),u.Sc(12),u.mc(13,"translate"),u.Yb(),u.Zb(14,"button",7),u.hc("click",(function(){return e.dialogRef.close("")})),u.Sc(15),u.mc(16,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(2),u.Tc(u.nc(3,11,"lang.linkAccount")),u.Eb(3),u.sc("labelPlaceholder",e.translate.instant("lang.searchUserInMaarchParapheur"))("routeDatas",u.yc(17,Fe))("targetSearchKey","idToDisplay")("subInfoKey","email"),u.Eb(1),u.sc("ngIf",e.externalUser.inMaarchParapheur),u.Eb(1),u.sc("ngIf",!e.externalUser.inMaarchParapheur),u.Eb(1),u.sc("ngIf",!e.externalUser.inMaarchParapheur),u.Eb(3),u.sc("disabled",""===e.externalUser.login),u.Eb(1),u.Tc(u.nc(13,13,"lang.validate")),u.Eb(3),u.Tc(u.nc(16,15,"lang.cancel")))},directives:[z.i,z.f,Lt.a,Z.t,z.c,D.b,Dt.a,Dt.d,Ut.a,Dt.c,I.k,k.c,w.b,o.c,o.t,o.w],pipes:[m.d],styles:[".avatarAccount[_ngcontent-%COMP%]{border:3px solid #f99830;height:45px!important;width:45px!important;background-size:cover;background-repeat:no-repeat;background-position:50%}"]}),Pe),je=n("MJ5r"),Re=n("wZkO"),Qe=n("7EHt"),Ae=n("/kMP"),He=n("bSwM"),ze=n("STbY"),$e=n("lJEt"),Ve=n("iadO"),Ne=n("wQTr"),Je=n("QibW"),Ge=["snav2"],Be=["adminMenuTemplate"],We=["maarchTree"];function qe(t,e){if(1&t){var n=u.ac();u.Zb(0,"a",18),u.hc("click",(function(){return u.Hc(n),u.lc(3).activateAbsence()})),u.Ub(1,"mat-icon",19),u.Zb(2,"p",20),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Yb()}2&t&&(u.Eb(3),u.Uc(" ",u.nc(4,1,"lang.activateAbsence")," "))}function Xe(t,e){if(1&t){var n=u.ac();u.Zb(0,"a",18),u.hc("click",(function(){return u.Hc(n),u.lc(3).desactivateAbsence()})),u.Ub(1,"mat-icon",21),u.Zb(2,"p",20),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Yb()}2&t&&(u.Eb(3),u.Uc(" ",u.nc(4,1,"lang.desactivateAbsence")," "))}function Ke(t,e){if(1&t){var n=u.ac();u.Zb(0,"a",18),u.hc("click",(function(){return u.Hc(n),u.lc(3).resendActivationNotification()})),u.Ub(1,"mat-icon",22),u.Zb(2,"p",20),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Yb()}2&t&&(u.Eb(3),u.Uc(" ",u.nc(4,1,"lang.sendActivationNotification")," "))}function tn(t,e){if(1&t){var n=u.ac();u.Zb(0,"a",18),u.hc("click",(function(){return u.Hc(n),u.lc(3).changePasswd()})),u.Ub(1,"mat-icon",23),u.Zb(2,"p",20),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Yb()}2&t&&(u.Eb(3),u.Uc(" ",u.nc(4,1,"lang.changePassword")," "))}function en(t,e){1&t&&(u.Zb(0,"p",27),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc(" ",u.nc(2,1,"lang.maarchParapheurLinkbroken")," "))}function nn(t,e){if(1&t){var n=u.ac();u.Zb(0,"a",24),u.hc("click",(function(){return u.Hc(n),u.lc(3).linkMaarchParapheurAccount()})),u.mc(1,"translate"),u.Ub(2,"mat-icon",25),u.Zb(3,"p",20),u.Sc(4),u.mc(5,"translate"),u.Yb(),u.Qc(6,en,3,3,"p",26),u.Yb()}if(2&t){var a=u.lc(3);u.tc("title",u.nc(1,3,"lang.createUserInMaarchParapheur")),u.Eb(4),u.Uc(" ",u.nc(5,5,"lang.linkAccount")," "),u.Eb(2),u.sc("ngIf",!a.maarchParapheurConnectionStatus)}}function an(t,e){if(1&t&&(u.Zb(0,"mat-nav-list"),u.Zb(1,"h3",13),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Qc(4,qe,5,3,"a",16),u.Qc(5,Xe,5,3,"a",16),u.Qc(6,Ke,5,3,"a",16),u.Qc(7,tn,5,3,"a",16),u.Qc(8,nn,7,7,"a",17),u.Yb()),2&t){var n=u.lc(2);u.Eb(2),u.Tc(u.nc(3,6,"lang.actions")),u.Eb(2),u.sc("ngIf","ABS"!=n.user.status),u.Eb(1),u.sc("ngIf","ABS"==n.user.status),u.Eb(1),u.sc("ngIf",n.user.canSendActivationNotification),u.Eb(1),u.sc("ngIf",n.user.canModifyPassword),u.Eb(1),u.sc("ngIf",n.user.canCreateMaarchParapheurUser||""===n.maarchParapheurLink.login)}}function rn(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-list"),u.Zb(1,"h3",13),u.Sc(2,"Compte Maarch Parapheur"),u.Yb(),u.Zb(3,"mat-list-item"),u.Ub(4,"mat-icon",28),u.Zb(5,"p",29),u.Zb(6,"span"),u.Sc(7),u.Yb(),u.Zb(8,"button",30),u.hc("click",(function(){return u.Hc(n),u.lc(2).unlinkMaarchParapheurAccount()})),u.mc(9,"translate"),u.Ub(10,"mat-icon",31),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(4),u.Pc("background-image","url("+a.maarchParapheurLink.picture+")",u.Mb),u.Eb(3),u.Uc(" ",a.maarchParapheurLink.login," "),u.Eb(1),u.tc("title",u.nc(9,4,"lang.unlinkAccount"))}}function cn(t,e){if(1&t&&(u.Qc(0,an,9,8,"mat-nav-list",15),u.Ub(1,"mat-divider"),u.Qc(2,rn,11,6,"mat-list",15)),2&t){var n=u.lc();u.sc("ngIf",!n.creationMode&&!n.loading),u.Eb(2),u.sc("ngIf",""!==n.maarchParapheurLink.login)}}function on(t,e){1&t&&(u.Zb(0,"div",32),u.Ub(1,"mat-spinner",33),u.Yb())}function sn(t,e){1&t&&(u.Zb(0,"mat-error"),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc(" ",u.nc(2,1,"lang.requiredField"),""))}function ln(t,e){1&t&&(u.Zb(0,"mat-hint"),u.Ub(1,"i",58),u.Zb(2,"span",59),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Yb()),2&t&&(u.Eb(3),u.Tc(u.nc(4,1,"lang.passwordValid")))}function dn(t,e){1&t&&(u.Zb(0,"mat-hint"),u.Ub(1,"i",58),u.Zb(2,"span",59),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Yb()),2&t&&(u.Eb(3),u.Tc(u.nc(4,1,"lang.passwordMatch")))}function bn(t,e){if(1&t&&(u.Zb(0,"div",44),u.Zb(1,"div",60),u.Ub(2,"div",61),u.Yb(),u.Yb()),2&t){var n=u.lc(3);u.Eb(2),u.sc("innerHTML",n.otherRuleText,u.Ic)}}var un=function(t){return[t]};function mn(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",42),u.Zb(1,"form",43),u.Zb(2,"div",44),u.Zb(3,"mat-form-field",45),u.Ub(4,"input",46),u.mc(5,"translate"),u.Zb(6,"mat-icon",47),u.hc("click",(function(){u.Hc(n);var t=u.lc(2);return t.hidePassword=!t.hidePassword})),u.Yb(),u.Qc(7,sn,3,3,"mat-error",15),u.Yb(),u.Yb(),u.Zb(8,"div",44),u.Zb(9,"div",48),u.Sc(10),u.Yb(),u.Zb(11,"div",49),u.Zb(12,"mat-form-field",45),u.Ub(13,"input",50,51),u.mc(15,"translate"),u.Zb(16,"mat-icon",47),u.hc("click",(function(){u.Hc(n);var t=u.lc(2);return t.hidePassword=!t.hidePassword})),u.Yb(),u.Qc(17,ln,5,3,"mat-hint",15),u.Zb(18,"mat-error"),u.Sc(19),u.Yb(),u.Yb(),u.Yb(),u.Zb(20,"div",49),u.Zb(21,"mat-form-field",45),u.Ub(22,"input",52,53),u.mc(24,"translate"),u.Zb(25,"mat-icon",47),u.hc("click",(function(){u.Hc(n);var t=u.lc(2);return t.hidePassword=!t.hidePassword})),u.Yb(),u.Qc(26,dn,5,3,"mat-hint",15),u.Zb(27,"mat-error"),u.Sc(28),u.mc(29,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Qc(30,bn,3,1,"div",54),u.Zb(31,"div",44),u.Zb(32,"div",55),u.Zb(33,"button",56),u.hc("click",(function(){return u.Hc(n),u.lc(2).updatePassword()})),u.Sc(34),u.mc(35,"translate"),u.Yb(),u.Zb(36,"button",57),u.hc("click",(function(){return u.Hc(n),u.lc(2).showPassword=!1})),u.Sc(37),u.mc(38,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(1),u.sc("formGroup",a.firstFormGroup),u.Eb(3),u.tc("placeholder",u.nc(5,20,"lang.typeCurrentPassword")),u.sc("type",a.hidePassword?"password":"text"),u.Eb(2),u.sc("ngClass",u.zc(32,un,a.hidePassword?"fa-eye-slash":"fa-eye")),u.Eb(1),u.sc("ngIf",a.firstFormGroup.controls.currentPasswordCtrl.hasError("required")),u.Eb(3),u.Uc(" ",a.ruleText,""),u.Eb(3),u.tc("placeholder",u.nc(15,22,"lang.typeNewPassword")),u.sc("type",a.hidePassword?"password":"text"),u.Eb(3),u.sc("ngClass",u.zc(34,un,a.hidePassword?"fa-eye-slash":"fa-eye")),u.Eb(1),u.sc("ngIf",a.validPassword),u.Eb(2),u.Tc(a.getErrorMessage()),u.Eb(3),u.tc("placeholder",u.nc(24,24,"lang.retypeNewPassword")),u.sc("type",a.hidePassword?"password":"text"),u.Eb(3),u.sc("ngClass",u.zc(36,un,a.hidePassword?"fa-eye-slash":"fa-eye")),u.Eb(1),u.sc("ngIf",!a.firstFormGroup.controls.retypePasswordCtrl.hasError("mismatch")&&""!=a.firstFormGroup.controls.retypePasswordCtrl.value),u.Eb(2),u.Uc("",u.nc(29,26,"lang.passwordNotMatch")," !"),u.Eb(2),u.sc("ngIf",a.passwordRules.renewal.enabled||a.passwordRules.historyLastUse.enabled),u.Eb(3),u.sc("disabled",!a.firstFormGroup.valid),u.Eb(1),u.Tc(u.nc(35,28,"lang.update")),u.Eb(3),u.Tc(u.nc(38,30,"lang.cancel"))}}function fn(t,e){if(1&t&&(u.Zb(0,"div",62),u.Sc(1),u.Yb()),2&t){var n=u.lc(2);u.Eb(1),u.Uc(" ",n.user.status,"")}}function pn(t,e){if(1&t){var n=u.ac();u.Zb(0,"input",84),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(3).user.userId=t}))("keyup",(function(){return u.Hc(n),u.lc(3).setLowerUserId()})),u.mc(1,"translate"),u.mc(2,"translate"),u.Yb()}if(2&t){var a=u.lc(3);u.tc("title",u.nc(1,3,"lang.id")),u.tc("placeholder",u.nc(2,5,"lang.id")),u.sc("ngModel",a.user.userId)}}function gn(t,e){if(1&t&&(u.Ub(0,"input",85),u.mc(1,"translate"),u.mc(2,"translate")),2&t){var n=u.lc(3);u.tc("title",u.nc(1,3,"lang.id")),u.tc("value",n.user.user_id),u.tc("placeholder",u.nc(2,5,"lang.id"))}}var hn=function(){return["root_visible","root_invisible"]};function vn(t,e){if(1&t&&(u.Xb(0),u.Zb(1,"mat-option",86),u.Sc(2),u.Yb(),u.Wb()),2&t){var n=e.$implicit,a=u.lc(3);u.Eb(1),u.sc("value",n.id)("disabled","standard"===a.headerService.user.mode&&u.yc(4,hn).indexOf(n.id)>-1)("title","standard"===a.headerService.user.mode&&u.yc(5,hn).indexOf(n.id)>-1?a.translate.instant("lang.mustSuperadmin"):""),u.Eb(1),u.Uc(" ",n.label," ")}}function yn(t,e){if(1&t){var n=u.ac();u.Zb(0,"div"),u.Zb(1,"mat-form-field"),u.Zb(2,"mat-label"),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Zb(5,"textarea",87),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(3).user.authorizedApi=t})),u.Yb(),u.Zb(6,"mat-hint"),u.Sc(7),u.mc(8,"translate"),u.Zb(9,"a",88),u.Sc(10),u.mc(11,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc(3);u.Eb(3),u.Tc(u.nc(4,5,"lang.authorizedRoutes")),u.Eb(2),u.sc("ngModel",a.user.authorizedApi),u.Eb(2),u.Uc("",u.nc(8,7,"lang.authorizedRoutesInformations")," "),u.Eb(2),u.uc("href","https://docs.maarch.org/gitbook/html/MaarchCourrier/",a.appVersion,"/guat/guat_architecture/API_REST/home.html",u.Kc),u.Eb(1),u.Tc(u.nc(11,9,"lang.here"))}}function Cn(t,e){if(1&t&&(u.Zb(0,"button",89),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){u.lc();var n=u.Dc(1);u.sc("disabled",!n.form.valid),u.Eb(1),u.Tc(u.nc(2,2,"lang.save"))}}function En(t,e){if(1&t&&(u.Zb(0,"button",89),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){u.lc();var n=u.Dc(1);u.sc("disabled",!n.form.valid),u.Eb(1),u.Tc(u.nc(2,2,"lang.update"))}}function Sn(t,e){if(1&t){var n=u.ac();u.Zb(0,"form",63,64),u.hc("ngSubmit",(function(){return u.Hc(n),u.lc(2).onSubmit()})),u.Zb(2,"div",44),u.Zb(3,"div",65),u.Zb(4,"div",66),u.Zb(5,"div",67),u.Ub(6,"i",68),u.Yb(),u.Yb(),u.Zb(7,"div",69),u.Zb(8,"mat-form-field"),u.Qc(9,pn,3,7,"input",70),u.Qc(10,gn,3,7,"input",71),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(11,"div",44),u.Zb(12,"div",72),u.Zb(13,"mat-form-field"),u.Zb(14,"input",73),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).user.lastname=t})),u.mc(15,"translate"),u.mc(16,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(17,"div",72),u.Zb(18,"mat-form-field"),u.Zb(19,"input",74),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).user.firstname=t})),u.mc(20,"translate"),u.mc(21,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(22,"div",75),u.Zb(23,"mat-form-field"),u.Zb(24,"input",76),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).user.initials=t})),u.mc(25,"translate"),u.mc(26,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(27,"div",44),u.Zb(28,"div",65),u.Zb(29,"mat-form-field"),u.Zb(30,"input",77),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).user.phone=t})),u.mc(31,"translate"),u.mc(32,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(33,"div",44),u.Zb(34,"div",65),u.Zb(35,"mat-form-field"),u.Zb(36,"input",78),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).user.mail=t})),u.mc(37,"translate"),u.mc(38,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(39,"mat-accordion"),u.Zb(40,"mat-expansion-panel",79),u.Zb(41,"mat-expansion-panel-header"),u.Zb(42,"mat-panel-title",80),u.Sc(43),u.mc(44,"translate"),u.Yb(),u.Yb(),u.Zb(45,"div"),u.Zb(46,"mat-form-field"),u.Zb(47,"mat-label"),u.Sc(48),u.mc(49,"translate"),u.Yb(),u.Zb(50,"mat-select",81),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).user.mode=t})),u.Qc(51,vn,3,6,"ng-container",14),u.mc(52,"sortBy"),u.Yb(),u.Yb(),u.Yb(),u.Qc(53,yn,12,11,"div",15),u.Yb(),u.Yb(),u.Zb(54,"div",82),u.Zb(55,"div",55),u.Qc(56,Cn,3,4,"button",83),u.Qc(57,En,3,4,"button",83),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(9),u.sc("ngIf",a.creationMode),u.Eb(1),u.sc("ngIf",!a.creationMode),u.Eb(4),u.tc("title",u.nc(15,27,"lang.lastname")),u.tc("placeholder",u.nc(16,29,"lang.lastname")),u.sc("ngModel",a.user.lastname),u.Eb(5),u.tc("title",u.nc(20,31,"lang.firstname")),u.tc("placeholder",u.nc(21,33,"lang.firstname")),u.sc("ngModel",a.user.firstname),u.Eb(5),u.tc("title",u.nc(25,35,"lang.initials")),u.tc("placeholder",u.nc(26,37,"lang.initials")),u.sc("ngModel",a.user.initials),u.Eb(6),u.tc("title",u.nc(31,39,"lang.phoneNumber")),u.tc("placeholder",u.nc(32,41,"lang.phoneNumber")),u.sc("ngModel",a.user.phone)("disabled",a.creationMode&&!a.canManagePersonalDatas||!a.creationMode&&(!a.canManagePersonalDatas||!a.canViewPersonalDatas)),u.Eb(6),u.tc("title",u.nc(37,43,"lang.email")),u.tc("placeholder",u.nc(38,45,"lang.email")),u.sc("ngModel",a.user.mail),u.Eb(4),u.sc("expanded",a.creationMode),u.Eb(3),u.Uc(" ",u.nc(44,47,"lang.otherInformations")," "),u.Eb(5),u.Tc(u.nc(49,49,"lang.accountType")),u.Eb(2),u.sc("ngModel",a.user.mode)("disabled","standard"===a.headerService.user.mode&&u.yc(54,hn).indexOf(a.user.mode)>-1),u.Eb(1),u.sc("ngForOf",u.oc(52,51,a.adminModes,"label")),u.Eb(2),u.sc("ngIf","rest"===a.user.mode),u.Eb(3),u.sc("ngIf",a.creationMode),u.Eb(1),u.sc("ngIf",!a.creationMode)}}function Mn(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-list-item",91),u.Zb(1,"mat-slide-toggle",92),u.hc("change",(function(){u.Hc(n);var t=e.$implicit;return u.lc(3).toggleGroup(t)})),u.Sc(2),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit;u.Eb(1),u.tc("id",a.group_id),u.sc("checked",1==a.checked)("disabled",!a.enabled),u.Eb(1),u.Uc(" ",a.group_desc,"")}}function xn(t,e){if(1&t&&(u.Zb(0,"mat-tab",36),u.mc(1,"translate"),u.Zb(2,"mat-nav-list"),u.Qc(3,Mn,3,4,"mat-list-item",90),u.Yb(),u.Yb()),2&t){var n=u.lc(2);u.tc("label",u.nc(1,2,"lang.groups")),u.Eb(3),u.sc("ngForOf",n.user.allGroups)}}function Yn(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-tab",36),u.mc(1,"translate"),u.Zb(2,"app-maarch-flat-tree",93,94),u.hc("afterSelectNode",(function(t){return u.Hc(n),u.lc(2).addEntity(t)}))("afterDeselectNode",(function(t){return u.Hc(n),u.lc(2).deleteEntity(t)})),u.Yb(),u.Yb()}2&t&&(u.tc("label",u.nc(1,3,"lang.entities")),u.Eb(2),u.sc("selectionPropagation",!1)("openState","all"))}function Zn(t,e){1&t&&(u.Zb(0,"p",100),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc(" ",u.nc(2,1,"lang.selectAll")," "))}var _n=function(){return["/rest/autocomplete/users"]};function kn(t,e){if(1&t){var n=u.ac();u.Zb(0,"p",101),u.Zb(1,"button",102),u.mc(2,"translate"),u.Ub(3,"mat-icon",103),u.Ub(4,"mat-divider",104),u.Yb(),u.Zb(5,"button",105),u.hc("click",(function(){return u.Hc(n),u.lc(3).toggleBasket(!1)})),u.mc(6,"translate"),u.Ub(7,"mat-icon",106),u.Yb(),u.Zb(8,"button",107),u.hc("click",(function(){return u.Hc(n),u.lc(3).toggleBasket(!0)})),u.mc(9,"translate"),u.Ub(10,"mat-icon",108),u.Yb(),u.Zb(11,"mat-menu",109,110),u.Zb(13,"plugin-autocomplete",111),u.hc("triggerEvent",(function(t){return u.Hc(n),u.lc(3).addBasketRedirection(t)})),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.Dc(12),i=u.lc(3);u.Eb(1),u.tc("matTooltip",u.nc(2,9,"lang.redirectBaskets")),u.sc("matMenuTriggerFor",a),u.Eb(3),u.sc("vertical",!0),u.Eb(1),u.tc("matTooltip",u.nc(6,11,"lang.disableBasket")),u.Eb(3),u.tc("matTooltip",u.nc(9,13,"lang.enableBasket")),u.Eb(5),u.sc("labelPlaceholder",i.translate.instant("lang.redirectBaskets"))("routeDatas",u.yc(15,_n))("targetSearchKey","idToDisplay")("subInfoKey","descriptionToDisplay")}}function wn(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-icon",96),u.Zb(1,"mat-checkbox",118),u.hc("click",(function(t){return u.Hc(n),t.stopPropagation()}))("change",(function(t){u.Hc(n);var e=u.lc(2).$implicit,a=u.lc(3);return t?a.selectionBaskets.toggle(e):null})),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2).$implicit,i=u.lc(3);u.Eb(1),u.sc("checked",i.selectionBaskets.isSelected(a))}}var On=function(t){return{opacity:t}};function Tn(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-list-item",113),u.Qc(1,wn,2,1,"mat-icon",114),u.Zb(2,"h4",115),u.Zb(3,"span",116),u.hc("click",(function(){u.Hc(n);var t=u.lc().$implicit;return u.lc(3).selectionBaskets.toggle(t)})),u.Sc(4),u.Zb(5,"span",117),u.Sc(6),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc().$implicit;u.Eb(1),u.sc("ngIf",a.enabled),u.Eb(2),u.vc("matTooltip","",a.basket_name," [",a.group_desc,"]"),u.sc("ngStyle",u.zc(6,On,a.allowed?"1":"0.5")),u.Eb(1),u.Uc(" ",a.basket_name," "),u.Eb(2),u.Tc(a.group_desc)}}function In(t,e){if(1&t&&(u.Xb(0),u.Qc(1,Tn,7,8,"mat-list-item",112),u.Wb()),2&t){var n=e.$implicit;u.Eb(1),u.sc("ngIf",null==n.userToDisplay)}}function Dn(t,e){if(1&t){var n=u.ac();u.Xb(0),u.Zb(1,"mat-list-item"),u.Ub(2,"mat-icon",119),u.Zb(3,"h4",120),u.Sc(4),u.Zb(5,"span",117),u.Sc(6),u.Yb(),u.Yb(),u.Zb(7,"p",20),u.Zb(8,"mat-form-field"),u.Ub(9,"input",121),u.mc(10,"translate"),u.Zb(11,"button",122),u.hc("click",(function(){u.Hc(n);var t=e.$implicit,a=e.index;return u.lc(3).delBasketRedirection(t,a)})),u.mc(12,"translate"),u.Ub(13,"mat-icon",123),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Wb()}if(2&t){var a=e.$implicit;u.Eb(4),u.Uc("",a.basket_name," "),u.Eb(2),u.Tc(a.group_desc),u.Eb(3),u.vc("value","",u.nc(10,5,"lang.redirectedTo")," ",a.userToDisplay,""),u.Eb(2),u.tc("matTooltip",u.nc(12,7,"lang.deleteRedirection"))}}function Un(t,e){if(1&t){var n=u.ac();u.Zb(0,"plugin-autocomplete",111),u.hc("triggerEvent",(function(t){u.Hc(n);var e=u.lc(),a=e.$implicit,i=e.index;return u.lc(3).reassignBasketRedirection(t,a,i)})),u.Yb()}if(2&t){var a=u.lc(4);u.sc("labelPlaceholder",a.translate.instant("lang.redirectBaskets"))("routeDatas",u.yc(4,_n))("targetSearchKey","idToDisplay")("subInfoKey","descriptionToDisplay")}}function Pn(t,e){if(1&t){var n=u.ac();u.Xb(0),u.Zb(1,"mat-list-item"),u.Ub(2,"mat-icon",124),u.Zb(3,"h4",120),u.Sc(4),u.Zb(5,"span",117),u.Sc(6),u.Yb(),u.Yb(),u.Zb(7,"p",20),u.Qc(8,Un,1,5,"plugin-autocomplete",125),u.Zb(9,"mat-form-field"),u.Ub(10,"input",121),u.mc(11,"translate"),u.Zb(12,"button",122),u.hc("click",(function(){return e.$implicit.userToDisplay=null})),u.mc(13,"translate"),u.Ub(14,"mat-icon",126),u.Yb(),u.Zb(15,"button",122),u.hc("click",(function(){u.Hc(n);var t=e.$implicit,a=e.index;return u.lc(3).delBasketAssignRedirection(t,a)})),u.mc(16,"translate"),u.Ub(17,"mat-icon",123),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Wb()}if(2&t){var a=e.$implicit;u.Eb(4),u.Uc("",a.basket_name," "),u.Eb(2),u.Tc(a.group_desc),u.Eb(2),u.sc("ngIf",null==a.userToDisplay),u.Eb(2),u.vc("value","",u.nc(11,7,"lang.assignBy")," ",a.userToDisplay,""),u.Eb(2),u.tc("matTooltip",u.nc(13,9,"lang.reassign")),u.Eb(3),u.tc("matTooltip",u.nc(16,11,"lang.deleteAssignation"))}}function Fn(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-tab",36),u.mc(1,"translate"),u.Zb(2,"div",95),u.Zb(3,"mat-list"),u.Zb(4,"mat-list-item"),u.Zb(5,"mat-icon",96),u.Zb(6,"mat-checkbox",97),u.hc("change",(function(t){u.Hc(n);var e=u.lc(2);return t?e.masterToggleBaskets(t):null})),u.mc(7,"translate"),u.Yb(),u.Yb(),u.Qc(8,Zn,3,3,"p",98),u.Qc(9,kn,14,16,"p",99),u.Yb(),u.Ub(10,"mat-divider"),u.Qc(11,In,2,1,"ng-container",14),u.Yb(),u.Yb(),u.Zb(12,"div",95),u.Zb(13,"mat-tab-group"),u.Zb(14,"mat-tab",36),u.mc(15,"translate"),u.Zb(16,"mat-list"),u.Qc(17,Dn,14,9,"ng-container",14),u.Yb(),u.Yb(),u.Yb(),u.Zb(18,"mat-tab-group"),u.Zb(19,"mat-tab",36),u.mc(20,"translate"),u.Zb(21,"mat-list"),u.Qc(22,Pn,18,13,"ng-container",14),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.tc("label",u.nc(1,10,"lang.baskets")),u.Eb(6),u.tc("matTooltip",u.nc(7,12,"lang.selectAll")),u.sc("checked",a.selectionBaskets.hasValue()),u.Eb(2),u.sc("ngIf",!a.selectionBaskets.hasValue()),u.Eb(1),u.sc("ngIf",a.selectionBaskets.hasValue()),u.Eb(2),u.sc("ngForOf",a.user.baskets),u.Eb(3),u.tc("label",u.nc(15,14,"lang.basketsRedirected")),u.Eb(3),u.sc("ngForOf",a.user.redirectedBaskets),u.Eb(2),u.tc("label",u.nc(20,16,"lang.basketsAssigned")),u.Eb(3),u.sc("ngForOf",a.user.assignedBaskets)}}function Ln(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",146),u.hc("click",(function(){return u.Hc(n),u.lc(3).clickOnUploader("uploadSignFile")}))("dragover",(function(){return u.Hc(n),u.lc(3).highlightMe=!0}))("dragleave",(function(){return u.Hc(n),u.lc(3).highlightMe=!1}))("onDropSuccess",(function(t){u.Hc(n);var e=u.lc(3);return e.test(t),e.highlightMe=!1})),u.mc(1,"translate"),u.Sc(2),u.mc(3,"translate"),u.Yb()}if(2&t){var a=u.lc(3);u.Jb("dndFileHighlighted",a.highlightMe),u.tc("matTooltip",u.nc(1,4,"lang.uploadSignFileInfo")),u.Eb(2),u.Uc(" ",u.nc(3,6,"lang.uploadSignFile")," ")}}function jn(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",147),u.Zb(1,"mat-card",148),u.Zb(2,"mat-card-content",55),u.Zb(3,"mat-form-field",149),u.Zb(4,"input",150),u.hc("ngModelChange",(function(t){return u.Hc(n),e.$implicit.signature_label=t}))("change",(function(){u.Hc(n);var t=e.index;return u.lc(3).updateSignature(t)})),u.mc(5,"translate"),u.Yb(),u.Zb(6,"button",151),u.hc("click",(function(){u.Hc(n);var t=e.$implicit;return u.lc(3).deleteSignature(t)})),u.mc(7,"translate"),u.Ub(8,"mat-icon",152),u.Yb(),u.Yb(),u.Ub(9,"img",153),u.mc(10,"async"),u.mc(11,"secureUrl"),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit,i=u.lc(3);u.Eb(4),u.tc("placeholder",u.nc(5,6,"lang.label")),u.sc("ngModel",a.signature_label)("disabled",!i.canManagePersonalDatas),u.Eb(2),u.tc("matTooltip",u.nc(7,8,"lang.delete")),u.sc("disabled",!i.canManagePersonalDatas),u.Eb(3),u.sc("src",u.nc(10,10,u.nc(11,12,"../rest/users/"+i.user.id+"/signatures/"+a.id+"/content")),u.Kc)}}function Rn(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",154),u.hc("click",(function(){return u.Hc(n),u.lc(3).syncMP()})),u.mc(1,"translate"),u.Ub(2,"mat-icon",155),u.Yb()}if(2&t){var a=u.lc(3);u.tc("matTooltip",u.nc(1,4,"lang.syncSignsToMaarchParapheur")),u.sc("disabled",!a.user.external_id.maarchParapheur||a.loadingSign),u.Eb(2),u.Jb("fa-spin",a.loadingSign)}}function Qn(t,e){if(1&t&&(u.Zb(0,"div",156),u.Ub(1,"img",157),u.Yb()),2&t){var n=u.lc(3);u.Eb(1),u.tc("src",n.signatureModel.base64ForJs,u.Kc)}}function An(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-tab",127),u.mc(1,"translate"),u.Qc(2,Ln,4,8,"div",128),u.Zb(3,"div",129),u.Zb(4,"div",130),u.Qc(5,jn,12,14,"div",131),u.Yb(),u.Zb(6,"div"),u.Qc(7,Rn,3,6,"button",132),u.Yb(),u.Yb(),u.Zb(8,"form",133,134),u.hc("ngSubmit",(function(){return u.Hc(n),u.lc(2).submitSignature()})),u.Zb(10,"div",135),u.Zb(11,"input",136),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).signatureModel.label=t})),u.mc(12,"translate"),u.Yb(),u.Zb(13,"div",137),u.Zb(14,"div",44),u.Zb(15,"input",138),u.hc("change",(function(t){return u.Hc(n),u.lc(2).uploadSignatureTrigger(t)})),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(16,"div",139),u.Zb(17,"button",140),u.Ub(18,"i",141),u.Yb(),u.Yb(),u.Zb(19,"div",142),u.Zb(20,"div",143),u.hc("click",(function(){return u.Hc(n),u.lc(2).clickOnUploader("uploadSignFile")})),u.Sc(21),u.mc(22,"translate"),u.Ub(23,"i",144),u.Sc(24," ( < 2MB ) "),u.Yb(),u.Yb(),u.Qc(25,Qn,2,1,"div",145),u.Yb(),u.Yb()}if(2&t){var a=u.Dc(9),i=u.lc(2);u.tc("label",u.nc(1,11,"lang.signatures")),u.sc("disabled",!i.canViewPersonalDatas),u.Eb(2),u.sc("ngIf",i.canManagePersonalDatas),u.Eb(3),u.sc("ngForOf",i.user.signatures),u.Eb(2),u.sc("ngIf",i.user.signatures.length>0&&i.canManagePersonalDatas),u.Eb(4),u.tc("placeholder",u.nc(12,13,"lang.label")),u.sc("ngModel",i.signatureModel.label),u.Eb(6),u.sc("disabled",!a.form.valid||!i.signatureModel.size),u.Eb(2),u.sc("ngClass",u.zc(17,un,""!=i.signatureModel.size?"col-md-10":"col-md-12")),u.Eb(2),u.Uc(" ",u.nc(22,15,"lang.clickOn")," "),u.Eb(4),u.sc("ngIf",i.signatureModel.size)}}function Hn(t,e){1&t&&(u.Zb(0,"mat-header-cell",182),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc(" ",u.nc(2,1,"lang.date")," "))}function zn(t,e){if(1&t&&(u.Zb(0,"mat-cell",130),u.Sc(1),u.mc(2,"date"),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",u.oc(2,1,n.event_date,"dd/MM/y HH:mm"),"")}}function $n(t,e){1&t&&(u.Zb(0,"mat-header-cell",130),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc("",u.nc(2,1,"lang.technicalId")," "))}function Vn(t,e){if(1&t&&(u.Zb(0,"mat-cell",130),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc("",n.record_id," ")}}function Nn(t,e){1&t&&(u.Zb(0,"mat-header-cell",183),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc(" ",u.nc(2,1,"lang.description"),""))}function Jn(t,e){if(1&t&&(u.Zb(0,"mat-cell",184),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.info," ")}}function Gn(t,e){1&t&&(u.Zb(0,"mat-header-cell",182),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc(" ",u.nc(2,1,"lang.ip")," "))}function Bn(t,e){if(1&t&&(u.Zb(0,"mat-cell",130),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.remote_ip," ")}}function Wn(t,e){1&t&&u.Ub(0,"mat-header-row")}function qn(t,e){1&t&&u.Ub(0,"mat-row")}function Xn(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-tab",36),u.mc(1,"translate"),u.Zb(2,"div",158),u.Zb(3,"div"),u.Zb(4,"div",159),u.Zb(5,"div",160),u.Zb(6,"mat-form-field"),u.Zb(7,"input",161),u.hc("keyup",(function(t){return u.Hc(n),u.lc(2).applyFilter(t.target.value)})),u.mc(8,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(9,"div",160),u.Ub(10,"mat-paginator",162,163),u.Yb(),u.Yb(),u.Zb(12,"mat-table",164,165),u.Xb(14,166),u.Qc(15,Hn,3,3,"mat-header-cell",167),u.Qc(16,zn,3,4,"mat-cell",168),u.Wb(),u.Xb(17,169),u.Qc(18,$n,3,3,"mat-header-cell",170),u.Qc(19,Vn,2,1,"mat-cell",168),u.Wb(),u.Xb(20,171),u.Qc(21,Nn,3,3,"mat-header-cell",172),u.Qc(22,Jn,2,1,"mat-cell",173),u.Wb(),u.Xb(23,174),u.Qc(24,Gn,3,3,"mat-header-cell",167),u.Qc(25,Bn,2,1,"mat-cell",168),u.Wb(),u.Qc(26,Wn,1,0,"mat-header-row",175),u.Qc(27,qn,1,0,"mat-row",176),u.Yb(),u.Zb(28,"div",159),u.Zb(29,"div",177),u.Zb(30,"mat-form-field"),u.Zb(31,"input",178),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).minDate=t})),u.mc(32,"translate"),u.Yb(),u.Ub(33,"mat-datepicker-toggle",179),u.Ub(34,"mat-datepicker",180,181),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.Dc(35),i=u.lc(2);u.tc("label",u.nc(1,13,"lang.history")),u.Eb(7),u.tc("placeholder",u.nc(8,15,"lang.filterBy")),u.Eb(3),u.sc("length",100)("hidePageSize",!0)("pageSize",10),u.Eb(2),u.sc("dataSource",i.dataSource),u.Eb(14),u.sc("matHeaderRowDef",i.displayedColumns),u.Eb(1),u.sc("matRowDefColumns",i.displayedColumns),u.Eb(4),u.tc("placeholder",u.nc(32,17,"lang.since")),u.sc("ngModel",i.minDate)("matDatepicker",a),u.Eb(2),u.sc("for",a),u.Eb(1),u.sc("startAt",i.minDate)}}function Kn(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-card",34),u.Zb(1,"mat-tab-group",35),u.hc("selectedIndexChange",(function(t){return u.Hc(n),u.lc().selectedTabIndex=t}))("selectedTabChange",(function(){return u.Hc(n),u.lc().initService()})),u.Zb(2,"mat-tab",36),u.mc(3,"translate"),u.Qc(4,mn,39,38,"div",37),u.Qc(5,fn,2,1,"div",38),u.Qc(6,Sn,58,55,"form",39),u.Yb(),u.Qc(7,xn,4,4,"mat-tab",40),u.Qc(8,Yn,4,5,"mat-tab",40),u.Qc(9,Fn,23,18,"mat-tab",40),u.Qc(10,An,26,19,"mat-tab",41),u.Qc(11,Xn,36,19,"mat-tab",40),u.Yb(),u.Yb()}if(2&t){var a=u.lc();u.Eb(1),u.sc("selectedIndex",a.selectedTabIndex),u.Eb(1),u.tc("label",u.nc(3,10,"lang.informations")),u.Eb(2),u.sc("ngIf",a.showPassword),u.Eb(1),u.sc("ngIf","ABS"==a.user.status&&!a.showPassword),u.Eb(1),u.sc("ngIf",!a.showPassword),u.Eb(1),u.sc("ngIf",!a.creationMode),u.Eb(1),u.sc("ngIf",!a.creationMode),u.Eb(1),u.sc("ngIf",!a.creationMode),u.Eb(1),u.sc("ngIf",!a.creationMode),u.Eb(1),u.sc("ngIf",!a.creationMode)}}function ta(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-list-item"),u.Ub(1,"mat-icon",185),u.Zb(2,"h4",20),u.Sc(3),u.Yb(),u.Zb(4,"p",20),u.Zb(5,"mat-form-field",186),u.Zb(6,"input",187),u.hc("ngModelChange",(function(t){return u.Hc(n),e.$implicit.role=t}))("change",(function(){u.Hc(n);var t=e.$implicit;return u.lc().updateGroup(t)})),u.mc(7,"translate"),u.mc(8,"translate"),u.Yb(),u.Zb(9,"mat-hint",188),u.mc(10,"translate"),u.Sc(11),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit;u.Eb(3),u.Tc(a.group_desc),u.Eb(3),u.tc("title",u.nc(7,6,"lang.role")),u.tc("placeholder",u.nc(8,8,"lang.role")),u.sc("ngModel",a.role),u.Eb(3),u.tc("matTooltip",u.nc(10,10,"lang.perimeter")),u.Eb(2),u.Tc(a.maarch_comment)}}function ea(t,e){1&t&&u.Ub(0,"mat-icon",193)}function na(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-icon",194),u.Zb(1,"button",195),u.hc("click",(function(){u.Hc(n);var t=u.lc().$implicit;return u.lc().updatePrimaryEntity(t)})),u.mc(2,"translate"),u.Ub(3,"mat-icon",196),u.Yb(),u.Yb()}2&t&&(u.Eb(1),u.tc("matTooltip",u.nc(2,1,"lang.entityTooglePrimary")))}function aa(t,e){1&t&&(u.Zb(0,"span",117),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.primary")))}var ia=function(t){return{"font-weight":t}};function ra(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-list-item"),u.Qc(1,ea,1,0,"mat-icon",189),u.Qc(2,na,4,3,"mat-icon",190),u.Zb(3,"h4",191),u.Sc(4),u.Qc(5,aa,3,3,"span",192),u.Yb(),u.Zb(6,"p",20),u.Zb(7,"mat-form-field",186),u.Zb(8,"input",187),u.hc("ngModelChange",(function(t){return u.Hc(n),e.$implicit.user_role=t}))("change",(function(){u.Hc(n);var t=e.$implicit;return u.lc().updateEntity(t)})),u.mc(9,"translate"),u.mc(10,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit;u.Eb(1),u.sc("ngIf","Y"==a.primary_entity),u.Eb(1),u.sc("ngIf","Y"!=a.primary_entity),u.Eb(1),u.tc("matTooltip",a.entity_label),u.sc("ngStyle",u.zc(13,ia,"Y"==a.primary_entity?"bold":"normal")),u.Eb(1),u.Uc(" ",a.entity_label," "),u.Eb(1),u.sc("ngIf","Y"==a.primary_entity),u.Eb(3),u.tc("title",u.nc(9,9,"lang.role")),u.tc("placeholder",u.nc(10,11,"lang.role")),u.sc("ngModel",a.user_role)}}function ca(t,e){1&t&&(u.Ub(0,"div",15),u.mc(1,"translate")),2&t&&u.sc("innerHTML",u.nc(1,1,"lang.redirectConfidentialInfo"),u.Ic)}function oa(t,e){1&t&&(u.Ub(0,"div",15),u.mc(1,"translate")),2&t&&u.sc("innerHTML",u.nc(1,1,"lang.redirectModelInfo"),u.Ic)}function sa(t,e){if(1&t){var n=u.ac();u.Zb(0,"plugin-autocomplete",16),u.hc("triggerEvent",(function(t){return u.Hc(n),u.lc().setRedirectUser(t)})),u.mc(1,"translate"),u.mc(2,"translate"),u.Yb()}2&t&&u.sc("labelPlaceholder",u.nc(1,5,"lang.userReplacement"))("labelList",u.nc(2,7,"lang.availableUsers"))("routeDatas",u.yc(9,_n))("targetSearchKey","idToDisplay")("subInfoKey","descriptionToDisplay")}function la(t,e){1&t&&(u.Zb(0,"span"),u.Zb(1,"em"),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Yb()),2&t&&(u.Eb(2),u.Tc(u.nc(3,1,"lang.doNothingRedirectInformations")))}function da(t,e){1&t&&(u.Ub(0,"span",17),u.mc(1,"translate")),2&t&&u.sc("innerHTML",u.nc(1,1,"lang.removeUserRedirectInformations"),u.Ic)}function ba(t,e){1&t&&(u.Zb(0,"span"),u.Zb(1,"em"),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Yb()),2&t&&(u.Eb(2),u.Tc(u.nc(3,1,"lang.reaffectUserRedirectInformations")))}var ua,ma,fa=((ma=function(){function t(e,n,a,i,r,c,o,s,l,d,b,u){var m=this;_classCallCheck(this,t),this.translate=e,this.http=n,this.route=a,this.router=i,this.zone=r,this.notify=c,this.dialog=o,this.headerService=s,this._formBuilder=l,this.appService=d,this.privilegeService=b,this.viewContainerRef=u,this.loading=!1,this.highlightMe=!1,this.config={},this.mode="",this.user={mode:"standard",authorizedApi:""},this._search="",this.signatureModel={base64:"",base64ForJs:"",name:"",type:"",size:0,label:""},this.userAbsenceModel=[],this.userList=[],this.maarchParapheurLink={login:"",picture:""},this.selectedSignature=-1,this.selectedSignatureLabel="",this.loadingSign=!1,this.data=[],this.CurrentYear=(new Date).getFullYear(),this.currentMonth=(new Date).getMonth()+1,this.minDate=new Date,this.ruleText="",this.validPassword=!1,this.showPassword=!1,this.hidePassword=!0,this.passwordModel={currentPassword:"",newPassword:"",reNewPassword:""},this.passwordRules={minLength:{enabled:!1,value:0},complexityUpper:{enabled:!1,value:0},complexityNumber:{enabled:!1,value:0},complexitySpecial:{enabled:!1,value:0},renewal:{enabled:!1,value:0},historyLastUse:{enabled:!1,value:0}},this.displayedColumns=["event_date","record_id","info","remote_ip"],this.dataSource=new B.o(this.data),this.selectedTabIndex=0,this.maarchParapheurConnectionStatus=!0,this.canViewPersonalDatas=!1,this.canManagePersonalDatas=!1,this.adminModes=[{id:"standard",label:this.translate.instant("lang.standard")},{id:"root_visible",label:this.translate.instant("lang.root_visible")},{id:"root_invisible",label:this.translate.instant("lang.root_invisible")},{id:"rest",label:this.translate.instant("lang.rest")}],this.appVersion=je.a.VERSION.split(".")[0]+"."+je.a.VERSION.split(".")[1],this.selectionBaskets=new Te.c(!0,[]),window.angularUserAdministrationComponent={componentAfterUpload:function(t){return m.processAfterUpload(t)}}}return _createClass(t,[{key:"applyFilter",value:function(t){t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t}},{key:"masterToggleBaskets",value:function(t){var e=this;t.checked?this.user.baskets.forEach((function(t){t.userToDisplay||e.selectionBaskets.select(t)})):this.selectionBaskets.clear()}},{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.route.params.subscribe((function(e){void 0===e.id?(t.headerService.setHeader(t.translate.instant("lang.userCreation")),t.creationMode=!0,t.canViewPersonalDatas=!1,t.canManagePersonalDatas=t.privilegeService.hasCurrentUserPrivilege("manage_personal_data"),t.loading=!1):(t.creationMode=!1,t.serialId=e.id,t.http.get("../rest/users/"+t.serialId+"/details").subscribe((function(e){t.user=e,"rest"===t.user.mode&&(t.user.authorizedApi=t.user.authorizedApi.join("\n")),t.headerService.user.id===t.user.id?(t.canViewPersonalDatas=!0,t.canManagePersonalDatas=!0):(t.canViewPersonalDatas=t.privilegeService.hasCurrentUserPrivilege("view_personal_data"),t.canManagePersonalDatas=t.privilegeService.hasCurrentUserPrivilege("manage_personal_data")),t.canManagePersonalDatas&&(t.canViewPersonalDatas=!0),t.canViewPersonalDatas||(t.user.phone="****"),t.data=e.history,t.userId=e.user_id,t.minDate=new Date(t.CurrentYear+"-"+t.currentMonth+"-01"),t.headerService.setHeader(t.translate.instant("lang.userModification"),e.firstname+" "+e.lastname),void 0!==t.user.external_id.maarchParapheur&&t.checkInfoMaarchParapheurAccount(),t.loading=!1,setTimeout((function(){t.dataSource=new B.o(t.data),t.dataSource.paginator=t.paginator,t.dataSource.sort=t.sort}),0)}),(function(e){t.notify.handleErrors(e)})))}))}},{key:"checkInfoMaarchParapheurAccount",value:function(){var t=this;this.http.get("../rest/users/"+this.serialId+"/statusInMaarchParapheur").subscribe((function(e){t.maarchParapheurLink.login=e.link,t.loading=!1,""!==t.maarchParapheurLink.login?t.loadAvatarMaarchParapheur(t.user.external_id.maarchParapheur):t.maarchParapheurConnectionStatus=!1}))}},{key:"linkMaarchParapheurAccount",value:function(){var t=this;this.dialog.open(Le,{panelClass:"maarch-modal",autoFocus:!1,data:{user:this.user}}).afterClosed().subscribe((function(e){e&&(e.inMaarchParapheur?t.linkAccountToMaarchParahpeur(e.id):t.createAccountToMaarchParahpeur(e.id,e.login))}))}},{key:"linkAccountToMaarchParahpeur",value:function(t){var e=this;this.http.put("../rest/users/"+this.serialId+"/linkToMaarchParapheur",{maarchParapheurUserId:t}).subscribe((function(){e.user.canCreateMaarchParapheurUser=!1,e.user.external_id.maarchParapheur=t,e.checkInfoMaarchParapheurAccount(),e.notify.success(e.translate.instant("lang.accountLinked"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"createAccountToMaarchParahpeur",value:function(t,e){var n=this;this.http.put("../rest/users/"+t+"/createInMaarchParapheur",{login:e}).subscribe((function(t){n.user.canCreateMaarchParapheurUser=!1,n.user.external_id.maarchParapheur=t.externalId,n.checkInfoMaarchParapheurAccount(),n.notify.success(n.translate.instant("lang.accountAdded"))}),(function(t){"Login already exists"===t.error.errors&&(t.error.errors=n.translate.instant("lang.loginAlreadyExistsInMaarchParapheur")),n.notify.error(t.error.errors)}))}},{key:"loadAvatarMaarchParapheur",value:function(t){var e=this;this.http.get("../rest/maarchParapheur/user/"+t+"/picture").subscribe((function(t){e.maarchParapheurLink.picture=t.picture}),(function(t){e.notify.handleErrors(t)}))}},{key:"unlinkMaarchParapheurAccount",value:function(){var t=this;confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.unlinkAccount"))&&this.http.put("../rest/users/"+this.serialId+"/unlinkToMaarchParapheur",{}).subscribe((function(){t.user.canCreateMaarchParapheurUser=!0,t.maarchParapheurLink.login="",t.maarchParapheurLink.picture="",t.notify.success(t.translate.instant("lang.accountUnlinked")),t.maarchParapheurConnectionStatus=!0}),(function(e){t.notify.error(e.error.errors)}))}},{key:"toogleRedirect",value:function(t){var e=this;$("#redirectUser_"+t.group_id+"_"+t.basket_id).toggle(),this.http.get("../rest/users").subscribe((function(t){}),(function(t){e.notify.handleErrors(t)}))}},{key:"initService",value:function(){0===this.maarchTree.rawData.length&&this.maarchTree.initData(this.user.allEntities.map((function(t){return Object.assign(Object.assign({},t),{parent_id:t.parent})})))}},{key:"processAfterUpload",value:function(t){var e=this;this.zone.run((function(){return e.resfreshUpload(t)}))}},{key:"resfreshUpload",value:function(t){this.signatureModel.size<=2e6?(this.signatureModel.base64=t.replace(/^data:.*?;base64,/,""),this.signatureModel.base64ForJs=t):(this.signatureModel.name="",this.signatureModel.size=0,this.signatureModel.type="",this.signatureModel.base64="",this.signatureModel.base64ForJs="",this.notify.error("Taille maximum de fichier d\xe9pass\xe9e (2 MB)"))}},{key:"clickOnUploader",value:function(t){$("#"+t).click()}},{key:"uploadSignatureTrigger",value:function(t){var e=this;if(t.target.files&&t.target.files[0]){var n=new FileReader;this.signatureModel.name=t.target.files[0].name,this.signatureModel.size=t.target.files[0].size,this.signatureModel.type=t.target.files[0].type,""===this.signatureModel.label&&(this.signatureModel.label=this.signatureModel.name),n.readAsDataURL(t.target.files[0]),n.onload=function(t){window.angularUserAdministrationComponent.componentAfterUpload(t.target.result),e.submitSignature()}}}},{key:"displaySignatureEditionForm",value:function(t){this.selectedSignature=t,this.selectedSignatureLabel=this.user.signatures[t].signature_label}},{key:"resendActivationNotification",value:function(){var t=this;confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.sendActivationNotification"))&&this.http.put("../rest/users/"+this.serialId+"/accountActivationNotification",{}).subscribe((function(e){t.notify.success(t.translate.instant("lang.activationNotificationSend"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"toggleGroup",value:function(t){var e=this;!0===$("#"+t.group_id+"-input").is(":checked")?this.http.post("../rest/users/"+this.serialId+"/groups",{groupId:t.group_id,role:t.role}).subscribe((function(t){return Object(yt.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.user.groups=t.groups,this.user.baskets=t.baskets,e.t0=this.headerService.user.id==this.serialId,!e.t0){e.next=7;break}return e.next=6,this.headerService.resfreshCurrentUser();case 6:this.privilegeService.resfreshUserShortcuts();case 7:this.notify.success(this.translate.instant("lang.groupAdded"));case 8:case"end":return e.stop()}}),e,this)})))}),(function(t){e.notify.error(t.error.errors)})):this.http.delete("../rest/users/"+this.serialId+"/groups/"+t.group_id).subscribe((function(t){return Object(yt.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.user.groups=t.groups,this.user.baskets=t.baskets,this.user.redirectedBaskets=t.redirectedBaskets,e.t0=this.headerService.user.id==this.serialId,!e.t0){e.next=8;break}return e.next=7,this.headerService.resfreshCurrentUser();case 7:this.privilegeService.resfreshUserShortcuts();case 8:this.notify.success(this.translate.instant("lang.groupDeleted"));case 9:case"end":return e.stop()}}),e,this)})))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"updateGroup",value:function(t){var e=this;this.http.put("../rest/users/"+this.serialId+"/groups/"+t.group_id,t).subscribe((function(t){e.notify.success(e.translate.instant("lang.groupUpdated"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"addEntity",value:function(t){var e=this;t.forEach((function(t){e.http.post("../rest/users/"+e.serialId+"/entities",{entityId:t.entity_id,role:""}).subscribe((function(t){e.user.entities=t.entities,e.user.allEntities=t.allEntities,e.headerService.user.id==e.serialId&&e.headerService.resfreshCurrentUser(),e.notify.success(e.translate.instant("lang.entityAdded"))}),(function(t){e.notify.error(t.error.errors)}))}))}},{key:"updateEntity",value:function(t){var e=this;this.http.put("../rest/users/"+this.serialId+"/entities/"+t.entity_id,t).subscribe((function(){e.notify.success(e.translate.instant("lang.entityUpdated"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"updatePrimaryEntity",value:function(t){var e=this;this.http.put("../rest/users/"+this.serialId+"/entities/"+t.entity_id+"/primaryEntity",{}).subscribe((function(n){e.user.entities=n.entities,e.notify.success(e.translate.instant("lang.entityTooglePrimary")+" \xab "+t.entity_id+" \xbb")}),(function(t){e.notify.error(t.error.errors)}))}},{key:"deleteEntity",value:function(t){var e=this;t.forEach((function(t){var n=t.entity_id;e.http.get("../rest/users/"+e.serialId+"/entities/"+n).subscribe((function(a){a.hasConfidentialityInstances||a.hasListTemplates?(e.config={panelClass:"maarch-modal",data:{hasConfidentialityInstances:a.hasConfidentialityInstances,hasListTemplates:a.hasListTemplates}},e.dialogRef=e.dialog.open(pa,e.config),e.dialogRef.afterClosed().subscribe((function(a){e.mode="delete",a?(e.mode=a.processMode,e.http.request("DELETE","../rest/users/"+e.serialId+"/entities/"+n,{body:{mode:e.mode,newUser:a.newUser}}).subscribe((function(t){e.user.entities=t.entities,e.user.allEntities=t.allEntities,e.headerService.user.id==e.serialId&&e.headerService.resfreshCurrentUser(),e.notify.success(e.translate.instant("lang.entityDeleted"))}),(function(t){e.notify.error(t.error.errors)}))):(e.maarchTree.toggleNode(e.maarchTree.dataSource.data,{selected:!0,opened:!0},[t.id]),e.mode=""),e.dialogRef=null}))):e.http.delete("../rest/users/"+e.serialId+"/entities/"+n).subscribe((function(t){e.user.entities=t.entities,e.user.allEntities=t.allEntities,e.headerService.user.id==e.serialId&&e.headerService.resfreshCurrentUser(),e.notify.success(e.translate.instant("lang.entityDeleted"))}),(function(t){e.notify.error(t.error.errors)}))}),(function(t){e.notify.error(t.error.errors)}))}))}},{key:"submitSignature",value:function(){var t=this;this.http.post("../rest/users/"+this.serialId+"/signatures",this.signatureModel).subscribe((function(e){t.user.signatures=e.signatures,t.notify.success(t.translate.instant("lang.signAdded")),t.signatureModel={base64:"",base64ForJs:"",name:"",type:"",size:0,label:""}}),(function(e){t.notify.error(e.error.errors)}))}},{key:"updateSignature",value:function(t){var e=this;this.http.put("../rest/users/"+this.serialId+"/signatures/"+this.user.signatures[t].id,{label:this.user.signatures[t].signature_label}).subscribe((function(n){e.user.signatures[t].signature_label=n.signature.signature_label,e.notify.success(e.translate.instant("lang.signUpdated"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"deleteSignature",value:function(t){var e=this;confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+t.signature_label+" \xbb")&&this.http.delete("../rest/users/"+this.serialId+"/signatures/"+t.id).subscribe((function(t){e.user.signatures=t.signatures,e.notify.success(e.translate.instant("lang.signDeleted"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"test",value:function(t){var e=this;if(t.mouseEvent.dataTransfer.files&&t.mouseEvent.dataTransfer.files[0]){var n=new FileReader;this.signatureModel.name=t.mouseEvent.dataTransfer.files[0].name,this.signatureModel.size=t.mouseEvent.dataTransfer.files[0].size,this.signatureModel.type=t.mouseEvent.dataTransfer.files[0].type,""===this.signatureModel.label&&(this.signatureModel.label=this.signatureModel.name),n.readAsDataURL(t.mouseEvent.dataTransfer.files[0]),n.onload=function(t){window.angularUserAdministrationComponent.componentAfterUpload(t.target.result),e.submitSignature()}}}},{key:"addBasketRedirection",value:function(t){var e=this,n=[];this.selectionBaskets.selected.forEach((function(e){n.push({actual_user_id:t.serialId,basket_id:e.basket_id,group_id:e.groupSerialId,originalOwner:null})})),confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.redirectBasket"))&&this.http.post("../rest/users/"+this.serialId+"/redirectedBaskets",n).subscribe((function(t){e.user.baskets=t.baskets,e.user.redirectedBaskets=t.redirectedBaskets,e.selectionBaskets.clear(),e.notify.success(e.translate.instant("lang.basketUpdated"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"reassignBasketRedirection",value:function(t,e,n){var a=this;confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.redirectBasket"))&&this.http.post("../rest/users/"+this.serialId+"/redirectedBaskets",[{actual_user_id:t.serialId,basket_id:e.basket_id,group_id:e.group_id,originalOwner:e.owner_user_id}]).subscribe((function(t){a.user.baskets=t.baskets,a.user.assignedBaskets.splice(n,1),a.notify.success(a.translate.instant("lang.basketUpdated"))}),(function(t){a.notify.error(t.error.errors)}))}},{key:"delBasketRedirection",value:function(t,e){var n=this;confirm(this.translate.instant("lang.confirmAction"))&&this.http.delete("../rest/users/"+this.serialId+"/redirectedBaskets?redirectedBasketIds[]="+t.id).subscribe((function(t){n.user.baskets=t.baskets,n.user.redirectedBaskets.splice(e,1),n.notify.success(n.translate.instant("lang.basketUpdated"))}),(function(t){n.notify.error(t.error.errors)}))}},{key:"delBasketAssignRedirection",value:function(t,e){var n=this;confirm(this.translate.instant("lang.confirmAction"))&&this.http.delete("../rest/users/"+this.serialId+"/redirectedBaskets?redirectedBasketIds[]="+t.id).subscribe((function(t){n.user.baskets=t.baskets,n.user.assignedBaskets.splice(e,1),n.notify.success(n.translate.instant("lang.basketUpdated"))}),(function(t){n.notify.error(t.error.errors)}))}},{key:"toggleBasket",value:function(t){var e=this,n=[];this.user.baskets.forEach((function(a){e.selectionBaskets.selected.forEach((function(e){a.basket_id===e.basket_id&&a.group_id===e.group_id&&a.allowed!==t&&(a.allowed=t,n.push({basketId:a.basket_id,groupSerialId:a.groupSerialId,allowed:t}))}))})),n.length>0&&this.http.put("../rest/users/"+this.serialId+"/baskets",{baskets:n}).subscribe((function(t){e.selectionBaskets.clear(),e.notify.success(e.translate.instant("lang.basketsUpdated"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"activateAbsence",value:function(){var t=this;this.http.put("../rest/users/"+this.serialId+"/status",{status:"ABS"}).subscribe((function(e){t.user.status=e.user.status,t.userAbsenceModel=[],t.notify.success(t.translate.instant("lang.absOn"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"desactivateAbsence",value:function(){var t=this;this.http.put("../rest/users/"+this.serialId+"/status",{status:"OK"}).subscribe((function(e){t.user.status=e.user.status,t.notify.success(t.translate.instant("lang.absOff"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"getErrorMessage",value:function(){return this.firstFormGroup.controls.retypePasswordCtrl.setErrors(this.firstFormGroup.controls.newPasswordCtrl.value!==this.firstFormGroup.controls.retypePasswordCtrl.value?{mismatch:!0}:null),this.firstFormGroup.controls.newPasswordCtrl.hasError("required")?this.translate.instant("lang.requiredField")+" !":this.firstFormGroup.controls.newPasswordCtrl.hasError("minlength")&&this.passwordRules.minLength.enabled?this.passwordRules.minLength.value+" "+this.translate.instant("lang.passwordminLength")+" !":null!=this.firstFormGroup.controls.newPasswordCtrl.errors&&void 0!==this.firstFormGroup.controls.newPasswordCtrl.errors.complexityUpper&&this.passwordRules.complexityUpper.enabled?this.translate.instant("lang.passwordcomplexityUpper")+" !":null!=this.firstFormGroup.controls.newPasswordCtrl.errors&&void 0!==this.firstFormGroup.controls.newPasswordCtrl.errors.complexityNumber&&this.passwordRules.complexityNumber.enabled?this.translate.instant("lang.passwordcomplexityNumber")+" !":null!=this.firstFormGroup.controls.newPasswordCtrl.errors&&void 0!==this.firstFormGroup.controls.newPasswordCtrl.errors.complexitySpecial&&this.passwordRules.complexitySpecial.enabled?this.translate.instant("lang.passwordcomplexitySpecial")+" !":(this.firstFormGroup.controls.newPasswordCtrl.setErrors(null),this.validPassword=!0,"")}},{key:"matchValidator",value:function(t){return t.controls.newPasswordCtrl.value!==t.controls.retypePasswordCtrl.value&&(t.controls.retypePasswordCtrl.setErrors({mismatch:!0}),{mismatch:!0})}},{key:"regexValidator",value:function(t,e){return function(n){return n.value?t.test(n.value)?null:e:null}}},{key:"changePasswd",value:function(){var t=this;this.http.get("../rest/passwordRules").subscribe((function(e){var n=[],a=[],i=[];n.push(o.H.required),e.rules.forEach((function(e){"minLength"===e.label?(t.passwordRules.minLength.enabled=e.enabled,t.passwordRules.minLength.value=e.value,e.enabled&&(n.push(o.H.minLength(t.passwordRules.minLength.value)),a.push(e.value+" "+t.translate.instant("lang.password"+e.label)))):"complexityUpper"===e.label?(t.passwordRules.complexityUpper.enabled=e.enabled,t.passwordRules.complexityUpper.value=e.value,e.enabled&&(n.push(t.regexValidator(new RegExp("[A-Z]"),{complexityUpper:""})),a.push(t.translate.instant("lang.password"+e.label)))):"complexityNumber"===e.label?(t.passwordRules.complexityNumber.enabled=e.enabled,t.passwordRules.complexityNumber.value=e.value,e.enabled&&(n.push(t.regexValidator(new RegExp("[0-9]"),{complexityNumber:""})),a.push(t.translate.instant("lang.password"+e.label)))):"complexitySpecial"===e.label?(t.passwordRules.complexitySpecial.enabled=e.enabled,t.passwordRules.complexitySpecial.value=e.value,e.enabled&&(n.push(t.regexValidator(new RegExp("[^A-Za-z0-9]"),{complexitySpecial:""})),a.push(t.translate.instant("lang.password"+e.label)))):"renewal"===e.label?(t.passwordRules.renewal.enabled=e.enabled,t.passwordRules.renewal.value=e.value,e.enabled&&i.push(t.translate.instant("lang.password"+e.label)+" <b>"+e.value+" "+t.translate.instant("lang.days")+"</b>. "+t.translate.instant("lang.password2"+e.label)+".")):"historyLastUse"===e.label&&(t.passwordRules.historyLastUse.enabled=e.enabled,t.passwordRules.historyLastUse.value=e.value,e.enabled&&i.push(t.translate.instant("lang.passwordhistoryLastUseDesc")+" <b>"+e.value+"</b> "+t.translate.instant("lang.passwordhistoryLastUseDesc2")+"."))})),t.ruleText=a.join(", "),t.otherRuleText=i.join("<br/>"),t.firstFormGroup.controls.newPasswordCtrl.setValidators(n)}),(function(e){t.notify.error(e.error.errors)})),this.firstFormGroup=this._formBuilder.group({newPasswordCtrl:[""],retypePasswordCtrl:["",o.H.compose([o.H.required])],currentPasswordCtrl:["",o.H.compose([o.H.required])]},{validator:this.matchValidator}),this.validPassword=!1,this.firstFormGroup.controls.currentPasswordCtrl.setErrors(null),this.firstFormGroup.controls.newPasswordCtrl.setErrors(null),this.firstFormGroup.controls.retypePasswordCtrl.setErrors(null),this.showPassword=!0,this.selectedTabIndex=0}},{key:"updatePassword",value:function(){var t=this;this.passwordModel.currentPassword=this.firstFormGroup.controls.currentPasswordCtrl.value,this.passwordModel.newPassword=this.firstFormGroup.controls.newPasswordCtrl.value,this.passwordModel.reNewPassword=this.firstFormGroup.controls.retypePasswordCtrl.value,this.http.put("../rest/users/"+this.serialId+"/password",this.passwordModel).subscribe((function(){t.showPassword=!1,t.passwordModel={currentPassword:"",newPassword:"",reNewPassword:""},t.notify.success(t.translate.instant("lang.passwordUpdated"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"onSubmit",value:function(){var t=this;if(this.creationMode){var e=!0;this.http.get("../rest/users/"+this.user.userId+"/status").subscribe((function(n){var a=!1;n.status&&"DEL"===n.status&&(e=confirm(t.translate.instant("lang.reactivateUserDeleted")),a=!0),e&&t.http.post("../rest/users",t.user).subscribe((function(e){t.notify.success(t.translate.instant(a?"lang.userUpdated":"lang.userAdded")),t.router.navigate(["/administration/users/"+e.id])}),(function(e){t.notify.error(e.error.errors)}))}),(function(e){t.notify.error(e.error.errors)}))}else{var n=Object.assign({},this.user);"rest"===this.user.mode&&(n.authorizedApi=""!==this.user.authorizedApi.split("\n")[0]?this.user.authorizedApi.split("\n"):[]),this.http.put("../rest/users/"+this.serialId,n).subscribe((function(e){t.headerService.user.id==t.serialId&&t.headerService.resfreshCurrentUser(),t.notify.success(t.translate.instant("lang.userUpdated"))}),(function(e){t.notify.error(e.error.errors)}))}}},{key:"setUserModeLogin",value:function(t){this.user.mode=t.checked?"rest":"standard"}},{key:"sendToMaarchParapheur",value:function(){var t=this;confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.createUserInMaarchParapheur"))&&this.http.put("../rest/users/"+this.serialId+"/maarchParapheur","").subscribe((function(e){t.notify.success(t.translate.instant("lang.userCreatedInMaarchParapheur")),t.user.external_id.maarchParapheur=e.externalId,t.user.canCreateMaarchParapheurUser=!1}),(function(e){t.notify.error(e.error.errors)}))}},{key:"setLowerUserId",value:function(){this.user.userId=this.user.userId.toLowerCase()}},{key:"syncMP",value:function(){var t=this;this.loadingSign=!0,this.http.put("../rest/users/"+this.user.id+"/externalSignatures",{}).subscribe((function(e){t.loadingSign=!1,t.notify.success(t.translate.instant("lang.signsSynchronized"))}),(function(e){t.loadingSign=!1,t.notify.error(e.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||ma)(u.Tb(m.e),u.Tb(f.b),u.Tb(r.a),u.Tb(r.c),u.Tb(u.B),u.Tb(y.a),u.Tb(z.b),u.Tb(p.a),u.Tb(o.g),u.Tb(g.a),u.Tb(h.a),u.Tb(u.R))},ma.\u0275cmp=u.Nb({type:ma,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(Ge,!0),u.Oc(Be,!0),u.ad(We,!0),u.ad(V.a,!0),u.ad(N.a,!0)),2&t&&(u.Cc(n=u.ic())&&(e.sidenavRight=n.first),u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.maarchTree=n.first),u.Cc(n=u.ic())&&(e.paginator=n.first),u.Cc(n=u.ic())&&(e.sort=n.first))},decls:27,vars:19,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",2,"overflow-x","hidden","max-width","500px",3,"mode","fixedInViewport","opened"],["snav2",""],["mat-subheader",""],[4,"ngFor","ngForOf"],[4,"ngIf"],["mat-list-item","",3,"click",4,"ngIf"],["mat-list-item","",3,"title","click",4,"ngIf"],["mat-list-item","",3,"click"],["color","warn","mat-list-icon","",1,"fa","fa-plane"],["mat-line",""],["color","accent","mat-list-icon","",1,"fa","fa-check"],["color","primary","mat-list-icon","",1,"fa","fa-paper-plane"],["color","primary","mat-list-icon","",1,"fa","fa-key"],["mat-list-item","",3,"title","click"],["color","primary","mat-list-icon","",1,"fa","fa-link"],["mat-line","","style","font-size:11px;color:red",4,"ngIf"],["mat-line","",2,"font-size","11px","color","red"],["color","primary","mat-list-icon","",1,"avatarAccount"],["mat-line","",1,"accountInfo"],["mat-icon-button","","color","warn",3,"title","click"],[1,"fas","fa-unlink"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[3,"selectedIndex","selectedIndexChange","selectedTabChange"],[3,"label"],["style","margin-bottom: 5%",4,"ngIf"],["class","text-warning","style","position: absolute;opacity: 0.25;font-size: 120px;transform: rotate(324deg);-webkit-transform: rotate(324deg);margin-left: 35%;margin-top: 90px;",4,"ngIf"],["class","form-horizontal",3,"ngSubmit",4,"ngIf"],[3,"label",4,"ngIf"],[3,"label","disabled",4,"ngIf"],[2,"margin-bottom","5%"],[3,"formGroup"],[1,"form-group"],[2,"padding","10px"],["matInput","","formControlName","currentPasswordCtrl","required","",3,"placeholder","type"],["matSuffix","",1,"fa","fa-2x",3,"ngClass","click"],[2,"text-align","center","color","rgba(0,0,0,0.54)","font-size","75%"],[1,"col-sm-6",2,"padding-left","0px","padding-right","0px"],["matInput","","formControlName","newPasswordCtrl","required","",3,"placeholder","type"],["inputPasswd",""],["matInput","","required","","formControlName","retypePasswordCtrl",3,"placeholder","type"],["inputPasswd2",""],["class","form-group",4,"ngIf"],[2,"text-align","center"],["mat-raised-button","","color","primary","type","button",3,"disabled","click"],["mat-raised-button","","color","default","type","button",3,"click"],["color","accent",1,"fa","fa-check"],["color","accent"],[1,"col-sm-12",2,"padding-left","0px","padding-right","0px"],["role","alert",1,"alert","alert-warning",2,"text-align","center",3,"innerHTML"],[1,"text-warning",2,"position","absolute","opacity","0.25","font-size","120px","transform","rotate(324deg)","-webkit-transform","rotate(324deg)","margin-left","35%","margin-top","90px"],[1,"form-horizontal",3,"ngSubmit"],["profileForm","ngForm"],[1,"col-sm-12"],[1,"pull-left"],[1,"avatar",2,"font-size","90px","text-align","center"],[1,"fa","fa-user",2,"font-size","90px","padding-top","5px"],[1,"input-group"],["matInput","","type","text","name","user_id","pattern","^[\\w.@-]*$","required","",3,"title","ngModel","placeholder","ngModelChange","keyup",4,"ngIf"],["matInput","","type","text","disabled","",3,"title","value","placeholder",4,"ngIf"],[1,"col-sm-5",2,"font-weight","bold"],["matInput","","type","text","id","lastname","name","lastname","required","",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","type","text","id","firstname","name","firstname","required","",3,"title","placeholder","ngModel","ngModelChange"],[1,"col-sm-2",2,"font-style","italic"],["matInput","","type","text","id","initials","name","initials",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","type","tel","id","phone","name","phone","pattern","\\+?((|\\ |\\.|\\(|\\)|\\-)?(\\d)*)*\\d$",3,"title","placeholder","ngModel","disabled","ngModelChange"],["matInput","","type","email","id","mail","name","mail","pattern","(^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$)","required","",3,"title","placeholder","ngModel","ngModelChange"],[3,"expanded"],[2,"color","rgba(0,0,0,0.54)"],["id","accountType","name","accountType","required","",3,"ngModel","disabled","ngModelChange"],[1,"form-group",2,"margin-top","10px"],["mat-raised-button","","color","primary","type","submit",3,"disabled",4,"ngIf"],["matInput","","type","text","name","user_id","pattern","^[\\w.@-]*$","required","",3,"title","ngModel","placeholder","ngModelChange","keyup"],["matInput","","type","text","disabled","",3,"title","value","placeholder"],[3,"value","disabled","title"],["matInput","","name","authorizedApi","placeholder","Ex : PUT/attachments/{id}",3,"ngModel","ngModelChange"],["target","_blank",3,"href"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["disableRipple","true",4,"ngFor","ngForOf"],["disableRipple","true"],["color","primary",3,"id","checked","disabled","change"],[3,"selectionPropagation","openState","afterSelectNode","afterDeselectNode"],["maarchTree",""],[1,"col-sm-6",2,"overflow","hidden"],["mat-list-icon","","color","primary"],["color","primary",3,"checked","matTooltip","change"],["mat-line","","style","opacity: 0.5;font-style: italic;font-size: 80%;margin-top:10px;",4,"ngIf"],["mat-line","","style","margin-top:10px;",4,"ngIf"],["mat-line","",2,"opacity","0.5","font-style","italic","font-size","80%","margin-top","10px"],["mat-line","",2,"margin-top","10px"],["mat-icon-button","",3,"matMenuTriggerFor","matTooltip"],[1,"fa","fa-reply"],[1,"vertical-divider",3,"vertical"],["color","warn","mat-icon-button","",3,"matTooltip","click"],[1,"fa","fa-ban"],["color","accent","mat-icon-button","",3,"matTooltip","click"],[1,"fa","fa-check"],[2,"width","200px !important"],["menu","matMenu"],["appearance","outline",3,"labelPlaceholder","routeDatas","targetSearchKey","subInfoKey","triggerEvent"],["style","cursor: pointer;",4,"ngIf"],[2,"cursor","pointer"],["mat-list-icon","","color","primary",4,"ngIf"],["mat-line","","color","primary",2,"display","flex","align-items","center"],[2,"flex","2","overflow","hidden","text-overflow","ellipsis",3,"matTooltip","ngStyle","click"],[1,"label","label-primary",2,"font-weight","normal"],["color","primary",3,"checked","click","change"],["mat-list-icon","","color","primary",1,"fa","fa-paper-plane",2,"margin-top","-60px"],["mat-line","","color","primary"],["type","text","color","warn","matInput","","disabled","",3,"value"],["mat-button","","color","warn","matSuffix","","mat-icon-button","","aria-label","Clear",3,"matTooltip","click"],["color","warn",1,"fa","fa-times","text-danger"],["mat-list-icon","","color","primary",1,"fa","fa-reply",2,"margin-top","-60px"],["appearance","outline",3,"labelPlaceholder","routeDatas","targetSearchKey","subInfoKey","triggerEvent",4,"ngIf"],["color","primary",1,"fa","fa-edit"],[3,"label","disabled"],["dnd-droppable","","class","dndFile",3,"matTooltip","dndFileHighlighted","click","dragover","dragleave","onDropSuccess",4,"ngIf"],[2,"display","flex","align-items","flex-start"],[2,"flex","1"],["class","col-md-3 col-sm-6 col-xm-12",4,"ngFor","ngForOf"],["mat-icon-button","","color","primary",3,"matTooltip","disabled","click",4,"ngIf"],[2,"display","none",3,"ngSubmit"],["signatureForm","ngForm"],[1,"col-md-11"],["type","text","id","signLabel","name","label","required","",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"form-inline","hide"],["type","file","name","files[]","id","uploadSignFile","accept","image/*",3,"change"],[1,"col-md-1",2,"margin-bottom","5px"],["type","submit",1,"form-control","btn","btn-sm","btn-success",3,"disabled"],[1,"fa","fa-plus"],[3,"ngClass"],[1,"upload-drop-zone",2,"cursor","pointer",3,"click"],[1,"fa","fa-upload","fa-2x"],["class","col-md-2",4,"ngIf"],["dnd-droppable","",1,"dndFile",3,"matTooltip","click","dragover","dragleave","onDropSuccess"],[1,"col-md-3","col-sm-6","col-xm-12"],[2,"margin-bottom","10px","overflow","hidden"],["floatLabel","never"],["matInput","","type","text","name","selectedSignatureLabel",3,"ngModel","placeholder","disabled","ngModelChange","change"],["mat-button","","matSuffix","","mat-icon-button","","color","warn",3,"matTooltip","disabled","click"],[1,"fa","fa-times"],["alt","Signature",2,"width","auto","height","60px",3,"src"],["mat-icon-button","","color","primary",3,"matTooltip","disabled","click"],[1,"fa","fa-sync-alt","fa-2x"],[1,"col-md-2"],["id","signaturePreview","alt","Invalid image",2,"width","100%",3,"src"],[1,"col-md-12"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"placeholder","keyup"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortActive","event_date","matSortDirection","desc",3,"dataSource"],["table",""],["matColumnDef","event_date"],["mat-sort-header","","style","flex:1;",4,"matHeaderCellDef"],["style","flex:1;",4,"matCellDef"],["matColumnDef","record_id"],["style","flex:1;",4,"matHeaderCellDef"],["matColumnDef","info"],["mat-sort-header","","style","flex:2;",4,"matHeaderCellDef"],["style","flex:2;",4,"matCellDef"],["matColumnDef","remote_ip"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"col-md-3","pull-right",2,"padding-top","10px"],["matInput","","disabled","",3,"ngModel","matDatepicker","placeholder","ngModelChange"],["matSuffix","",3,"for"],["startView","month",3,"startAt"],["picker",""],["mat-sort-header","",2,"flex","1"],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],["color","primary","mat-list-icon","",1,"fa","fa-users"],[2,"font-size","10px"],["matInput","","type","text","id","role","name","role",3,"title","placeholder","ngModel","ngModelChange","change"],[3,"matTooltip"],["color","primary","mat-list-icon","","class","fa fa-sitemap",4,"ngIf"],["color","primary","mat-list-icon","","class","fa fa-sitemap","style","position:relative;",4,"ngIf"],["mat-line","",3,"ngStyle","matTooltip"],["class","label label-primary","style","font-weight:normal",4,"ngIf"],["color","primary","mat-list-icon","",1,"fa","fa-sitemap"],["color","primary","mat-list-icon","",1,"fa","fa-sitemap",2,"position","relative"],["mat-icon-button","",2,"cursor","pointer","position","absolute","right","-20px","top","-20px","font-size","10px",3,"matTooltip","click"],[1,"fa","fa-arrow-up"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,cn,3,2,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,on,2,0,"div",9),u.Qc(14,Kn,12,12,"mat-card",10),u.Yb(),u.Yb(),u.Yb(),u.Zb(15,"mat-sidenav",11,12),u.Zb(17,"mat-list"),u.Zb(18,"h3",13),u.Sc(19),u.mc(20,"translate"),u.Yb(),u.Qc(21,ta,12,12,"mat-list-item",14),u.Ub(22,"mat-divider"),u.Zb(23,"h3",13),u.Sc(24),u.mc(25,"translate"),u.Yb(),u.Qc(26,ra,11,15,"mat-list-item",14),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading),u.Eb(1),u.sc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!e.appService.getViewMode()&&!e.creationMode),u.Eb(4),u.Tc(u.nc(20,15,"lang.groups")),u.Eb(2),u.sc("ngForOf",e.user.groups),u.Eb(3),u.Tc(u.nc(25,17,"lang.entities")),u.Eb(2),u.sc("ngForOf",e.user.entities))},directives:[S.e,S.f,M.a,Y.a,Z.t,S.d,Dt.a,Dt.g,Z.s,_.a,Dt.h,Dt.d,Ut.a,Dt.c,I.k,D.b,O.c,T.a,Re.c,Re.a,o.J,o.u,o.l,k.c,w.b,o.c,o.t,o.j,o.E,k.j,Z.q,k.b,k.f,o.v,o.w,o.A,Qe.a,Qe.c,Qe.g,Qe.h,k.g,it.a,I.o,nt.a,Ae.a,He.a,Ft.b,ze.d,ze.e,Lt.a,Z.w,$e.d,T.d,V.a,B.n,N.a,B.c,B.i,B.b,B.k,B.m,Ve.f,Ve.h,Ve.d,B.h,N.b,B.a,B.j,B.l],pipes:[m.d,U.a,Z.b,Ne.a,Z.f],styles:[".avatar[_ngcontent-%COMP%]{text-decoration:none;background:#135f7f;color:#fff;width:100px;height:100px;border-radius:5px;display:block;overflow:hidden;margin:5px}.form-group[_ngcontent-%COMP%]{margin:0}.vertical-divider[_ngcontent-%COMP%]{height:80%}.avatarAccount[_ngcontent-%COMP%]{border:3px solid #f99830;height:45px!important;width:45px!important;background-size:cover;background-repeat:no-repeat;background-position:50%}.accountInfo[_ngcontent-%COMP%]{margin-left:20px!important;display:flex!important}.accountInfo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;align-items:center;display:flex}"]}),ma),pa=((ua=function(){function t(e,n,a){_classCallCheck(this,t),this.http=e,this.data=n,this.dialogRef=a,this.redirectUser="",this.processMode=""}return _createClass(t,[{key:"setRedirectUser",value:function(t){this.redirectUser=t}}]),t}()).\u0275fac=function(t){return new(t||ua)(u.Tb(f.b),u.Tb(z.a),u.Tb(z.h))},ua.\u0275cmp=u.Nb({type:ua,selectors:[["ng-component"]],decls:30,vars:23,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["redirectConfForm","ngForm"],["class","alert-message alert-message-info","role","alert",3,"innerHTML",4,"ngIf"],[1,"input-group"],["id","processMode","name","processMode","color","primary",2,"display","inline-flex","flex-direction","column",3,"ngModel","ngModelChange"],["value","","checked","true","color","primary"],["value","delete","color","primary"],["value","reaffect","color","primary"],["singleMode","","required","",3,"labelPlaceholder","labelList","routeDatas","targetSearchKey","subInfoKey","triggerEvent",4,"ngIf"],["role","alert",1,"alert-message","alert-message-info",2,"max-width","inherit"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"divider-modal"],["mat-raised-button","","color","primary","type","submit",3,"disabled","click"],["role","alert",1,"alert-message","alert-message-info",3,"innerHTML"],["singleMode","","required","",3,"labelPlaceholder","labelList","routeDatas","targetSearchKey","subInfoKey","triggerEvent"],[3,"innerHTML"]],template:function(t,e){1&t&&(u.Zb(0,"div",0),u.Zb(1,"h1",1),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"mat-dialog-content"),u.Zb(5,"form",null,2),u.Qc(7,ca,2,3,"div",3),u.Qc(8,oa,2,3,"div",3),u.Zb(9,"div",4),u.Zb(10,"mat-radio-group",5),u.hc("ngModelChange",(function(t){return e.processMode=t})),u.Zb(11,"mat-radio-button",6),u.Sc(12),u.mc(13,"translate"),u.Yb(),u.Zb(14,"mat-radio-button",7),u.Sc(15),u.mc(16,"translate"),u.Yb(),u.Zb(17,"mat-radio-button",8),u.Sc(18),u.mc(19,"translate"),u.Yb(),u.Yb(),u.Qc(20,sa,3,10,"plugin-autocomplete",9),u.Zb(21,"div",10),u.Qc(22,la,4,3,"span",11),u.Qc(23,da,2,3,"span",12),u.Qc(24,ba,4,3,"span",11),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Ub(25,"span",13),u.Zb(26,"mat-dialog-actions"),u.Zb(27,"button",14),u.hc("click",(function(){return e.dialogRef.close({newUser:e.redirectUser,processMode:e.processMode})})),u.Sc(28),u.mc(29,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(2),u.Tc(u.nc(3,13,"lang.redirects")),u.Eb(5),u.sc("ngIf",e.data.hasConfidentialityInstances),u.Eb(1),u.sc("ngIf",e.data.hasListTemplates),u.Eb(2),u.sc("ngModel",e.processMode),u.Eb(2),u.Uc(" ",u.nc(13,15,"lang.doNothingRedirect")," "),u.Eb(3),u.Uc(" ",u.nc(16,17,"lang.removeUserRedirect")," "),u.Eb(3),u.Uc(" ",u.nc(19,19,"lang.reaffectUserRedirect")," "),u.Eb(2),u.sc("ngIf","reaffect"==e.processMode),u.Eb(2),u.sc("ngIf",""==e.processMode),u.Eb(1),u.sc("ngIf","delete"==e.processMode),u.Eb(1),u.sc("ngIf","reaffect"==e.processMode),u.Eb(3),u.sc("disabled",!e.redirectUser&&"reaffect"==e.processMode),u.Eb(1),u.Tc(u.nc(29,21,"lang.validate")))},directives:[z.i,z.f,o.J,o.u,o.v,Z.t,Je.b,o.t,o.w,Je.a,z.c,D.b,Lt.a],pipes:[m.d],styles:[".mat-dialog-content[_ngcontent-%COMP%]{max-height: 65vh;width:600px;}"]}),ua),ga=["snav2"],ha=["adminMenuTemplate"];function va(t,e){1&t&&(u.Zb(0,"mat-nav-list"),u.Zb(1,"h3",11),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"a",12),u.Ub(5,"mat-icon",13),u.Zb(6,"p",14),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(2),u.Tc(u.nc(3,2,"lang.actions")),u.Eb(5),u.Uc(" ",u.nc(8,4,"lang.add")," "))}function ya(t,e){1&t&&(u.Zb(0,"div",15),u.Ub(1,"mat-spinner",16),u.Yb())}function Ca(t,e){if(1&t&&(u.Zb(0,"mat-header-cell",37),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=u.lc(2);u.Jb("hide-for-mobile",n.appService.getViewMode()),u.Eb(1),u.Tc(u.nc(2,3,"lang.id"))}}function Ea(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.Jb("hide-for-mobile",a.appService.getViewMode()),u.Eb(1),u.Uc(" ",n.group_id," ")}}function Sa(t,e){1&t&&(u.Zb(0,"mat-header-cell",38),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc("",u.nc(2,1,"lang.description")," "))}function Ma(t,e){if(1&t&&(u.Zb(0,"mat-cell",39),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.group_desc," ")}}function xa(t,e){1&t&&u.Ub(0,"mat-header-cell",40)}function Ya(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-cell",41),u.Zb(1,"button",42),u.hc("click",(function(t){u.Hc(n);var a=e.$implicit,i=u.lc(2);return t.stopPropagation(),i.preDelete(a)})),u.mc(2,"translate"),u.Ub(3,"mat-icon",43),u.Yb(),u.Yb()}2&t&&(u.Eb(1),u.tc("matTooltip",u.nc(2,1,"lang.delete")))}function Za(t,e){1&t&&u.Ub(0,"mat-header-row")}function _a(t,e){1&t&&(u.Ub(0,"mat-row",44),u.mc(1,"translate")),2&t&&(u.uc("routerLink","/administration/groups/",e.$implicit.id,""),u.tc("matTooltip",u.nc(1,2,"lang.view")))}function ka(t,e){if(1&t&&(u.Zb(0,"mat-card",17),u.Zb(1,"div",18),u.Zb(2,"div",19),u.Zb(3,"mat-form-field"),u.Ub(4,"input",20),u.mc(5,"translate"),u.Yb(),u.Yb(),u.Zb(6,"div",19),u.Ub(7,"mat-paginator",21,22),u.Yb(),u.Yb(),u.Zb(9,"mat-table",23,24),u.Xb(11,25),u.Qc(12,Ca,3,5,"mat-header-cell",26),u.Qc(13,Ea,2,3,"mat-cell",27),u.Wb(),u.Xb(14,28),u.Qc(15,Sa,3,3,"mat-header-cell",29),u.Qc(16,Ma,2,1,"mat-cell",30),u.Wb(),u.Xb(17,31),u.Qc(18,xa,1,0,"mat-header-cell",32),u.Qc(19,Ya,4,3,"mat-cell",33),u.Wb(),u.Qc(20,Za,1,0,"mat-header-row",34),u.Qc(21,_a,2,4,"mat-row",35),u.Yb(),u.Zb(22,"div",36),u.Sc(23),u.mc(24,"translate"),u.Yb(),u.Yb()),2&t){var n=u.lc();u.Eb(4),u.tc("placeholder",u.nc(5,10,"lang.filterBy")),u.sc("formControl",n.adminService.getFilterField()),u.Eb(3),u.sc("length",100)("hidePageSize",!0)("pageSize",10),u.Eb(2),u.sc("dataSource",n.adminService.getDataSource()),u.Eb(11),u.sc("matHeaderRowDef",n.displayedColumns),u.Eb(1),u.sc("matRowDefColumns",n.displayedColumns),u.Eb(2),u.Vc(" ",n.groups.length," ",u.nc(24,12,"lang.groups"),"")}}function wa(t,e){if(1&t&&(u.Zb(0,"mat-list-item",11),u.Ub(1,"mat-icon",12),u.Ub(2,"h4",13),u.Zb(3,"p",13),u.Sc(4),u.Yb(),u.Yb()),2&t){var n=e.$implicit;u.Eb(4),u.Vc(" ",n.firstname," ",n.lastname,"")}}function Oa(t,e){if(1&t&&(u.Zb(0,"mat-option",14),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n.id),u.Eb(1),u.Uc(" ",n.group_desc," ")}}var Ta,Ia,Da=((Ia=function(){function t(e,n,a,i,r,c,o,s,l){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.dialog=i,this.headerService=r,this.appService=c,this.functions=o,this.adminService=s,this.viewContainerRef=l,this.loading=!1,this.config={},this.groups=[],this.groupsForAssign=[],this.displayedColumns=["group_id","group_desc","actions"],this.filterColumns=["group_id","group_desc"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.groups")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/groups").subscribe((function(e){t.groups=e.groups,t.loading=!1,setTimeout((function(){t.adminService.setDataSource("admin_groups",t.groups,t.sort,t.paginator,t.filterColumns)}),0)}),(function(e){t.notify.handleErrors(e)}))}},{key:"preDelete",value:function(t){var e=this;0===t.users.length?confirm(this.translate.instant("lang.reallyWantToDeleteThisGroup"))&&this.deleteGroup(t):(this.groupsForAssign=[],this.groups.forEach((function(n){t.group_id!==n.group_id&&e.groupsForAssign.push(n)})),this.config={panelClass:"maarch-modal",data:{id:t.id,group_desc:t.group_desc,groupsForAssign:this.groupsForAssign,users:t.users}},this.dialogRef=this.dialog.open(Ua,this.config),this.dialogRef.afterClosed().subscribe((function(n){n&&("_NO_REPLACEMENT"===n?e.deleteGroup(t):e.http.put("../rest/groups/"+t.id+"/reassign/"+n,{}).subscribe((function(n){e.deleteGroup(t)}),(function(t){e.notify.error(t.error.errors)}))),e.dialogRef=null})))}},{key:"deleteGroup",value:function(t){var e=this;this.http.delete("../rest/groups/"+t.id).subscribe((function(t){setTimeout((function(){e.groups=t.groups,e.adminService.setDataSource("admin_groups",e.groups,e.sort,e.paginator,e.filterColumns)}),0),e.notify.success(e.translate.instant("lang.groupDeleted"))}),(function(t){e.notify.error(t.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||Ia)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(z.b),u.Tb(p.a),u.Tb(g.a),u.Tb(C.a),u.Tb(It),u.Tb(u.R))},Ia.\u0275cmp=u.Nb({type:Ia,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(ga,!0),u.Oc(ha,!0),u.ad(V.a,!0),u.ad(N.a,!0)),2&t&&(u.Cc(n=u.ic())&&(e.sidenavRight=n.first),u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.paginator=n.first),u.Cc(n=u.ic())&&(e.sort=n.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/groups/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row",2,"margin","0px"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSortDisableClear","","matSort","",3,"dataSource"],["table",""],["matColumnDef","group_id"],["mat-sort-header","",3,"hide-for-mobile",4,"matHeaderCellDef"],[3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","group_desc"],["mat-sort-header","","style","flex:2;",4,"matHeaderCellDef"],["style","flex:2;",4,"matCellDef"],["matColumnDef","actions"],["style","flex:1;",4,"matHeaderCellDef"],["style","justify-content: flex-end;flex:1;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header",""],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],[2,"flex","1"],[2,"justify-content","flex-end","flex","1"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,va,9,6,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,ya,2,0,"div",9),u.Qc(14,ka,25,14,"mat-card",10),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading))},directives:[S.e,S.f,M.a,Y.a,Z.t,Dt.h,Dt.g,Dt.d,r.f,Ut.a,Dt.c,I.k,O.c,T.a,k.c,w.b,o.c,o.t,o.i,V.a,B.n,N.a,B.c,B.i,B.b,B.k,B.m,B.h,N.b,B.a,D.b,Ft.b,B.j,B.l,r.d],pipes:[m.d],encapsulation:2}),Ia),Ua=((Ta=function t(e,n,a){_classCallCheck(this,t),this.http=e,this.data=n,this.dialogRef=a}).\u0275fac=function(t){return new(t||Ta)(u.Tb(f.b),u.Tb(z.a),u.Tb(z.h))},Ta.\u0275cmp=u.Nb({type:Ta,selectors:[["ng-component"]],decls:34,vars:30,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["changeGroupUsersForm","ngForm"],["role","alert",1,"alert-message","alert-message-info"],["style","height:25px;",4,"ngFor","ngForOf"],["id","groups_redirect","name","groups_redirect","required","",3,"title","placeholder","ngModel","ngModelChange"],["value","_NO_REPLACEMENT"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[1,"divider-modal"],["mat-raised-button","","color","primary","type","submit",3,"disabled","click"],[2,"height","25px"],["mat-list-icon","","color","primary",1,"fa","fa-user"],["mat-line",""],[3,"value"]],template:function(t,e){if(1&t&&(u.Zb(0,"div",0),u.Zb(1,"h2",1),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"mat-dialog-content"),u.Zb(5,"form",null,2),u.Zb(7,"div",3),u.Sc(8," Le groupe "),u.Zb(9,"b"),u.Sc(10),u.Yb(),u.Sc(11),u.mc(12,"translate"),u.Zb(13,"b"),u.Sc(14),u.Yb(),u.Sc(15),u.mc(16,"translate"),u.Zb(17,"mat-list"),u.Qc(18,wa,5,2,"mat-list-item",4),u.Yb(),u.Yb(),u.Zb(19,"mat-form-field"),u.Zb(20,"mat-select",5),u.hc("ngModelChange",(function(t){return e.data.group_redirect=t})),u.mc(21,"translate"),u.mc(22,"translate"),u.Zb(23,"mat-option",6),u.Sc(24),u.mc(25,"translate"),u.Yb(),u.Zb(26,"mat-optgroup",7),u.mc(27,"translate"),u.Qc(28,Oa,2,2,"mat-option",8),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Ub(29,"span",9),u.Zb(30,"mat-dialog-actions"),u.Zb(31,"button",10),u.hc("click",(function(){return e.dialogRef.close(e.data.group_redirect)})),u.Sc(32),u.mc(33,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t){var n=u.Dc(6);u.Eb(2),u.Tc(u.nc(3,14,"lang.groupRedirect")),u.Eb(8),u.Tc(e.data.group_desc),u.Eb(1),u.Uc(" ",u.nc(12,16,"lang.isAssociatedTo")," "),u.Eb(3),u.Tc(e.data.users.length),u.Eb(1),u.Uc(" ",u.nc(16,18,"lang.usersAlt"),": "),u.Eb(3),u.sc("ngForOf",e.data.users),u.Eb(2),u.tc("title",u.nc(21,20,"lang.chooseRedirectGroup")),u.tc("placeholder",u.nc(22,22,"lang.chooseRedirectGroup")),u.sc("ngModel",e.data.group_redirect),u.Eb(4),u.Uc("-- ",u.nc(25,24,"lang.noReplacement")," --"),u.Eb(2),u.tc("label",u.nc(27,26,"lang.groups")),u.Eb(2),u.sc("ngForOf",e.data.groupsForAssign),u.Eb(3),u.sc("disabled",!n.form.valid),u.Eb(1),u.Tc(u.nc(33,28,"lang.validate"))}},directives:[z.i,z.f,o.J,o.u,o.v,Dt.a,Z.s,k.c,it.a,o.E,o.t,o.w,I.o,I.n,z.c,D.b,Dt.d,Ut.a,Dt.c,I.k],pipes:[m.d],encapsulation:2}),Ta),Pa=n("5+WD");function Fa(t,e){1&t&&(u.Zb(0,"div",19),u.Ub(1,"mat-spinner",20),u.Yb())}function La(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",21),u.Sc(1),u.mc(2,"translate"),u.Zb(3,"button",22),u.hc("click",(function(){u.Hc(n);var t=u.lc();return t.toggleIndex(!t.indexingInfo.canIndex)})),u.Sc(4),u.mc(5,"translate"),u.Yb(),u.Yb()}2&t&&(u.Eb(1),u.Uc("",u.nc(2,2,"lang.warnIndex")," "),u.Eb(3),u.Tc(u.nc(5,4,"lang.enableIndex")))}function ja(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",23),u.hc("click",(function(){u.Hc(n);var t=u.lc();return t.toggleIndex(!t.indexingInfo.canIndex)})),u.Sc(1),u.mc(2,"translate"),u.Yb()}2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.disableIndex")))}function Ra(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-list-item",24),u.Zb(1,"div"),u.Ub(2,"i",25),u.Yb(),u.Zb(3,"div",26),u.Sc(4),u.Yb(),u.Zb(5,"div"),u.Zb(6,"button",27),u.hc("click",(function(){u.Hc(n);var t=e.index;return u.lc().removeAction(t)})),u.Ub(7,"mat-icon",28),u.Yb(),u.Yb(),u.Ub(8,"mat-divider"),u.Yb()}if(2&t){var a=e.$implicit;u.sc("cdkDragData",a),u.Eb(4),u.Uc(" ",a.label_action,"")}}var Qa,Aa=((Qa=function(){function t(e,n,a,i){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.dialog=i,this.loading=!0,this.resfreshShortcut=new u.o,this.keywordEntities=[],this.actionList=[],this.indexingInfo={canIndex:!1,actions:[],keywords:[],entities:[]},this.keywordEntities=[{id:"ALL_ENTITIES",keyword:"ALL_ENTITIES",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.allEntities")},{id:"ENTITIES_JUST_BELOW",keyword:"ENTITIES_JUST_BELOW",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.immediatelyBelowMyPrimaryEntity")},{id:"ENTITIES_BELOW",keyword:"ENTITIES_BELOW",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.belowAllMyEntities")},{id:"ALL_ENTITIES_BELOW",keyword:"ALL_ENTITIES_BELOW",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.belowMyPrimaryEntity")},{id:"MY_ENTITIES",keyword:"MY_ENTITIES",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.myEntities")},{id:"MY_PRIMARY_ENTITY",keyword:"MY_PRIMARY_ENTITY",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.myPrimaryEntity")},{id:"SAME_LEVEL_ENTITIES",keyword:"SAME_LEVEL_ENTITIES",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.sameLevelMyPrimaryEntity")},{id:"ENTITIES_JUST_UP",keyword:"ENTITIES_JUST_UP",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:this.translate.instant("lang.immediatelySuperiorMyPrimaryEntity")}]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.getIndexingInformations().pipe(Object(wt.tap)((function(e){return t.indexingInfo.canIndex=e.group.canIndex})),Object(wt.tap)((function(e){return t.getActions(e.actions)})),Object(wt.tap)((function(e){return t.getSelectedActions(e.group.indexationParameters.actions)})),Object(l.a)((function(e){return t.getEntities(e)})),Object(l.a)((function(e){return t.getSelectedEntities(e)})),Object(wt.tap)((function(e){return t.initEntitiesTree(e)})),Object(Ct.a)((function(){return t.loading=!1}))).subscribe()}},{key:"initEntitiesTree",value:function(t){var e=this;$("#jstree").jstree({checkbox:{three_state:!1},core:{force_text:!0,themes:{name:"proton",responsive:!0},data:t},plugins:["checkbox","search"]});var n=!1;$("#jstree_search").keyup((function(){n&&clearTimeout(n),n=setTimeout((function(){var t=$("#jstree_search").val();$("#jstree").jstree(!0).search(t)}),250)})),$("#jstree").on("select_node.jstree",(function(t,n){isNaN(n.node.id)?e.addKeyword(n.node.id):e.addEntity(n.node.id)})).on("deselect_node.jstree",(function(t,n){isNaN(n.node.id)?e.removeKeyword(n.node.id):e.removeEntity(n.node.id)})).jstree()}},{key:"getEntities",value:function(t){return this.keywordEntities.forEach((function(e){e.state=t.group.indexationParameters.keywords.indexOf(e.id)>-1?{opened:!0,selected:!0}:{opened:!0,selected:!1}})),t.entities=this.keywordEntities.concat(t.entities),t}},{key:"getSelectedEntities",value:function(t){return this.indexingInfo.entities=_toConsumableArray(t.group.indexationParameters.entities),this.indexingInfo.keywords=_toConsumableArray(t.group.indexationParameters.keywords),t.entities}},{key:"getActions",value:function(t){this.actionList=t}},{key:"getIndexingInformations",value:function(){return this.http.get("../rest/groups/"+this.groupId+"/indexing")}},{key:"getSelectedActions",value:function(t){var e=this,n=-1;t.forEach((function(t){(n=e.actionList.findIndex((function(e){return e.id==t})))>-1&&(e.indexingInfo.actions.push(e.actionList[n]),e.actionList.splice(n,1))}))}},{key:"addEntity",value:function(t){var e=this,n=this.indexingInfo.entities.concat([t]);this.http.put("../rest/groups/"+this.groupId+"/indexing",{entities:n}).pipe(Object(wt.tap)((function(){e.indexingInfo.entities.push(t)})),Object(wt.tap)((function(){e.notify.success(e.translate.instant("lang.entityAdded"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe()}},{key:"removeEntity",value:function(t){var e=this,n=this.indexingInfo.entities.indexOf(t),a=_toConsumableArray(this.indexingInfo.entities);a.splice(n,1),this.http.put("../rest/groups/"+this.groupId+"/indexing",{entities:a}).pipe(Object(wt.tap)((function(){e.indexingInfo.entities.splice(n,1)})),Object(wt.tap)((function(){e.notify.success(e.translate.instant("lang.entityDeleted"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe()}},{key:"addKeyword",value:function(t){var e=this,n=this.indexingInfo.keywords.concat([t]);this.http.put("../rest/groups/"+this.groupId+"/indexing",{keywords:n}).pipe(Object(wt.tap)((function(){e.indexingInfo.keywords.push(t)})),Object(wt.tap)((function(){e.notify.success(e.translate.instant("lang.keywordAdded"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe()}},{key:"removeKeyword",value:function(t){var e=this,n=this.indexingInfo.keywords.indexOf(t),a=_toConsumableArray(this.indexingInfo.keywords);a.splice(n,1),this.http.put("../rest/groups/"+this.groupId+"/indexing",{keywords:a}).pipe(Object(wt.tap)((function(){e.indexingInfo.keywords.splice(n,1)})),Object(wt.tap)((function(){e.notify.success(e.translate.instant("lang.keywordDeleted"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe()}},{key:"addAction",value:function(t){var e=this,n=this.indexingInfo.actions.map((function(t){return t.id})).concat([t].map((function(t){return t.id})));this.http.put("../rest/groups/"+this.groupId+"/indexing",{actions:n}).pipe(Object(wt.tap)((function(){var n=e.actionList.findIndex((function(e){return e.id===t.id})),a=Object.assign({},e.actionList[n]);e.indexingInfo.actions.push(a),e.actionList.splice(n,1)})),Object(wt.tap)((function(){e.notify.success(e.translate.instant("lang.actionAdded"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe()}},{key:"removeAction",value:function(t){var e=this;this.dialogRef=this.dialog.open(W.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete"),msg:this.translate.instant("lang.confirmAction")}}),this.dialogRef.afterClosed().pipe(Object(q.a)((function(t){return"ok"===t})),Object(l.a)((function(){e.dialogRef=null;var n=_toConsumableArray(e.indexingInfo.actions);return n.splice(t,1),n.map((function(t){return t.id}))})),Object(X.a)((function(t){return e.http.put("../rest/groups/"+e.groupId+"/indexing",{actions:t})})),Object(wt.tap)((function(){e.actionList.push(e.indexingInfo.actions[t]),e.indexingInfo.actions.splice(t,1)})),Object(wt.tap)((function(){e.notify.success(e.translate.instant("lang.actionDeleted"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe()}},{key:"toggleIndex",value:function(t){var e=this;this.http.put("../rest/groups/"+this.groupId+"/indexing",{canIndex:t}).pipe(Object(wt.tap)((function(){e.indexingInfo.canIndex=t,e.resfreshShortcut.emit()})),Object(wt.tap)((function(){e.notify.success(e.translate.instant(e.indexingInfo.canIndex?"lang.indexEnabled":"lang.indexDisabled"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe()}},{key:"drop",value:function(t){var e=this;if(t.previousContainer===t.container){Object(Pa.h)(t.container.data,t.previousIndex,t.currentIndex);var n=this.indexingInfo.actions.map((function(t){return t.id}));this.http.put("../rest/groups/"+this.groupId+"/indexing",{actions:n}).pipe(Object(wt.tap)((function(){e.notify.success(e.translate.instant("lang.actionAdded"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe()}}}]),t}()).\u0275fac=function(t){return new(t||Qa)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(z.b))},Qa.\u0275cmp=u.Nb({type:Qa,selectors:[["app-indexing-administration"]],inputs:{groupId:"groupId"},outputs:{resfreshShortcut:"resfreshShortcut"},decls:25,vars:18,consts:[["class","loading",4,"ngIf"],[1,"row",2,"margin","0px"],[1,"col-md-12"],["class","alert-message alert-message-danger","role","alert","style","margin-top: 30px;",4,"ngIf"],["color","warn","mat-raised-button","",3,"click",4,"ngIf"],[1,"col-md-8",2,"margin-top","20px"],[1,"formType"],[1,"formType-title"],[1,"infoActions",3,"innerHTML"],["appearance","outline",3,"labelPlaceholder","datas","targetSearchKey","triggerEvent"],["cdkDropList","","role","list",1,"selectedActionList",3,"cdkDropListData","cdkDropListDropped"],["class","selectedAction","role","listitem","cdkDrag","","cdkDragLockAxis","y",3,"cdkDragData",4,"ngFor","ngForOf"],[1,"col-md-4",2,"margin-top","20px"],[1,"formType","jstreeEntities"],["appearance","outline"],["color","primary","matPrefix","",1,"fa","fa-search"],["matInput","","id","jstree_search","name","jstree_search","type","text",3,"placeholder"],["id","jstree"],["jstree",""],[1,"loading"],[2,"margin","auto"],["role","alert",1,"alert-message","alert-message-danger",2,"margin-top","30px"],["mat-raised-button","",3,"click"],["color","warn","mat-raised-button","",3,"click"],["role","listitem","cdkDrag","","cdkDragLockAxis","y",1,"selectedAction",3,"cdkDragData"],["color","primary","cdkDragHandle","",1,"fas","fa-bars","fa-2x",2,"cursor","move"],[1,"actionLabel"],["mat-icon-button","","color","warn",3,"click"],[1,"fa","fa-trash"]],template:function(t,e){1&t&&(u.Qc(0,Fa,2,0,"div",0),u.Zb(1,"div",1),u.Zb(2,"div",2),u.Qc(3,La,6,6,"div",3),u.Qc(4,ja,3,3,"button",4),u.Yb(),u.Zb(5,"div",5),u.Zb(6,"div",6),u.Zb(7,"div",7),u.Sc(8),u.mc(9,"translate"),u.Yb(),u.Ub(10,"mat-hint",8),u.Zb(11,"plugin-autocomplete",9),u.hc("triggerEvent",(function(t){return e.addAction(t)})),u.Yb(),u.Zb(12,"mat-list",10),u.hc("cdkDropListDropped",(function(t){return e.drop(t)})),u.Qc(13,Ra,9,2,"mat-list-item",11),u.Yb(),u.Yb(),u.Yb(),u.Zb(14,"div",12),u.Zb(15,"div",13),u.Zb(16,"div",7),u.Sc(17),u.mc(18,"translate"),u.Yb(),u.Zb(19,"mat-form-field",14),u.Ub(20,"mat-icon",15),u.Ub(21,"input",16),u.mc(22,"translate"),u.Yb(),u.Ub(23,"div",17,18),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.sc("ngIf",e.loading),u.Eb(3),u.sc("ngIf",!e.indexingInfo.canIndex),u.Eb(1),u.sc("ngIf",e.indexingInfo.canIndex),u.Eb(4),u.Uc(" ",u.nc(9,12,"lang.availableIndexingActions")," "),u.Eb(2),u.sc("innerHTML",e.translate.instant("lang.actionsInfo"),u.Ic),u.Eb(1),u.sc("labelPlaceholder",e.translate.instant("lang.linkNewAction"))("datas",e.actionList)("targetSearchKey","label_action"),u.Eb(1),u.sc("cdkDropListData",e.indexingInfo.actions),u.Eb(1),u.sc("ngForOf",e.indexingInfo.actions),u.Eb(4),u.Uc(" ",u.nc(18,14,"lang.authorizedEntities")," "),u.Eb(4),u.tc("placeholder",u.nc(22,16,"lang.searchEntities")))},directives:[Z.t,k.f,Lt.a,Dt.a,Pa.e,Z.s,k.c,Ut.a,k.i,w.b,O.c,D.b,Dt.d,Pa.a,Pa.b,_.a],pipes:[m.d],styles:[".loading[_ngcontent-%COMP%]{display:flex;height:100%;position:absolute;background:#fff;z-index:2}.loading[_ngcontent-%COMP%], .selectedActionList[_ngcontent-%COMP%]{width:100%}.infoActions[_ngcontent-%COMP%]{font-size:80%}.selectedAction[_ngcontent-%COMP%]{height:70px}.selectedAction[_ngcontent-%COMP%]   .actionLabel[_ngcontent-%COMP%]{padding-left:10px;flex:1}.formType[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:10px;border-radius:4px;border:1px solid #ccc;position:relative;padding:10px}.formType-title[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;max-width:85%;text-overflow:ellipsis;z-index:1;font-size:20px;font-weight:700;background:#fff;position:absolute;top:-18px;left:10px;padding:0;margin:0;color:#135f7f}.alert-message[_ngcontent-%COMP%]{max-width:100%}a[_ngcontent-%COMP%]{cursor:pointer}.jstreeEntities[_ngcontent-%COMP%]   .mat-form-field-appearance-outline[_ngcontent-%COMP%]{font-size:11px}.cdk-drag-preview[_ngcontent-%COMP%]{background:#fff;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-preview[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%], .cdk-drag-preview[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{visibility:hidden}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.selectedAction[_ngcontent-%COMP%]:last-child{border:none}.selectedAction.cdk-drop-list-dragging[_ngcontent-%COMP%]   .selectedAction[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]}),Qa),Ha=n("8N1J"),za=["snav2"],$a=["paginatorBaskets"],Va=["sortBaskets"],Na=["sortUsers"];function Ja(t,e){1&t&&(u.Zb(0,"div",13),u.Ub(1,"mat-spinner",14),u.Yb())}function Ga(t,e){if(1&t){var n=u.ac();u.Zb(0,"input",28),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).group.group_id=t})),u.mc(1,"translate"),u.Yb()}if(2&t){var a=u.lc(2);u.tc("placeholder",u.nc(1,2,"lang.id")),u.sc("ngModel",a.group.group_id)}}function Ba(t,e){if(1&t){var n=u.ac();u.Zb(0,"input",29),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).group.group_id=t})),u.mc(1,"translate"),u.mc(2,"translate"),u.Yb()}if(2&t){var a=u.lc(2);u.tc("placeholder",u.nc(1,3,"lang.id")),u.tc("title",u.nc(2,5,"lang.id")),u.sc("ngModel",a.group.group_id)}}function Wa(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-list-item"),u.Zb(1,"mat-slide-toggle",37),u.hc("change",(function(t){u.Hc(n);var a=e.$implicit;return u.lc(4).toggleService(t,a)})),u.mc(2,"translate"),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit,i=u.lc(4);u.Eb(1),u.tc("name",a.label),u.tc("matTooltip",u.nc(2,4,a.comment)),u.sc("checked",i.group.privileges.indexOf(a.id)>-1),u.Eb(2),u.Uc(" ",u.nc(4,6,a.label),"")}}function qa(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",41),u.hc("click",(function(t){u.Hc(n);var e=u.lc().$implicit,a=u.lc(4);return t.stopPropagation(),a.openUserParams(e.id)})),u.Ub(1,"mat-icon",42),u.Yb()}if(2&t){var a=u.lc().$implicit,i=u.lc(4);u.Jb("active",i.panelMode===a.id),u.sc("title",i.translate.instant("lang.goToAdminParams"))("disabled",-1===i.group.privileges.indexOf(a.id))}}function Xa(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",38),u.Zb(1,"mat-slide-toggle",39),u.hc("ngModelChange",(function(t){return u.Hc(n),e.$implicit.checked=t}))("change",(function(t){u.Hc(n);var a=e.$implicit;return u.lc(4).toggleService(t,a)})),u.mc(2,"translate"),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Qc(5,qa,2,4,"button",40),u.Yb()}if(2&t){var a=e.$implicit;u.Eb(1),u.tc("name",a.label),u.tc("matTooltip",u.nc(2,6,a.comment)),u.sc("ngModel",a.checked)("checked",a.checked),u.Eb(2),u.Uc("",u.nc(4,8,a.label)," "),u.Eb(2),u.sc("ngIf",a.hasParams)}}function Ka(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-list-item"),u.Zb(1,"mat-slide-toggle",37),u.hc("change",(function(t){u.Hc(n);var a=e.$implicit;return u.lc(6).toggleService(t,a)})),u.mc(2,"translate"),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit,i=u.lc(6);u.Eb(1),u.tc("name",a.label),u.tc("matTooltip",u.nc(2,4,a.comment)),u.sc("checked",i.group.privileges.indexOf(a.id)>-1),u.Eb(2),u.Uc("",u.nc(4,6,a.label)," ")}}function ti(t,e){if(1&t&&(u.Xb(0),u.Zb(1,"mat-list"),u.Qc(2,Ka,5,8,"mat-list-item",30),u.mc(3,"filterList"),u.mc(4,"sortBy"),u.Yb(),u.Wb()),2&t){var n=u.lc().$implicit;u.lc();var a=u.Dc(19);u.Eb(2),u.sc("ngForOf",u.pc(3,1,u.oc(4,5,n.services,"label"),a.value,"label"))}}function ei(t,e){if(1&t&&(u.Zb(0,"mat-option",51),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n.id),u.Eb(1),u.Tc(u.nc(2,2,n.label))}}function ni(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-list-item",45),u.Ub(1,"span",46),u.Zb(2,"mat-form-field",47),u.Zb(3,"mat-select",48),u.hc("ngModelChange",(function(t){return u.Hc(n),e.$implicit.current=t}))("selectionChange",(function(t){u.Hc(n);var a=e.$implicit;return u.lc(6).changeDifflistPrivilege(t,a.id)})),u.Zb(4,"mat-option",49),u.Sc(5),u.mc(6,"translate"),u.Yb(),u.Qc(7,ei,3,4,"mat-option",50),u.Yb(),u.Yb(),u.Sc(8,". "),u.Yb()}if(2&t){var a=e.$implicit;u.Eb(1),u.sc("innerHTML",a.label,u.Ic),u.Eb(2),u.sc("ngModel",a.current),u.Eb(2),u.Tc(u.nc(6,4,"lang.noRole")),u.Eb(2),u.sc("ngForOf",a.services)}}function ai(t,e){if(1&t&&(u.Xb(0),u.Qc(1,ni,9,6,"mat-list-item",44),u.Wb()),2&t){var n=u.lc().$implicit;u.Eb(1),u.sc("ngForOf",n.services)}}function ii(t,e){if(1&t&&(u.Zb(0,"mat-option",51),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n.id),u.Eb(1),u.Tc(u.nc(2,2,n.label))}}function ri(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-list-item",45),u.Ub(1,"span",46),u.Zb(2,"mat-form-field",52),u.Zb(3,"mat-select",48),u.hc("ngModelChange",(function(t){return u.Hc(n),e.$implicit.current=t}))("selectionChange",(function(t){return u.Hc(n),u.lc(6).changePersonalDataPrivilege(t)})),u.Zb(4,"mat-option",49),u.Sc(5),u.mc(6,"translate"),u.Yb(),u.Qc(7,ii,3,4,"mat-option",50),u.Yb(),u.Yb(),u.Sc(8,". "),u.Yb()}if(2&t){var a=e.$implicit;u.Eb(1),u.sc("innerHTML",a.label,u.Ic),u.Eb(2),u.sc("ngModel",a.current),u.Eb(2),u.Tc(u.nc(6,4,"lang.notVisible")),u.Eb(2),u.sc("ngForOf",a.services)}}function ci(t,e){if(1&t&&(u.Xb(0),u.Qc(1,ri,9,6,"mat-list-item",44),u.Wb()),2&t){var n=u.lc().$implicit;u.Eb(1),u.sc("ngForOf",n.services)}}var oi=function(){return["diffusionList","confidentialityAndSecurity"]};function si(t,e){if(1&t&&(u.Zb(0,"mat-expansion-panel",43),u.mc(1,"filterList"),u.Zb(2,"mat-expansion-panel-header"),u.Zb(3,"mat-panel-title"),u.Sc(4),u.Yb(),u.Yb(),u.Qc(5,ti,5,8,"ng-container",12),u.Qc(6,ai,2,1,"ng-container",12),u.Qc(7,ci,2,1,"ng-container",12),u.Yb()),2&t){var n=e.$implicit;u.lc();var a=u.Dc(19);u.Jb("emptyExpansionPanel",0==u.pc(1,6,n.services,a.value,"label").length),u.Eb(4),u.Uc(" ",n.label," "),u.Eb(1),u.sc("ngIf",-1===u.yc(10,oi).indexOf(n.id)),u.Eb(1),u.sc("ngIf","diffusionList"===n.id),u.Eb(1),u.sc("ngIf","confidentialityAndSecurity"===n.id)}}function li(t,e){if(1&t&&(u.Zb(0,"mat-tab-group"),u.Zb(1,"mat-tab",16),u.mc(2,"translate"),u.Zb(3,"mat-list"),u.Qc(4,Wa,5,8,"mat-list-item",30),u.mc(5,"sortBy"),u.Yb(),u.Yb(),u.Zb(6,"mat-tab",16),u.mc(7,"translate"),u.Zb(8,"mat-form-field",31),u.Ub(9,"input",32,33),u.mc(11,"translate"),u.Yb(),u.Qc(12,Xa,6,10,"div",34),u.mc(13,"filterList"),u.mc(14,"sortBy"),u.Yb(),u.Zb(15,"mat-tab",16),u.mc(16,"translate"),u.Zb(17,"mat-form-field",31),u.Ub(18,"input",32,35),u.mc(20,"translate"),u.Yb(),u.Qc(21,si,8,11,"mat-expansion-panel",36),u.mc(22,"sortBy"),u.Yb(),u.Yb()),2&t){var n=u.Dc(10),a=u.lc(3);u.Eb(1),u.tc("label",u.nc(2,8,"lang.menus")),u.Eb(3),u.sc("ngForOf",u.oc(5,10,a.privilegeService.getMenus(),"label")),u.Eb(2),u.tc("label",u.nc(7,13,"lang.administrationServices")),u.Eb(3),u.tc("placeholder",u.nc(11,15,"lang.filterBy")),u.Eb(3),u.sc("ngForOf",u.pc(13,17,u.oc(14,21,a.administrationPrivileges,"label"),n.value,"label")),u.Eb(3),u.tc("label",u.nc(16,24,"lang.functionnalities")),u.Eb(3),u.tc("placeholder",u.nc(20,26,"lang.filterBy")),u.Eb(3),u.sc("ngForOf",u.oc(22,28,a.unitPrivileges,"label"))}}function di(t,e){if(1&t&&(u.Zb(0,"mat-tab",16),u.mc(1,"translate"),u.Qc(2,li,23,31,"mat-tab-group",12),u.Yb()),2&t){var n=u.lc(2);u.tc("label",u.nc(1,2,"lang.privileges")),u.Eb(2),u.sc("ngIf",!n.creationMode)}}function bi(t,e){if(1&t){var n=u.ac();u.Zb(0,"app-indexing-administration",54),u.hc("resfreshShortcut",(function(){return u.Hc(n),u.lc(3).resfreshShortcut()})),u.Yb()}if(2&t){var a=u.lc(3);u.sc("groupId",a.group.id)}}function ui(t,e){1&t&&(u.Zb(0,"mat-tab",16),u.mc(1,"translate"),u.Qc(2,bi,1,1,"ng-template",53),u.Yb()),2&t&&u.tc("label",u.nc(1,1,"lang.indexation"))}var mi=function(){return["/rest/autocomplete/users/administration"]};function fi(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",69),u.Zb(1,"plugin-autocomplete",70),u.hc("triggerEvent",(function(t){return u.Hc(n),u.lc(3).linkUser(t)})),u.Yb(),u.Ub(2,"hr"),u.Yb()}if(2&t){var a=u.lc(3);u.Eb(1),u.sc("labelPlaceholder",a.translate.instant("lang.linkUser"))("labelList",a.translate.instant("lang.availableUsers"))("routeDatas",u.yc(4,mi))("targetSearchKey","idToDisplay")}}function pi(t,e){1&t&&(u.Zb(0,"mat-header-cell",71),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.firstname")))}function gi(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.firstname," ")}}function hi(t,e){1&t&&(u.Zb(0,"mat-header-cell",71),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.lastname")))}function vi(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.lastname," ")}}function yi(t,e){1&t&&u.Ub(0,"mat-header-row")}var Ci=function(t,e){return{cursor:t,opacity:e}};function Ei(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-row",72),u.hc("click",(function(){u.Hc(n);var t=e.$implicit;return u.lc(3).goToUserAdmin(t)})),u.mc(1,"translate"),u.Yb()}if(2&t){var a=e.$implicit;u.tc("matTooltip",u.nc(1,3,"lang.view")),u.sc("matTooltipDisabled",!a.allowed)("ngStyle",u.Ac(5,Ci,a.allowed?"pointer":"",a.allowed?"1":"0.6"))}}function Si(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-tab",16),u.mc(1,"translate"),u.Zb(2,"div",55),u.Qc(3,fi,3,5,"div",56),u.Zb(4,"div",57),u.Zb(5,"mat-form-field"),u.Zb(6,"input",58),u.hc("keyup",(function(t){return u.Hc(n),u.lc(2).applyFilter(t.target.value)})),u.mc(7,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(8,"div",57),u.Ub(9,"mat-paginator",59,60),u.Yb(),u.Yb(),u.Zb(11,"mat-table",61,62),u.Xb(13,63),u.Qc(14,pi,3,3,"mat-header-cell",64),u.Qc(15,gi,2,1,"mat-cell",65),u.Wb(),u.Xb(16,66),u.Qc(17,hi,3,3,"mat-header-cell",64),u.Qc(18,vi,2,1,"mat-cell",65),u.Wb(),u.Qc(19,yi,1,0,"mat-header-row",67),u.Qc(20,Ei,2,8,"mat-row",68),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.tc("label",u.nc(1,9,"lang.relatedUsers")),u.Eb(3),u.sc("ngIf",a.group.canAdminUsers),u.Eb(3),u.tc("placeholder",u.nc(7,11,"lang.filterBy")),u.Eb(3),u.sc("length",100)("hidePageSize",!0)("pageSize",10),u.Eb(2),u.sc("dataSource",a.usersDataSource),u.Eb(8),u.sc("matHeaderRowDef",a.usersDisplayedColumns),u.Eb(1),u.sc("matRowDefColumns",a.usersDisplayedColumns)}}function Mi(t,e){1&t&&(u.Zb(0,"mat-header-cell",71),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.label")))}function xi(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.basket_name," ")}}function Yi(t,e){1&t&&(u.Zb(0,"mat-header-cell",71),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc("",u.nc(2,1,"lang.description")," "))}function Zi(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.basket_desc," ")}}function _i(t,e){1&t&&u.Ub(0,"mat-header-row")}function ki(t,e){1&t&&(u.Ub(0,"mat-row",79),u.mc(1,"translate")),2&t&&(u.uc("routerLink","/administration/baskets/",e.$implicit.basket_id,""),u.tc("matTooltip",u.nc(1,2,"lang.view")))}function wi(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-tab",16),u.mc(1,"translate"),u.Zb(2,"div",55),u.Zb(3,"div",57),u.Zb(4,"mat-form-field"),u.Zb(5,"input",58),u.hc("keyup",(function(t){return u.Hc(n),u.lc(2).applyBasketsFilter(t.target.value)})),u.mc(6,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(7,"div",57),u.Ub(8,"mat-paginator",59,73),u.Yb(),u.Yb(),u.Zb(10,"mat-table",74,75),u.Xb(12,76),u.Qc(13,Mi,3,3,"mat-header-cell",64),u.Qc(14,xi,2,1,"mat-cell",65),u.Wb(),u.Xb(15,77),u.Qc(16,Yi,3,3,"mat-header-cell",64),u.Qc(17,Zi,2,1,"mat-cell",65),u.Wb(),u.Qc(18,_i,1,0,"mat-header-row",67),u.Qc(19,ki,2,4,"mat-row",78),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.tc("label",u.nc(1,8,"lang.relatedBaskets")),u.Eb(5),u.tc("placeholder",u.nc(6,10,"lang.filterBy")),u.Eb(3),u.sc("length",100)("hidePageSize",!0)("pageSize",10),u.Eb(2),u.sc("dataSource",a.basketsDataSource),u.Eb(8),u.sc("matHeaderRowDef",a.basketsDisplayedColumns),u.Eb(1),u.sc("matRowDefColumns",a.basketsDisplayedColumns)}}function Oi(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-card",15),u.Zb(1,"mat-tab-group"),u.Zb(2,"mat-tab",16),u.mc(3,"translate"),u.Zb(4,"form",17,18),u.hc("ngSubmit",(function(){return u.Hc(n),u.lc().onSubmit()})),u.Zb(6,"mat-form-field"),u.Qc(7,Ga,2,4,"input",19),u.Qc(8,Ba,3,7,"input",20),u.Yb(),u.Zb(9,"mat-form-field"),u.Zb(10,"input",21),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().group.group_desc=t})),u.mc(11,"translate"),u.mc(12,"translate"),u.Yb(),u.Yb(),u.Zb(13,"mat-form-field"),u.Zb(14,"input",22),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().group.security.maarch_comment=t})),u.mc(15,"translate"),u.mc(16,"translate"),u.Yb(),u.Yb(),u.Zb(17,"mat-form-field"),u.Zb(18,"textarea",23),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().group.security.where_clause=t})),u.mc(19,"translate"),u.mc(20,"translate"),u.Yb(),u.Zb(21,"mat-icon",24),u.hc("click",(function(){u.Hc(n);var t=u.lc(),e=u.Dc(14);return t.panelMode="keywordInfos",e.toggle()})),u.mc(22,"translate"),u.Yb(),u.Yb(),u.Zb(23,"div",25),u.Zb(24,"button",26),u.Sc(25),u.mc(26,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Qc(27,di,3,4,"mat-tab",27),u.Qc(28,ui,3,3,"mat-tab",27),u.Qc(29,Si,21,13,"mat-tab",27),u.Qc(30,wi,20,12,"mat-tab",27),u.Yb(),u.Yb()}if(2&t){var a=u.Dc(5),i=u.lc();u.Eb(2),u.tc("label",u.nc(3,19,"lang.informations")),u.Eb(5),u.sc("ngIf",i.creationMode),u.Eb(1),u.sc("ngIf",!i.creationMode),u.Eb(2),u.tc("title",u.nc(11,21,"lang.label")),u.tc("placeholder",u.nc(12,23,"lang.label")),u.sc("ngModel",i.group.group_desc),u.Eb(4),u.tc("title",u.nc(15,25,"lang.description")),u.tc("placeholder",u.nc(16,27,"lang.description")),u.sc("ngModel",i.group.security.maarch_comment),u.Eb(4),u.tc("title",u.nc(19,29,"lang.clauseGroup")),u.tc("placeholder",u.nc(20,31,"lang.clauseGroup")),u.sc("ngModel",i.group.security.where_clause),u.Eb(3),u.tc("matTooltip",u.nc(22,33,"lang.keywordHelper")),u.Eb(3),u.sc("disabled",!a.form.valid),u.Eb(1),u.Tc(u.nc(26,35,"lang.save")),u.Eb(2),u.sc("ngIf",!i.creationMode),u.Eb(1),u.sc("ngIf",!i.creationMode),u.Eb(1),u.sc("ngIf",!i.creationMode),u.Eb(1),u.sc("ngIf",!i.creationMode)}}function Ti(t,e){1&t&&(u.Xb(0),u.Zb(1,"mat-nav-list"),u.Zb(2,"h3",80),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Yb(),u.Zb(5,"mat-list",81),u.Zb(6,"p",82),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Zb(9,"div",83),u.Zb(10,"b"),u.Sc(11,"DESTINATION = @my_primary_entity or DESTINATION in (@subentities[@my_primary_entity])"),u.Yb(),u.Yb(),u.Zb(12,"h4",84),u.Sc(13,"@user :"),u.Yb(),u.Zb(14,"p",85),u.Sc(15),u.mc(16,"translate"),u.Yb(),u.Zb(17,"h4",84),u.Sc(18,"@user_id :"),u.Yb(),u.Zb(19,"p",85),u.Sc(20),u.mc(21,"translate"),u.Yb(),u.Zb(22,"h4",84),u.Sc(23,"@email :"),u.Yb(),u.Zb(24,"p",85),u.Sc(25),u.mc(26,"translate"),u.Yb(),u.Zb(27,"h4",84),u.Sc(28,"@my_entities :"),u.Yb(),u.Zb(29,"p",85),u.Sc(30),u.mc(31,"translate"),u.Yb(),u.Zb(32,"h4",84),u.Sc(33,"@my_entities_id :"),u.Yb(),u.Zb(34,"p",85),u.Sc(35),u.mc(36,"translate"),u.Yb(),u.Zb(37,"h4",84),u.Sc(38,"@my_primary_entity :"),u.Yb(),u.Zb(39,"p",85),u.Sc(40),u.mc(41,"translate"),u.Yb(),u.Zb(42,"h4",84),u.Sc(43,"@my_primary_entity_id :"),u.Yb(),u.Zb(44,"p",85),u.Sc(45),u.mc(46,"translate"),u.Yb(),u.Zb(47,"h4",84),u.Sc(48,"@subentities[('entity_1',...,'entity_n')] : "),u.Yb(),u.Zb(49,"p",85),u.Sc(50),u.mc(51,"translate"),u.Yb(),u.Zb(52,"h4",84),u.Sc(53,"@parent_entity['entity_id'] :"),u.Yb(),u.Zb(54,"p",85),u.Sc(55),u.mc(56,"translate"),u.Yb(),u.Zb(57,"h4",84),u.Sc(58,"@sisters_entities['entity_id'] :"),u.Yb(),u.Zb(59,"p",85),u.Sc(60),u.mc(61,"translate"),u.Yb(),u.Zb(62,"h4",84),u.Sc(63,"@entity_type['type'] :"),u.Yb(),u.Zb(64,"p",85),u.Sc(65),u.mc(66,"translate"),u.Yb(),u.Zb(67,"h4",84),u.Sc(68,"@all_entities :"),u.Yb(),u.Zb(69,"p",85),u.Sc(70),u.mc(71,"translate"),u.Yb(),u.Zb(72,"h4",84),u.Sc(73,"@immediate_children['entity_1',..., 'entity_id'] : "),u.Yb(),u.Zb(74,"p",85),u.Sc(75),u.mc(76,"translate"),u.Yb(),u.Yb(),u.Wb()),2&t&&(u.Eb(3),u.Tc(u.nc(4,15,"lang.keywordHelp")),u.Eb(4),u.Tc(u.nc(8,17,"lang.keywordHelpDesc_11")),u.Eb(8),u.Tc(u.nc(16,19,"lang.keywordHelpDesc_1")),u.Eb(5),u.Tc(u.nc(21,21,"lang.keywordHelpDesc_12")),u.Eb(5),u.Tc(u.nc(26,23,"lang.keywordHelpDesc_2")),u.Eb(5),u.Tc(u.nc(31,25,"lang.keywordHelpDesc_3")),u.Eb(5),u.Tc(u.nc(36,27,"lang.keywordHelpDesc_13")),u.Eb(5),u.Tc(u.nc(41,29,"lang.keywordHelpDesc_4")),u.Eb(5),u.Tc(u.nc(46,31,"lang.keywordHelpDesc_14")),u.Eb(5),u.Tc(u.nc(51,33,"lang.keywordHelpDesc_5")),u.Eb(5),u.Tc(u.nc(56,35,"lang.keywordHelpDesc_6")),u.Eb(5),u.Tc(u.nc(61,37,"lang.keywordHelpDesc_7")),u.Eb(5),u.Tc(u.nc(66,39,"lang.keywordHelpDesc_8")),u.Eb(5),u.Tc(u.nc(71,41,"lang.keywordHelpDesc_9")),u.Eb(5),u.Tc(u.nc(76,43,"lang.keywordHelpDesc_10")))}function Ii(t,e){if(1&t&&(u.Zb(0,"mat-list-option",90),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("selected",n.checked)("value",n.id),u.Eb(1),u.Uc(" ",n.label," ")}}function Di(t,e){if(1&t){var n=u.ac();u.Xb(0),u.Zb(1,"mat-nav-list"),u.Zb(2,"h3",80),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Yb(),u.Zb(5,"mat-list",81),u.Zb(6,"p",86),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Zb(9,"mat-selection-list",87,88),u.hc("selectionChange",(function(){u.Hc(n);var t=u.Dc(10);return u.lc().updatePrivilegeParams(t.selectedOptions.selected)})),u.Qc(11,Ii,2,3,"mat-list-option",89),u.Yb(),u.Yb(),u.Wb()}if(2&t){var a=u.lc();u.Eb(3),u.Tc(u.nc(4,3,"lang.adminParamsUsers")),u.Eb(4),u.Uc(" ",u.nc(8,5,"lang.chooseAllowedGroups")," : "),u.Eb(4),u.sc("ngForOf",a.authorizedGroupsUserParams)}}var Ui,Pi=((Ui=function(){function t(e,n,a,i,r,c,o,s,l){_classCallCheck(this,t),this.translate=e,this.http=n,this.route=a,this.router=i,this.notify=r,this.headerService=c,this.appService=o,this.privilegeService=s,this.dialog=l,this.loading=!1,this.paramsLoading=!1,this.group={security:{}},this.menus={},this.usersDisplayedColumns=["firstname","lastname"],this.basketsDisplayedColumns=["basket_name","basket_desc"],this.unitPrivileges=[],this.administrationPrivileges=[],this.authorizedGroupsUserParams=[],this.panelMode="keywordInfos"}return _createClass(t,[{key:"applyFilter",value:function(t){t=(t=t.trim()).toLowerCase(),this.usersDataSource.filter=t}},{key:"applyBasketsFilter",value:function(t){t=(t=t.trim()).toLowerCase(),this.basketsDataSource.filter=t}},{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.route.params.subscribe((function(e){void 0===e.id?(t.headerService.setHeader(t.translate.instant("lang.groupCreation")),t.creationMode=!0,t.loading=!1):(t.creationMode=!1,t.http.get("../rest/groups/"+e.id+"/details").subscribe((function(e){t.group=e.group,t.administrationPrivileges=t.privilegeService.getAdministrations(),t.administrationPrivileges=t.administrationPrivileges.map((function(e){return Object.assign(Object.assign({},e),{checked:t.group.privileges.indexOf(e.id)>-1})})),t.privilegeService.getUnitsPrivileges().forEach((function(e){var n=t.privilegeService.getPrivilegesByUnit(e);if("diffusionList"===e)n=[{id:"indexing_diffList",label:t.translate.instant("lang.diffListPrivilegeMsgIndexing"),current:void 0!==t.group.privileges.filter((function(t){return["update_diffusion_indexing","update_diffusion_except_recipient_indexing"].indexOf(t)>-1}))[0]?t.group.privileges.filter((function(t){return["update_diffusion_indexing","update_diffusion_except_recipient_indexing"].indexOf(t)>-1}))[0]:"",services:t.privilegeService.getPrivileges(["update_diffusion_indexing","update_diffusion_except_recipient_indexing"])},{id:"process_diffList",label:t.translate.instant("lang.diffListPrivilegeMsgProcess"),current:void 0!==t.group.privileges.filter((function(t){return["update_diffusion_process","update_diffusion_except_recipient_process"].indexOf(t)>-1}))[0]?t.group.privileges.filter((function(t){return["update_diffusion_process","update_diffusion_except_recipient_process"].indexOf(t)>-1}))[0]:"",services:t.privilegeService.getPrivileges(["update_diffusion_process","update_diffusion_except_recipient_process"])},{id:"details_diffList",label:t.translate.instant("lang.diffListPrivilegeMsgDetails"),current:void 0!==t.group.privileges.filter((function(t){return["update_diffusion_details","update_diffusion_except_recipient_details"].indexOf(t)>-1}))[0]?t.group.privileges.filter((function(t){return["update_diffusion_details","update_diffusion_except_recipient_details"].indexOf(t)>-1}))[0]:"",services:t.privilegeService.getPrivileges(["update_diffusion_details","update_diffusion_except_recipient_details"])}];else if("confidentialityAndSecurity"===e){var a="";t.group.privileges.filter((function(t){return"manage_personal_data"===t}))[0]?a="manage_personal_data":t.group.privileges.filter((function(t){return"view_personal_data"===t}))[0]&&(a="view_personal_data"),n=[{id:"confidentialityAndSecurity_personal_data",label:t.translate.instant("lang.personalDataMsg"),current:a,services:t.privilegeService.getPrivileges(["view_personal_data","manage_personal_data"])}]}t.unitPrivileges.push({id:e,label:t.translate.instant("lang."+e),services:n})})),t.headerService.setHeader(t.translate.instant("lang.groupModification"),t.group.group_desc),t.loading=!1,setTimeout((function(){t.usersDataSource=new B.o(t.group.users),t.usersDataSource.paginator=t.paginator,t.usersDataSource.sort=t.sortUsers,t.basketsDataSource=new B.o(t.group.baskets),t.basketsDataSource.paginator=t.paginatorBaskets,t.basketsDataSource.sort=t.sortBaskets}),0)}),(function(e){t.notify.handleErrors(e)})))}))}},{key:"changeDifflistPrivilege",value:function(t,e){"indexing_diffList"===e?"update_diffusion_indexing"===t.value?this.manageServices(["update_diffusion_indexing","update_diffusion_except_recipient_indexing"]):"update_diffusion_except_recipient_indexing"===t.value?this.manageServices(["update_diffusion_except_recipient_indexing","update_diffusion_indexing"]):this.manageServices(["update_diffusion_indexing","update_diffusion_except_recipient_indexing"],"deleteAll"):"process_diffList"===e?"update_diffusion_process"===t.value?this.manageServices(["update_diffusion_process","update_diffusion_except_recipient_process"]):"update_diffusion_except_recipient_process"===t.value?this.manageServices(["update_diffusion_except_recipient_process","update_diffusion_process"]):this.manageServices(["update_diffusion_process","update_diffusion_except_recipient_process"],"deleteAll"):"update_diffusion_details"===t.value?this.manageServices(["update_diffusion_details","update_diffusion_except_recipient_details"]):"update_diffusion_except_recipient_details"===t.value?this.manageServices(["update_diffusion_except_recipient_details","update_diffusion_details"]):this.manageServices(["update_diffusion_details","update_diffusion_except_recipient_details"],"deleteAll")}},{key:"manageServices",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"deleteAll"!==n?this.http.post("../rest/groups/".concat(this.group.id,"/privileges/").concat(t[0]),{}).pipe(Object(d.a)((function(){e.group.privileges.push(t[0])})),Object(X.a)((function(){return e.http.delete("../rest/groups/".concat(e.group.id,"/privileges/").concat(t[1]))})),Object(d.a)((function(){e.group.privileges.splice(e.group.privileges.indexOf(t[1]),1),e.headerService.resfreshCurrentUser(),e.notify.success(e.translate.instant("lang.groupServicesUpdated"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe():this.http.delete("../rest/groups/".concat(this.group.id,"/privileges/").concat(t[0])).pipe(Object(d.a)((function(){e.group.privileges.splice(e.group.privileges.indexOf(t[0]),1)})),Object(X.a)((function(){return e.http.delete("../rest/groups/".concat(e.group.id,"/privileges/").concat(t[1]))})),Object(d.a)((function(){e.group.privileges.splice(e.group.privileges.indexOf(t[1]),1),e.headerService.resfreshCurrentUser(),e.notify.success(e.translate.instant("lang.groupServicesUpdated"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe()}},{key:"changePersonalDataPrivilege",value:function(t){var e=this;"view_personal_data"===t.value?this.manageServices(["view_personal_data","manage_personal_data"]):"manage_personal_data"===t.value?this.http.post("../rest/groups/".concat(this.group.id,"/privileges/view_personal_data"),{}).pipe(Object(d.a)((function(){e.group.privileges.push("view_personal_data")})),Object(X.a)((function(){return e.http.post("../rest/groups/".concat(e.group.id,"/privileges/manage_personal_data"),{})})),Object(d.a)((function(){e.group.privileges.splice(e.group.privileges.indexOf("manage_personal_data"),1),e.headerService.resfreshCurrentUser(),e.notify.success(e.translate.instant("lang.groupServicesUpdated"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe():this.manageServices(["view_personal_data","manage_personal_data"],"deleteAll")}},{key:"resfreshShortcut",value:function(){return Object(yt.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.headerService.resfreshCurrentUser();case 2:this.privilegeService.resfreshUserShortcuts();case 3:case"end":return t.stop()}}),t,this)})))}},{key:"getCurrentPrivListDiff",value:function(t){return this.group.privileges.indexOf(t)>-1}},{key:"onSubmit",value:function(){var t=this;this.creationMode?this.http.post("../rest/groups",this.group).subscribe((function(e){t.notify.success(t.translate.instant("lang.groupAdded")),t.router.navigate(["/administration/groups/"+e.group])}),(function(e){t.notify.error(e.error.errors)})):this.http.put("../rest/groups/"+this.group.id,{description:this.group.group_desc,security:this.group.security}).subscribe((function(){t.notify.success(t.translate.instant("lang.groupUpdated"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"toggleService",value:function(t,e){var n=this;t.checked?"admin_groups"===e.id?this.dialog.open(W.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.confirmAction"),msg:this.translate.instant("lang.enableGroupMsg")}}).afterClosed().pipe(Object(d.a)((function(t){"ok"!==t&&(e.checked=!1)})),Object(q.a)((function(t){return"ok"===t})),Object(d.a)((function(){n.addService(e)})),Object(b.a)((function(t){return n.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe():this.addService(e):(this.sidenavRight.close(),this.removeService(e))}},{key:"addService",value:function(t){var e=this;this.http.post("../rest/groups/".concat(this.group.id,"/privileges/").concat(t.id),{}).pipe(Object(d.a)((function(){e.group.privileges.push(t.id),e.headerService.resfreshCurrentUser(),e.notify.success(e.translate.instant("lang.groupServicesUpdated"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe()}},{key:"removeService",value:function(t){var e=this;this.http.delete("../rest/groups/".concat(this.group.id,"/privileges/").concat(t.id)).pipe(Object(d.a)((function(){e.group.privileges.splice(e.group.privileges.indexOf(t.id),1),e.headerService.resfreshCurrentUser(),e.notify.success(e.translate.instant("lang.groupServicesUpdated"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe()}},{key:"linkUser",value:function(t){var e=this;this.http.post("../rest/users/"+t.id+"/groups",{groupId:this.group.group_id,role:this.group.role}).subscribe((function(){var n=t.idToDisplay.split(" ");e.group.users.push({id:t.id,user_id:t.otherInfo,firstname:n[0],lastname:n[1],allowed:!0}),e.usersDataSource=new B.o(e.group.users),e.usersDataSource.paginator=e.paginator,e.usersDataSource.sort=e.sortUsers,e.notify.success(e.translate.instant("lang.userAdded"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"openUserParams",value:function(t){var e=this;this.sidenavRight.toggle(),this.sidenavRight.opened?(this.panelMode=t,this.paramsLoading=!0,this.http.get("../rest/groups").pipe(Object(l.a)((function(t){return t.groups=t.groups.map((function(t){return{id:t.id,label:t.group_desc}})),t})),Object(d.a)((function(t){e.authorizedGroupsUserParams=t.groups})),Object(X.a)((function(){return e.http.get("../rest/groups/".concat(e.group.id,"/privileges/").concat(e.panelMode,"/parameters?parameter=groups"))})),Object(d.a)((function(t){var n=t;e.authorizedGroupsUserParams.forEach((function(t){t.checked=n.indexOf(t.id)>-1}))})),Object(Ct.a)((function(){return e.paramsLoading=!1})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe()):this.panelMode=""}},{key:"updatePrivilegeParams",value:function(t){var e=this,n={};"admin_users"===this.panelMode&&(n={groups:t.map((function(t){return t.value}))}),this.http.put("../rest/groups/".concat(this.group.id,"/privileges/").concat(this.panelMode,"/parameters"),{parameters:n}).pipe(Object(d.a)((function(){e.notify.success(e.translate.instant("lang.parameterUpdated"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe()}},{key:"goToUserAdmin",value:function(t){t.allowed&&this.router.navigate(["/administration/users/"+t.id])}}]),t}()).\u0275fac=function(t){return new(t||Ui)(u.Tb(m.e),u.Tb(f.b),u.Tb(r.a),u.Tb(r.c),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a),u.Tb(h.a),u.Tb(z.b))},Ui.\u0275cmp=u.Nb({type:Ui,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(za,!0),u.ad($a,!0),u.Oc(Va,!0),u.ad(V.a,!0),u.Oc(Na,!0)),2&t&&(u.Cc(n=u.ic())&&(e.sidenavRight=n.first),u.Cc(n=u.ic())&&(e.paginatorBaskets=n.first),u.Cc(n=u.ic())&&(e.sortBaskets=n.first),u.Cc(n=u.ic())&&(e.paginator=n.first),u.Cc(n=u.ic())&&(e.sortUsers=n.first))},decls:17,vars:13,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",3,"mode","fixedInViewport","opened"],["snav2",""],[4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[3,"label"],[1,"form-horizontal",3,"ngSubmit"],["groupForm","ngForm"],["matInput","","name","identifier","pattern","^[\\w.-]*$","maxlength","32","required","",3,"placeholder","ngModel","ngModelChange",4,"ngIf"],["matInput","","name","identifier","disabled","",3,"placeholder","title","ngModel","ngModelChange",4,"ngIf"],["matInput","","name","description","maxlength","255","required","",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","name","comment",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","name","clause","required","","matTextareaAutosize","","matAutosizeMinRows","1","matAutosizeMaxRows","5",3,"title","placeholder","ngModel","ngModelChange"],["color","primary","matSuffix","",1,"fa","fa-info-circle",2,"cursor","pointer",3,"matTooltip","click"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary",3,"disabled"],[3,"label",4,"ngIf"],["matInput","","name","identifier","pattern","^[\\w.-]*$","maxlength","32","required","",3,"placeholder","ngModel","ngModelChange"],["matInput","","name","identifier","disabled","",3,"placeholder","title","ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["floatLabel","never","appearance","outline",1,"basketsFilter",2,"padding-left","20px","padding-right","20px","font-size","11px"],["matInput","",3,"placeholder"],["listFilterAdmin",""],["class","col-md-3","style","padding:10px;",4,"ngFor","ngForOf"],["listFilter",""],["expanded","",3,"emptyExpansionPanel",4,"ngFor","ngForOf"],["color","primary",3,"name","checked","matTooltip","change"],[1,"col-md-3",2,"padding","10px"],["color","primary",3,"name","ngModel","checked","matTooltip","ngModelChange","change"],["mat-icon-button","","color","primary",3,"active","title","disabled","click",4,"ngIf"],["mat-icon-button","","color","primary",3,"title","disabled","click"],[1,"fa","fa-cogs"],["expanded",""],["color","primary","style","font-size: 16px;",4,"ngFor","ngForOf"],["color","primary",2,"font-size","16px"],[3,"innerHTML"],[2,"width","250px !important","padding-left","10px","padding-right","10px"],[3,"ngModel","ngModelChange","selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[2,"width","300px !important","padding-left","10px","padding-right","10px"],["matTabContent",""],[3,"groupId","resfreshShortcut"],[1,"row",2,"margin","0px"],["class","col-md-12","style","padding:5px;",4,"ngIf"],[1,"col-md-6","col-xs-6"],["matInput","",3,"placeholder","keyup"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortActive","lastname","matSortDirection","asc",3,"dataSource"],["sortUsers","matSort"],["matColumnDef","firstname"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","lastname"],[4,"matHeaderRowDef"],[3,"matTooltip","matTooltipDisabled","ngStyle","click",4,"matRowDef","matRowDefColumns"],[1,"col-md-12",2,"padding","5px"],[3,"labelPlaceholder","labelList","routeDatas","targetSearchKey","triggerEvent"],["mat-sort-header",""],[3,"matTooltip","matTooltipDisabled","ngStyle","click"],["paginatorBaskets",""],["matSort","","matSortActive","basket_name","matSortDirection","asc",3,"dataSource"],["sortBaskets","matSort"],["matColumnDef","basket_name"],["matColumnDef","basket_desc"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[2,"cursor","pointer",3,"routerLink","matTooltip"],["mat-subheader",""],["role","list",2,"width","400px","padding","5px"],[2,"font-size","10px"],[2,"border","1px black solid","padding","3px","font-size","10px"],["mat-line","",2,"font-weight","bold","font-size","10px"],["mat-line","",2,"font-size","10px"],["color","primary"],[3,"selectionChange"],["paramsList",""],["color","primary","style","font-size: 13px;","checkboxPosition","before",3,"selected","value",4,"ngFor","ngForOf"],["color","primary","checkboxPosition","before",2,"font-size","13px",3,"selected","value"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Zb(1,"mat-sidenav-content"),u.Zb(2,"div",1),u.Zb(3,"div",2),u.Zb(4,"div",3),u.Ub(5,"header-left"),u.Yb(),u.Zb(6,"div",4),u.Ub(7,"header-right"),u.Yb(),u.Yb(),u.Ub(8,"div",5),u.Yb(),u.Zb(9,"div",6),u.Zb(10,"div",7),u.Qc(11,Ja,2,0,"div",8),u.Qc(12,Oi,31,37,"mat-card",9),u.Yb(),u.Yb(),u.Yb(),u.Zb(13,"mat-sidenav",10,11),u.Qc(15,Ti,77,45,"ng-container",12),u.Qc(16,Di,12,7,"ng-container",12),u.Yb(),u.Yb()),2&t&&(u.Eb(3),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading),u.Eb(1),u.sc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",(e.appService.getViewMode(),!1)),u.Eb(2),u.sc("ngIf","keywordInfos"===e.panelMode),u.Eb(1),u.sc("ngIf","admin_users"===e.panelMode))},directives:[S.e,S.f,M.a,Y.a,Z.t,S.d,O.c,T.a,Re.c,Re.a,o.J,o.u,o.v,k.c,w.b,o.c,o.o,o.E,o.t,o.w,w.d,Ut.a,k.j,Ft.b,D.b,o.A,Dt.a,Z.s,Dt.d,nt.a,Qe.c,Qe.g,Qe.h,it.a,I.o,Re.b,Aa,V.a,B.n,N.a,B.c,B.i,B.b,B.k,B.m,Lt.a,B.h,N.b,B.a,B.j,B.l,Z.w,r.d,Dt.h,Dt.g,I.k,Dt.i,Dt.f],pipes:[m.d,U.a,Ha.a],styles:["textarea.mat-input-element[_ngcontent-%COMP%]{padding:0;margin:0}.active[_ngcontent-%COMP%]{color:#f99830}.emptyExpansionPanel[_ngcontent-%COMP%]{height:0}"]}),Ui),Fi=["snav2"],Li=["adminMenuTemplate"];function ji(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-nav-list"),u.Zb(1,"h3",16),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"a",17),u.Ub(5,"mat-icon",18),u.Zb(6,"p",19),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Yb(),u.Zb(9,"a",20),u.hc("click",(function(){return u.Hc(n),u.lc(),u.Dc(16).toggle()})),u.Ub(10,"mat-icon",21),u.Zb(11,"p",19),u.Sc(12),u.mc(13,"translate"),u.Yb(),u.Yb(),u.Yb()}2&t&&(u.Eb(2),u.Tc(u.nc(3,3,"lang.actions")),u.Eb(5),u.Uc(" ",u.nc(8,5,"lang.add")," "),u.Eb(5),u.Uc(" ",u.nc(13,7,"lang.basketsOrder")," "))}function Ri(t,e){1&t&&(u.Zb(0,"div",22),u.Ub(1,"mat-spinner",23),u.Yb())}function Qi(t,e){if(1&t&&(u.Zb(0,"mat-header-cell",45),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=u.lc(2);u.Jb("hide-for-mobile",n.appService.getViewMode()),u.Eb(1),u.Tc(u.nc(2,3,"lang.id"))}}function Ai(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.Jb("hide-for-mobile",a.appService.getViewMode()),u.Eb(1),u.Uc(" ",n.basket_id," ")}}function Hi(t,e){1&t&&(u.Zb(0,"mat-header-cell",45),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.label")))}function zi(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.basket_name," ")}}function $i(t,e){if(1&t&&(u.Zb(0,"mat-header-cell",45),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=u.lc(2);u.Jb("hide-for-mobile",n.appService.getViewMode()),u.Eb(1),u.Uc("",u.nc(2,3,"lang.description")," ")}}function Vi(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.Jb("hide-for-mobile",a.appService.getViewMode()),u.Eb(1),u.Uc(" ",n.basket_desc," ")}}function Ni(t,e){1&t&&u.Ub(0,"mat-header-cell")}function Ji(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-cell",46),u.Zb(1,"button",47),u.hc("click",(function(t){u.Hc(n);var a=e.$implicit,i=u.lc(2);return t.stopPropagation(),i.delete(a)})),u.mc(2,"translate"),u.Ub(3,"mat-icon",48),u.Yb(),u.Yb()}2&t&&(u.Eb(1),u.tc("matTooltip",u.nc(2,1,"lang.delete")))}function Gi(t,e){1&t&&u.Ub(0,"mat-header-row")}function Bi(t,e){1&t&&(u.Ub(0,"mat-row",49),u.mc(1,"translate")),2&t&&(u.uc("routerLink","/administration/baskets/",e.$implicit.basket_id,""),u.tc("matTooltip",u.nc(1,2,"lang.view")))}function Wi(t,e){if(1&t&&(u.Zb(0,"mat-card",24),u.Zb(1,"div",25),u.Zb(2,"div",26),u.Zb(3,"mat-form-field"),u.Ub(4,"input",27),u.mc(5,"translate"),u.Yb(),u.Yb(),u.Zb(6,"div",26),u.Ub(7,"mat-paginator",28,29),u.Yb(),u.Yb(),u.Zb(9,"mat-table",30,31),u.Xb(11,32),u.Qc(12,Qi,3,5,"mat-header-cell",33),u.Qc(13,Ai,2,3,"mat-cell",34),u.Wb(),u.Xb(14,35),u.Qc(15,Hi,3,3,"mat-header-cell",36),u.Qc(16,zi,2,1,"mat-cell",37),u.Wb(),u.Xb(17,38),u.Qc(18,$i,3,5,"mat-header-cell",33),u.Qc(19,Vi,2,3,"mat-cell",34),u.Wb(),u.Xb(20,39),u.Qc(21,Ni,1,0,"mat-header-cell",40),u.Qc(22,Ji,4,3,"mat-cell",41),u.Wb(),u.Qc(23,Gi,1,0,"mat-header-row",42),u.Qc(24,Bi,2,4,"mat-row",43),u.Yb(),u.Zb(25,"div",44),u.Sc(26),u.mc(27,"translate"),u.Yb(),u.Yb()),2&t){var n=u.lc();u.Eb(4),u.tc("placeholder",u.nc(5,10,"lang.filterBy")),u.sc("formControl",n.adminService.getFilterField()),u.Eb(3),u.sc("length",100)("hidePageSize",!0)("pageSize",10),u.Eb(2),u.sc("dataSource",n.adminService.getDataSource()),u.Eb(14),u.sc("matHeaderRowDef",n.displayedColumns),u.Eb(1),u.sc("matRowDefColumns",n.displayedColumns),u.Eb(2),u.Vc(" ",n.baskets.length," ",u.nc(27,12,"lang.baskets"),"")}}function qi(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-list-item",50),u.hc("onDropSuccess",(function(){u.Hc(n);var t=e.$implicit;return u.lc().updateBasketOrder(t)})),u.mc(1,"translate"),u.Ub(2,"mat-icon",51),u.Zb(3,"p",19),u.Sc(4),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit,i=e.index;u.tc("title",u.nc(1,4,"lang.move")),u.sc("sortableIndex",i),u.Eb(4),u.Vc("",i+1," - ",a.basket_name,"")}}var Xi,Ki=function(){return["boxers-zone"]},tr=((Xi=function(){function t(e,n,a,i,r,c,o,s){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.headerService=i,this.appService=r,this.functions=c,this.adminService=o,this.viewContainerRef=s,this.loading=!1,this.baskets=[],this.basketsOrder=[],this.displayedColumns=["basket_id","basket_name","basket_desc","actions"],this.filterColumns=["basket_id","basket_name","basket_desc"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.baskets")),this.loading=!0,this.getSortedBasket(),this.http.get("../rest/baskets").subscribe((function(e){t.baskets=e.baskets,t.loading=!1,setTimeout((function(){t.adminService.setDataSource("admin_baskets",t.baskets,t.sort,t.paginator,t.filterColumns)}),0)}),(function(e){t.notify.handleErrors(e)}))}},{key:"getSortedBasket",value:function(){var t=this;this.http.get("../rest/sortedBaskets").pipe(Object(d.a)((function(e){t.basketsOrder=e.baskets})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"delete",value:function(t){var e=this;confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+t.basket_name+" \xbb")&&this.http.delete("../rest/baskets/"+t.basket_id).subscribe((function(t){e.notify.success(e.translate.instant("lang.basketDeleted")),e.baskets=t.baskets,e.adminService.setDataSource("admin_baskets",e.baskets,e.sort,e.paginator,e.filterColumns),e.getSortedBasket()}),(function(t){e.notify.error(t.error.errors)}))}},{key:"updateBasketOrder",value:function(t){var e=this;this.http.put("../rest/sortedBaskets/"+t.basket_id,this.basketsOrder).subscribe((function(t){e.baskets=t.baskets,e.notify.success(e.translate.instant("lang.modificationSaved"))}),(function(t){e.notify.error(t.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||Xi)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a),u.Tb(C.a),u.Tb(It),u.Tb(u.R))},Xi.\u0275cmp=u.Nb({type:Xi,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(Fi,!0),u.Oc(Li,!0),u.ad(V.a,!0),u.ad(N.a,!0)),2&t&&(u.Cc(n=u.ic())&&(e.sidenavRight=n.first),u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.paginator=n.first),u.Cc(n=u.ic())&&(e.sort=n.first))},decls:23,vars:18,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",3,"mode","fixedInViewport","opened"],["snav2",""],[2,"font-size","15px","padding","10px"],["dnd-sortable-container","",3,"dropZones","sortableData"],["disableRipple","true","dnd-sortable","",3,"title","sortableIndex","onDropSuccess",4,"ngFor","ngForOf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/baskets/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],["mat-list-item","",3,"click"],["color","primary","mat-list-icon","",1,"fa","fa-list-ol"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSortDisableClear","","matSort","",3,"dataSource"],["table",""],["matColumnDef","basket_id"],["mat-sort-header","",3,"hide-for-mobile",4,"matHeaderCellDef"],[3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","basket_name"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","basket_desc"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header",""],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"],["disableRipple","true","dnd-sortable","",3,"title","sortableIndex","onDropSuccess"],["color","primary","mat-list-icon","",1,"fa","fa-inbox"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,ji,14,9,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,Ri,2,0,"div",9),u.Qc(14,Wi,28,14,"mat-card",10),u.Yb(),u.Yb(),u.Yb(),u.Zb(15,"mat-sidenav",11,12),u.Zb(17,"p",13),u.Sc(18),u.mc(19,"translate"),u.Yb(),u.Zb(20,"mat-list"),u.Zb(21,"span",14),u.Qc(22,qi,5,6,"mat-list-item",15),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading),u.Eb(1),u.sc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",(e.appService.getViewMode(),!1)),u.Eb(3),u.Uc(" ",u.nc(19,15,"lang.basketHelpDesc")," "),u.Eb(3),u.sc("dropZones",u.yc(17,Ki))("sortableData",e.basketsOrder),u.Eb(1),u.sc("ngForOf",e.basketsOrder))},directives:[S.e,S.f,M.a,Y.a,Z.t,S.d,Dt.a,$e.f,Z.s,Dt.h,Dt.g,Dt.d,r.f,Ut.a,Dt.c,I.k,O.c,T.a,k.c,w.b,o.c,o.t,o.i,V.a,B.n,N.a,B.c,B.i,B.b,B.k,B.m,B.h,N.b,B.a,D.b,Ft.b,B.j,B.l,r.d,$e.e],pipes:[m.d],encapsulation:2}),Xi),er=n("A5z7"),nr=n("/1cH"),ar=n("TU8p");function ir(t,e){if(1&t&&(u.Zb(0,"mat-option",31),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n.value),u.Eb(1),u.Uc(" ",u.nc(2,2,"lang."+n.id)," ")}}function rr(t,e){if(1&t&&(u.Zb(0,"mat-option",31),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n.id),u.Eb(1),u.Uc(" ",n.label," ")}}function cr(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",32),u.Zb(1,"div",33),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"mat-form-field",0),u.Zb(5,"mat-label"),u.Sc(6),u.mc(7,"translate"),u.Yb(),u.Zb(8,"mat-select",34),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().selectedProcessTool.defaultTab=t})),u.Qc(9,rr,2,2,"mat-option",2),u.mc(10,"sortBy"),u.Yb(),u.Yb(),u.Zb(11,"div",35),u.Zb(12,"mat-slide-toggle",36),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().selectedProcessTool.canUpdateData=t}))("change",(function(t){return u.Hc(n),u.lc().toggleCanUpdate(t.checked)})),u.Sc(13),u.mc(14,"translate"),u.Yb(),u.Yb(),u.Zb(15,"div",35),u.Zb(16,"mat-slide-toggle",37),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().selectedProcessTool.canUpdateModel=t})),u.Sc(17),u.mc(18,"translate"),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc();u.Eb(2),u.Uc(" ",u.nc(3,9,"lang.options")," "),u.Eb(4),u.Tc(u.nc(7,11,"lang.tabProcessPosition")),u.Eb(2),u.sc("ngModel",a.selectedProcessTool.defaultTab),u.Eb(1),u.sc("ngForOf",u.oc(10,13,a.processTool,"label")),u.Eb(3),u.sc("ngModel",a.selectedProcessTool.canUpdateData),u.Eb(1),u.Tc(u.nc(14,16,"lang.canUpdateData")),u.Eb(3),u.sc("ngModel",a.selectedProcessTool.canUpdateModel)("disabled",!a.selectedProcessTool.canUpdateData),u.Eb(1),u.Uc("",u.nc(18,18,"lang.canUpdateIndexingModel")," ")}}function or(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",32),u.Zb(1,"div",33),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"div",35),u.Zb(5,"mat-slide-toggle",38),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().selectedProcessTool.canUpdateDocuments=t})),u.Sc(6),u.mc(7,"translate"),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc();u.Eb(2),u.Uc(" ",u.nc(3,3,"lang.options")," "),u.Eb(3),u.sc("ngModel",a.selectedProcessTool.canUpdateDocuments),u.Eb(1),u.Uc(" ",u.nc(7,5,"lang.canUpdateResourcesInSignatureBook"),"")}}function sr(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",39),u.hc("click",(function(){return u.Hc(n),u.lc().toggleData()})),u.mc(1,"translate"),u.Ub(2,"mat-icon",40),u.Yb()}2&t&&u.tc("title",u.nc(1,1,"lang.preview"))}function lr(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",39),u.hc("click",(function(){return u.Hc(n),u.lc().toggleData()})),u.mc(1,"translate"),u.Ub(2,"mat-icon",41),u.Yb()}2&t&&u.tc("title",u.nc(1,1,"lang.edition"))}function dr(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",42),u.hc("click",(function(){u.Hc(n);var t=e.$implicit;return u.lc().selectedTemplateDisplayedSecondaryData=t})),u.Sc(1),u.Yb()}if(2&t){var a=e.$implicit;u.Eb(1),u.Uc("",a," colonne(s)")}}function br(t,e){if(1&t&&(u.Zb(0,"mat-option",43),u.Zb(1,"span",44),u.Zb(2,"span",45),u.Ub(3,"i",46),u.Yb(),u.Zb(4,"span",47),u.Sc(5),u.Yb(),u.Yb(),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n),u.Eb(3),u.Hb("fa ",n.icon," fa-2x"),u.Eb(2),u.Uc(" ",n.label," ")}}function ur(t,e){if(1&t&&(u.Zb(0,"button",61),u.Ub(1,"mat-icon",62),u.Yb()),2&t){u.lc();var n=u.Dc(3);u.sc("matMenuTriggerFor",n)}}function mr(t,e){if(1&t){var n=u.ac();u.Zb(0,"span",51),u.Qc(1,ur,2,1,"button",52),u.Zb(2,"mat-menu",null,8),u.Zb(4,"button",42),u.hc("click",(function(){u.Hc(n);var t=u.lc(),e=t.$implicit,a=t.index;return u.lc(2).removeData(e,a)})),u.Ub(5,"mat-icon",53),u.Zb(6,"span"),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Yb(),u.Ub(9,"mat-divider"),u.Zb(10,"button",42),u.hc("click",(function(){u.Hc(n);var t=u.lc().$implicit;return u.lc(2).setStyle(t,"boldFontData")})),u.Ub(11,"mat-icon",54),u.Zb(12,"span"),u.Sc(13),u.mc(14,"translate"),u.Yb(),u.Yb(),u.Zb(15,"button",42),u.hc("click",(function(){u.Hc(n);var t=u.lc().$implicit;return u.lc(2).setStyle(t,"align_leftData")})),u.Ub(16,"mat-icon",55),u.Zb(17,"span"),u.Sc(18),u.mc(19,"translate"),u.Yb(),u.Yb(),u.Zb(20,"button",42),u.hc("click",(function(){u.Hc(n);var t=u.lc().$implicit;return u.lc(2).setStyle(t,"align_centerData")})),u.Ub(21,"mat-icon",56),u.Zb(22,"span"),u.Sc(23),u.mc(24,"translate"),u.Yb(),u.Yb(),u.Zb(25,"button",42),u.hc("click",(function(){u.Hc(n);var t=u.lc().$implicit;return u.lc(2).setStyle(t,"align_rightData")})),u.Ub(26,"mat-icon",57),u.Zb(27,"span"),u.Sc(28),u.mc(29,"translate"),u.Yb(),u.Yb(),u.Zb(30,"button",42),u.hc("click",(function(){u.Hc(n);var t=u.lc().$implicit;return u.lc(2).setStyle(t,"bigFontData")})),u.Ub(31,"mat-icon",58),u.Zb(32,"span"),u.Sc(33),u.mc(34,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(35,"span",59),u.Ub(36,"i"),u.Sc(37,"\xa0 "),u.Ub(38,"span",60),u.Yb(),u.Yb()}if(2&t){var a=u.lc().$implicit,i=u.lc(2);u.Eb(1),u.sc("ngIf","label"==i.displayMode),u.Eb(6),u.Tc(u.nc(8,23,"lang.delete")),u.Eb(3),u.Jb("isSelectedMenu",a.cssClasses.indexOf("boldFontData")>-1),u.Eb(3),u.Tc(u.nc(14,25,"lang.fontBold")),u.Eb(2),u.Jb("isSelectedMenu",a.cssClasses.indexOf("align_leftData")>-1),u.Eb(3),u.Tc(u.nc(19,27,"lang.alignLeft")),u.Eb(2),u.Jb("isSelectedMenu",a.cssClasses.indexOf("align_centerData")>-1),u.Eb(3),u.Tc(u.nc(24,29,"lang.alignCenter")),u.Eb(2),u.Jb("isSelectedMenu",a.cssClasses.indexOf("align_rightData")>-1),u.Eb(3),u.Tc(u.nc(29,31,"lang.alignRight")),u.Eb(2),u.Jb("isSelectedMenu",a.cssClasses.indexOf("bigFontData")>-1),u.Eb(3),u.Tc(u.nc(34,33,"lang.fontBig")),u.Eb(2),u.Gb(a.cssClasses.join(" ")),u.Eb(1),u.Hb("fa ",a.icon,""),u.Eb(2),u.sc("innerHTML",a[i.displayMode],u.Ic)}}function fr(t,e){if(1&t&&(u.Xb(0),u.Qc(1,mr,39,35,"span",50),u.Wb()),2&t){var n=e.$implicit;u.Eb(1),u.sc("ngIf","getFolders"!=n.value)}}function pr(t,e){if(1&t){var n=u.ac();u.Xb(0),u.Zb(1,"mat-toolbar",48),u.hc("cdkDropListDropped",(function(t){return u.Hc(n),u.lc().drop(t)})),u.Qc(2,fr,2,1,"ng-container",49),u.Yb(),u.Wb()}if(2&t){var a=u.lc();u.Eb(1),u.Hb("secondaryInformations example-list column-",a.selectedTemplateDisplayedSecondaryData,"-list"),u.sc("cdkDropListData",a.displayedSecondaryData),u.Eb(1),u.sc("ngForOf",a.displayedSecondaryData)}}function gr(t,e){1&t&&u.Ub(0,"mat-icon",67)}function hr(t,e){1&t&&u.Ub(0,"mat-icon",68)}function vr(t,e){if(1&t&&(u.Zb(0,"span"),u.Qc(1,gr,1,0,"mat-icon",64),u.Qc(2,hr,1,0,"mat-icon",65),u.Ub(3,"br"),u.Zb(4,"span",66),u.Sc(5),u.Yb(),u.Yb()),2&t){var n=u.lc().$implicit,a=u.lc();u.Eb(1),u.sc("ngIf","label"==a.displayMode),u.Eb(1),u.sc("ngIf","sample"==a.displayMode),u.Eb(3),u.Tc(n[a.displayMode])}}function yr(t,e){if(1&t&&(u.Zb(0,"span"),u.Sc(1),u.Yb()),2&t){var n=u.lc().$implicit,a=u.lc();u.Eb(1),u.Uc(" ",n[a.displayMode]," ")}}function Cr(t,e){if(1&t&&(u.Zb(0,"span",63),u.Qc(1,vr,6,3,"span",17),u.Qc(2,yr,2,1,"span",17),u.Yb()),2&t){var n=e.index;u.Gb(e.$implicit.cssClasses.join(" ")),u.Eb(1),u.sc("ngIf",0==n),u.Eb(1),u.sc("ngIf",1==n)}}function Er(t,e){if(1&t&&(u.Zb(0,"button",61),u.Ub(1,"mat-icon",62),u.Yb()),2&t){u.lc();var n=u.Dc(3);u.sc("matMenuTriggerFor",n)}}function Sr(t,e){if(1&t){var n=u.ac();u.Xb(0),u.Qc(1,Er,2,1,"button",52),u.Zb(2,"mat-menu",null,8),u.Zb(4,"button",42),u.hc("click",(function(){u.Hc(n);var t=u.lc(),e=t.$implicit,a=t.index;return u.lc().removeData(e,a)})),u.Ub(5,"mat-icon",53),u.Zb(6,"span"),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(9,"span",70),u.Ub(10,"i",71),u.Sc(11),u.Yb(),u.Wb()}if(2&t){var a=u.lc().$implicit,i=u.lc();u.Eb(1),u.sc("ngIf","label"==i.displayMode),u.Eb(6),u.Tc(u.nc(8,3,"lang.delete")),u.Eb(4),u.Uc(" ",a[i.displayMode],"")}}function Mr(t,e){if(1&t&&(u.Zb(0,"div",69),u.Qc(1,Sr,12,5,"ng-container",17),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.sc("ngIf","getFolders"==n.value)}}var xr,Yr=((xr=function(){function t(e,n,a){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.loading=!1,this.displayedMainData=[{value:"chronoNumberShort",label:this.translate.instant("lang.chronoNumberShort"),sample:"MAARCH/2019A/1",cssClasses:["align_centerData","normalData"],icon:""},{value:"object",label:this.translate.instant("lang.object"),sample:this.translate.instant("lang.objectSample"),cssClasses:["longData"],icon:""}],this.availableData=[{value:"getPriority",label:this.translate.instant("lang.getPriority"),sample:this.translate.instant("lang.getPrioritySample"),cssClasses:["align_leftData"],icon:"fa-traffic-light"},{value:"getCategory",label:this.translate.instant("lang.getCategory"),sample:this.translate.instant("lang.incoming"),cssClasses:["align_leftData"],icon:"fa-exchange-alt"},{value:"getDoctype",label:this.translate.instant("lang.getDoctype"),sample:this.translate.instant("lang.getDoctypeSample"),cssClasses:["align_leftData"],icon:"fa-suitcase"},{value:"getAssignee",label:this.translate.instant("lang.getAssignee"),sample:this.translate.instant("lang.getAssigneeSample"),cssClasses:["align_leftData"],icon:"fa-sitemap"},{value:"getRecipients",label:this.translate.instant("lang.getRecipients"),sample:"Patricia PETIT",cssClasses:["align_leftData"],icon:"fa-user"},{value:"getSenders",label:this.translate.instant("lang.getSenders"),sample:"Alain DUBOIS (MAARCH)",cssClasses:["align_leftData"],icon:"fa-book"},{value:"getCreationAndProcessLimitDates",label:this.translate.instant("lang.getCreationAndProcessLimitDates"),sample:this.translate.instant("lang.getCreationAndProcessLimitDatesSample"),cssClasses:["align_leftData"],icon:"fa-calendar"},{value:"getVisaWorkflow",label:this.translate.instant("lang.getVisaWorkflow"),sample:'<i color="accent" class="fa fa-check"></i> Barbara BAIN -> <i class="fa fa-hourglass-half"></i> <b>Bruno BOULE</b> -> <i class="fa fa-hourglass-half"></i> Patricia PETIT',cssClasses:["align_leftData"],icon:"fa-list-ol"},{value:"getSignatories",label:this.translate.instant("lang.getSignatories"),sample:"Denis DAULL, Patricia PETIT",cssClasses:["align_leftData"],icon:"fa-certificate"},{value:"getModificationDate",label:this.translate.instant("lang.getModificationDate"),sample:"01-01-2019",cssClasses:["align_leftData"],icon:"fa-calendar-check"},{value:"getOpinionLimitDate",label:this.translate.instant("lang.getOpinionLimitDate"),sample:"01-01-2019",cssClasses:["align_leftData"],icon:"fa-stopwatch"},{value:"getParallelOpinionsNumber",label:this.translate.instant("lang.getParallelOpinionsNumber"),sample:this.translate.instant("lang.getParallelOpinionsNumberSample"),cssClasses:["align_leftData"],icon:"fa-comment-alt"},{value:"getFolders",label:this.translate.instant("lang.getFolders"),sample:this.translate.instant("lang.getFoldersSample"),cssClasses:["align_leftData"],icon:"fa-folder"}],this.availableDataClone=[],this.displayedSecondaryData=[],this.displayedSecondaryDataClone=[],this.displayMode="label",this.dataControl=new o.h,this.listEvent=[{id:"detailDoc",value:"documentDetails"},{id:"eventVisaMail",value:"signatureBookAction"},{id:"eventProcessDoc",value:"processDocument"},{id:"eventViewDoc",value:"viewDoc"}],this.templateDisplayedSecondaryData=[1,2,3,4,5,6,7],this.selectedTemplateDisplayedSecondaryData=7,this.selectedTemplateDisplayedSecondaryDataClone=7,this.selectedListEvent=null,this.selectedListEventClone=null,this.processTool=[{id:"dashboard",icon:"fas fa-columns",label:this.translate.instant("lang.newsFeed")},{id:"history",icon:"fas fa-history",label:this.translate.instant("lang.history")},{id:"notes",icon:"fas fa-pen-square",label:this.translate.instant("lang.notesAlt")},{id:"attachments",icon:"fas fa-paperclip",label:this.translate.instant("lang.attachments")},{id:"linkedResources",icon:"fas fa-link",label:this.translate.instant("lang.links")},{id:"diffusionList",icon:"fas fa-share-alt",label:this.translate.instant("lang.diffusionList")},{id:"emails",icon:"fas fa-envelope",label:this.translate.instant("lang.mailsSentAlt")},{id:"visaCircuit",icon:"fas fa-list-ol",label:this.translate.instant("lang.visaWorkflow")},{id:"opinionCircuit",icon:"fas fa-comment-alt",label:this.translate.instant("lang.avis")},{id:"info",icon:"fas fa-info-circle",label:this.translate.instant("lang.informations")}],this.selectedProcessTool={defaultTab:null,canUpdateData:!1,canUpdateModel:!1,canUpdateDocuments:!1},this.selectedProcessToolClone=null,this.refreshBasketGroup=new u.o}return _createClass(t,[{key:"ngOnInit",value:function(){return Object(yt.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initCustomFields();case 2:this.filteredDataOptions=this.dataControl.valueChanges.pipe(Object(s.a)(""),Object(l.a)((function(t){return n._filterData(t)}))),this.availableDataClone=JSON.parse(JSON.stringify(this.availableData)),this.displayedSecondaryData=[],e=0,this.selectedTemplateDisplayedSecondaryData=this.basketGroup.list_display.templateColumns,this.selectedTemplateDisplayedSecondaryDataClone=this.selectedTemplateDisplayedSecondaryData,this.basketGroup.list_display.subInfos.forEach((function(t){e=n.availableData.map((function(t){return t.value})).indexOf(t.value),n.availableData[e].cssClasses=t.cssClasses,n.displayedSecondaryData.push(n.availableData[e]),n.availableData.splice(e,1)})),this.selectedListEvent=this.basketGroup.list_event,this.selectedListEventClone=this.selectedListEvent,"processDocument"===this.basketGroup.list_event?(this.selectedProcessTool.defaultTab=null===this.basketGroup.list_event_data?"dashboard":this.basketGroup.list_event_data.defaultTab,this.selectedProcessTool.canUpdateData=null!==this.basketGroup.list_event_data&&this.basketGroup.list_event_data.canUpdateData,this.selectedProcessTool.canUpdateModel=null!==this.basketGroup.list_event_data&&this.basketGroup.list_event_data.canUpdateModel):"signatureBookAction"===this.basketGroup.list_event&&(this.selectedProcessTool.canUpdateDocuments=null!==this.basketGroup.list_event_data&&this.basketGroup.list_event_data.canUpdateDocuments),this.selectedProcessToolClone=JSON.parse(JSON.stringify(this.selectedProcessTool)),this.displayedSecondaryDataClone=JSON.parse(JSON.stringify(this.displayedSecondaryData));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"initCustomFields",value:function(){var t=this;return new Promise((function(e,n){t.http.get("../rest/customFields").pipe(Object(l.a)((function(e){return e.customFields=e.customFields.map((function(e){return{value:"indexingCustomField_"+e.id,label:e.label,sample:t.translate.instant("lang.customField")+e.id,cssClasses:["align_leftData"],icon:"fa-hashtag"}})),e.customFields})),Object(d.a)((function(n){console.log(n),t.availableData=t.availableData.concat(n),e(!0)})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(J.of)(!1)}))).subscribe()}))}},{key:"toggleData",value:function(){this.dataControl.disabled?this.dataControl.enable():this.dataControl.disable(),this.displayMode="label"===this.displayMode?"sample":"label"}},{key:"setStyle",value:function(t,e){var n=e.split("_");2===n.length&&t.cssClasses.forEach((function(a,i){a.includes(n[0])&&a!==e&&t.cssClasses.splice(i,1)}));var a=t.cssClasses.indexOf(e);-1===a?t.cssClasses.push(e):t.cssClasses.splice(a,1)}},{key:"addData",value:function(t){var e=this.availableData.map((function(t){return t.value})).indexOf(t.option.value.value);this.displayedSecondaryData.push(t.option.value),this.availableData.splice(e,1),$("#availableData").blur(),this.dataControl.setValue("")}},{key:"removeData",value:function(t,e){this.availableData.push(t),this.displayedSecondaryData.splice(e,1),this.dataControl.setValue("")}},{key:"removeAllData",value:function(){this.availableData=this.availableData.concat(this.displayedSecondaryData),this.displayedSecondaryData=[],this.dataControl.setValue("")}},{key:"drop",value:function(t){t.previousContainer===t.container&&Object(Pa.h)(t.container.data,t.previousIndex,t.currentIndex)}},{key:"saveTemplate",value:function(){var t,e=this,n=[];this.displayedSecondaryData.forEach((function(t){n.push({value:t.value,cssClasses:t.cssClasses,icon:t.icon})})),t={templateColumns:this.selectedTemplateDisplayedSecondaryData,subInfos:n},this.http.put("../rest/baskets/"+this.basketGroup.basket_id+"/groups/"+this.basketGroup.group_id,{list_display:t,list_event:this.selectedListEvent,list_event_data:this.selectedProcessTool}).subscribe((function(){e.displayedSecondaryDataClone=JSON.parse(JSON.stringify(e.displayedSecondaryData)),e.basketGroup.list_display=n,e.basketGroup.list_event=e.selectedListEvent,e.selectedListEventClone=e.selectedListEvent,e.basketGroup.list_event_data=e.selectedProcessTool,e.selectedProcessToolClone=JSON.parse(JSON.stringify(e.selectedProcessTool)),e.selectedTemplateDisplayedSecondaryDataClone=JSON.parse(JSON.stringify(e.selectedTemplateDisplayedSecondaryData)),e.notify.success(e.translate.instant("lang.modificationsProcessed")),e.refreshBasketGroup.emit(e.basketGroup)}),(function(t){e.notify.error(t.error.errors)}))}},{key:"_filterData",value:function(t){var e="";return"string"==typeof t?e=t.toLowerCase():null!==t&&(e=t.label.toLowerCase()),this.availableData.filter((function(t){return t.label.toLowerCase().includes(e)}))}},{key:"checkModif",value:function(){return JSON.stringify(this.displayedSecondaryData)===JSON.stringify(this.displayedSecondaryDataClone)&&this.selectedListEvent===this.selectedListEventClone&&JSON.stringify(this.selectedProcessTool)===JSON.stringify(this.selectedProcessToolClone)&&JSON.stringify(this.selectedTemplateDisplayedSecondaryData)===JSON.stringify(this.selectedTemplateDisplayedSecondaryDataClone)}},{key:"cancelModification",value:function(){var t=this;this.displayedSecondaryData=JSON.parse(JSON.stringify(this.displayedSecondaryDataClone)),this.selectedListEvent=this.selectedListEventClone,this.selectedProcessTool=JSON.parse(JSON.stringify(this.selectedProcessToolClone)),this.availableData=JSON.parse(JSON.stringify(this.availableDataClone)),this.selectedTemplateDisplayedSecondaryData=JSON.parse(JSON.stringify(this.selectedTemplateDisplayedSecondaryDataClone));var e=0;this.displayedSecondaryData.forEach((function(n){e=t.availableData.map((function(t){return t.value})).indexOf(n.value),t.availableData.splice(e,1)})),this.dataControl.setValue("")}},{key:"hasFolder",value:function(){return this.displayedSecondaryData.map((function(t){return t.value})).indexOf("getFolders")>-1}},{key:"changeEventList",value:function(t){this.selectedProcessTool="processDocument"===t.value?{defaultTab:"dashboard"}:{}}},{key:"toggleCanUpdate",value:function(t){t||(this.selectedProcessTool.canUpdateModel=t)}}]),t}()).\u0275fac=function(t){return new(t||xr)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a))},xr.\u0275cmp=u.Nb({type:xr,selectors:[["list-administration"]],inputs:{basketGroup:["currentBasketGroup","basketGroup"]},outputs:{refreshBasketGroup:"refreshBasketGroup"},decls:59,vars:56,consts:[["appearance","outline",1,"eventList"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["class","formType ratio-2 col-sm-12",4,"ngIf"],[1,"editorTool"],["color","primary","mat-icon-button","",3,"title","click",4,"ngIf"],["color","primary","mat-button","",3,"title","matMenuTriggerFor"],[1,"fas","fa-columns"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"area"],["appearance","outline","floatLabel","never"],["id","availableData","name","availableData","type","text","matInput","",3,"formControl","placeholder","matAutocomplete"],[3,"optionSelected"],["auto","matAutocomplete"],["class","dataList",3,"value",4,"ngFor","ngForOf"],["color","warn","mat-button","",2,"float","right",3,"disabled","click"],[4,"ngIf"],[1,"resultRow","newRow"],["class","resultCol",3,"class",4,"ngFor","ngForOf"],["multiple","",1,"actions"],["color","primary","mat-icon-button","",3,"title","disabled"],["fontSet","fas","matBadge","2","fontIcon","fa-comments fa-2x",3,"matBadgeHidden"],["fontSet","fas","matBadge","7","fontIcon","fa-paperclip fa-2x",3,"matBadgeHidden"],["fontSet","fas","fontIcon","fa-sitemap fa-2x"],["fontSet","fas","fontIcon","fa-info-circle fa-2x"],["class","folder-info",4,"ngFor","ngForOf"],[1,"row"],[1,"col-md-12","text-center",2,"margin-top","30px"],["color","primary","mat-raised-button","",3,"disabled","click"],["color","default","mat-raised-button","",3,"disabled","click"],[3,"value"],[1,"formType","ratio-2","col-sm-12"],[1,"formType-title"],[3,"ngModel","ngModelChange"],[2,"padding","10px"],["color","primary",3,"ngModel","ngModelChange","change"],["color","primary",3,"ngModel","disabled","ngModelChange"],["color","primary",3,"ngModel","ngModelChange"],["color","primary","mat-icon-button","",3,"title","click"],["fontSet","fas","fontIcon","fa-eye"],["fontSet","fas","fontIcon","fa-edit"],["mat-menu-item","",3,"click"],[1,"dataList",3,"value"],[1,"optionContent"],[1,"dataIcon"],["color","primary"],[1,"dataLabel"],["cdkDropListOrientation","horizontal","cdkDropList","",3,"cdkDropListData","cdkDropListDropped"],[4,"ngFor","ngForOf"],["class","example-box","cdkDrag","",4,"ngIf"],["cdkDrag","",1,"example-box"],["color","primary","mat-icon-button","",3,"matMenuTriggerFor",4,"ngIf"],["color","warn","fontSet","fas","fontIcon","fa-trash fa-2x",1,"secondaryInformations_icon"],["fontSet","fas","fontIcon","fa-bold fa-2x",1,"secondaryInformations_icon"],["fontSet","fas","fontIcon","fa-align-left fa-2x",1,"secondaryInformations_icon"],["fontSet","fas","fontIcon","fa-align-center fa-2x",1,"secondaryInformations_icon"],["fontSet","fas","fontIcon","fa-align-right fa-2x",1,"secondaryInformations_icon"],["fontSet","fas","fontIcon","fa-text-height fa-2x",1,"secondaryInformations_icon"],[2,"width","100%"],[1,"secondaryInformations_label",3,"innerHTML"],["color","primary","mat-icon-button","",3,"matMenuTriggerFor"],["fontSet","fas","fontIcon","fa-ellipsis-v fa-2x"],[1,"resultCol"],["color","primary","class","fm fm-letter fm-2x",4,"ngIf"],["color","warn","class","fm fm-letter-status-inprogress fm-2x",4,"ngIf"],[1,"resultCol_chrono"],["color","primary",1,"fm","fm-letter","fm-2x"],["color","warn",1,"fm","fm-letter-status-inprogress","fm-2x"],[1,"folder-info"],[1,"badge","badge-folder"],[1,"fa","fa-folder"]],template:function(t,e){if(1&t&&(u.Zb(0,"mat-form-field",0),u.Zb(1,"mat-label"),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"mat-select",1),u.hc("ngModelChange",(function(t){return e.selectedListEvent=t}))("selectionChange",(function(t){return e.changeEventList(t)})),u.Qc(5,ir,3,4,"mat-option",2),u.Yb(),u.Yb(),u.Qc(6,cr,19,20,"div",3),u.Qc(7,or,8,7,"div",3),u.Ub(8,"hr"),u.Zb(9,"mat-toolbar",4),u.Zb(10,"span"),u.Qc(11,sr,3,3,"button",5),u.Qc(12,lr,3,3,"button",5),u.Zb(13,"button",6),u.mc(14,"translate"),u.Sc(15),u.Ub(16,"i",7),u.Yb(),u.Zb(17,"mat-menu",null,8),u.Qc(19,dr,2,1,"button",9),u.Yb(),u.Yb(),u.Zb(20,"span",10),u.Zb(21,"form"),u.Zb(22,"mat-form-field",11),u.Ub(23,"input",12),u.mc(24,"translate"),u.Zb(25,"mat-autocomplete",13,14),u.hc("optionSelected",(function(t){return e.addData(t)})),u.Qc(27,br,6,5,"mat-option",15),u.mc(28,"async"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(29,"span"),u.Zb(30,"button",16),u.hc("click",(function(){return e.removeAllData()})),u.Sc(31),u.mc(32,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(33,"mat-card"),u.Qc(34,pr,3,5,"ng-container",17),u.Zb(35,"div",18),u.Qc(36,Cr,3,4,"span",19),u.Zb(37,"mat-button-toggle-group",20),u.Zb(38,"button",21),u.mc(39,"translate"),u.Ub(40,"mat-icon",22),u.Yb(),u.Zb(41,"button",21),u.mc(42,"translate"),u.Ub(43,"mat-icon",23),u.Yb(),u.Zb(44,"button",21),u.mc(45,"translate"),u.Ub(46,"mat-icon",24),u.Yb(),u.Zb(47,"button",21),u.mc(48,"translate"),u.Ub(49,"mat-icon",25),u.Yb(),u.Yb(),u.Yb(),u.Qc(50,Mr,2,1,"div",26),u.Yb(),u.Zb(51,"div",27),u.Zb(52,"div",28),u.Zb(53,"button",29),u.hc("click",(function(){return e.saveTemplate()})),u.Sc(54),u.mc(55,"translate"),u.Yb(),u.Zb(56,"button",30),u.hc("click",(function(){return e.cancelModification()})),u.Sc(57),u.mc(58,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t){var n=u.Dc(18),a=u.Dc(26);u.Eb(2),u.Tc(u.nc(3,34,"lang.eventList")),u.Eb(2),u.sc("ngModel",e.selectedListEvent),u.Eb(1),u.sc("ngForOf",e.listEvent),u.Eb(1),u.sc("ngIf","processDocument"===e.selectedListEvent),u.Eb(1),u.sc("ngIf","signatureBookAction"===e.selectedListEvent),u.Eb(4),u.sc("ngIf","label"==e.displayMode),u.Eb(1),u.sc("ngIf","sample"==e.displayMode),u.Eb(1),u.sc("title",u.nc(14,36,"lang.templateUsed"))("matMenuTriggerFor",n),u.Eb(2),u.Uc(" ",e.selectedTemplateDisplayedSecondaryData," "),u.Eb(4),u.sc("ngForOf",e.templateDisplayedSecondaryData),u.Eb(4),u.tc("placeholder",u.nc(24,38,"lang.availableDatas")),u.sc("formControl",e.dataControl)("matAutocomplete",a),u.Eb(4),u.sc("ngForOf",u.nc(28,40,e.filteredDataOptions)),u.Eb(3),u.sc("disabled","sample"==e.displayMode),u.Eb(1),u.Uc(" ",u.nc(32,42,"lang.eraseAll")," "),u.Eb(3),u.sc("ngIf",e.displayedSecondaryData.length>0&&"sample"==e.displayMode||"label"==e.displayMode),u.Eb(2),u.sc("ngForOf",e.displayedMainData),u.Eb(2),u.tc("title",u.nc(39,44,"lang.notes")),u.sc("disabled","label"==e.displayMode),u.Eb(2),u.sc("matBadgeHidden","label"==e.displayMode),u.Eb(1),u.tc("title",u.nc(42,46,"lang.attachments")),u.sc("disabled","label"==e.displayMode),u.Eb(2),u.sc("matBadgeHidden","label"==e.displayMode),u.Eb(1),u.tc("title",u.nc(45,48,"lang.diffusionList")),u.sc("disabled","label"==e.displayMode),u.Eb(3),u.tc("title",u.nc(48,50,"lang.linkDetails")),u.sc("disabled","label"==e.displayMode),u.Eb(3),u.sc("ngForOf",e.displayedSecondaryData),u.Eb(3),u.sc("disabled",e.checkModif()),u.Eb(1),u.Uc(" ",u.nc(55,52,"lang.validate")," "),u.Eb(2),u.sc("disabled",e.checkModif()),u.Eb(1),u.Uc(" ",u.nc(58,54,"lang.cancel")," ")}},directives:[k.c,k.g,it.a,o.t,o.w,Z.s,Z.t,et.a,D.b,ze.d,ze.e,o.J,o.u,o.v,w.b,o.c,nr.d,o.i,nr.a,T.a,Pt.b,Ut.a,ar.a,I.o,nt.a,ze.b,Pa.e,Pa.a,_.a],pipes:[m.d,Z.b,U.a],styles:[".availableData[_ngcontent-%COMP%]{margin:10px;display:flex}.secondaryInformations[_ngcontent-%COMP%]{border:1px solid rgba(249,152,48,.4);font-size:10px;height:30px;color:#666}.secondaryInformations_icon[_ngcontent-%COMP%]{height:auto}.secondaryInformations_label[_ngcontent-%COMP%]{width:100%}.resultRow[_ngcontent-%COMP%]{align-items:center;display:flex;padding:5px}.resultRow-mobile[_ngcontent-%COMP%]{font-size:80%}.resultCol[_ngcontent-%COMP%]{flex:1;overflow:hidden;text-overflow:ellipsis}.resultCol-mobile[_ngcontent-%COMP%]{overflow:inherit;text-overflow:inherit;word-break:break-all}.resultCol_chrono[_ngcontent-%COMP%]{color:rgba(0,0,0,.4);font-size:90%}.actions[_ngcontent-%COMP%]{text-align:right;box-shadow:none;border:none;flex:1;justify-content:flex-end;overflow:inherit}.elemToDrag[_ngcontent-%COMP%]{flex:1;border:1px dashed;padding:10px;height:10px;line-height:0;cursor:move;margin-right:5px;margin-left:5px}.columns[_ngcontent-%COMP%]{width:100%;height:90px;padding:20px 10px;border-bottom:1px solid #ccc;color:rgba(0,0,0,.87);display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;background:#fff;font-size:14px}.mat-badge-content[_ngcontent-%COMP%]{background:#f99830}.example-list[_ngcontent-%COMP%]{display:grid;gap:10px;height:auto;max-width:100%;border-radius:4px;border:1px solid rgba(249,152,48,.4);font-size:10px;background:#f5f5f5}.example-box[_ngcontent-%COMP%]{color:#666;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;background:#f5f5f5;flex-grow:1;flex-basis:0;height:20px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.editorTool[_ngcontent-%COMP%]{display:flex;height:44px;font-size:10px;margin-bottom:30px}.editorTool[_ngcontent-%COMP%]   .area[_ngcontent-%COMP%]{flex:1}.editorTool[_ngcontent-%COMP%]   .area[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.editorTool[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{border-left:1px solid #666;height:70%;margin-left:10px;margin-right:10px}.editorTool[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{height:35px}.editorTool[_ngcontent-%COMP%]     .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{background:inherit}.editorTool[_ngcontent-%COMP%]     .mat-form-field-outline{background:#fff}.optionContent[_ngcontent-%COMP%]{display:flex!important}.optionContent[_ngcontent-%COMP%]   .dataIcon[_ngcontent-%COMP%]{width:30px}.optionContent[_ngcontent-%COMP%]   .dataIcon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.optionContent[_ngcontent-%COMP%]   .dataLabel[_ngcontent-%COMP%]{flex:1}.isSelectedMenu[_ngcontent-%COMP%]{background:rgba(249,152,48,.14)}.align_leftData[_ngcontent-%COMP%]{text-align:left}.align_centerData[_ngcontent-%COMP%]{text-align:center}.align_rightData[_ngcontent-%COMP%]{text-align:right}.boldFontData[_ngcontent-%COMP%]{font-weight:700}.bigFontData[_ngcontent-%COMP%]{font-size:14px}.smallFontData[_ngcontent-%COMP%]{font-size:10px}.normalData[_ngcontent-%COMP%]{flex:1}.longData[_ngcontent-%COMP%]{flex:3}.eventList[_ngcontent-%COMP%]{padding-top:10px}.badge-folder[_ngcontent-%COMP%]{cursor:default;background:#135f7f;margin:5px;font-size:8px;max-width:250px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.formType[_ngcontent-%COMP%]{align-items:center;margin-bottom:10px;border-radius:4px;border:1px solid #ccc;position:relative;padding:10px}.formType-title[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;max-width:85%;text-overflow:ellipsis;z-index:1;font-size:10px;font-weight:700;background:#fff;position:absolute;top:-7px;left:10px;padding:0;margin:0;color:#135f7f}"]}),xr),Zr=["snav2"],_r=["adminMenuTemplate"],kr=function(t){return{opacity:t}};function wr(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-nav-list"),u.Zb(1,"h3",13),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"a",20),u.hc("click",(function(){return u.Hc(n),u.lc(2).linkGroup()})),u.Ub(5,"mat-icon",21),u.Zb(6,"p",22),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Yb(),u.Ub(9,"mat-divider"),u.Zb(10,"a",23),u.mc(11,"translate"),u.Zb(12,"mat-icon",24),u.Zb(13,"mat-slide-toggle",25),u.hc("change",(function(){u.Hc(n);var t=u.lc(2);return t.toggleIsSearchBasket(t.basket),!1})),u.Yb(),u.Yb(),u.Zb(14,"p",26),u.hc("click",(function(){u.Hc(n);var t=u.lc(2);return t.toggleIsSearchBasket(t.basket),!1})),u.Sc(15),u.mc(16,"translate"),u.Yb(),u.Yb(),u.Zb(17,"a",23),u.mc(18,"translate"),u.Zb(19,"mat-icon",24),u.Zb(20,"mat-slide-toggle",25),u.hc("change",(function(){u.Hc(n);var t=u.lc(2);return t.toggleFlagNotif(t.basket),!1})),u.Yb(),u.Yb(),u.Zb(21,"p",26),u.hc("click",(function(){u.Hc(n);var t=u.lc(2);return t.toggleFlagNotif(t.basket),!1})),u.Sc(22),u.mc(23,"translate"),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(2),u.Tc(u.nc(3,10,"lang.actions")),u.Eb(5),u.Uc(" ",u.nc(8,12,"lang.linkGroup")," "),u.Eb(3),u.tc("matTooltip",u.nc(11,14,"lang.isSearchBasketInfo")),u.Eb(3),u.sc("checked",a.basket.isSearchBasket),u.Eb(1),u.sc("ngStyle",u.zc(22,kr,a.basket.isSearchBasket?"":"0.3")),u.Eb(1),u.Uc(" ",u.nc(16,16,"lang.isSearchBasket")," "),u.Eb(2),u.tc("matTooltip",u.nc(18,18,"lang.basketNotification")),u.Eb(3),u.sc("checked",a.basket.flagNotif),u.Eb(1),u.sc("ngStyle",u.zc(24,kr,a.basket.flagNotif?"":"0.3")),u.Eb(1),u.Uc(" ",u.nc(23,20,"lang.activateNotification")," ")}}function Or(t,e){if(1&t&&u.Qc(0,wr,24,26,"mat-nav-list",19),2&t){var n=u.lc();u.sc("ngIf",!n.creationMode)}}function Tr(t,e){1&t&&(u.Zb(0,"div",27),u.Ub(1,"mat-spinner",28),u.Yb())}function Ir(t,e){if(1&t){var n=u.ac();u.Zb(0,"input",49),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).basket.id=t}))("blur",(function(){return u.Hc(n),u.lc(2).isAvailable()})),u.mc(1,"translate"),u.Yb()}if(2&t){var a=u.lc(2);u.tc("placeholder",u.nc(1,2,"lang.id")),u.sc("ngModel",a.basket.id)}}function Dr(t,e){if(1&t){var n=u.ac();u.Zb(0,"input",50),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).basket.id=t})),u.mc(1,"translate"),u.mc(2,"translate"),u.Yb()}if(2&t){var a=u.lc(2);u.tc("placeholder",u.nc(1,3,"lang.id")),u.tc("title",u.nc(2,5,"lang.id")),u.sc("ngModel",a.basket.id)}}function Ur(t,e){if(1&t&&(u.Zb(0,"mat-option",58),u.Sc(1),u.Yb()),2&t){var n=e.$implicit,a=u.lc(3);u.sc("value",n),u.Eb(1),u.Uc(" ",a.langVarName[a.orderColumns.indexOf(n)],"")}}function Pr(t,e){if(1&t&&(u.Zb(0,"mat-option",58),u.Sc(1),u.Yb()),2&t){var n=e.$implicit,a=u.lc(3);u.sc("value",n),u.Eb(1),u.Uc(" ",a.langOrderName[a.orderByColumns.indexOf(n)],"")}}function Fr(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",59),u.hc("click",(function(){return u.Hc(n),u.lc(3).addLine()})),u.Ub(1,"mat-icon",60),u.Yb()}if(2&t){var a=u.lc(3);u.sc("disabled",2==a.orderColumnsSelected.length)}}function Lr(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",36),u.Zb(1,"div",51),u.Zb(2,"mat-form-field"),u.Zb(3,"mat-select",52),u.hc("ngModelChange",(function(t){u.Hc(n);var a=e.index;return u.lc(2).orderColumnsSelected[a].column=t})),u.mc(4,"translate"),u.Qc(5,Ur,2,2,"mat-option",53),u.Yb(),u.Yb(),u.Yb(),u.Zb(6,"div",51),u.Zb(7,"mat-form-field"),u.Zb(8,"mat-select",52),u.hc("ngModelChange",(function(t){return u.Hc(n),e.$implicit.order=t})),u.mc(9,"translate"),u.Qc(10,Pr,2,2,"mat-option",53),u.Yb(),u.Yb(),u.Yb(),u.Zb(11,"div",54),u.Zb(12,"button",55),u.hc("click",(function(){u.Hc(n);var t=e.index;return u.lc(2).removeLine(t)})),u.Ub(13,"mat-icon",56),u.Yb(),u.Qc(14,Fr,2,1,"button",57),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit,i=e.index,r=u.lc(2);u.Eb(3),u.vc("placeholder","",u.nc(4,11,"lang.defaultSort")," ",i+1,""),u.uc("name","basket_res_order",i,""),u.sc("ngModel",r.orderColumnsSelected[i].column),u.Eb(2),u.sc("ngForOf",r.orderColumns),u.Eb(3),u.tc("placeholder",u.nc(9,13,"lang.orderBy")),u.uc("name","order_by_select",i,""),u.sc("ngModel",a.order),u.Eb(2),u.sc("ngForOf",r.orderByColumns),u.Eb(2),u.sc("disabled",1==r.orderColumnsSelected.length),u.Eb(2),u.sc("ngIf",r.orderColumnsSelected.length==i+1)}}function jr(t,e){if(1&t){var n=u.ac();u.Zb(0,"span"),u.Sc(1),u.Yb(),u.Zb(2,"mat-icon",62),u.hc("click",(function(){u.Hc(n);var t=u.lc().index;return u.lc(2).unlinkGroup(t)})),u.mc(3,"translate"),u.Yb()}if(2&t){var a=u.lc().$implicit;u.Eb(1),u.Tc(a.group_desc),u.Eb(1),u.tc("matTooltip",u.nc(3,2,"lang.unlinkGroup"))}}function Rr(t,e){1&t&&(u.Zb(0,"small"),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc("(",u.nc(2,1,"lang.default"),")"))}function Qr(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-icon",85),u.hc("click",(function(t){return u.Hc(n),t.stopPropagation()})),u.mc(1,"translate"),u.Yb()}2&t&&u.tc("matTooltip",u.nc(1,1,"lang.delete"))}var Ar=function(t){return{"font-weight":t}};function Hr(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-chip",81),u.hc("click",(function(){u.Hc(n);var t=u.lc().$implicit,e=u.lc(2).$implicit;return u.lc(2).openSettings(e,t)}))("removed",(function(){u.Hc(n);var t=u.lc().$implicit,e=u.lc(2).$implicit;return u.lc(2).unlinkAction(e,t)})),u.Sc(1," \xa0 "),u.Zb(2,"span"),u.Sc(3),u.Yb(),u.Sc(4,"\xa0 "),u.Qc(5,Rr,3,3,"small",19),u.Ub(6,"span",82),u.Zb(7,"button",83),u.hc("click",(function(t){u.Hc(n);var e=u.lc().$implicit,a=u.lc(2).$implicit,i=u.lc(2);return t.stopPropagation(),i.setDefaultAction(a,e)})),u.Sc(8),u.mc(9,"translate"),u.Yb(),u.Qc(10,Qr,2,3,"mat-icon",84),u.Yb()}if(2&t){var a=u.lc().$implicit;u.uc("matTooltip","id : ",a.id,""),u.sc("ngStyle",u.zc(9,Ar,1==a.default_action_list?"bold":"")),u.Eb(3),u.Tc(a.label_action),u.Eb(2),u.sc("ngIf",1==a.default_action_list),u.Eb(2),u.sc("disabled",a.default_action_list),u.Eb(1),u.Tc(u.nc(9,7,"lang.setByDefault")),u.Eb(2),u.sc("ngIf",1!=a.default_action_list)}}function zr(t,e){if(1&t&&(u.Zb(0,"span",79),u.Qc(1,Hr,11,11,"mat-chip",80),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.sc("ngIf",1==n.checked)}}function $r(t,e){1&t&&u.Ub(0,"mat-header-cell")}function Vr(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-cell",86),u.Zb(1,"mat-checkbox",87),u.hc("change",(function(){u.Hc(n);var t=u.lc(2).$implicit;return u.lc(2).addAction(t)}))("ngModelChange",(function(t){return u.Hc(n),e.$implicit.checked=t})),u.Zb(2,"span"),u.Sc(3),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit;u.uc("matTooltip","id : ",a.id,""),u.Eb(1),u.sc("disabled",1==a.default_action_list)("ngModel",a.checked),u.Eb(2),u.Tc(a.label_action)}}function Nr(t,e){1&t&&u.Ub(0,"mat-header-cell")}function Jr(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-cell",88),u.Zb(1,"button",89),u.Ub(2,"mat-icon",90),u.Yb(),u.Zb(3,"mat-menu",null,91),u.Zb(5,"button",92),u.hc("click",(function(){u.Hc(n);var t=e.$implicit,a=u.lc(2).$implicit;return u.lc(2).setDefaultAction(a,t)})),u.Ub(6,"mat-icon",93),u.Zb(7,"span"),u.Sc(8),u.mc(9,"translate"),u.Yb(),u.Yb(),u.Zb(10,"button",94),u.hc("click",(function(){u.Hc(n);var t=e.$implicit,a=u.lc(2).$implicit;return u.lc(2).openSettings(a,t)})),u.Ub(11,"mat-icon",95),u.Zb(12,"span"),u.Sc(13),u.mc(14,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit,i=u.Dc(4);u.uc("matTooltip","id : ",a.id,""),u.Eb(1),u.sc("matMenuTriggerFor",i)("disabled",!a.checked),u.Eb(4),u.sc("disabled",1==a.default_action_list),u.Eb(3),u.Tc(u.nc(9,6,"lang.defaultAction")),u.Eb(5),u.Tc(u.nc(14,8,"lang.moreOptions"))}}function Gr(t,e){1&t&&u.Ub(0,"mat-row")}function Br(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-tab-group"),u.Zb(1,"mat-tab",31),u.mc(2,"translate"),u.Zb(3,"div",63),u.Zb(4,"h5"),u.Sc(5),u.mc(6,"translate"),u.Yb(),u.Zb(7,"mat-chip-list",64,65),u.Qc(9,zr,2,1,"span",66),u.mc(10,"sortBy"),u.Yb(),u.Yb(),u.Zb(11,"div",63),u.Zb(12,"mat-accordion",67),u.Zb(13,"mat-expansion-panel",68),u.hc("opened",(function(){u.Hc(n);var t=u.lc().index;return u.lc(2).initAction(t)})),u.Zb(14,"mat-expansion-panel-header"),u.Zb(15,"mat-panel-title"),u.Sc(16),u.mc(17,"translate"),u.Yb(),u.Yb(),u.Zb(18,"div"),u.Zb(19,"mat-form-field"),u.Zb(20,"input",69),u.hc("keyup",(function(t){return u.Hc(n),u.lc(3).applyFilter(t.target.value)})),u.mc(21,"translate"),u.Yb(),u.Yb(),u.Zb(22,"mat-table",70,71),u.Xb(24,72),u.Qc(25,$r,1,0,"mat-header-cell",73),u.Qc(26,Vr,4,4,"mat-cell",74),u.Wb(),u.Xb(27,75),u.Qc(28,Nr,1,0,"mat-header-cell",73),u.Qc(29,Jr,15,10,"mat-cell",76),u.Wb(),u.Qc(30,Gr,1,0,"mat-row",77),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(31,"mat-tab",31),u.mc(32,"translate"),u.Zb(33,"list-administration",78),u.hc("refreshBasketGroup",(function(t){u.Hc(n);var e=u.lc().$implicit;return u.lc(2).updateGroupInfo(e,t)})),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc().$implicit,i=u.lc(2);u.Eb(1),u.tc("label",u.nc(2,9,"lang.actions")),u.Eb(4),u.Tc(u.nc(6,11,"lang.actionChosen")),u.Eb(4),u.sc("ngForOf",u.oc(10,13,a.groupActions,"label_action")),u.Eb(7),u.Uc(" ",u.nc(17,16,"lang.actionAvailable")," "),u.Eb(4),u.tc("placeholder",u.nc(21,18,"lang.filterBy")),u.Eb(2),u.sc("dataSource",i.dataSource),u.Eb(8),u.sc("matRowDefColumns",i.displayedColumns),u.Eb(1),u.tc("label",u.nc(32,20,"lang.resultPage")),u.Eb(2),u.sc("currentBasketGroup",a)}}function Wr(t,e){if(1&t&&(u.Zb(0,"mat-tab",31),u.Qc(1,jr,4,4,"ng-template",61),u.Qc(2,Br,34,22,"mat-tab-group",19),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.tc("label",n.group_desc),u.Eb(2),u.sc("ngIf",a.selectedIndex>0)}}var qr=function(t){return{color:t}};function Xr(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-card",29),u.Zb(1,"mat-tab-group",30),u.hc("selectedIndexChange",(function(t){return u.Hc(n),u.lc().selectedIndex=t})),u.Zb(2,"mat-tab",31),u.mc(3,"translate"),u.Zb(4,"form",32,33),u.hc("ngSubmit",(function(){return u.Hc(n),u.lc().onSubmit()})),u.Zb(6,"mat-form-field"),u.Qc(7,Ir,2,4,"input",34),u.Qc(8,Dr,3,7,"input",35),u.Yb(),u.Zb(9,"div",36),u.Zb(10,"div",37),u.Zb(11,"mat-form-field"),u.Zb(12,"input",38),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().basket.basket_name=t})),u.mc(13,"translate"),u.mc(14,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(15,"div",39),u.Zb(16,"mat-form-field"),u.Zb(17,"input",40),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().basket.color=t})),u.mc(18,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(19,"mat-form-field"),u.Zb(20,"input",41),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().basket.basket_desc=t})),u.mc(21,"translate"),u.mc(22,"translate"),u.Yb(),u.Yb(),u.Zb(23,"mat-form-field"),u.Zb(24,"textarea",42),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().basket.clause=t})),u.mc(25,"translate"),u.mc(26,"translate"),u.Yb(),u.Zb(27,"mat-icon",43),u.hc("click",(function(){return u.Hc(n),u.lc(),u.Dc(16).toggle()})),u.mc(28,"translate"),u.Yb(),u.Yb(),u.Zb(29,"div",44),u.Qc(30,Lr,15,15,"div",45),u.Yb(),u.Zb(31,"div",46),u.Zb(32,"button",47),u.Sc(33),u.mc(34,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Qc(35,Wr,3,2,"mat-tab",48),u.Yb(),u.Yb()}if(2&t){var a=u.Dc(5),i=u.lc();u.Eb(1),u.sc("selectedIndex",i.selectedIndex),u.Eb(1),u.tc("label",u.nc(3,21,"lang.informations")),u.Eb(5),u.sc("ngIf",i.creationMode),u.Eb(1),u.sc("ngIf",!i.creationMode),u.Eb(4),u.tc("title",u.nc(13,23,"lang.label")),u.tc("placeholder",u.nc(14,25,"lang.label")),u.sc("ngModel",i.basket.basket_name)("ngStyle",u.zc(41,qr,i.basket.color)),u.Eb(5),u.tc("matTooltip",u.nc(18,27,"lang.chooseColor")),u.sc("ngModel",i.basket.color),u.Eb(3),u.tc("title",u.nc(21,29,"lang.description")),u.tc("placeholder",u.nc(22,31,"lang.description")),u.sc("ngModel",i.basket.basket_desc),u.Eb(4),u.tc("title",u.nc(25,33,"lang.clause")),u.tc("placeholder",u.nc(26,35,"lang.clause")),u.sc("ngModel",i.basket.clause),u.Eb(3),u.tc("matTooltip",u.nc(28,37,"lang.keywordHelper")),u.Eb(3),u.sc("ngForOf",i.orderColumnsSelected),u.Eb(2),u.sc("disabled",!a.form.valid||0==i.orderColumnsSelected.length),u.Eb(1),u.Tc(u.nc(34,39,"lang.save")),u.Eb(2),u.sc("ngForOf",i.basketGroups)}}var Kr=["statusInput"];function tc(t,e){1&t&&(u.Sc(0),u.mc(1,"translate")),2&t&&u.Uc(" ",u.nc(1,1,"lang.redirects")," ")}function ec(t,e){1&t&&u.Qc(0,tc,2,3,"ng-template",21)}function nc(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-expansion-panel",17),u.hc("opened",(function(){return u.Hc(n),u.lc(2).initService2()})),u.Zb(1,"mat-expansion-panel-header"),u.Zb(2,"mat-panel-title"),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Yb(),u.Zb(5,"mat-form-field"),u.Ub(6,"input",22),u.mc(7,"translate"),u.Yb(),u.Ub(8,"div",23),u.Yb()}2&t&&(u.Eb(3),u.Uc(" ",u.nc(4,2,"lang.toUsersEntities")," "),u.Eb(3),u.tc("placeholder",u.nc(7,4,"lang.searchEntities")))}function ac(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-tab"),u.Qc(1,ec,1,0,void 0,7),u.Zb(2,"mat-accordion"),u.Zb(3,"mat-expansion-panel",17),u.hc("opened",(function(){return u.Hc(n),u.lc().initService()})),u.Zb(4,"mat-expansion-panel-header"),u.Zb(5,"mat-panel-title"),u.Sc(6),u.mc(7,"translate"),u.Yb(),u.Yb(),u.Zb(8,"mat-form-field"),u.Ub(9,"input",18),u.mc(10,"translate"),u.Yb(),u.Ub(11,"div",19),u.Yb(),u.Qc(12,nc,9,6,"mat-expansion-panel",20),u.Yb(),u.Yb()}if(2&t){var a=u.lc();u.Eb(1),u.sc("ngIf","redirect"==a.data.action.keyword),u.Eb(5),u.Uc(" ",u.nc(7,4,"lang.toEntities")," "),u.Eb(3),u.tc("placeholder",u.nc(10,6,"lang.searchEntities")),u.Eb(3),u.sc("ngIf","redirect"==a.data.action.keyword)}}function ic(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-list-item",4),u.hc("click",(function(){u.Hc(n);var t=u.lc().$implicit;return u.lc().validateForm(t)})),u.Sc(1),u.Yb()}if(2&t){var a=u.lc().$implicit;u.Eb(1),u.Uc(" ",a.group_desc," ")}}function rc(t,e){if(1&t&&(u.Zb(0,"span"),u.Qc(1,ic,2,1,"mat-list-item",3),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.sc("ngIf",0==n.isUsed)}}var cc,oc,sc,lc=((sc=function(){function t(e,n,a,i,r,c,o,s,l){_classCallCheck(this,t),this.translate=e,this.http=n,this.route=a,this.router=i,this.notify=r,this.dialog=c,this.headerService=o,this.appService=s,this.viewContainerRef=l,this.selectedIndex=0,this.loading=!1,this.config={},this.basket={},this.basketClone={},this.basketGroups=[],this.allGroups=[],this.actionsList=[],this.list_display=[],this.displayedColumns=["label_action","actions"],this.orderColumns=["alt_identifier","creation_date","process_limit_date","res_id","priority"],this.orderByColumns=["asc","desc"],this.langVarName=[this.translate.instant("lang.chrono"),this.translate.instant("lang.creationDate"),this.translate.instant("lang.processLimitDate"),this.translate.instant("lang.id"),this.translate.instant("lang.priority")],this.langOrderName=[this.translate.instant("lang.ascending"),this.translate.instant("lang.descending")],this.orderColumnsSelected=[{column:"res_id",order:"asc"}]}return _createClass(t,[{key:"applyFilter",value:function(t){t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t}},{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.route.params.subscribe((function(e){void 0===e.id?(t.headerService.setHeader(t.translate.instant("lang.basketCreation")),t.creationMode=!0,t.basketIdAvailable=!1,t.loading=!1):(t.orderColumnsSelected=[],t.creationMode=!1,t.basketIdAvailable=!0,t.id=e.id,t.http.get("../rest/baskets/"+t.id).subscribe((function(e){if(t.headerService.setHeader(t.translate.instant("lang.basketModification"),e.basket.basket_name),t.basket=e.basket,t.basket.id=e.basket.basket_id,t.basket.name=e.basket.basket_name,t.basket.description=e.basket.basket_desc,t.basket.clause=e.basket.basket_clause,t.basket.isSearchBasket="Y"!==e.basket.is_visible,t.basket.flagNotif="Y"===e.basket.flag_notif,""===t.basket.basket_res_order||null==t.basket.basket_res_order)t.orderColumnsSelected=[];else for(var n=t.basket.basket_res_order.split(", "),a=0;a<n.length;a++){var i=n[a].split(" ");i[1]||(i[1]="desc"),t.orderColumnsSelected.push({column:i[0],order:i[1]})}t.basketClone=JSON.parse(JSON.stringify(t.basket)),t.http.get("../rest/baskets/"+t.id+"/groups").subscribe((function(e){t.allGroups=e.allGroups,t.allGroups.forEach((function(t){t.isUsed=!1,e.groups.forEach((function(e){t.group_id===e.group_id&&(t.isUsed=!0)}))})),e.groups.forEach((function(t){t.groupActions.forEach((function(t){t.used_in_basketlist="Y"===t.used_in_basketlist,t.used_in_action_page="Y"===t.used_in_action_page,t.default_action_list="Y"===t.default_action_list}))})),t.basketGroups=e.groups,t.loading=!1}),(function(e){t.notify.handleErrors(e)}))}),(function(e){t.notify.handleErrors(e)})))}))}},{key:"openSettings",value:function(t,e){var n=this;this.config={panelClass:"maarch-modal",data:{group:t,action:e}},this.dialogRef=this.dialog.open(dc,this.config),this.dialogRef.afterClosed().subscribe((function(a){a&&n.http.put("../rest/baskets/"+n.id+"/groups/"+a.group.group_id+"/actions",{groupActions:a.group.groupActions}).subscribe((function(){n.dialogRef=null,n.notify.success(n.translate.instant("lang.basketUpdated"))}),(function(a){n.dialogRef=null,n.openSettings(t,e),n.notify.error(a.error.errors)}))}))}},{key:"isAvailable",value:function(){var t=this;this.basket.id?this.http.get("../rest/baskets/"+this.basket.id).subscribe((function(){t.basketIdAvailable=!1}),(function(e){t.basketIdAvailable=!1,e.error.errors===t.translate.instant("lang.basketNotFound")&&(t.basketIdAvailable=!0)})):this.basketIdAvailable=!1}},{key:"onSubmit",value:function(){var t=this;if(null!==this.orderColumnsSelected&&this.orderColumnsSelected.length>0){for(var e=[],n=0;n<this.orderColumnsSelected.length;n++)e[n]=this.orderColumnsSelected[n].column+" "+this.orderColumnsSelected[n].order;this.basket.basket_res_order=e.join(", ")}else this.basket.basket_res_order="";this.creationMode?this.http.post("../rest/baskets",this.basket).subscribe((function(){t.notify.success(t.translate.instant("lang.basketAdded")),t.router.navigate(["/administration/baskets/"+t.basket.id])}),(function(e){t.notify.error(e.error.errors)})):this.http.put("../rest/baskets/"+this.id,this.basket).subscribe((function(){t.notify.success(t.translate.instant("lang.basketUpdated")),t.router.navigate(["/administration/baskets"])}),(function(e){t.notify.error(e.error.errors)}))}},{key:"addLine",value:function(){this.orderColumnsSelected.push(JSON.parse(JSON.stringify(this.orderColumnsSelected[0])))}},{key:"removeLine",value:function(t){this.orderColumnsSelected.splice(t,1)}},{key:"initAction",value:function(t){this.dataSource=new B.o(this.basketGroups[t].groupActions),this.dataSource.sort=this.sort}},{key:"setDefaultAction",value:function(t,e){t.groupActions.forEach((function(t){t.default_action_list=t.id===e.id})),this.addAction(t)}},{key:"unlinkGroup",value:function(t){var e=this;confirm(this.translate.instant("lang.unlinkGroup")+" ?")&&this.http.delete("../rest/baskets/"+this.id+"/groups/"+this.basketGroups[t].group_id).subscribe((function(){e.allGroups.forEach((function(n){n.group_id===e.basketGroups[t].group_id&&(n.isUsed=!1)})),e.basketGroups.splice(t,1),e.notify.success(e.translate.instant("lang.basketUpdated")),e.selectedIndex=0}),(function(t){e.notify.error(t.error.errors)}))}},{key:"linkGroup",value:function(){var t=this;this.config={panelClass:"maarch-modal",data:{basketId:this.basket.id,groups:this.allGroups,linkedGroups:this.basketGroups}},this.dialogRef=this.dialog.open(bc,this.config),this.dialogRef.afterClosed().subscribe((function(e){e&&(e.list_display=t.basketGroups.length>0?t.basketGroups[t.basketGroups.length-1].list_display:{subInfos:[],templateColumns:0},t.http.post("../rest/baskets/"+t.id+"/groups",e).subscribe((function(){t.basketGroups.push(e),t.allGroups.forEach((function(t){t.group_id===e.group_id&&(t.isUsed=!0)})),t.notify.success(t.translate.instant("lang.basketUpdated")),t.selectedIndex=t.basketGroups.length}),(function(e){t.notify.error(e.error.errors)}))),t.dialogRef=null}))}},{key:"addAction",value:function(t){var e=this;this.http.put("../rest/baskets/"+this.id+"/groups/"+t.group_id+"/actions",{groupActions:t.groupActions}).subscribe((function(){e.notify.success(e.translate.instant("lang.actionsGroupBasketUpdated"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"toggleIsSearchBasket",value:function(t){var e=this;t.isSearchBasket=!t.isSearchBasket,this.basketClone.isSearchBasket=t.isSearchBasket,this.http.put("../rest/baskets/"+this.id,this.basketClone).subscribe((function(){e.notify.success(e.translate.instant("lang.basketUpdated"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"toggleFlagNotif",value:function(t){var e=this;t.flagNotif=!t.flagNotif,this.basketClone.flagNotif=t.flagNotif,this.http.put("../rest/baskets/"+this.id,this.basketClone).subscribe((function(){e.notify.success(e.translate.instant("lang.basketUpdated"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"unlinkAction",value:function(t,e){var n=this;confirm(this.translate.instant("lang.unlinkAction")+" ?")&&(e.checked=!1,this.http.put("../rest/baskets/"+this.id+"/groups/"+t.group_id+"/actions",{groupActions:t.groupActions}).subscribe((function(){n.notify.success(n.translate.instant("lang.actionsGroupBasketUpdated"))}),(function(t){n.notify.error(t.error.errors)})))}},{key:"updateGroupInfo",value:function(t,e){}}]),t}()).\u0275fac=function(t){return new(t||sc)(u.Tb(m.e),u.Tb(f.b),u.Tb(r.a),u.Tb(r.c),u.Tb(y.a),u.Tb(z.b),u.Tb(p.a),u.Tb(g.a),u.Tb(u.R))},sc.\u0275cmp=u.Nb({type:sc,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(Zr,!0),u.Oc(_r,!0),u.ad(V.a,!0),u.ad(N.a,!0)),2&t&&(u.Cc(n=u.ic())&&(e.sidenavRight=n.first),u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.paginator=n.first),u.Cc(n=u.ic())&&(e.sort=n.first))},decls:93,vars:56,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",3,"mode","fixedInViewport","opened"],["snav2",""],["mat-subheader",""],["role","list",2,"width","300px","padding","5px"],[2,"font-size","10px"],[2,"border","1px black solid","padding","3px","font-size","10px"],["mat-line","",2,"font-weight","bold","font-size","10px"],["mat-line","",2,"font-size","10px"],[4,"ngIf"],["mat-list-item","",3,"click"],["color","primary","mat-list-icon","",1,"fa","fa-link"],["mat-line",""],["mat-list-item","","disableRipple","true",3,"matTooltip"],["color","primary","mat-list-icon",""],["color","primary",3,"checked","change"],["mat-line","",3,"ngStyle","click"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[3,"selectedIndex","selectedIndexChange"],[3,"label"],[1,"form-horizontal",3,"ngSubmit"],["basketForm","ngForm"],["matInput","","name","identifier","maxlength","32","pattern","^[\\w.-]*$","required","",3,"placeholder","ngModel","ngModelChange","blur",4,"ngIf"],["matInput","","name","identifier","required","","disabled","",3,"placeholder","title","ngModel","ngModelChange",4,"ngIf"],[1,"row"],[1,"col-md-11","col-xs-10"],["matInput","","name","label","maxlength","255","required","",3,"title","placeholder","ngModel","ngStyle","ngModelChange"],[1,"col-md-1","col-xs-2"],["matInput","","type","color","name","color",3,"matTooltip","ngModel","ngModelChange"],["matInput","","name","description","maxlength","255","required","",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","name","clause","matTextareaAutosize","","matAutosizeMinRows","1","required","",3,"title","placeholder","ngModel","ngModelChange"],["color","primary","matSuffix","",1,"fa","fa-info-circle",2,"cursor","pointer",3,"matTooltip","click"],["id","listOrder"],["class","row",4,"ngFor","ngForOf"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary",3,"disabled"],[3,"label",4,"ngFor","ngForOf"],["matInput","","name","identifier","maxlength","32","pattern","^[\\w.-]*$","required","",3,"placeholder","ngModel","ngModelChange","blur"],["matInput","","name","identifier","required","","disabled","",3,"placeholder","title","ngModel","ngModelChange"],[1,"col-md-5","col-xs-5","text-center"],["required","",3,"placeholder","ngModel","name","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-2","col-xs-2","text-left"],["color","warn","mat-icon-button","","type","button",3,"disabled","click"],[1,"fa","fa-minus-square","fa-2x"],["color","primary","mat-icon-button","","type","button",3,"disabled","click",4,"ngIf"],[3,"value"],["color","primary","mat-icon-button","","type","button",3,"disabled","click"],[1,"fa","fa-plus-square","fa-2x"],["mat-tab-label",""],["color","warn",1,"fa","fa-times",3,"matTooltip","click"],[1,"col-md-6"],[1,"mat-chip-list-stacked"],["chipList",""],["style","width:100%;",4,"ngFor","ngForOf"],[1,"basketActionsList"],[3,"opened"],["matInput","",3,"placeholder","keyup"],[3,"dataSource"],["table",""],["matColumnDef","label_action"],[4,"matHeaderCellDef"],["style","flex:6;",3,"matTooltip",4,"matCellDef"],["matColumnDef","actions"],["style","text-align:right",3,"matTooltip",4,"matCellDef"],[4,"matRowDef","matRowDefColumns"],[3,"currentBasketGroup","refreshBasketGroup"],[2,"width","100%"],["color","primary","style","cursor:pointer;margin:5px;border-radius:0px;display:flex;","selectable","true","removable","true",3,"matTooltip","ngStyle","click","removed",4,"ngIf"],["color","primary","selectable","true","removable","true",2,"cursor","pointer","margin","5px","border-radius","0px","display","flex",3,"matTooltip","ngStyle","click","removed"],[2,"flex","1 1 auto"],["mat-raised-button","",3,"disabled","click"],["matChipRemove","","color","warn","class","fa fa-times",3,"matTooltip","click",4,"ngIf"],["matChipRemove","","color","warn",1,"fa","fa-times",3,"matTooltip","click"],[2,"flex","6",3,"matTooltip"],["color","primary",3,"disabled","ngModel","change","ngModelChange"],[2,"text-align","right",3,"matTooltip"],["mat-icon-button","",3,"matMenuTriggerFor","disabled"],[1,"fa","fa-bars"],["menu","matMenu"],["mat-menu-item","",3,"disabled","click"],[1,"fa","fa-check-circle"],["mat-menu-item","",3,"click"],[1,"fa","fa-cogs"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,Or,1,1,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,Tr,2,0,"div",9),u.Qc(14,Xr,36,43,"mat-card",10),u.Yb(),u.Yb(),u.Yb(),u.Zb(15,"mat-sidenav",11,12),u.Zb(17,"mat-nav-list"),u.Zb(18,"h3",13),u.Sc(19),u.mc(20,"translate"),u.Yb(),u.Yb(),u.Zb(21,"mat-list",14),u.Zb(22,"p",15),u.Sc(23),u.mc(24,"translate"),u.Yb(),u.Zb(25,"div",16),u.Zb(26,"b"),u.Sc(27,"DESTINATION = @my_primary_entity or DESTINATION in (@subentities[@my_primary_entity])"),u.Yb(),u.Yb(),u.Zb(28,"h4",17),u.Sc(29,"@user :"),u.Yb(),u.Zb(30,"p",18),u.Sc(31),u.mc(32,"translate"),u.Yb(),u.Zb(33,"h4",17),u.Sc(34,"@user_id :"),u.Yb(),u.Zb(35,"p",18),u.Sc(36),u.mc(37,"translate"),u.Yb(),u.Zb(38,"h4",17),u.Sc(39,"@email :"),u.Yb(),u.Zb(40,"p",18),u.Sc(41),u.mc(42,"translate"),u.Yb(),u.Zb(43,"h4",17),u.Sc(44,"@my_entities :"),u.Yb(),u.Zb(45,"p",18),u.Sc(46),u.mc(47,"translate"),u.Yb(),u.Zb(48,"h4",17),u.Sc(49,"@my_entities_id :"),u.Yb(),u.Zb(50,"p",18),u.Sc(51),u.mc(52,"translate"),u.Yb(),u.Zb(53,"h4",17),u.Sc(54,"@my_primary_entity :"),u.Yb(),u.Zb(55,"p",18),u.Sc(56),u.mc(57,"translate"),u.Yb(),u.Zb(58,"h4",17),u.Sc(59,"@my_primary_entity_id :"),u.Yb(),u.Zb(60,"p",18),u.Sc(61),u.mc(62,"translate"),u.Yb(),u.Zb(63,"h4",17),u.Sc(64,"@subentities[('entity_1',...,'entity_n')] :"),u.Yb(),u.Zb(65,"p",18),u.Sc(66),u.mc(67,"translate"),u.Yb(),u.Zb(68,"h4",17),u.Sc(69,"@parent_entity['entity_id'] :"),u.Yb(),u.Zb(70,"p",18),u.Sc(71),u.mc(72,"translate"),u.Yb(),u.Zb(73,"h4",17),u.Sc(74,"@sisters_entities['entity_id'] :"),u.Yb(),u.Zb(75,"p",18),u.Sc(76),u.mc(77,"translate"),u.Yb(),u.Zb(78,"h4",17),u.Sc(79,"@entity_type['type'] :"),u.Yb(),u.Zb(80,"p",18),u.Sc(81),u.mc(82,"translate"),u.Yb(),u.Zb(83,"h4",17),u.Sc(84,"@all_entities :"),u.Yb(),u.Zb(85,"p",18),u.Sc(86),u.mc(87,"translate"),u.Yb(),u.Zb(88,"h4",17),u.Sc(89,"@immediate_children['entity_1',..., 'entity_id'] :"),u.Yb(),u.Zb(90,"p",18),u.Sc(91),u.mc(92,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading),u.Eb(1),u.sc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",(e.appService.getViewMode(),!1)),u.Eb(4),u.Tc(u.nc(20,26,"lang.keywordHelp")),u.Eb(4),u.Tc(u.nc(24,28,"lang.keywordHelpDesc_11")),u.Eb(8),u.Tc(u.nc(32,30,"lang.keywordHelpDesc_1")),u.Eb(5),u.Tc(u.nc(37,32,"lang.keywordHelpDesc_12")),u.Eb(5),u.Tc(u.nc(42,34,"lang.keywordHelpDesc_2")),u.Eb(5),u.Tc(u.nc(47,36,"lang.keywordHelpDesc_3")),u.Eb(5),u.Tc(u.nc(52,38,"lang.keywordHelpDesc_13")),u.Eb(5),u.Tc(u.nc(57,40,"lang.keywordHelpDesc_4")),u.Eb(5),u.Tc(u.nc(62,42,"lang.keywordHelpDesc_14")),u.Eb(5),u.Tc(u.nc(67,44,"lang.keywordHelpDesc_5")),u.Eb(5),u.Tc(u.nc(72,46,"lang.keywordHelpDesc_6")),u.Eb(5),u.Tc(u.nc(77,48,"lang.keywordHelpDesc_7")),u.Eb(5),u.Tc(u.nc(82,50,"lang.keywordHelpDesc_8")),u.Eb(5),u.Tc(u.nc(87,52,"lang.keywordHelpDesc_9")),u.Eb(5),u.Tc(u.nc(92,54,"lang.keywordHelpDesc_10")))},directives:[S.e,S.f,M.a,Y.a,Z.t,S.d,Dt.h,Dt.g,Dt.a,I.k,Dt.d,Ut.a,Dt.c,_.a,Ft.b,nt.a,Z.w,O.c,T.a,Re.c,Re.a,o.J,o.u,o.v,k.c,w.b,o.c,o.o,o.E,o.t,o.w,w.d,k.j,Z.s,D.b,o.A,it.a,I.o,Re.d,er.d,Qe.a,Qe.c,Qe.g,Qe.h,B.n,B.c,B.i,B.b,B.m,Yr,er.a,er.e,B.h,B.a,He.a,ze.d,ze.e,ze.b,B.l],pipes:[m.d,U.a],styles:[".basketActionsList[_ngcontent-%COMP%]    .mat-expansion-panel-body{height:400px;overflow:auto}.mat-chip[_ngcontent-%COMP%]{padding:25px!important}textarea.mat-input-element[_ngcontent-%COMP%]{padding:0;margin:0}"]}),sc),dc=((oc=function(){function t(e,n,a,i,r){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.data=i,this.dialogRef=r,this.allEntities=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.http.get("../rest/entities").subscribe((function(e){[{id:"ALL_ENTITIES",keyword:"ALL_ENTITIES",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:t.translate.instant("lang.allEntities")},{id:"ENTITIES_JUST_BELOW",keyword:"ENTITIES_JUST_BELOW",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:t.translate.instant("lang.immediatelyBelowMyPrimaryEntity")},{id:"ENTITIES_BELOW",keyword:"ENTITIES_BELOW",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:t.translate.instant("lang.belowAllMyEntities")},{id:"ALL_ENTITIES_BELOW",keyword:"ALL_ENTITIES_BELOW",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:t.translate.instant("lang.belowMyPrimaryEntity")},{id:"MY_ENTITIES",keyword:"MY_ENTITIES",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:t.translate.instant("lang.myEntities")},{id:"MY_PRIMARY_ENTITY",keyword:"MY_PRIMARY_ENTITY",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:t.translate.instant("lang.myPrimaryEntity")},{id:"SAME_LEVEL_ENTITIES",keyword:"SAME_LEVEL_ENTITIES",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:t.translate.instant("lang.sameLevelMyPrimaryEntity")},{id:"ENTITIES_JUST_UP",keyword:"ENTITIES_JUST_UP",parent:"#",icon:"fa fa-hashtag",allowed:!0,text:t.translate.instant("lang.immediatelySuperiorMyPrimaryEntity")}].forEach((function(e){t.allEntities.push(e)})),e.entities.forEach((function(e){t.allEntities.push(e)}))}),(function(e){t.notify.handleErrors(e)}))}},{key:"initService",value:function(){var t=this;this.allEntities.forEach((function(e){e.state={opened:!1,selected:!1},t.data.action.redirects.forEach((function(t){(e.id===t.keyword&&"ENTITY"===t.redirect_mode||e.id===t.entity_id&&"ENTITY"===t.redirect_mode)&&(e.state={opened:!0,selected:!0})}))})),$("#jstree").jstree({checkbox:{three_state:!1},core:{force_text:!0,themes:{name:"proton",responsive:!0},data:this.allEntities},plugins:["checkbox","search"]}),$("#jstree").on("select_node.jstree",(function(e,n){t.data.action.redirects.push(n.node.original.keyword?{action_id:t.data.action.id,entity_id:"",keyword:n.node.id,redirect_mode:"ENTITY"}:{action_id:t.data.action.id,entity_id:n.node.id,keyword:"",redirect_mode:"ENTITY"})})).on("deselect_node.jstree",(function(e,n){t.data.action.redirects.forEach((function(e){if(n.node.original.keyword){if(e.keyword===n.node.original.keyword){var a=t.data.action.redirects.indexOf(e);t.data.action.redirects.splice(a,1)}}else if(e.entity_id===n.node.id){var i=t.data.action.redirects.indexOf(e);t.data.action.redirects.splice(i,1)}}))})).jstree();var e=!1;$("#jstree_search").keyup((function(){e&&clearTimeout(e),e=setTimeout((function(){var t=$("#jstree_search").val();$("#jstree").jstree(!0).search(t)}),250)}))}},{key:"initService2",value:function(){var t=this;this.allEntities.forEach((function(e){e.state={opened:!1,selected:!1},t.data.action.redirects.forEach((function(t){(e.id===t.keyword&&"USERS"===t.redirect_mode||e.id===t.entity_id&&"USERS"===t.redirect_mode)&&(e.state={opened:!0,selected:!0})}))})),$("#jstree2").jstree({checkbox:{three_state:!1},core:{force_text:!0,themes:{name:"proton",responsive:!0},data:this.allEntities},plugins:["checkbox","search"]}),$("#jstree2").on("select_node.jstree",(function(e,n){t.data.action.redirects.push(n.node.original.keyword?{action_id:t.data.action.id,entity_id:"",keyword:n.node.id,redirect_mode:"USERS"}:{action_id:t.data.action.id,entity_id:n.node.id,keyword:"",redirect_mode:"USERS"})})).on("deselect_node.jstree",(function(e,n){t.data.action.redirects.forEach((function(e){if(n.node.original.keyword){if(e.keyword===n.node.original.keyword){var a=t.data.action.redirects.indexOf(e);t.data.action.redirects.splice(a,1)}}else if(e.entity_id===n.node.id){var i=t.data.action.redirects.indexOf(e);t.data.action.redirects.splice(i,1)}}))})).jstree();var e=!1;$("#jstree_search2").keyup((function(){e&&clearTimeout(e),e=setTimeout((function(){var t=$("#jstree_search2").val();$("#jstree2").jstree(!0).search(t)}),250)}))}},{key:"saveSettings",value:function(){this.dialogRef.close(this.data)}}]),t}()).\u0275fac=function(t){return new(t||oc)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(z.a),u.Tb(z.h))},oc.\u0275cmp=u.Nb({type:oc,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&u.Oc(Kr,!0),2&t&&u.Cc(n=u.ic())&&(e.statusInput=n.first)},decls:109,vars:72,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["settingGroupsBasket","ngForm"],[1,"container-fluid"],[1,"col-md-6"],["id","usedInActionPage","name","usedInActionPage","color","primary",3,"ngModel","ngModelChange"],["id","usedInBasketlist","name","usedInBasketlist","color","primary",3,"ngModel","ngModelChange"],[4,"ngIf"],[3,"label"],["matInput","","name","clause","matTextareaAutosize","","matAutosizeMinRows","1",3,"title","placeholder","ngModel","ngModelChange"],["role","list",2,"width","400px","padding","5px"],[2,"font-size","10px"],[2,"border","1px black solid","padding","3px","font-size","10px"],["mat-line","",2,"font-weight","bold","font-size","10px"],["mat-line","",2,"font-size","10px"],[1,"divider-modal"],["mat-raised-button","","type","submit","color","primary",2,"margin","auto",3,"disabled","click"],[3,"opened"],["matInput","","id","jstree_search","name","jstree_search","type","text",3,"placeholder"],["id","jstree"],[3,"opened",4,"ngIf"],["mat-tab-label",""],["matInput","","id","jstree_search2","name","jstree_search2","type","text",3,"placeholder"],["id","jstree2"]],template:function(t,e){1&t&&(u.Zb(0,"div",0),u.Zb(1,"h2",1),u.Sc(2),u.mc(3,"translate"),u.Zb(4,"small"),u.Sc(5),u.Yb(),u.Yb(),u.Zb(6,"mat-dialog-content"),u.Zb(7,"form",null,2),u.Zb(9,"div",3),u.Zb(10,"div",4),u.Zb(11,"mat-checkbox",5),u.hc("ngModelChange",(function(t){return e.data.action.used_in_action_page=t})),u.Sc(12),u.mc(13,"translate"),u.Yb(),u.Yb(),u.Zb(14,"div",4),u.Zb(15,"mat-checkbox",6),u.hc("ngModelChange",(function(t){return e.data.action.used_in_basketlist=t})),u.Sc(16),u.mc(17,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(18,"mat-tab-group"),u.Qc(19,ac,13,8,"mat-tab",7),u.Zb(20,"mat-tab",8),u.mc(21,"translate"),u.Zb(22,"mat-form-field"),u.Zb(23,"textarea",9),u.hc("ngModelChange",(function(t){return e.data.action.where_clause=t})),u.mc(24,"translate"),u.mc(25,"translate"),u.Yb(),u.Yb(),u.Zb(26,"mat-accordion"),u.Zb(27,"mat-expansion-panel"),u.Zb(28,"mat-expansion-panel-header"),u.Zb(29,"mat-panel-title"),u.Sc(30),u.mc(31,"translate"),u.Yb(),u.Yb(),u.Zb(32,"mat-list",10),u.Zb(33,"p",11),u.Sc(34),u.mc(35,"translate"),u.Yb(),u.Zb(36,"div",12),u.Zb(37,"b"),u.Sc(38,"DESTINATION = @my_primary_entity or DESTINATION in (@subentities[@my_primary_entity])"),u.Yb(),u.Yb(),u.Zb(39,"h4",13),u.Sc(40,"@user :"),u.Yb(),u.Zb(41,"p",14),u.Sc(42),u.mc(43,"translate"),u.Yb(),u.Zb(44,"h4",13),u.Sc(45,"@user_id :"),u.Yb(),u.Zb(46,"p",14),u.Sc(47),u.mc(48,"translate"),u.Yb(),u.Zb(49,"h4",13),u.Sc(50,"@email :"),u.Yb(),u.Zb(51,"p",14),u.Sc(52),u.mc(53,"translate"),u.Yb(),u.Zb(54,"h4",13),u.Sc(55,"@my_entities :"),u.Yb(),u.Zb(56,"p",14),u.Sc(57),u.mc(58,"translate"),u.Yb(),u.Zb(59,"h4",13),u.Sc(60,"@my_entities_id :"),u.Yb(),u.Zb(61,"p",14),u.Sc(62),u.mc(63,"translate"),u.Yb(),u.Zb(64,"h4",13),u.Sc(65,"@my_primary_entity :"),u.Yb(),u.Zb(66,"p",14),u.Sc(67),u.mc(68,"translate"),u.Yb(),u.Zb(69,"h4",13),u.Sc(70,"@my_primary_entity_id :"),u.Yb(),u.Zb(71,"p",14),u.Sc(72),u.mc(73,"translate"),u.Yb(),u.Zb(74,"h4",13),u.Sc(75," @subentities[('entity_1',...,'entity_n')] :"),u.Yb(),u.Zb(76,"p",14),u.Sc(77),u.mc(78,"translate"),u.Yb(),u.Zb(79,"h4",13),u.Sc(80,"@parent_entity['entity_id'] :"),u.Yb(),u.Zb(81,"p",14),u.Sc(82),u.mc(83,"translate"),u.Yb(),u.Zb(84,"h4",13),u.Sc(85,"@sisters_entities['entity_id'] : "),u.Yb(),u.Zb(86,"p",14),u.Sc(87),u.mc(88,"translate"),u.Yb(),u.Zb(89,"h4",13),u.Sc(90,"@entity_type['type'] :"),u.Yb(),u.Zb(91,"p",14),u.Sc(92),u.mc(93,"translate"),u.Yb(),u.Zb(94,"h4",13),u.Sc(95,"@all_entities :"),u.Yb(),u.Zb(96,"p",14),u.Sc(97),u.mc(98,"translate"),u.Yb(),u.Zb(99,"h4",13),u.Sc(100," @immediate_children['entity_1',..., 'entity_id'] :"),u.Yb(),u.Zb(101,"p",14),u.Sc(102),u.mc(103,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Ub(104,"span",15),u.Zb(105,"mat-dialog-actions"),u.Zb(106,"button",16),u.hc("click",(function(){return e.saveSettings()})),u.Sc(107),u.mc(108,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(2),u.Uc("",u.nc(3,28,"lang.actionParameters")," "),u.Eb(3),u.Tc(e.data.action.label_action),u.Eb(6),u.sc("ngModel",e.data.action.used_in_action_page),u.Eb(1),u.Uc(" ",u.nc(13,30,"lang.usedInActionPage"),""),u.Eb(3),u.sc("ngModel",e.data.action.used_in_basketlist),u.Eb(1),u.Uc(" ",u.nc(17,32,"lang.usedInBasketlist"),""),u.Eb(3),u.sc("ngIf","redirect"==e.data.action.keyword),u.Eb(1),u.tc("label",u.nc(21,34,"lang.otherParameters")),u.Eb(3),u.tc("title",u.nc(24,36,"lang.whereClauseAction")),u.tc("placeholder",u.nc(25,38,"lang.whereClauseAction")),u.sc("ngModel",e.data.action.where_clause),u.Eb(7),u.Uc(" ",u.nc(31,40,"lang.keywordHelp")," "),u.Eb(4),u.Tc(u.nc(35,42,"lang.keywordHelpDesc_11")),u.Eb(8),u.Tc(u.nc(43,44,"lang.keywordHelpDesc_1")),u.Eb(5),u.Tc(u.nc(48,46,"lang.keywordHelpDesc_12")),u.Eb(5),u.Tc(u.nc(53,48,"lang.keywordHelpDesc_2")),u.Eb(5),u.Tc(u.nc(58,50,"lang.keywordHelpDesc_3")),u.Eb(5),u.Tc(u.nc(63,52,"lang.keywordHelpDesc_13")),u.Eb(5),u.Tc(u.nc(68,54,"lang.keywordHelpDesc_4")),u.Eb(5),u.Tc(u.nc(73,56,"lang.keywordHelpDesc_14")),u.Eb(5),u.Tc(u.nc(78,58,"lang.keywordHelpDesc_5")),u.Eb(5),u.Tc(u.nc(83,60,"lang.keywordHelpDesc_6")),u.Eb(5),u.Tc(u.nc(88,62,"lang.keywordHelpDesc_7")),u.Eb(5),u.Tc(u.nc(93,64,"lang.keywordHelpDesc_8")),u.Eb(5),u.Tc(u.nc(98,66,"lang.keywordHelpDesc_9")),u.Eb(5),u.Tc(u.nc(103,68,"lang.keywordHelpDesc_10")),u.Eb(4),u.sc("disabled",!e.data.action.used_in_basketlist&&!e.data.action.used_in_action_page),u.Eb(1),u.Tc(u.nc(108,70,"lang.validate")))},directives:[z.i,z.f,o.J,o.u,o.v,He.a,o.t,o.w,Re.c,Z.t,Re.a,k.c,w.b,w.d,o.c,Qe.a,Qe.c,Qe.g,Qe.h,Dt.a,I.k,z.c,D.b,Re.d],pipes:[m.d],styles:[".mat-dialog-content[_ngcontent-%COMP%]{height: 65vh;}"]}),oc),bc=((cc=function(){function t(e,n,a,i){_classCallCheck(this,t),this.http=e,this.notify=n,this.data=a,this.dialogRef=i,this.actionAll=[],this.newBasketGroup={}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.http.get("../rest/actions").subscribe((function(e){e.actions.forEach((function(e){e.where_clause="",e.used_in_basketlist=!1,e.default_action_list=!1,e.used_in_action_page=!0,e.statuses=[],e.redirects=[],e.checked=!1,t.actionAll.push(e)}))}),(function(e){t.notify.handleErrors(e)})),this.data.groups.forEach((function(e){t.data.linkedGroups.forEach((function(n){if(e.group_id===n.group_id){var a=t.data.groups.indexOf(e);t.data.groups.splice(a,1)}}))}))}},{key:"validateForm",value:function(t){0===this.data.linkedGroups.length?(this.actionAll[0].used_in_action_page=!0,this.actionAll[0].default_action_list=!0,this.actionAll[0].used_in_basketlist=!0,this.actionAll[0].checked=!0,this.newBasketGroup.groupActions=this.actionAll):this.newBasketGroup=JSON.parse(JSON.stringify(this.data.linkedGroups[this.data.linkedGroups.length-1])),this.newBasketGroup.basket_id=this.data.basketId,this.newBasketGroup.group_id=t.group_id,this.newBasketGroup.group_desc=t.group_desc,this.dialogRef.close(this.newBasketGroup)}}]),t}()).\u0275fac=function(t){return new(t||cc)(u.Tb(f.b),u.Tb(y.a),u.Tb(z.a),u.Tb(z.h))},cc.\u0275cmp=u.Nb({type:cc,selectors:[["ng-component"]],decls:7,vars:4,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title","","color","primary"],[4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],[3,"click"]],template:function(t,e){1&t&&(u.Zb(0,"div",0),u.Zb(1,"h2",1),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"mat-dialog-content"),u.Zb(5,"mat-nav-list"),u.Qc(6,rc,2,1,"span",2),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(2),u.Tc(u.nc(3,2,"lang.linkGroup")),u.Eb(4),u.sc("ngForOf",e.data.groups))},directives:[z.i,z.f,Dt.h,Z.s,Z.t,Dt.d],pipes:[m.d],styles:[".mat-dialog-content[_ngcontent-%COMP%]{height: 65vh;}"]}),cc),uc=["snav2"],mc=["adminMenuTemplate"];function fc(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-nav-list"),u.Zb(1,"h3",14),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"a",15),u.hc("click",(function(){return u.Hc(n),u.lc().prepareDoctypeAdd("firstLevel")})),u.Zb(5,"mat-icon",16),u.Ub(6,"i",17),u.Ub(7,"i",18),u.Yb(),u.Zb(8,"p",19),u.Sc(9),u.mc(10,"translate"),u.Yb(),u.Yb(),u.Zb(11,"a",15),u.hc("click",(function(){return u.Hc(n),u.lc().prepareDoctypeAdd("secondLevel")})),u.Zb(12,"mat-icon",16),u.Ub(13,"i",17),u.Ub(14,"i",18),u.Yb(),u.Zb(15,"p",19),u.Sc(16),u.mc(17,"translate"),u.Yb(),u.Yb(),u.Zb(18,"a",15),u.hc("click",(function(){return u.Hc(n),u.lc().prepareDoctypeAdd("doctype")})),u.Zb(19,"mat-icon",16),u.Ub(20,"i",20),u.Ub(21,"i",18),u.Yb(),u.Zb(22,"p",19),u.Sc(23),u.mc(24,"translate"),u.Yb(),u.Yb(),u.Yb()}2&t&&(u.Eb(2),u.Tc(u.nc(3,4,"lang.actions")),u.Eb(7),u.Uc(" ",u.nc(10,6,"lang.addFirstLevel")," "),u.Eb(7),u.Uc(" ",u.nc(17,8,"lang.addSecondLevel")," "),u.Eb(7),u.Uc(" ",u.nc(24,10,"lang.addDoctype")," "))}function pc(t,e){1&t&&(u.Zb(0,"div",21),u.Ub(1,"mat-spinner",22),u.Yb())}function gc(t,e){if(1&t&&(u.Zb(0,"mat-card",23),u.Zb(1,"mat-form-field"),u.Ub(2,"input",24),u.mc(3,"translate"),u.Yb(),u.Ub(4,"div",25),u.Zb(5,"div",26),u.Sc(6),u.mc(7,"translate"),u.Yb(),u.Yb()),2&t){var n=u.lc();u.Eb(2),u.tc("placeholder",u.nc(3,3,"lang.search")),u.Eb(4),u.Vc(" ",n.doctypes.length," ",u.nc(7,5,"lang.documentTypesAlt"),"")}}function hc(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",31),u.Zb(1,"div",32),u.Zb(2,"mat-form-field"),u.Zb(3,"input",38),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).currentFirstLevel.doctypes_first_level_id=t})),u.mc(4,"translate"),u.mc(5,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(3),u.tc("title",u.nc(4,4,"lang.id")),u.tc("placeholder",u.nc(5,6,"lang.id")),u.sc("ngModel",a.currentFirstLevel.doctypes_first_level_id)("disabled",!a.creationMode)}}function vc(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",39),u.hc("click",(function(){return u.Hc(n),u.lc(2).removeFirstLevel()})),u.Sc(1),u.mc(2,"translate"),u.Yb()}if(2&t){u.lc();var a=u.Dc(3),i=u.lc();u.sc("disabled",!a.form.valid||i.currentFirstLevel.hasChildren),u.Eb(1),u.Tc(u.nc(2,2,"lang.delete"))}}function yc(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",40),u.hc("click",(function(){return u.Hc(n),u.lc(2).readMode()})),u.Sc(1),u.mc(2,"translate"),u.Yb()}2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.cancel")))}function Cc(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-tab",27),u.mc(1,"translate"),u.Zb(2,"form",28,29),u.Qc(4,hc,6,8,"div",30),u.Zb(5,"div",31),u.Zb(6,"div",32),u.Zb(7,"mat-form-field"),u.Zb(8,"input",33),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().currentFirstLevel.doctypes_first_level_label=t})),u.mc(9,"translate"),u.mc(10,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(11,"div",31),u.Zb(12,"div",34),u.Zb(13,"button",35),u.hc("click",(function(){return u.Hc(n),u.lc().saveFirstLevel()})),u.Sc(14),u.mc(15,"translate"),u.Yb(),u.Qc(16,vc,3,4,"button",36),u.Qc(17,yc,3,3,"button",37),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.Dc(3),i=u.lc();u.tc("label",u.nc(1,9,"lang.firstLevelDoctype")),u.Eb(4),u.sc("ngIf",!i.creationMode),u.Eb(4),u.tc("title",u.nc(9,11,"lang.label")),u.tc("placeholder",u.nc(10,13,"lang.label")),u.sc("ngModel",i.currentFirstLevel.doctypes_first_level_label),u.Eb(5),u.sc("disabled",!a.form.valid),u.Eb(1),u.Tc(u.nc(15,15,"lang.save")),u.Eb(2),u.sc("ngIf",!i.creationMode),u.Eb(1),u.sc("ngIf",i.creationMode)}}function Ec(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",31),u.Zb(1,"div",32),u.Zb(2,"mat-form-field"),u.Zb(3,"input",47),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).currentSecondLevel.doctypes_second_level_id=t})),u.mc(4,"translate"),u.mc(5,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(3),u.tc("title",u.nc(4,4,"lang.id")),u.tc("placeholder",u.nc(5,6,"lang.id")),u.sc("ngModel",a.currentSecondLevel.doctypes_second_level_id)("disabled",!a.creationMode)}}function Sc(t,e){if(1&t&&(u.Zb(0,"mat-option",48),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n.doctypes_first_level_id),u.Eb(1),u.Uc(" ",n.doctypes_first_level_label," ")}}function Mc(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",49),u.hc("click",(function(){return u.Hc(n),u.lc(2).removeSecondLevel()})),u.Sc(1),u.mc(2,"translate"),u.Yb()}if(2&t){u.lc();var a=u.Dc(3),i=u.lc();u.sc("disabled",!a.form.valid||i.currentSecondLevel.hasChildren),u.Eb(1),u.Tc(u.nc(2,2,"lang.delete"))}}function xc(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",50),u.hc("click",(function(){return u.Hc(n),u.lc(2).readMode()})),u.Sc(1),u.mc(2,"translate"),u.Yb()}2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.cancel")))}function Yc(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-tab",27),u.mc(1,"translate"),u.Zb(2,"form",28,41),u.Qc(4,Ec,6,8,"div",30),u.Zb(5,"div",31),u.Zb(6,"div",32),u.Zb(7,"mat-form-field"),u.Zb(8,"input",42),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().currentSecondLevel.doctypes_second_level_label=t})),u.mc(9,"translate"),u.mc(10,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(11,"div",31),u.Zb(12,"div",32),u.Zb(13,"mat-form-field"),u.Zb(14,"mat-select",43),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().currentSecondLevel.doctypes_first_level_id=t})),u.mc(15,"translate"),u.mc(16,"translate"),u.Qc(17,Sc,2,2,"mat-option",44),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(18,"div",31),u.Zb(19,"div",34),u.Zb(20,"button",35),u.hc("click",(function(){return u.Hc(n),u.lc().saveSecondLevel()})),u.Sc(21),u.mc(22,"translate"),u.Yb(),u.Qc(23,Mc,3,4,"button",45),u.Qc(24,xc,3,3,"button",46),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.Dc(3),i=u.lc();u.tc("label",u.nc(1,13,"lang.secondLevelDoctype")),u.Eb(4),u.sc("ngIf",!i.creationMode),u.Eb(4),u.tc("title",u.nc(9,15,"lang.label")),u.tc("placeholder",u.nc(10,17,"lang.label")),u.sc("ngModel",i.currentSecondLevel.doctypes_second_level_label),u.Eb(6),u.tc("title",u.nc(15,19,"lang.firstLevelAttached")),u.tc("placeholder",u.nc(16,21,"lang.firstLevelAttached")),u.sc("ngModel",i.currentSecondLevel.doctypes_first_level_id),u.Eb(3),u.sc("ngForOf",i.firstLevels),u.Eb(3),u.sc("disabled",!a.form.valid),u.Eb(1),u.Tc(u.nc(22,23,"lang.save")),u.Eb(2),u.sc("ngIf",!i.creationMode),u.Eb(1),u.sc("ngIf",i.creationMode)}}function Zc(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",31),u.Zb(1,"div",32),u.Zb(2,"mat-form-field"),u.Zb(3,"input",66),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).currentType.type_id=t})),u.mc(4,"translate"),u.mc(5,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(3),u.tc("title",u.nc(4,4,"lang.id")),u.tc("placeholder",u.nc(5,6,"lang.id")),u.sc("ngModel",a.currentType.type_id)("disabled",!a.creationMode)}}function _c(t,e){if(1&t&&(u.Zb(0,"mat-option",48),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n.doctypes_second_level_id),u.Eb(1),u.Uc(" ",n.doctypes_second_level_label," ")}}function kc(t,e){if(1&t&&(u.Zb(0,"mat-option",48),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n),u.Eb(1),u.Uc(" ",n," ")}}function wc(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",67),u.hc("click",(function(){return u.Hc(n),u.lc(2).removeType()})),u.mc(1,"translate"),u.Sc(2),u.mc(3,"translate"),u.Yb()}if(2&t){u.lc();var a=u.Dc(3);u.tc("matTooltip",u.nc(1,3,"lang.toolTipDeleteDoctype")),u.sc("disabled",!a.form.valid),u.Eb(2),u.Tc(u.nc(3,5,"lang.delete"))}}function Oc(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",50),u.hc("click",(function(){return u.Hc(n),u.lc(2).readMode()})),u.Sc(1),u.mc(2,"translate"),u.Yb()}2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.cancel")))}function Tc(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-tab",27),u.mc(1,"translate"),u.Zb(2,"form",28,51),u.Qc(4,Zc,6,8,"div",30),u.Zb(5,"div",31),u.Zb(6,"div",32),u.Zb(7,"mat-form-field"),u.Zb(8,"input",52),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().currentType.description=t})),u.mc(9,"translate"),u.mc(10,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(11,"div",31),u.Zb(12,"div",32),u.Zb(13,"mat-form-field"),u.Zb(14,"mat-select",53),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().currentType.doctypes_second_level_id=t})),u.mc(15,"translate"),u.mc(16,"translate"),u.Qc(17,_c,2,2,"mat-option",44),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(18,"div",31),u.Zb(19,"div",32),u.Zb(20,"mat-form-field"),u.Zb(21,"input",54),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().currentType.process_delay=t})),u.mc(22,"translate"),u.mc(23,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(24,"div",31),u.Zb(25,"div",32),u.Zb(26,"mat-form-field"),u.Zb(27,"input",55),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().currentType.delay1=t})),u.mc(28,"translate"),u.mc(29,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(30,"div",31),u.Zb(31,"div",32),u.Zb(32,"mat-form-field"),u.Zb(33,"input",56),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().currentType.delay2=t})),u.mc(34,"translate"),u.mc(35,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(36,"div",31),u.Zb(37,"div",32),u.Zb(38,"mat-form-field"),u.Zb(39,"mat-select",57),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().currentType.process_mode=t})),u.mc(40,"translate"),u.mc(41,"translate"),u.Qc(42,kc,2,2,"mat-option",44),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(43,"mat-accordion"),u.Zb(44,"mat-expansion-panel"),u.Zb(45,"mat-expansion-panel-header"),u.Zb(46,"mat-panel-title"),u.Sc(47),u.mc(48,"translate"),u.Yb(),u.Yb(),u.Zb(49,"div",31),u.Zb(50,"div",32),u.Zb(51,"mat-form-field"),u.Zb(52,"mat-select",58),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().currentType.retention_final_disposition=t})),u.mc(53,"translate"),u.mc(54,"translate"),u.Ub(55,"mat-option",59),u.Zb(56,"mat-option",60),u.Sc(57),u.mc(58,"translate"),u.Yb(),u.Zb(59,"mat-option",61),u.Sc(60),u.mc(61,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(62,"div",31),u.Zb(63,"div",62),u.Zb(64,"mat-form-field"),u.Zb(65,"input",63),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().currentType.retention_rule=t})),u.mc(66,"translate"),u.mc(67,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(68,"div",62),u.Zb(69,"mat-form-field"),u.Zb(70,"input",64),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().currentType.duration_current_use=t})),u.mc(71,"translate"),u.mc(72,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(73,"div",31),u.Zb(74,"div",34),u.Zb(75,"button",35),u.hc("click",(function(){return u.Hc(n),u.lc().saveType()})),u.Sc(76),u.mc(77,"translate"),u.Yb(),u.Qc(78,wc,4,7,"button",65),u.Qc(79,Oc,3,3,"button",46),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.Dc(3),i=u.lc();u.tc("label",u.nc(1,38,"lang.doctype")),u.Eb(4),u.sc("ngIf",!i.creationMode),u.Eb(4),u.tc("title",u.nc(9,40,"lang.label")),u.tc("placeholder",u.nc(10,42,"lang.label")),u.sc("ngModel",i.currentType.description),u.Eb(6),u.tc("title",u.nc(15,44,"lang.secondLevelAttached")),u.tc("placeholder",u.nc(16,46,"lang.secondLevelAttached")),u.sc("ngModel",i.currentType.doctypes_second_level_id),u.Eb(3),u.sc("ngForOf",i.secondLevels),u.Eb(4),u.tc("title",u.nc(22,48,"lang.processDelayDay")),u.tc("placeholder",u.nc(23,50,"lang.processDelayDay")),u.sc("ngModel",i.currentType.process_delay),u.Eb(6),u.tc("title",u.nc(28,52,"lang.delay1")),u.tc("placeholder",u.nc(29,54,"lang.delay1")),u.sc("ngModel",i.currentType.delay1),u.Eb(6),u.tc("title",u.nc(34,56,"lang.delay2")),u.tc("placeholder",u.nc(35,58,"lang.delay2")),u.sc("ngModel",i.currentType.delay2),u.Eb(6),u.tc("title",u.nc(40,60,"lang.processMode")),u.tc("placeholder",u.nc(41,62,"lang.processMode")),u.sc("ngModel",i.currentType.process_mode),u.Eb(3),u.sc("ngForOf",i.processModes),u.Eb(5),u.Uc(" ",u.nc(48,64,"lang.archival")," "),u.Eb(5),u.tc("title",u.nc(53,66,"lang.retentionFinalDisposition")),u.tc("placeholder",u.nc(54,68,"lang.retentionFinalDisposition")),u.sc("ngModel",i.currentType.retention_final_disposition),u.Eb(5),u.Tc(u.nc(58,70,"lang.destruction")),u.Eb(3),u.Tc(u.nc(61,72,"lang.conservation")),u.Eb(5),u.tc("title",u.nc(66,74,"lang.retentionRule")),u.tc("placeholder",u.nc(67,76,"lang.retentionRule")),u.sc("ngModel",i.currentType.retention_rule),u.Eb(5),u.tc("title",u.nc(71,78,"lang.durationCurrentUse")),u.tc("placeholder",u.nc(72,80,"lang.durationCurrentUse")),u.sc("ngModel",i.currentType.duration_current_use),u.Eb(5),u.sc("disabled",!a.form.valid),u.Eb(1),u.Tc(u.nc(77,82,"lang.save")),u.Eb(2),u.sc("ngIf",!i.creationMode),u.Eb(1),u.sc("ngIf",i.creationMode)}}function Ic(t,e){if(1&t&&(u.Zb(0,"mat-option",9),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("disabled",n.disabled)("value",n.type_id),u.Eb(1),u.Uc(" ",n.description," ")}}var Dc,Uc,Pc=((Uc=function(){function t(e,n,a,i,r,c,o){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.dialog=i,this.headerService=r,this.appService=c,this.viewContainerRef=o,this.config={},this.doctypes=[],this.currentType=!1,this.currentSecondLevel=!1,this.currentFirstLevel=!1,this.firstLevels=!1,this.types=!1,this.secondLevels=!1,this.processModes=!1,this.loading=!1,this.creationMode=!1,this.newSecondLevel=!1,this.newFirstLevel=!1,this.displayedColumns=["label","use","mandatory","column"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.documentTypes")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/doctypes").subscribe((function(e){t.doctypes=e.structure,setTimeout((function(){$("#jstree").jstree({checkbox:{three_state:!1},core:{force_text:!0,themes:{name:"proton",responsive:!0},multiple:!1,data:t.doctypes,check_callback:function(t,e,n,a,i){if("move_node"===t)return void 0===i.ref||(!isNaN(parseFloat(e.id))&&isFinite(e.id)&&0===i.ref.id.indexOf("secondlevel_")||0===e.id.indexOf("secondlevel_")&&0===i.ref.id.indexOf("firstlevel_"))&&!(i.ref.children.indexOf(e.id)>-1)}},dnd:{is_draggable:function(t){return this.secondLevelSelected=t[0].id.replace("secondlevel_",""),!!(!isNaN(parseFloat(this.secondLevelSelected))&&isFinite(this.secondLevelSelected)||!isNaN(parseFloat(t[0].id))&&isFinite(t[0].id))}},plugins:["search","dnd","contextmenu"]});var e=!1;$("#jstree_search").keyup((function(){e&&clearTimeout(e),e=setTimeout((function(){var t=$("#jstree_search").val();$("#jstree").jstree(!0).search(t)}),250)})),$("#jstree").on("select_node.jstree",(function(e,n){!1===t.sidenavRight.opened&&t.sidenavRight.open(),t.loadDoctype(n,!1)})).on("move_node.jstree",(function(e,n){t.loadDoctype(n,!0)})).jstree()}),0),$("#jstree").jstree("select_node",t.doctypes[0]),t.loading=!1}),(function(e){t.notify.handleErrors(e)}))}},{key:"loadDoctype",value:function(t,e){var n=this;this.creationMode=!1,t.node.original.type_id?(this.currentFirstLevel=!1,this.currentSecondLevel=!1,this.http.get("../rest/doctypes/types/"+t.node.original.type_id).subscribe((function(a){n.currentType=a.doctype,n.secondLevels=a.secondLevel,n.processModes=["NORMAL","SVA","SVR"],e&&(n.currentType?(n.newSecondLevel=t.parent.replace("secondlevel_",""),!isNaN(parseFloat(n.newSecondLevel))&&isFinite(n.newSecondLevel)?n.currentType.doctypes_second_level_id!==n.newSecondLevel&&(n.currentType.doctypes_second_level_id=n.newSecondLevel,n.saveType()):alert(n.translate.instant("lang.cantMoveDoctype"))):alert(n.translate.instant("lang.noDoctypeSelected")))}),(function(t){n.notify.error(t.error.errors)}))):t.node.original.doctypes_second_level_id?(this.currentFirstLevel=!1,this.currentType=!1,this.http.get("../rest/doctypes/secondLevel/"+t.node.original.doctypes_second_level_id).subscribe((function(a){n.currentSecondLevel=a.secondLevel,n.firstLevels=a.firstLevel,e&&(n.currentSecondLevel?(n.newFirstLevel=t.parent.replace("firstlevel_",""),!isNaN(parseFloat(n.newFirstLevel))&&isFinite(n.newFirstLevel)?n.currentSecondLevel.doctypes_first_level_id!==n.newFirstLevel&&(n.currentSecondLevel.doctypes_first_level_id=n.newFirstLevel,n.saveSecondLevel()):alert(n.translate.instant("lang.cantMoveFirstLevel"))):alert(n.translate.instant("lang.noFirstLevelSelected")))}),(function(t){n.notify.error(t.error.errors)}))):(this.currentSecondLevel=!1,this.currentType=!1,this.http.get("../rest/doctypes/firstLevel/"+t.node.original.doctypes_first_level_id).subscribe((function(t){n.currentFirstLevel=t.firstLevel}),(function(t){n.notify.error(t.error.errors)})))}},{key:"resetDatas",value:function(){this.currentFirstLevel=!1,this.currentSecondLevel=!1,this.currentType=!1}},{key:"refreshTree",value:function(){$("#jstree").jstree(!0).settings.core.data=this.doctypes,$("#jstree").jstree("refresh")}},{key:"saveFirstLevel",value:function(){var t=this;this.creationMode?this.http.post("../rest/doctypes/firstLevel",this.currentFirstLevel).subscribe((function(e){t.resetDatas(),t.readMode(),t.doctypes=e.doctypeTree,t.refreshTree(),t.notify.success(t.translate.instant("lang.firstLevelAdded"))}),(function(e){t.notify.error(e.error.errors)})):this.http.put("../rest/doctypes/firstLevel/"+this.currentFirstLevel.doctypes_first_level_id,this.currentFirstLevel).subscribe((function(e){t.doctypes=e.doctypeTree,t.refreshTree(),t.notify.success(t.translate.instant("lang.firstLevelUpdated"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"saveSecondLevel",value:function(){var t=this;this.creationMode?this.http.post("../rest/doctypes/secondLevel",this.currentSecondLevel).subscribe((function(e){t.resetDatas(),t.readMode(),t.doctypes=e.doctypeTree,t.refreshTree(),t.notify.success(t.translate.instant("lang.secondLevelAdded"))}),(function(e){t.notify.error(e.error.errors)})):this.http.put("../rest/doctypes/secondLevel/"+this.currentSecondLevel.doctypes_second_level_id,this.currentSecondLevel).subscribe((function(e){t.doctypes=e.doctypeTree,t.refreshTree(),t.notify.success(t.translate.instant("lang.secondLevelUpdated"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"saveType",value:function(){var t=this;this.creationMode?this.http.post("../rest/doctypes/types",this.currentType).subscribe((function(e){t.resetDatas(),t.readMode(),t.doctypes=e.doctypeTree,t.refreshTree(),t.notify.success(t.translate.instant("lang.documentTypeAdded"))}),(function(e){t.notify.error(e.error.errors)})):this.http.put("../rest/doctypes/types/"+this.currentType.type_id,this.currentType).subscribe((function(e){t.doctypes=e.doctypeTree,t.refreshTree(),t.notify.success(t.translate.instant("lang.documentTypeUpdated"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"readMode",value:function(){this.creationMode=!1,$("#jstree").jstree("deselect_all"),$("#jstree").jstree("select_node",this.doctypes[0])}},{key:"removeFirstLevel",value:function(){var t=this;confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+this.currentFirstLevel.doctypes_first_level_label+" \xbb")&&this.http.delete("../rest/doctypes/firstLevel/"+this.currentFirstLevel.doctypes_first_level_id).subscribe((function(e){t.resetDatas(),t.readMode(),t.doctypes=e.doctypeTree,t.refreshTree(),t.doctypes[0]?$("#jstree").jstree("select_node",t.doctypes[0]):!0===t.sidenavRight.opened&&t.sidenavRight.close(),t.notify.success(t.translate.instant("lang.firstLevelDeleted"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"removeSecondLevel",value:function(){var t=this;confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+this.currentSecondLevel.doctypes_second_level_label+" \xbb")&&this.http.delete("../rest/doctypes/secondLevel/"+this.currentSecondLevel.doctypes_second_level_id).subscribe((function(e){t.resetDatas(),t.readMode(),t.doctypes=e.doctypeTree,t.refreshTree(),$("#jstree").jstree("select_node",t.doctypes[0]),t.notify.success(t.translate.instant("lang.secondLevelDeleted"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"removeType",value:function(){var t=this;confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+this.currentType.description+" \xbb")&&this.http.delete("../rest/doctypes/types/"+this.currentType.type_id).subscribe((function(e){0===e.deleted?(t.resetDatas(),t.readMode(),t.doctypes=e.doctypeTree,t.refreshTree(),$("#jstree").jstree("select_node",t.doctypes[0]),t.notify.success(t.translate.instant("lang.documentTypeDeleted"))):(t.config={panelClass:"maarch-modal",data:{count:e.deleted,types:e.doctypes}},t.dialogRef=t.dialog.open(Fc,t.config),t.dialogRef.afterClosed().subscribe((function(e){e&&t.http.put("../rest/doctypes/types/"+t.currentType.type_id+"/redirect",e).subscribe((function(e){t.resetDatas(),t.readMode(),t.doctypes=e.doctypeTree,t.refreshTree(),$("#jstree").jstree("select_node",t.doctypes[0]),t.notify.success(t.translate.instant("lang.documentTypeDeleted"))}),(function(e){t.notify.error(e.error.errors)})),t.dialogRef=null})))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"prepareDoctypeAdd",value:function(t){var e=this;this.currentFirstLevel=!1,this.currentSecondLevel=!1,this.currentType=!1,"firstLevel"===t&&(this.currentFirstLevel={}),"secondLevel"===t&&(this.currentSecondLevel={}),"doctype"===t&&(this.currentType={}),!1===this.sidenavRight.opened&&this.sidenavRight.open(),$("#jstree").jstree("deselect_all"),this.http.get("../rest/administration/doctypes/new").subscribe((function(t){e.firstLevels=t.firstLevel,e.secondLevels=t.secondLevel,e.processModes=["NORMAL","SVA","SVR"]}),(function(t){e.notify.error(t.error.errors)})),this.creationMode=t}}]),t}()).\u0275fac=function(t){return new(t||Uc)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(z.b),u.Tb(p.a),u.Tb(g.a),u.Tb(u.R))},Uc.\u0275cmp=u.Nb({type:Uc,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(uc,!0),u.Oc(mc,!0),u.ad(V.a,!0),u.ad(N.a,!0)),2&t&&(u.Cc(n=u.ic())&&(e.sidenavRight=n.first),u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.paginator=n.first),u.Cc(n=u.ic())&&(e.sort=n.first))},decls:22,vars:14,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",1,"col-md-4","col-sm-12",3,"mode","fixedInViewport","opened"],["snav2",""],[3,"label",4,"ngIf"],["mat-subheader",""],["mat-list-item","",3,"click"],["color","primary","mat-list-icon","",1,"fa-stack","fa-fw",2,"margin-left","-3px","font-size","18px"],[1,"fa","fa-folder"],[1,"fa","fa-plus",2,"position","absolute"],["mat-line",""],[1,"fa","fa-file"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],["matInput","","id","jstree_search","name","jstree_search","type","text",3,"placeholder"],["id","jstree"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],[3,"label"],[1,"form-horizontal",2,"overflow","hidden"],["firstLevelForm","ngForm"],["class","form-group",4,"ngIf"],[1,"form-group"],[1,"col-sm-12"],["matInput","","required","","name","doctypes_first_level_label","id","doctypes_first_level_label","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary",3,"disabled","click"],["type","button","mat-raised-button","","color","warn",3,"disabled","click",4,"ngIf"],["type","button","mat-raised-button","","color","default",3,"click",4,"ngIf"],["matInput","","required","","name","doctypes_first_level_id","id","doctypes_first_level_id","type","text","maxlength","255",3,"ngModel","title","placeholder","disabled","ngModelChange"],["type","button","mat-raised-button","","color","warn",3,"disabled","click"],["type","button","mat-raised-button","","color","default",3,"click"],["secondLevelForm","ngForm"],["matInput","","required","","name","doctypes_second_level_label","id","doctypes_second_level_label","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["id","doctypes_first_level_id","name","doctypes_first_level_id","required","",3,"title","placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","warn",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","default",3,"click",4,"ngIf"],["matInput","","required","","name","doctypes_second_level_id","id","doctypes_second_level_id","type","text","maxlength","255",3,"ngModel","title","placeholder","disabled","ngModelChange"],[3,"value"],["mat-raised-button","","color","warn",3,"disabled","click"],["mat-raised-button","","color","default",3,"click"],["typeForm","ngForm"],["matInput","","required","","name","description","id","description","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["id","doctypes_second_level_id","name","doctypes_second_level_id","required","",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","required","","name","process_delay","id","process_delay","type","number","pattern","^[0-9]*$",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","required","","name","delay1","id","delay1","type","number","pattern","^[0-9]*$",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","required","","name","delay2","id","delay2","type","number","maxlength","255","pattern","^[0-9]*$",3,"ngModel","title","placeholder","ngModelChange"],["id","process_mode","name","process_mode","required","",3,"title","placeholder","ngModel","ngModelChange"],["id","retention_final_disposition","name","retention_final_disposition",3,"title","placeholder","ngModel","ngModelChange"],["value",""],["value","destruction"],["value","conservation"],[1,"col-sm-6"],["matInput","","name","retention_rule","id","retention_rule","type","text","maxlength","15",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","duration_current_use","id","duration_current_use","type","text","pattern","^[0-9]*$",3,"ngModel","title","placeholder","ngModelChange"],["mat-raised-button","","color","warn",3,"disabled","matTooltip","click",4,"ngIf"],["matInput","","required","","name","type_id","id","type_id","type","text","maxlength","255",3,"ngModel","title","placeholder","disabled","ngModelChange"],["mat-raised-button","","color","warn",3,"disabled","matTooltip","click"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,fc,25,12,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,pc,2,0,"div",9),u.Qc(14,gc,8,7,"mat-card",10),u.Yb(),u.Yb(),u.Yb(),u.Zb(15,"mat-sidenav",11,12),u.Zb(17,"mat-nav-list"),u.Zb(18,"mat-tab-group"),u.Qc(19,Cc,18,17,"mat-tab",13),u.Qc(20,Yc,25,25,"mat-tab",13),u.Qc(21,Tc,80,84,"mat-tab",13),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading),u.Eb(1),u.sc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!1),u.Eb(4),u.sc("ngIf",e.currentFirstLevel||"firstLevel"==e.creationMode),u.Eb(1),u.sc("ngIf",e.currentSecondLevel||"secondeLevel"==e.creationMode),u.Eb(1),u.sc("ngIf",e.currentType||"doctype"==e.creationMode))},directives:[S.e,S.f,M.a,Y.a,Z.t,S.d,Dt.h,Re.c,Dt.g,Dt.d,Ut.a,Dt.c,I.k,O.c,T.a,k.c,w.b,Re.a,o.J,o.u,o.v,o.c,o.E,o.o,o.t,o.w,D.b,it.a,Z.s,I.o,o.z,o.A,Qe.a,Qe.c,Qe.g,Qe.h,Ft.b],pipes:[m.d],encapsulation:2}),Uc),Fc=((Dc=function t(e,n,a){_classCallCheck(this,t),this.http=e,this.data=n,this.dialogRef=a}).\u0275fac=function(t){return new(t||Dc)(u.Tb(f.b),u.Tb(z.a),u.Tb(z.h))},Dc.\u0275cmp=u.Nb({type:Dc,selectors:[["ng-component"]],decls:25,vars:19,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["changeDoctypeForm","ngForm"],["role","alert",1,"alert-message","alert-message-info"],["color","primary","mat-list-icon","",1,"fa","fa-file","fa-2x"],["mat-line",""],["id","new_type_id","name","new_type_id","required","",3,"title","placeholder","ngModel","ngModelChange"],[3,"disabled","value",4,"ngFor","ngForOf"],["mat-raised-button","","color","warn","type","submit",3,"disabled","click"],[3,"disabled","value"]],template:function(t,e){if(1&t&&(u.Zb(0,"div",0),u.Zb(1,"h2",1),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"mat-dialog-content"),u.Zb(5,"form",null,2),u.Zb(7,"div",3),u.Zb(8,"mat-list"),u.Zb(9,"mat-list-item"),u.Ub(10,"mat-icon",4),u.Zb(11,"p",5),u.Zb(12,"b"),u.Sc(13),u.Yb(),u.Sc(14),u.mc(15,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(16,"mat-form-field"),u.Zb(17,"mat-select",6),u.hc("ngModelChange",(function(t){return e.data.new_type_id=t})),u.mc(18,"translate"),u.mc(19,"translate"),u.Qc(20,Ic,2,3,"mat-option",7),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(21,"mat-dialog-actions"),u.Zb(22,"button",8),u.hc("click",(function(){return e.dialogRef.close(e.data)})),u.Sc(23),u.mc(24,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t){var n=u.Dc(6);u.Eb(2),u.Tc(u.nc(3,9,"lang.documentTypeReplacement")),u.Eb(11),u.Tc(e.data.count),u.Eb(1),u.Uc(" ",u.nc(15,11,"lang.documents")," "),u.Eb(3),u.tc("title",u.nc(18,13,"lang.transferToDoctype")),u.tc("placeholder",u.nc(19,15,"lang.transferToDoctype")),u.sc("ngModel",e.data.new_type_id),u.Eb(3),u.sc("ngForOf",e.data.types),u.Eb(2),u.sc("disabled",!n.form.valid),u.Eb(1),u.Tc(u.nc(24,17,"lang.delete"))}},directives:[z.i,z.f,o.J,o.u,o.v,Dt.a,Dt.d,Ut.a,Dt.c,I.k,k.c,it.a,o.E,o.t,o.w,Z.s,z.c,D.b,I.o],pipes:[m.d],encapsulation:2}),Dc),Lc=["adminMenuTemplate"];function jc(t,e){1&t&&(u.Zb(0,"mat-nav-list"),u.Zb(1,"h3",11),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"a",12),u.Ub(5,"mat-icon",13),u.Zb(6,"p",14),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(2),u.Tc(u.nc(3,2,"lang.actions")),u.Eb(5),u.Uc(" ",u.nc(8,4,"lang.add")," "))}function Rc(t,e){1&t&&(u.Zb(0,"div",15),u.Ub(1,"mat-spinner",16),u.Yb())}function Qc(t,e){1&t&&(u.Zb(0,"mat-header-cell",38),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.label")))}function Ac(t,e){if(1&t&&(u.Zb(0,"mat-cell",39),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.title," ")}}function Hc(t,e){if(1&t&&(u.Zb(0,"mat-header-cell",38),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=u.lc(2);u.Jb("hide-for-mobile",n.appService.getViewMode()),u.Eb(1),u.Tc(u.nc(2,3,"lang.description"))}}function zc(t,e){if(1&t&&(u.Zb(0,"mat-cell",39),u.Sc(1),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.Jb("hide-for-mobile",a.appService.getViewMode()),u.Eb(1),u.Uc(" ",n.description," ")}}function $c(t,e){1&t&&(u.Zb(0,"mat-header-cell",38),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.type")))}function Vc(t,e){if(1&t&&(u.Zb(0,"mat-cell",39),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.typeLabel," ")}}function Nc(t,e){1&t&&u.Ub(0,"mat-header-cell",40)}function Jc(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-cell",41),u.Zb(1,"button",42),u.hc("click",(function(t){u.Hc(n);var a=e.$implicit,i=u.lc(2);return t.stopPropagation(),i.delete(a)})),u.mc(2,"translate"),u.Ub(3,"mat-icon",43),u.Yb(),u.Yb()}2&t&&(u.Eb(1),u.tc("matTooltip",u.nc(2,1,"lang.delete")))}function Gc(t,e){1&t&&u.Ub(0,"mat-header-row")}function Bc(t,e){1&t&&(u.Ub(0,"mat-row",44),u.mc(1,"translate")),2&t&&(u.uc("routerLink","/administration/diffusionModels/",e.$implicit.id,""),u.tc("matTooltip",u.nc(1,2,"lang.view")))}function Wc(t,e){if(1&t&&(u.Zb(0,"mat-card",17),u.Zb(1,"div",18),u.Zb(2,"div",19),u.Zb(3,"mat-form-field"),u.Ub(4,"input",20),u.mc(5,"translate"),u.Yb(),u.Yb(),u.Zb(6,"div",19),u.Ub(7,"mat-paginator",21,22),u.Yb(),u.Yb(),u.Zb(9,"mat-table",23,24),u.Xb(11,25),u.Qc(12,Qc,3,3,"mat-header-cell",26),u.Qc(13,Ac,2,1,"mat-cell",27),u.Wb(),u.Xb(14,28),u.Qc(15,Hc,3,5,"mat-header-cell",29),u.Qc(16,zc,2,3,"mat-cell",30),u.Wb(),u.Xb(17,31),u.Qc(18,$c,3,3,"mat-header-cell",26),u.Qc(19,Vc,2,1,"mat-cell",27),u.Wb(),u.Xb(20,32),u.Qc(21,Nc,1,0,"mat-header-cell",33),u.Qc(22,Jc,4,3,"mat-cell",34),u.Wb(),u.Qc(23,Gc,1,0,"mat-header-row",35),u.Qc(24,Bc,2,4,"mat-row",36),u.Yb(),u.Zb(25,"div",37),u.Sc(26),u.mc(27,"translate"),u.Yb(),u.Yb()),2&t){var n=u.lc();u.Eb(4),u.tc("placeholder",u.nc(5,10,"lang.filterBy")),u.sc("formControl",n.adminService.getFilterField()),u.Eb(3),u.sc("length",100)("hidePageSize",!0)("pageSize",10),u.Eb(2),u.sc("dataSource",n.adminService.getDataSource()),u.Eb(14),u.sc("matHeaderRowDef",n.displayedColumns),u.Eb(1),u.sc("matRowDefColumns",n.displayedColumns),u.Eb(2),u.Vc("",n.listTemplates.length," ",u.nc(27,12,"lang.workflowModels"),"")}}var qc,Xc=((qc=function(){function t(e,n,a,i,r,c,o,s,l){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.dialog=i,this.headerService=r,this.appService=c,this.functions=o,this.adminService=s,this.viewContainerRef=l,this.loading=!1,this.listTemplates=[],this.listTemplatesForAssign=[],this.displayedColumns=["title","description","typeLabel","actions"],this.filterColumns=["title","description","typeLabel"]}return _createClass(t,[{key:"ngOnInit",value:function(){return Object(yt.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.workflowModels")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,t.next=5,this.getListemplates();case 5:this.loadList(),this.loading=!1;case 7:case"end":return t.stop()}}),t,this)})))}},{key:"getListemplates",value:function(){var t=this;return new Promise((function(e,n){t.http.get("../rest/listTemplates").pipe(Object(l.a)((function(e){return e.listTemplates=e.listTemplates.filter((function(t){return null===t.entityId&&["visaCircuit","opinionCircuit"].indexOf(t.type)>-1})).map((function(e){return Object.assign(Object.assign({},e),{typeLabel:t.translate.instant("lang."+e.type)})})),e.listTemplates})),Object(wt.tap)((function(n){t.listTemplates=n,e(!0)})),Object(Ct.a)((function(){return t.loading=!1})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(J.of)(!1)}))).subscribe()}))}},{key:"loadList",value:function(){var t=this;setTimeout((function(){t.adminService.setDataSource("admin_listmodels",t.listTemplates,t.sort,t.paginator,t.filterColumns)}),0)}},{key:"delete",value:function(t){var e=this;this.dialog.open(W.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete"),msg:this.translate.instant("lang.confirmAction")}}).afterClosed().pipe(Object(q.a)((function(t){return"ok"===t})),Object(X.a)((function(){return e.http.delete("../rest/listTemplates/"+t.id)})),Object(wt.tap)((function(){e.listTemplates=e.listTemplates.filter((function(e){return e.id!==t.id})),e.notify.success(e.translate.instant("lang.diffusionModelDeleted")),e.loadList()})),Object(b.a)((function(t){return e.notify.handleSoftErrors(t),Object(J.of)(!1)}))).subscribe()}}]),t}()).\u0275fac=function(t){return new(t||qc)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(z.b),u.Tb(p.a),u.Tb(g.a),u.Tb(C.a),u.Tb(It),u.Tb(u.R))},qc.\u0275cmp=u.Nb({type:qc,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(Lc,!0),u.ad(V.a,!0),u.ad(N.a,!0)),2&t&&(u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.paginator=n.first),u.Cc(n=u.ic())&&(e.sort=n.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/diffusionModels/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row",2,"margin","0px"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSortDisableClear","","matSort","",3,"dataSource"],["table",""],["matColumnDef","title"],["mat-sort-header","","style","flex:2;",4,"matHeaderCellDef"],["style","flex:2;",4,"matCellDef"],["matColumnDef","description"],["mat-sort-header","","style","flex:2;",3,"hide-for-mobile",4,"matHeaderCellDef"],["style","flex:2;",3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","typeLabel"],["matColumnDef","actions"],["style","flex:1;",4,"matHeaderCellDef"],["style","justify-content: flex-end;flex:1;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],[2,"flex","1"],[2,"justify-content","flex-end","flex","1"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,jc,9,6,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,Rc,2,0,"div",9),u.Qc(14,Wc,28,14,"mat-card",10),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading))},directives:[S.e,S.f,M.a,Y.a,Z.t,Dt.h,Dt.g,Dt.d,r.f,Ut.a,Dt.c,I.k,O.c,T.a,k.c,w.b,o.c,o.t,o.i,V.a,B.n,N.a,B.c,B.i,B.b,B.k,B.m,B.h,N.b,B.a,D.b,Ft.b,B.j,B.l,r.d],pipes:[m.d],encapsulation:2}),qc),Kc=n("jbvq"),to=n("XkWp"),eo=["snav2"],no=["appVisaWorkflow"],ao=["appAvisWorkflow"];function io(t,e){1&t&&(u.Zb(0,"div",15),u.Ub(1,"mat-spinner",16),u.Yb())}function ro(t,e){if(1&t&&(u.Zb(0,"mat-option",27),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n.id),u.Eb(1),u.Uc(" ",n.label," ")}}function co(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",28),u.hc("click",(function(){return u.Hc(n),u.lc(2).cancelModification()})),u.Sc(1),u.mc(2,"translate"),u.Yb()}2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.cancel")))}function oo(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-card",17),u.Zb(1,"mat-tab-group"),u.Zb(2,"mat-tab",12),u.mc(3,"translate"),u.Zb(4,"form",18,19),u.hc("ngSubmit",(function(){return u.Hc(n),u.lc().onSubmit()})),u.Zb(6,"mat-form-field"),u.Zb(7,"mat-select",20),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().diffusionModel.type=t})),u.mc(8,"translate"),u.Qc(9,ro,2,2,"mat-option",21),u.Yb(),u.Yb(),u.Zb(10,"mat-form-field"),u.Zb(11,"input",22),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().diffusionModel.title=t})),u.mc(12,"translate"),u.mc(13,"translate"),u.Yb(),u.Yb(),u.Zb(14,"mat-form-field"),u.Zb(15,"textarea",23),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().diffusionModel.description=t})),u.mc(16,"translate"),u.mc(17,"translate"),u.Yb(),u.Yb(),u.Zb(18,"div",24),u.Zb(19,"button",25),u.Sc(20),u.mc(21,"translate"),u.Yb(),u.Qc(22,co,3,3,"button",26),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc();u.Eb(2),u.tc("label",u.nc(3,14,"lang.informations")),u.Eb(5),u.tc("placeholder",u.nc(8,16,"lang.diffusionType")),u.sc("ngModel",a.diffusionModel.type)("disabled",!a.creationMode),u.Eb(2),u.sc("ngForOf",a.itemTypeList),u.Eb(2),u.tc("title",u.nc(12,18,"lang.label")),u.tc("placeholder",u.nc(13,20,"lang.label")),u.sc("ngModel",a.diffusionModel.title),u.Eb(4),u.tc("title",u.nc(16,22,"lang.description")),u.tc("placeholder",u.nc(17,24,"lang.description")),u.sc("ngModel",a.diffusionModel.description),u.Eb(4),u.sc("disabled",!a.isValidForm()),u.Eb(1),u.Tc(u.nc(21,26,"lang.save")),u.Eb(2),u.sc("ngIf",!a.creationMode)}}function so(t,e){1&t&&u.Ub(0,"app-visa-workflow",29,30),2&t&&u.sc("showListModels",!1)("showComment",!1)("adminMode",!0)}function lo(t,e){1&t&&u.Ub(0,"app-avis-workflow",31,32),2&t&&u.sc("showListModels",!1)("adminMode",!0)}var bo,uo=((bo=function(){function t(e,n,a,i,r,c,o){_classCallCheck(this,t),this.translate=e,this.http=n,this.route=a,this.router=i,this.notify=r,this.headerService=c,this.appService=o,this.loading=!0,this.diffusionModel={title:"",description:"",type:"opinionCircuit",items:[]},this.diffusionModelClone={},this.itemTypeList=[{id:"visaCircuit",label:this.translate.instant("lang.visaCircuit")},{id:"opinionCircuit",label:this.translate.instant("lang.opinionCircuit")}],this.listDiffModified=!1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.route.params.subscribe((function(e){return Object(yt.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e.id){t.next=4;break}this.headerService.setHeader(this.translate.instant("lang.diffusionModelCreation")),this.creationMode=!0,this.loading=!1,t.next=8;break;case 4:return this.creationMode=!1,t.next=7,this.getTemplate(e.id);case 7:"visaCircuit"===this.diffusionModel.type?this.loadVisaCircuit():this.loadOpinionCircuit();case 8:case"end":return t.stop()}}),t,this)})))}))}},{key:"getTemplate",value:function(t){var e=this;return new Promise((function(n,a){e.http.get("../rest/listTemplates/"+t).pipe(Object(d.a)((function(a){e.diffusionModel=a.listTemplate,e.diffusionModel.id=t,n(!0)})),Object(Ct.a)((function(){return e.loading=!1})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(c.a)(!1)}))).subscribe()}))}},{key:"loadVisaCircuit",value:function(){var t=this,e={id:this.diffusionModel.id,type:"entity"};setTimeout((function(){return Object(yt.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.appVisaWorkflow.resetWorkflow(),t.next=3,this.appVisaWorkflow.addItemToWorkflow(e,!1);case 3:this.diffusionModel.items=this.appVisaWorkflow.getWorkflow(),this.diffusionModelClone=JSON.parse(JSON.stringify(this.diffusionModel));case 5:case"end":return t.stop()}}),t,this)})))}),0)}},{key:"loadOpinionCircuit",value:function(){var t=this,e={id:this.diffusionModel.id,type:"entity"};setTimeout((function(){return Object(yt.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.appAvisWorkflow.resetWorkflow(),t.next=3,this.appAvisWorkflow.addItemToWorkflow(e);case 3:this.diffusionModel.items=this.appAvisWorkflow.getWorkflow(),this.diffusionModelClone=JSON.parse(JSON.stringify(this.diffusionModel));case 5:case"end":return t.stop()}}),t,this)})))}),0)}},{key:"onSubmit",value:function(){this.creationMode?this.createTemplate():this.updateTemplate()}},{key:"createTemplate",value:function(){var t=this;this.http.post("../rest/listTemplates?admin=true",this.formatCircuit()).pipe(Object(d.a)((function(){t.router.navigate(["/administration/diffusionModels"]),t.notify.success(t.translate.instant("lang.diffusionModelAdded"))})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(c.a)(!1)}))).subscribe()}},{key:"updateTemplate",value:function(){var t=this;this.http.put("../rest/listTemplates/"+this.diffusionModel.id,this.formatCircuit()).pipe(Object(d.a)((function(){t.router.navigate(["/administration/diffusionModels"]),t.notify.success(t.translate.instant("lang.diffusionModelUpdated"))})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(c.a)(!1)}))).subscribe()}},{key:"formatCircuit",value:function(){return"visaCircuit"===this.diffusionModel.type?(this.diffusionModel.items=this.appVisaWorkflow.getWorkflow().map((function(t,e){return{id:t.item_id,type:"user",mode:t.requested_signature?"sign":"visa",sequence:e}})),this.diffusionModel):(this.diffusionModel.items=this.appAvisWorkflow.getWorkflow().map((function(t,e){return{id:t.item_id,type:"user",mode:"avis",sequence:e}})),this.diffusionModel)}},{key:"checkPrivileges",value:function(t){var e=!0;return t.forEach((function(t){t.hasPrivilege||(e=!1)})),e}},{key:"isValidForm",value:function(){return"visaCircuit"===this.diffusionModel.type?void 0!==this.appVisaWorkflow&&this.appVisaWorkflow.getWorkflow().length>0&&""!==this.diffusionModel.title&&this.checkPrivileges(this.appVisaWorkflow.getWorkflow()):void 0!==this.appAvisWorkflow&&this.appAvisWorkflow.getWorkflow().length>0&&""!==this.diffusionModel.title&&this.checkPrivileges(this.appAvisWorkflow.getWorkflow())}},{key:"cancelModification",value:function(){this.diffusionModel=JSON.parse(JSON.stringify(this.diffusionModelClone)),"visaCircuit"===this.diffusionModel.type?this.loadVisaCircuit():this.loadOpinionCircuit()}}]),t}()).\u0275fac=function(t){return new(t||bo)(u.Tb(m.e),u.Tb(f.b),u.Tb(r.a),u.Tb(r.c),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a))},bo.\u0275cmp=u.Nb({type:bo,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(eo,!0),u.ad(no,!0),u.ad(ao,!0)),2&t&&(u.Cc(n=u.ic())&&(e.sidenavRight=n.first),u.Cc(n=u.ic())&&(e.appVisaWorkflow=n.first),u.Cc(n=u.ic())&&(e.appAvisWorkflow=n.first))},decls:21,vars:16,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",1,"col-md-4","col-xs-11",3,"mode","fixedInViewport","opened"],["snav2",""],[3,"label"],[3,"showListModels","showComment","adminMode",4,"ngIf"],[3,"showListModels","adminMode",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[3,"ngSubmit"],["diffusionModelForm","ngForm"],["id","type","name","type",3,"placeholder","ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","name","title","maxlength","255","required","",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","name","description","matTextareaAutosize","","matAutosizeMinRows","1","matAutosizeMaxRows","5","maxlength","255",3,"title","placeholder","ngModel","ngModelChange"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary",3,"disabled"],["mat-raised-button","","type","button","color","default",3,"click",4,"ngIf"],[3,"value"],["mat-raised-button","","type","button","color","default",3,"click"],[3,"showListModels","showComment","adminMode"],["appVisaWorkflow",""],[3,"showListModels","adminMode"],["appAvisWorkflow",""]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Zb(1,"mat-sidenav-content"),u.Zb(2,"div",1),u.Zb(3,"div",2),u.Zb(4,"div",3),u.Ub(5,"header-left"),u.Yb(),u.Zb(6,"div",4),u.Ub(7,"header-right"),u.Yb(),u.Yb(),u.Ub(8,"div",5),u.Yb(),u.Zb(9,"div",6),u.Zb(10,"div",7),u.Qc(11,io,2,0,"div",8),u.Qc(12,oo,23,28,"mat-card",9),u.Yb(),u.Yb(),u.Yb(),u.Zb(13,"mat-sidenav",10,11),u.Zb(15,"mat-nav-list"),u.Zb(16,"mat-tab-group"),u.Zb(17,"mat-tab",12),u.mc(18,"translate"),u.Qc(19,so,2,3,"app-visa-workflow",13),u.Qc(20,lo,2,2,"app-avis-workflow",14),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(3),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading),u.Eb(1),u.sc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!e.appService.getViewMode()),u.Eb(4),u.tc("label",u.nc(18,14,"lang."+e.diffusionModel.type)),u.Eb(2),u.sc("ngIf","visaCircuit"===e.diffusionModel.type),u.Eb(1),u.sc("ngIf","opinionCircuit"===e.diffusionModel.type))},directives:[S.e,S.f,M.a,Y.a,Z.t,S.d,Dt.h,Re.c,Re.a,O.c,T.a,o.J,o.u,o.v,k.c,it.a,o.t,o.w,Z.s,w.b,o.c,o.o,o.E,w.d,D.b,I.o,Kc.a,to.a],pipes:[m.d],styles:[".mat-list-item[draggable=false][_ngcontent-%COMP%]:hover{background:inherit}.mat-list-item[draggable=false][_ngcontent-%COMP%]{cursor:not-allowed!important}.mat-list-item[draggable=true][_ngcontent-%COMP%]{cursor:pointer}.mat-list-item[draggable=true][_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:move}.primaryColor[_ngcontent-%COMP%]{color:#135f7f}.redColor[_ngcontent-%COMP%]{color:#e4342b}"]}),bo),mo=["listFilter"];function fo(t,e){1&t&&(u.Zb(0,"div",13),u.Ub(1,"mat-spinner"),u.Yb())}function po(t,e){if(1&t&&(u.Zb(0,"mat-option",14),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n),u.Eb(1),u.Uc(" ",n," ")}}function go(t,e){if(1&t&&(u.Zb(0,"mat-option",14),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n),u.Eb(1),u.Uc(" ",n," ")}}function ho(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",15),u.Zb(1,"mat-form-field",5),u.Zb(2,"mat-label"),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Zb(5,"mat-select",16),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().exportModel.delimiter=t})),u.mc(6,"translate"),u.Qc(7,go,2,2,"mat-option",7),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc();u.Eb(3),u.Tc(u.nc(4,5,"lang.delimiter")),u.Eb(2),u.tc("placeholder",u.nc(6,7,"lang.delimiter")),u.sc("ngModel",a.exportModel.delimiter)("disabled","csv"!=a.exportModel.format),u.Eb(2),u.sc("ngForOf",a.delimiters)}}var vo,yo=((vo=function(){function t(e,n,a,i,r,c){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.data=i,this.localStorage=r,this.headerService=c,this.loading=!1,this.loadingExport=!1,this.delimiters=[";",",","TAB"],this.formats=["csv"],this.exportModel={delimiter:";",format:"csv"}}return _createClass(t,[{key:"ngOnInit",value:function(){return Object(yt.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.setConfiguration();case 1:case"end":return t.stop()}}),t,this)})))}},{key:"exportData",value:function(){var t=this;this.localStorage.save("exportEntities_"+this.headerService.user.id,JSON.stringify(this.exportModel)),this.loadingExport=!0,this.http.put("../rest/entities/export",this.exportModel,{responseType:"blob"}).pipe(Object(d.a)((function(e){if("text/html"!==e.type){var n,a,i,r,c=document.createElement("a");c.href=window.URL.createObjectURL(e),a=(n=new Date).getDate(),i=n.getMonth()+1,r=n.getFullYear(),a<10&&(a="0"+a),i<10&&(i="0"+i),n=a+"-"+i+"-"+r,c.setAttribute("download","export_entities_maarch_"+n+"."+t.exportModel.format.toLowerCase()),document.body.appendChild(c),c.click()}else alert(t.translate.instant("lang.tooMuchDatas"))})),Object(Ct.a)((function(){return t.loadingExport=!1})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"setConfiguration",value:function(){null!==this.localStorage.get("exportEntitiesFields_"+this.headerService.user.id)&&(this.exportModel.delimiter=JSON.parse(this.localStorage.get("exportEntitiesFields_"+this.headerService.user.id)).delimiter)}}]),t}()).\u0275fac=function(t){return new(t||vo)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(z.a),u.Tb(tt.a),u.Tb(p.a))},vo.\u0275cmp=u.Nb({type:vo,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&u.Oc(mo,!0),2&t&&u.Cc(n=u.ic())&&(e.listFilter=n.first)},decls:24,vars:23,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["mat-dialog-content",""],["class","loader",4,"ngIf"],[1,"row"],["appearance","outline"],[3,"placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","col-md-9",4,"ngIf"],[1,"divider-modal"],["mat-dialog-actions","",1,"actions"],["mat-raised-button","","mat-button","","color","primary",3,"click"],["mat-raised-button","","mat-button","",3,"mat-dialog-close"],[1,"loader"],[3,"value"],[1,"col-md-9"],[3,"placeholder","ngModel","disabled","ngModelChange"]],template:function(t,e){1&t&&(u.Zb(0,"div",0),u.Zb(1,"h1",1),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"div",2),u.Qc(5,fo,2,0,"div",3),u.Zb(6,"div",4),u.Zb(7,"div"),u.Zb(8,"mat-form-field",5),u.Zb(9,"mat-label"),u.Sc(10),u.mc(11,"translate"),u.Yb(),u.Zb(12,"mat-select",6),u.hc("ngModelChange",(function(t){return e.exportModel.format=t})),u.mc(13,"translate"),u.Qc(14,po,2,2,"mat-option",7),u.Yb(),u.Yb(),u.Yb(),u.Qc(15,ho,8,9,"div",8),u.Yb(),u.Yb(),u.Ub(16,"span",9),u.Zb(17,"div",10),u.Zb(18,"button",11),u.hc("click",(function(){return e.exportData()})),u.Sc(19),u.mc(20,"translate"),u.Yb(),u.Zb(21,"button",12),u.Sc(22),u.mc(23,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(2),u.Tc(u.nc(3,13,"lang.exportDatas")),u.Eb(3),u.sc("ngIf",e.loadingExport),u.Eb(2),u.Jb("col-md-12","csv"!=e.exportModel.format)("col-md-3","csv"==e.exportModel.format),u.Eb(3),u.Tc(u.nc(11,15,"lang.format")),u.Eb(2),u.tc("placeholder",u.nc(13,17,"lang.format")),u.sc("ngModel",e.exportModel.format),u.Eb(2),u.sc("ngForOf",e.formats),u.Eb(1),u.sc("ngIf","csv"==e.exportModel.format),u.Eb(4),u.Tc(u.nc(20,19,"lang.toExport")),u.Eb(3),u.Tc(u.nc(23,21,"lang.cancel")))},directives:[z.i,z.f,Z.t,k.c,k.g,it.a,o.t,o.w,Z.s,z.c,D.b,z.d,O.c,I.o],pipes:[m.d],styles:[".mat-dialog-container{position:relative}.mat-dialog-content[_ngcontent-%COMP%]{min-height:150px;padding-bottom:10px;overflow-x:hidden}.actions[_ngcontent-%COMP%], .loader[_ngcontent-%COMP%]{justify-content:center}.loader[_ngcontent-%COMP%]{position:absolute;display:flex;width:100%;left:0;top:0;height:100%;background:hsla(0,0%,100%,.6);z-index:1;align-items:center}"]}),vo),Co=n("y9tK"),Eo=["snav2"],So=["adminMenuTemplate"],Mo=["paginatorUsers"],xo=["paginatorTemplates"],Yo=["tableUsers"],Zo=["tableTemplates"],_o=["appDiffusionsList"],ko=["appVisaWorkflow"],wo=["appAvisWorkflow"];function Oo(t,e){if(1&t){var n=u.ac();u.Zb(0,"a",47),u.hc("click",(function(){u.Hc(n);var t=u.lc(2);return u.Dc(16).open(),t.prepareEntityAdd()})),u.Ub(1,"mat-icon",50),u.Zb(2,"p",49),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Yb()}2&t&&(u.Eb(3),u.Uc(" ",u.nc(4,1,"lang.add")," "))}var To=function(t){return{opacity:t}};function Io(t,e){if(1&t){var n=u.ac();u.Zb(0,"a",52),u.Zb(1,"mat-icon",53),u.Zb(2,"mat-slide-toggle",54),u.hc("click",(function(){u.Hc(n);var t=u.lc().$implicit;return u.lc(2).toggleRole(t),!1})),u.Yb(),u.Yb(),u.Zb(3,"p",55),u.hc("click",(function(){u.Hc(n);var t=u.lc().$implicit;return u.lc(2).toggleRole(t),!1})),u.Sc(4),u.Yb(),u.Yb()}if(2&t){var a=u.lc().$implicit;u.Eb(2),u.sc("checked",a.available),u.Eb(1),u.sc("ngStyle",u.zc(3,To,a.available?"":"0.5")),u.Eb(1),u.Uc(" ",a.label," ")}}function Do(t,e){if(1&t&&(u.Xb(0),u.Qc(1,Io,5,5,"a",51),u.Wb()),2&t){var n=e.$implicit;u.Eb(1),u.sc("ngIf","dest"!=n.id&&"cc"!=n.id)}}function Uo(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-nav-list"),u.Zb(1,"h3",45),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Qc(4,Oo,5,3,"a",46),u.Zb(5,"a",47),u.hc("click",(function(){return u.Hc(n),u.lc().openExportModal()})),u.Ub(6,"mat-icon",48),u.Zb(7,"p",49),u.Sc(8),u.mc(9,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Ub(10,"mat-divider"),u.Zb(11,"mat-nav-list"),u.Zb(12,"h3",45),u.Sc(13),u.mc(14,"translate"),u.Yb(),u.Qc(15,Do,2,1,"ng-container",21),u.Yb()}if(2&t){var a=u.lc();u.Eb(2),u.Tc(u.nc(3,5,"lang.actions")),u.Eb(2),u.sc("ngIf",!a.creationMode),u.Eb(4),u.Uc(" ",u.nc(9,7,"lang.toExport")," "),u.Eb(5),u.Tc(u.nc(14,9,"lang.additionalRoles")),u.Eb(2),u.sc("ngForOf",a.listTemplateRoles)}}function Po(t,e){1&t&&(u.Zb(0,"div",56),u.Ub(1,"mat-spinner",57),u.Yb())}function Fo(t,e){1&t&&(u.Zb(0,"mat-hint"),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.entityTreeInfo")))}function Lo(t,e){1&t&&(u.Zb(0,"mat-hint"),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.entityTreeInfoCreation")))}function jo(t,e){if(1&t&&(u.Zb(0,"mat-card",58),u.Zb(1,"mat-form-field"),u.Ub(2,"input",59),u.mc(3,"translate"),u.Qc(4,Fo,3,3,"mat-hint",60),u.Qc(5,Lo,3,3,"mat-hint",60),u.Yb(),u.Ub(6,"div",61),u.Zb(7,"div",62),u.Sc(8),u.mc(9,"translate"),u.Yb(),u.Yb()),2&t){var n=u.lc();u.Eb(2),u.tc("placeholder",u.nc(3,5,"lang.searchEntities")),u.Eb(2),u.sc("ngIf",!n.creationMode),u.Eb(1),u.sc("ngIf",n.creationMode),u.Eb(3),u.Vc(" ",n.entities.length," ",u.nc(9,7,"lang.entities"),"")}}function Ro(t,e){if(1&t&&(u.Zb(0,"mat-option",64),u.Sc(1),u.Yb()),2&t){var n=u.lc().$implicit;u.sc("value",n.entity_id),u.Eb(1),u.Uc(" ",n.entity_label," ")}}function Qo(t,e){if(1&t&&(u.Xb(0),u.Qc(1,Ro,2,2,"mat-option",63),u.Wb()),2&t){var n=e.$implicit,a=u.lc();u.Eb(1),u.sc("ngIf",!n.state.disabled&&n.entity_id!=a.currentEntity.entity_id||a.currentEntity.parent_entity_id==n.entity_id)}}function Ao(t,e){if(1&t&&(u.Zb(0,"mat-option",64),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n.id),u.Eb(1),u.Uc(" ",n.label," ")}}function Ho(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",16),u.Zb(1,"div",17),u.Zb(2,"mat-form-field"),u.Zb(3,"input",65),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().currentEntity.id=t})),u.mc(4,"translate"),u.mc(5,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc();u.Eb(3),u.tc("title",u.nc(4,3,"lang.technicalId")),u.tc("placeholder",u.nc(5,5,"lang.technicalId")),u.sc("ngModel",a.currentEntity.id)}}function zo(t,e){1&t&&(u.Ub(0,"input",69),u.mc(1,"translate"),u.mc(2,"translate")),2&t&&(u.tc("title",u.nc(1,2,"lang.siretCode")),u.tc("placeholder",u.nc(2,4,"lang.siretCode")))}function $o(t,e){if(1&t){var n=u.ac();u.Zb(0,"input",70),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).currentEntity.business_id=t})),u.mc(1,"translate"),u.mc(2,"translate"),u.Yb()}if(2&t){var a=u.lc(2);u.tc("title",u.nc(1,3,"lang.siretCode")),u.tc("placeholder",u.nc(2,5,"lang.siretCode")),u.sc("ngModel",a.currentEntity.business_id)}}function Vo(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",71),u.hc("click",(function(){return u.Hc(n),u.lc(2).addEntityToAnnuary()})),u.Ub(1,"mat-icon",72),u.Yb()}}function No(t,e){if(1&t&&(u.Zb(0,"div",16),u.Zb(1,"div",17),u.Zb(2,"mat-form-field"),u.Qc(3,zo,3,6,"input",66),u.Qc(4,$o,3,7,"input",67),u.Qc(5,Vo,2,0,"button",68),u.Yb(),u.Yb(),u.Yb()),2&t){var n=u.lc();u.Eb(3),u.sc("ngIf",!n.currentEntity.canSynchronizeSiret),u.Eb(1),u.sc("ngIf",n.currentEntity.canSynchronizeSiret),u.Eb(1),u.sc("ngIf",n.currentEntity.canSynchronizeSiret)}}function Jo(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",73),u.hc("click",(function(){return u.Hc(n),u.lc().removeEntity()})),u.Sc(1),u.mc(2,"translate"),u.Yb()}if(2&t){var a=u.lc(),i=u.Dc(21);u.sc("disabled",!i.form.valid||a.currentEntity.hasChildren),u.Eb(1),u.Tc(u.nc(2,2,"lang.delete"))}}function Go(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",74),u.hc("click",(function(){return u.Hc(n),u.lc().readMode()})),u.Sc(1),u.mc(2,"translate"),u.Yb()}2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.cancel")))}function Bo(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",81),u.hc("click",(function(){return u.Hc(n),u.lc(3).deleteDiffList()})),u.Sc(1),u.mc(2,"translate"),u.Yb()}2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.delete")))}function Wo(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",16),u.Zb(1,"div",40),u.Zb(2,"button",41),u.hc("click",(function(){return u.Hc(n),u.lc(2).saveDiffList()})),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Zb(5,"button",79),u.hc("click",(function(){u.Hc(n),u.lc();var t=u.Dc(5),e=u.lc();return t.loadListModel(e.currentEntity.id)})),u.Sc(6),u.mc(7,"translate"),u.Yb(),u.Qc(8,Bo,3,3,"button",80),u.Yb(),u.Yb()}if(2&t){u.lc();var a=u.Dc(5),i=u.lc();u.Eb(2),u.sc("disabled",a.hasEmptyDest()||!a.isModified()),u.Eb(1),u.Tc(u.nc(4,5,"lang.save")),u.Eb(2),u.sc("disabled",!a.isModified()),u.Eb(1),u.Tc(u.nc(7,7,"lang.cancel")),u.Eb(2),u.sc("ngIf",!a.isEmptyList()&&i.currentEntity.listTemplate.id)}}function qo(t,e){if(1&t&&(u.Zb(0,"mat-tab",13),u.mc(1,"translate"),u.Zb(2,"div",75),u.Zb(3,"div",76),u.Ub(4,"app-diffusions-list",77,78),u.Yb(),u.Qc(6,Wo,9,9,"div",24),u.Yb(),u.Yb()),2&t){var n=u.lc();u.tc("label",u.nc(1,4,"lang.diffusionList")),u.Eb(4),u.sc("adminMode",!0)("target","redirect"),u.Eb(2),u.sc("ngIf",n.currentEntity.entity_id)}}function Xo(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",16),u.Zb(1,"div",40),u.Zb(2,"button",41),u.hc("click",(function(){return u.Hc(n),u.lc(2).saveDiffListVisa()})),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Zb(5,"button",79),u.hc("click",(function(){u.Hc(n),u.lc();var t=u.Dc(5),e=u.lc();return t.loadListModel(e.currentEntity.id)})),u.Sc(6),u.mc(7,"translate"),u.Yb(),u.Yb(),u.Yb()}if(2&t){u.lc();var a=u.Dc(5);u.Eb(2),u.sc("disabled",!a.isModified()),u.Eb(1),u.Tc(u.nc(4,4,"lang.save")),u.Eb(2),u.sc("disabled",!a.isModified()),u.Eb(1),u.Tc(u.nc(7,6,"lang.cancel"))}}function Ko(t,e){if(1&t&&(u.Zb(0,"mat-tab",13),u.mc(1,"translate"),u.Zb(2,"div",82),u.Zb(3,"div",76),u.Ub(4,"app-visa-workflow",83,84),u.Yb(),u.Qc(6,Xo,8,8,"div",24),u.Yb(),u.Yb()),2&t){var n=u.lc();u.tc("label",u.nc(1,5,"lang.visaWorkflow")),u.Eb(4),u.sc("adminMode",!0)("showListModels",!1)("showComment",!1),u.Eb(2),u.sc("ngIf",n.currentEntity.entity_id)}}function ts(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",16),u.Zb(1,"div",40),u.Zb(2,"button",41),u.hc("click",(function(){return u.Hc(n),u.lc(2).saveDiffListOpinion()})),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Zb(5,"button",79),u.hc("click",(function(){u.Hc(n),u.lc();var t=u.Dc(5),e=u.lc();return t.loadListModel(e.currentEntity.id)})),u.Sc(6),u.mc(7,"translate"),u.Yb(),u.Yb(),u.Yb()}if(2&t){u.lc();var a=u.Dc(5);u.Eb(2),u.sc("disabled",!a.isModified()),u.Eb(1),u.Tc(u.nc(4,4,"lang.save")),u.Eb(2),u.sc("disabled",!a.isModified()),u.Eb(1),u.Tc(u.nc(7,6,"lang.cancel"))}}function es(t,e){if(1&t&&(u.Zb(0,"mat-tab",13),u.mc(1,"translate"),u.Zb(2,"div",85),u.Zb(3,"div",76),u.Ub(4,"app-avis-workflow",86,87),u.Yb(),u.Qc(6,ts,8,8,"div",24),u.Yb(),u.Yb()),2&t){var n=u.lc();u.tc("label",u.nc(1,4,"lang.avis")),u.Eb(4),u.sc("adminMode",!0)("showListModels",!1),u.Eb(2),u.sc("ngIf",n.currentEntity.entity_id)}}var ns=function(){return["/rest/autocomplete/users/administration"]};function as(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",101),u.Zb(1,"plugin-autocomplete",102),u.hc("triggerEvent",(function(t){return u.Hc(n),u.lc(2).linkUser(t)})),u.Yb(),u.Ub(2,"hr"),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(1),u.sc("labelPlaceholder",a.translate.instant("lang.linkUser"))("labelList",a.translate.instant("lang.availableUsers"))("routeDatas",u.yc(5,ns))("targetSearchKey","idToDisplay")("subInfoKey","descriptionToDisplay")}}function is(t,e){1&t&&(u.Zb(0,"mat-header-cell",103),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.firstname")))}function rs(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.firstname," ")}}function cs(t,e){1&t&&(u.Zb(0,"mat-header-cell",103),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.lastname")))}function os(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.lastname," ")}}function ss(t,e){1&t&&u.Ub(0,"mat-header-row")}function ls(t,e){1&t&&(u.Ub(0,"mat-row",104),u.mc(1,"translate")),2&t&&(u.uc("routerLink","/administration/users/",e.$implicit.id,""),u.tc("matTooltip",u.nc(1,2,"lang.view")))}function ds(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-tab",13),u.mc(1,"translate"),u.Zb(2,"div",75),u.Qc(3,as,3,6,"div",88),u.Zb(4,"div",89),u.Zb(5,"mat-form-field"),u.Zb(6,"input",90),u.hc("keyup",(function(t){return u.Hc(n),u.lc().applyFilterUsers(t.target.value)})),u.mc(7,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(8,"div",89),u.Ub(9,"mat-paginator",91,92),u.Yb(),u.Yb(),u.Zb(11,"mat-table",93,94),u.Xb(13,95),u.Qc(14,is,3,3,"mat-header-cell",96),u.Qc(15,rs,2,1,"mat-cell",97),u.Wb(),u.Xb(16,98),u.Qc(17,cs,3,3,"mat-header-cell",96),u.Qc(18,os,2,1,"mat-cell",97),u.Wb(),u.Qc(19,ss,1,0,"mat-header-row",99),u.Qc(20,ls,2,4,"mat-row",100),u.Yb(),u.Yb()}if(2&t){var a=u.lc();u.tc("label",u.nc(1,9,"lang.users")),u.Eb(3),u.sc("ngIf",a.currentEntity.canAdminUsers),u.Eb(3),u.tc("placeholder",u.nc(7,11,"lang.filterBy")),u.Eb(3),u.sc("length",100)("hidePageSize",!0)("pageSize",10),u.Eb(2),u.sc("dataSource",a.dataSourceUsers),u.Eb(8),u.sc("matHeaderRowDef",a.displayedColumnsUsers),u.Eb(1),u.sc("matRowDefColumns",a.displayedColumnsUsers)}}function bs(t,e){1&t&&(u.Zb(0,"mat-header-cell",115),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc("",u.nc(2,1,"lang.templateName")," "))}function us(t,e){if(1&t&&(u.Zb(0,"mat-cell",116),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.tc("matTooltip",n.template_comment),u.Eb(1),u.Uc(" ",n.template_label," ")}}function ms(t,e){1&t&&(u.Zb(0,"mat-header-cell",117),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc("",u.nc(2,1,"lang.templateTarget")," "))}function fs(t,e){if(1&t&&(u.Zb(0,"mat-cell",118),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",u.nc(2,1,"lang."+n.template_target)," ")}}function ps(t,e){1&t&&u.Ub(0,"mat-header-row")}var gs=function(t){return{cursor:t}};function hs(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-row",119),u.hc("click",(function(){u.Hc(n);var t=e.$implicit;return u.lc(2).showTemplate(t.template_id)})),u.Yb()}if(2&t){var a=u.lc(2);u.sc("ngStyle",u.zc(1,gs,a.currentEntity.canAdminTemplates?"pointer":"position"))}}function vs(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-tab",13),u.mc(1,"translate"),u.Zb(2,"div",75),u.Zb(3,"div",89),u.Zb(4,"mat-form-field"),u.Zb(5,"input",90),u.hc("keyup",(function(t){return u.Hc(n),u.lc().applyFilterTemplates(t.target.value)})),u.mc(6,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(7,"div",89),u.Ub(8,"mat-paginator",91,105),u.Yb(),u.Yb(),u.Zb(10,"mat-table",106,107),u.Xb(12,108),u.Qc(13,bs,3,3,"mat-header-cell",109),u.Qc(14,us,2,2,"mat-cell",110),u.Wb(),u.Xb(15,111),u.Qc(16,ms,3,3,"mat-header-cell",112),u.Qc(17,fs,3,3,"mat-cell",113),u.Wb(),u.Qc(18,ps,1,0,"mat-header-row",99),u.Qc(19,hs,1,3,"mat-row",114),u.Yb(),u.Yb()}if(2&t){var a=u.lc();u.tc("label",u.nc(1,8,"lang.templates")),u.Eb(5),u.tc("placeholder",u.nc(6,10,"lang.filterBy")),u.Eb(3),u.sc("length",100)("hidePageSize",!0)("pageSize",10),u.Eb(2),u.sc("dataSource",a.dataSourceTemplates),u.Eb(8),u.sc("matHeaderRowDef",a.displayedColumnsTemplates),u.Eb(1),u.sc("matRowDefColumns",a.displayedColumnsTemplates)}}function ys(t,e){if(1&t&&(u.Zb(0,"mat-list-item"),u.Ub(1,"mat-icon",7),u.Zb(2,"p",8),u.Zb(3,"b"),u.Sc(4),u.Yb(),u.Sc(5),u.mc(6,"translate"),u.Zb(7,"b"),u.Sc(8),u.Yb(),u.Sc(9),u.mc(10,"translate"),u.Yb(),u.Yb()),2&t){var n=u.lc();u.Eb(4),u.Tc(n.data.entity.entity_label),u.Eb(1),u.Uc(" ",u.nc(6,4,"lang.isDestTo")," "),u.Eb(3),u.Tc(n.data.entity.documents),u.Eb(1),u.Uc(" ",u.nc(10,6,"lang.documents"),"")}}function Cs(t,e){if(1&t&&(u.Zb(0,"mat-list-item"),u.Ub(1,"mat-icon",9),u.Zb(2,"p",8),u.Zb(3,"b"),u.Sc(4),u.Yb(),u.Sc(5),u.mc(6,"translate"),u.Zb(7,"b"),u.Sc(8),u.Yb(),u.Sc(9),u.mc(10,"translate"),u.Yb(),u.Yb()),2&t){var n=u.lc();u.Eb(4),u.Tc(n.data.entity.entity_label),u.Eb(1),u.Uc(" ",u.nc(6,4,"lang.isCopyTo")," "),u.Eb(3),u.Tc(n.data.entity.instances),u.Eb(1),u.Uc(" ",u.nc(10,6,"lang.documents"),"")}}function Es(t,e){if(1&t&&(u.Zb(0,"mat-list-item"),u.Ub(1,"mat-icon",10),u.Zb(2,"p",8),u.Zb(3,"b"),u.Sc(4),u.Yb(),u.Sc(5),u.mc(6,"lowercase"),u.mc(7,"translate"),u.Zb(8,"b"),u.Sc(9),u.Yb(),u.Sc(10),u.mc(11,"lowercase"),u.mc(12,"translate"),u.Yb(),u.Yb()),2&t){var n=u.lc();u.Eb(4),u.Tc(n.data.entity.entity_label),u.Eb(1),u.Uc(" ",u.nc(6,4,u.nc(7,6,"lang.isLinkedTo"))," "),u.Eb(4),u.Tc(n.data.entity.users.length),u.Eb(1),u.Uc(" ",u.nc(11,8,u.nc(12,10,"lang.usersAlt")),"")}}function Ss(t,e){if(1&t&&(u.Zb(0,"mat-list-item"),u.Ub(1,"mat-icon",11),u.Zb(2,"p",8),u.Zb(3,"b"),u.Sc(4),u.Yb(),u.Sc(5),u.mc(6,"lowercase"),u.mc(7,"translate"),u.Zb(8,"b"),u.Sc(9),u.Yb(),u.Sc(10),u.mc(11,"lowercase"),u.mc(12,"translate"),u.Yb(),u.Yb()),2&t){var n=u.lc();u.Eb(4),u.Tc(n.data.entity.entity_label),u.Eb(1),u.Uc(" ",u.nc(6,4,u.nc(7,6,"lang.isLinkedTo"))," "),u.Eb(4),u.Tc(n.data.entity.templates.length),u.Eb(1),u.Uc(" ",u.nc(11,8,u.nc(12,10,"lang.templates")),"")}}var Ms,xs,Ys=function(){return["/rest/autocomplete/entities"]},Zs=((xs=function(){function t(e,n,a,i,r,c,o,s,l){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.dialog=i,this.headerService=r,this.router=c,this.appService=o,this.functions=s,this.viewContainerRef=l,this.loading=!1,this.entities=[],this.listTemplateRoles=[],this.entityTypeList=[],this.currentEntity={},this.isDraggable=!0,this.newEntity=!1,this.creationMode=!1,this.visaCircuitModified=!1,this.opinionCircuitModified=!1,this.config={},this.dataSourceUsers=new B.o(this.currentEntity.users),this.dataSourceTemplates=new B.o(this.currentEntity.templates),this.displayedColumnsUsers=["firstname","lastname"],this.displayedColumnsTemplates=["template_label","template_target"]}return _createClass(t,[{key:"applyFilterUsers",value:function(t){t=(t=t.trim()).toLowerCase(),this.dataSourceUsers.filter=t}},{key:"applyFilterTemplates",value:function(t){t=(t=t.trim()).toLowerCase(),this.dataSourceTemplates.filter=t}},{key:"ngOnInit",value:function(){return Object(yt.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.entities")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,t.next=5,this.getEntityTypes();case 5:return t.next=7,this.getRoles();case 7:return t.next=9,this.getEntities();case 9:this.loading=!1,this.initEntitiesTree();case 11:case"end":return t.stop()}}),t,this)})))}},{key:"initEntitiesTree",value:function(){var t=this;setTimeout((function(){$("#jstree").jstree({checkbox:{deselect_all:!0,three_state:!1},core:{force_text:!0,themes:{name:"proton",responsive:!0},multiple:!1,data:t.entities,check_callback:function(t,e,n,a,i){if("move_node"===t)return"#"!==n.id&&!!n.original.allowed}},dnd:{is_draggable:function(t){for(var e=0,n=t.length;e<n;e++)if(!t[e].original.allowed)return!1;return!0}},plugins:["checkbox","search","dnd","sort"]}),$("#jstree").jstree("select_node",t.entities[0]);var e=!1;$("#jstree_search").keyup((function(){e&&clearTimeout(e),e=setTimeout((function(){var t=$("#jstree_search").val();$("#jstree").jstree(!0).search(t)}),250)})),$("#jstree").on("select_node.jstree",(function(e,n){!1===t.sidenavRight.opened&&t.sidenavRight.open(),!0===t.creationMode?t.currentEntity.parent_entity_id=n.node.id:!0===t.newEntity?(t.loadEntity(t.currentEntity.entity_id),t.newEntity=!1):t.loadEntity(n.node.id)})).on("deselect_node.jstree",(function(e,n){t.sidenavRight.close()})).on("move_node.jstree",(function(e,n){t.currentEntity.parent_entity_id!==t.currentEntity.entity_id&&(t.currentEntity.parent_entity_id=n.parent),t.moveEntity()})).jstree(),$(document).on("dnd_start.vakata",(function(t,e){$("#jstree").jstree("deselect_all"),$("#jstree").jstree("select_node",e.data.nodes[0])}))}),0)}},{key:"getEntityTypes",value:function(){var t=this;return new Promise((function(e,n){t.http.get("../rest/entityTypes").pipe(Object(d.a)((function(n){t.entityTypeList=n.types,e(!0)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}))}},{key:"getRoles",value:function(){var t=this;return new Promise((function(e,n){t.http.get("../rest/listTemplates/types/entity_id/roles").pipe(Object(d.a)((function(n){t.listTemplateRoles=n.roles,e(!0)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}))}},{key:"getEntities",value:function(){var t=this;return new Promise((function(e,n){t.http.get("../rest/entities").pipe(Object(d.a)((function(n){t.entities=n.entities,e(!0)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}))}},{key:"loadEntity",value:function(t){var e=this;this.visaCircuitModified=!1,this.opinionCircuitModified=!1,this.http.get("../rest/entities/"+t+"/details").subscribe((function(t){e.currentEntity=t.entity,e.appDiffusionsList.loadListModel(e.currentEntity.id),e.appVisaWorkflow.loadListModel(e.currentEntity.id),e.appAvisWorkflow.loadListModel(e.currentEntity.id),e.idVisaCircuit=e.currentEntity.visaCircuit?e.currentEntity.visaCircuit.id:null,e.idOpinionCircuit=e.currentEntity.opinionCircuit?e.currentEntity.opinionCircuit.id:null,e.dataSourceUsers=new B.o(e.currentEntity.users),e.dataSourceUsers.paginator=e.paginatorUsers,e.dataSourceUsers.sort=e.sortUsers,e.dataSourceTemplates=new B.o(e.currentEntity.templates),e.dataSourceTemplates.paginator=e.paginatorTemplates,e.dataSourceTemplates.sort=e.sortTemplates,e.currentEntity.listTemplate.items||(e.currentEntity.listTemplate.items=[]),e.listTemplateRoles.forEach((function(t){t.available&&!e.currentEntity.listTemplate.items[t.id]&&(e.currentEntity.listTemplate.items[t.id]=[])}))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"addElemListModelVisa",value:function(t){this.visaCircuitModified=!0;var e={id:t.id,type:"user",mode:"sign",idToDisplay:t.idToDisplay,descriptionToDisplay:t.otherInfo};this.currentEntity.visaCircuit.items||(this.currentEntity.visaCircuit.items=[]),this.currentEntity.visaCircuit.items.push(e),this.currentEntity.visaCircuit.items.length>1&&(this.currentEntity.visaCircuit.items[this.currentEntity.visaCircuit.items.length-2].mode="visa")}},{key:"addElemListModelOpinion",value:function(t){this.opinionCircuitModified=!0;var e={id:t.id,type:"user",mode:"avis",idToDisplay:t.idToDisplay,descriptionToDisplay:t.otherInfo};this.currentEntity.opinionCircuit.items||(this.currentEntity.opinionCircuit.items=[]),this.currentEntity.opinionCircuit.items.push(e)}},{key:"saveEntity",value:function(){var t=this;"#"===this.currentEntity.parent_entity_id&&(this.currentEntity.parent_entity_id="");var e=!0;""===this.currentEntity.parent_entity_id&&(e=confirm(this.translate.instant("lang.entityWithoutParentMessage"))),e&&(this.creationMode?this.http.post("../rest/entities",this.currentEntity).subscribe((function(e){t.currentEntity.listTemplate=[],t.entities=e.entities,t.creationMode=!1,t.newEntity=!0,$("#jstree").jstree(!0).settings.core.data=t.entities,$("#jstree").jstree(!0).refresh(),$("#jstree").on("refresh.jstree",(function(e){$("#jstree").jstree("deselect_all"),$("#jstree").jstree("select_node",t.currentEntity.entity_id)})),t.notify.success(t.translate.instant("lang.entityAdded"))}),(function(e){t.notify.error(e.error.errors)})):this.http.put("../rest/entities/"+this.currentEntity.entity_id,this.currentEntity).subscribe((function(e){t.entities=e.entities,$("#jstree").jstree(!0).settings.core.data=t.entities,$("#jstree").jstree("refresh"),t.notify.success(t.translate.instant("lang.entityUpdated"))}),(function(e){t.notify.error(e.error.errors)})))}},{key:"moveEntity",value:function(){var t=this;this.http.put("../rest/entities/"+this.currentEntity.entity_id,this.currentEntity).subscribe((function(){t.notify.success(t.translate.instant("lang.entityUpdated"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"readMode",value:function(){if(this.creationMode=!1,this.isDraggable=!0,$("#jstree").jstree("deselect_all"),this.currentEntity.parent_entity_id){for(var t=0;t<this.entities.length;t++)if(this.entities[t].entity_id===this.currentEntity.parent_entity_id){$("#jstree").jstree("select_node",this.entities[t]);break}}else this.sidenavRight.close()}},{key:"selectParentEntity",value:function(t){this.creationMode&&($("#jstree").jstree("deselect_all"),$("#jstree").jstree("select_node",t))}},{key:"removeEntity",value:function(){var t=this;this.currentEntity.documents>0||this.currentEntity.redirects>0||this.currentEntity.instances>0||this.currentEntity.users.length>0||this.currentEntity.templates.length>0?(this.config={panelClass:"maarch-modal",data:{entity:this.currentEntity}},this.dialogRef=this.dialog.open(_s,this.config),this.dialogRef.afterClosed().subscribe((function(e){e&&(t.currentEntity.listTemplate.id&&t.http.delete("../rest/listTemplates/"+t.currentEntity.listTemplate.id).subscribe((function(e){t.currentEntity.listTemplate.id=e.id,t.http.get("../rest/listTemplates/types/entity_id/roles").subscribe((function(e){t.listTemplateRoles=e.roles}),(function(e){t.notify.error(e.error.errors)}))}),(function(e){t.notify.error(e.error.errors)})),t.idVisaCircuit&&t.http.delete("../rest/listTemplates/"+t.idVisaCircuit).subscribe((function(){t.idVisaCircuit=null}),(function(e){t.notify.error(e.error.errors)})),t.http.put("../rest/entities/"+e.entity_id+"/reassign/"+e.redirectEntity,{}).subscribe((function(e){t.entities=e.entities,$("#jstree").jstree(!0).settings.core.data=t.entities,$("#jstree").jstree("refresh"),t.sidenavRight.close(),t.notify.success(t.translate.instant(void 0===e.deleted||e.deleted?"lang.entityDeleted":"lang.entityDeletedButAnnuaryUnreachable"))}),(function(e){t.notify.error(e.error.errors)}))),t.dialogRef=null}))):confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+this.currentEntity.entity_label+" \xbb")&&(this.currentEntity.listTemplate.id&&this.http.delete("../rest/listTemplates/"+this.currentEntity.listTemplate.id).subscribe((function(e){t.currentEntity.listTemplate.id=e.id,t.http.get("../rest/listTemplates/types/entity_id/roles").subscribe((function(e){t.listTemplateRoles=e.roles}),(function(e){t.notify.error(e.error.errors)}))}),(function(e){t.notify.error(e.error.errors)})),this.idVisaCircuit&&this.http.delete("../rest/listTemplates/"+this.idVisaCircuit).subscribe((function(){t.idVisaCircuit=null}),(function(e){t.notify.error(e.error.errors)})),this.http.delete("../rest/entities/"+this.currentEntity.entity_id).subscribe((function(e){t.entities=e.entities,$("#jstree").jstree(!0).settings.core.data=t.entities,$("#jstree").jstree("refresh"),t.sidenavRight.close(),t.notify.success(t.translate.instant(void 0===e.deleted||e.deleted?"lang.entityDeleted":"lang.entityDeletedButAnnuaryUnreachable"))}),(function(e){t.notify.error(e.error.errors)})))}},{key:"prepareEntityAdd",value:function(){if(this.creationMode=!0,this.isDraggable=!1,this.currentEntity.entity_id){for(var t=0;t<this.entities.length;t++)if(this.entities[t].entity_id===this.currentEntity.entity_id){this.currentEntity={entity_type:this.entityTypeList[0].id},this.currentEntity.parent_entity_id=this.entities[t].entity_id;break}}else this.currentEntity={entity_type:this.entityTypeList[0].id},$("#jstree").jstree("deselect_all"),this.sidenavRight.open()}},{key:"updateStatus",value:function(t,e){var n=this;this.http.put("../rest/entities/"+t.entity_id+"/status",{method:e}).subscribe((function(t){n.notify.success("")}),(function(t){n.notify.error(t.error.errors)}))}},{key:"saveDiffList",value:function(){var t=this,e={title:this.currentEntity.entity_id,description:this.currentEntity.entity_id,type:"diffusionList",entityId:this.currentEntity.id,items:this.appDiffusionsList.getCurrentListinstance().map((function(t){return{id:t.item_id,type:t.item_type,mode:t.item_mode}}))};this.functions.empty(this.currentEntity.listTemplate.id)?this.http.post("../rest/listTemplates?admin=true",e).pipe(Object(d.a)((function(e){t.currentEntity.listTemplate.id=e.id,t.notify.success(t.translate.instant("lang.diffusionModelUpdated")),t.appDiffusionsList.loadListModel(t.currentEntity.id)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe():this.http.put("../rest/listTemplates/"+this.currentEntity.listTemplate.id,e).pipe(Object(d.a)((function(){t.notify.success(t.translate.instant("lang.diffusionModelUpdated")),t.appDiffusionsList.loadListModel(t.currentEntity.id)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"deleteDiffList",value:function(){var t=this;this.dialog.open(W.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete"),msg:this.translate.instant("lang.confirmAction")}}).afterClosed().pipe(Object(q.a)((function(t){return"ok"===t})),Object(X.a)((function(){return t.http.delete("../rest/listTemplates/"+t.currentEntity.listTemplate.id)})),Object(d.a)((function(){t.currentEntity.listTemplate.id=null,t.notify.success(t.translate.instant("lang.diffusionModelDeleted")),t.appDiffusionsList.loadListModel(t.currentEntity.id)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"saveDiffListVisa",value:function(){var t=this,e={title:this.currentEntity.entity_id,description:this.currentEntity.entity_id,type:"visaCircuit",entityId:this.currentEntity.id,items:this.appVisaWorkflow.getWorkflow().map((function(t,e){return{id:t.item_id,type:t.item_type,mode:t.requested_signature?"sign":"visa",sequence:e}}))};this.appVisaWorkflow.isValidWorkflow()||this.functions.empty(e.items)?this.functions.empty(e.items)?this.http.delete("../rest/listTemplates/"+this.idVisaCircuit).pipe(Object(d.a)((function(){t.idVisaCircuit=null,t.notify.success(t.translate.instant("lang.diffusionModelDeleted")),t.appVisaWorkflow.loadListModel(t.currentEntity.id)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe():this.functions.empty(this.idVisaCircuit)?this.http.post("../rest/listTemplates?admin=true",e).pipe(Object(d.a)((function(e){t.idVisaCircuit=e.id,t.notify.success(t.translate.instant("lang.diffusionModelUpdated")),t.appVisaWorkflow.loadListModel(t.currentEntity.id)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe():this.http.put("../rest/listTemplates/"+this.idVisaCircuit,e).pipe(Object(d.a)((function(){t.notify.success(t.translate.instant("lang.diffusionModelUpdated")),t.appVisaWorkflow.loadListModel(t.currentEntity.id)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe():this.notify.error(this.appVisaWorkflow.getError())}},{key:"saveDiffListOpinion",value:function(){var t=this,e={title:this.currentEntity.entity_id,description:this.currentEntity.entity_id,type:"opinionCircuit",entityId:this.currentEntity.id,items:this.appAvisWorkflow.getWorkflow().map((function(t,e){return{id:t.item_id,type:t.item_type,mode:"avis",sequence:e}}))};this.functions.empty(e.items)?this.http.delete("../rest/listTemplates/"+this.idOpinionCircuit).pipe(Object(d.a)((function(){t.idOpinionCircuit=null,t.notify.success(t.translate.instant("lang.diffusionModelDeleted")),t.appAvisWorkflow.loadListModel(t.currentEntity.id)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe():this.functions.empty(this.idOpinionCircuit)?this.http.post("../rest/listTemplates?admin=true",e).pipe(Object(d.a)((function(e){t.idOpinionCircuit=e.id,t.notify.success(t.translate.instant("lang.diffusionModelUpdated")),t.appAvisWorkflow.loadListModel(t.currentEntity.id)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe():this.http.put("../rest/listTemplates/"+this.idOpinionCircuit,e).pipe(Object(d.a)((function(){t.notify.success(t.translate.instant("lang.diffusionModelUpdated")),t.appAvisWorkflow.loadListModel(t.currentEntity.id)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"removeDiffListOpinion",value:function(t,e){this.opinionCircuitModified=!0,this.currentEntity.opinionCircuit.items.splice(e,1)}},{key:"toggleRole",value:function(t){var e=this;t.usedIn.length>0?this.dialog.open(W.a,{panelClass:"maarch-modal",autoFocus:!1,data:{title:this.translate.instant("lang.confirmAction"),msg:this.translate.instant("lang.roleUsedInTemplateInfo")+" : <b>"+t.usedIn.join(", ")+"</b><br/>"+this.translate.instant("lang.roleUsedInTemplateInfo2")}}).afterClosed().subscribe((function(n){"ok"===n&&(t.available=!t.available,e.http.put("../rest/listTemplates/types/entity_id/roles",{roles:e.listTemplateRoles}).subscribe((function(){t.usedIn=[],e.currentEntity.listTemplate&&(e.currentEntity.listTemplate.items[t.id]=[]),e.notify.success(e.translate.instant("lang.listTemplatesRolesUpdated"))}),(function(t){e.notify.error(t.error.errors)})))})):(t.available=!t.available,this.http.put("../rest/listTemplates/types/entity_id/roles",{roles:this.listTemplateRoles}).subscribe((function(){e.currentEntity.listTemplate&&(e.currentEntity.listTemplate.items[t.id]=[],e.http.get("../rest/listTemplates/types/entity_id/roles").subscribe((function(t){e.listTemplateRoles=t.roles}),(function(t){e.notify.error(t.error.errors)}))),e.notify.success(e.translate.instant("lang.listTemplatesRolesUpdated"))}),(function(t){e.notify.error(t.error.errors)})))}},{key:"linkUser",value:function(t){var e=this;this.http.post("../rest/users/"+t.id+"/entities",{entityId:this.currentEntity.entity_id,role:""}).subscribe((function(n){var a=t.idToDisplay.split(" ");e.currentEntity.users.push({id:t.id,user_id:t.otherInfo,firstname:a[0],lastname:a[1]}),e.dataSourceUsers=new B.o(e.currentEntity.users),e.dataSourceUsers.paginator=e.paginatorUsers,e.dataSourceUsers.sort=e.sortUsers,e.notify.success(e.translate.instant("lang.userAdded"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"showTemplate",value:function(t){this.currentEntity.canAdminTemplates&&this.router.navigate(["/administration/templates/"+t])}},{key:"addEntityToAnnuary",value:function(){var t=this;this.http.put("../rest/entities/"+this.currentEntity.id+"/annuaries",this.currentEntity).subscribe((function(e){t.currentEntity.business_id=e.entitySiret,t.notify.success(t.translate.instant(void 0===e.synchronized?"lang.siretGenerated":e.synchronized?"lang.siretGeneratedAndSynchronizationDone":"lang.siretGeneratedButAnnuaryUnreachable"))}),(function(e){t.notify.handleErrors(e)}))}},{key:"openExportModal",value:function(){this.dialog.open(yo,{panelClass:"maarch-modal",width:"800px",autoFocus:!1})}}]),t}()).\u0275fac=function(t){return new(t||xs)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(z.b),u.Tb(p.a),u.Tb(r.c),u.Tb(g.a),u.Tb(C.a),u.Tb(u.R))},xs.\u0275cmp=u.Nb({type:xs,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(Eo,!0),u.Oc(So,!0),u.ad(Mo,!0),u.ad(xo,!0),u.ad(Yo,!0),u.ad(Zo,!0),u.ad(_o,!0),u.ad(ko,!0),u.ad(wo,!0)),2&t&&(u.Cc(n=u.ic())&&(e.sidenavRight=n.first),u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.paginatorUsers=n.first),u.Cc(n=u.ic())&&(e.paginatorTemplates=n.first),u.Cc(n=u.ic())&&(e.sortUsers=n.first),u.Cc(n=u.ic())&&(e.sortTemplates=n.first),u.Cc(n=u.ic())&&(e.appDiffusionsList=n.first),u.Cc(n=u.ic())&&(e.appVisaWorkflow=n.first),u.Cc(n=u.ic())&&(e.appAvisWorkflow=n.first))},decls:132,vars:142,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",1,"col-md-5","col-xs-11",3,"mode","fixedInViewport","opened"],["snav2",""],[3,"label"],[1,"form-horizontal",2,"overflow","hidden"],["entityForm","ngForm"],[1,"form-group"],[1,"col-sm-12"],["id","parent_entity_id","name","parent_entity_id",3,"title","placeholder","ngModel","ngModelChange","selectionChange"],["value",""],[2,"opacity","0.5","text-align","center"],[4,"ngFor","ngForOf"],["id","entity_type","name","entity_type","maxlength","32","required","",3,"title","placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","form-group",4,"ngIf"],["matInput","","required","","name","entity_id","id","entity_id","type","text","maxlength","32","pattern","^[\\w-]*$",3,"ngModel","title","placeholder","disabled","ngModelChange"],["matInput","","required","","name","entity_label","id","entity_label","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","required","","name","short_label","id","short_label","type","text","maxlength","50",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","email","id","email","type","text","maxlength","255","pattern","(^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$)",3,"ngModel","title","placeholder","ngModelChange"],[1,"col-sm-4"],["matInput","","name","adrs_1","id","adrs_1","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","adrs_2","id","adrs_2","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","adrs_3","id","adrs_3","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","zipcode","id","zipcode","type","text","maxlength","32",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","city","id","city","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","country","id","country","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","entity_full_name","id","entity_full_name","matTextareaAutosize","","matAutosizeMinRows","1","matAutosizeMaxRows","5",3,"ngModel","placeholder","title","ngModelChange"],[1,"col-sm-6"],["matInput","","name","archival_agency","id","archival_agency","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","archival_agreement","id","archival_agreement","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","warn",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","default",3,"click",4,"ngIf"],[3,"label",4,"ngIf"],["mat-subheader",""],["mat-list-item","",3,"click",4,"ngIf"],["mat-list-item","",3,"click"],["color","primary","mat-list-icon","",1,"fas","fa-file-export"],["mat-line",""],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-list-item","","disableRipple","true",4,"ngIf"],["mat-list-item","","disableRipple","true"],["color","primary","mat-list-icon",""],["color","primary",3,"checked","click"],["mat-line","",3,"ngStyle","click"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],["matInput","","id","jstree_search","name","jstree_search","type","text",3,"placeholder"],[4,"ngIf"],["id","jstree"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],[3,"value",4,"ngIf"],[3,"value"],["matInput","","name","id","id","id","type","text","disabled","",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","value","Param\xe8tre SIRET manquant","type","text","maxlength","255","disabled","",3,"title","placeholder",4,"ngIf"],["matInput","","name","business_id","id","business_id","type","text","maxlength","255","disabled","",3,"ngModel","title","placeholder","ngModelChange",4,"ngIf"],["color","primary","mat-icon-button","","matSuffix","","title","G\xe9n\xe9rer un num\xe9ro SIRET",3,"click",4,"ngIf"],["matInput","","value","Param\xe8tre SIRET manquant","type","text","maxlength","255","disabled","",3,"title","placeholder"],["matInput","","name","business_id","id","business_id","type","text","maxlength","255","disabled","",3,"ngModel","title","placeholder","ngModelChange"],["color","primary","mat-icon-button","","matSuffix","","title","G\xe9n\xe9rer un num\xe9ro SIRET",3,"click"],[1,"fas","fa-compress-arrows-alt"],["mat-raised-button","","color","warn",3,"disabled","click"],["mat-raised-button","","color","default",3,"click"],[1,"row",2,"margin","0px"],[1,"col-md-12"],[3,"adminMode","target"],["appDiffusionsList",""],["mat-raised-button","","color","default",3,"disabled","click"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click"],["id","visaCircuitContent",1,"row",2,"margin","0px"],[3,"adminMode","showListModels","showComment"],["appVisaWorkflow",""],["id","opinionCircuitContent",1,"row",2,"margin","0px"],[3,"adminMode","showListModels"],["appAvisWorkflow",""],["class","col-md-12","style","padding:5px;",4,"ngIf"],[1,"col-md-6","col-xs-6"],["matInput","",3,"placeholder","keyup"],[3,"length","hidePageSize","pageSize"],["paginatorUsers",""],["matSort","","matSortActive","lastname","matSortDirection","asc",3,"dataSource"],["tableUsers","matSort"],["matColumnDef","firstname"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","lastname"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"col-md-12",2,"padding","5px"],[3,"labelPlaceholder","labelList","routeDatas","targetSearchKey","subInfoKey","triggerEvent"],["mat-sort-header",""],[2,"cursor","pointer",3,"routerLink","matTooltip"],["paginatorTemplates",""],["matSort","","matSortActive","template_label","matSortDirection","asc",3,"dataSource"],["tableTemplates","matSort"],["matColumnDef","template_label"],["mat-sort-header","","style","flex:2;",4,"matHeaderCellDef"],["style","flex:2;",3,"matTooltip",4,"matCellDef"],["matColumnDef","template_target"],["mat-sort-header","","style","flex:1;",4,"matHeaderCellDef"],["style","flex:1;",4,"matCellDef"],[3,"ngStyle","click",4,"matRowDef","matRowDefColumns"],["mat-sort-header","",2,"flex","2"],[2,"flex","2",3,"matTooltip"],["mat-sort-header","",2,"flex","1"],[2,"flex","1"],[3,"ngStyle","click"]],template:function(t,e){if(1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,Uo,16,11,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,Po,2,0,"div",9),u.Qc(14,jo,10,9,"mat-card",10),u.Yb(),u.Yb(),u.Yb(),u.Zb(15,"mat-sidenav",11,12),u.Zb(17,"mat-nav-list"),u.Zb(18,"mat-tab-group"),u.Zb(19,"mat-tab",13),u.Zb(20,"form",14,15),u.Zb(22,"div",16),u.Zb(23,"div",17),u.Zb(24,"mat-form-field"),u.Zb(25,"mat-select",18),u.hc("ngModelChange",(function(t){return e.currentEntity.parent_entity_id=t}))("selectionChange",(function(){return e.selectParentEntity(e.currentEntity.parent_entity_id)})),u.mc(26,"translate"),u.mc(27,"translate"),u.Zb(28,"mat-option",19),u.Zb(29,"i",20),u.Sc(30),u.mc(31,"translate"),u.Yb(),u.Yb(),u.Qc(32,Qo,2,1,"ng-container",21),u.mc(33,"sortBy"),u.Yb(),u.Yb(),u.Zb(34,"mat-form-field"),u.Zb(35,"mat-select",22),u.hc("ngModelChange",(function(t){return e.currentEntity.entity_type=t})),u.mc(36,"translate"),u.mc(37,"translate"),u.Qc(38,Ao,2,2,"mat-option",23),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Qc(39,Ho,6,7,"div",24),u.Zb(40,"div",16),u.Zb(41,"div",17),u.Zb(42,"mat-form-field"),u.Zb(43,"input",25),u.hc("ngModelChange",(function(t){return e.currentEntity.entity_id=t})),u.mc(44,"translate"),u.mc(45,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(46,"div",16),u.Zb(47,"div",17),u.Zb(48,"mat-form-field"),u.Zb(49,"input",26),u.hc("ngModelChange",(function(t){return e.currentEntity.entity_label=t})),u.mc(50,"translate"),u.mc(51,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(52,"div",16),u.Zb(53,"div",17),u.Zb(54,"mat-form-field"),u.Zb(55,"input",27),u.hc("ngModelChange",(function(t){return e.currentEntity.short_label=t})),u.mc(56,"translate"),u.mc(57,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(58,"div",16),u.Zb(59,"div",17),u.Zb(60,"mat-form-field"),u.Zb(61,"input",28),u.hc("ngModelChange",(function(t){return e.currentEntity.email=t})),u.mc(62,"translate"),u.mc(63,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(64,"mat-accordion"),u.Zb(65,"mat-expansion-panel"),u.Zb(66,"mat-expansion-panel-header"),u.Zb(67,"mat-panel-title"),u.Sc(68),u.mc(69,"translate"),u.Yb(),u.Yb(),u.Zb(70,"div",16),u.Zb(71,"div",29),u.Zb(72,"mat-form-field"),u.Zb(73,"input",30),u.hc("ngModelChange",(function(t){return e.currentEntity.adrs_1=t})),u.mc(74,"translate"),u.mc(75,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(76,"div",29),u.Zb(77,"mat-form-field"),u.Zb(78,"input",31),u.hc("ngModelChange",(function(t){return e.currentEntity.adrs_2=t})),u.mc(79,"translate"),u.mc(80,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(81,"div",29),u.Zb(82,"mat-form-field"),u.Zb(83,"input",32),u.hc("ngModelChange",(function(t){return e.currentEntity.adrs_3=t})),u.mc(84,"translate"),u.mc(85,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(86,"div",16),u.Zb(87,"div",29),u.Zb(88,"mat-form-field"),u.Zb(89,"input",33),u.hc("ngModelChange",(function(t){return e.currentEntity.zipcode=t})),u.mc(90,"translate"),u.mc(91,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(92,"div",29),u.Zb(93,"mat-form-field"),u.Zb(94,"input",34),u.hc("ngModelChange",(function(t){return e.currentEntity.city=t})),u.mc(95,"translate"),u.mc(96,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(97,"div",29),u.Zb(98,"mat-form-field"),u.Zb(99,"input",35),u.hc("ngModelChange",(function(t){return e.currentEntity.country=t})),u.mc(100,"translate"),u.mc(101,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(102,"div",16),u.Zb(103,"div",17),u.Zb(104,"mat-form-field"),u.Zb(105,"textarea",36),u.hc("ngModelChange",(function(t){return e.currentEntity.entity_full_name=t})),u.mc(106,"translate"),u.mc(107,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Qc(108,No,6,3,"div",24),u.Zb(109,"div",16),u.Zb(110,"div",37),u.Zb(111,"mat-form-field"),u.Zb(112,"input",38),u.hc("ngModelChange",(function(t){return e.currentEntity.archival_agency=t})),u.mc(113,"translate"),u.mc(114,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(115,"div",37),u.Zb(116,"mat-form-field"),u.Zb(117,"input",39),u.hc("ngModelChange",(function(t){return e.currentEntity.archival_agreement=t})),u.mc(118,"translate"),u.mc(119,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(120,"div",16),u.Zb(121,"div",40),u.Zb(122,"button",41),u.hc("click",(function(){return e.saveEntity()})),u.Sc(123),u.mc(124,"translate"),u.Yb(),u.Qc(125,Jo,3,4,"button",42),u.Qc(126,Go,3,3,"button",43),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Qc(127,qo,7,6,"mat-tab",44),u.Qc(128,Ko,7,7,"mat-tab",44),u.Qc(129,es,7,6,"mat-tab",44),u.Qc(130,ds,21,13,"mat-tab",44),u.Qc(131,vs,20,12,"mat-tab",44),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t){var n=u.Dc(21);u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading),u.Eb(1),u.sc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!1),u.Eb(4),u.sc("label",e.translate.instant(e.creationMode?"lang.createNewEntity":"lang.informations")),u.Eb(6),u.tc("title",u.nc(26,73,"lang.isLinkedTo")),u.tc("placeholder",u.nc(27,75,"lang.isLinkedTo")),u.sc("ngModel",e.currentEntity.parent_entity_id),u.Eb(5),u.Uc("- ",u.nc(31,77,"lang.noEntity")," -"),u.Eb(2),u.sc("ngForOf",u.oc(33,79,e.entities,"entity_label")),u.Eb(3),u.tc("title",u.nc(36,82,"lang.entityType")),u.tc("placeholder",u.nc(37,84,"lang.entityType")),u.sc("ngModel",e.currentEntity.entity_type),u.Eb(3),u.sc("ngForOf",e.entityTypeList),u.Eb(1),u.sc("ngIf",!e.creationMode),u.Eb(4),u.tc("title",u.nc(44,86,"lang.id")),u.tc("placeholder",u.nc(45,88,"lang.id")),u.sc("ngModel",e.currentEntity.entity_id)("disabled",!e.creationMode),u.Eb(6),u.tc("title",u.nc(50,90,"lang.label")),u.tc("placeholder",u.nc(51,92,"lang.label")),u.sc("ngModel",e.currentEntity.entity_label),u.Eb(6),u.tc("title",u.nc(56,94,"lang.shortLabel")),u.tc("placeholder",u.nc(57,96,"lang.shortLabel")),u.sc("ngModel",e.currentEntity.short_label),u.Eb(6),u.tc("title",u.nc(62,98,"lang.email")),u.tc("placeholder",u.nc(63,100,"lang.email")),u.sc("ngModel",e.currentEntity.email),u.Eb(7),u.Uc(" ",u.nc(69,102,"lang.otherInformations")," "),u.Eb(5),u.uc("title","",u.nc(74,104,"lang.address"),"1"),u.uc("placeholder","",u.nc(75,106,"lang.address"),"1"),u.sc("ngModel",e.currentEntity.adrs_1),u.Eb(5),u.uc("title","",u.nc(79,108,"lang.address"),"2"),u.uc("placeholder","",u.nc(80,110,"lang.address"),"2"),u.sc("ngModel",e.currentEntity.adrs_2),u.Eb(5),u.uc("title","",u.nc(84,112,"lang.address"),"3"),u.uc("placeholder","",u.nc(85,114,"lang.address"),"3"),u.sc("ngModel",e.currentEntity.adrs_3),u.Eb(6),u.tc("title",u.nc(90,116,"lang.zipcode")),u.tc("placeholder",u.nc(91,118,"lang.zipcode")),u.sc("ngModel",e.currentEntity.zipcode),u.Eb(5),u.tc("title",u.nc(95,120,"lang.city")),u.tc("placeholder",u.nc(96,122,"lang.city")),u.sc("ngModel",e.currentEntity.city),u.Eb(5),u.tc("title",u.nc(100,124,"lang.country")),u.tc("placeholder",u.nc(101,126,"lang.country")),u.sc("ngModel",e.currentEntity.country),u.Eb(6),u.tc("placeholder",u.nc(106,128,"lang.entityFullName")),u.tc("title",u.nc(107,130,"lang.entityFullName")),u.sc("ngModel",e.currentEntity.entity_full_name),u.Eb(3),u.sc("ngIf",!e.creationMode),u.Eb(4),u.tc("title",u.nc(113,132,"lang.archivalAgency")),u.tc("placeholder",u.nc(114,134,"lang.archivalAgency")),u.sc("ngModel",e.currentEntity.archival_agency),u.Eb(5),u.tc("title",u.nc(118,136,"lang.archivalAgreement")),u.tc("placeholder",u.nc(119,138,"lang.archivalAgreement")),u.sc("ngModel",e.currentEntity.archival_agreement),u.Eb(5),u.sc("disabled",!n.form.valid),u.Eb(1),u.Tc(u.nc(124,140,"lang.save")),u.Eb(2),u.sc("ngIf",!e.creationMode),u.Eb(1),u.sc("ngIf",e.creationMode),u.Eb(1),u.sc("ngIf",!e.creationMode),u.Eb(1),u.sc("ngIf",!e.creationMode),u.Eb(1),u.sc("ngIf",!e.creationMode),u.Eb(1),u.sc("ngIf",!e.creationMode),u.Eb(1),u.sc("ngIf",!e.creationMode)}},directives:[S.e,S.f,M.a,Y.a,Z.t,S.d,Dt.h,Re.c,Re.a,o.J,o.u,o.v,k.c,it.a,o.t,o.w,I.o,Z.s,o.o,o.E,w.b,o.c,o.A,Qe.a,Qe.c,Qe.g,Qe.h,w.d,D.b,Dt.g,Dt.d,Ut.a,Dt.c,I.k,_.a,nt.a,Z.w,O.c,T.a,k.f,k.j,Co.a,Kc.a,to.a,V.a,B.n,N.a,B.c,B.i,B.b,B.k,B.m,Lt.a,B.h,N.b,B.a,B.j,B.l,r.d,Ft.b],pipes:[m.d,U.a],styles:[".mat-list-item[draggable=false][_ngcontent-%COMP%]:hover{background:inherit}.mat-list-item[draggable=false][_ngcontent-%COMP%]{cursor:not-allowed!important}.mat-list-item[draggable=true][_ngcontent-%COMP%]{cursor:pointer}.mat-list-item[draggable=true][_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:move}"]}),xs),_s=((Ms=function(){function t(e,n,a,i){_classCallCheck(this,t),this.translate=e,this.http=n,this.data=a,this.dialogRef=i,console.log(this.data.entity.redirectEntity)}return _createClass(t,[{key:"setRedirectEntity",value:function(t){this.data.entity.redirectEntity=t.id}}]),t}()).\u0275fac=function(t){return new(t||Ms)(u.Tb(m.e),u.Tb(f.b),u.Tb(z.a),u.Tb(z.h))},Ms.\u0275cmp=u.Nb({type:Ms,selectors:[["ng-component"]],decls:17,vars:17,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["role","alert",1,"alert-message","alert-message-info"],[4,"ngIf"],["singleMode","","required","",3,"labelPlaceholder","labelList","routeDatas","targetSearchKey","subInfoKey","triggerEvent"],[1,"divider-modal"],["mat-raised-button","","color","warn","type","submit",1,"btn","btn-danger",3,"disabled","click"],["color","primary","mat-list-icon","",1,"fa","fa-file","fa-2x"],["mat-line",""],["color","primary","mat-list-icon","",1,"fa","fa-sitemap","fa-2x"],["color","primary","mat-list-icon","",1,"fa","fa-user","fa-2x"],["color","primary","mat-list-icon","",1,"fa","fa-file-alt","fa-2x"]],template:function(t,e){1&t&&(u.Zb(0,"div",0),u.Zb(1,"h2",1),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"mat-dialog-content"),u.Zb(5,"div",2),u.Zb(6,"mat-list"),u.Qc(7,ys,11,8,"mat-list-item",3),u.Qc(8,Cs,11,8,"mat-list-item",3),u.Qc(9,Es,13,12,"mat-list-item",3),u.Qc(10,Ss,13,12,"mat-list-item",3),u.Yb(),u.Yb(),u.Zb(11,"plugin-autocomplete",4),u.hc("triggerEvent",(function(t){return e.setRedirectEntity(t)})),u.Yb(),u.Yb(),u.Ub(12,"span",5),u.Zb(13,"mat-dialog-actions"),u.Zb(14,"button",6),u.hc("click",(function(){return e.dialogRef.close(e.data.entity)})),u.Sc(15),u.mc(16,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(2),u.Tc(u.nc(3,12,"lang.entityReplacement")),u.Eb(5),u.sc("ngIf",e.data.entity.documents>0),u.Eb(1),u.sc("ngIf",e.data.entity.instances>0),u.Eb(1),u.sc("ngIf",e.data.entity.users.length>0),u.Eb(1),u.sc("ngIf",e.data.entity.templates.length>0),u.Eb(1),u.sc("labelPlaceholder",e.translate.instant("lang.chooseEntity"))("labelList",e.translate.instant("lang.availableEntities"))("routeDatas",u.yc(16,Ys))("targetSearchKey","idToDisplay")("subInfoKey","descriptionToDisplay"),u.Eb(3),u.sc("disabled",void 0===e.data.entity.redirectEntity||e.data.entity.redirectEntity==e.data.entity.entity_id),u.Eb(1),u.Tc(u.nc(16,14,"lang.delete")))},directives:[z.i,z.f,Dt.a,Z.t,Lt.a,z.c,D.b,Dt.d,Ut.a,Dt.c,I.k],pipes:[m.d,Z.p],styles:[".alert-message[_ngcontent-%COMP%] { max-width: inherit; }"]}),Ms),ks=["adminMenuTemplate"];function ws(t,e){1&t&&(u.Zb(0,"mat-nav-list"),u.Zb(1,"h3",11),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"a",12),u.Ub(5,"mat-icon",13),u.Zb(6,"p",14),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(2),u.Tc(u.nc(3,2,"lang.actions")),u.Eb(5),u.Uc(" ",u.nc(8,4,"lang.add")," "))}function Os(t,e){1&t&&(u.Zb(0,"div",15),u.Ub(1,"mat-spinner",16),u.Yb())}function Ts(t,e){1&t&&(u.Zb(0,"mat-header-cell"),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.imgRelated")))}function Is(t,e){if(1&t&&u.Ub(0,"mat-icon",41),2&t){var n=u.lc().$implicit;u.Hb("fm ",n.img_filename," fm-2x")}}function Ds(t,e){if(1&t&&u.Ub(0,"mat-icon",41),2&t){var n=u.lc().$implicit;u.Hb("fa ",n.img_filename," fa-2x")}}function Us(t,e){if(1&t&&(u.Zb(0,"mat-cell",39),u.Qc(1,Is,1,3,"mat-icon",40),u.Qc(2,Ds,1,3,"mat-icon",40),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.sc("ngIf",0==n.img_filename.indexOf("fm")),u.Eb(1),u.sc("ngIf",0==n.img_filename.indexOf("fa"))}}function Ps(t,e){if(1&t&&(u.Zb(0,"mat-header-cell",42),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=u.lc(2);u.Jb("hide-for-mobile",n.appService.getViewMode()),u.Eb(1),u.Tc(u.nc(2,3,"lang.id"))}}function Fs(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.Jb("hide-for-mobile",a.appService.getViewMode()),u.Eb(1),u.Uc(" ",n.id," ")}}function Ls(t,e){1&t&&(u.Zb(0,"mat-header-cell",42),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.statusName")))}function js(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.label_status," ")}}function Rs(t,e){1&t&&u.Ub(0,"mat-header-cell")}function Qs(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-cell",43),u.Zb(1,"button",44),u.hc("click",(function(t){u.Hc(n);var a=e.$implicit,i=u.lc(2);return t.stopPropagation(),i.deleteStatus(a)})),u.mc(2,"translate"),u.Ub(3,"mat-icon",45),u.Yb(),u.Yb()}2&t&&(u.Eb(1),u.tc("matTooltip",u.nc(2,1,"lang.delete")))}function As(t,e){1&t&&u.Ub(0,"mat-header-row")}function Hs(t,e){1&t&&(u.Ub(0,"mat-row",46),u.mc(1,"translate")),2&t&&(u.uc("routerLink","/administration/statuses/",e.$implicit.identifier,""),u.tc("matTooltip",u.nc(1,2,"lang.view")))}function zs(t,e){if(1&t&&(u.Zb(0,"mat-card",17),u.Zb(1,"div",18),u.Zb(2,"div",19),u.Zb(3,"mat-form-field"),u.Ub(4,"input",20),u.mc(5,"translate"),u.Yb(),u.Yb(),u.Zb(6,"div",19),u.Ub(7,"mat-paginator",21,22),u.Yb(),u.Yb(),u.Zb(9,"mat-table",23,24),u.Xb(11,25),u.Qc(12,Ts,3,3,"mat-header-cell",26),u.Qc(13,Us,3,2,"mat-cell",27),u.Wb(),u.Xb(14,28),u.Qc(15,Ps,3,5,"mat-header-cell",29),u.Qc(16,Fs,2,3,"mat-cell",30),u.Wb(),u.Xb(17,31),u.Qc(18,Ls,3,3,"mat-header-cell",32),u.Qc(19,js,2,1,"mat-cell",33),u.Wb(),u.Xb(20,34),u.Qc(21,Rs,1,0,"mat-header-cell",26),u.Qc(22,Qs,4,3,"mat-cell",35),u.Wb(),u.Qc(23,As,1,0,"mat-header-row",36),u.Qc(24,Hs,2,4,"mat-row",37),u.Yb(),u.Zb(25,"div",38),u.Sc(26),u.mc(27,"translate"),u.Yb(),u.Yb()),2&t){var n=u.lc();u.Eb(4),u.tc("placeholder",u.nc(5,10,"lang.filterBy")),u.sc("formControl",n.adminService.getFilterField()),u.Eb(3),u.sc("length",100)("hidePageSize",!0)("pageSize",10),u.Eb(2),u.sc("dataSource",n.adminService.getDataSource()),u.Eb(14),u.sc("matHeaderRowDef",n.displayedColumns),u.Eb(1),u.sc("matRowDefColumns",n.displayedColumns),u.Eb(2),u.Vc(" ",n.statuses.length," ",u.nc(27,12,"lang.statuses"),"")}}var $s,Vs=(($s=function(){function t(e,n,a,i,r,c,o,s){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.headerService=i,this.appService=r,this.functions=c,this.adminService=o,this.viewContainerRef=s,this.loading=!1,this.statuses=[],this.displayedColumns=["img_filename","id","label_status","identifier"],this.filterColumns=["id","label_status"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.statuses")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/statuses").subscribe((function(e){t.statuses=e.statuses,t.loading=!1,setTimeout((function(){t.adminService.setDataSource("admin_status",t.statuses,t.sort,t.paginator,t.filterColumns)}),0)}),(function(e){t.notify.error(e.error.errors)}))}},{key:"deleteStatus",value:function(t){var e=this;confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+t.id+" \xbb")&&this.http.delete("../rest/statuses/"+t.identifier).subscribe((function(t){e.statuses=t.statuses,e.adminService.setDataSource("admin_status",e.statuses,e.sort,e.paginator,e.filterColumns),e.notify.success(e.translate.instant("lang.statusDeleted"))}),(function(t){e.notify.error(t.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||$s)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a),u.Tb(C.a),u.Tb(It),u.Tb(u.R))},$s.\u0275cmp=u.Nb({type:$s,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(ks,!0),u.ad(V.a,!0),u.ad(N.a,!0)),2&t&&(u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.paginator=n.first),u.Cc(n=u.ic())&&(e.sort=n.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/statuses/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","img_filename"],[4,"matHeaderCellDef"],["color","primary",4,"matCellDef"],["matColumnDef","id"],["mat-sort-header","",3,"hide-for-mobile",4,"matHeaderCellDef"],[3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","label_status"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","identifier"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["color","primary"],["aria-hidden","true",3,"class",4,"ngIf"],["aria-hidden","true"],["mat-sort-header",""],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,ws,9,6,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,Os,2,0,"div",9),u.Qc(14,zs,28,14,"mat-card",10),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading))},directives:[S.e,S.f,M.a,Y.a,Z.t,Dt.h,Dt.g,Dt.d,r.f,Ut.a,Dt.c,I.k,O.c,T.a,k.c,w.b,o.c,o.t,o.i,V.a,B.n,N.a,B.c,B.i,B.b,B.k,B.m,B.h,B.a,N.b,D.b,Ft.b,B.j,B.l,r.d],pipes:[m.d],encapsulation:2}),$s);function Ns(t,e){1&t&&(u.Zb(0,"div",10),u.Ub(1,"mat-spinner",11),u.Yb())}function Js(t,e){if(1&t){var n=u.ac();u.Zb(0,"input",31),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).status.id=t}))("blur",(function(){return u.Hc(n),u.lc(2).isAvailable()})),u.mc(1,"translate"),u.mc(2,"translate"),u.Yb()}if(2&t){var a=u.lc(2);u.tc("title",u.nc(1,4,"lang.id")),u.tc("placeholder",u.nc(2,6,"lang.id")),u.sc("formControl",a.statusId)("ngModel",a.status.id)}}function Gs(t,e){if(1&t){var n=u.ac();u.Zb(0,"input",32),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).status.id=t})),u.mc(1,"translate"),u.mc(2,"translate"),u.Yb()}if(2&t){var a=u.lc(2);u.tc("title",u.nc(1,3,"lang.id")),u.tc("placeholder",u.nc(2,5,"lang.id")),u.sc("ngModel",a.status.id)}}function Bs(t,e){if(1&t&&(u.Zb(0,"mat-error"),u.Sc(1),u.Yb()),2&t){var n=u.lc(2);u.Eb(1),u.Tc(n.getErrorMessage())}}var Ws=function(t){return[t]};function qs(t,e){if(1&t&&(u.Zb(0,"mat-option",33),u.Ub(1,"i",34),u.Sc(2),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n.image_name),u.Eb(1),u.Gb(n.image_name),u.sc("ngClass",u.zc(6,Ws,0==n.image_name.indexOf("fm")?"fm":"fa")),u.Eb(1),u.Uc(" ",n.image_name," ")}}function Xs(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-card",12),u.Zb(1,"form",13,14),u.hc("ngSubmit",(function(){return u.Hc(n),u.lc().submitStatus()})),u.Zb(3,"div",15),u.Zb(4,"div",16),u.Zb(5,"mat-form-field"),u.Qc(6,Js,3,8,"input",17),u.Qc(7,Gs,3,7,"input",18),u.Qc(8,Bs,2,1,"mat-error",19),u.Yb(),u.Yb(),u.Yb(),u.Zb(9,"div",15),u.Zb(10,"div",16),u.Zb(11,"mat-form-field"),u.Zb(12,"input",20),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().status.label_status=t})),u.mc(13,"translate"),u.mc(14,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(15,"div",15),u.Zb(16,"div",21),u.Zb(17,"mat-slide-toggle",22),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().status.can_be_searched=t})),u.mc(18,"translate"),u.Sc(19),u.mc(20,"translate"),u.Yb(),u.Yb(),u.Zb(21,"div",21),u.Zb(22,"mat-slide-toggle",23),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().status.can_be_modified=t})),u.mc(23,"translate"),u.Sc(24),u.mc(25,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(26,"div",15),u.Zb(27,"div",24),u.Ub(28,"mat-icon",25),u.Yb(),u.Zb(29,"div",26),u.Zb(30,"mat-form-field"),u.Zb(31,"mat-select",27),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().status.img_filename=t})),u.mc(32,"translate"),u.Qc(33,qs,3,8,"mat-option",28),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(34,"div",15),u.Zb(35,"div",29),u.Zb(36,"button",30),u.Sc(37),u.mc(38,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.Dc(2),i=u.lc();u.Eb(6),u.sc("ngIf",i.creationMode),u.Eb(1),u.sc("ngIf",!i.creationMode),u.Eb(1),u.sc("ngIf",i.statusId.invalid),u.Eb(4),u.tc("title",u.nc(13,23,"lang.label")),u.tc("placeholder",u.nc(14,25,"lang.label")),u.sc("ngModel",i.status.label_status),u.Eb(5),u.tc("matTooltip",u.nc(18,27,"lang.tooltipSearchStatus")),u.sc("ngModel",i.status.can_be_searched)("checked",1==i.status.can_be_searched),u.Eb(2),u.Uc(" ",u.nc(20,29,"lang.canBeSearched")," "),u.Eb(3),u.tc("matTooltip",u.nc(23,31,"lang.tooltipIndexStatus")),u.sc("ngModel",i.status.can_be_modified)("checked",1==i.status.can_be_modified),u.Eb(2),u.Uc(" ",u.nc(25,33,"lang.canBeModified")," "),u.Eb(4),u.Gb(i.status.img_filename),u.sc("ngClass",u.zc(39,Ws,0==i.status.img_filename.indexOf("fm")?"fm fm-2x":"fa fa-2x")),u.Eb(3),u.tc("placeholder",u.nc(32,35,"lang.imgRelated")),u.sc("ngModel",i.status.img_filename),u.Eb(2),u.sc("ngForOf",i.statusImages),u.Eb(3),u.sc("disabled",!a.form.valid),u.Eb(1),u.Tc(u.nc(38,37,"lang.save"))}}var Ks,tl=((Ks=function(){function t(e,n,a,i,r,c,s){_classCallCheck(this,t),this.translate=e,this.http=n,this.route=a,this.router=i,this.notify=r,this.headerService=c,this.appService=s,this.status={id:null,label_status:null,can_be_searched:null,can_be_modified:null,img_filename:"fm-letter"},this.statusImages="",this.loading=!1,this.statusId=new o.h("",[o.H.required,o.H.pattern(/^[\w.-]*$/)])}return _createClass(t,[{key:"getErrorMessage",value:function(){return this.statusId.hasError("required")?this.translate.instant("lang.enterValue"):this.statusId.hasError("pattern")?this.translate.instant("lang.patternId"):""}},{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.route.params.subscribe((function(e){void 0===e.identifier?(t.headerService.setHeader(t.translate.instant("lang.statusCreation")),t.http.get("../rest/administration/statuses/new").subscribe((function(e){t.status.img_filename="fm-letter",t.status.can_be_searched=!0,t.status.can_be_modified=!0,t.statusImages=e.statusImages,t.creationMode=!0,t.loading=!1})),t.statusIdAvailable=!1):(t.creationMode=!1,t.statusIdentifier=e.identifier,t.http.get("../rest/statuses/"+e.identifier).subscribe((function(e){t.status=e.status[0],t.headerService.setHeader(t.translate.instant("lang.statusModification"),t.status.label_status),t.status.can_be_searched="Y"===t.status.can_be_searched,t.status.can_be_modified="Y"===t.status.can_be_modified,t.statusImages=e.statusImages,t.statusIdAvailable=!0,t.loading=!1}),(function(e){t.notify.error(e.error.errors)})))}))}},{key:"isAvailable",value:function(){var t=this;this.status.id?this.http.get("../rest/status/"+this.status.id).subscribe((function(){t.statusIdAvailable=!1}),(function(e){t.statusIdAvailable=!1,"id not found"===e.error.errors&&(t.statusIdAvailable=!0)})):this.statusIdAvailable=!1}},{key:"submitStatus",value:function(){var t=this;!0===this.creationMode?this.http.post("../rest/statuses",this.status).subscribe((function(){t.notify.success(t.translate.instant("lang.statusAdded")),t.router.navigate(["administration/statuses"])}),(function(e){t.notify.error(e.error.errors)})):!1===this.creationMode&&this.http.put("../rest/statuses/"+this.statusIdentifier,this.status).subscribe((function(){t.notify.success(t.translate.instant("lang.statusUpdated")),t.router.navigate(["administration/statuses"])}),(function(e){t.notify.error(e.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||Ks)(u.Tb(m.e),u.Tb(f.b),u.Tb(r.a),u.Tb(r.c),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a))},Ks.\u0275cmp=u.Nb({type:Ks,selectors:[["ng-component"]],decls:13,vars:8,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"form-horizontal",3,"ngSubmit"],["statusFormUp","ngForm"],[1,"form-group"],[1,"col-sm-12"],["matInput","","maxlength","10","name","id","id","id","type","text","pattern","^[\\w.-]*$","required","",3,"formControl","ngModel","title","placeholder","ngModelChange","blur",4,"ngIf"],["matInput","","maxlength","10","name","id","id","id","required","","disabled","",3,"ngModel","title","placeholder","ngModelChange",4,"ngIf"],[4,"ngIf"],["matInput","","name","label_status","id","label_status","maxlength","50","type","text","required","",3,"ngModel","title","placeholder","ngModelChange"],[1,"col-sm-6",2,"white-space","nowrap","text-align","center"],["id","can_be_search","name","can_be_search","color","primary",3,"matTooltip","ngModel","checked","ngModelChange"],["id","can_be_modified","name","can_be_modified","color","primary",3,"matTooltip","ngModel","checked","ngModelChange"],[1,"col-sm-1",2,"text-align","right"],["aria-hidden","true","color","primary",3,"ngClass"],[1,"col-sm-11"],["id","status","name","status","required","",3,"ngModel","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-12",2,"text-align","center"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["matInput","","maxlength","10","name","id","id","id","type","text","pattern","^[\\w.-]*$","required","",3,"formControl","ngModel","title","placeholder","ngModelChange","blur"],["matInput","","maxlength","10","name","id","id","id","required","","disabled","",3,"ngModel","title","placeholder","ngModelChange"],[3,"value"],["color","primary",3,"ngClass"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Zb(1,"mat-sidenav-content"),u.Zb(2,"div",1),u.Zb(3,"div",2),u.Zb(4,"div",3),u.Ub(5,"header-left"),u.Yb(),u.Zb(6,"div",4),u.Ub(7,"header-right"),u.Yb(),u.Yb(),u.Ub(8,"div",5),u.Yb(),u.Zb(9,"div",6),u.Zb(10,"div",7),u.Qc(11,Ns,2,0,"div",8),u.Qc(12,Xs,39,41,"mat-card",9),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(3),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading))},directives:[S.e,S.f,M.a,Y.a,Z.t,O.c,T.a,o.J,o.u,o.v,k.c,w.b,o.c,o.o,o.E,o.t,o.w,nt.a,Ft.b,Ut.a,Z.q,it.a,Z.s,D.b,o.A,o.i,k.b,I.o],pipes:[m.d],encapsulation:2}),Ks),el=["snav2"],nl=["adminMenuTemplate"];function al(t,e){1&t&&(u.Zb(0,"mat-nav-list"),u.Zb(1,"h3",11),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"a",12),u.Ub(5,"mat-icon",13),u.Zb(6,"p",14),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(2),u.Tc(u.nc(3,2,"lang.actions")),u.Eb(5),u.Uc(" ",u.nc(8,4,"lang.add")," "))}function il(t,e){1&t&&(u.Zb(0,"div",15),u.Ub(1,"mat-spinner",16),u.Yb())}function rl(t,e){if(1&t&&(u.Zb(0,"mat-header-cell",38),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=u.lc(2);u.Jb("hide-for-mobile",n.appService.getViewMode()),u.Eb(1),u.Tc(u.nc(2,3,"lang.id"))}}function cl(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.Jb("hide-for-mobile",a.appService.getViewMode()),u.Eb(1),u.Uc(" ",n.id," ")}}function ol(t,e){1&t&&(u.Zb(0,"mat-header-cell",38),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.actionName")))}function sl(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.label_action," ")}}function ll(t,e){if(1&t&&(u.Zb(0,"mat-header-cell",38),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=u.lc(2);u.Jb("hide-for-mobile",n.appService.getViewMode()),u.Eb(1),u.Uc("",u.nc(2,3,"lang.actionHistory")," ")}}function dl(t,e){1&t&&(u.Zb(0,"span"),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc(" ",u.nc(2,1,"lang.no")," "))}function bl(t,e){1&t&&(u.Zb(0,"span"),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc(" ",u.nc(2,1,"lang.yes")," "))}function ul(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Qc(1,dl,3,3,"span",39),u.Qc(2,bl,3,3,"span",39),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.Jb("hide-for-mobile",a.appService.getViewMode()),u.Eb(1),u.sc("ngIf","N"==n.history),u.Eb(1),u.sc("ngIf","Y"==n.history)}}function ml(t,e){1&t&&u.Ub(0,"mat-header-cell")}function fl(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-cell",40),u.Zb(1,"button",41),u.hc("click",(function(t){u.Hc(n);var a=e.$implicit,i=u.lc(2);return t.stopPropagation(),i.deleteAction(a)})),u.mc(2,"translate"),u.Ub(3,"mat-icon",42),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit;u.Eb(1),u.tc("matTooltip",u.nc(2,2,"lang.delete")),u.sc("disabled","Y"==a.is_system)}}function pl(t,e){1&t&&u.Ub(0,"mat-header-row")}function gl(t,e){1&t&&(u.Ub(0,"mat-row",43),u.mc(1,"translate")),2&t&&(u.uc("routerLink","/administration/actions/",e.$implicit.id,""),u.tc("matTooltip",u.nc(1,2,"lang.view")))}function hl(t,e){if(1&t&&(u.Zb(0,"mat-card",17),u.Zb(1,"div",18),u.Zb(2,"div",19),u.Zb(3,"mat-form-field"),u.Ub(4,"input",20),u.mc(5,"translate"),u.Yb(),u.Yb(),u.Zb(6,"div",19),u.Ub(7,"mat-paginator",21,22),u.Yb(),u.Yb(),u.Zb(9,"mat-table",23,24),u.Xb(11,25),u.Qc(12,rl,3,5,"mat-header-cell",26),u.Qc(13,cl,2,3,"mat-cell",27),u.Wb(),u.Xb(14,28),u.Qc(15,ol,3,3,"mat-header-cell",29),u.Qc(16,sl,2,1,"mat-cell",30),u.Wb(),u.Xb(17,31),u.Qc(18,ll,3,5,"mat-header-cell",26),u.Qc(19,ul,3,4,"mat-cell",27),u.Wb(),u.Xb(20,32),u.Qc(21,ml,1,0,"mat-header-cell",33),u.Qc(22,fl,4,4,"mat-cell",34),u.Wb(),u.Qc(23,pl,1,0,"mat-header-row",35),u.Qc(24,gl,2,4,"mat-row",36),u.Yb(),u.Zb(25,"div",37),u.Sc(26),u.mc(27,"translate"),u.Yb(),u.Yb()),2&t){var n=u.lc();u.Eb(4),u.tc("placeholder",u.nc(5,10,"lang.filterBy")),u.sc("formControl",n.adminService.getFilterField()),u.Eb(3),u.sc("length",100)("hidePageSize",!0)("pageSize",10),u.Eb(2),u.sc("dataSource",n.adminService.getDataSource()),u.Eb(14),u.sc("matHeaderRowDef",n.displayedColumns),u.Eb(1),u.sc("matRowDefColumns",n.displayedColumns),u.Eb(2),u.Vc(" ",n.actions.length," ",u.nc(27,12,"lang.actions"),"")}}var vl,yl=((vl=function(){function t(e,n,a,i,r,c,o,s){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.headerService=i,this.appService=r,this.adminService=c,this.functions=o,this.viewContainerRef=s,this.search=null,this.actions=[],this.titles=[],this.loading=!1,this.displayedColumns=["id","label_action","history","actions"],this.filterColumns=["id","label_action"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/actions").subscribe((function(e){t.actions=e.actions,t.headerService.setHeader(t.translate.instant("lang.administration")+" "+t.translate.instant("lang.actions")),t.loading=!1,setTimeout((function(){t.adminService.setDataSource("admin_actions",t.actions,t.sort,t.paginator,t.filterColumns)}),0)}),(function(e){t.notify.handleErrors(e)}))}},{key:"deleteAction",value:function(t){var e=this;confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+t.label_action+" \xbb")&&this.http.delete("../rest/actions/"+t.id).subscribe((function(t){e.actions=t.actions,e.adminService.setDataSource("admin_actions",e.actions,e.sort,e.paginator,e.filterColumns),e.notify.success(e.translate.instant("lang.actionDeleted"))}),(function(t){e.notify.error(t.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||vl)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a),u.Tb(It),u.Tb(C.a),u.Tb(u.R))},vl.\u0275cmp=u.Nb({type:vl,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(el,!0),u.Oc(nl,!0),u.ad(V.a,!0),u.ad(N.a,!0)),2&t&&(u.Cc(n=u.ic())&&(e.sidenavRight=n.first),u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.paginator=n.first),u.Cc(n=u.ic())&&(e.sort=n.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/actions/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"placeholder","formControl"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","id"],["mat-sort-header","",3,"hide-for-mobile",4,"matHeaderCellDef"],[3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","label_action"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","history"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header",""],[4,"ngIf"],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"disabled","matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,al,9,6,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,il,2,0,"div",9),u.Qc(14,hl,28,14,"mat-card",10),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading))},directives:[S.e,S.f,M.a,Y.a,Z.t,Dt.h,Dt.g,Dt.d,r.f,Ut.a,Dt.c,I.k,O.c,T.a,k.c,w.b,o.c,o.t,o.i,V.a,B.n,N.a,B.c,B.i,B.b,B.k,B.m,B.h,N.b,B.a,D.b,Ft.b,B.j,B.l,r.d],pipes:[m.d],encapsulation:2}),vl),Cl=n("fBaO"),El=["snav2"];function Sl(t,e){1&t&&(u.Zb(0,"div",10),u.Ub(1,"mat-spinner",11),u.Yb())}function Ml(t,e){1&t&&(u.Zb(0,"div",28),u.Zb(1,"b"),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Sc(4),u.mc(5,"translate"),u.Yb()),2&t&&(u.Eb(2),u.Uc("",u.nc(3,2,"lang.isSytemAction")," !"),u.Eb(2),u.Uc(" ",u.nc(5,4,"lang.doNotModifyUnlessExpert")," "))}function xl(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-chip",32),u.hc("removed",(function(){u.Hc(n);var t=e.index;return u.lc(3).removeSelectedFields(t)})),u.Sc(1),u.Ub(2,"mat-icon",33),u.Yb()}if(2&t){var a=e.$implicit;u.sc("removable",!0),u.Eb(1),u.Uc(" ",a," ")}}function Yl(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",16),u.Zb(1,"div",17),u.Zb(2,"plugin-select-search",29),u.hc("afterSelected",(function(){return u.Hc(n),u.lc(2).getSelectedFields()})),u.Yb(),u.Zb(3,"mat-chip-list",30),u.Qc(4,xl,3,2,"mat-chip",31),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(2),u.Gb(""),u.sc("showLabel",!0)("label",a.translate.instant("lang.checkEmptyFields"))("placeholderLabel",a.translate.instant("lang.checkEmptyFields"))("formControlSelect",a.customFieldsFormControl)("datas",a.availableCustomFields),u.Eb(2),u.sc("ngForOf",a.selectedFieldsValue)}}function Zl(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",16),u.Zb(1,"div",17),u.Zb(2,"mat-form-field"),u.Zb(3,"mat-select",34),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).arMode=t})),u.mc(4,"translate"),u.mc(5,"translate"),u.Zb(6,"mat-option",35),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Zb(9,"mat-option",36),u.Sc(10),u.mc(11,"translate"),u.Yb(),u.Zb(12,"mat-option",37),u.Sc(13),u.mc(14,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(3),u.tc("title",u.nc(4,7,"lang.generateARMode")),u.tc("placeholder",u.nc(5,9,"lang.generateARMode")),u.sc("required","create_acknowledgement_receipt"==a.action.actionPageId)("ngModel",a.arMode),u.Eb(4),u.Tc(u.nc(8,11,"lang.autoAR")),u.Eb(3),u.Tc(u.nc(11,13,"lang.manualAR")),u.Eb(3),u.Tc(u.nc(14,15,"lang.bothAR"))}}function _l(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",16),u.Zb(1,"div",17),u.Zb(2,"plugin-select-search",29),u.hc("afterSelected",(function(){u.Hc(n);var t=u.lc(2);return t.action.id_status=t.selectStatusId.value})),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(2),u.Gb(""),u.sc("showLabel",!0)("label",a.translate.instant("lang.associatedStatus"))("placeholderLabel",a.translate.instant("lang.associatedStatus"))("formControlSelect",a.selectStatusId)("datas",a.statuses)}}function kl(t,e){if(1&t&&(u.Zb(0,"mat-option",38),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n.value),u.Eb(1),u.Uc(" ",n.label," ")}}function wl(t,e){if(1&t&&(u.Zb(0,"mat-option",39),u.Sc(1),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.sc("value",n.id)("disabled","registeredMail"!==n.id&&"registeredMail"===a.action.actionPageGroup),u.Eb(1),u.Uc(" ",n.label," ")}}function Ol(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-card",12),u.Qc(1,Ml,6,6,"div",13),u.Zb(2,"form",14,15),u.hc("ngSubmit",(function(){return u.Hc(n),u.lc().onSubmit()})),u.Zb(4,"div",16),u.Zb(5,"div",17),u.Zb(6,"mat-form-field"),u.Zb(7,"input",18),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().action.label_action=t})),u.mc(8,"translate"),u.mc(9,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(10,"div",16),u.Zb(11,"div",17),u.Zb(12,"plugin-select-search",19),u.hc("afterSelected",(function(){return u.Hc(n),u.lc().getCustomFields()})),u.Yb(),u.Yb(),u.Yb(),u.Qc(13,Yl,5,8,"div",20),u.Qc(14,Zl,15,17,"div",20),u.Qc(15,_l,3,7,"div",20),u.Zb(16,"div",16),u.Zb(17,"div",17),u.Zb(18,"mat-form-field"),u.Zb(19,"mat-select",21),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().action.keyword=t})),u.mc(20,"translate"),u.mc(21,"translate"),u.Qc(22,kl,2,2,"mat-option",22),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(23,"div",16),u.Zb(24,"div",23),u.Zb(25,"mat-slide-toggle",24),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().action.history=t})),u.mc(26,"translate"),u.Sc(27),u.mc(28,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(29,"div",16),u.Zb(30,"div",17),u.Zb(31,"mat-form-field"),u.Zb(32,"mat-select",25),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().action.actionCategories=t})),u.mc(33,"translate"),u.mc(34,"translate"),u.Qc(35,wl,2,3,"mat-option",26),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(36,"div",16),u.Zb(37,"div",23),u.Zb(38,"button",27),u.Sc(39),u.mc(40,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.Dc(3),i=u.lc();u.Eb(1),u.sc("ngIf",1==i.action.is_system),u.Eb(6),u.tc("title",u.nc(8,30,"lang.label")),u.tc("placeholder",u.nc(9,32,"lang.label")),u.sc("ngModel",i.action.label_action),u.Eb(5),u.Gb(""),u.sc("showLabel",!0)("label",i.translate.instant("lang.actionCarriedOut"))("placeholderLabel",i.translate.instant("lang.actionCarriedOut"))("formControlSelect",i.selectActionPageId)("datas",i.actionPages)("optGroupList",i.group)("optGroupTarget","category"),u.Eb(1),u.sc("ngIf",!i.functions.empty(i.availableCustomFields)&&"close_mail"==i.action.actionPageId),u.Eb(1),u.sc("ngIf","create_acknowledgement_receipt"==i.action.actionPageId),u.Eb(1),u.sc("ngIf","reconcile"!=i.action.actionPageId),u.Eb(4),u.tc("title",u.nc(20,34,"lang.keyword")),u.tc("placeholder",u.nc(21,36,"lang.keyword")),u.sc("ngModel",i.action.keyword),u.Eb(3),u.sc("ngForOf",i.keywordsList),u.Eb(3),u.tc("title",u.nc(26,38,"lang.actionHistoryDesc")),u.sc("ngModel",i.action.history)("checked","Y"==i.action.history),u.Eb(2),u.Uc(" ",u.nc(28,40,"lang.actionHistory"),""),u.Eb(5),u.tc("title",u.nc(33,42,"lang.chooseCategoryAssociation")),u.tc("placeholder",u.nc(34,44,"lang.chooseCategoryAssociation")),u.sc("ngModel",i.action.actionCategories),u.Eb(3),u.sc("ngForOf",i.categoriesList),u.Eb(3),u.sc("disabled",!a.form.valid),u.Eb(1),u.Tc(u.nc(40,46,"lang.save"))}}var Tl,Il=((Tl=function(){function t(e,n,a,i,r,c,s,l){_classCallCheck(this,t),this.translate=e,this.http=n,this.route=a,this.router=i,this.notify=r,this.headerService=c,this.appService=s,this.functions=l,this.action={},this.statuses=[],this.actionPages=[],this.categoriesList=[],this.keywordsList=[],this.group=[],this.loading=!1,this.availableCustomFields=[],this.customFieldsFormControl=new o.h({value:"",disabled:!1}),this.selectedFieldsValue=[],this.selectedFieldsId=[],this.selectActionPageId=new o.h,this.selectStatusId=new o.h}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.route.params.subscribe((function(e){void 0===e.id?(t.creationMode=!0,t.http.get("../rest/initAction").subscribe((function(e){t.action=e.action,t.selectActionPageId.setValue(t.action.actionPageId),t.selectStatusId.setValue(t.action.id_status),t.categoriesList=e.categoriesList,t.statuses=e.statuses.map((function(t){return{id:t.id,label:t.label_status}})),t.actionPages=e.actionPages,t.actionPages.map((function(t){return t.category})).filter((function(t,e,n){return n.indexOf(t)===e})).forEach((function(e){t.group.push({id:e,label:t.translate.instant("lang."+e)})})),t.keywordsList=e.keywordsList,t.headerService.setHeader(t.translate.instant("lang.actionCreation")),t.loading=!1}))):(t.creationMode=!1,t.http.get("../rest/actions/"+e.id).subscribe((function(e){return Object(yt.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.action=e.action,this.selectActionPageId.setValue(this.action.actionPageId),this.selectStatusId.setValue(this.action.id_status),this.categoriesList=e.categoriesList,this.statuses=e.statuses.map((function(t){return{id:t.id,label:t.label_status}})),this.actionPages=e.actionPages,this.actionPages.map((function(t){return t.category})).filter((function(t,e,n){return n.indexOf(t)===e})).forEach((function(t){n.group.push({id:t,label:n.translate.instant("lang."+t)})})),this.keywordsList=e.keywordsList,this.headerService.setHeader(this.translate.instant("lang.actionCreation"),e.action.label_action),t.next=11,this.getCustomFields();case 11:this.loading=!1,"close_mail"===this.action.actionPageId?(this.customFieldsFormControl=new o.h({value:this.action.parameters.requiredFields,disabled:!1}),this.selectedFieldsId=[],this.action.parameters.requiredFields&&(this.selectedFieldsId=this.action.parameters.requiredFields),this.selectedFieldsId.forEach((function(t){n.availableCustomFields.forEach((function(e){e.id===t&&n.selectedFieldsValue.push(e.label)}))}))):"create_acknowledgement_receipt"===this.action.actionPageId&&(this.arMode=this.action.parameters.mode);case 13:case"end":return t.stop()}}),t,this)})))})))}))}},{key:"getCustomFields",value:function(){var t=this;return this.action.actionPageId=this.selectActionPageId.value,this.action.actionPageGroup=this.actionPages.filter((function(e){return e.id===t.action.actionPageId}))[0].category,"registeredMail"===this.action.actionPageGroup&&(this.action.actionCategories=["registeredMail"]),new Promise((function(e,n){"close_mail"===t.action.actionPageId&&t.functions.empty(t.availableCustomFields)?t.http.get("../rest/customFields").pipe(Object(d.a)((function(n){return t.availableCustomFields=n.customFields.map((function(t){return t.id="indexingCustomField_"+t.id,t})),e(!0)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe():e(!0)}))}},{key:"getSelectedFields",value:function(){var t=this;this.availableCustomFields.forEach((function(e){e.id===t.customFieldsFormControl.value&&(t.selectedValue=e)})),this.selectedFieldsId.indexOf(this.customFieldsFormControl.value)<0&&(this.selectedFieldsValue.push(this.selectedValue.label),this.selectedFieldsId.push(this.customFieldsFormControl.value)),this.customFieldsFormControl.reset()}},{key:"removeSelectedFields",value:function(t){this.selectedFieldsValue.splice(t,1),this.selectedFieldsId.splice(t,1)}},{key:"onSubmit",value:function(){var t=this;"close_mail"===this.action.actionPageId?this.action.parameters={requiredFields:this.selectedFieldsId}:"create_acknowledgement_receipt"===this.action.actionPageId&&(this.action.parameters={mode:this.arMode}),this.creationMode?this.http.post("../rest/actions",this.action).subscribe((function(){t.router.navigate(["/administration/actions"]),t.notify.success(t.translate.instant("lang.actionAdded"))}),(function(e){t.notify.error(e.error.errors)})):this.http.put("../rest/actions/"+this.action.id,this.action).subscribe((function(){t.router.navigate(["/administration/actions"]),t.notify.success(t.translate.instant("lang.actionUpdated"))}),(function(e){t.notify.error(e.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||Tl)(u.Tb(m.e),u.Tb(f.b),u.Tb(r.a),u.Tb(r.c),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a),u.Tb(C.a))},Tl.\u0275cmp=u.Nb({type:Tl,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&u.Oc(El,!0),2&t&&u.Cc(n=u.ic())&&(e.sidenavRight=n.first)},decls:13,vars:8,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"form-horizontal",3,"ngSubmit"],["actionsFormUp","ngForm"],[1,"form-group"],[1,"col-sm-12"],["matInput","","required","","name","action_name","id","action_name","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],[2,"width","100%",3,"showLabel","label","placeholderLabel","formControlSelect","datas","optGroupList","optGroupTarget","afterSelected"],["class","form-group",4,"ngIf"],["id","keyword","name","keyword",3,"title","placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-12",2,"text-align","center"],["name","history","id","history","color","primary",3,"title","ngModel","checked","ngModelChange"],["id","categorieslist","name","categorieslist","multiple","","required","",3,"title","placeholder","ngModel","ngModelChange"],[3,"value","disabled",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["role","alert",1,"alert","alert-danger"],[2,"width","100%",3,"showLabel","label","placeholderLabel","formControlSelect","datas","afterSelected"],[1,"checkbox-selected-list"],["selected","",3,"removable","removed",4,"ngFor","ngForOf"],["selected","",3,"removable","removed"],["matChipRemove","",1,"fa","fa-times-circle"],["id","generateARmode","name","generateARmode",3,"required","title","placeholder","ngModel","ngModelChange"],["value","auto"],["value","manual"],["value","both"],[3,"value"],[3,"value","disabled"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Zb(1,"mat-sidenav-content"),u.Zb(2,"div",1),u.Zb(3,"div",2),u.Zb(4,"div",3),u.Ub(5,"header-left"),u.Yb(),u.Zb(6,"div",4),u.Ub(7,"header-right"),u.Yb(),u.Yb(),u.Ub(8,"div",5),u.Yb(),u.Zb(9,"div",6),u.Zb(10,"div",7),u.Qc(11,Sl,2,0,"div",8),u.Qc(12,Ol,41,48,"mat-card",9),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(3),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading))},directives:[S.e,S.f,M.a,Y.a,Z.t,O.c,T.a,o.J,o.u,o.v,k.c,w.b,o.c,o.E,o.o,o.t,o.w,Cl.a,it.a,Z.s,nt.a,D.b,er.d,er.a,Ut.a,er.e,I.o],pipes:[m.d],encapsulation:2}),Tl);function Dl(t,e){1&t&&(u.Zb(0,"div",10),u.Ub(1,"mat-spinner",11),u.Yb())}function Ul(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-form-field"),u.Zb(1,"input",27),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).parameter.param_value_string=t})),u.mc(2,"translate"),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(1),u.tc("placeholder",u.nc(2,2,"lang.value")),u.sc("ngModel",a.parameter.param_value_string)}}function Pl(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-form-field"),u.Zb(1,"input",28),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).parameter.param_value_int=t})),u.mc(2,"translate"),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(1),u.tc("placeholder",u.nc(2,2,"lang.value")),u.sc("ngModel",a.parameter.param_value_int)}}function Fl(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-form-field"),u.Zb(1,"input",29),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).parameter.param_value_date=t})),u.mc(2,"translate"),u.Yb(),u.Ub(3,"mat-datepicker-toggle",30),u.Ub(4,"mat-datepicker",31,32),u.Yb()}if(2&t){var a=u.Dc(5),i=u.lc(2);u.Eb(1),u.tc("placeholder",u.nc(2,4,"lang.date")),u.sc("ngModel",i.parameter.param_value_date)("matDatepicker",a),u.Eb(2),u.sc("for",a)}}function Ll(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-card",12),u.Zb(1,"form",13,14),u.hc("ngSubmit",(function(){return u.Hc(n),u.lc().onSubmit()})),u.Zb(3,"div",15),u.Zb(4,"div",16),u.Zb(5,"mat-form-field"),u.Zb(6,"input",17),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().parameter.id=t})),u.mc(7,"translate"),u.mc(8,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(9,"div",15),u.Zb(10,"div",16),u.Zb(11,"mat-form-field"),u.Zb(12,"input",18),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().parameter.description=t})),u.mc(13,"translate"),u.mc(14,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(15,"div",15),u.Zb(16,"div",19),u.Zb(17,"mat-form-field"),u.Zb(18,"mat-select",20),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().type=t})),u.mc(19,"translate"),u.Zb(20,"mat-option",21),u.Sc(21),u.mc(22,"translate"),u.Yb(),u.Zb(23,"mat-option",22),u.Sc(24),u.mc(25,"translate"),u.Yb(),u.Zb(26,"mat-option",23),u.Sc(27),u.mc(28,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(29,"div",19),u.Qc(30,Ul,3,4,"mat-form-field",24),u.Qc(31,Pl,3,4,"mat-form-field",24),u.Qc(32,Fl,6,6,"mat-form-field",24),u.Yb(),u.Yb(),u.Zb(33,"div",15),u.Zb(34,"div",25),u.Zb(35,"button",26),u.Sc(36),u.mc(37,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.Dc(2),i=u.lc();u.Eb(6),u.tc("title",u.nc(7,18,"lang.id")),u.tc("placeholder",u.nc(8,20,"lang.id")),u.sc("ngModel",i.parameter.id)("disabled",!i.creationMode),u.Eb(6),u.tc("title",u.nc(13,22,"lang.description")),u.tc("placeholder",u.nc(14,24,"lang.description")),u.sc("ngModel",i.parameter.description),u.Eb(6),u.tc("placeholder",u.nc(19,26,"lang.type")),u.sc("ngModel",i.type)("disabled",!i.creationMode),u.Eb(3),u.Uc(" ",u.nc(22,28,"lang.stringInput")," "),u.Eb(3),u.Uc(" ",u.nc(25,30,"lang.integer")," "),u.Eb(3),u.Uc(" ",u.nc(28,32,"lang.date")," "),u.Eb(3),u.sc("ngIf","string"==i.type),u.Eb(1),u.sc("ngIf","int"==i.type),u.Eb(1),u.sc("ngIf","date"==i.type),u.Eb(3),u.sc("disabled",!a.form.valid),u.Eb(1),u.Tc(u.nc(37,34,"lang.save"))}}var jl,Rl=((jl=function(){function t(e,n,a,i,r,c,o){_classCallCheck(this,t),this.translate=e,this.http=n,this.route=a,this.router=i,this.notify=r,this.headerService=c,this.appService=o,this.loading=!1,this.parameter={}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.route.params.subscribe((function(e){void 0===e.id?(t.headerService.setHeader(t.translate.instant("lang.parameterCreation")),t.creationMode=!0,t.loading=!1):(t.creationMode=!1,t.http.get("../rest/parameters/"+e.id).subscribe((function(e){t.parameter=e.parameter,t.headerService.setHeader(t.translate.instant("lang.parameterModification"),t.parameter.id),t.type="number"==typeof t.parameter.param_value_int?"int":t.parameter.param_value_date?"date":"string",t.loading=!1}),(function(e){t.notify.handleErrors(e)})))}))}},{key:"onSubmit",value:function(){var t=this;"date"===this.type?(this.parameter.param_value_int=null,this.parameter.param_value_string=null):"int"===this.type?(this.parameter.param_value_date=null,this.parameter.param_value_string=null):"string"===this.type&&(this.parameter.param_value_date=null,this.parameter.param_value_int=null),!0===this.creationMode?this.http.post("../rest/parameters",this.parameter).subscribe((function(){t.router.navigate(["administration/parameters"]),t.notify.success(t.translate.instant("lang.parameterAdded"))}),(function(e){t.notify.error(e.error.errors)})):!1===this.creationMode&&this.http.put("../rest/parameters/"+this.parameter.id,this.parameter).subscribe((function(){t.router.navigate(["administration/parameters"]),t.notify.success(t.translate.instant("lang.parameterUpdated"))}),(function(e){t.notify.error(e.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||jl)(u.Tb(m.e),u.Tb(f.b),u.Tb(r.a),u.Tb(r.c),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a))},jl.\u0275cmp=u.Nb({type:jl,selectors:[["ng-component"]],decls:13,vars:8,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"form-horizontal",3,"ngSubmit"],["parameterForm","ngForm"],[1,"form-group"],[1,"col-sm-12"],["matInput","","name","id","type","text","pattern","^[\\w-]*$","required","",3,"ngModel","disabled","title","placeholder","ngModelChange"],["matInput","","name","description","id","description","type","text",3,"ngModel","title","placeholder","ngModelChange"],[1,"col-sm-6"],["name","type","required","",3,"placeholder","ngModel","disabled","ngModelChange"],["value","string"],["value","int"],["value","date"],[4,"ngIf"],[1,"col-sm-12",2,"text-align","center"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["matInput","","name","paramValueString","type","text","required","",3,"ngModel","placeholder","ngModelChange"],["matInput","","name","paramValueInt","type","number","pattern","^[0-9]*$","required","",3,"ngModel","placeholder","ngModelChange"],["matInput","","name","paramValueDate","required","",3,"ngModel","matDatepicker","placeholder","ngModelChange"],["matSuffix","",3,"for"],["startView","month"],["picker",""]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Zb(1,"mat-sidenav-content"),u.Zb(2,"div",1),u.Zb(3,"div",2),u.Zb(4,"div",3),u.Ub(5,"header-left"),u.Yb(),u.Zb(6,"div",4),u.Ub(7,"header-right"),u.Yb(),u.Yb(),u.Ub(8,"div",5),u.Yb(),u.Zb(9,"div",6),u.Zb(10,"div",7),u.Qc(11,Dl,2,0,"div",8),u.Qc(12,Ll,38,36,"mat-card",9),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(3),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading))},directives:[S.e,S.f,M.a,Y.a,Z.t,O.c,T.a,o.J,o.u,o.v,k.c,w.b,o.c,o.A,o.E,o.t,o.w,it.a,I.o,D.b,o.z,Ve.f,Ve.h,k.j,Ve.d],pipes:[m.d],encapsulation:2}),jl),Ql=n("Kj3r"),Al=n("jhN1");function Hl(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-card",17),u.hc("click",(function(){u.Hc(n);var t=e.$implicit;return u.lc().selectBg(t.url)})),u.Yb()}if(2&t){var a=e.$implicit,i=u.lc();u.Pc("background","url("+a.url+")",u.Mb),u.Jb("selected",a.url===i.stepFormGroup.controls.bodyImage.value)("disabled",i.stepFormGroup.controls.bodyImage.disabled)}}function zl(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-card",18),u.hc("click",(function(){return u.Hc(n),u.Dc(2).click()})),u.Zb(1,"input",19,20),u.hc("change",(function(t){return u.Hc(n),u.lc().uploadTrigger(t,"bg")})),u.Yb(),u.Ub(3,"i",21),u.Yb()}}var $l,Vl=(($l=function(){function t(e,n,a,i,r,c){_classCallCheck(this,t),this.translate=e,this._formBuilder=n,this.notify=a,this.sanitizer=i,this.scanPipe=r,this.http=c,this.readonlyState=!1,this.backgroundList=[],o.H.pattern(/^[a-zA-Z0-9_\-]*$/),this.stepFormGroup=this._formBuilder.group({applicationName:["",o.H.required],loginpage_message:[""],homepage_message:[""],traffic_record_summary_sheet:[""],bodyImage:["../rest/images?image=loginPage"],logo:["../rest/images?image=logo"]}),this.backgroundList=Array.from({length:16}).map((function(t,e){return{filename:e+1+".jpg",url:"assets/".concat(e+1,".jpg")}}))}return _createClass(t,[{key:"ngOnInit",value:function(){return Object(yt.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getParameters();case 2:case"end":return t.stop()}}),t,this)})))}},{key:"getParameters",value:function(){var t=this;return new Promise((function(e){t.http.get("../rest/parameters").pipe(Object(d.a)((function(e){t.stepFormGroup.controls.homepage_message.setValue(e.parameters.filter((function(t){return"homepage_message"===t.id}))[0].value),t.stepFormGroup.controls.loginpage_message.setValue(e.parameters.filter((function(t){return"loginpage_message"===t.id}))[0].value),t.stepFormGroup.controls.traffic_record_summary_sheet.setValue(e.parameters.filter((function(t){return"traffic_record_summary_sheet"===t.id}))[0].value)})),Object(X.a)((function(){return t.http.get("../rest/authenticationInformations")})),Object(d.a)((function(e){t.stepFormGroup.controls.applicationName.setValue(e.applicationName),setTimeout((function(){t.stepFormGroup.controls.applicationName.valueChanges.pipe(Object(Ql.a)(1e3),Object(d.a)((function(){return t.saveParameter("applicationName")}))).subscribe(),t.stepFormGroup.controls.homepage_message.valueChanges.pipe(Object(Ql.a)(100),Object(d.a)((function(){return t.saveParameter("homepage_message")}))).subscribe(),t.stepFormGroup.controls.loginpage_message.valueChanges.pipe(Object(Ql.a)(100),Object(d.a)((function(){return t.saveParameter("loginpage_message")}))).subscribe(),t.stepFormGroup.controls.traffic_record_summary_sheet.valueChanges.pipe(Object(Ql.a)(100),Object(d.a)((function(){return t.saveParameter("traffic_record_summary_sheet")}))).subscribe(),t.initMce()}),100)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}))}},{key:"isValidStep",value:function(){return void 0!==this.stepFormGroup&&this.stepFormGroup.valid}},{key:"initMce",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n={selector:"#loginpage_message",setup:function(e){e.on("Blur",(function(e){t.stepFormGroup.controls[e.target.id].setValue(tinymce.get(e.target.id).getContent())}))},base_url:"../node_modules/tinymce/",height:"200",suffix:".min",language:this.translate.instant("lang.langISO").replace("-","_"),language_url:"../node_modules/tinymce-i18n/langs/".concat(this.translate.instant("lang.langISO").replace("-","_"),".js"),menubar:!1,statusbar:!1,readonly:e,plugins:["autolink","table","code"],external_plugins:{maarch_b64image:"../../src/frontend/plugins/tinymce/maarch_b64image/plugin.min.js"},table_toolbar:"",table_sizing_mode:"relative",table_resize_bars:!1,toolbar_sticky:!0,toolbar_drawer:"floating",table_style_by_css:!0,content_style:"table td { padding: 1px; vertical-align: top; }",forced_root_block:!1,toolbar:e?"":"undo redo | fontselect fontsizeselect | bold italic underline strikethrough forecolor | table maarch_b64image |         alignleft aligncenter alignright alignjustify         bullist numlist outdent indent | removeformat code"};tinymce.init(n),n.selector="#homepage_message",tinymce.init(n),n.selector="#traffic_record_summary_sheet",n.height="500",tinymce.init(n)}},{key:"uploadTrigger",value:function(t,e){var n=this;if(t.target.files&&t.target.files[0]){var a=this.canUploadFile(t.target.files[0],e);if(!0===a){var i=new FileReader;i.readAsDataURL(t.target.files[0]),i.onload=function(t){if("logo"===e)n.stepFormGroup.controls.logo.setValue(t.target.result),n.saveParameter("logo");else{var a=new Image;a.onload=function(e){e.target.width<1920||e.target.height<1080?n.notify.error(n.translate.instant("lang.badImageResolution",{value1:"1920x1080"})):(n.backgroundList.push({filename:t.target.result,url:t.target.result}),n.stepFormGroup.controls.bodyImage.setValue(t.target.result),n.saveParameter("bodyImage"))},a.src=t.target.result}}}else this.notify.error(a)}}},{key:"canUploadFile",value:function(t,e){var n="logo"!==e?["image/jpg","image/jpeg"]:["image/svg+xml"];if("logo"===e){if(t.size>5e6)return this.translate.instant("lang.maxFileSizeExceeded",{value1:"5mo"});if(-1===n.indexOf(t.type))return this.translate.instant("lang.onlyExtensionsAllowed",{value1:n.join(", ")})}else{if(t.size>1e7)return this.translate.instant("lang.maxFileSizeExceeded",{value1:"10mo"});if(-1===n.indexOf(t.type))return this.translate.instant("lang.onlyExtensionsAllowed",{value1:n.join(", ")})}return!0}},{key:"logoURL",value:function(){return this.sanitizer.bypassSecurityTrustUrl(this.stepFormGroup.controls.logo.value)}},{key:"selectBg",value:function(t){this.stepFormGroup.controls.bodyImage.disabled||(this.stepFormGroup.controls.bodyImage.setValue(t),this.saveParameter("bodyImage"))}},{key:"clickLogoButton",value:function(t){this.stepFormGroup.controls.logo.disabled||t.click()}},{key:"saveParameter",value:function(t){var e=this,n={};"logo"===t||"bodyImage"===t?n.image=this.stepFormGroup.controls[t].value:"applicationName"===t?n.applicationName=this.stepFormGroup.controls[t].value:n={param_value_string:this.stepFormGroup.controls[t].value},this.http.put("../rest/parameters/"+t,n).subscribe((function(){e.notify.success(e.translate.instant("lang.parameterUpdated")),"logo"===t&&setTimeout((function(){window.location.reload()}),500)}),(function(t){e.notify.error(t.error.errors)}))}},{key:"ngOnDestroy",value:function(){tinymce.remove()}}]),t}()).\u0275fac=function(t){return new(t||$l)(u.Tb(m.e),u.Tb(o.g),u.Tb(y.a),u.Tb(Al.b),u.Tb(v.o),u.Tb(f.b))},$l.\u0275cmp=u.Nb({type:$l,selectors:[["app-parameters-customization"]],features:[u.Db([v.o])],decls:44,vars:30,consts:[[2,"display","contents",3,"formGroup"],[1,"col-md-6"],["appearance","outline"],["matInput","","formControlName","applicationName"],["name","loginpage_message","id","loginpage_message","formControlName","loginpage_message",2,"padding-top","10px"],["name","homepage_message","id","homepage_message","formControlName","homepage_message",2,"padding-top","10px"],["matRipple","",2,"width","350px","background-size","100%","cursor","pointer"],[2,"width","100%",3,"src","click"],["type","file","name","files[]","accept","image/svg+xml",2,"display","none",3,"change"],["uploadLogo",""],[1,"backgroundList"],[1,"backgroundItem",2,"background","url(../rest/images?image=loginPage)","background-size","cover"],[1,"backgroundItem",2,"background","url(assets/bodylogin.jpg)","background-size","cover",3,"click"],["style","opacity: 0.3;","class","backgroundItem",3,"selected","disabled","background","click",4,"ngFor","ngForOf"],["style","opacity: 0.3;display: flex;align-items: center;justify-content: center;","class","backgroundItem",3,"click",4,"ngIf"],[1,"col-md-10",2,"margin-top","20px"],["name","traffic_record_summary_sheet","id","traffic_record_summary_sheet","formControlName","traffic_record_summary_sheet",2,"padding-top","10px"],[1,"backgroundItem",2,"opacity","0.3",3,"click"],[1,"backgroundItem",2,"opacity","0.3","display","flex","align-items","center","justify-content","center",3,"click"],["type","file","name","files[]","accept","image/jpeg",2,"display","none",3,"change"],["uploadFile",""],[1,"fa","fa-plus",2,"font-size","30px","color","#666"]],template:function(t,e){if(1&t){var n=u.ac();u.Zb(0,"form",0),u.Zb(1,"div",1),u.Zb(2,"mat-form-field",2),u.Zb(3,"mat-label"),u.Sc(4),u.mc(5,"translate"),u.Yb(),u.Ub(6,"input",3),u.Yb(),u.Zb(7,"div"),u.Sc(8),u.mc(9,"translate"),u.Yb(),u.Ub(10,"textarea",4),u.Ub(11,"br"),u.Ub(12,"br"),u.Zb(13,"div"),u.Sc(14),u.mc(15,"translate"),u.Yb(),u.Ub(16,"textarea",5),u.Ub(17,"br"),u.Ub(18,"br"),u.Yb(),u.Zb(19,"div",1),u.Zb(20,"div"),u.Sc(21),u.mc(22,"translate"),u.Yb(),u.Zb(23,"div"),u.Zb(24,"mat-card",6),u.Zb(25,"img",7),u.hc("click",(function(){u.Hc(n);var t=u.Dc(27);return e.clickLogoButton(t)})),u.Yb(),u.Zb(26,"input",8,9),u.hc("change",(function(t){return e.uploadTrigger(t,"logo")})),u.Yb(),u.Yb(),u.Yb(),u.Ub(28,"br"),u.Zb(29,"div"),u.Sc(30),u.mc(31,"translate"),u.Yb(),u.Zb(32,"div",10),u.Ub(33,"mat-card",11),u.Zb(34,"mat-card",12),u.hc("click",(function(){return e.selectBg("assets/bodylogin.jpg")})),u.Yb(),u.Qc(35,Hl,1,6,"mat-card",13),u.Qc(36,zl,4,0,"mat-card",14),u.Yb(),u.Yb(),u.Zb(37,"div",15),u.Zb(38,"div"),u.Sc(39),u.mc(40,"translate"),u.Yb(),u.Ub(41,"textarea",16),u.Ub(42,"br"),u.Ub(43,"br"),u.Yb(),u.Yb()}2&t&&(u.sc("formGroup",e.stepFormGroup),u.Eb(4),u.Tc(u.nc(5,18,"lang.applicationName")),u.Eb(4),u.Uc("",u.nc(9,20,"lang.loginMsg")," : "),u.Eb(6),u.Uc("",u.nc(15,22,"lang.homeMsg")," : "),u.Eb(7),u.Uc("",u.nc(22,24,"lang.chooseLogo")," : "),u.Eb(4),u.sc("src",e.logoURL(),u.Kc),u.Eb(5),u.Uc("",u.nc(31,26,"lang.chooseLoginBg")," : "),u.Eb(3),u.Jb("disabled",e.stepFormGroup.controls.bodyImage.disabled)("selected","../rest/images?image=loginPage"===e.stepFormGroup.controls.bodyImage.value),u.Eb(1),u.Jb("disabled",e.stepFormGroup.controls.bodyImage.disabled)("selected","assets/bodylogin.jpg"===e.stepFormGroup.controls.bodyImage.value),u.Eb(1),u.sc("ngForOf",e.backgroundList),u.Eb(1),u.sc("ngIf",!e.stepFormGroup.controls.bodyImage.disabled),u.Eb(3),u.Uc("",u.nc(40,28,"lang.trafficRecordSummarySheetParameters")," : "))},directives:[o.J,o.u,o.l,k.c,k.g,w.b,o.c,o.t,o.j,T.a,I.t,Z.s,Z.t],pipes:[m.d],styles:[".backgroundList[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);grid-gap:10px}.selected[_ngcontent-%COMP%]{transition:all .3s;opacity:1!important;border:10px solid #f99830!important}.backgroundItem[_ngcontent-%COMP%]{border:0 solid #f99830;opacity:.5;transition:all .3s;cursor:pointer;height:120px;background-size:cover!important}.disabled[_ngcontent-%COMP%]{cursor:default!important}.backgroundItem[_ngcontent-%COMP%]:not(.disabled):hover{transition:all .3s;opacity:1!important}"]}),$l),Nl=["adminMenuTemplate"];function Jl(t,e){1&t&&(u.Zb(0,"mat-nav-list"),u.Zb(1,"h3",11),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"a",12),u.Ub(5,"mat-icon",13),u.Zb(6,"p",14),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(2),u.Tc(u.nc(3,2,"lang.actions")),u.Eb(5),u.Uc(" ",u.nc(8,4,"lang.add")," "))}function Gl(t,e){1&t&&(u.Zb(0,"div",15),u.Ub(1,"mat-spinner",16),u.Yb())}function Bl(t,e){1&t&&(u.Zb(0,"mat-header-cell",40),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc("",u.nc(2,1,"lang.id")," "))}function Wl(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.id," ")}}function ql(t,e){if(1&t&&(u.Zb(0,"mat-header-cell",40),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=u.lc(2);u.Jb("hide-for-mobile",n.appService.getViewMode()),u.Eb(1),u.Uc(" ",u.nc(2,3,"lang.description")," ")}}function Xl(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.Jb("hide-for-mobile",a.appService.getViewMode()),u.Eb(1),u.Uc(" ",n.description," ")}}function Kl(t,e){1&t&&(u.Zb(0,"mat-header-cell",40),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc("",u.nc(2,1,"lang.value")," "))}function td(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.value," ")}}function ed(t,e){1&t&&u.Ub(0,"mat-header-cell")}function nd(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-cell",41),u.Zb(1,"button",42),u.hc("click",(function(t){u.Hc(n);var a=e.$implicit,i=u.lc(2);return t.stopPropagation(),i.deleteParameter(a.id)})),u.mc(2,"translate"),u.Ub(3,"mat-icon",43),u.Yb(),u.Yb()}2&t&&(u.Eb(1),u.tc("matTooltip",u.nc(2,1,"lang.delete")))}function ad(t,e){1&t&&u.Ub(0,"mat-header-row")}function id(t,e){1&t&&(u.Ub(0,"mat-row",44),u.mc(1,"translate")),2&t&&(u.uc("routerLink","/administration/parameters/",e.$implicit.id,""),u.tc("matTooltip",u.nc(1,2,"lang.view")))}function rd(t,e){1&t&&u.Ub(0,"app-parameters-customization")}function cd(t,e){if(1&t&&(u.Zb(0,"mat-card",17),u.Zb(1,"mat-tab-group"),u.Zb(2,"mat-tab",18),u.mc(3,"translate"),u.Zb(4,"div",19),u.Zb(5,"div",20),u.Zb(6,"mat-form-field"),u.Ub(7,"input",21),u.mc(8,"translate"),u.Yb(),u.Yb(),u.Zb(9,"div",20),u.Ub(10,"mat-paginator",22,23),u.Yb(),u.Yb(),u.Zb(12,"mat-table",24,25),u.Xb(14,26),u.Qc(15,Bl,3,3,"mat-header-cell",27),u.Qc(16,Wl,2,1,"mat-cell",28),u.Wb(),u.Xb(17,29),u.Qc(18,ql,3,5,"mat-header-cell",30),u.Qc(19,Xl,2,3,"mat-cell",31),u.Wb(),u.Xb(20,32),u.Qc(21,Kl,3,3,"mat-header-cell",27),u.Qc(22,td,2,1,"mat-cell",28),u.Wb(),u.Xb(23,33),u.Qc(24,ed,1,0,"mat-header-cell",34),u.Qc(25,nd,4,3,"mat-cell",35),u.Wb(),u.Qc(26,ad,1,0,"mat-header-row",36),u.Qc(27,id,2,4,"mat-row",37),u.Yb(),u.Zb(28,"div",38),u.Sc(29),u.mc(30,"translate"),u.Yb(),u.Yb(),u.Zb(31,"mat-tab",18),u.mc(32,"translate"),u.Qc(33,rd,1,0,"ng-template",39),u.Yb(),u.Yb(),u.Yb()),2&t){var n=u.lc();u.Eb(2),u.sc("label",u.nc(3,12,"lang.technicalParameters")),u.Eb(5),u.tc("placeholder",u.nc(8,14,"lang.filterBy")),u.sc("formControl",n.adminService.getFilterField()),u.Eb(3),u.sc("length",100)("hidePageSize",!0)("pageSize",10),u.Eb(2),u.sc("dataSource",n.adminService.getDataSource()),u.Eb(14),u.sc("matHeaderRowDef",n.displayedColumns),u.Eb(1),u.sc("matRowDefColumns",n.displayedColumns),u.Eb(2),u.Vc(" ",n.parameters.length," ",u.nc(30,16,"lang.parameters"),""),u.Eb(2),u.sc("label",u.nc(32,18,"lang.customization"))}}var od,sd=((od=function(){function t(e,n,a,i,r,c,o,s){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.headerService=i,this.appService=r,this.functions=c,this.adminService=o,this.viewContainerRef=s,this.parameters={},this.loading=!1,this.displayedColumns=["id","description","value","actions"],this.filterColumns=["id","description","value"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.parameters")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/parameters").subscribe((function(e){t.parameters=e.parameters.filter((function(t){return-1===["homepage_message","loginpage_message","traffic_record_summary_sheet"].indexOf(t.id)})),t.loading=!1,setTimeout((function(){t.adminService.setDataSource("admin_parameters",t.parameters,t.sort,t.paginator,t.filterColumns)}),0)}))}},{key:"deleteParameter",value:function(t){var e=this;confirm(this.translate.instant("lang.deleteMsg"))&&this.http.delete("../rest/parameters/"+t).subscribe((function(t){e.parameters=t.parameters.filter((function(t){return-1===["homepage_message","loginpage_message","traffic_record_summary_sheet"].indexOf(t.id)})),e.adminService.setDataSource("admin_parameters",e.parameters,e.sort,e.paginator,e.filterColumns),e.notify.success(e.translate.instant("lang.parameterDeleted"))}),(function(t){e.notify.error(t.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||od)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a),u.Tb(C.a),u.Tb(It),u.Tb(u.R))},od.\u0275cmp=u.Nb({type:od,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(Nl,!0),u.ad(V.a,!0),u.ad(N.a,!0)),2&t&&(u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.paginator=n.first),u.Cc(n=u.ic())&&(e.sort=n.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/parameters/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[3,"label"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","description"],["mat-sort-header","",3,"hide-for-mobile",4,"matHeaderCellDef"],[3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","value"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["matTabContent",""],["mat-sort-header",""],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,Jl,9,6,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,Gl,2,0,"div",9),u.Qc(14,cd,34,20,"mat-card",10),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading))},directives:[S.e,S.f,M.a,Y.a,Z.t,Dt.h,Dt.g,Dt.d,r.f,Ut.a,Dt.c,I.k,O.c,T.a,Re.c,Re.a,k.c,w.b,o.c,o.t,o.i,V.a,B.n,N.a,B.c,B.i,B.b,B.k,B.m,Re.b,B.h,N.b,B.a,D.b,Ft.b,B.j,B.l,r.d,Vl],pipes:[m.d],encapsulation:2}),od),ld=["snav2"],dd=["adminMenuTemplate"];function bd(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-nav-list"),u.Zb(1,"h3",16),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"a",17),u.Ub(5,"mat-icon",18),u.Zb(6,"p",19),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Yb(),u.Zb(9,"a",20),u.hc("click",(function(){return u.Hc(n),u.lc(),u.Dc(16).toggle()})),u.Ub(10,"mat-icon",21),u.Zb(11,"p",19),u.Sc(12),u.mc(13,"translate"),u.Yb(),u.Yb(),u.Yb()}2&t&&(u.Eb(2),u.Tc(u.nc(3,3,"lang.actions")),u.Eb(5),u.Uc(" ",u.nc(8,5,"lang.add")," "),u.Eb(5),u.Uc(" ",u.nc(13,7,"lang.prioritiesOrder")," "))}function ud(t,e){1&t&&(u.Zb(0,"div",22),u.Ub(1,"mat-spinner",23),u.Yb())}function md(t,e){1&t&&(u.Zb(0,"mat-header-cell",45),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc("",u.nc(2,1,"lang.technicalId")," "))}function fd(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-cell",46),u.Zb(1,"span",47),u.hc("click",(function(t){return u.Hc(n),t.stopPropagation()})),u.Sc(2),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit;u.Eb(2),u.Uc(" ",a.id," ")}}function pd(t,e){1&t&&(u.Zb(0,"mat-header-cell",45),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc("",u.nc(2,1,"lang.label")," "))}function gd(t,e){if(1&t&&(u.Zb(0,"mat-cell",46),u.Ub(1,"input",48),u.Sc(2),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.tc("value",n.color),u.Eb(1),u.Uc(" ",n.label," ")}}function hd(t,e){if(1&t&&(u.Zb(0,"mat-header-cell",45),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=u.lc(2);u.Jb("hide-for-mobile",n.appService.getViewMode()),u.Eb(1),u.Uc(" ",u.nc(2,3,"lang.processDelayDay"),"")}}function vd(t,e){if(1&t&&(u.Zb(0,"mat-cell",46),u.Zb(1,"span"),u.Sc(2),u.Yb(),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.Jb("hide-for-mobile",a.appService.getViewMode()),u.Eb(2),u.Uc(" ",n.delays," ")}}function yd(t,e){1&t&&u.Ub(0,"mat-header-cell")}function Cd(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-cell",49),u.Zb(1,"button",50),u.hc("click",(function(t){u.Hc(n);var a=e.$implicit,i=u.lc(2);return t.stopPropagation(),i.deletePriority(a.id)})),u.mc(2,"translate"),u.Ub(3,"mat-icon",51),u.Yb(),u.Yb()}2&t&&(u.Eb(1),u.tc("matTooltip",u.nc(2,1,"lang.delete")))}function Ed(t,e){1&t&&u.Ub(0,"mat-header-row")}function Sd(t,e){1&t&&(u.Ub(0,"mat-row",52),u.mc(1,"translate")),2&t&&(u.uc("routerLink","/administration/priorities/",e.$implicit.id,""),u.tc("matTooltip",u.nc(1,2,"lang.view")))}function Md(t,e){if(1&t&&(u.Zb(0,"mat-card",24),u.Zb(1,"div",25),u.Zb(2,"div",26),u.Zb(3,"mat-form-field"),u.Ub(4,"input",27),u.mc(5,"translate"),u.Yb(),u.Yb(),u.Zb(6,"div",26),u.Ub(7,"mat-paginator",28,29),u.Yb(),u.Yb(),u.Zb(9,"mat-table",30,31),u.Xb(11,32),u.Qc(12,md,3,3,"mat-header-cell",33),u.Qc(13,fd,3,1,"mat-cell",34),u.Wb(),u.Xb(14,35),u.Qc(15,pd,3,3,"mat-header-cell",33),u.Qc(16,gd,3,2,"mat-cell",34),u.Wb(),u.Xb(17,36),u.Qc(18,hd,3,5,"mat-header-cell",37),u.Qc(19,vd,3,3,"mat-cell",38),u.Wb(),u.Xb(20,39),u.Qc(21,yd,1,0,"mat-header-cell",40),u.Qc(22,Cd,4,3,"mat-cell",41),u.Wb(),u.Qc(23,Ed,1,0,"mat-header-row",42),u.Qc(24,Sd,2,4,"mat-row",43),u.Yb(),u.Zb(25,"div",44),u.Sc(26),u.mc(27,"translate"),u.Yb(),u.Yb()),2&t){var n=u.lc();u.Eb(4),u.tc("placeholder",u.nc(5,10,"lang.filterBy")),u.sc("formControl",n.adminService.getFilterField()),u.Eb(3),u.sc("length",100)("hidePageSize",!0)("pageSize",10),u.Eb(2),u.sc("dataSource",n.adminService.getDataSource()),u.Eb(14),u.sc("matHeaderRowDef",n.displayedColumns),u.Eb(1),u.sc("matRowDefColumns",n.displayedColumns),u.Eb(2),u.Vc(" ",n.priorities.length," ",u.nc(27,12,"lang.priorities"),"")}}function xd(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-list-item",53),u.hc("onDropSuccess",(function(){return u.Hc(n),u.lc().updatePrioritiesOrder()})),u.mc(1,"translate"),u.Ub(2,"mat-icon",54),u.Zb(3,"p",19),u.Sc(4),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit,i=e.index;u.tc("title",u.nc(1,4,"lang.move")),u.sc("sortableIndex",i),u.Eb(4),u.Vc("",i+1," - ",a.label,"")}}var Yd,Zd=function(){return["boxers-zone"]},_d=((Yd=function(){function t(e,n,a,i,r,c,o,s){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.headerService=i,this.appService=r,this.functions=c,this.adminService=o,this.viewContainerRef=s,this.loading=!1,this.priorities=[],this.prioritiesOrder=[],this.displayedColumns=["id","label","delays","actions"],this.filterColumns=["id","label","delays"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.prioritiesAlt")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/priorities").subscribe((function(e){t.priorities=e.priorities,t.loading=!1,t.http.get("../rest/sortedPriorities").subscribe((function(e){t.prioritiesOrder=e.priorities}),(function(e){t.notify.handleErrors(e)})),setTimeout((function(){t.adminService.setDataSource("admin_priorities",t.priorities,t.sort,t.paginator,t.filterColumns)}),0)}),(function(e){t.notify.handleErrors(e)}))}},{key:"deletePriority",value:function(t){var e=this;confirm(this.translate.instant("lang.deleteMsg"))&&this.http.delete("../rest/priorities/"+t).subscribe((function(t){e.priorities=t.priorities,e.adminService.setDataSource("admin_priorities",e.priorities,e.sort,e.paginator,e.filterColumns),e.notify.success(e.translate.instant("lang.priorityDeleted"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"updatePrioritiesOrder",value:function(){var t=this;this.http.put("../rest/sortedPriorities",this.prioritiesOrder).subscribe((function(e){t.prioritiesOrder=e.priorities,t.notify.success(t.translate.instant("lang.modificationSaved"))}),(function(e){t.notify.error(e.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||Yd)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a),u.Tb(C.a),u.Tb(It),u.Tb(u.R))},Yd.\u0275cmp=u.Nb({type:Yd,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(ld,!0),u.Oc(dd,!0),u.ad(V.a,!0),u.ad(N.a,!0)),2&t&&(u.Cc(n=u.ic())&&(e.sidenavRight=n.first),u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.paginator=n.first),u.Cc(n=u.ic())&&(e.sort=n.first))},decls:23,vars:18,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",3,"mode","fixedInViewport","opened"],["snav2",""],[2,"font-size","15px","padding","5px"],["dnd-sortable-container","",3,"dropZones","sortableData"],["disableRipple","true","dnd-sortable","",3,"title","sortableIndex","onDropSuccess",4,"ngFor","ngForOf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/priorities/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],["mat-list-item","",3,"click"],["color","primary","mat-list-icon","",1,"fa","fa-list-ol"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","id"],["mat-sort-header","","style","flex:2;",4,"matHeaderCellDef"],["style","flex:2;",4,"matCellDef"],["matColumnDef","label"],["matColumnDef","delays"],["mat-sort-header","","style","flex:2;",3,"hide-for-mobile",4,"matHeaderCellDef"],["style","flex:2;",3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],[3,"click"],["type","color","disabled","",2,"background","none","border","none","width","45px",3,"value"],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"],["disableRipple","true","dnd-sortable","",3,"title","sortableIndex","onDropSuccess"],["color","primary","mat-list-icon","",1,"fa","fa-inbox"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,bd,14,9,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,ud,2,0,"div",9),u.Qc(14,Md,28,14,"mat-card",10),u.Yb(),u.Yb(),u.Yb(),u.Zb(15,"mat-sidenav",11,12),u.Zb(17,"p",13),u.Sc(18),u.mc(19,"translate"),u.Yb(),u.Zb(20,"mat-list"),u.Zb(21,"span",14),u.Qc(22,xd,5,6,"mat-list-item",15),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading),u.Eb(1),u.sc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",(e.appService.getViewMode(),!1)),u.Eb(3),u.Uc(" ",u.nc(19,15,"lang.prioritiesHelpDesc")," "),u.Eb(3),u.sc("dropZones",u.yc(17,Zd))("sortableData",e.prioritiesOrder),u.Eb(1),u.sc("ngForOf",e.prioritiesOrder))},directives:[S.e,S.f,M.a,Y.a,Z.t,S.d,Dt.a,$e.f,Z.s,Dt.h,Dt.g,Dt.d,r.f,Ut.a,Dt.c,I.k,O.c,T.a,k.c,w.b,o.c,o.t,o.i,V.a,B.n,N.a,B.c,B.i,B.b,B.k,B.m,B.h,N.b,B.a,D.b,Ft.b,B.j,B.l,r.d,$e.e],pipes:[m.d],encapsulation:2}),Yd);function kd(t,e){1&t&&(u.Zb(0,"div",10),u.Ub(1,"mat-spinner",11),u.Yb())}function wd(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-card",12),u.Zb(1,"form",13,14),u.hc("ngSubmit",(function(){return u.Hc(n),u.lc().onSubmit()})),u.Zb(3,"div",15),u.Zb(4,"div",16),u.Zb(5,"div",17),u.Zb(6,"mat-form-field"),u.Zb(7,"input",18),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().priority.color=t})),u.mc(8,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(9,"div",19),u.Zb(10,"mat-form-field"),u.Zb(11,"input",20),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().priority.label=t})),u.mc(12,"translate"),u.mc(13,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(14,"div",15),u.Zb(15,"div",21),u.Zb(16,"mat-form-field"),u.Zb(17,"input",22),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().priority.delays=t})),u.mc(18,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(19,"div",15),u.Zb(20,"div",23),u.Zb(21,"button",24),u.Sc(22),u.mc(23,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.Dc(2),i=u.lc();u.Eb(7),u.tc("matTooltip",u.nc(8,9,"lang.chooseColor")),u.sc("ngModel",i.priority.color),u.Eb(4),u.tc("title",u.nc(12,11,"lang.label")),u.tc("placeholder",u.nc(13,13,"lang.label")),u.sc("ngModel",i.priority.label),u.Eb(6),u.tc("placeholder",u.nc(18,15,"lang.processDelayDay")),u.sc("ngModel",i.priority.delays),u.Eb(4),u.sc("disabled",!a.form.valid),u.Eb(1),u.Tc(u.nc(23,17,"lang.save"))}}var Od,Td=((Od=function(){function t(e,n,a,i,r,c,o){_classCallCheck(this,t),this.translate=e,this.http=n,this.route=a,this.router=i,this.notify=r,this.headerService=c,this.appService=o,this.loading=!1,this.priority={color:"#135f7f",delays:"0"}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.route.params.subscribe((function(e){void 0===e.id?(t.headerService.setHeader(t.translate.instant("lang.priorityCreation")),t.creationMode=!0,t.loading=!1):(t.creationMode=!1,t.id=e.id,t.http.get("../rest/priorities/"+t.id).subscribe((function(e){t.priority=e.priority,t.headerService.setHeader(t.translate.instant("lang.priorityModification"),t.priority.label),t.loading=!1}),(function(e){t.notify.handleErrors(e)})))}))}},{key:"onSubmit",value:function(){var t=this;this.creationMode?this.http.post("../rest/priorities",this.priority).subscribe((function(){t.notify.success(t.translate.instant("lang.priorityAdded")),t.router.navigate(["/administration/priorities"])}),(function(e){t.notify.error(e.error.errors)})):this.http.put("../rest/priorities/"+this.id,this.priority).subscribe((function(){t.notify.success(t.translate.instant("lang.priorityUpdated")),t.router.navigate(["/administration/priorities"])}),(function(e){t.notify.error(e.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||Od)(u.Tb(m.e),u.Tb(f.b),u.Tb(r.a),u.Tb(r.c),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a))},Od.\u0275cmp=u.Nb({type:Od,selectors:[["ng-component"]],decls:13,vars:8,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"form-horizontal",3,"ngSubmit"],["priorityForm","ngForm"],[1,"form-group"],[1,"row",2,"margin","0px"],[1,"col-md-1","col-xs-2"],["matInput","","type","color","name","color","required","",3,"matTooltip","ngModel","ngModelChange"],[1,"col-md-11","col-xs-10"],["matInput","","type","text","name","label","maxlength","128","required","",3,"title","placeholder","ngModel","ngModelChange"],[1,"col-md-4"],["matInput","","type","number","name","delays","required","","pattern","^\\d+$",3,"placeholder","ngModel","ngModelChange"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary",3,"disabled"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Zb(1,"mat-sidenav-content"),u.Zb(2,"div",1),u.Zb(3,"div",2),u.Zb(4,"div",3),u.Ub(5,"header-left"),u.Yb(),u.Zb(6,"div",4),u.Ub(7,"header-right"),u.Yb(),u.Yb(),u.Ub(8,"div",5),u.Yb(),u.Zb(9,"div",6),u.Zb(10,"div",7),u.Qc(11,kd,2,0,"div",8),u.Qc(12,wd,24,19,"mat-card",9),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(3),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading))},directives:[S.e,S.f,M.a,Y.a,Z.t,O.c,T.a,o.J,o.u,o.v,k.c,w.b,o.c,o.E,Ft.b,o.t,o.w,o.o,o.z,o.A,D.b],pipes:[m.d],encapsulation:2}),Od),Id=["snav2"],Dd=["adminMenuTemplate"];function Ud(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-nav-list"),u.Zb(1,"h3",14),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"a",35),u.Ub(5,"mat-icon",36),u.Zb(6,"p",37),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Yb(),u.Zb(9,"a",38),u.hc("click",(function(){u.Hc(n);var t=u.lc(),e=u.Dc(16);return t.loadCron(),e.toggle()}))("next",(function(){u.Hc(n);var t=u.lc();return u.Dc(16).open(),t.paramCron()})),u.Ub(10,"mat-icon",39),u.Zb(11,"p",37),u.Sc(12),u.mc(13,"translate"),u.Yb(),u.Yb(),u.Yb()}2&t&&(u.Eb(2),u.Tc(u.nc(3,3,"lang.actions")),u.Eb(5),u.Uc(" ",u.nc(8,5,"lang.add")," "),u.Eb(5),u.Uc(" ",u.nc(13,7,"lang.toSchedule")," "))}function Pd(t,e){1&t&&(u.Zb(0,"div",40),u.Ub(1,"mat-spinner",41),u.Yb())}function Fd(t,e){if(1&t&&(u.Zb(0,"mat-header-cell",64),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=u.lc(2);u.Jb("hide-for-mobile",n.appService.getViewMode()),u.Eb(1),u.Tc(u.nc(2,3,"lang.id"))}}function Ld(t,e){if(1&t&&(u.Zb(0,"mat-cell",65),u.Sc(1),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.Jb("hide-for-mobile",a.appService.getViewMode()),u.Eb(1),u.Uc(" ",n.notification_id," ")}}function jd(t,e){1&t&&(u.Zb(0,"mat-header-cell",66),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc("",u.nc(2,1,"lang.description")," "))}function Rd(t,e){if(1&t&&(u.Zb(0,"mat-cell",67),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.description," ")}}function Qd(t,e){if(1&t&&(u.Zb(0,"mat-header-cell",64),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=u.lc(2);u.Jb("hide-for-mobile",n.appService.getViewMode()),u.Eb(1),u.Tc(u.nc(2,3,"lang.status"))}}function Ad(t,e){1&t&&(u.Zb(0,"span",71),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.active")))}function Hd(t,e){1&t&&(u.Zb(0,"span",72),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.suspended")))}function zd(t,e){if(1&t&&(u.Zb(0,"mat-cell",68),u.mc(1,"translate"),u.Qc(2,Ad,3,3,"span",69),u.Qc(3,Hd,3,3,"span",70),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.Jb("hide-for-mobile",a.appService.getViewMode()),u.tc("matTooltip",u.nc(1,5,"lang.view")),u.Eb(2),u.sc("ngIf","Y"==n.is_enabled),u.Eb(1),u.sc("ngIf","N"==n.is_enabled)}}function $d(t,e){1&t&&u.Ub(0,"mat-header-cell",65)}function Vd(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-cell",73),u.Zb(1,"button",74),u.hc("click",(function(t){u.Hc(n);var a=e.$implicit,i=u.lc(2);return t.stopPropagation(),i.deleteNotification(a)})),u.mc(2,"translate"),u.Ub(3,"mat-icon",75),u.Yb(),u.Yb()}2&t&&(u.Eb(1),u.tc("matTooltip",u.nc(2,1,"lang.delete")))}function Nd(t,e){1&t&&u.Ub(0,"mat-header-row")}function Jd(t,e){if(1&t&&(u.Ub(0,"mat-row",76),u.mc(1,"translate")),2&t){var n=e.$implicit;u.uc("routerLink","/administration/notifications/",n.notification_sid,""),u.tc("matTooltip",u.nc(1,3,"lang.view")),u.sc("joyrideStep",n.notification_id+"_Tour")}}function Gd(t,e){if(1&t&&(u.Zb(0,"mat-card",42),u.Zb(1,"div",43),u.Zb(2,"div",44),u.Zb(3,"mat-form-field"),u.Ub(4,"input",45),u.mc(5,"translate"),u.Yb(),u.Yb(),u.Zb(6,"div",44),u.Ub(7,"mat-paginator",46,47),u.Yb(),u.Yb(),u.Zb(9,"mat-table",48,49),u.Xb(11,50),u.Qc(12,Fd,3,5,"mat-header-cell",51),u.Qc(13,Ld,2,3,"mat-cell",52),u.Wb(),u.Xb(14,53),u.Qc(15,jd,3,3,"mat-header-cell",54),u.Qc(16,Rd,2,1,"mat-cell",55),u.Wb(),u.Xb(17,56),u.Qc(18,Qd,3,5,"mat-header-cell",51),u.Qc(19,zd,4,7,"mat-cell",57),u.Wb(),u.Xb(20,58),u.Qc(21,$d,1,0,"mat-header-cell",59),u.Qc(22,Vd,4,3,"mat-cell",60),u.Wb(),u.Qc(23,Nd,1,0,"mat-header-row",61),u.Qc(24,Jd,2,5,"mat-row",62),u.Yb(),u.Zb(25,"div",63),u.Sc(26),u.mc(27,"translate"),u.Yb(),u.Yb()),2&t){var n=u.lc();u.Eb(4),u.tc("placeholder",u.nc(5,10,"lang.filterBy")),u.sc("formControl",n.adminService.getFilterField()),u.Eb(3),u.sc("length",100)("hidePageSize",!0)("pageSize",10),u.Eb(2),u.sc("dataSource",n.adminService.getDataSource()),u.Eb(14),u.sc("matHeaderRowDef",n.displayedColumns),u.Eb(1),u.sc("matRowDefColumns",n.displayedColumns),u.Eb(2),u.Vc(" ",n.notifications.length," ",u.nc(27,12,"lang.notifications"),"")}}function Bd(t,e){if(1&t&&(u.Zb(0,"mat-option",77),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n.value),u.Eb(1),u.Uc(" ",n.label," ")}}function Wd(t,e){if(1&t&&(u.Zb(0,"mat-option",77),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n.value),u.Eb(1),u.Uc(" ",n.label," ")}}function qd(t,e){if(1&t&&(u.Zb(0,"mat-option",77),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n.value),u.Eb(1),u.Uc(" ",n.label," ")}}function Xd(t,e){if(1&t&&(u.Zb(0,"mat-option",77),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n.value),u.Eb(1),u.Uc(" ",n.label," ")}}function Kd(t,e){if(1&t&&(u.Zb(0,"mat-option",77),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n.value),u.Eb(1),u.Uc(" ",n.label," ")}}function tb(t,e){if(1&t&&(u.Zb(0,"mat-option",77),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n.path),u.Eb(1),u.Uc(" ",n.description," ")}}function eb(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-chip",79),u.hc("removed",(function(){u.Hc(n);var t=u.lc().index;return u.lc().deleteCron(t)})),u.Sc(1),u.Ub(2,"span",80),u.Zb(3,"b"),u.Sc(4),u.Yb(),u.Ub(5,"mat-icon",81),u.mc(6,"translate"),u.Yb()}if(2&t){var a=u.lc().$implicit;u.Eb(1),u.Uc(" ",a.description," "),u.Eb(3),u.Yc("",a.m,"\xa0\xa0",a.h,"\xa0\xa0",a.dom,"\xa0\xa0",a.mon,"\xa0\xa0",a.dow,""),u.Eb(1),u.tc("matTooltip",u.nc(6,7,"lang.delete"))}}function nb(t,e){if(1&t&&(u.Zb(0,"span"),u.Qc(1,eb,7,9,"mat-chip",78),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.sc("ngIf","normal"==n.state)}}var ab,ib=((ab=function(){function t(e,n,a,i,r,c,o,s){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.headerService=i,this.appService=r,this.functions=c,this.adminService=o,this.viewContainerRef=s,this.notifications=[],this.loading=!1,this.months=[],this.dom=[],this.dow=[],this.newCron={m:"",h:"",dom:"",mon:"",cmd:"",state:"normal"},this.displayedColumns=["notification_id","description","is_enabled","notifications"],this.filterColumns=["notification_id","description"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.notifications")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/notifications").subscribe((function(e){t.notifications=e.notifications,t.loading=!1,setTimeout((function(){t.adminService.setDataSource("admin_notif",t.notifications,t.sort,t.paginator,t.filterColumns)}),0)}),(function(e){t.notify.error(e.error.errors)}))}},{key:"deleteNotification",value:function(t){var e=this;confirm(this.translate.instant("lang.deleteMsg"))&&this.http.delete("../rest/notifications/"+t.notification_sid).subscribe((function(t){e.notifications=t.notifications,setTimeout((function(){e.adminService.setDataSource("admin_notif",e.notifications,e.sort,e.paginator,e.filterColumns)}),0),e.sidenavRight.close(),e.notify.success(e.translate.instant("lang.notificationDeleted"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"loadCron",value:function(){var t=this;return new Promise((function(e){t.hours=[{label:t.translate.instant("lang.eachHour"),value:"*"}],t.minutes=[{label:t.translate.instant("lang.eachMinute"),value:"*"}],t.months=[{label:t.translate.instant("lang.eachMonth"),value:"*"},{label:t.translate.instant("lang.january"),value:"1"},{label:t.translate.instant("lang.february"),value:"2"},{label:t.translate.instant("lang.march"),value:"3"},{label:t.translate.instant("lang.april"),value:"4"},{label:t.translate.instant("lang.may"),value:"5"},{label:t.translate.instant("lang.june"),value:"6"},{label:t.translate.instant("lang.july"),value:"7"},{label:t.translate.instant("lang.august"),value:"8"},{label:t.translate.instant("lang.september"),value:"9"},{label:t.translate.instant("lang.october"),value:"10"},{label:t.translate.instant("lang.november"),value:"11"},{label:t.translate.instant("lang.december"),value:"12"}],t.dom=[{label:t.translate.instant("lang.notUsed"),value:"*"}],t.dow=[{label:t.translate.instant("lang.eachDay"),value:"*"},{label:t.translate.instant("lang.monday"),value:"1"},{label:t.translate.instant("lang.tuesday"),value:"2"},{label:t.translate.instant("lang.wednesday"),value:"3"},{label:t.translate.instant("lang.thursday"),value:"4"},{label:t.translate.instant("lang.friday"),value:"5"},{label:t.translate.instant("lang.saturday"),value:"6"},{label:t.translate.instant("lang.sunday"),value:"7"}],t.newCron={m:"",h:"",dom:"",mon:"",cmd:"",state:"normal"};for(var n=0;n<=23;n++)t.hours.push({label:n,value:String(n)});for(var a=0;a<=59;a++)t.minutes.push({label:a,value:String(a)});for(var i=1;i<=31;i++)t.dom.push({label:i,value:String(i)});t.http.get("../rest/notifications/schedule").pipe(Object(wt.tap)((function(e){t.crontab=e.crontab,t.authorizedNotification=e.authorizedNotification})),Object(Ct.a)((function(){return e(!0)})),Object(G.catchError)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}))}},{key:"saveCron",value:function(){var t=this,e=this.newCron.cmd.split("/");this.newCron.description=e[e.length-1],this.crontab.push(this.newCron),this.http.post("../rest/notifications/schedule",this.crontab).subscribe((function(e){t.newCron={m:"",h:"",dom:"",mon:"",cmd:"",description:"",state:"normal"},t.notify.success(t.translate.instant("lang.notificationScheduleUpdated"))}),(function(e){t.crontab.pop(),t.notify.error(e.error.errors)}))}},{key:"deleteCron",value:function(t){var e=this;this.crontab[t].state="deleted",this.http.post("../rest/notifications/schedule",this.crontab).subscribe((function(n){e.crontab.splice(t,1),e.notify.success(e.translate.instant("lang.notificationScheduleUpdated"))}),(function(t){e.notify.error(t.error.errors)}))}},{key:"onNext",value:function(){return console.log("next"),this.sidenavRight.open(),!1}},{key:"paramCron",value:function(){return Object(yt.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadCron();case 2:e=this.authorizedNotification.filter((function(t){return t.path.indexOf("_BASKETS.sh")>-1}))[0],this.newCron={m:"0",h:"8",dom:"*",dow:"*",mon:"*",cmd:e.path,description:e.description,state:"normal"};case 4:case"end":return t.stop()}}),t,this)})))}}]),t}()).\u0275fac=function(t){return new(t||ab)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a),u.Tb(C.a),u.Tb(It),u.Tb(u.R))},ab.\u0275cmp=u.Nb({type:ab,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(Id,!0),u.Oc(Dd,!0),u.ad(V.a,!0),u.ad(N.a,!0)),2&t&&(u.Cc(n=u.ic())&&(e.sidenavRight=n.first),u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.paginator=n.first),u.Cc(n=u.ic())&&(e.sort=n.first))},decls:76,vars:73,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",3,"mode","fixedInViewport","opened","next"],["snav2",""],["joyrideStep","notifTour3",3,"next"],["mat-subheader",""],[1,"form-horizontal",2,"overflow","hidden"],["notifForm","ngForm"],[1,"form-group",2,"padding-left","15px","padding-right","15px"],[1,"col-sm-4"],["name","hour","id","hour","required","",3,"title","placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","minute","id","minute","required","",3,"title","placeholder","ngModel","ngModelChange"],["name","day","id","day","required","",3,"title","placeholder","ngModel","ngModelChange"],[1,"col-sm-6"],["name","month","id","month","required","",3,"title","placeholder","ngModel","ngModelChange"],["name","dayM","id","dayM","required","",3,"title","placeholder","ngModel","ngModelChange"],[1,"col-sm-12"],["name","script","id","script","required","",3,"title","placeholder","ngModel","ngModelChange"],[1,"col-sm-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary",3,"disabled","click"],["role","alert",1,"alert","alert-info",2,"margin","15px"],["joyrideStep","notifTour4"],[1,"mat-chip-list-stacked"],["chipList",""],[4,"ngFor","ngForOf"],["mat-list-item","","routerLink","/administration/notifications/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],["mat-list-item","","joyrideStep","notifTour",3,"click","next"],["color","primary","mat-list-icon","",1,"fa","fa-clock"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","notification_id"],["mat-sort-header","","style","flex:1;",3,"hide-for-mobile",4,"matHeaderCellDef"],["style","flex:1;",3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","description"],["mat-sort-header","","style","flex:2;",4,"matHeaderCellDef"],["style","flex:2;",4,"matCellDef"],["matColumnDef","is_enabled"],["style","flex:1;",3,"matTooltip","hide-for-mobile",4,"matCellDef"],["matColumnDef","notifications"],["style","flex:1;",4,"matHeaderCellDef"],["style","justify-content: flex-end;flex:1;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip","joyrideStep",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header","",2,"flex","1"],[2,"flex","1"],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],[2,"flex","1",3,"matTooltip"],["color","primary","class","label",4,"ngIf"],["color","warn","class","label",4,"ngIf"],["color","primary",1,"label"],["color","warn",1,"label"],[2,"justify-content","flex-end","flex","1"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip","joyrideStep"],[3,"value"],["color","primary","style","margin:5px;border-radius:0px;display:flex;","selectable","false","removable","true",3,"removed",4,"ngIf"],["color","primary","selectable","false","removable","true",2,"margin","5px","border-radius","0px","display","flex",3,"removed"],[2,"flex","1 1 auto"],["matChipRemove","","color","warn",1,"fa","fa-times",3,"matTooltip"]],template:function(t,e){if(1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,Ud,14,9,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,Pd,2,0,"div",9),u.Qc(14,Gd,28,14,"mat-card",10),u.Yb(),u.Yb(),u.Yb(),u.Zb(15,"mat-sidenav",11,12),u.hc("next",(function(){return e.paramCron()})),u.Zb(17,"mat-list",13),u.hc("next",(function(){return e.saveCron()})),u.Zb(18,"h3",14),u.Sc(19),u.mc(20,"translate"),u.Yb(),u.Zb(21,"form",15,16),u.Zb(23,"div",17),u.Zb(24,"div",18),u.Zb(25,"mat-form-field"),u.Zb(26,"mat-select",19),u.hc("ngModelChange",(function(t){return e.newCron.h=t})),u.mc(27,"translate"),u.mc(28,"translate"),u.Qc(29,Bd,2,2,"mat-option",20),u.Yb(),u.Yb(),u.Yb(),u.Zb(30,"div",18),u.Zb(31,"mat-form-field"),u.Zb(32,"mat-select",21),u.hc("ngModelChange",(function(t){return e.newCron.m=t})),u.mc(33,"translate"),u.mc(34,"translate"),u.Qc(35,Wd,2,2,"mat-option",20),u.Yb(),u.Yb(),u.Yb(),u.Zb(36,"div",18),u.Zb(37,"mat-form-field"),u.Zb(38,"mat-select",22),u.hc("ngModelChange",(function(t){return e.newCron.dow=t})),u.mc(39,"translate"),u.mc(40,"translate"),u.Qc(41,qd,2,2,"mat-option",20),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(42,"div",17),u.Zb(43,"div",23),u.Zb(44,"mat-form-field"),u.Zb(45,"mat-select",24),u.hc("ngModelChange",(function(t){return e.newCron.mon=t})),u.mc(46,"translate"),u.mc(47,"translate"),u.Qc(48,Xd,2,2,"mat-option",20),u.Yb(),u.Yb(),u.Yb(),u.Zb(49,"div",23),u.Zb(50,"mat-form-field"),u.Zb(51,"mat-select",25),u.hc("ngModelChange",(function(t){return e.newCron.dom=t})),u.mc(52,"translate"),u.mc(53,"translate"),u.Qc(54,Kd,2,2,"mat-option",20),u.Yb(),u.Yb(),u.Yb(),u.Zb(55,"div",26),u.Zb(56,"mat-form-field"),u.Zb(57,"mat-select",27),u.hc("ngModelChange",(function(t){return e.newCron.cmd=t})),u.mc(58,"translate"),u.mc(59,"translate"),u.Qc(60,tb,2,2,"mat-option",20),u.Yb(),u.Yb(),u.Yb(),u.Zb(61,"div",28),u.Zb(62,"button",29),u.hc("click",(function(){return e.saveCron()})),u.Sc(63),u.mc(64,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Ub(65,"mat-divider"),u.Zb(66,"div",30),u.Sc(67),u.mc(68,"translate"),u.Yb(),u.Zb(69,"mat-list",31),u.Zb(70,"h3",14),u.Sc(71),u.mc(72,"translate"),u.Yb(),u.Zb(73,"mat-chip-list",32,33),u.Qc(75,nb,2,1,"span",34),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t){var n=u.Dc(22);u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading),u.Eb(1),u.sc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",(e.appService.getViewMode(),!1)),u.Eb(4),u.Tc(u.nc(20,41,"lang.notificationSchedule")),u.Eb(7),u.tc("title",u.nc(27,43,"lang.hour")),u.tc("placeholder",u.nc(28,45,"lang.hour")),u.sc("ngModel",e.newCron.h),u.Eb(3),u.sc("ngForOf",e.hours),u.Eb(3),u.tc("title",u.nc(33,47,"lang.minute")),u.tc("placeholder",u.nc(34,49,"lang.minute")),u.sc("ngModel",e.newCron.m),u.Eb(3),u.sc("ngForOf",e.minutes),u.Eb(3),u.tc("title",u.nc(39,51,"lang.day")),u.tc("placeholder",u.nc(40,53,"lang.day")),u.sc("ngModel",e.newCron.dow),u.Eb(3),u.sc("ngForOf",e.dow),u.Eb(4),u.tc("title",u.nc(46,55,"lang.month")),u.tc("placeholder",u.nc(47,57,"lang.month")),u.sc("ngModel",e.newCron.mon),u.Eb(3),u.sc("ngForOf",e.months),u.Eb(3),u.tc("title",u.nc(52,59,"lang.dayOfMonth")),u.tc("placeholder",u.nc(53,61,"lang.dayOfMonth")),u.sc("ngModel",e.newCron.dom),u.Eb(3),u.sc("ngForOf",e.dom),u.Eb(3),u.tc("title",u.nc(58,63,"lang.script")),u.tc("placeholder",u.nc(59,65,"lang.script")),u.sc("ngModel",e.newCron.cmd),u.Eb(3),u.sc("ngForOf",e.authorizedNotification),u.Eb(2),u.sc("disabled",!n.form.valid),u.Eb(1),u.Tc(u.nc(64,67,"lang.save")),u.Eb(4),u.Uc(" ",u.nc(68,69,"lang.NotificationScheduleInfo")," "),u.Eb(4),u.Tc(u.nc(72,71,"lang.activeCron")),u.Eb(4),u.sc("ngForOf",e.crontab)}},directives:[S.e,S.f,M.a,Y.a,Z.t,S.d,Dt.a,x.a,Dt.g,o.J,o.u,o.v,k.c,it.a,o.E,o.t,o.w,Z.s,D.b,_.a,er.d,Dt.h,Dt.d,r.f,Ut.a,Dt.c,I.k,O.c,T.a,w.b,o.c,o.i,V.a,B.n,N.a,B.c,B.i,B.b,B.k,B.m,B.h,N.b,B.a,Ft.b,B.j,B.l,r.d,I.o,er.a,er.e],pipes:[m.d],encapsulation:2}),ab),rb=["adminMenuTemplate"];function cb(t,e){1&t&&(u.Zb(0,"h3",14),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.actions")))}function ob(t,e){if(1&t){var n=u.ac();u.Zb(0,"a",15),u.hc("click",(function(){return u.Hc(n),u.lc(2).createScript()}))("next",(function(){return u.Hc(n),u.lc(2).createScript()})),u.Ub(1,"mat-icon",16),u.Zb(2,"p",17),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Yb()}2&t&&(u.Eb(3),u.Uc(" ",u.nc(4,1,"lang.createScriptNotification")," "))}function sb(t,e){if(1&t){var n=u.ac();u.Zb(0,"a",18),u.hc("click",(function(){return u.Hc(n),u.lc(2).toggleNotif()})),u.Ub(1,"mat-icon",19),u.Zb(2,"p",17),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Yb()}2&t&&(u.Eb(3),u.Uc(" ",u.nc(4,1,"lang.activateNotification")," "))}function lb(t,e){if(1&t){var n=u.ac();u.Zb(0,"a",18),u.hc("click",(function(){return u.Hc(n),u.lc(2).toggleNotif()})),u.Ub(1,"mat-icon",20),u.Zb(2,"p",17),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Yb()}2&t&&(u.Eb(3),u.Uc(" ",u.nc(4,1,"lang.suspendNotification")," "))}function db(t,e){if(1&t&&(u.Zb(0,"mat-nav-list"),u.Qc(1,cb,3,3,"h3",11),u.Qc(2,ob,5,3,"a",12),u.Qc(3,sb,5,3,"a",13),u.Qc(4,lb,5,3,"a",13),u.Yb()),2&t){var n=u.lc();u.Eb(1),u.sc("ngIf",!n.creationMode),u.Eb(1),u.sc("ngIf",!n.creationMode&&!n.loading&&!n.notification.scriptcreated),u.Eb(1),u.sc("ngIf",!n.creationMode&&!n.loading&&"N"==n.notification.is_enabled),u.Eb(1),u.sc("ngIf",!n.creationMode&&!n.loading&&"Y"==n.notification.is_enabled)}}function bb(t,e){1&t&&(u.Zb(0,"div",21),u.Ub(1,"mat-spinner",22),u.Yb())}function ub(t,e){1&t&&(u.Zb(0,"div",46),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc(" ",u.nc(2,1,"lang.suspended"),""))}function mb(t,e){if(1&t&&(u.Zb(0,"mat-option",48),u.Ub(1,"mat-icon",49),u.Sc(2),u.Yb()),2&t){var n=u.lc().$implicit;u.sc("value",n.id),u.Eb(2),u.Uc(" ",n.label_action," ")}}function fb(t,e){if(1&t&&(u.Xb(0),u.Qc(1,mb,3,2,"mat-option",47),u.Wb()),2&t){var n=e.$implicit,a=u.lc(2);u.Eb(1),u.sc("ngIf",!a.isNumber(n.id))}}function pb(t,e){if(1&t&&(u.Zb(0,"mat-option",48),u.Ub(1,"mat-icon",50),u.Sc(2),u.Yb()),2&t){var n=u.lc().$implicit;u.sc("value",n.id),u.Eb(2),u.Uc(" ",n.label_action," ")}}function gb(t,e){if(1&t&&(u.Xb(0),u.Qc(1,pb,3,2,"mat-option",47),u.Wb()),2&t){var n=e.$implicit,a=u.lc(2);u.Eb(1),u.sc("ngIf",a.isNumber(n.id))}}function hb(t,e){if(1&t&&(u.Zb(0,"mat-option",48),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n.template_id),u.Eb(1),u.Uc(" ",n.template_label," ")}}function vb(t,e){if(1&t&&(u.Zb(0,"mat-option",48),u.Sc(1),u.Yb()),2&t){var n=u.lc().$implicit;u.sc("value",n.id),u.Eb(1),u.Tc(n.label)}}function yb(t,e){if(1&t&&(u.Xb(0),u.Qc(1,vb,2,2,"mat-option",47),u.Wb()),2&t){var n=e.$implicit;u.Eb(1),u.sc("ngIf","dest_user"==n.id)}}function Cb(t,e){if(1&t&&(u.Zb(0,"mat-optgroup",32),u.mc(1,"translate"),u.Qc(2,yb,2,1,"ng-container",33),u.Yb()),2&t){var n=u.lc(2);u.uc("label","",u.nc(1,2,"lang.memberUserDest")," :"),u.Eb(2),u.sc("ngForOf",n.notification.data.diffusionType)}}function Eb(t,e){if(1&t&&(u.Zb(0,"mat-option",48),u.Sc(1),u.Yb()),2&t){var n=u.lc().$implicit;u.sc("value",n.id),u.Eb(1),u.Tc(n.label)}}function Sb(t,e){if(1&t&&(u.Xb(0),u.Qc(1,Eb,2,2,"mat-option",47),u.Wb()),2&t){var n=e.$implicit;u.Eb(1),u.sc("ngIf","copy_list"==n.id)}}function Mb(t,e){if(1&t&&(u.Zb(0,"mat-optgroup",32),u.mc(1,"translate"),u.Qc(2,Sb,2,1,"ng-container",33),u.Yb()),2&t){var n=u.lc(2);u.uc("label","",u.nc(1,2,"lang.memberUsersCopy")," :"),u.Eb(2),u.sc("ngForOf",n.notification.data.diffusionType)}}function xb(t,e){if(1&t&&(u.Zb(0,"mat-option",48),u.Sc(1),u.Yb()),2&t){var n=u.lc().$implicit;u.sc("value",n.id),u.Eb(1),u.Tc(n.label)}}function Yb(t,e){if(1&t&&(u.Xb(0),u.Qc(1,xb,2,2,"mat-option",47),u.Wb()),2&t){var n=e.$implicit,a=u.lc(2);u.Eb(1),u.sc("ngIf","group"==n.id||"entity"==n.id&&"baskets"!=a.notification.event_id||"user"==n.id&&"baskets"!=a.notification.event_id)}}function Zb(t,e){if(1&t&&(u.Zb(0,"mat-option",48),u.Sc(1),u.Yb()),2&t){var n=u.lc().$implicit;u.sc("value",n.id),u.Eb(1),u.Tc(n.label)}}function _b(t,e){if(1&t&&(u.Xb(0),u.Qc(1,Zb,2,2,"mat-option",47),u.Wb()),2&t){var n=e.$implicit;u.Eb(1),u.sc("ngIf","group"!=n.id&&"entity"!=n.id&&"user"!=n.id&&"copy_list"!=n.id&&"group"!=n.id&&"dest_user"!=n.id)}}function kb(t,e){if(1&t&&(u.Zb(0,"mat-optgroup",32),u.mc(1,"translate"),u.Qc(2,_b,2,1,"ng-container",33),u.Yb()),2&t){var n=u.lc(2);u.uc("label","",u.nc(1,2,"lang.others")," :"),u.Eb(2),u.sc("ngForOf",n.notification.data.diffusionType)}}function wb(t,e){if(1&t&&(u.Zb(0,"mat-option",48),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n.group_id),u.Eb(1),u.Uc(" ",n.group_desc," ")}}function Ob(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-form-field"),u.Zb(1,"mat-select",51),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).notification.diffusion_properties=t})),u.mc(2,"translate"),u.mc(3,"translate"),u.Qc(4,wb,2,2,"mat-option",36),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(1),u.tc("title",u.nc(2,4,"lang.memberDiffTypeUsers")),u.tc("placeholder",u.nc(3,6,"lang.memberDiffTypeUsers")),u.sc("ngModel",a.notification.diffusion_properties),u.Eb(3),u.sc("ngForOf",a.notification.data.groups)}}function Tb(t,e){if(1&t&&(u.Zb(0,"mat-option",48),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n.id),u.Eb(1),u.Uc(" ",n.label," ")}}function Ib(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-form-field"),u.Zb(1,"mat-select",51),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).notification.diffusion_properties=t})),u.mc(2,"translate"),u.mc(3,"translate"),u.Qc(4,Tb,2,2,"mat-option",36),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(1),u.tc("title",u.nc(2,4,"lang.memberDiffTypeUsers")),u.tc("placeholder",u.nc(3,6,"lang.memberDiffTypeUsers")),u.sc("ngModel",a.notification.diffusion_properties),u.Eb(3),u.sc("ngForOf",a.notification.data.users)}}function Db(t,e){if(1&t&&(u.Zb(0,"mat-option",48),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n.entity_id),u.Eb(1),u.Uc(" ",n.entity_label," ")}}function Ub(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-form-field"),u.Zb(1,"mat-select",51),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).notification.diffusion_properties=t})),u.mc(2,"translate"),u.mc(3,"translate"),u.Qc(4,Db,2,2,"mat-option",36),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(1),u.tc("title",u.nc(2,4,"lang.memberDiffTypeUsers")),u.tc("placeholder",u.nc(3,6,"lang.memberDiffTypeUsers")),u.sc("ngModel",a.notification.diffusion_properties),u.Eb(3),u.sc("ngForOf",a.notification.data.entities)}}function Pb(t,e){if(1&t&&(u.Zb(0,"mat-option",48),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n.id),u.Eb(1),u.Uc(" ",n.label_status," ")}}function Fb(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-form-field"),u.Zb(1,"mat-select",52),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).notification.diffusion_properties=t})),u.mc(2,"translate"),u.mc(3,"translate"),u.mc(4,"translate"),u.Qc(5,Pb,2,2,"mat-option",36),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(1),u.uc("title","",u.nc(2,5,"lang.selectedDocumentStatus")," (optionnel)"),u.vc("placeholder","",u.nc(3,7,"lang.selectedDocumentStatus")," (",u.nc(4,9,"lang.optional"),")"),u.sc("ngModel",a.notification.diffusion_properties),u.Eb(4),u.sc("ngForOf",a.notification.data.status)}}function Lb(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-card",23),u.Qc(1,ub,3,3,"div",24),u.Zb(2,"form",25,26),u.hc("ngSubmit",(function(){return u.Hc(n),u.lc().onSubmit()})),u.Zb(4,"div",27),u.Zb(5,"div",28),u.Zb(6,"mat-form-field"),u.Zb(7,"input",29),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().notification.notification_id=t})),u.mc(8,"translate"),u.mc(9,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(10,"div",27),u.Zb(11,"div",28),u.Zb(12,"mat-form-field"),u.Zb(13,"input",30),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().notification.description=t})),u.mc(14,"translate"),u.mc(15,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(16,"div",27),u.Zb(17,"div",28),u.Zb(18,"mat-form-field"),u.Zb(19,"mat-select",31),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().notification.event_id=t})),u.mc(20,"translate"),u.mc(21,"translate"),u.Zb(22,"mat-optgroup",32),u.mc(23,"translate"),u.Qc(24,fb,2,1,"ng-container",33),u.Yb(),u.Zb(25,"mat-optgroup",32),u.mc(26,"translate"),u.Qc(27,gb,2,1,"ng-container",33),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(28,"div",27),u.Zb(29,"div",34),u.Zb(30,"mat-form-field"),u.Zb(31,"mat-select",35),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().notification.template_id=t})),u.mc(32,"translate"),u.mc(33,"translate"),u.Qc(34,hb,2,2,"mat-option",36),u.Yb(),u.Yb(),u.Yb(),u.Zb(35,"div",37),u.Zb(36,"mat-form-field"),u.Zb(37,"mat-select",38),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().notification.attachfor_type=t})),u.mc(38,"translate"),u.mc(39,"translate"),u.Zb(40,"mat-option",39),u.Sc(41),u.mc(42,"translate"),u.Yb(),u.Zb(43,"mat-option",40),u.Sc(44),u.mc(45,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(46,"div",27),u.Zb(47,"div",37),u.Zb(48,"mat-form-field"),u.Zb(49,"mat-select",41),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().notification.diffusion_type=t})),u.mc(50,"translate"),u.mc(51,"translate"),u.Qc(52,Cb,3,4,"mat-optgroup",42),u.Qc(53,Mb,3,4,"mat-optgroup",42),u.Zb(54,"mat-optgroup",32),u.mc(55,"translate"),u.Qc(56,Yb,2,1,"ng-container",33),u.Yb(),u.Qc(57,kb,3,4,"mat-optgroup",42),u.Yb(),u.Yb(),u.Yb(),u.Zb(58,"div",34),u.Qc(59,Ob,5,8,"mat-form-field",43),u.Qc(60,Ib,5,8,"mat-form-field",43),u.Qc(61,Ub,5,8,"mat-form-field",43),u.Qc(62,Fb,6,11,"mat-form-field",43),u.Yb(),u.Yb(),u.Zb(63,"div",27),u.Zb(64,"div",44),u.Zb(65,"button",45),u.Sc(66),u.mc(67,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.Dc(3),i=u.lc();u.Eb(1),u.sc("ngIf","N"==i.notification.is_enabled),u.Eb(6),u.tc("title",u.nc(8,38,"lang.id")),u.tc("placeholder",u.nc(9,40,"lang.id")),u.sc("ngModel",i.notification.notification_id)("disabled",!i.creationMode),u.Eb(6),u.tc("title",u.nc(14,42,"lang.description")),u.tc("placeholder",u.nc(15,44,"lang.description")),u.sc("ngModel",i.notification.description),u.Eb(6),u.tc("title",u.nc(20,46,"lang.NotificationEvent")),u.tc("placeholder",u.nc(21,48,"lang.NotificationEvent")),u.sc("ngModel",i.notification.event_id),u.Eb(3),u.uc("label","",u.nc(23,50,"lang.triggerSystem")," :"),u.Eb(2),u.sc("ngForOf",i.notification.data.event),u.Eb(1),u.uc("label","",u.nc(26,52,"lang.triggerAction")," :"),u.Eb(2),u.sc("ngForOf",i.notification.data.event),u.Eb(4),u.tc("title",u.nc(32,54,"lang.notificationModel")),u.tc("placeholder",u.nc(33,56,"lang.notificationModel")),u.sc("ngModel",i.notification.template_id),u.Eb(3),u.sc("ngForOf",i.notification.data.template),u.Eb(3),u.tc("title",u.nc(38,58,"lang.attachment")),u.tc("placeholder",u.nc(39,60,"lang.attachment")),u.sc("ngModel",i.notification.attachfor_type),u.Eb(4),u.Uc(" ",u.nc(42,62,"lang.noAttachment")," "),u.Eb(3),u.Uc(" ",u.nc(45,64,"lang.notificationJoinDocument")," "),u.Eb(5),u.tc("title",u.nc(50,66,"lang.sendTo")),u.tc("placeholder",u.nc(51,68,"lang.sendTo")),u.sc("ngModel",i.notification.diffusion_type),u.Eb(3),u.sc("ngIf","baskets"!=i.notification.event_id),u.Eb(1),u.sc("ngIf","baskets"!=i.notification.event_id),u.Eb(1),u.uc("label","",u.nc(55,70,"lang.memberAllUsers")," :"),u.Eb(2),u.sc("ngForOf",i.notification.data.diffusionType),u.Eb(1),u.sc("ngIf","baskets"!=i.notification.event_id),u.Eb(2),u.sc("ngIf","group"==i.notification.diffusion_type),u.Eb(1),u.sc("ngIf","user"==i.notification.diffusion_type),u.Eb(1),u.sc("ngIf","entity"==i.notification.diffusion_type),u.Eb(1),u.sc("ngIf","dest_user"==i.notification.diffusion_type||"copy_list"==i.notification.diffusion_type||"dest_entity"==i.notification.diffusion_type||"dest_user_visa"==i.notification.diffusion_type||"dest_user_sign"==i.notification.diffusion_type),u.Eb(3),u.sc("disabled",!a.form.valid),u.Eb(1),u.Tc(u.nc(67,72,"lang.save"))}}var jb,Rb=((jb=function(){function t(e,n,a,i,r,c,o,s){_classCallCheck(this,t),this.translate=e,this.http=n,this.route=a,this.router=i,this.notify=r,this.headerService=c,this.appService=o,this.viewContainerRef=s,this.notification={diffusionType_label:null},this.loading=!1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.route.params.subscribe((function(e){void 0===e.identifier?(t.headerService.setHeader(t.translate.instant("lang.notificationCreation")),t.creationMode=!0,t.http.get("../rest/administration/notifications/new").subscribe((function(e){t.notification=e.notification,t.notification.attachfor_properties=[],t.loading=!1}),(function(e){t.notify.error(e.error.errors)}))):(t.creationMode=!1,t.http.get("../rest/notifications/"+e.identifier).subscribe((function(e){t.headerService.setHeader(t.translate.instant("lang.notificationModification"),e.notification.description),t.notification=e.notification,t.notification.attachfor_properties=[],t.loading=!1}),(function(e){t.notify.error(e.error.errors)})))}))}},{key:"createScript",value:function(){var t=this;this.http.post("../rest/scriptNotification",this.notification).subscribe((function(e){t.notification.scriptcreated=e,t.notify.success(t.translate.instant("lang.scriptCreated"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"onSubmit",value:function(){var t=this;this.creationMode?(this.notification.is_enabled="Y",this.http.post("../rest/notifications",this.notification).subscribe((function(e){t.router.navigate(["/administration/notifications"]),t.notify.success(t.translate.instant("lang.notificationAdded"))}),(function(e){t.notify.error(e.error.errors)}))):this.http.put("../rest/notifications/"+this.notification.notification_sid,this.notification).subscribe((function(e){t.router.navigate(["/administration/notifications"]),t.notify.success(t.translate.instant("lang.notificationUpdated"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"toggleNotif",value:function(){var t=this;this.notification.is_enabled="Y"===this.notification.is_enabled?"N":"Y",this.http.put("../rest/notifications/"+this.notification.notification_sid,this.notification).subscribe((function(e){t.notify.success(t.translate.instant("lang.notificationUpdated"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"isNumber",value:function(t){return $.isNumeric(t)}}]),t}()).\u0275fac=function(t){return new(t||jb)(u.Tb(m.e),u.Tb(f.b),u.Tb(r.a),u.Tb(r.c),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a),u.Tb(u.R))},jb.\u0275cmp=u.Nb({type:jb,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&u.Oc(rb,!0),2&t&&u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first)},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader","",4,"ngIf"],["mat-list-item","","joyrideStep","createScriptTour",3,"click","next",4,"ngIf"],["mat-list-item","",3,"click",4,"ngIf"],["mat-subheader",""],["mat-list-item","","joyrideStep","createScriptTour",3,"click","next"],["color","primary","mat-list-icon","",1,"fa","fa-terminal"],["mat-line",""],["mat-list-item","",3,"click"],["color","accent","mat-list-icon","",1,"fa","fa-play"],["color","warn","mat-list-icon","",1,"fa","fa-pause"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],["class","text-warning","style","position: absolute;opacity: 0.1;font-size: 120px;transform: rotate(324deg);-webkit-transform: rotate(324deg);margin-left: 25%;margin-top: 90px;",4,"ngIf"],[1,"form-horizontal",3,"ngSubmit"],["notificationsFormUp","ngForm"],[1,"form-group"],[1,"col-md-12"],["matInput","","required","","name","notification_id","id","notification_id","type","text","pattern","^[\\w.-]*$","maxlength","50",3,"ngModel","title","placeholder","disabled","ngModelChange"],["matInput","","required","","name","description","id","description","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["id","event_id","name","event_id","required","",3,"title","placeholder","ngModel","ngModelChange"],[3,"label"],[4,"ngFor","ngForOf"],[1,"col-md-8"],["id","template_id","name","template_id","required","",3,"title","placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4"],["id","attachfor_type","name","attachfor_type",3,"title","placeholder","ngModel","ngModelChange"],["value",""],["value","main_document"],["id","diffusion_type","name","diffusion_type","required","",3,"title","placeholder","ngModel","ngModelChange"],[3,"label",4,"ngIf"],[4,"ngIf"],[1,"col-sm-12",2,"text-align","center"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[1,"text-warning",2,"position","absolute","opacity","0.1","font-size","120px","transform","rotate(324deg)","-webkit-transform","rotate(324deg)","margin-left","25%","margin-top","90px"],[3,"value",4,"ngIf"],[3,"value"],["color","primary",1,"fa","fa-cog",2,"height","auto"],["color","primary",1,"fa","fa-exchange-alt",2,"height","auto"],["id","diffusion_properties","name","diffusion_properties","required","","multiple","",3,"title","placeholder","ngModel","ngModelChange"],["id","diffusion_properties","name","diffusion_properties","multiple","",3,"title","placeholder","ngModel","ngModelChange"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,db,5,4,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,bb,2,0,"div",9),u.Qc(14,Lb,68,74,"mat-card",10),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading))},directives:[S.e,S.f,M.a,Y.a,Z.t,Dt.h,Dt.g,Dt.d,x.a,Ut.a,Dt.c,I.k,O.c,T.a,o.J,o.u,o.v,k.c,w.b,o.c,o.E,o.A,o.o,o.t,o.w,it.a,I.n,Z.s,I.o,D.b],pipes:[m.d],encapsulation:2}),jb),Qb=n("VdM8"),Ab=["adminMenuTemplate"],Hb=["appHistoryList"];function zb(t,e){if(1&t&&(u.Zb(0,"a",21),u.Ub(1,"mat-icon",22),u.Zb(2,"p",23),u.Sc(3),u.Yb(),u.Yb()),2&t){var n=e.$implicit;u.Jb("active",n.current),u.sc("routerLink",n.route),u.Eb(1),u.Gb(n.icon),u.Eb(2),u.Uc(" ",n.label," ")}}function $b(t,e){if(1&t&&(u.Zb(0,"mat-nav-list"),u.Qc(1,zb,4,6,"a",20),u.Yb()),2&t){var n=u.lc();u.Eb(1),u.sc("ngForOf",n.subMenus)}}function Vb(t,e){if(1&t&&u.Ub(0,"mat-datepicker-toggle",24),2&t){u.lc();var n=u.Dc(19);u.sc("for",n)}}function Nb(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",25),u.hc("click",(function(t){u.Hc(n),u.lc();var e=u.Dc(33);return t.stopPropagation(),e.startDateFilter="",e.filterStartDate()})),u.Ub(1,"mat-icon",26),u.Yb()}if(2&t){var a=u.lc();u.sc("title",a.translate.instant("lang.eraseValue"))}}function Jb(t,e){if(1&t&&u.Ub(0,"mat-datepicker-toggle",24),2&t){u.lc();var n=u.Dc(28);u.sc("for",n)}}function Gb(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",25),u.hc("click",(function(t){u.Hc(n),u.lc();var e=u.Dc(33);return t.stopPropagation(),e.endDateFilter="",e.filterEndDate()})),u.Ub(1,"mat-icon",26),u.Yb()}if(2&t){var a=u.lc();u.sc("title",a.translate.instant("lang.eraseValue"))}}var Bb,Wb=((Bb=function(){function t(e,n,a,i,r,c,o){_classCallCheck(this,t),this.translate=e,this.http=n,this.appService=a,this.functions=i,this.privilegeService=r,this.headerService=c,this.viewContainerRef=o,this.startDateFilter="",this.endDateFilter="",this.subMenus=[{icon:"fa fa-history",route:"/administration/history",label:this.translate.instant("lang.history"),current:!0},{icon:"fa fa-history",route:"/administration/history-batch",label:this.translate.instant("lang.historyBatch"),current:!1}]}return _createClass(t,[{key:"ngOnInit",value:function(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.history").toLowerCase(),"",""),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.subMenus=this.privilegeService.hasCurrentUserPrivilege("view_history_batch")?[{icon:"fa fa-history",route:"/administration/history",label:this.translate.instant("lang.history"),current:!0},{icon:"fa fa-history",route:"/administration/history-batch",label:this.translate.instant("lang.historyBatch"),current:!1}]:[{icon:"fa fa-history",route:"/administration/history",label:this.translate.instant("lang.history"),current:!0}]}}]),t}()).\u0275fac=function(t){return new(t||Bb)(u.Tb(m.e),u.Tb(f.b),u.Tb(g.a),u.Tb(C.a),u.Tb(h.a),u.Tb(p.a),u.Tb(u.R))},Bb.\u0275cmp=u.Nb({type:Bb,selectors:[["admin-history"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(Ab,!0),u.ad(Hb,!0)),2&t&&(u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.appHistoryList=n.first))},decls:34,vars:26,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[2,"display","grid","grid-template-columns","repeat(2, 1fr)","grid-gap","10px","width","100%"],[1,"dateFilter",2,"cursor","pointer",3,"click"],[2,"color","white"],["matInput","","readonly","",2,"cursor","pointer",3,"ngModel","matDatepicker","placeholder","max","ngModelChange","dateChange"],["matSuffix","",3,"for",4,"ngIf"],[3,"touchUi"],["startPicker",""],["mat-button","","color","warn","matSuffix","","mat-icon-button","",3,"title","click",4,"ngIf"],["matInput","","readonly","",2,"cursor","pointer",3,"ngModel","matDatepicker","placeholder","min","ngModelChange","dateChange"],["endPicker",""],[1,"container"],[1,"container-content"],["appHistoryList",""],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],["mat-line",""],["matSuffix","",3,"for"],["mat-button","","color","warn","matSuffix","","mat-icon-button","",3,"title","click"],["color","warn",1,"fa","fa-calendar-times"]],template:function(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-sidenav-container",0),u.Qc(1,$b,2,1,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Zb(10,"div",6),u.Zb(11,"div",7),u.Zb(12,"mat-form-field",8),u.hc("click",(function(){return u.Hc(n),u.Dc(19).open()})),u.Zb(13,"mat-label",9),u.Sc(14),u.mc(15,"translate"),u.Yb(),u.Zb(16,"input",10),u.hc("ngModelChange",(function(t){return u.Hc(n),u.Dc(33).startDateFilter=t}))("dateChange",(function(){return u.Hc(n),u.Dc(33).filterStartDate()})),u.Yb(),u.Qc(17,Vb,1,1,"mat-datepicker-toggle",11),u.Ub(18,"mat-datepicker",12,13),u.Qc(20,Nb,2,1,"button",14),u.Yb(),u.Zb(21,"mat-form-field",8),u.hc("click",(function(){return u.Hc(n),u.Dc(28).open()})),u.Zb(22,"mat-label",9),u.Sc(23),u.mc(24,"translate"),u.Yb(),u.Zb(25,"input",15),u.hc("ngModelChange",(function(t){return u.Hc(n),u.Dc(33).endDateFilter=t}))("dateChange",(function(){return u.Hc(n),u.Dc(33).filterEndDate()})),u.Yb(),u.Qc(26,Jb,1,1,"mat-datepicker-toggle",11),u.Ub(27,"mat-datepicker",12,16),u.Qc(29,Gb,2,1,"button",14),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(30,"div",17),u.Zb(31,"div",18),u.Ub(32,"app-history-list",null,19),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.Dc(19),i=u.Dc(28),r=u.Dc(33);u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(4),u.Uc("",u.nc(15,22,"lang.since")," "),u.Eb(2),u.sc("ngModel",r.startDateFilter)("matDatepicker",a)("placeholder",e.translate.instant("lang.since"))("max",r.endDateFilter),u.Eb(1),u.sc("ngIf",!r.startDateFilter),u.Eb(1),u.sc("touchUi",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",r.startDateFilter),u.Eb(3),u.Uc("",u.nc(24,24,"lang.until")," "),u.Eb(2),u.sc("ngModel",r.endDateFilter)("matDatepicker",i)("placeholder",e.translate.instant("lang.until"))("min",r.startDateFilter),u.Eb(1),u.sc("ngIf",!r.endDateFilter),u.Eb(1),u.sc("touchUi",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",r.endDateFilter),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode())}},directives:[S.e,S.f,M.a,Y.a,k.c,k.g,w.b,o.c,Ve.f,o.t,o.w,Z.t,Ve.d,Qb.a,Dt.h,Z.s,Dt.d,r.f,Ut.a,Dt.c,I.k,Ve.h,k.j,D.b],pipes:[m.d],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}.paginatorResultList[_ngcontent-%COMP%]    .mat-paginator-range-label{justify-content:flex-end;display:flex}.filterList[_ngcontent-%COMP%]    .mat-optgroup-label{color:#135f7f;position:-webkit-sticky;position:sticky;top:0;background:#fff!important;z-index:1}.label[_ngcontent-%COMP%]{cursor:pointer;margin:5px}.bg-head-content[_ngcontent-%COMP%]     .mat-focused .mat-form-field-label{color:#fff!important}.bg-head-content[_ngcontent-%COMP%]    .mat-form-field-ripple, .bg-head-content[_ngcontent-%COMP%]    .mat-form-field-underline{background-color:#fff!important}.bg-head-content[_ngcontent-%COMP%]   .mat-datepicker-toggle[_ngcontent-%COMP%], .bg-head-content[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#fff}"]}),Bb),qb=n("XNiG"),Xb=n("VRyK"),Kb=n("1G5W"),tu=n("eIep"),eu=n("8IW6"),nu=n("ZI/H"),au=["adminMenuTemplate"],iu=["tableHistoryListSort"],ru=["autoCompleteInput"];function cu(t,e){if(1&t&&(u.Zb(0,"a",53),u.Ub(1,"mat-icon",54),u.Zb(2,"p",55),u.Sc(3),u.Yb(),u.Yb()),2&t){var n=e.$implicit;u.Jb("active",n.current),u.sc("routerLink",n.route),u.Eb(1),u.Gb(n.icon),u.Eb(2),u.Uc(" ",n.label," ")}}function ou(t,e){if(1&t&&(u.Zb(0,"mat-nav-list"),u.Qc(1,cu,4,6,"a",52),u.Yb()),2&t){var n=u.lc();u.Eb(1),u.sc("ngForOf",n.subMenus)}}function su(t,e){if(1&t&&u.Ub(0,"mat-datepicker-toggle",56),2&t){u.lc();var n=u.Dc(19);u.sc("for",n)}}function lu(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",57),u.hc("click",(function(t){u.Hc(n);var e=u.lc();return t.stopPropagation(),e.startDateFilter="",e.filterStartDate()})),u.Ub(1,"mat-icon",58),u.Yb()}if(2&t){var a=u.lc();u.sc("title",a.translate.instant("lang.eraseValue"))}}function du(t,e){if(1&t&&u.Ub(0,"mat-datepicker-toggle",56),2&t){u.lc();var n=u.Dc(28);u.sc("for",n)}}function bu(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",57),u.hc("click",(function(t){u.Hc(n);var e=u.lc();return t.stopPropagation(),e.endDateFilter="",e.filterEndDate()})),u.Ub(1,"mat-icon",58),u.Yb()}if(2&t){var a=u.lc();u.sc("title",a.translate.instant("lang.eraseValue"))}}function uu(t,e){1&t&&u.Ub(0,"mat-spinner")}function mu(t,e){if(1&t&&(u.Zb(0,"div",59),u.Qc(1,uu,1,0,"mat-spinner",28),u.Yb()),2&t){var n=u.lc();u.Eb(1),u.sc("ngIf",n.isLoadingResults)}}function fu(t,e){1&t&&(u.Zb(0,"mat-option",60),u.Zb(1,"div",61),u.Ub(2,"mat-spinner",62),u.Yb(),u.Yb())}function pu(t,e){if(1&t&&(u.Zb(0,"mat-option",66),u.Sc(1),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2).$implicit,i=u.lc(2);u.Pc("color",n.used?"":i.filterColor[a.key]),u.sc("id",a.key)("value",n)("disabled",n.used),u.Eb(1),u.Uc(" ",n.label," ")}}function gu(t,e){if(1&t&&(u.Zb(0,"mat-optgroup",64),u.Qc(1,pu,2,6,"mat-option",65),u.mc(2,"sortBy"),u.mc(3,"async"),u.Yb()),2&t){var n=u.lc().$implicit,a=u.lc(2);u.sc("label",a.translate.instant("lang."+n.key)),u.Eb(1),u.sc("ngForOf",u.oc(2,2,u.nc(3,5,a.filteredList[n.key]),"label"))}}function hu(t,e){if(1&t&&(u.Xb(0),u.Qc(1,gu,4,7,"mat-optgroup",63),u.mc(2,"async"),u.Wb()),2&t){var n,a=e.$implicit,i=u.lc(2),r=(null==(n=u.nc(2,1,i.filteredList[a.key]))?null:n.length)>0;u.Eb(1),u.sc("ngIf",r)}}function vu(t,e){if(1&t&&(u.Xb(0),u.Qc(1,hu,3,3,"ng-container",34),u.mc(2,"keyvalue"),u.Wb()),2&t){var n=u.lc();u.Eb(1),u.sc("ngForOf",u.nc(2,1,n.filterList))}}function yu(t,e){if(1&t){var n=u.ac();u.Zb(0,"span",68),u.hc("click",(function(){u.Hc(n);var t=e.$implicit,a=e.index,i=u.lc(2).$implicit;return u.lc().removeItemFilter(t,i.key,a)})),u.Sc(1),u.Ub(2,"i",69),u.Yb()}if(2&t){var a=e.$implicit,i=u.lc(2).$implicit,r=u.lc();u.Pc("background",r.filterColor[i.key],u.Mb),u.sc("title",r.translate.instant("lang."+i.key)),u.Eb(1),u.Uc("",a.label," ")}}function Cu(t,e){if(1&t&&(u.Xb(0),u.Qc(1,yu,3,4,"span",67),u.Wb()),2&t){var n=u.lc().$implicit,a=u.lc();u.Eb(1),u.sc("ngForOf",a.filterUsed[n.key])}}var Eu=function(){return["startDate","endDate"]};function Su(t,e){if(1&t&&(u.Xb(0),u.Qc(1,Cu,2,1,"ng-container",28),u.Wb()),2&t){var n=e.$implicit;u.Eb(1),u.sc("ngIf",-1===u.yc(1,Eu).indexOf(n.key))}}function Mu(t,e){1&t&&(u.Zb(0,"mat-header-cell",70),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.event")))}function xu(t,e){if(1&t&&(u.Zb(0,"mat-cell",71),u.mc(1,"fullDate"),u.Sc(2),u.mc(3,"ucfirst"),u.mc(4,"timeAgo"),u.Yb()),2&t){var n=e.$implicit;u.sc("title",u.nc(1,2,n.event_date)),u.Eb(2),u.Uc(" ",u.nc(3,4,u.oc(4,6,n.event_date,"full"))," ")}}function Yu(t,e){1&t&&(u.Zb(0,"mat-header-cell",70),u.Sc(1),u.mc(2,"ucfirst"),u.mc(3,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc("",u.nc(2,1,u.nc(3,3,"lang.totalProcessed"))," "))}function Zu(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Jb("empty",0===n.total_processed),u.Eb(1),u.Uc(" ",n.total_processed," ")}}function _u(t,e){1&t&&(u.Zb(0,"mat-header-cell",70),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc("",u.nc(2,1,"lang.totalErrors")," "))}function ku(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Jb("empty",0===n.total_errors)("error",n.total_errors>0),u.Eb(1),u.Uc(" ",n.total_errors," ")}}function wu(t,e){1&t&&(u.Zb(0,"mat-header-cell",72),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc("",u.nc(2,1,"lang.information")," "))}function Ou(t,e){if(1&t&&(u.Zb(0,"mat-cell",73),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.info," ")}}function Tu(t,e){1&t&&(u.Zb(0,"mat-header-cell",70),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc("",u.nc(2,1,"lang.module")," "))}function Iu(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.module_name," ")}}function Du(t,e){1&t&&u.Ub(0,"mat-header-row")}function Uu(t,e){1&t&&u.Ub(0,"mat-row")}var Pu,Fu=((Pu=function(){function t(e,n,a,i,r,c,s,l,d,b){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.headerService=i,this.appService=r,this.dialog=c,this.functions=s,this.latinisePipe=l,this.privilegeService=d,this.viewContainerRef=b,this.loading=!1,this.filtersChange=new u.o,this.displayedColumnsHistory=["event_date","total_processed","total_errors","info","module_name"],this.isLoadingResults=!0,this.routeUrl="../rest/batchHistory",this.resultsLength=0,this.searchHistory=new o.h,this.startDateFilter="",this.endDateFilter="",this.filterUrl="",this.filterList=null,this.filteredList={},this.filterUsed={},this.filterColor={startDate:"#b5cfd8",endDate:"#7393a7",totalErrors:"#fc6471",modules:"#009dc5"},this.loadingFilters=!0,this.destroy$=new qb.a,this.subMenus=[]}return _createClass(t,[{key:"ngOnInit",value:function(){this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.subMenus=this.privilegeService.hasCurrentUserPrivilege("view_history")?[{icon:"fa fa-history",route:"/administration/history",label:this.translate.instant("lang.history"),current:!1},{icon:"fa fa-history",route:"/administration/history-batch",label:this.translate.instant("lang.historyBatch"),current:!0}]:[{icon:"fa fa-history",route:"/administration/history-batch",label:this.translate.instant("lang.historyBatch"),current:!0}],this.loading=!0,this.initHistoryList()}},{key:"initHistoryList",value:function(){var t=this;this.resultListDatabase=new Lu(this.http),this.paginator.pageIndex=0,this.sort.active="event_date",this.sort.direction="desc",this.sort.sortChange.subscribe((function(){return t.paginator.pageIndex=0})),Object(Xb.a)(this.sort.sortChange,this.paginator.page,this.filtersChange).pipe(Object(Kb.a)(this.destroy$),Object(s.a)({}),Object(tu.a)((function(){return t.isLoadingResults=!0,t.resultListDatabase.getRepoIssues(t.sort.active,t.sort.direction,t.paginator.pageIndex,t.routeUrl,t.filterUrl)})),Object(l.a)((function(e){return t.isLoadingResults=!1,e=t.processPostData(e),t.resultsLength=e.count,t.headerService.setHeader(t.translate.instant("lang.administration")+" "+t.translate.instant("lang.historyBatch").toLowerCase(),"",""),e.history})),Object(b.a)((function(e){return t.notify.handleErrors(e),t.isLoadingResults=!1,Object(c.a)([])}))).subscribe((function(e){return t.data=e}))}},{key:"processPostData",value:function(t){return t.history=t.history.map((function(t){return Object.assign(Object.assign({},t),{total_errors:null===t.total_errors?0:t.total_errors})})),t}},{key:"refreshDao",value:function(){this.paginator.pageIndex=0,this.filtersChange.emit()}},{key:"initFilterListHistory",value:function(){var t=this;null===this.filterList&&(this.filterList={},this.loadingFilters=!0,this.http.get("../rest/batchHistory/availableFilters").pipe(Object(l.a)((function(e){var n={modules:[{}],totalErrors:[{}]};return n.modules=e.modules,n.totalErrors=[{id:"errorElement",label:t.translate.instant("lang.totalErrors")}],n})),Object(d.a)((function(e){Object.keys(e).forEach((function(n){t.functions.empty(t.filterList[n])&&(t.filterList[n]=[],t.filteredList[n]=[]),e[n].forEach((function(e){t.filterList[n].push(e)})),t.filteredList[n]=t.searchHistory.valueChanges.pipe(Object(s.a)(""),Object(l.a)((function(e){return e?t.filter(e,n):t.filterList[n].slice()})))}))})),Object(Ct.a)((function(){return t.loadingFilters=!1})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(c.a)(!1)}))).subscribe())}},{key:"filterStartDate",value:function(){this.functions.empty(this.filterUsed.startDate)&&(this.filterUsed.startDate=[]),this.filterUsed.startDate[0]={id:this.functions.empty(this.startDateFilter)?"":this.functions.formatDateObjectToDateString(this.startDateFilter),label:this.functions.empty(this.startDateFilter)?"":this.functions.formatDateObjectToDateString(this.startDateFilter)},this.generateUrlFilter(),this.refreshDao()}},{key:"filterEndDate",value:function(){this.functions.empty(this.filterUsed.endDate)&&(this.filterUsed.endDate=[]),this.filterUsed.endDate[0]={id:this.functions.empty(this.endDateFilter)?"":this.functions.formatDateObjectToDateString(this.endDateFilter,!0),label:this.functions.empty(this.endDateFilter)?"":this.functions.formatDateObjectToDateString(this.endDateFilter)},this.generateUrlFilter(),this.refreshDao()}},{key:"addItemFilter",value:function(t){t.value.used=!0,this.functions.empty(this.filterUsed[t.id])&&(this.filterUsed[t.id]=[]),this.filterUsed[t.id].push(t.value),this.generateUrlFilter(),this.searchHistory.reset(),this.autoCompleteInput.nativeElement.blur(),this.refreshDao()}},{key:"removeItemFilter",value:function(t,e,n){t.used=!1,this.filterUsed[e].splice(n,1),this.generateUrlFilter(),this.refreshDao()}},{key:"generateUrlFilter",value:function(){var t=this;this.filterUrl="";var e=[];Object.keys(this.filterUsed).forEach((function(n){t.filterUsed[n].forEach((function(a){t.functions.empty(a.id)||(["startDate","endDate"].indexOf(n)>-1?e.push("".concat(n,"=").concat(a.id)):e.push("".concat(n,"[]=").concat(a.id)))}))})),e.length>0&&(this.filterUrl="&"+e.join("&"))}},{key:"filter",value:function(t,e){var n=this;if("string"==typeof t){var a=this.latinisePipe.transform(t.toLowerCase());return this.filterList[e].filter((function(t){return n.latinisePipe.transform(t.label.toLowerCase()).includes(a)}))}return this.filterList[e]}}]),t}()).\u0275fac=function(t){return new(t||Pu)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a),u.Tb(z.b),u.Tb(C.a),u.Tb(v.c),u.Tb(h.a),u.Tb(u.R))},Pu.\u0275cmp=u.Nb({type:Pu,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(au,!0),u.Oc(V.a,!0),u.Oc(iu,!0),u.Oc(ru,!0)),2&t&&(u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.paginator=n.first),u.Cc(n=u.ic())&&(e.sort=n.first),u.Cc(n=u.ic())&&(e.autoCompleteInput=n.first))},decls:72,vars:45,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[2,"display","grid","grid-template-columns","repeat(2, 1fr)","grid-gap","10px","width","100%"],[1,"dateFilter",2,"cursor","pointer",3,"click"],[2,"color","white"],["matInput","","readonly","",2,"cursor","pointer",3,"ngModel","matDatepicker","placeholder","max","ngModelChange","dateChange"],["matSuffix","",3,"for",4,"ngIf"],[3,"touchUi"],["startPicker",""],["mat-button","","color","warn","matSuffix","","mat-icon-button","",3,"title","click",4,"ngIf"],["matInput","","readonly","",2,"cursor","pointer",3,"ngModel","matDatepicker","placeholder","min","ngModelChange","dateChange"],["endPicker",""],[1,"container"],[1,"container-content"],["class","example-loading-shade",4,"ngIf"],[1,"table-head"],[1,"table-head-result"],["floatLabel","never",2,"font-size","13px"],["type","text","matInput","","maxlength","128",3,"matAutocomplete","placeholder","formControl","click"],["autoCompleteInput",""],[3,"optionSelected","opened"],["auto","matAutocomplete"],["disabled","",4,"ngIf"],[4,"ngIf"],[1,"table-head-tool"],[1,"paginatorResultList",3,"length","hidePageSize","pageSize"],["paginatorHistoryList",""],[2,"height","90%","overflow","auto","position","absolute","width","100%"],[1,"filterBadges"],[4,"ngFor","ngForOf"],["id","history-list","matSort","","matSortActive","event_date","matSortDirection","desc",2,"width","100%",3,"dataSource"],["tableHistoryListSort","matSort"],["matColumnDef","event_date"],["mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",3,"title",4,"matCellDef"],["matColumnDef","total_processed"],[3,"empty",4,"matCellDef"],["matColumnDef","total_errors"],[3,"empty","error",4,"matCellDef"],["matColumnDef","info"],["mat-sort-header","","style","flex: 2;",4,"matHeaderCellDef"],["style","flex: 2;",4,"matCellDef"],["matColumnDef","module_name"],[4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],["mat-line",""],["matSuffix","",3,"for"],["mat-button","","color","warn","matSuffix","","mat-icon-button","",3,"title","click"],["color","warn",1,"fa","fa-calendar-times"],[1,"example-loading-shade"],["disabled",""],[2,"display","flex","justify-content","center"],["diameter","35"],["class","filterList",3,"label",4,"ngIf"],[1,"filterList",3,"label"],[3,"id","color","value","disabled",4,"ngFor","ngForOf"],[3,"id","value","disabled"],["class","label",3,"background","title","click",4,"ngFor","ngForOf"],[1,"label",3,"title","click"],[1,"fa","fa-times-circle"],["mat-sort-header",""],["mat-cell","",3,"title"],["mat-sort-header","",2,"flex","2"],[2,"flex","2"]],template:function(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-sidenav-container",0),u.Qc(1,ou,2,1,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Zb(10,"div",6),u.Zb(11,"div",7),u.Zb(12,"mat-form-field",8),u.hc("click",(function(){return u.Hc(n),u.Dc(19).open()})),u.Zb(13,"mat-label",9),u.Sc(14),u.mc(15,"translate"),u.Yb(),u.Zb(16,"input",10),u.hc("ngModelChange",(function(t){return e.startDateFilter=t}))("dateChange",(function(){return e.filterStartDate()})),u.Yb(),u.Qc(17,su,1,1,"mat-datepicker-toggle",11),u.Ub(18,"mat-datepicker",12,13),u.Qc(20,lu,2,1,"button",14),u.Yb(),u.Zb(21,"mat-form-field",8),u.hc("click",(function(){return u.Hc(n),u.Dc(28).open()})),u.Zb(22,"mat-label",9),u.Sc(23),u.mc(24,"translate"),u.Yb(),u.Zb(25,"input",15),u.hc("ngModelChange",(function(t){return e.endDateFilter=t}))("dateChange",(function(){return e.filterEndDate()})),u.Yb(),u.Qc(26,du,1,1,"mat-datepicker-toggle",11),u.Ub(27,"mat-datepicker",12,16),u.Qc(29,bu,2,1,"button",14),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(30,"div",17),u.Zb(31,"div",18),u.Qc(32,mu,2,1,"div",19),u.Zb(33,"div",20),u.Zb(34,"div",21),u.Zb(35,"mat-form-field",22),u.Zb(36,"input",23,24),u.hc("click",(function(t){return t.stopPropagation()})),u.Yb(),u.Zb(38,"mat-autocomplete",25,26),u.hc("optionSelected",(function(t){return e.addItemFilter(t.option)}))("opened",(function(){return e.initFilterListHistory()})),u.Qc(40,fu,3,0,"mat-option",27),u.Qc(41,vu,3,3,"ng-container",28),u.Yb(),u.Yb(),u.Yb(),u.Zb(42,"div",29),u.Ub(43,"mat-paginator",30,31),u.Yb(),u.Yb(),u.Zb(45,"div",32),u.Zb(46,"div",33),u.Qc(47,Su,2,2,"ng-container",34),u.mc(48,"keyvalue"),u.Yb(),u.Zb(49,"mat-table",35,36),u.Xb(51,37),u.Qc(52,Mu,3,3,"mat-header-cell",38),u.Qc(53,xu,5,9,"mat-cell",39),u.Wb(),u.Xb(54,40),u.Qc(55,Yu,4,5,"mat-header-cell",38),u.Qc(56,Zu,2,3,"mat-cell",41),u.Wb(),u.Xb(57,42),u.Qc(58,_u,3,3,"mat-header-cell",38),u.Qc(59,ku,2,5,"mat-cell",43),u.Wb(),u.Xb(60,44),u.Qc(61,wu,3,3,"mat-header-cell",45),u.Qc(62,Ou,2,1,"mat-cell",46),u.Wb(),u.Xb(63,47),u.Qc(64,Tu,3,3,"mat-header-cell",38),u.Qc(65,Iu,2,1,"mat-cell",48),u.Wb(),u.Qc(66,Du,1,0,"mat-header-row",49),u.Qc(67,Uu,1,0,"mat-row",50),u.Yb(),u.Zb(68,"div",51),u.Sc(69),u.mc(70,"translate"),u.Yb(),u.Yb(),u.Ub(71,"div",20),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.Dc(19),i=u.Dc(28),r=u.Dc(39);u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(4),u.Uc("",u.nc(15,37,"lang.since")," "),u.Eb(2),u.sc("ngModel",e.startDateFilter)("matDatepicker",a)("placeholder",e.translate.instant("lang.since"))("max",e.endDateFilter),u.Eb(1),u.sc("ngIf",!e.startDateFilter),u.Eb(1),u.sc("touchUi",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.startDateFilter),u.Eb(3),u.Uc("",u.nc(24,39,"lang.until")," "),u.Eb(2),u.sc("ngModel",e.endDateFilter)("matDatepicker",i)("placeholder",e.translate.instant("lang.until"))("min",e.startDateFilter),u.Eb(1),u.sc("ngIf",!e.endDateFilter),u.Eb(1),u.sc("touchUi",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.endDateFilter),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.isLoadingResults),u.Eb(4),u.sc("matAutocomplete",r)("placeholder",e.translate.instant("lang.filterBy"))("formControl",e.searchHistory),u.Eb(4),u.sc("ngIf",e.loadingFilters),u.Eb(1),u.sc("ngIf",null!==e.filterList&&!e.loadingFilters),u.Eb(2),u.sc("length",e.resultsLength)("hidePageSize",!0)("pageSize",10),u.Eb(4),u.sc("ngForOf",u.nc(48,41,e.filterUsed)),u.Eb(2),u.sc("dataSource",e.data),u.Eb(17),u.sc("matHeaderRowDef",e.displayedColumnsHistory),u.Eb(1),u.sc("matRowDefColumns",e.displayedColumnsHistory),u.Eb(2),u.Vc(" ",e.resultsLength," ",u.nc(70,43,"lang.elements"),"")}},directives:[S.e,S.f,M.a,Y.a,k.c,k.g,w.b,o.c,Ve.f,o.t,o.w,Z.t,Ve.d,nr.d,o.o,o.i,nr.a,V.a,Z.s,B.n,N.a,B.c,B.i,B.b,B.k,B.m,Dt.h,Dt.d,r.f,Ut.a,Dt.c,I.k,Ve.h,k.j,D.b,O.c,I.o,I.n,B.h,N.b,B.a,B.j,B.l],pipes:[m.d,Z.l,Z.b,U.a,eu.a,v.u,nu.a],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}.paginatorResultList[_ngcontent-%COMP%]    .mat-paginator-range-label{justify-content:flex-end;display:flex}.filterList[_ngcontent-%COMP%]    .mat-optgroup-label{color:#135f7f;position:-webkit-sticky;position:sticky;top:0;background:#fff!important;z-index:1}.label[_ngcontent-%COMP%]{cursor:pointer;margin:5px}.bg-head-content[_ngcontent-%COMP%]     .mat-focused .mat-form-field-label{color:#fff!important}.bg-head-content[_ngcontent-%COMP%]    .mat-form-field-ripple, .bg-head-content[_ngcontent-%COMP%]    .mat-form-field-underline{background-color:#fff!important}.bg-head-content[_ngcontent-%COMP%]   .mat-datepicker-toggle[_ngcontent-%COMP%], .bg-head-content[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#fff}.empty[_ngcontent-%COMP%]{opacity:.5}.error[_ngcontent-%COMP%]{color:#8e3e52;font-weight:700}"]}),Pu),Lu=function(){function t(e){_classCallCheck(this,t),this.http=e}return _createClass(t,[{key:"getRepoIssues",value:function(t,e,n,a,i){return this.http.get("".concat(a,"?limit=10&offset=").concat(10*n,"&order=").concat(e,"&orderBy=").concat(t).concat(i))}}]),t}();function ju(t,e){1&t&&(u.Zb(0,"div",10),u.Ub(1,"mat-spinner",11),u.Yb())}function Ru(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-chip",32),u.hc("removed",(function(){u.Hc(n);var t=e.$implicit;return u.lc(2).removeChrono(t)})),u.Zb(1,"span",33),u.Sc(2),u.Yb(),u.Sc(3),u.Ub(4,"mat-icon",34),u.Yb()}if(2&t){var a=e.$implicit,i=u.lc(2);u.sc("removable",!0),u.Eb(2),u.Tc(i.chronoList.indexOf(a)+1),u.Eb(1),u.Uc(" \xa0",a," ")}}function Qu(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-chip",32),u.hc("removed",(function(){u.Hc(n);var t=e.$implicit;return u.lc(2).removeResId(t)})),u.Zb(1,"span",33),u.Sc(2),u.Yb(),u.Sc(3),u.Ub(4,"mat-icon",34),u.Yb()}if(2&t){var a=e.$implicit,i=u.lc(2);u.sc("removable",!0),u.Eb(2),u.Tc(i.resIdList.indexOf(a)+1),u.Eb(1),u.Uc(" \xa0",a," ")}}function Au(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-card",12),u.Zb(1,"form",13,14),u.hc("ngSubmit",(function(){return u.Hc(n),u.lc().onSubmit()})),u.Zb(3,"mat-tab-group",15),u.hc("selectedTabChange",(function(t){return u.Hc(n),u.lc().resetInput(t)})),u.Zb(4,"mat-tab",16),u.mc(5,"translate"),u.Zb(6,"div",17),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Zb(9,"mat-form-field"),u.Zb(10,"input",18),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().chrono=t})),u.mc(11,"translate"),u.mc(12,"translate"),u.Yb(),u.Yb(),u.Zb(13,"div",19),u.Zb(14,"div",20),u.Zb(15,"div",21),u.Zb(16,"button",22),u.hc("click",(function(){return u.Hc(n),u.lc().addChrono()})),u.Sc(17),u.mc(18,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(19,"mat-chip-list",23,24),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().chronoList=t})),u.Qc(21,Ru,5,3,"mat-chip",25),u.Yb(),u.Yb(),u.Ub(22,"mat-divider"),u.Yb(),u.Zb(23,"mat-tab",16),u.mc(24,"translate"),u.Zb(25,"div",17),u.Sc(26),u.mc(27,"translate"),u.Yb(),u.Zb(28,"mat-form-field"),u.Zb(29,"input",26),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().resId=t})),u.mc(30,"translate"),u.mc(31,"translate"),u.Yb(),u.Yb(),u.Zb(32,"div",19),u.Zb(33,"div",20),u.Zb(34,"div",21),u.Zb(35,"button",27),u.hc("click",(function(){return u.Hc(n),u.lc().addResId()})),u.Sc(36),u.mc(37,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(38,"mat-chip-list",28,24),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().resIdList=t})),u.Qc(40,Qu,5,3,"mat-chip",25),u.Yb(),u.Yb(),u.Ub(41,"mat-divider"),u.Yb(),u.Yb(),u.Zb(42,"plugin-autocomplete",29),u.hc("triggerEvent",(function(t){return u.Hc(n),u.lc().setStatus(t)})),u.Yb(),u.Zb(43,"div",20),u.Zb(44,"div",30),u.Zb(45,"button",31),u.Sc(46),u.mc(47,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc();u.Eb(4),u.tc("label",u.nc(5,25,"lang.chronoNumber")),u.Eb(3),u.Uc(" ",u.nc(8,27,"lang.updateStatusInformationsChrono")," "),u.Eb(3),u.tc("title",u.nc(11,29,"lang.chronoNumber")),u.tc("placeholder",u.nc(12,31,"lang.chronoNumber")),u.sc("ngModel",a.chrono),u.Eb(6),u.sc("disabled",!a.chrono),u.Eb(1),u.Tc(u.nc(18,33,"lang.add")),u.Eb(2),u.sc("ngModel",a.chronoList),u.Eb(2),u.sc("ngForOf",a.chronoList),u.Eb(2),u.tc("label",u.nc(24,35,"lang.resId")),u.Eb(3),u.Uc(" ",u.nc(27,37,"lang.updateStatusInformationsGed")," "),u.Eb(3),u.tc("title",u.nc(30,39,"lang.resId")),u.tc("placeholder",u.nc(31,41,"lang.resId")),u.sc("ngModel",a.resId),u.Eb(6),u.sc("disabled",!a.resId),u.Eb(1),u.Tc(u.nc(37,43,"lang.add")),u.Eb(2),u.sc("ngModel",a.resIdList),u.Eb(2),u.sc("ngForOf",a.resIdList),u.Eb(2),u.sc("labelPlaceholder",a.translate.instant("lang.availableStatuses"))("labelList",a.translate.instant("lang.availableStatuses"))("datas",a.statuses)("targetSearchKey","idToDisplay")("subInfoKey","id"),u.Eb(3),u.sc("disabled",0==a.resIdList.length&&0==a.chronoList.length||a.resIdList.length>0&&a.chronoList.length>0||!a.statusId),u.Eb(1),u.Tc(u.nc(47,45,"lang.save"))}}var Hu,zu=((Hu=function(){function t(e,n,a,i,r){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.headerService=i,this.appService=r,this.loading=!1,this.statuses=[],this.statusId="",this.resId="",this.chrono="",this.resIdList=[],this.chronoList=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.updateStatus")),this.loading=!0,this.http.get("../rest/autocomplete/statuses").pipe(Object(wt.tap)((function(e){return t.statuses=e})),Object(wt.tap)((function(){return t.loading=!1}))).subscribe()}},{key:"onSubmit",value:function(){var t=this,e={status:this.statusId};this.resIdList.length>0?e.resId=this.resIdList:this.chronoList.length>0&&(e.chrono=this.chronoList),this.http.put("../rest/res/resource/status",e).subscribe((function(){t.resId="",t.chrono="",t.statusId="",t.resIdList=[],t.chronoList=[],t.notify.success(t.translate.instant("lang.modificationSaved"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"addResId",value:function(){-1===this.resIdList.indexOf(this.resId)&&this.resIdList.push(this.resId),this.resId=""}},{key:"addChrono",value:function(){-1===this.chronoList.indexOf(this.chrono)&&this.chronoList.push(this.chrono),this.chrono=""}},{key:"setStatus",value:function(t){this.statusId=t.id}},{key:"removeResId",value:function(t){var e=this.resIdList.indexOf(t);this.resIdList.splice(e,1)}},{key:"removeChrono",value:function(t){var e=this.chronoList.indexOf(t);this.chronoList.splice(e,1)}},{key:"resetInput",value:function(t){0===t.index?this.resId="":this.chrono=""}}]),t}()).\u0275fac=function(t){return new(t||Hu)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a))},Hu.\u0275cmp=u.Nb({type:Hu,selectors:[["ng-component"]],decls:13,vars:8,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"form-horizontal",3,"ngSubmit"],["updateStatusForm","ngForm"],[3,"selectedTabChange"],[3,"label"],["role","alert",1,"alert","alert-info"],["matInput","","name","chrono",3,"title","placeholder","ngModel","ngModelChange"],[1,"row"],[1,"form-group"],[1,"col-md-12","text-left",2,"padding","10px"],["mat-raised-button","","type","button","color","primary",3,"disabled","click"],["name","chronoChips",3,"ngModel","ngModelChange"],["chipList",""],["color","primary",3,"removable","removed",4,"ngFor","ngForOf"],["type","number","id","","matInput","","name","resId",3,"title","placeholder","ngModel","ngModelChange"],["mat-raised-button","","color","primary","type","button",3,"disabled","click"],["name","resIdChips",3,"ngModel","ngModelChange"],["singleMode","","required","",3,"labelPlaceholder","labelList","datas","targetSearchKey","subInfoKey","triggerEvent"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary",3,"disabled"],["color","primary",3,"removable","removed"],[1,"badge","badge-pill","badge-dark"],["matChipRemove","",1,"fa","fa-times-circle"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Zb(1,"mat-sidenav-content"),u.Zb(2,"div",1),u.Zb(3,"div",2),u.Zb(4,"div",3),u.Ub(5,"header-left"),u.Yb(),u.Zb(6,"div",4),u.Ub(7,"header-right"),u.Yb(),u.Yb(),u.Ub(8,"div",5),u.Yb(),u.Zb(9,"div",6),u.Zb(10,"div",7),u.Qc(11,ju,2,0,"div",8),u.Qc(12,Au,48,47,"mat-card",9),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(3),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading))},directives:[S.e,S.f,M.a,Y.a,Z.t,O.c,T.a,o.J,o.u,o.v,Re.c,Re.a,k.c,w.b,o.c,o.t,o.w,D.b,er.d,Z.s,_.a,o.z,Lt.a,er.a,Ut.a,er.e],pipes:[m.d],styles:[".mat-tab-body{overflow-y:hidden!important}.row[_ngcontent-%COMP%]{margin-left:0}"]}),Hu),$u=["snav2"],Vu=["adminMenuTemplate"];function Nu(t,e){if(1&t&&(u.Zb(0,"a",18),u.Ub(1,"mat-icon",19),u.Zb(2,"p",16),u.Sc(3),u.Yb(),u.Yb()),2&t){var n=e.$implicit;u.Jb("active",n.current),u.sc("routerLink",n.route),u.Eb(1),u.Gb(n.icon),u.Eb(2),u.Uc(" ",n.label," ")}}function Ju(t,e){if(1&t&&(u.Zb(0,"mat-nav-list"),u.Zb(1,"h3",13),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"a",14),u.Ub(5,"mat-icon",15),u.Zb(6,"p",16),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Ub(9,"mat-divider"),u.Zb(10,"mat-nav-list"),u.Qc(11,Nu,4,6,"a",17),u.Yb()),2&t){var n=u.lc();u.Eb(2),u.Tc(u.nc(3,3,"lang.actions")),u.Eb(5),u.Uc(" ",u.nc(8,5,"lang.add")," "),u.Eb(4),u.sc("ngForOf",n.subMenus)}}function Gu(t,e){1&t&&(u.Zb(0,"div",20),u.Ub(1,"mat-spinner",21),u.Yb())}function Bu(t,e){if(1&t&&(u.Zb(0,"mat-header-cell",49),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=u.lc(2);u.Jb("hide-for-mobile",n.appService.getViewMode()),u.Eb(1),u.Uc("",u.nc(2,3,"lang.label")," ")}}function Wu(t,e){if(1&t&&(u.Zb(0,"mat-cell",50),u.Sc(1),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.Jb("hide-for-mobile",a.appService.getViewMode()),u.Eb(1),u.Tc(n.label)}}function qu(t,e){1&t&&(u.Zb(0,"mat-header-cell",49),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc("",u.nc(2,1,"lang.description")," "))}function Xu(t,e){if(1&t&&(u.Zb(0,"mat-cell",50),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.description," ")}}function Ku(t,e){1&t&&(u.Zb(0,"mat-header-cell",51),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc(" ",u.nc(2,1,"lang.relatedContactNumber")," "))}function tm(t,e){if(1&t&&(u.Zb(0,"span"),u.Sc(1),u.Yb()),2&t){var n=u.lc().$implicit;u.Eb(1),u.Tc(n.nbContacts)}}function em(t,e){if(1&t&&(u.Zb(0,"span",55),u.Sc(1),u.Yb()),2&t){var n=u.lc().$implicit;u.Eb(1),u.Tc(n.nbContacts)}}function nm(t,e){if(1&t&&(u.Zb(0,"mat-cell",52),u.Qc(1,tm,2,1,"span",53),u.Qc(2,em,2,1,"span",54),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.sc("ngIf",0==n.nbContacts),u.Eb(1),u.sc("ngIf",n.nbContacts>0)}}function am(t,e){if(1&t&&(u.Zb(0,"mat-header-cell",51),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=u.lc(2);u.Jb("hide-for-mobile",n.appService.getViewMode()),u.Eb(1),u.Uc("",u.nc(2,3,"lang.public")," ")}}function im(t,e){1&t&&(u.Zb(0,"span"),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc(" ",u.nc(2,1,"lang.no")," "))}function rm(t,e){1&t&&(u.Zb(0,"span"),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc(" ",u.nc(2,1,"lang.yes")," "))}function cm(t,e){if(1&t&&(u.Zb(0,"mat-cell",52),u.Qc(1,im,3,3,"span",53),u.Qc(2,rm,3,3,"span",53),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.Jb("hide-for-mobile",a.appService.getViewMode()),u.Eb(1),u.sc("ngIf",!n.public),u.Eb(1),u.sc("ngIf",n.public)}}function om(t,e){1&t&&(u.Zb(0,"mat-header-cell",51),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc("",u.nc(2,1,"lang.createdBy")," "))}function sm(t,e){if(1&t&&(u.Zb(0,"mat-cell",52),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.labelledOwner," ")}}function lm(t,e){1&t&&u.Ub(0,"mat-header-cell")}function dm(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-cell",56),u.Zb(1,"button",57),u.hc("click",(function(t){u.Hc(n);var a=e.$implicit,i=u.lc(2);return t.stopPropagation(),i.deleteContactsGroup(a.position)})),u.mc(2,"translate"),u.Ub(3,"mat-icon",58),u.Yb(),u.Yb()}2&t&&(u.Eb(1),u.tc("matTooltip",u.nc(2,1,"lang.delete")))}function bm(t,e){1&t&&u.Ub(0,"mat-header-row")}function um(t,e){1&t&&(u.Ub(0,"mat-row",59),u.mc(1,"translate")),2&t&&(u.uc("routerLink","/administration/contacts/contacts-groups/",e.$implicit.id,""),u.tc("matTooltip",u.nc(1,2,"lang.view")))}function mm(t,e){if(1&t&&(u.Zb(0,"mat-card",22),u.Zb(1,"div",23),u.Zb(2,"div",24),u.Zb(3,"mat-form-field"),u.Ub(4,"input",25),u.mc(5,"translate"),u.Yb(),u.Yb(),u.Zb(6,"div",24),u.Ub(7,"mat-paginator",26,27),u.Yb(),u.Yb(),u.Zb(9,"mat-table",28,29),u.Xb(11,30),u.Qc(12,Bu,3,5,"mat-header-cell",31),u.Qc(13,Wu,2,3,"mat-cell",32),u.Wb(),u.Xb(14,33),u.Qc(15,qu,3,3,"mat-header-cell",34),u.Qc(16,Xu,2,1,"mat-cell",35),u.Wb(),u.Xb(17,36),u.Qc(18,Ku,3,3,"mat-header-cell",37),u.Qc(19,nm,3,2,"mat-cell",38),u.Wb(),u.Xb(20,39),u.Qc(21,am,3,5,"mat-header-cell",40),u.Qc(22,cm,3,4,"mat-cell",41),u.Wb(),u.Xb(23,42),u.Qc(24,om,3,3,"mat-header-cell",37),u.Qc(25,sm,2,1,"mat-cell",38),u.Wb(),u.Xb(26,43),u.Qc(27,lm,1,0,"mat-header-cell",44),u.Qc(28,dm,4,3,"mat-cell",45),u.Wb(),u.Qc(29,bm,1,0,"mat-header-row",46),u.Qc(30,um,2,4,"mat-row",47),u.Yb(),u.Zb(31,"div",48),u.Sc(32),u.mc(33,"translate"),u.Yb(),u.Yb()),2&t){var n=u.lc();u.Eb(4),u.tc("placeholder",u.nc(5,10,"lang.filterBy")),u.sc("formControl",n.adminService.getFilterField()),u.Eb(3),u.sc("length",100)("hidePageSize",!0)("pageSize",10),u.Eb(2),u.sc("dataSource",n.adminService.getDataSource()),u.Eb(20),u.sc("matHeaderRowDef",n.displayedColumns),u.Eb(1),u.sc("matRowDefColumns",n.displayedColumns),u.Eb(2),u.Vc(" ",n.contactsGroups.length," ",u.nc(33,12,"lang.contactsGroupsAlt"),"")}}var fm,pm=((fm=function(){function t(e,n,a,i,r,c,o,s){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.headerService=i,this.appService=r,this.functions=c,this.adminService=o,this.viewContainerRef=s,this.search=null,this.contactsGroups=[],this.titles=[],this.loading=!1,this.subMenus=[{icon:"fa fa-book",route:"/administration/contacts/list",label:this.translate.instant("lang.contactsList"),current:!1},{icon:"fa fa-code",route:"/administration/contacts/contactsCustomFields",label:this.translate.instant("lang.customFieldsAdmin"),current:!1},{icon:"fa fa-cog",route:"/administration/contacts/contacts-parameters",label:this.translate.instant("lang.contactsParameters"),current:!1},{icon:"fa fa-users",route:"/administration/contacts/contacts-groups",label:this.translate.instant("lang.contactsGroups"),current:!0},{icon:"fas fa-magic",route:"/administration/contacts/duplicates",label:this.translate.instant("lang.duplicatesContactsAdmin"),current:!1}],this.displayedColumns=["label","description","nbContacts","public","owner","actions"],this.filterColumns=["label","description"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.contactsGroups")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/contactsGroups").subscribe((function(e){t.contactsGroups=e.contactsGroups,t.loading=!1,setTimeout((function(){t.adminService.setDataSource("admin_contacts_groups",t.contactsGroups,t.sort,t.paginator,t.filterColumns)}),0)}),(function(e){t.notify.handleErrors(e)}))}},{key:"deleteContactsGroup",value:function(t){var e=this,n=this.contactsGroups[t];confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+n.label+" \xbb")&&this.http.delete("../rest/contactsGroups/"+n.id).subscribe((function(){var n=e.contactsGroups.length-1;e.contactsGroups[t]=e.contactsGroups[n],e.contactsGroups[t].position=t,e.contactsGroups.splice(n,1),e.adminService.setDataSource("admin_contacts_groups",e.contactsGroups,e.sort,e.paginator,e.filterColumns),e.notify.success(e.translate.instant("lang.contactsGroupDeleted"))}),(function(t){e.notify.error(t.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||fm)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a),u.Tb(C.a),u.Tb(It),u.Tb(u.R))},fm.\u0275cmp=u.Nb({type:fm,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc($u,!0),u.Oc(Vu,!0),u.ad(V.a,!0),u.ad(N.a,!0)),2&t&&(u.Cc(n=u.ic())&&(e.sidenavRight=n.first),u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.paginator=n.first),u.Cc(n=u.ic())&&(e.sort=n.first))},decls:17,vars:10,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["position","end",3,"mode","fixedInViewport"],["snav2",""],["mat-subheader",""],["mat-list-item","","routerLink","/administration/contacts/contacts-groups/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSortDisableClear","","matSort","",3,"dataSource"],["table",""],["matColumnDef","label"],["mat-sort-header","","style","flex:2;",3,"hide-for-mobile",4,"matHeaderCellDef"],["style","flex:2;",3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","description"],["mat-sort-header","","style","flex:2;",4,"matHeaderCellDef"],["style","flex:2;",4,"matCellDef"],["matColumnDef","nbContacts"],["mat-sort-header","","style","flex:1;",4,"matHeaderCellDef"],["style","flex:1;",4,"matCellDef"],["matColumnDef","public"],["mat-sort-header","","style","flex:1;",3,"hide-for-mobile",4,"matHeaderCellDef"],["style","flex:1;",3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","owner"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],["mat-sort-header","",2,"flex","1"],[2,"flex","1"],[4,"ngIf"],["color","primary","style","font-weight:bold;",4,"ngIf"],["color","primary",2,"font-weight","bold"],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,Ju,12,7,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,Gu,2,0,"div",9),u.Qc(14,mm,34,14,"mat-card",10),u.Yb(),u.Yb(),u.Yb(),u.Ub(15,"mat-sidenav",11,12),u.Yb()),2&t&&(u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading),u.Eb(1),u.sc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode()))},directives:[S.e,S.f,M.a,Y.a,Z.t,S.d,Dt.h,Dt.g,Dt.d,r.f,Ut.a,Dt.c,I.k,_.a,Z.s,O.c,T.a,k.c,w.b,o.c,o.t,o.i,V.a,B.n,N.a,B.c,B.i,B.b,B.k,B.m,B.h,N.b,B.a,D.b,Ft.b,B.j,B.l,r.d],pipes:[m.d],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}"]}),fm),gm=n("/uUt"),hm=n("bv9b"),vm=["snav2"],ym=["adminMenuTemplate"],Cm=["paginatorContactList"],Em=["paginatorAdded"],Sm=["tableAdded"];function Mm(t,e){if(1&t&&(u.Zb(0,"a",31),u.Ub(1,"mat-icon",32),u.Zb(2,"p",33),u.Sc(3),u.Yb(),u.Yb()),2&t){var n=e.$implicit;u.Jb("active",n.current),u.sc("routerLink",n.route),u.Eb(1),u.Gb(n.icon),u.Eb(2),u.Uc(" ",n.label," ")}}function xm(t,e){if(1&t&&(u.Zb(0,"mat-nav-list"),u.Qc(1,Mm,4,6,"a",30),u.Yb()),2&t){var n=u.lc();u.Eb(1),u.sc("ngForOf",n.subMenus)}}function Ym(t,e){1&t&&(u.Zb(0,"div",34),u.Ub(1,"mat-spinner",35),u.Yb())}function Zm(t,e){if(1&t&&u.Ub(0,"div",60),2&t){var n=u.lc(3);u.sc("innerHTML",n.translate.instant("lang.limitDataReached_1000"),u.Ic)}}function _m(t,e){1&t&&u.Ub(0,"mat-progress-bar",61)}function km(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-header-cell",68),u.Zb(1,"mat-checkbox",69),u.hc("change",(function(t){u.Hc(n);var e=u.lc(4);return t?e.masterToggle(t):null})),u.Yb(),u.Yb()}if(2&t){var a=u.lc(4);u.Eb(1),u.sc("checked",a.selection.hasValue())}}function wm(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-cell",68),u.Zb(1,"mat-checkbox",70),u.hc("click",(function(t){return u.Hc(n),t.stopPropagation()}))("change",(function(t){u.Hc(n);var a=e.$implicit,i=u.lc(4);return t?i.selection.toggle(a.id):null})),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit,i=u.lc(4);u.Eb(1),u.uc("id","check_",a.id,""),u.sc("disabled",i.isInGrp(a))("checked",i.selection.isSelected(a.id))}}function Om(t,e){1&t&&(u.Zb(0,"mat-header-cell",71),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc("",u.nc(2,1,"lang.contact")," "))}function Tm(t,e){if(1&t&&(u.Zb(0,"mat-cell",71),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.contact," ")}}function Im(t,e){1&t&&(u.Zb(0,"mat-header-cell",71),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc("",u.nc(2,1,"lang.address")," "))}function Dm(t,e){if(1&t&&(u.Zb(0,"mat-cell",71),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.address," ")}}function Um(t,e){1&t&&u.Ub(0,"mat-header-row")}var Pm=function(t){return{opacity:t}};function Fm(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-row",72),u.hc("click",(function(){u.Hc(n);var t=e.$implicit;return u.lc(4).selectContact(t.id)})),u.Yb()}if(2&t){var a=e.$implicit,i=u.lc(4);u.sc("ngStyle",u.zc(1,Pm,i.isInGrp(a)?"0.5":""))}}function Lm(t,e){if(1&t&&(u.Zb(0,"mat-table",62,63),u.Xb(2,64),u.Qc(3,km,2,1,"mat-header-cell",26),u.Qc(4,wm,2,3,"mat-cell",65),u.Wb(),u.Xb(5,21),u.Qc(6,Om,3,3,"mat-header-cell",66),u.Qc(7,Tm,2,1,"mat-cell",23),u.Wb(),u.Xb(8,24),u.Qc(9,Im,3,3,"mat-header-cell",66),u.Qc(10,Dm,2,1,"mat-cell",23),u.Wb(),u.Qc(11,Um,1,0,"mat-header-row",28),u.Qc(12,Fm,1,3,"mat-row",67),u.Yb()),2&t){var n=u.lc(3);u.sc("dataSource",n.dataSource),u.Eb(11),u.sc("matHeaderRowDef",n.displayedColumns),u.Eb(1),u.sc("matRowDefColumns",n.displayedColumns)}}function jm(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-tab",37),u.mc(1,"translate"),u.Zb(2,"div",14),u.Zb(3,"div",49),u.Zb(4,"mat-form-field",50),u.Zb(5,"span",51),u.Ub(6,"mat-icon",52),u.Sc(7,"\xa0\xa0 "),u.Yb(),u.Zb(8,"input",53),u.hc("keyup",(function(){return u.Hc(n),u.lc(2).launchLoading()})),u.mc(9,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(10,"div",15),u.Qc(11,Zm,1,1,"div",54),u.Yb(),u.Zb(12,"div",15),u.Ub(13,"mat-paginator",17,55),u.Yb(),u.Yb(),u.Qc(15,_m,1,0,"mat-progress-bar",56),u.Qc(16,Lm,13,3,"mat-table",57),u.Zb(17,"div",40),u.Zb(18,"div",58),u.Zb(19,"button",59),u.hc("click",(function(t){return u.Hc(n),u.lc(2).saveContactsList(t.target)})),u.Sc(20),u.mc(21,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.tc("label",u.nc(1,11,"lang.addContacts")),u.Eb(8),u.tc("placeholder",u.nc(9,13,"lang.linkContact")),u.sc("formControl",a.searchTerm),u.Eb(3),u.sc("ngIf",a.dataSource&&1e3==a.dataSource.data.length),u.Eb(2),u.sc("length",0)("hidePageSize",!0)("pageSize",10),u.Eb(2),u.sc("ngIf",!a.dataSource&&!a.initAutoCompleteContact),u.Eb(1),u.sc("ngIf",a.dataSource),u.Eb(3),u.sc("disabled",0==a.selection.selected.length),u.Eb(1),u.Tc(u.nc(21,15,"lang.add"))}}function Rm(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-card",36),u.Zb(1,"mat-tab-group"),u.Zb(2,"mat-tab",37),u.mc(3,"translate"),u.Zb(4,"form",38,39),u.hc("ngSubmit",(function(){return u.Hc(n),u.lc().onSubmit()})),u.Zb(6,"div",40),u.Zb(7,"div",41),u.Zb(8,"mat-form-field"),u.Zb(9,"input",42),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().contactsGroup.label=t})),u.mc(10,"translate"),u.mc(11,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(12,"div",40),u.Zb(13,"div",41),u.Zb(14,"mat-form-field"),u.Zb(15,"input",43),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().contactsGroup.description=t})),u.mc(16,"translate"),u.mc(17,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(18,"div",40),u.Zb(19,"div",44),u.Zb(20,"mat-slide-toggle",45),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().contactsGroup.public=t})),u.mc(21,"translate"),u.Sc(22),u.mc(23,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(24,"div",40),u.Zb(25,"div",46),u.Zb(26,"button",47),u.Sc(27),u.mc(28,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Qc(29,jm,22,17,"mat-tab",48),u.Yb(),u.Yb()}if(2&t){var a=u.Dc(5),i=u.lc();u.Eb(2),u.tc("label",u.nc(3,14,"lang.informations")),u.Eb(7),u.tc("title",u.nc(10,16,"lang.label")),u.tc("placeholder",u.nc(11,18,"lang.label")),u.sc("ngModel",i.contactsGroup.label),u.Eb(6),u.tc("title",u.nc(16,20,"lang.description")),u.tc("placeholder",u.nc(17,22,"lang.description")),u.sc("ngModel",i.contactsGroup.description),u.Eb(5),u.tc("title",u.nc(21,24,"lang.contactsGroupDesc")),u.sc("ngModel",i.contactsGroup.public)("checked",i.contactsGroup.public),u.Eb(2),u.Tc(u.nc(23,26,"lang.public")),u.Eb(4),u.sc("disabled",!a.form.valid),u.Eb(1),u.Tc(u.nc(28,28,"lang.save")),u.Eb(2),u.sc("ngIf",!i.creationMode)}}function Qm(t,e){1&t&&(u.Zb(0,"mat-header-cell",73),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc("",u.nc(2,1,"lang.contact")," "))}function Am(t,e){if(1&t&&(u.Zb(0,"mat-cell",71),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.contact," ")}}function Hm(t,e){1&t&&(u.Zb(0,"mat-header-cell",73),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc("",u.nc(2,1,"lang.address")," "))}function zm(t,e){if(1&t&&(u.Zb(0,"mat-cell",71),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.address," ")}}function $m(t,e){1&t&&u.Ub(0,"mat-header-cell",68)}function Vm(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-cell",74),u.Zb(1,"button",75),u.hc("click",(function(t){u.Hc(n);var a=e.$implicit,i=u.lc();return t.stopPropagation(),i.preDelete(a.position)})),u.mc(2,"translate"),u.Ub(3,"mat-icon",76),u.Yb(),u.Yb()}2&t&&(u.Eb(1),u.tc("matTooltip",u.nc(2,1,"lang.delete")))}function Nm(t,e){1&t&&u.Ub(0,"mat-header-row")}function Jm(t,e){1&t&&u.Ub(0,"mat-row")}var Gm,Bm=((Gm=function(){function t(e,n,a,i,r,c,s,l){var d=this;_classCallCheck(this,t),this.translate=e,this.http=n,this.route=a,this.router=i,this.notify=r,this.headerService=c,this.appService=s,this.viewContainerRef=l,this.subMenus=[{icon:"fa fa-book",route:"/administration/contacts/list",label:this.translate.instant("lang.contactsList"),current:!1},{icon:"fa fa-code",route:"/administration/contacts/contactsCustomFields",label:this.translate.instant("lang.customFieldsAdmin"),current:!1},{icon:"fa fa-cog",route:"/administration/contacts/contacts-parameters",label:this.translate.instant("lang.contactsParameters"),current:!1},{icon:"fa fa-users",route:"/administration/contacts/contacts-groups",label:this.translate.instant("lang.contactsGroups"),current:!1},{icon:"fas fa-magic",route:"/administration/contacts/duplicates",label:this.translate.instant("lang.duplicatesContactsAdmin"),current:!1}],this.contactsGroup={},this.loading=!1,this.initAutoCompleteContact=!0,this.searchTerm=new o.h,this.searchResult=[],this.displayedColumns=["select","contact","address"],this.displayedColumnsAdded=["contact","address","actions"],this.selection=new Te.c(!0,[]),this.searchTerm.valueChanges.pipe(Object(Ql.a)(500),Object(q.a)((function(t){return t.length>2})),Object(gm.a)(),Object(tu.a)((function(t){return d.http.get("../rest/autocomplete/contacts",{params:{search:t}})}))).subscribe((function(t){d.searchResult=t,d.dataSource=new B.o(d.searchResult),d.dataSource.paginator=d.paginator}))}return _createClass(t,[{key:"masterToggle",value:function(t){var e=this;t.checked?this.dataSource.data.forEach((function(t){$("#check_"+t.id+"-input").is(":disabled")||e.selection.select(t.id)})):this.selection.clear()}},{key:"applyFilter",value:function(t){t=(t=t.trim()).toLowerCase(),this.dataSourceAdded.filter=t}},{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.route.params.subscribe((function(e){void 0===e.id?(t.headerService.setHeader(t.translate.instant("lang.contactGroupCreation")),t.creationMode=!0,t.contactsGroup.public=!1,t.loading=!1):(t.creationMode=!1,t.http.get("../rest/contactsGroups/"+e.id).subscribe((function(e){t.contactsGroup=e.contactsGroup,t.headerService.setHeader(t.translate.instant("lang.contactsGroupModification"),t.contactsGroup.label),t.nbContact=t.contactsGroup.nbContacts,setTimeout((function(){t.dataSourceAdded=new B.o(t.contactsGroup.contacts),t.dataSourceAdded.paginator=t.paginatorAdded,t.dataSourceAdded.sort=t.sortAdded}),0),t.loading=!1})))}))}},{key:"saveContactsList",value:function(t){var e=this;t.textContent=this.translate.instant("lang.loading")+"...",t.disabled=!0,this.http.post("../rest/contactsGroups/"+this.contactsGroup.id+"/contacts",{contacts:this.selection.selected}).subscribe((function(n){e.notify.success(e.translate.instant("lang.contactAdded")),e.nbContact=e.nbContact+e.selection.selected.length,e.selection.clear(),t.textContent=e.translate.instant("lang.add"),e.contactsGroup=n.contactsGroup,setTimeout((function(){e.dataSourceAdded=new B.o(e.contactsGroup.contacts),e.dataSourceAdded.paginator=e.paginatorAdded,e.dataSourceAdded.sort=e.sortAdded}),0)}),(function(t){e.notify.error(t.error.errors)}))}},{key:"onSubmit",value:function(){var t=this;this.creationMode?this.http.post("../rest/contactsGroups",this.contactsGroup).subscribe((function(e){t.router.navigate(["/administration/contacts/contacts-groups/"+e.contactsGroup]),t.notify.success(t.translate.instant("lang.contactsGroupAdded"))}),(function(e){t.notify.error(e.error.errors)})):this.http.put("../rest/contactsGroups/"+this.contactsGroup.id,this.contactsGroup).subscribe((function(){t.router.navigate(["/administration/contacts-groups"]),t.notify.success(t.translate.instant("lang.contactsGroupUpdated"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"preDelete",value:function(t){confirm(this.translate.instant("lang.reallyWantToDeleteContactFromGroup"))&&this.removeContact(this.contactsGroup.contacts[t],t)}},{key:"removeContact",value:function(t,e){var n=this;this.http.delete("../rest/contactsGroups/"+this.contactsGroup.id+"/contacts/"+t.id).subscribe((function(){var t=n.contactsGroup.contacts.length-1;n.contactsGroup.contacts[e]=n.contactsGroup.contacts[t],n.contactsGroup.contacts[e].position=e,n.contactsGroup.contacts.splice(t,1),n.nbContact=n.nbContact-1,n.dataSourceAdded=new B.o(n.contactsGroup.contacts),n.dataSourceAdded.paginator=n.paginatorAdded,n.dataSourceAdded.sort=n.sortAdded,n.notify.success(n.translate.instant("lang.contactDeletedFromGroup"))}),(function(t){n.notify.error(t.error.errors)}))}},{key:"launchLoading",value:function(){this.searchTerm.value.length>2&&(this.dataSource=null,this.initAutoCompleteContact=!1)}},{key:"isInGrp",value:function(t){var e=!1;return this.contactsGroup.contacts.forEach((function(n){n.id==t.id&&(e=!0)})),e}},{key:"selectContact",value:function(t){$("#check_"+t+"-input").is(":disabled")||this.selection.toggle(t)}}]),t}()).\u0275fac=function(t){return new(t||Gm)(u.Tb(m.e),u.Tb(f.b),u.Tb(r.a),u.Tb(r.c),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a),u.Tb(u.R))},Gm.\u0275cmp=u.Nb({type:Gm,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(vm,!0),u.Oc(ym,!0),u.Oc(Cm,!0),u.Oc(Em,!0),u.Oc(Sm,!0)),2&t&&(u.Cc(n=u.ic())&&(e.sidenavRight=n.first),u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.paginator=n.first),u.Cc(n=u.ic())&&(e.paginatorAdded=n.first),u.Cc(n=u.ic())&&(e.sortAdded=n.first))},decls:42,vars:24,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["position","end",2,"overflow-x","hidden","width","40%",3,"mode","fixedInViewport","opened"],["snav2",""],["mat-subheader",""],[1,"row",2,"margin","0px"],[1,"col-md-6","col-xs-6"],["matInput","",3,"placeholder","keyup"],[3,"length","hidePageSize","pageSize"],["paginatorAdded",""],["matSort","","matSortActive","contact","matSortDirection","asc",3,"dataSource"],["tableAdded","matSort"],["matColumnDef","contact"],["mat-sort-header","","style","flex:3;",4,"matHeaderCellDef"],["style","flex:3;",4,"matCellDef"],["matColumnDef","address"],["matColumnDef","actions"],["style","flex:1;",4,"matHeaderCellDef"],["style","justify-content: flex-end;flex:1;",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[3,"label"],[1,"form-horizontal",3,"ngSubmit"],["contactsGroupFormUp","ngForm"],[1,"form-group"],[1,"col-sm-12"],["matInput","","required","","name","label","id","label","type","text","maxlength","32",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","required","","name","description","id","description","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],[1,"col-sm-6",2,"text-align","center"],["name","public","id","public","color","primary",3,"title","ngModel","checked","ngModelChange"],[1,"col-sm-12",2,"text-align","center"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[3,"label",4,"ngIf"],[1,"col-md-8",2,"padding","5px"],["hintLabel","3 caract\xe8res minium"],["matPrefix",""],["color","primary",1,"fa","fa-user-plus"],["type","text","matInput","","autocomplete","off","minlength","3",1,"autocompleteSearch",3,"placeholder","formControl","keyup"],["class","alert alert-danger",3,"innerHTML",4,"ngIf"],["paginatorContactList",""],["mode","indeterminate",4,"ngIf"],[3,"dataSource",4,"ngIf"],[1,"col-sm-12",2,"text-align","center","margin-top","30px"],["mat-raised-button","","color","primary","type","button",3,"disabled","click"],[1,"alert","alert-danger",3,"innerHTML"],["mode","indeterminate"],[3,"dataSource"],["tableContactList",""],["matColumnDef","select"],["style","flex:1;",4,"matCellDef"],["style","flex:3;",4,"matHeaderCellDef"],["style","cursor: pointer;",3,"ngStyle","click",4,"matRowDef","matRowDefColumns"],[2,"flex","1"],["color","primary",3,"checked","change"],["color","primary",3,"id","disabled","checked","click","change"],[2,"flex","3"],[2,"cursor","pointer",3,"ngStyle","click"],["mat-sort-header","",2,"flex","3"],[2,"justify-content","flex-end","flex","1"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,xm,2,1,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,Ym,2,0,"div",9),u.Qc(14,Rm,30,30,"mat-card",10),u.Yb(),u.Yb(),u.Yb(),u.Zb(15,"mat-sidenav",11,12),u.Zb(17,"mat-list"),u.Zb(18,"h3",13),u.Sc(19),u.mc(20,"translate"),u.Yb(),u.Yb(),u.Zb(21,"div",14),u.Zb(22,"div",15),u.Zb(23,"mat-form-field"),u.Zb(24,"input",16),u.hc("keyup",(function(t){return e.applyFilter(t.target.value)})),u.mc(25,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(26,"div",15),u.Ub(27,"mat-paginator",17,18),u.Yb(),u.Yb(),u.Zb(29,"mat-table",19,20),u.Xb(31,21),u.Qc(32,Qm,3,3,"mat-header-cell",22),u.Qc(33,Am,2,1,"mat-cell",23),u.Wb(),u.Xb(34,24),u.Qc(35,Hm,3,3,"mat-header-cell",22),u.Qc(36,zm,2,1,"mat-cell",23),u.Wb(),u.Xb(37,25),u.Qc(38,$m,1,0,"mat-header-cell",26),u.Qc(39,Vm,4,3,"mat-cell",27),u.Wb(),u.Qc(40,Nm,1,0,"mat-header-row",28),u.Qc(41,Jm,1,0,"mat-row",29),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading),u.Eb(1),u.sc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!e.appService.getViewMode()&&!e.creationMode),u.Eb(4),u.Vc("",e.nbContact," ",u.nc(20,20,"lang.relatedContacts")," : "),u.Eb(5),u.tc("placeholder",u.nc(25,22,"lang.filterBy")),u.Eb(3),u.sc("length",0)("hidePageSize",!0)("pageSize",10),u.Eb(2),u.sc("dataSource",e.dataSourceAdded),u.Eb(11),u.sc("matHeaderRowDef",e.displayedColumnsAdded),u.Eb(1),u.sc("matRowDefColumns",e.displayedColumnsAdded))},directives:[S.e,S.f,M.a,Y.a,Z.t,S.d,Dt.a,Dt.g,k.c,w.b,V.a,B.n,N.a,B.c,B.i,B.b,B.k,B.m,Dt.h,Z.s,Dt.d,r.f,Ut.a,Dt.c,I.k,O.c,T.a,Re.c,Re.a,o.J,o.u,o.v,o.c,o.E,o.o,o.t,o.w,nt.a,D.b,k.i,o.p,o.i,hm.a,B.h,He.a,B.a,B.j,B.l,Z.w,N.b,Ft.b],pipes:[m.d],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}"]}),Gm),Wm=n("5RNC"),qm=["adminMenuTemplate"];function Xm(t,e){1&t&&(u.Zb(0,"span"),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.disabledContactsFilling")))}function Km(t,e){1&t&&(u.Zb(0,"span"),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.enabledContactsFilling")))}function tf(t,e){if(1&t&&(u.Zb(0,"a",18),u.Ub(1,"mat-icon",13),u.Zb(2,"p",19),u.Sc(3),u.Yb(),u.Yb()),2&t){var n=e.$implicit;u.Jb("active",n.current),u.sc("routerLink",n.route),u.Eb(1),u.Gb(n.icon),u.Eb(2),u.Uc(" ",n.label," ")}}var ef=function(t){return{opacity:t}};function nf(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-nav-list"),u.Zb(1,"h3",11),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"a",12),u.Zb(5,"mat-icon",13),u.Zb(6,"mat-slide-toggle",14),u.hc("change",(function(){return u.Hc(n),u.lc().toggleFillingContact()})),u.Yb(),u.Yb(),u.Zb(7,"p",15),u.hc("click",(function(){return u.Hc(n),u.lc().toggleFillingContact()})),u.Qc(8,Xm,3,3,"span",16),u.Qc(9,Km,3,3,"span",16),u.Yb(),u.Yb(),u.Yb(),u.Ub(10,"mat-divider"),u.Zb(11,"mat-nav-list"),u.Qc(12,tf,4,6,"a",17),u.Yb()}if(2&t){var a=u.lc();u.Eb(2),u.Tc(u.nc(3,6,"lang.actions")),u.Eb(4),u.sc("checked",a.contactsFilling.enable),u.Eb(1),u.sc("ngStyle",u.zc(8,ef,a.contactsFilling.enable?"":"0.5")),u.Eb(1),u.sc("ngIf",a.contactsFilling.enable),u.Eb(1),u.sc("ngIf",!a.contactsFilling.enable),u.Eb(3),u.sc("ngForOf",a.subMenus)}}function af(t,e){1&t&&(u.Zb(0,"div",20),u.Ub(1,"mat-spinner",21),u.Yb())}function rf(t,e){1&t&&(u.Zb(0,"mat-header-cell",42),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.label")))}function cf(t,e){if(1&t&&(u.Zb(0,"div"),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=u.lc().$implicit;u.Eb(1),u.Tc(u.nc(2,1,"lang.contactsParameters_"+n.identifier))}}function of(t,e){if(1&t&&(u.Zb(0,"div"),u.Sc(1),u.Yb()),2&t){var n=u.lc().$implicit;u.Eb(1),u.Tc(n.label)}}function sf(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Qc(1,cf,3,3,"div",16),u.Qc(2,of,2,1,"div",16),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.sc("ngIf",!n.label),u.Eb(1),u.sc("ngIf",n.label)}}function lf(t,e){1&t&&(u.Zb(0,"mat-header-cell",42),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.mandatory")))}function df(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-cell"),u.Zb(1,"mat-slide-toggle",43),u.hc("change",(function(t){u.Hc(n);var a=e.$implicit;return u.lc(2).addCriteria(t,a,"mandatory")})),u.mc(2,"translate"),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit;u.Eb(1),u.tc("title",u.nc(2,3,"lang.mandatory")),u.sc("disabled","lastname"==a.identifier||"company"==a.identifier)("checked",a.mandatory)}}function bf(t,e){1&t&&(u.Zb(0,"mat-header-cell",42),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc("",u.nc(2,1,"lang.contactsFillingCriteria")," "))}function uf(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-cell"),u.Zb(1,"mat-slide-toggle",44),u.hc("change",(function(t){u.Hc(n);var a=e.$implicit;return u.lc(2).addCriteria(t,a,"filling")})),u.mc(2,"translate"),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit;u.Eb(1),u.tc("title",u.nc(2,2,"lang.contactsFillingCriteria")),u.sc("checked",a.filling)}}function mf(t,e){1&t&&(u.Zb(0,"mat-header-cell",42),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc("",u.nc(2,1,"lang.autocompletionSearchable")," "))}function ff(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-cell"),u.Zb(1,"mat-slide-toggle",43),u.hc("change",(function(t){u.Hc(n);var a=e.$implicit;return u.lc(2).addCriteria(t,a,"searchable")})),u.mc(2,"translate"),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit;u.Eb(1),u.tc("title",u.nc(2,3,"lang.autocompletionSearchable")),u.sc("disabled","lastname"==a.identifier||"company"==a.identifier||"civility"==a.identifier)("checked",a.searchable)}}function pf(t,e){1&t&&(u.Zb(0,"mat-header-cell",42),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc("",u.nc(2,1,"lang.autocompletionDisplayable")," "))}function gf(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-cell"),u.Zb(1,"mat-slide-toggle",43),u.hc("change",(function(t){u.Hc(n);var a=e.$implicit;return u.lc(2).addCriteria(t,a,"displayable")})),u.mc(2,"translate"),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit;u.Eb(1),u.tc("title",u.nc(2,3,"lang.autocompletionDisplayable")),u.sc("disabled","lastname"==a.identifier||"company"==a.identifier)("checked",a.displayable)}}function hf(t,e){1&t&&u.Ub(0,"mat-header-row")}function vf(t,e){1&t&&u.Ub(0,"mat-row")}var yf=function(t){return{color:t}};function Cf(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-card",22),u.Zb(1,"div",23),u.Zb(2,"div",24),u.Zb(3,"mat-card",25),u.Zb(4,"mat-card-header"),u.Zb(5,"mat-card-title"),u.Sc(6),u.mc(7,"translate"),u.Yb(),u.Yb(),u.Zb(8,"p"),u.Sc(9),u.mc(10,"translate"),u.Zb(11,"b",26),u.Sc(12,"0%"),u.Yb(),u.Sc(13),u.mc(14,"translate"),u.Zb(15,"b",26),u.Sc(16),u.Yb(),u.Sc(17),u.mc(18,"translate"),u.Yb(),u.Zb(19,"mat-slider",27),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().contactsFilling.first_threshold=t}))("change",(function(){return u.Hc(n),u.lc().onSubmit()})),u.Yb(),u.Ub(20,"input",28),u.Yb(),u.Yb(),u.Zb(21,"div",24),u.Zb(22,"mat-card",25),u.Zb(23,"mat-card-header"),u.Zb(24,"mat-card-title"),u.Sc(25),u.mc(26,"translate"),u.Yb(),u.Yb(),u.Zb(27,"p"),u.Sc(28),u.mc(29,"translate"),u.Zb(30,"b",26),u.Sc(31),u.Yb(),u.Sc(32),u.mc(33,"translate"),u.Zb(34,"b",26),u.Sc(35),u.Yb(),u.Sc(36),u.mc(37,"translate"),u.Yb(),u.Zb(38,"mat-slider",29),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().contactsFilling.second_threshold=t}))("change",(function(){return u.Hc(n),u.lc().onSubmit()})),u.Yb(),u.Ub(39,"input",28),u.Yb(),u.Yb(),u.Zb(40,"div",24),u.Zb(41,"mat-card",25),u.Zb(42,"mat-card-header"),u.Zb(43,"mat-card-title"),u.Sc(44),u.mc(45,"translate"),u.Yb(),u.Yb(),u.Zb(46,"p"),u.Sc(47),u.mc(48,"translate"),u.Zb(49,"b",26),u.Sc(50),u.Yb(),u.Sc(51),u.mc(52,"translate"),u.Zb(53,"b",26),u.Sc(54,"100%"),u.Yb(),u.Sc(55),u.mc(56,"translate"),u.Yb(),u.Ub(57,"mat-slider",30),u.Ub(58,"input",28),u.Yb(),u.Yb(),u.Yb(),u.Zb(59,"mat-table",31,32),u.Xb(61,33),u.Qc(62,rf,3,3,"mat-header-cell",34),u.Qc(63,sf,3,2,"mat-cell",35),u.Wb(),u.Xb(64,36),u.Qc(65,lf,3,3,"mat-header-cell",34),u.Qc(66,df,3,5,"mat-cell",35),u.Wb(),u.Xb(67,37),u.Qc(68,bf,3,3,"mat-header-cell",34),u.Qc(69,uf,3,4,"mat-cell",35),u.Wb(),u.Xb(70,38),u.Qc(71,mf,3,3,"mat-header-cell",34),u.Qc(72,ff,3,5,"mat-cell",35),u.Wb(),u.Xb(73,39),u.Qc(74,pf,3,3,"mat-header-cell",34),u.Qc(75,gf,3,5,"mat-cell",35),u.Wb(),u.Qc(76,hf,1,0,"mat-header-row",40),u.Qc(77,vf,1,0,"mat-row",41),u.Yb(),u.Yb()}if(2&t){var a=u.lc();u.Eb(6),u.Tc(u.nc(7,31,"lang.contactsFillingStep1")),u.Eb(3),u.Uc("",u.nc(10,33,"lang.fromRange")," "),u.Eb(2),u.sc("ngStyle",u.zc(55,yf,a.fillingColor.first_threshold)),u.Eb(2),u.Uc(" ",u.nc(14,35,"lang.toRange")," "),u.Eb(2),u.sc("ngStyle",u.zc(57,yf,a.fillingColor.first_threshold)),u.Eb(1),u.Uc("",a.contactsFilling.first_threshold,"%"),u.Eb(1),u.Uc(" ",u.nc(18,37,"lang.contactsFillingStr"),""),u.Eb(2),u.sc("ngModel",a.contactsFilling.first_threshold),u.Eb(1),u.tc("value",a.fillingColor.first_threshold),u.Eb(5),u.Tc(u.nc(26,39,"lang.contactsFillingStep2")),u.Eb(3),u.Uc("",u.nc(29,41,"lang.fromRange")," "),u.Eb(2),u.sc("ngStyle",u.zc(59,yf,a.fillingColor.second_threshold)),u.Eb(1),u.Uc("",a.contactsFilling.first_threshold+1,"%"),u.Eb(1),u.Uc(" ",u.nc(33,43,"lang.toRange")," "),u.Eb(2),u.sc("ngStyle",u.zc(61,yf,a.fillingColor.second_threshold)),u.Eb(1),u.Uc("",a.contactsFilling.second_threshold,"%"),u.Eb(1),u.Uc(" ",u.nc(37,45,"lang.contactsFillingStr"),""),u.Eb(2),u.sc("ngModel",a.contactsFilling.second_threshold)("min",a.contactsFilling.first_threshold+1),u.Eb(1),u.tc("value",a.fillingColor.second_threshold),u.Eb(5),u.Tc(u.nc(45,47,"lang.contactsFillingStep3")),u.Eb(3),u.Uc("",u.nc(48,49,"lang.fromRange")," "),u.Eb(2),u.sc("ngStyle",u.zc(63,yf,a.fillingColor.third_threshold)),u.Eb(1),u.Uc("",a.contactsFilling.second_threshold+1,"%"),u.Eb(1),u.Uc(" ",u.nc(52,51,"lang.toRange")," "),u.Eb(2),u.sc("ngStyle",u.zc(65,yf,a.fillingColor.third_threshold)),u.Eb(2),u.Uc(" ",u.nc(56,53,"lang.contactsFillingStr"),""),u.Eb(3),u.tc("value",a.fillingColor.third_threshold),u.Eb(1),u.sc("dataSource",a.dataSource),u.Eb(17),u.sc("matHeaderRowDef",a.displayedColumns),u.Eb(1),u.sc("matRowDefColumns",a.displayedColumns)}}var Ef,Sf=((Ef=function(){function t(e,n,a,i,r,c){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.headerService=i,this.appService=r,this.viewContainerRef=c,this.subMenus=[{icon:"fa fa-book",route:"/administration/contacts/list",label:this.translate.instant("lang.contactsList"),current:!1},{icon:"fa fa-code",route:"/administration/contacts/contactsCustomFields",label:this.translate.instant("lang.customFieldsAdmin"),current:!1},{icon:"fa fa-cog",route:"/administration/contacts/contacts-parameters",label:this.translate.instant("lang.contactsParameters"),current:!0},{icon:"fa fa-users",route:"/administration/contacts/contacts-groups",label:this.translate.instant("lang.contactsGroups"),current:!1},{icon:"fas fa-magic",route:"/administration/contacts/duplicates",label:this.translate.instant("lang.duplicatesContactsAdmin"),current:!1}],this.contactsFilling={enable:!1,first_threshold:"33",second_threshold:"66"},this.contactsParameters=[],this.arrRatingColumns=[],this.fillingColor={first_threshold:"#E81C2B",second_threshold:"#F4891E",third_threshold:"#0AA34F"},this.loading=!1,this.dataSource=new B.o(this.contactsParameters),this.displayedColumns=["identifier","mandatory","filling","searchable","displayable"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.headerService.setHeader(this.translate.instant("lang.contactsParameters")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.http.get("../rest/contactsParameters").subscribe((function(e){t.contactsFilling=e.contactsFilling,t.contactsParameters=e.contactsParameters,t.loading=!1,setTimeout((function(){t.dataSource=new B.o(t.contactsParameters),t.dataSource.paginator=t.paginator,t.dataSource.sort=t.sort}),0)}))}},{key:"addCriteria",value:function(t,e,n){var a=this;this.contactsParameters.forEach((function(i,r){i.id==e.id&&(a.contactsParameters[r][n]=t.checked)})),this.onSubmit()}},{key:"onSubmit",value:function(){var t=this;this.contactsFilling.first_threshold>=this.contactsFilling.second_threshold&&(this.contactsFilling.second_threshold=this.contactsFilling.first_threshold+1),this.http.put("../rest/contactsParameters",{contactsFilling:this.contactsFilling,contactsParameters:this.contactsParameters}).subscribe((function(){t.notify.success(t.translate.instant("lang.parameterUpdated"))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"toggleFillingContact",value:function(){this.contactsFilling.enable=!0!==this.contactsFilling.enable,this.onSubmit()}}]),t}()).\u0275fac=function(t){return new(t||Ef)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a),u.Tb(u.R))},Ef.\u0275cmp=u.Nb({type:Ef,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(qm,!0),u.ad(V.a,!0),u.ad(N.a,!0)),2&t&&(u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.paginator=n.first),u.Cc(n=u.ic())&&(e.sort=n.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","disableRipple","true"],["color","primary","mat-list-icon",""],["color","primary",3,"checked","change"],["mat-line","",3,"ngStyle","click"],[4,"ngIf"],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-4","col-xs-12"],[2,"margin-bottom","5px"],[3,"ngStyle"],["color","primary","max","98","min","1","step","1","thumbLabel","true",2,"width","100%",3,"ngModel","ngModelChange","change"],["disabled","","matInput","","type","color","name","color",3,"value"],["color","primary","max","99","step","1","thumbLabel","true",2,"width","100%",3,"ngModel","min","ngModelChange","change"],["color","primary","max","100","min","100","step","1","thumbLabel","true","disabled","",2,"width","100%"],["matSort","",3,"dataSource"],["table",""],["matColumnDef","identifier"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","mandatory"],["matColumnDef","filling"],["matColumnDef","searchable"],["matColumnDef","displayable"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],["color","primary",2,"margin-left","11px",3,"disabled","title","checked","change"],["color","primary",2,"margin-left","11px",3,"title","checked","change"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,nf,13,10,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,af,2,0,"div",9),u.Qc(14,Cf,78,67,"mat-card",10),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading))},directives:[S.e,S.f,M.a,Y.a,Z.t,Dt.h,Dt.g,Dt.d,Ut.a,Dt.c,nt.a,I.k,Z.w,_.a,Z.s,r.f,O.c,T.a,T.f,T.m,Wm.a,o.t,o.w,w.b,B.n,N.a,B.c,B.i,B.b,B.k,B.m,B.h,N.b,B.a,B.j,B.l],pipes:[m.d],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}"]}),Ef),Mf=["snav2"];function xf(t,e){1&t&&(u.Zb(0,"div",15),u.Ub(1,"mat-spinner",16),u.Sc(2,"\xa0 "),u.Zb(3,"div"),u.Sc(4),u.mc(5,"translate"),u.Yb(),u.Yb()),2&t&&(u.Eb(4),u.Uc(" ",u.nc(5,1,"lang.updateInProgress")," "))}function Yf(t,e){1&t&&(u.Zb(0,"div",17),u.Ub(1,"mat-spinner",18),u.Yb())}function Zf(t,e){1&t&&(u.Zb(0,"div",24),u.Ub(1,"mat-icon",25),u.Zb(2,"span",26),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Ub(5,"mat-icon",27),u.Yb()),2&t&&(u.Eb(3),u.Uc("",u.nc(4,1,"lang.appUpToDate")," !"))}function _f(t,e){if(1&t&&(u.Zb(0,"div",28),u.Ub(1,"mat-icon",29),u.Zb(2,"span",26),u.Sc(3),u.mc(4,"translate"),u.Zb(5,"a",30),u.Sc(6),u.Yb(),u.Yb(),u.Ub(7,"mat-icon",31),u.Yb()),2&t){var n=u.lc(2);u.Eb(3),u.Uc(" ",u.nc(4,3,"lang.newVersionAvailable")," ! "),u.Eb(2),u.uc("href","https://labs.maarch.org/maarch/MaarchCourrier/tags/",n.versions.lastAvailableMinorVersion,"",u.Kc),u.Eb(1),u.Tc(n.versions.lastAvailableMinorVersion)}}function kf(t,e){if(1&t&&u.Ub(0,"div",32),2&t){var n=u.lc(2);u.sc("innerHTML",n.translate.instant("lang.updateWarn")+n.versions.diffOutput.join("<br/>"),u.Ic)}}function wf(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",33),u.Zb(1,"button",34),u.hc("click",(function(){return u.Hc(n),u.lc(2).updateVersionAccess()})),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(1),u.sc("disabled",!a.versions.canUpdate),u.Eb(1),u.Tc(u.nc(3,2,"lang.makeUpdate"))}}function Of(t,e){if(1&t&&(u.Zb(0,"mat-card",19),u.Qc(1,Zf,6,3,"div",20),u.Qc(2,_f,8,5,"div",21),u.Qc(3,kf,1,1,"div",22),u.Qc(4,wf,4,4,"div",23),u.Yb()),2&t){var n=u.lc();u.Eb(1),u.sc("ngIf",null==n.versions.lastAvailableMinorVersion),u.Eb(1),u.sc("ngIf",null!=n.versions.lastAvailableMinorVersion),u.Eb(1),u.sc("ngIf",!n.versions.canUpdate&&null!=n.versions.lastAvailableMinorVersion),u.Eb(1),u.sc("ngIf",null!=n.versions.lastAvailableMinorVersion)}}function Tf(t,e){if(1&t&&(u.Zb(0,"div",35),u.Sc(1," Maarch Courrier\xa0"),u.Zb(2,"a",30),u.Sc(3),u.Yb(),u.Sc(4),u.mc(5,"translate"),u.Yb()),2&t){var n=u.lc();u.Eb(2),u.uc("href","https://labs.maarch.org/maarch/MaarchCourrier/tags/",n.versions.lastAvailableMajorVersion,"",u.Kc),u.Eb(1),u.Tc(n.versions.lastAvailableMajorVersion),u.Eb(1),u.Uc("\xa0",u.nc(5,3,"lang.isAvailable")," ! ")}}var If,Df=((If=function(){function t(e,n,a,i,r,c){_classCallCheck(this,t),this.translate=e,this.http=n,this.headerService=a,this.notify=i,this.dialog=r,this.appService=c,this.loading=!1,this.updateInprogress=!1,this.versions={}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.updateVersionControl")),this.loading=!0,this.http.get("../rest/versionsUpdate").pipe(Object(d.a)((function(e){t.versions=e})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(J.of)(!1)})),Object(d.a)((function(){t.loading=!1}))).subscribe()}},{key:"updateVersionAccess",value:function(){var t=this;this.dialogRef=this.dialog.open(W.a,{panelClass:"maarch-modal",data:{title:this.translate.instant("lang.confirm")+" ?",msg:this.translate.instant("lang.updateInfo")}}),this.dialogRef.afterClosed().pipe(Object(q.a)((function(e){return t.dialogRef=null,"ok"===e?(t.updateInprogress=!0,!0):(t.updateInprogress=!1,!1)})),Object(X.a)((function(){return t.http.put("../rest/versionsUpdate",{})})),Object(d.a)((function(){t.dialogRef=t.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:t.translate.instant("lang.updateOk"),msg:t.translate.instant("lang.saveInDocserversInfo")}})})),Object(X.a)((function(){return t.dialogRef.afterClosed()})),Object(d.a)((function(){t.dialogRef=null,window.location.reload(!0)})),Object(b.a)((function(e){return t.dialogRef=t.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:t.translate.instant("lang.updateKO"),msg:t.translate.instant("lang.saveInDocserversInfo")}}),t.notify.handleErrors(e),Object(J.of)(!1)})),Object(d.a)((function(){t.updateInprogress=!1}))).subscribe()}}]),t}()).\u0275fac=function(t){return new(t||If)(u.Tb(m.e),u.Tb(f.b),u.Tb(p.a),u.Tb(y.a),u.Tb(z.b),u.Tb(g.a))},If.\u0275cmp=u.Nb({type:If,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&u.Oc(Mf,!0),2&t&&u.Cc(n=u.ic())&&(e.sidenavRight=n.first)},decls:24,vars:17,consts:[["class","updateInProgress",4,"ngIf"],["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",2,"overflow-x","hidden",3,"mode","fixedInViewport","opened"],["snav2",""],["class","alert-message alert-message-info","style","display: flex;",4,"ngIf"],["mat-subheader",""],[1,"updateInProgress"],["diameter","30"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],["class","alert alert-info","style","display: flex;",4,"ngIf"],["class","alert alert-success","style","display: flex;",4,"ngIf"],["class","alert-message alert-message-danger",3,"innerHTML",4,"ngIf"],["class","col-sm-12","style","text-align:center;",4,"ngIf"],[1,"alert","alert-info",2,"display","flex"],[1,"fa","fa-check","fa-2x",2,"flex","1","text-align","left"],[2,"flex","1","text-align","center"],[1,"fa","fa-check","fa-2x",2,"flex","1","text-align","right"],[1,"alert","alert-success",2,"display","flex"],[1,"fa","fa-info-circle","fa-2x",2,"flex","1","text-align","left"],["target","_blank",2,"font-weight","bold",3,"href"],[1,"fa","fa-info-circle","fa-2x",2,"flex","1","text-align","right"],[1,"alert-message","alert-message-danger",3,"innerHTML"],[1,"col-sm-12",2,"text-align","center"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"alert-message","alert-message-info",2,"display","flex"]],template:function(t,e){1&t&&(u.Qc(0,xf,6,3,"div",0),u.Zb(1,"mat-sidenav-container",1),u.Zb(2,"mat-sidenav-content"),u.Zb(3,"div",2),u.Zb(4,"div",3),u.Zb(5,"div",4),u.Ub(6,"header-left"),u.Yb(),u.Zb(7,"div",5),u.Ub(8,"header-right"),u.Yb(),u.Yb(),u.Ub(9,"div",6),u.Yb(),u.Zb(10,"div",7),u.Zb(11,"div",8),u.Qc(12,Yf,2,0,"div",9),u.Qc(13,Of,5,4,"mat-card",10),u.Yb(),u.Yb(),u.Yb(),u.Zb(14,"mat-sidenav",11,12),u.Qc(16,Tf,6,5,"div",13),u.Zb(17,"mat-list"),u.Zb(18,"h3",14),u.Sc(19),u.mc(20,"translate"),u.Yb(),u.Zb(21,"mat-list-item"),u.Zb(22,"b"),u.Sc(23),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.sc("ngIf",e.updateInprogress),u.Eb(4),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading),u.Eb(1),u.sc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",null!=e.versions.lastAvailableMajorVersion),u.Eb(3),u.Tc(u.nc(20,15,"lang.currentVersion")),u.Eb(4),u.Tc(e.versions.currentVersion))},directives:[Z.t,S.e,S.f,M.a,Y.a,S.d,Dt.a,Dt.g,Dt.d,O.c,T.a,Ut.a,D.b],pipes:[m.d],styles:[".updateInProgress[_ngcontent-%COMP%]{z-index:2;display:flex;position:fixed;top:0;left:0;width:100%;height:100%;background:hsla(0,0%,100%,.93);justify-content:center;align-items:center}.alert-message-danger[_ngcontent-%COMP%]{width:100%;max-width:100%}"]}),If),Uf=["adminMenuTemplate"];function Pf(t,e){1&t&&(u.Zb(0,"mat-nav-list"),u.Zb(1,"h3",11),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"a",12),u.Ub(5,"mat-icon",13),u.Zb(6,"p",14),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(2),u.Tc(u.nc(3,2,"lang.actions")),u.Eb(5),u.Uc(" ",u.nc(8,4,"lang.add")," "))}function Ff(t,e){1&t&&(u.Zb(0,"div",15),u.Ub(1,"mat-spinner",16),u.Yb())}function Lf(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",42),u.hc("click",(function(){u.Hc(n);var t=u.lc().$implicit;return u.lc(3).toggleDocserver(t)})),u.mc(1,"translate"),u.Ub(2,"mat-icon",43),u.Yb()}2&t&&u.tc("matTooltip",u.nc(1,1,"lang.lockDocserver"))}function jf(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",44),u.hc("click",(function(){u.Hc(n);var t=u.lc().$implicit;return u.lc(3).toggleDocserver(t)})),u.mc(1,"translate"),u.Ub(2,"mat-icon",45),u.Yb()}2&t&&u.tc("matTooltip",u.nc(1,1,"lang.unlockDocserver"))}function Rf(t,e){if(1&t&&u.Ub(0,"mat-progress-spinner",46),2&t){var n=u.lc().$implicit;u.sc("value",n.percentage)}}function Qf(t,e){if(1&t&&u.Ub(0,"mat-progress-spinner",47),2&t){var n=u.lc().$implicit;u.sc("value",n.percentage)}}function Af(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",21),u.Zb(1,"mat-card"),u.Zb(2,"form",22,23),u.hc("ngSubmit",(function(){u.Hc(n);var t=e.$implicit,a=e.index;return u.lc(3).onSubmit(t,a)})),u.Qc(4,Lf,3,3,"button",24),u.Qc(5,jf,3,3,"button",25),u.Zb(6,"div",26),u.Zb(7,"div",27),u.Zb(8,"mat-form-field"),u.Zb(9,"input",28),u.hc("ngModelChange",(function(t){return u.Hc(n),e.$implicit.device_label=t})),u.mc(10,"translate"),u.mc(11,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(12,"div",21),u.Qc(13,Rf,1,1,"mat-progress-spinner",29),u.Qc(14,Qf,1,1,"mat-progress-spinner",30),u.Zb(15,"span",31),u.Sc(16),u.Yb(),u.Yb(),u.Zb(17,"div",32),u.Zb(18,"mat-form-field"),u.Zb(19,"input",33),u.hc("ngModelChange",(function(t){return u.Hc(n),e.$implicit.coll_id=t})),u.mc(20,"translate"),u.mc(21,"translate"),u.Yb(),u.Yb(),u.Zb(22,"mat-form-field"),u.Zb(23,"input",34),u.hc("ngModelChange",(function(t){return u.Hc(n),e.$implicit.docserver_id=t})),u.mc(24,"translate"),u.mc(25,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(26,"div",21),u.Zb(27,"mat-form-field"),u.Zb(28,"input",35),u.hc("ngModelChange",(function(t){return u.Hc(n),e.$implicit.limitSizeFormatted=t})),u.mc(29,"translate"),u.mc(30,"translate"),u.Yb(),u.Zb(31,"span",36),u.Sc(32," Go"),u.Yb(),u.Yb(),u.Yb(),u.Ub(33,"div",32),u.Zb(34,"div",27),u.Zb(35,"mat-form-field"),u.Zb(36,"input",37),u.hc("ngModelChange",(function(t){return u.Hc(n),e.$implicit.path_template=t})),u.mc(37,"translate"),u.mc(38,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(39,"div",38),u.Zb(40,"button",39),u.Sc(41),u.mc(42,"translate"),u.Yb(),u.Zb(43,"button",40),u.hc("click",(function(){u.Hc(n);var t=e.index,a=u.lc().$implicit;return u.lc(2).cancelModification(a.docserver_type_id,t)})),u.Sc(44),u.mc(45,"translate"),u.Yb(),u.Zb(46,"button",41),u.hc("click",(function(){u.Hc(n);var t=e.$implicit,a=e.index;return u.lc(3).delete(t,a)})),u.Sc(47),u.mc(48,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit,i=e.index,r=u.lc().$implicit,c=u.lc(2);u.Eb(4),u.sc("ngIf",!a.is_readonly),u.Eb(1),u.sc("ngIf",a.is_readonly),u.Eb(4),u.tc("title",u.nc(10,29,"lang.label")),u.tc("placeholder",u.nc(11,31,"lang.label")),u.sc("ngModel",a.device_label)("disabled",a.is_readonly),u.Eb(4),u.sc("ngIf",a.percentage<60),u.Eb(1),u.sc("ngIf",a.percentage>=60),u.Eb(1),u.tc("title",a.actualSizeFormatted),u.Eb(1),u.Uc("",a.percentage,"%"),u.Eb(3),u.tc("title",u.nc(20,33,"lang.collection")),u.tc("placeholder",u.nc(21,35,"lang.collection")),u.sc("ngModel",a.coll_id),u.Eb(4),u.tc("title",u.nc(24,37,"lang.id")),u.tc("placeholder",u.nc(25,39,"lang.id")),u.sc("ngModel",a.docserver_id),u.Eb(5),u.tc("title",u.nc(29,41,"lang.maxSize")),u.tc("placeholder",u.nc(30,43,"lang.maxSize")),u.sc("ngModel",a.limitSizeFormatted)("disabled",a.is_readonly),u.Eb(8),u.tc("title",u.nc(37,45,"lang.path")),u.tc("placeholder",u.nc(38,47,"lang.path")),u.sc("ngModel",a.path_template)("disabled",a.is_readonly),u.Eb(4),u.sc("disabled",c.checkModif(a,c.docserversClone[r.docserver_type_id][i])),u.Eb(1),u.Tc(u.nc(42,49,"lang.update")),u.Eb(2),u.sc("disabled",c.checkModif(a,c.docserversClone[r.docserver_type_id][i])),u.Eb(1),u.Tc(u.nc(45,51,"lang.cancel")),u.Eb(3),u.Tc(u.nc(48,53,"lang.delete"))}}function Hf(t,e){if(1&t&&(u.Zb(0,"mat-expansion-panel"),u.Zb(1,"mat-expansion-panel-header"),u.Zb(2,"mat-panel-title"),u.Sc(3),u.Yb(),u.Zb(4,"mat-panel-description"),u.Sc(5),u.Yb(),u.Yb(),u.Zb(6,"div",19),u.Qc(7,Af,49,55,"div",20),u.Yb(),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.Eb(3),u.Uc(" ",n.docserver_type_label," "),u.Eb(2),u.Uc(" ",n.docserver_type_id," "),u.Eb(2),u.sc("ngForOf",a.docservers[n.docserver_type_id])}}function zf(t,e){if(1&t&&(u.Zb(0,"mat-card",17),u.Zb(1,"mat-accordion"),u.Qc(2,Hf,8,3,"mat-expansion-panel",18),u.Yb(),u.Yb()),2&t){var n=u.lc();u.Eb(2),u.sc("ngForOf",n.docserversTypes)}}var $f,Vf=(($f=function(){function t(e,n,a,i,r,c){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.headerService=i,this.appService=r,this.viewContainerRef=c,this.loading=!1,this.docservers=[],this.docserversClone=[],this.docserversTypes={}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.docservers")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/docservers").subscribe((function(e){t.docservers=e.docservers,t.docserversClone=JSON.parse(JSON.stringify(t.docservers)),t.docserversTypes=e.types,t.loading=!1}))}},{key:"toggleDocserver",value:function(t){t.is_readonly=!t.is_readonly}},{key:"cancelModification",value:function(t,e){this.docservers[t][e]=JSON.parse(JSON.stringify(this.docserversClone[t][e]))}},{key:"checkModif",value:function(t,e){return t.size_limit_number=1e9*t.limitSizeFormatted,JSON.stringify(t)===JSON.stringify(e)||!(t.size_limit_number>=t.actual_size_number&&t.limitSizeFormatted>0&&/^[\d]*$/.test(t.limitSizeFormatted))}},{key:"onSubmit",value:function(t,e){var n=this;t.size_limit_number=1e9*t.limitSizeFormatted,this.http.put("../rest/docservers/"+t.id,t).subscribe((function(a){n.docservers[t.docserver_type_id][e]=a.docserver,n.docserversClone[t.docserver_type_id][e]=JSON.parse(JSON.stringify(n.docservers[t.docserver_type_id][e])),n.notify.success(n.translate.instant("lang.docserverUpdated"))}),(function(t){n.notify.error(t.error.errors)}))}},{key:"delete",value:function(t,e){var n=this;(0===t.actual_size_number?confirm(this.translate.instant("lang.delete")+" ?"):confirm(this.translate.instant("lang.docserverdeleteWarning")))&&this.http.delete("../rest/docservers/"+t.id).subscribe((function(){n.docservers[t.docserver_type_id].splice(e,1),n.notify.success(n.translate.instant("lang.docserverDeleted"))}),(function(t){n.notify.error(t.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||$f)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a),u.Tb(u.R))},$f.\u0275cmp=u.Nb({type:$f,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(Uf,!0),u.ad(V.a,!0),u.ad(N.a,!0)),2&t&&(u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.paginator=n.first),u.Cc(n=u.ic())&&(e.sort=n.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/docservers/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[4,"ngFor","ngForOf"],[1,"row"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"form-horizontal",3,"ngSubmit"],["docserverFormUp","ngForm"],["mat-icon-button","","color","accent","style","position: absolute;top: 5px;right:10px;",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","color","warn","style","position: absolute;top: 5px;right:10px;",3,"matTooltip","click",4,"ngIf"],[1,"row",2,"margin-top","10px"],[1,"col-md-12"],["matInput","","required","","name","label","id","label","type","text","maxlength","255",3,"title","placeholder","ngModel","disabled","ngModelChange"],["name","percent_val","id","percent_val","color","primary","mode","determinate","style","margin:auto;",3,"value",4,"ngIf"],["name","percent_val","id","percent_val","color","warn","mode","determinate","style","margin:auto;",3,"value",4,"ngIf"],[2,"position","absolute","font-weight","bold","left","50%","transform","translateX(-50%)","top","40%","font-weight","bold",3,"title"],[1,"col-md-8"],["matInput","","required","","name","collection","id","collection","type","text","disabled","",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","required","","name","identifier","id","identifier","type","text","disabled","",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","required","","name","max_size","id","max_size","type","number",3,"title","placeholder","ngModel","disabled","ngModelChange"],["matSuffix",""],["matInput","","required","","name","path","id","path","type","text",3,"title","placeholder","ngModel","disabled","ngModelChange"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-raised-button","","color","default",3,"disabled","click"],["mat-raised-button","","type","button","color","warn",3,"click"],["mat-icon-button","","color","accent",2,"position","absolute","top","5px","right","10px",3,"matTooltip","click"],[1,"fa","fa-lock-open"],["mat-icon-button","","color","warn",2,"position","absolute","top","5px","right","10px",3,"matTooltip","click"],[1,"fa","fa-lock"],["name","percent_val","id","percent_val","color","primary","mode","determinate",2,"margin","auto",3,"value"],["name","percent_val","id","percent_val","color","warn","mode","determinate",2,"margin","auto",3,"value"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,Pf,9,6,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,Ff,2,0,"div",9),u.Qc(14,zf,3,1,"mat-card",10),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading))},directives:[S.e,S.f,M.a,Y.a,Z.t,Dt.h,Dt.g,Dt.d,r.f,Ut.a,Dt.c,I.k,O.c,T.a,Qe.a,Z.s,Qe.c,Qe.g,Qe.h,Qe.f,o.J,o.u,o.v,k.c,w.b,o.c,o.E,o.o,o.t,o.w,o.z,k.j,D.b,Ft.b,O.a],pipes:[m.d],encapsulation:2}),$f);function Nf(t,e){1&t&&(u.Zb(0,"div",10),u.Ub(1,"mat-spinner",11),u.Yb())}function Jf(t,e){if(1&t&&(u.Zb(0,"mat-option",30),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n.docserver_type_id),u.Eb(1),u.Uc(" ",n.docserver_type_label," ")}}function Gf(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-card",12),u.Zb(1,"form",13,14),u.hc("ngSubmit",(function(){u.Hc(n);var t=u.lc();return t.onSubmit(t.docserver)})),u.Zb(3,"div",15),u.Zb(4,"div",16),u.Zb(5,"mat-form-field"),u.Zb(6,"mat-select",17),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().docserver.docserver_type_id=t})),u.mc(7,"translate"),u.mc(8,"translate"),u.Qc(9,Jf,2,2,"mat-option",18),u.Yb(),u.Yb(),u.Zb(10,"mat-form-field"),u.Zb(11,"input",19),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().docserver.docserver_id=t})),u.mc(12,"translate"),u.mc(13,"translate"),u.Yb(),u.Yb(),u.Zb(14,"mat-form-field"),u.Zb(15,"input",20),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().docserver.device_label=t})),u.mc(16,"translate"),u.mc(17,"translate"),u.Yb(),u.Yb(),u.Zb(18,"mat-form-field"),u.Zb(19,"mat-select",21),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().docserver.coll_id=t})),u.mc(20,"translate"),u.mc(21,"translate"),u.Zb(22,"mat-option",22),u.Sc(23," letterbox_coll "),u.Yb(),u.Zb(24,"mat-option",23),u.Sc(25," attachments_coll "),u.Yb(),u.Zb(26,"mat-option",24),u.Sc(27," archive_transfer_coll "),u.Yb(),u.Yb(),u.Yb(),u.Zb(28,"mat-form-field"),u.Zb(29,"input",25),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().docserver.limitSizeFormatted=t})),u.mc(30,"translate"),u.mc(31,"translate"),u.Yb(),u.Zb(32,"span",26),u.Sc(33," Go"),u.Yb(),u.Yb(),u.Zb(34,"mat-form-field"),u.Zb(35,"input",27),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().docserver.path_template=t})),u.mc(36,"translate"),u.mc(37,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(38,"div",28),u.Zb(39,"button",29),u.Sc(40),u.mc(41,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.Dc(2),i=u.lc();u.Eb(6),u.tc("title",u.nc(7,23,"lang.docserverType")),u.tc("placeholder",u.nc(8,25,"lang.docserverType")),u.sc("ngModel",i.docserver.docserver_type_id),u.Eb(3),u.sc("ngForOf",i.docserversTypes),u.Eb(2),u.tc("title",u.nc(12,27,"lang.id")),u.tc("placeholder",u.nc(13,29,"lang.id")),u.sc("ngModel",i.docserver.docserver_id),u.Eb(4),u.tc("title",u.nc(16,31,"lang.label")),u.tc("placeholder",u.nc(17,33,"lang.label")),u.sc("ngModel",i.docserver.device_label),u.Eb(4),u.tc("title",u.nc(20,35,"lang.collection")),u.tc("placeholder",u.nc(21,37,"lang.collection")),u.sc("ngModel",i.docserver.coll_id),u.Eb(10),u.tc("title",u.nc(30,39,"lang.maxSize")),u.tc("placeholder",u.nc(31,41,"lang.maxSize")),u.sc("ngModel",i.docserver.limitSizeFormatted)("disabled",i.docserver.is_readonly),u.Eb(6),u.tc("title",u.nc(36,43,"lang.path")),u.tc("placeholder",u.nc(37,45,"lang.path")),u.sc("ngModel",i.docserver.path_template)("disabled",i.docserver.is_readonly),u.Eb(4),u.sc("disabled",!a.form.valid),u.Eb(1),u.Tc(u.nc(41,47,"lang.add"))}}var Bf,Wf=((Bf=function(){function t(e,n,a,i,r,c){_classCallCheck(this,t),this.translate=e,this.http=n,this.router=a,this.notify=i,this.headerService=r,this.appService=c,this.loading=!1,this.docserver={coll_id:"letterbox_coll",docserver_type_id:"DOC",limitSizeFormatted:"50"},this.docserversTypes=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.docserverCreation")),this.loading=!0,this.http.get("../rest/docserverTypes").subscribe((function(e){t.docserversTypes=e.docserverTypes,t.loading=!1}))}},{key:"onSubmit",value:function(t){var e=this;t.size_limit_number=1e9*t.limitSizeFormatted,this.http.post("../rest/docservers",t).subscribe((function(t){e.notify.success(e.translate.instant("lang.docserverAdded")),e.router.navigate(["/administration/docservers/"])}),(function(t){e.notify.error(t.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||Bf)(u.Tb(m.e),u.Tb(f.b),u.Tb(r.c),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a))},Bf.\u0275cmp=u.Nb({type:Bf,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.ad(V.a,!0),u.ad(N.a,!0)),2&t&&(u.Cc(n=u.ic())&&(e.paginator=n.first),u.Cc(n=u.ic())&&(e.sort=n.first))},decls:13,vars:8,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"form-horizontal",3,"ngSubmit"],["docserverForm","ngForm"],[1,"row",2,"margin-top","10px"],[1,"col-md-12"],["required","","name","docserver_type","id","docserver_type",3,"title","placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","required","","name","identifier","id","identifier","type","text","maxlength","32","pattern","^[\\w.-]*$",3,"title","placeholder","ngModel","ngModelChange"],["matInput","","required","","name","label","id","label","type","text","maxlength","255",3,"title","placeholder","ngModel","ngModelChange"],["required","","name","collection","id","collection",3,"title","placeholder","ngModel","ngModelChange"],["value","letterbox_coll","selected",""],["value","attachments_coll"],["value","archive_transfer_coll"],["matInput","","required","","name","max_size","id","max_size","type","number","pattern","^\\d+$",3,"title","placeholder","ngModel","disabled","ngModelChange"],["matSuffix",""],["matInput","","required","","name","path","id","path","type","text",3,"title","placeholder","ngModel","disabled","ngModelChange"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[3,"value"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Zb(1,"mat-sidenav-content"),u.Zb(2,"div",1),u.Zb(3,"div",2),u.Zb(4,"div",3),u.Ub(5,"header-left"),u.Yb(),u.Zb(6,"div",4),u.Ub(7,"header-right"),u.Yb(),u.Yb(),u.Ub(8,"div",5),u.Yb(),u.Zb(9,"div",6),u.Zb(10,"div",7),u.Qc(11,Nf,2,0,"div",8),u.Qc(12,Gf,42,49,"mat-card",9),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(3),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading))},directives:[S.e,S.f,M.a,Y.a,Z.t,O.c,T.a,o.J,o.u,o.v,k.c,it.a,o.E,o.t,o.w,Z.s,w.b,o.c,o.o,o.A,I.o,o.z,k.j,D.b],pipes:[m.d],encapsulation:2}),Bf),qf=["adminMenuTemplate"];function Xf(t,e){1&t&&(u.Zb(0,"mat-nav-list"),u.Zb(1,"h3",11),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"a",12),u.Ub(5,"mat-icon",13),u.Zb(6,"p",14),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(2),u.Tc(u.nc(3,2,"lang.actions")),u.Eb(5),u.Uc(" ",u.nc(8,4,"lang.add")," "))}function Kf(t,e){1&t&&(u.Zb(0,"div",15),u.Ub(1,"mat-spinner",16),u.Yb())}function tp(t,e){1&t&&(u.Zb(0,"mat-header-cell",44),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc("",u.nc(2,1,"lang.technicalId")," "))}function ep(t,e){if(1&t&&(u.Zb(0,"mat-cell",45),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.template_id," ")}}function np(t,e){1&t&&(u.Zb(0,"mat-header-cell",46),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc("",u.nc(2,1,"lang.templateName")," "))}function ap(t,e){if(1&t&&(u.Zb(0,"mat-cell",47),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.template_label," ")}}function ip(t,e){if(1&t&&(u.Zb(0,"mat-header-cell",46),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=u.lc(2);u.Jb("hide-for-mobile",n.appService.getViewMode()),u.Eb(1),u.Uc("",u.nc(2,3,"lang.description")," ")}}function rp(t,e){if(1&t&&(u.Zb(0,"mat-cell",47),u.Sc(1),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.Jb("hide-for-mobile",a.appService.getViewMode()),u.Eb(1),u.Uc(" ",n.template_comment," ")}}function cp(t,e){if(1&t&&(u.Zb(0,"mat-header-cell",44),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=u.lc(2);u.Jb("hide-for-mobile",n.appService.getViewMode()),u.Eb(1),u.Uc(" ",u.nc(2,3,"lang.templateTarget"),"")}}function op(t,e){if(1&t&&(u.Zb(0,"mat-cell",45),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.Jb("hide-for-mobile",a.appService.getViewMode()),u.Eb(1),u.Uc(" ",u.nc(2,3,"lang."+n.template_target)," ")}}function sp(t,e){if(1&t&&(u.Zb(0,"mat-header-cell",44),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=u.lc(2);u.Jb("hide-for-mobile",n.appService.getViewMode()),u.Eb(1),u.Uc("",u.nc(2,3,"lang.templateType")," ")}}function lp(t,e){if(1&t&&(u.Zb(0,"mat-cell",45),u.Sc(1),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.Jb("hide-for-mobile",a.appService.getViewMode()),u.Eb(1),u.Uc(" ",n.template_type," ")}}function dp(t,e){1&t&&u.Ub(0,"mat-header-cell")}function bp(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-cell",48),u.Zb(1,"button",49),u.hc("click",(function(t){u.Hc(n);var a=e.$implicit,i=u.lc(2);return t.stopPropagation(),i.deleteTemplate(a)})),u.mc(2,"translate"),u.Ub(3,"mat-icon",50),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit;u.Eb(1),u.tc("matTooltip",u.nc(2,2,"lang.delete")),u.sc("disabled","Y"==a.is_system)}}function up(t,e){1&t&&u.Ub(0,"mat-header-row")}function mp(t,e){1&t&&(u.Ub(0,"mat-row",51),u.mc(1,"translate")),2&t&&(u.uc("routerLink","/administration/templates/",e.$implicit.template_id,""),u.tc("matTooltip",u.nc(1,2,"lang.view")))}function fp(t,e){if(1&t&&(u.Zb(0,"mat-card",17),u.Zb(1,"div",18),u.Zb(2,"div",19),u.Zb(3,"mat-form-field"),u.Ub(4,"input",20),u.mc(5,"translate"),u.Yb(),u.Yb(),u.Zb(6,"div",19),u.Ub(7,"mat-paginator",21,22),u.Yb(),u.Yb(),u.Zb(9,"mat-table",23,24),u.Xb(11,25),u.Qc(12,tp,3,3,"mat-header-cell",26),u.Qc(13,ep,2,1,"mat-cell",27),u.Wb(),u.Xb(14,28),u.Qc(15,np,3,3,"mat-header-cell",29),u.Qc(16,ap,2,1,"mat-cell",30),u.Wb(),u.Xb(17,31),u.Qc(18,ip,3,5,"mat-header-cell",32),u.Qc(19,rp,2,3,"mat-cell",33),u.Wb(),u.Xb(20,34),u.Qc(21,cp,3,5,"mat-header-cell",35),u.Qc(22,op,3,5,"mat-cell",36),u.Wb(),u.Xb(23,37),u.Qc(24,sp,3,5,"mat-header-cell",35),u.Qc(25,lp,2,3,"mat-cell",36),u.Wb(),u.Xb(26,38),u.Qc(27,dp,1,0,"mat-header-cell",39),u.Qc(28,bp,4,4,"mat-cell",40),u.Wb(),u.Qc(29,up,1,0,"mat-header-row",41),u.Qc(30,mp,2,4,"mat-row",42),u.Yb(),u.Zb(31,"div",43),u.Sc(32),u.mc(33,"translate"),u.Yb(),u.Yb()),2&t){var n=u.lc();u.Eb(4),u.tc("placeholder",u.nc(5,10,"lang.filterBy")),u.sc("formControl",n.adminService.getFilterField()),u.Eb(3),u.sc("length",100)("hidePageSize",!0)("pageSize",10),u.Eb(2),u.sc("dataSource",n.adminService.getDataSource()),u.Eb(20),u.sc("matHeaderRowDef",n.displayedColumns),u.Eb(1),u.sc("matRowDefColumns",n.displayedColumns),u.Eb(2),u.Vc(" ",n.templates.length," ",u.nc(33,12,"lang.templates"),"")}}var pp,gp=((pp=function(){function t(e,n,a,i,r,c,o,s){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.headerService=i,this.appService=r,this.functions=c,this.adminService=o,this.viewContainerRef=s,this.search=null,this.templates=[],this.titles=[],this.loading=!1,this.displayedColumns=["template_id","template_label","template_comment","template_type","template_target","actions"],this.filterColumns=["template_label","template_comment","template_type","template_target"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.templates")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/templates").subscribe((function(e){t.templates=e.templates,t.loading=!1,setTimeout((function(){t.adminService.setDataSource("admin_templates",t.templates,t.sort,t.paginator,t.filterColumns)}),0)}),(function(e){t.notify.handleErrors(e)}))}},{key:"deleteTemplate",value:function(t){var e=this;confirm(this.translate.instant("lang.confirmAction")+" "+this.translate.instant("lang.delete")+" \xab "+t.template_label+" \xbb")&&this.http.delete("../rest/templates/"+t.template_id).subscribe((function(){for(var n in e.templates)e.templates[n].template_id===t.template_id&&e.templates.splice(Number(n),1);e.adminService.setDataSource("admin_templates",e.templates,e.sort,e.paginator,e.filterColumns),e.notify.success(e.translate.instant("lang.templateDeleted"))}),(function(t){e.notify.error(t.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||pp)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a),u.Tb(C.a),u.Tb(It),u.Tb(u.R))},pp.\u0275cmp=u.Nb({type:pp,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(qf,!0),u.ad(V.a,!0),u.ad(N.a,!0)),2&t&&(u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.paginator=n.first),u.Cc(n=u.ic())&&(e.sort=n.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/templates/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","template_id"],["mat-sort-header","","style","flex:1;",4,"matHeaderCellDef"],["style","flex:1;",4,"matCellDef"],["matColumnDef","template_label"],["mat-sort-header","","style","flex:2;",4,"matHeaderCellDef"],["style","flex:2;",4,"matCellDef"],["matColumnDef","template_comment"],["mat-sort-header","","style","flex:2;",3,"hide-for-mobile",4,"matHeaderCellDef"],["style","flex:2;",3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","template_target"],["mat-sort-header","","style","flex:1;",3,"hide-for-mobile",4,"matHeaderCellDef"],["style","flex:1;",3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","template_type"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header","",2,"flex","1"],[2,"flex","1"],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"disabled","matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,Xf,9,6,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,Kf,2,0,"div",9),u.Qc(14,fp,34,14,"mat-card",10),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading))},directives:[S.e,S.f,M.a,Y.a,Z.t,Dt.h,Dt.g,Dt.d,r.f,Ut.a,Dt.c,I.k,O.c,T.a,k.c,w.b,o.c,o.t,o.i,V.a,B.n,N.a,B.c,B.i,B.b,B.k,B.m,B.h,N.b,B.a,D.b,Ft.b,B.j,B.l,r.d],pipes:[m.d],encapsulation:2}),pp),hp=n("Dxa7"),vp=n("+AL4"),yp=n("IOqN"),Cp=["onlyofficeViewer"],Ep=["collaboraOnlineViewer"];function Sp(t,e){if(1&t){var n=u.ac();u.Zb(0,"onlyoffice-viewer",8,9),u.hc("triggerAfterUpdatedDoc",(function(){return u.Hc(n),u.lc().close()}))("triggerCloseEditor",(function(){return u.Hc(n),u.lc().dialogRef.close("")}))("triggerModifiedDocument",(function(){return u.Hc(n),u.lc().documentIsModified=!0})),u.Yb()}if(2&t){var a=u.lc();u.sc("hideCloseEditor",!0)("params",a.editorOptions)("file",a.file)("editMode",!0)}}function Mp(t,e){if(1&t){var n=u.ac();u.Zb(0,"app-collabora-online-viewer",10,11),u.hc("triggerAfterUpdatedDoc",(function(){return u.Hc(n),u.lc().close()}))("triggerCloseEditor",(function(){return u.Hc(n),u.lc().dialogRef.close("")}))("triggerModifiedDocument",(function(){return u.Hc(n),u.lc().documentIsModified=!0})),u.Yb()}if(2&t){var a=u.lc();u.sc("params",a.editorOptions)("file",a.file)("editMode",!0)}}var xp,Yp=((xp=function(){function t(e,n,a){_classCallCheck(this,t),this.translate=e,this.dialogRef=n,this.data=a,this.loading=!1,this.editorOptions=null,this.file=null,this.editorType=null,this.documentIsModified=!1}return _createClass(t,[{key:"ngOnInit",value:function(){this.editorOptions=this.data.editorOptions,this.file=this.data.file,this.editorType=this.data.editorType}},{key:"close",value:function(){var t=this;"onlyoffice"===this.editorType?this.onlyofficeViewer.getFile().pipe(Object(hp.take)(1),Object(wt.tap)((function(e){t.dialogRef.close(e)}))).subscribe():"collaboraonline"===this.editorType?this.collaboraOnlineViewer.getFile().pipe(Object(hp.take)(1),Object(wt.tap)((function(e){t.dialogRef.close(e)}))).subscribe():this.dialogRef.close()}}]),t}()).\u0275fac=function(t){return new(t||xp)(u.Tb(m.e),u.Tb(z.h),u.Tb(z.a))},xp.\u0275cmp=u.Nb({type:xp,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.ad(Cp,!0),u.ad(Ep,!0)),2&t&&(u.Cc(n=u.ic())&&(e.onlyofficeViewer=n.first),u.Cc(n=u.ic())&&(e.collaboraOnlineViewer=n.first))},decls:12,vars:10,consts:[[1,"mat-dialog-content-container"],[2,"padding","0px"],["style","height:100%;width:100%;",3,"hideCloseEditor","params","file","editMode","triggerAfterUpdatedDoc","triggerCloseEditor","triggerModifiedDocument",4,"ngIf"],["style","height:100%;width:100%;",3,"params","file","editMode","triggerAfterUpdatedDoc","triggerCloseEditor","triggerModifiedDocument",4,"ngIf"],[1,"divider-modal"],["mat-dialog-actions","",1,"actions"],["mat-raised-button","","mat-button","","color","primary",3,"disabled","click"],["mat-raised-button","","mat-button","",3,"disabled","mat-dialog-close"],[2,"height","100%","width","100%",3,"hideCloseEditor","params","file","editMode","triggerAfterUpdatedDoc","triggerCloseEditor","triggerModifiedDocument"],["onlyofficeViewer",""],[2,"height","100%","width","100%",3,"params","file","editMode","triggerAfterUpdatedDoc","triggerCloseEditor","triggerModifiedDocument"],["collaboraOnlineViewer",""]],template:function(t,e){1&t&&(u.Zb(0,"div",0),u.Zb(1,"mat-dialog-content",1),u.Qc(2,Sp,2,4,"onlyoffice-viewer",2),u.Qc(3,Mp,2,3,"app-collabora-online-viewer",3),u.Yb(),u.Ub(4,"span",4),u.Zb(5,"div",5),u.Zb(6,"button",6),u.hc("click",(function(){return e.close()})),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Zb(9,"button",7),u.Sc(10),u.mc(11,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(2),u.sc("ngIf","onlyoffice"===e.editorType),u.Eb(1),u.sc("ngIf","collaboraonline"===e.editorType),u.Eb(3),u.sc("disabled",!e.documentIsModified),u.Eb(1),u.Tc(u.nc(8,6,"lang.validate")),u.Eb(2),u.sc("disabled",e.loading),u.Eb(1),u.Tc(u.nc(11,8,"lang.cancel")))},directives:[z.f,Z.t,z.c,D.b,z.d,vp.a,yp.a],pipes:[m.d],styles:[""]}),xp),Zp=["snav2"],_p=["adminMenuTemplate"],kp=["maarchTree"];function wp(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-nav-list"),u.Zb(1,"h3",13),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"a",17),u.hc("click",(function(){return u.Hc(n),u.lc(2).duplicateTemplate()})),u.Ub(5,"mat-icon",18),u.Zb(6,"p",19),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(2),u.Tc(u.nc(3,5,"lang.actions")),u.Eb(2),u.Jb("disabled",a.lockFound||"acknowledgementReceipt"==a.template.target),u.sc("disableRipple",a.lockFound||"acknowledgementReceipt"==a.template.target),u.Eb(3),u.Uc(" ",u.nc(8,7,"lang.duplicate")," ")}}function Op(t,e){if(1&t&&u.Qc(0,wp,9,9,"mat-nav-list",16),2&t){var n=u.lc();u.sc("ngIf",!n.creationMode&&!n.loading)}}function Tp(t,e){1&t&&(u.Zb(0,"div",20),u.Ub(1,"mat-spinner",21),u.Yb())}function Ip(t,e){if(1&t&&(u.Zb(0,"div",27),u.Zb(1,"div",25),u.Zb(2,"mat-form-field"),u.Ub(3,"input",34),u.mc(4,"translate"),u.mc(5,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t){var n=u.lc(2);u.Eb(3),u.tc("title",u.nc(4,3,"lang.technicalId")),u.tc("value",n.template.id),u.tc("placeholder",u.nc(5,5,"lang.technicalId"))}}function Dp(t,e){if(1&t&&(u.Zb(0,"mat-option",35),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n),u.Eb(1),u.Uc(" ",u.nc(2,2,"lang."+n),"")}}function Up(t,e){if(1&t&&(u.Zb(0,"mat-option",35),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n.id),u.Eb(1),u.Uc(" ",n.label," ")}}function Pp(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",27),u.Zb(1,"div",25),u.Zb(2,"mat-form-field"),u.Zb(3,"mat-select",36),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).template.template_attachment_type=t})),u.mc(4,"translate"),u.mc(5,"translate"),u.Zb(6,"mat-option",37),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Qc(9,Up,2,2,"mat-option",31),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(3),u.tc("title",u.nc(4,5,"lang.attachmentType")),u.tc("placeholder",u.nc(5,7,"lang.attachmentType")),u.sc("ngModel",a.template.template_attachment_type),u.Eb(4),u.Tc(u.nc(8,9,"lang.allAttachments")),u.Eb(2),u.sc("ngForOf",a.attachmentTypesList)}}function Fp(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",27),u.Zb(1,"div",25),u.Zb(2,"mat-form-field"),u.Zb(3,"mat-select",38),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).template.template_attachment_type=t})),u.mc(4,"translate"),u.mc(5,"translate"),u.Zb(6,"mat-option",39),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Zb(9,"mat-option",40),u.Sc(10),u.mc(11,"translate"),u.Yb(),u.Zb(12,"mat-option",41),u.Sc(13),u.mc(14,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(3),u.tc("title",u.nc(4,7,"lang.acknowledgementReceiptType")),u.tc("placeholder",u.nc(5,9,"lang.acknowledgementReceiptType")),u.sc("disabled",!a.creationMode)("ngModel",a.template.template_attachment_type),u.Eb(4),u.Tc(u.nc(8,11,"lang.ARsimple")),u.Eb(3),u.Tc(u.nc(11,13,"lang.ARsva")),u.Eb(3),u.Tc(u.nc(14,15,"lang.ARsvr"))}}function Lp(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",27),u.Zb(1,"div",25),u.Zb(2,"mat-form-field"),u.Zb(3,"input",42),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).template.subject=t})),u.mc(4,"translate"),u.mc(5,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(3),u.tc("title",u.nc(4,3,"lang.emailSubject")),u.tc("placeholder",u.nc(5,5,"lang.emailSubject")),u.sc("ngModel",a.template.subject)}}function jp(t,e){if(1&t&&(u.Zb(0,"mat-radio-button",45),u.Sc(1),u.Yb()),2&t){var n=e.$implicit,a=u.lc(3);u.sc("value",n)("checked",a.template.type===n),u.Eb(1),u.Uc(" ",n,"")}}function Rp(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",27),u.Zb(1,"div",25),u.Zb(2,"mat-radio-group",43),u.hc("change",(function(t){return u.Hc(n),u.lc(2).changeType(t)})),u.Qc(3,jp,2,3,"mat-radio-button",44),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(2),u.sc("disabled",!a.creationMode),u.Eb(1),u.sc("ngForOf",a.availableTypes)}}function Qp(t,e){if(1&t&&(u.Zb(0,"mat-option",35),u.Sc(1),u.Yb()),2&t){var n=u.lc().$implicit;u.vc("value","",n.fileExt,": ",n.fileName,""),u.Eb(1),u.Vc(" ",n.fileExt,": ",n.fileName," ")}}function Ap(t,e){if(1&t&&(u.Xb(0),u.Qc(1,Qp,2,4,"mat-option",57),u.Wb()),2&t){var n=e.$implicit,a=u.lc().$implicit;u.Eb(1),u.sc("ngIf",a==n.fileExt)}}function Hp(t,e){if(1&t&&(u.Xb(0),u.Zb(1,"mat-optgroup",53),u.Qc(2,Ap,2,1,"ng-container",56),u.Yb(),u.Wb()),2&t){var n=e.$implicit,a=u.lc(4);u.Eb(1),u.uc("label","",n," :"),u.Eb(1),u.sc("ngForOf",a.defaultTemplatesList)}}function zp(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-form-field"),u.Zb(1,"mat-select",52),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(3).selectedModelFile=t}))("selectionChange",(function(){return u.Hc(n),u.lc(3).changeModel()})),u.mc(2,"translate"),u.mc(3,"translate"),u.Zb(4,"mat-optgroup",53),u.mc(5,"translate"),u.Zb(6,"mat-option",54),u.hc("click",(function(){return u.Hc(n),u.lc(),u.Dc(5).click()})),u.Ub(7,"mat-icon",55),u.Sc(8),u.Yb(),u.Yb(),u.Qc(9,Hp,3,2,"ng-container",56),u.Yb(),u.Yb()}if(2&t){var a=u.lc(3);u.Eb(1),u.tc("title",u.nc(2,9,"lang.defaultTemplate")),u.tc("placeholder",u.nc(3,11,"lang.chosenModel")),u.sc("disabled",!a.creationMode)("ngModel",a.selectedModelFile)("required","acknowledgementReceipt"!=a.template.target),u.Eb(3),u.uc("label","",u.nc(5,13,"lang.loadedFile")," :"),u.Eb(2),u.sc("value",a.template.file.name),u.Eb(2),u.Uc(" ",a.functionsService.empty(a.template.file)||a.functionsService.empty(a.template.file.name)?a.translate.instant("lang.importFile"):a.template.file.name," "),u.Eb(1),u.sc("ngForOf",a.extensionModels)}}function $p(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",58),u.hc("click",(function(t){u.Hc(n);var e=u.lc(3);return t.stopPropagation(),e.editFile()})),u.Sc(1),u.mc(2,"translate"),u.Yb()}if(2&t){var a=u.lc(3);u.sc("disabled",a.lockFound),u.Eb(1),u.Tc(u.nc(2,2,"lang.templateEdition"))}}function Vp(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",58),u.hc("click",(function(t){u.Hc(n),u.lc();var e=u.Dc(5);return t.stopPropagation(),e.click()})),u.Sc(1),u.mc(2,"translate"),u.Yb()}if(2&t){var a=u.lc(3);u.sc("disabled",a.lockFound),u.Eb(1),u.Tc(u.nc(2,2,"lang.importFile"))}}function Np(t,e){if(1&t&&u.Ub(0,"iframe",59),2&t){var n=u.lc(3);u.sc("src",n.templateDocView,u.Jc)}}function Jp(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",27),u.Zb(1,"div",46),u.Zb(2,"div",47),u.Zb(3,"div",27),u.Zb(4,"input",48,49),u.hc("change",(function(t){return u.Hc(n),u.lc(2).uploadFileTrigger(t)})),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(6,"div",25),u.Qc(7,zp,10,15,"mat-form-field",16),u.Qc(8,$p,3,4,"button",50),u.Qc(9,Vp,3,4,"button",50),u.Yb(),u.Qc(10,Np,1,1,"iframe",51),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(7),u.sc("ngIf",a.creationMode||a.template.file.name),u.Eb(1),u.sc("ngIf",a.creationMode&&a.selectedModelFile||!a.creationMode),u.Eb(1),u.sc("ngIf",a.creationMode&&!a.selectedModelFile||!a.creationMode&&!a.functionsService.empty(a.template.file.name)&&"java"!==a.headerService.user.preferences.documentEdition),u.Eb(1),u.sc("ngIf",null!==a.templateDocView)}}function Gp(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",27),u.Zb(1,"div",25),u.Zb(2,"mat-form-field"),u.Zb(3,"textarea",60),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).template.file.content=t})),u.mc(4,"translate"),u.mc(5,"translate"),u.Sc(6,"                                    "),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(3),u.tc("placeholder",u.nc(4,4,"lang.contentTxtTemplate")),u.tc("title",u.nc(5,6,"lang.contentTxtTemplate")),u.sc("ngModel",a.template.file.content)("required","acknowledgementReceipt"!=a.template.target)}}function Bp(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",27),u.Zb(1,"div",25),u.Zb(2,"div",61),u.Zb(3,"textarea",62),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).template.file.content=t})),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(3),u.sc("ngModel",a.template.file.content)("required","acknowledgementReceipt"!=a.template.target)}}function Wp(t,e){if(1&t&&(u.Zb(0,"mat-option",35),u.Sc(1),u.Yb()),2&t){var n=u.lc().$implicit;u.sc("value",n.id),u.Eb(1),u.Tc(n.label)}}function qp(t,e){if(1&t&&(u.Xb(0),u.Qc(1,Wp,2,2,"mat-option",57),u.Wb()),2&t){var n=e.$implicit,a=u.lc(3);u.Eb(1),u.sc("ngIf",a.displayDatasources(n))}}function Xp(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",27),u.Zb(1,"div",25),u.Zb(2,"mat-form-field"),u.Zb(3,"mat-select",63),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).template.datasource=t})),u.mc(4,"translate"),u.mc(5,"translate"),u.Zb(6,"mat-option",64),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Qc(9,qp,2,1,"ng-container",56),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(3),u.tc("title",u.nc(4,5,"lang.templateDatasource")),u.tc("placeholder",u.nc(5,7,"lang.templateDatasource")),u.sc("ngModel",a.template.datasource),u.Eb(4),u.Tc(u.nc(8,9,"lang.noDatasource")),u.Eb(2),u.sc("ngForOf",a.datasourcesList)}}function Kp(t,e){if(1&t&&(u.Zb(0,"mat-option",35),u.Sc(1),u.Yb()),2&t){var n=u.lc().$implicit;u.vc("value","",n.fileExt,": ",n.fileName,""),u.Eb(1),u.Vc(" ",n.fileExt,": ",n.fileName," ")}}function tg(t,e){if(1&t&&(u.Xb(0),u.Qc(1,Kp,2,4,"mat-option",57),u.Wb()),2&t){var n=e.$implicit,a=u.lc().$implicit;u.Eb(1),u.sc("ngIf",a==n.fileExt)}}function eg(t,e){if(1&t&&(u.Xb(0),u.Zb(1,"mat-optgroup",53),u.Qc(2,tg,2,1,"ng-container",56),u.Yb(),u.Wb()),2&t){var n=e.$implicit,a=u.lc(3);u.Eb(1),u.uc("label","",n," :"),u.Eb(1),u.sc("ngForOf",a.defaultTemplatesList)}}function ng(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",58),u.hc("click",(function(t){u.Hc(n);var e=u.lc(3);return t.stopPropagation(),e.editFile()})),u.Sc(1),u.mc(2,"translate"),u.Yb()}if(2&t){var a=u.lc(3);u.sc("disabled",a.lockFound),u.Eb(1),u.Tc(u.nc(2,2,"lang.templateEdition"))}}function ag(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",58),u.hc("click",(function(t){u.Hc(n),u.lc();var e=u.Dc(13);return t.stopPropagation(),e.click()})),u.Sc(1),u.mc(2,"translate"),u.Yb()}if(2&t){var a=u.lc(3);u.sc("disabled",a.lockFound),u.Eb(1),u.Tc(u.nc(2,2,"lang.importFile"))}}function ig(t,e){if(1&t&&u.Ub(0,"iframe",59),2&t){var n=u.lc(3);u.sc("src",n.templateDocView,u.Jc)}}function rg(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",27),u.Zb(1,"mat-tab-group",65),u.hc("selectedTabChange",(function(t){return u.Hc(n),u.lc(2).loadTab(t)})),u.Zb(2,"mat-tab",53),u.mc(3,"translate"),u.Zb(4,"div",25),u.Zb(5,"div",61),u.Zb(6,"textarea",66),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).template.file.electronic.content=t})),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(7,"mat-tab",53),u.mc(8,"translate"),u.Zb(9,"div",46),u.Zb(10,"div",47),u.Zb(11,"div",27),u.Zb(12,"input",48,67),u.hc("change",(function(t){return u.Hc(n),u.lc(2).uploadFileTrigger(t)})),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(14,"div",25),u.Zb(15,"mat-form-field"),u.Zb(16,"mat-select",68),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).selectedModelFile=t})),u.mc(17,"translate"),u.mc(18,"translate"),u.Zb(19,"mat-optgroup",53),u.mc(20,"translate"),u.Zb(21,"mat-option",69),u.hc("click",(function(){return u.Hc(n),u.Dc(13).click()})),u.Ub(22,"mat-icon",55),u.Sc(23),u.Yb(),u.Yb(),u.Qc(24,eg,3,2,"ng-container",56),u.Yb(),u.Yb(),u.Qc(25,ng,3,4,"button",50),u.Qc(26,ag,3,4,"button",50),u.Yb(),u.Qc(27,ig,1,1,"iframe",51),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(2),u.tc("label",u.nc(3,16,"lang.electronicTemplate")),u.Eb(4),u.sc("ngModel",a.template.file.electronic.content)("required","acknowledgementReceipt"!=a.template.target),u.Eb(1),u.tc("label",u.nc(8,18,"lang.paperTemplate")),u.Eb(9),u.tc("title",u.nc(17,20,"lang.defaultTemplate")),u.tc("placeholder",u.nc(18,22,"lang.chosenModel")),u.sc("disabled",!a.creationMode&&null!==a.template.file.paper.name)("ngModel",a.selectedModelFile)("required","acknowledgementReceipt"!=a.template.target),u.Eb(3),u.uc("label","",u.nc(20,24,"lang.loadedFile")," :"),u.Eb(2),u.sc("value",a.template.file.paper.name),u.Eb(2),u.Uc(" ",a.functionsService.empty(a.template.file.paper)||a.functionsService.empty(a.template.file.paper.name)?a.translate.instant("lang.importFile"):a.template.file.paper.name," "),u.Eb(1),u.sc("ngForOf",a.extensionModels),u.Eb(1),u.sc("ngIf",a.creationMode&&a.selectedModelFile||!a.creationMode&&!a.functionsService.empty(a.template.file.paper.name)),u.Eb(1),u.sc("ngIf",!a.selectedModelFile||!a.creationMode&&"java"!==a.headerService.user.preferences.documentEdition),u.Eb(1),u.sc("ngIf",null!==a.templateDocView)}}function cg(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-card",22),u.Zb(1,"form",23,24),u.hc("ngSubmit",(function(){return u.Hc(n),u.lc().onSubmit()})),u.Zb(3,"div",25),u.Qc(4,Ip,6,7,"div",26),u.Zb(5,"div",27),u.Zb(6,"div",25),u.Zb(7,"mat-form-field"),u.Zb(8,"input",28),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().template.label=t})),u.mc(9,"translate"),u.mc(10,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(11,"div",27),u.Zb(12,"div",25),u.Zb(13,"mat-form-field"),u.Zb(14,"textarea",29),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().template.description=t})),u.mc(15,"translate"),u.mc(16,"translate"),u.Sc(17,"                                    "),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(18,"div",27),u.Zb(19,"div",25),u.Zb(20,"mat-form-field"),u.Zb(21,"mat-select",30),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().template.target=t}))("selectionChange",(function(){return u.Hc(n),u.lc().updateTemplateType()})),u.mc(22,"translate"),u.mc(23,"translate"),u.Qc(24,Dp,3,4,"mat-option",31),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Qc(25,Pp,10,11,"div",26),u.Qc(26,Fp,15,17,"div",26),u.Qc(27,Lp,6,7,"div",26),u.Qc(28,Rp,4,2,"div",26),u.Qc(29,Jp,11,4,"div",26),u.Qc(30,Gp,7,8,"div",26),u.Qc(31,Bp,4,2,"div",26),u.Qc(32,Xp,10,11,"div",26),u.Qc(33,rg,28,26,"div",26),u.Yb(),u.Zb(34,"div",32),u.Zb(35,"button",33),u.Sc(36),u.mc(37,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.Dc(2),i=u.lc();u.Eb(4),u.sc("ngIf",!i.creationMode),u.Eb(4),u.tc("title",u.nc(9,23,"lang.templateName")),u.tc("placeholder",u.nc(10,25,"lang.templateName")),u.sc("ngModel",i.template.label),u.Eb(6),u.tc("placeholder",u.nc(15,27,"lang.description")),u.tc("title",u.nc(16,29,"lang.description")),u.sc("ngModel",i.template.description),u.Eb(7),u.tc("title",u.nc(22,31,"lang.templateTarget")),u.tc("placeholder",u.nc(23,33,"lang.templateTarget")),u.sc("disabled",!i.creationMode)("ngModel",i.template.target),u.Eb(3),u.sc("ngForOf",i.targetTypes),u.Eb(1),u.sc("ngIf","attachments"==i.template.target),u.Eb(1),u.sc("ngIf","acknowledgementReceipt"==i.template.target),u.Eb(1),u.sc("ngIf","sendmail"==i.template.target),u.Eb(1),u.sc("ngIf",i.availableTypes.length>1),u.Eb(1),u.sc("ngIf","OFFICE"==i.template.type),u.Eb(1),u.sc("ngIf","TXT"==i.template.type),u.Eb(1),u.sc("ngIf","HTML"==i.template.type),u.Eb(1),u.sc("ngIf","notifications"==i.template.target),u.Eb(1),u.sc("ngIf","OFFICE_HTML"==i.template.type),u.Eb(2),u.sc("disabled",!a.form.valid||i.lockFound),u.Eb(1),u.Tc(u.nc(37,35,"lang.save"))}}function og(t,e){if(1&t&&(u.Zb(0,"mat-list-item"),u.Zb(1,"mat-icon",5),u.Ub(2,"i",6),u.Yb(),u.Zb(3,"span",7),u.Sc(4),u.Yb(),u.Yb()),2&t){var n=e.$implicit;u.Eb(4),u.Uc(" ",n.entity_label," ")}}var sg,lg,dg=((lg=function(){function t(e,n,a,i,r,c,o,s,l,d,b){_classCallCheck(this,t),this.http=e,this.sanitizer=n,this.route=a,this.router=i,this.notify=r,this.headerService=c,this.dialog=o,this.appService=s,this.viewContainerRef=l,this.functionsService=d,this.translate=b,this.loading=!1,this.template={id:0,label:"",description:"",datasource:"letterbox_attachment",target:"",type:"",file:null},this.targetTypes=["acknowledgementReceipt","notes","sendmail","indexingFile","notifications","attachments"],this.allowedExtensions=["doc","docx","dotx","odt","ott","html","xlsl","xlsx","xltx","ods","ots","csv"],this.selectedModelFile=null,this.availableTypes=[],this.statuses=[],this.categoriesList=[],this.keywordsList=[],this.jnlpValue={},this.extensionModels=[],this.buttonFileName=this.translate.instant("lang.importFile"),this.lockFound=!1,this.templateDocView=null,this.data=[],this.config={}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.route.params.subscribe((function(e){void 0===e.id?(t.headerService.setHeader(t.translate.instant("lang.templateCreation")),t.creationMode=!0,t.http.get("../rest/administration/templates/new").subscribe((function(e){t.setInitialValue(e),t.loading=!1}))):(t.creationMode=!1,t.http.get("../rest/templates/"+e.id+"/details").subscribe((function(e){t.setInitialValue(e),t.template={id:e.template.template_id,label:e.template.template_label,description:e.template.template_comment,datasource:e.template.template_datasource,target:e.template.template_target,type:e.template.template_type,subject:e.template.subject,file:{}},t.updateTemplateType(),t.selectedModelFile=e.template.template_file_name,t.template.template_attachment_type=e.template.template_attachment_type,"HTML"===t.template.type||"TXT"===t.template.type?t.template.file.content=e.template.template_content:"OFFICE"===t.template.type?(t.template.file.format=e.template.template_file_name.split(".").pop(),t.template.file.name=e.template.template_file_name,t.getViewTemplateContent()):"acknowledgementReceipt"===t.template.target&&(t.functionsService.empty(e.template.template_file_name)||(t.template.file.paper.format=e.template.template_file_name.split(".").pop()),t.template.file.paper.name=e.template.template_file_name,t.template.file.electronic.content=e.template.template_content,t.getViewTemplateContent()),t.headerService.setHeader(t.translate.instant("lang.templateModification"),t.template.template_label),t.loading=!1}))),t.template.template_attachment_type||(t.template.template_attachment_type="all")}))}},{key:"getViewTemplateContent",value:function(){var t=this;this.http.get("../rest/templates/".concat(this.template.id,"/content")).pipe(Object(d.a)((function(e){t.templateDocView=t.sanitizer.bypassSecurityTrustResourceUrl("data:application/pdf;base64,"+e.encodedDocument)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"initMce",value:function(t){var e=this;setTimeout((function(){tinymce.remove("textarea"),tinymce.baseURL="../node_modules/tinymce",tinymce.suffix=".min",tinymce.init({selector:t,statusbar:!1,language:e.translate.instant("lang.langISO").replace("-","_"),language_url:"../node_modules/tinymce-i18n/langs/".concat(e.translate.instant("lang.langISO").replace("-","_"),".js"),height:"200",plugins:["autoresize","code"],external_plugins:{maarch_b64image:"../../src/frontend/plugins/tinymce/maarch_b64image/plugin.min.js"},menubar:!1,toolbar:"undo | bold italic underline | alignleft aligncenter alignright | maarch_b64image | forecolor | code",theme_buttons1_add:"fontselect,fontsizeselect",theme_buttons2_add_before:"cut,copy,paste,pastetext,pasteword,separator,search,replace,separator",theme_buttons2_add:"separator,insertdate,inserttime,preview,separator,forecolor,backcolor",theme_buttons3_add_before:"tablecontrols,separator",theme_buttons3_add:"separator,print,separator,ltr,rtl,separator,fullscreen,separator,insertlayer,moveforward,movebackward,absolut",theme_toolbar_align:"left",theme_advanced_toolbar_location:"top",theme_styles:"Header 1=header1;Header 2=header2;Header 3=header3;Table Row=tableRow1",setup:function(t){t.on("keyup",(function(t){"HTML"===e.template.type&&null!=tinymce.get("templateHtml")&&(e.template.file.content=tinymce.get("templateHtml").getContent()),"OFFICE_HTML"===e.template.type&&null!=tinymce.get("templateOfficeHtml")&&(e.template.file.electronic.content=tinymce.get("templateOfficeHtml").getContent())}))}})}),20)}},{key:"setInitialValue",value:function(t){var e=this;this.extensionModels=[],t.templatesModels.forEach((function(t){-1===e.extensionModels.indexOf(t.fileExt)&&e.extensionModels.push(t.fileExt)})),this.defaultTemplatesList=t.templatesModels,this.attachmentTypesList=t.attachmentTypes,this.datasourcesList=t.datasources,this.maarchTree.initData(t.entities.map((function(t){return Object.assign(Object.assign({},t),{id:t.serialId})})))}},{key:"getBase64Document",value:function(t){var e=new Uint8Array(t).reduce((function(t,e){return t+String.fromCharCode(e)}),"");return btoa(e)}},{key:"uploadFileTrigger",value:function(t){var e=this;if(t.target.files&&t.target.files[0]&&this.isExtensionAllowed(t.target.files[0])){var n=new FileReader;"acknowledgementReceipt"===this.template.target?(this.template.file.paper={name:"",type:"",content:""},this.template.file.paper.name=t.target.files[0].name,this.selectedModelFile=this.template.file.paper.name,this.template.file.paper.type=t.target.files[0].type,this.template.file.paper.format=this.template.file.paper.name.split(".").pop()):(this.template.file={name:"",type:"",content:""},this.template.file.name=t.target.files[0].name,this.selectedModelFile=this.template.file.name,this.template.file.type=t.target.files[0].type,this.template.file.format=this.template.file.name.split(".").pop()),n.readAsArrayBuffer(t.target.files[0]),n.onload=function(t){"acknowledgementReceipt"===e.template.target?e.template.file.paper.content=e.getBase64Document(t.target.result):e.template.file.content=e.getBase64Document(t.target.result),e.getViewTemplateFile()}}}},{key:"isExtensionAllowed",value:function(t){var e=t.name.toLowerCase().split(".").pop();return 0!==this.allowedExtensions.filter((function(t){return t.toLowerCase()===e.toLowerCase()})).length||(this.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.notAllowedExtension")+" !",msg:this.translate.instant("lang.file")+" : <b>"+t.name+"</b>, "+this.translate.instant("lang.type")+" : <b>"+t.type+"</b><br/><br/><u>"+this.translate.instant("lang.allowedExtensions")+"</u> : <br/>"+this.allowedExtensions.filter((function(t,e,n){return e===n.indexOf(t)})).join(", ")}}),!1)}},{key:"editFile",value:function(){var t={docUrl:"rest/onlyOffice/mergedFile"};if(this.creationMode){if("acknowledgementReceipt"!==this.template.target)if(this.functionsService.empty(this.template.file.content)){t.objectType="templateCreation";var e,n=_createForOfIteratorHelper(this.defaultTemplatesList);try{for(n.s();!(e=n.n()).done;){var a=e.value;this.selectedModelFile===a.fileExt+": "+a.fileName&&(t.objectId=a.filePath)}}catch(d){n.e(d)}finally{n.f()}t.extension=t.objectId.toLowerCase().split(".").pop()}else t.objectType="encodedResource",t.objectId=this.template.file.content,t.extension=this.template.file.format;else if("acknowledgementReceipt"===this.template.target)if(this.functionsService.empty(this.template.file.paper.content)){t.objectType="templateCreation";var i,r=_createForOfIteratorHelper(this.defaultTemplatesList);try{for(r.s();!(i=r.n()).done;){var c=i.value;this.selectedModelFile===c.fileExt+": "+c.fileName&&(t.objectId=c.filePath)}}catch(d){r.e(d)}finally{r.f()}t.extension=t.objectId.toLowerCase().split(".").pop()}else t.objectType="encodedResource",t.objectId=this.template.file.paper.content,t.extension=this.template.file.paper.format}else"acknowledgementReceipt"!==this.template.target?this.functionsService.empty(this.template.file.content)?(t.objectType="templateModification",t.objectId=this.template.id,t.extension=this.template.file.name.toLowerCase().split(".").pop()):(t.objectType="encodedResource",t.objectId=this.template.file.content,t.extension=this.template.file.format):"acknowledgementReceipt"===this.template.target&&(this.functionsService.empty(this.template.file.paper.content)?(t.objectType="templateModification",t.objectId=this.template.id,t.extension=this.template.file.paper.name.toLowerCase().split(".").pop()):(t.objectType="encodedResource",t.objectId=this.template.file.paper.content,t.extension=this.template.file.paper.format));if("java"===this.headerService.user.preferences.documentEdition){if(this.creationMode){t.objectId="",t.objectType="templateCreation";var o,s=_createForOfIteratorHelper(this.defaultTemplatesList);try{for(s.s();!(o=s.n()).done;){var l=o.value;this.selectedModelFile===l.fileExt+": "+l.fileName&&(t.objectId=l.filePath)}}catch(d){s.e(d)}finally{s.f()}if(this.functionsService.empty(t.objectId))return alert(this.translate.instant("lang.canNotEditImportedDocumentWhenJava")),!1}else t.objectType="templateModification",t.objectId=this.template.id;this.launchJavaEditor(t)}else"java"!==this.headerService.user.preferences.documentEdition&&this.launchIntegratedEditor(t,this.headerService.user.preferences.documentEdition)}},{key:"launchJavaEditor",value:function(t){var e=this;this.http.post("../rest/jnlp",t).pipe(Object(d.a)((function(n){window.location.href="../rest/jnlp/"+n.generatedJnlp,e.checkLockFile(n.jnlpUniqueId,t.extension)})),Object(b.a)((function(t){return e.notify.handleSoftErrors(t),Object(J.of)(!1)}))).subscribe()}},{key:"launchIntegratedEditor",value:function(t,e){var n=this;this.dialogRef=this.dialog.open(Yp,{autoFocus:!1,panelClass:"maarch-full-height-modal",minWidth:"80%",disableClose:!0,data:{title:this.template.template_style,editorOptions:t,file:{format:t.extension},editorType:e}}),this.dialogRef.afterClosed().pipe(Object(q.a)((function(t){return!n.functionsService.empty(t)})),Object(d.a)((function(e){"acknowledgementReceipt"===n.template.target?(n.template.file.paper.name=n.selectedModelFile,n.template.file.paper.format=t.extension,n.template.file.paper.content=e.content):(n.template.file.name=n.selectedModelFile,n.template.file.format=t.extension,n.template.file.content=e.content),n.getViewTemplateFile()})),Object(b.a)((function(t){return n.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe()}},{key:"getViewTemplateFile",value:function(){var t=this;this.http.post("../rest/convertedFile/encodedFile",{encodedFile:"acknowledgementReceipt"===this.template.target?this.template.file.paper.content:this.template.file.content,format:"acknowledgementReceipt"===this.template.target?this.template.file.paper.format:this.template.file.format}).pipe(Object(d.a)((function(e){t.templateDocView=t.sanitizer.bypassSecurityTrustResourceUrl("data:application/pdf;base64,"+e.encodedResource)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"checkLockFile",value:function(t,e){var n=this;this.intervalLockFile=setInterval((function(){n.http.get("../rest/jnlp/lock/"+t).pipe(Object(d.a)((function(t){n.lockFound=t.lockFileFound,n.lockFound||(clearInterval(n.intervalLockFile),n.loadTmpFile("".concat(t.fileTrunk,".").concat(e)))}))).subscribe()}),1e3)}},{key:"loadTmpFile",value:function(t){var e=this;this.http.get("../rest/convertedFile/".concat(t,"?convert=true")).pipe(Object(d.a)((function(n){"acknowledgementReceipt"===e.template.target?(e.template.file.paper.name=e.selectedModelFile,e.template.file.paper.format=t.toLowerCase().split(".").pop(),e.template.file.paper.content=n.encodedResource):(e.template.file.name=e.selectedModelFile,e.template.file.format=t.toLowerCase().split(".").pop(),e.template.file.content=n.encodedResource),e.templateDocView=e.sanitizer.bypassSecurityTrustResourceUrl("data:application/pdf;base64,"+n.encodedConvertedResource)}))).subscribe()}},{key:"duplicateTemplate",value:function(){var t=this;this.lockFound||"acknowledgementReceipt"===this.template.target||confirm(this.translate.instant("lang.confirmDuplicate"))&&this.http.post("../rest/templates/"+this.template.id+"/duplicate",{id:this.template.id}).subscribe((function(e){t.notify.success(t.translate.instant("lang.templateDuplicated")),t.router.navigate(["/administration/templates/"+e.id])}),(function(e){t.notify.error(e.error.errors)}))}},{key:"onSubmit",value:function(){var t=this;this.isValidTemplate()&&(this.creationMode?this.http.post("../rest/templates",this.formatTemplate()).pipe(Object(d.a)((function(e){e.checkEntities?(t.config={panelClass:"maarch-modal",data:{entitiesList:e.checkEntities,template_attachment_type:t.template.template_attachment_type}},t.dialog.open(bg,t.config)):(t.router.navigate(["/administration/templates"]),t.notify.success(t.translate.instant("lang.templateAdded")))})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe():this.http.put("../rest/templates/"+this.template.id,this.formatTemplate()).pipe(Object(d.a)((function(e){!t.functionsService.empty(e)&&e.checkEntities?(t.config={panelClass:"maarch-modal",data:{entitiesList:e.checkEntities,template_attachment_type:t.template.template_attachment_type}},t.dialogRef=t.dialog.open(bg,t.config)):(t.router.navigate(["/administration/templates"]),t.notify.success(t.translate.instant("lang.templateUpdated")))})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe())}},{key:"formatTemplate",value:function(){var t=Object.assign({},this.template);return t.entities=this.maarchTree.getSelectedNodes().map((function(t){return t.entity_id})),t}},{key:"isValidTemplate",value:function(){return"acknowledgementReceipt"===this.template.target&&this.functionsService.empty(this.template.file.paper.name)&&this.functionsService.empty(this.template.file.electronic.content)?(alert(this.translate.instant("lang.mustCompleteAR")),!1):"acknowledgementReceipt"===this.template.target||"OFFICE"!==this.template.type||!this.functionsService.empty(this.template.file.name)||(alert(this.translate.instant("lang.editModelFirst")),!1)}},{key:"displayDatasources",value:function(t){return"notification"===t.target&&"notifications"===this.template.target||"document"===t.target&&"notifications"!==this.template.target}},{key:"updateTemplateType",value:function(){this.template.file={name:"",type:"",content:""},this.templateDocView=null,["attachments","indexingFile"].indexOf(this.template.target)>-1?(this.template.type="OFFICE",this.availableTypes=["OFFICE"]):["notifications","sendmail"].indexOf(this.template.target)>-1?(this.template.type="HTML",this.availableTypes=["HTML","TXT"],this.initMce("textarea#templateHtml")):"notes"===this.template.target?(this.template.type="TXT",this.availableTypes=["TXT"]):"acknowledgementReceipt"===this.template.target&&(this.template.file={electronic:{name:"",type:"",content:""},paper:{name:"",type:"",content:""}},this.template.type="OFFICE_HTML",this.availableTypes=[],this.template.template_attachment_type="",this.initMce("textarea#templateOfficeHtml"))}},{key:"changeType",value:function(t){"HTML"===t.value?this.initMce("textarea#templateHtml"):tinymce.remove("textarea"),this.template.type=t.value}},{key:"changeModel",value:function(){this.template.file={name:"",type:"",content:""},this.template.file={electronic:{name:"",type:"",content:""}}}},{key:"loadTab",value:function(t){0===t.index?this.initMce("textarea#templateOfficeHtml"):(tinymce.remove("textarea"),null==this.template.template_file_name&&null==this.template.template_style&&(this.buttonFileName=this.translate.instant("lang.importFile")))}},{key:"ngOnDestroy",value:function(){tinymce.remove("textarea"),this.intervalLockFile&&clearInterval(this.intervalLockFile)}}]),t}()).\u0275fac=function(t){return new(t||lg)(u.Tb(f.b),u.Tb(Al.b),u.Tb(r.a),u.Tb(r.c),u.Tb(y.a),u.Tb(p.a),u.Tb(z.b),u.Tb(g.a),u.Tb(u.R),u.Tb(C.a),u.Tb(m.e))},lg.\u0275cmp=u.Nb({type:lg,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(Zp,!0),u.Oc(_p,!0),u.Oc(kp,!0)),2&t&&(u.Cc(n=u.ic())&&(e.sidenavRight=n.first),u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.maarchTree=n.first))},decls:24,vars:14,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content",2,"padding","10px 10px 0px 10px"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content","style","display: contents;",4,"ngIf"],["fixedTopGap","56","position","end",2,"overflow-x","hidden","width","400px",3,"mode","fixedInViewport","opened"],["snav2",""],["mat-subheader",""],[2,"padding","10px"],["maarchTree",""],[4,"ngIf"],["mat-list-item","",3,"disableRipple","click"],["color","primary","mat-list-icon","",1,"fa","fa-copy"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content",2,"display","contents"],[1,"form-horizontal",2,"display","contents",3,"ngSubmit"],["templatesFormUp","ngForm"],[1,"col-sm-12"],["class","form-group",4,"ngIf"],[1,"form-group"],["matInput","","name","label","type","text","maxlength","255","required","",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","description","name","template_comment","matTextareaAutosize","","matAutosizeMinRows","2","matAutosizeMaxRows","5","required","",3,"ngModel","placeholder","title","ngModelChange"],["name","target","required","",3,"disabled","title","placeholder","ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-12",2,"background","white","position","sticky","bottom","0px","text-align","center"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["matInput","","type","number","disabled","",3,"title","value","placeholder"],[3,"value"],["id","template_attachment_type","name","template_attachment_type",3,"title","placeholder","ngModel","ngModelChange"],["value","all"],["id","template_attachment_type","name","template_attachment_type","required","",3,"disabled","title","placeholder","ngModel","ngModelChange"],["value","simple"],["value","sva"],["value","svr"],["matInput","","name","subject","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["required","","name","type",3,"disabled","change"],["style","margin-left:10px","color","primary","name","type",3,"value","checked",4,"ngFor","ngForOf"],["color","primary","name","type",2,"margin-left","10px",3,"value","checked"],[1,"col-md-12",2,"display","none"],[1,"form-inline","hide"],["type","file","name","files[]","accept","application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml\u200c.slideshow,application/vnd.oasis.opendocument.text,application/vnd.oasis.opendocument.presentation,application/vnd.oasis.opendocument.spreadsheet",3,"change"],["uploadSignFileOffice",""],["mat-raised-button","","color","default","type","button",3,"disabled","click",4,"ngIf"],["style","width:100%;height:800px;",3,"src",4,"ngIf"],["id","template_style","name","template_style",3,"disabled","title","placeholder","ngModel","required","ngModelChange","selectionChange"],[3,"label"],[1,"selectFile",3,"value","click"],["color","primary",1,"fa","fa-paperclip",2,"height","auto"],[4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],["mat-raised-button","","color","default","type","button",3,"disabled","click"],[2,"width","100%","height","800px",3,"src"],["matInput","","name","templateTxt","id","templateTxt","matTextareaAutosize","","matAutosizeMinRows","5","matAutosizeMaxRows","5",3,"ngModel","placeholder","title","required","ngModelChange"],["id","html_mode",2,"display","block","width","100%"],["name","templateHtml","id","templateHtml","rows","15","cols","60",2,"width","100%",3,"ngModel","required","ngModelChange"],["id","datasource","name","datasource",3,"title","placeholder","ngModel","ngModelChange"],["value",""],[3,"selectedTabChange"],["name","templateOfficeHtml","id","templateOfficeHtml","rows","15","cols","60",2,"width","100%",3,"ngModel","required","ngModelChange"],["uploadSignFileOfficeHtml",""],["id","template_style","name","template_style",3,"disabled","title","placeholder","ngModel","required","ngModelChange"],[2,"text-align","center",3,"value","click"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,Op,1,1,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,Tp,2,0,"div",9),u.Qc(14,cg,38,37,"mat-card",10),u.Yb(),u.Yb(),u.Yb(),u.Zb(15,"mat-sidenav",11,12),u.Zb(17,"mat-list"),u.Zb(18,"h3",13),u.Sc(19),u.mc(20,"translate"),u.Yb(),u.Zb(21,"div",14),u.Ub(22,"app-maarch-flat-tree",null,15),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading),u.Eb(1),u.sc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!e.appService.getViewMode()),u.Eb(4),u.Tc(u.nc(20,12,"lang.chooseEntityAssociationModel")))},directives:[S.e,S.f,M.a,Y.a,Z.t,S.d,Dt.a,Dt.g,Ae.a,Dt.h,Dt.d,Ut.a,Dt.c,I.k,O.c,T.a,o.J,o.u,o.v,k.c,w.b,o.c,o.o,o.E,o.t,o.w,w.d,it.a,Z.s,D.b,I.o,Je.b,Je.a,I.n,Re.c,Re.a],pipes:[m.d],styles:[".mat-list-item.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:default}.mat-list-item.disabled[_ngcontent-%COMP%]:active, .mat-list-item.disabled[_ngcontent-%COMP%]:focus, .mat-list-item.disabled[_ngcontent-%COMP%]:hover{background:initial}.selectFile[_ngcontent-%COMP%]{text-align:center}.selectFile[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex!important;align-items:center;justify-content:center}"]}),lg),bg=((sg=function t(e,n,a){_classCallCheck(this,t),this.http=e,this.data=n,this.dialogRef=a}).\u0275fac=function(t){return new(t||sg)(u.Tb(f.b),u.Tb(z.a),u.Tb(z.h))},sg.\u0275cmp=u.Nb({type:sg,selectors:[["ng-component"]],decls:18,vars:13,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["role","alert",1,"alert-message","alert-message-info"],[4,"ngFor","ngForOf"],["mat-raised-button","","color","primary","type","submit",3,"click"],["mat-list-icon",""],["color","primary",1,"fa","fa-share-alt"],["mat-line",""]],template:function(t,e){1&t&&(u.Zb(0,"div",0),u.Zb(1,"h1",1),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"mat-dialog-content"),u.Zb(5,"div",2),u.Zb(6,"p"),u.Sc(7),u.mc(8,"translate"),u.Zb(9,"b"),u.Sc(10),u.mc(11,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(12,"mat-list"),u.Qc(13,og,5,1,"mat-list-item",3),u.Yb(),u.Yb(),u.Zb(14,"mat-dialog-actions"),u.Zb(15,"button",4),u.hc("click",(function(){return e.dialogRef.close()})),u.Sc(16),u.mc(17,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(2),u.Tc(u.nc(3,5,"lang.templateAssociateEntities")),u.Eb(5),u.Tc(u.nc(8,7,"lang.templateCheckEntities")),u.Eb(3),u.Tc(u.nc(11,9,"lang.AR"+e.data.template_attachment_type)),u.Eb(3),u.sc("ngForOf",e.data.entitiesList),u.Eb(3),u.Tc(u.nc(17,11,"lang.close")))},directives:[z.i,z.f,Dt.a,Z.s,z.c,D.b,Dt.d,Ut.a,Dt.c,I.k],pipes:[m.d],styles:[".alert-message[_ngcontent-%COMP%]{max-width:inherit}"]}),sg);function ug(t,e){1&t&&(u.Zb(0,"div",10),u.Ub(1,"mat-spinner",11),u.Yb())}function mg(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-card",12),u.Zb(1,"mat-tab-group"),u.Zb(2,"mat-tab",13),u.mc(3,"translate"),u.Zb(4,"form",14,15),u.hc("ngSubmit",(function(){return u.Hc(n),u.lc().onSubmit()})),u.Zb(6,"mat-list"),u.Zb(7,"p",16),u.Zb(8,"mat-slide-toggle",17),u.hc("change",(function(){u.Hc(n);var t=u.lc();return t.toggleRule(t.passwordRules.complexityUpper)})),u.Sc(9),u.Yb(),u.Zb(10,"mat-slide-toggle",17),u.hc("change",(function(){u.Hc(n);var t=u.lc();return t.toggleRule(t.passwordRules.complexityNumber)})),u.Sc(11),u.Yb(),u.Zb(12,"mat-slide-toggle",17),u.hc("change",(function(){u.Hc(n);var t=u.lc();return t.toggleRule(t.passwordRules.complexitySpecial)})),u.Sc(13),u.Yb(),u.Yb(),u.Zb(14,"mat-list-item",18),u.Zb(15,"mat-icon",19),u.Zb(16,"mat-slide-toggle",20),u.hc("change",(function(){u.Hc(n);var t=u.lc();return t.toggleRule(t.passwordRules.minLength)})),u.Yb(),u.Yb(),u.Zb(17,"p",21),u.Zb(18,"mat-form-field"),u.Zb(19,"input",22),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().passwordRules.minLength.value=t})),u.Yb(),u.Zb(20,"span",23),u.Sc(21),u.mc(22,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(23,"mat-list-item",18),u.Zb(24,"mat-icon",19),u.Zb(25,"mat-slide-toggle",20),u.hc("change",(function(){u.Hc(n);var t=u.lc();return t.toggleRule(t.passwordRules.lockAttempts)})),u.Yb(),u.Yb(),u.Zb(26,"p",24),u.Zb(27,"mat-form-field",25),u.Zb(28,"input",22),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().passwordRules.lockAttempts.value=t})),u.Yb(),u.Yb(),u.Zb(29,"mat-form-field",26),u.Zb(30,"input",22),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().passwordRules.lockTime.value=t})),u.Yb(),u.Zb(31,"span",23),u.Sc(32),u.mc(33,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(34,"mat-list-item",18),u.Zb(35,"mat-icon",19),u.Zb(36,"mat-slide-toggle",20),u.hc("change",(function(){u.Hc(n);var t=u.lc();return t.toggleRule(t.passwordRules.renewal)})),u.Yb(),u.Yb(),u.Zb(37,"p",21),u.Zb(38,"mat-form-field"),u.Zb(39,"input",22),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().passwordRules.renewal.value=t})),u.Yb(),u.Zb(40,"span",23),u.Sc(41),u.mc(42,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(43,"mat-list-item",18),u.Zb(44,"mat-icon",19),u.Zb(45,"mat-slide-toggle",20),u.hc("change",(function(){u.Hc(n);var t=u.lc();return t.toggleRule(t.passwordRules.historyLastUse)})),u.Yb(),u.Yb(),u.Zb(46,"p",21),u.Zb(47,"mat-form-field"),u.Zb(48,"input",22),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().passwordRules.historyLastUse.value=t})),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(49,"div",27),u.Zb(50,"button",28),u.Sc(51),u.mc(52,"translate"),u.Yb(),u.Zb(53,"button",29),u.hc("click",(function(){return u.Hc(n),u.lc().cancelModification()})),u.Sc(54),u.mc(55,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.Dc(5),i=u.lc();u.Eb(2),u.tc("label",u.nc(3,41,"lang.password")),u.Eb(6),u.sc("name",i.passwordRules.complexityUpper.label)("checked",i.passwordRules.complexityUpper.enabled),u.Eb(1),u.Uc(" ",i.passwordRules.complexityUpper.label,""),u.Eb(1),u.sc("name",i.passwordRules.complexityNumber.label)("checked",i.passwordRules.complexityNumber.enabled),u.Eb(1),u.Uc(" ",i.passwordRules.complexityNumber.label,""),u.Eb(1),u.sc("name",i.passwordRules.complexitySpecial.label)("checked",i.passwordRules.complexitySpecial.enabled),u.Eb(1),u.Uc(" ",i.passwordRules.complexitySpecial.label,""),u.Eb(3),u.sc("checked",i.passwordRules.minLength.enabled),u.Eb(3),u.tc("placeholder",i.passwordRules.minLength.label),u.sc("disabled",!i.passwordRules.minLength.enabled)("name",i.passwordRules.minLength.label)("ngModel",i.passwordRules.minLength.value),u.Eb(2),u.Uc("\xa0",u.nc(22,43,"lang.chars"),""),u.Eb(4),u.sc("checked",i.passwordRules.lockAttempts.enabled),u.Eb(3),u.tc("placeholder",i.passwordRules.lockAttempts.label),u.sc("disabled",!i.passwordRules.lockAttempts.enabled)("name",i.passwordRules.lockAttempts.label)("ngModel",i.passwordRules.lockAttempts.value),u.Eb(2),u.tc("placeholder",i.passwordRules.lockTime.label),u.sc("disabled",!i.passwordRules.lockTime.enabled)("name",i.passwordRules.lockTime.label)("ngModel",i.passwordRules.lockTime.value),u.Eb(2),u.Uc("\xa0",u.nc(33,45,"lang.minutes"),""),u.Eb(4),u.sc("checked",i.passwordRules.renewal.enabled),u.Eb(3),u.tc("placeholder",i.passwordRules.renewal.label),u.sc("disabled",!i.passwordRules.renewal.enabled)("name",i.passwordRules.renewal.label)("ngModel",i.passwordRules.renewal.value),u.Eb(2),u.Uc("\xa0",u.nc(42,47,"lang.days"),""),u.Eb(4),u.sc("checked",i.passwordRules.historyLastUse.enabled),u.Eb(3),u.tc("placeholder",i.passwordRules.historyLastUse.label),u.sc("disabled",!i.passwordRules.historyLastUse.enabled)("name",i.passwordRules.historyLastUse.label)("ngModel",i.passwordRules.historyLastUse.value),u.Eb(2),u.sc("disabled",!a.valid&&!i.disabledForm()||i.checkModif()),u.Eb(1),u.Tc(u.nc(52,49,"lang.validate")),u.Eb(2),u.sc("disabled",i.checkModif()),u.Eb(1),u.Tc(u.nc(55,51,"lang.cancel"))}}var fg,pg=((fg=function(){function t(e,n,a,i,r){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.headerService=i,this.appService=r,this.loading=!1,this.passwordRules={minLength:{enabled:!1,value:0},complexityUpper:{enabled:!1,value:0},complexityNumber:{enabled:!1,value:0},complexitySpecial:{enabled:!1,value:0},renewal:{enabled:!1,value:0},historyLastUse:{enabled:!1,value:0},lockTime:{enabled:!1,value:0},lockAttempts:{enabled:!1,value:0}},this.passwordRulesClone={},this.passwordRulesList=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.securitiesAdministration")),this.loading=!0,this.http.get("../rest/passwordRules").subscribe((function(e){t.passwordRulesList=e.rules,e.rules.forEach((function(e){t.passwordRules[e.label].enabled=e.enabled,t.passwordRules[e.label].value=e.value,t.passwordRules[e.label].label=t.translate.instant("lang.password"+e.label+"Required"),t.passwordRules[e.label].id=e.label,t.loading=!1})),t.passwordRulesClone=JSON.parse(JSON.stringify(t.passwordRules))}),(function(e){t.notify.error(e.error.errors)}))}},{key:"cancelModification",value:function(){var t=this;this.passwordRules=JSON.parse(JSON.stringify(this.passwordRulesClone)),this.passwordRulesList.forEach((function(e){e.enabled=t.passwordRules[e.label].enabled,e.value=t.passwordRules[e.label].value}))}},{key:"checkModif",value:function(){return JSON.stringify(this.passwordRules)===JSON.stringify(this.passwordRulesClone)}},{key:"disabledForm",value:function(){return!(this.passwordRules.lockTime.enabled||this.passwordRules.minLength.enabled||this.passwordRules.lockAttempts.enabled||this.passwordRules.renewal.enabled||this.passwordRules.historyLastUse.enabled)}},{key:"toggleRule",value:function(t){var e=this;t.enabled=!t.enabled,this.passwordRulesList.forEach((function(n){"lockAttempts"!==t.id||"lockTime"!==n.label&&"lockAttempts"!==n.label?t.id===n.label&&(n.enabled=t.enabled):(n.enabled=t.enabled,e.passwordRules.lockTime.enabled=t.enabled)}))}},{key:"onSubmit",value:function(){var t=this;this.passwordRulesList.forEach((function(e){e.enabled=t.passwordRules[e.label].enabled,e.value=t.passwordRules[e.label].value})),this.http.put("../rest/passwordRules",{rules:this.passwordRulesList}).subscribe((function(e){t.passwordRulesClone=JSON.parse(JSON.stringify(t.passwordRules)),t.notify.success(t.translate.instant("lang.passwordRulesUpdated"))}),(function(e){t.notify.error(e.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||fg)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a))},fg.\u0275cmp=u.Nb({type:fg,selectors:[["ng-component"]],decls:13,vars:8,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[3,"label"],[3,"ngSubmit"],["passwordForm","ngForm"],[2,"margin-bottom","40px","text-align","center"],["color","primary",2,"padding-left","10px","padding-right","10px",3,"name","checked","change"],[2,"margin-top","15px","margin-bottom","15px"],["mat-list-icon",""],["color","primary",2,"position","relative","top","-10px",3,"checked","change"],["mat-line",""],["type","number","min","1","pattern","^[1-9][0-9]*","matInput","","required","",3,"disabled","name","ngModel","placeholder","ngModelChange"],["matSuffix",""],["mat-line","",2,"display","flex"],[2,"flex","1","padding-right","10px"],[2,"flex","1"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","type","submit","color","primary",3,"disabled"],["mat-raised-button","","type","button","color","default",3,"disabled","click"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Zb(1,"mat-sidenav-content"),u.Zb(2,"div",1),u.Zb(3,"div",2),u.Zb(4,"div",3),u.Ub(5,"header-left"),u.Yb(),u.Zb(6,"div",4),u.Ub(7,"header-right"),u.Yb(),u.Yb(),u.Ub(8,"div",5),u.Yb(),u.Zb(9,"div",6),u.Zb(10,"div",7),u.Qc(11,ug,2,0,"div",8),u.Qc(12,mg,56,53,"mat-card",9),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(3),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading))},directives:[S.e,S.f,M.a,Y.a,Z.t,O.c,T.a,Re.c,Re.a,o.J,o.u,o.v,Dt.a,nt.a,Dt.d,Ut.a,Dt.c,I.k,k.c,o.z,w.b,o.c,o.A,o.E,o.t,o.w,k.j,D.b],pipes:[m.d],encapsulation:2}),fg),gg=["snav2"],hg=["adminMenuTemplate"],vg=["sendmailForm"];function yg(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-nav-list"),u.Zb(1,"h3",14),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"a",22),u.hc("click",(function(){return u.Hc(n),u.lc(),u.Dc(16).toggle()})),u.Ub(5,"mat-icon",23),u.Zb(6,"p",24),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Yb(),u.Yb()}2&t&&(u.Eb(2),u.Tc(u.nc(3,2,"lang.actions")),u.Eb(5),u.Uc(" ",u.nc(8,4,"lang.checkSendmail")," "))}function Cg(t,e){1&t&&(u.Zb(0,"div",25),u.Ub(1,"mat-spinner",26),u.Yb())}function Eg(t,e){if(1&t&&(u.Zb(0,"mat-option",49),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n.id),u.Eb(1),u.Uc(" ",n.label," ")}}function Sg(t,e){if(1&t&&(u.Zb(0,"mat-option",49),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n.id),u.Eb(1),u.Uc(" ",n.label," ")}}var Mg=function(){return["smtp","mail"]},xg=function(t){return[t]};function Yg(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-card",27),u.Zb(1,"mat-tab-group"),u.Zb(2,"mat-tab",28),u.mc(3,"translate"),u.Zb(4,"form",29,30),u.hc("ngSubmit",(function(){return u.Hc(n),u.lc().onSubmit()})),u.Zb(6,"div",15),u.Zb(7,"div",31),u.Zb(8,"mat-form-field"),u.Zb(9,"mat-select",32,33),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().sendmail.type=t})),u.mc(11,"translate"),u.Qc(12,Eg,2,2,"mat-option",34),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(13,"div",15),u.Zb(14,"div",35),u.Zb(15,"mat-form-field"),u.Zb(16,"mat-select",36),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().sendmail.secure=t})),u.mc(17,"translate"),u.Qc(18,Sg,2,2,"mat-option",34),u.Yb(),u.Yb(),u.Yb(),u.Zb(19,"div",37),u.Zb(20,"mat-form-field"),u.Zb(21,"input",38),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().sendmail.host=t})),u.mc(22,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(23,"div",39),u.Zb(24,"mat-form-field"),u.Zb(25,"input",40),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().sendmail.port=t})),u.mc(26,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(27,"div",15),u.Zb(28,"div",16),u.Zb(29,"mat-slide-toggle",41),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().sendmail.auth=t}))("change",(function(t){return u.Hc(n),u.lc().cleanAuthInfo(t)})),u.Sc(30),u.mc(31,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(32,"div",15),u.Zb(33,"div",16),u.Zb(34,"mat-form-field"),u.Zb(35,"input",42),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().sendmail.user=t})),u.mc(36,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(37,"div",16),u.Zb(38,"mat-form-field"),u.Zb(39,"input",43),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().sendmail.password=t})),u.Yb(),u.Zb(40,"mat-icon",44),u.hc("click",(function(){u.Hc(n);var t=u.lc();return t.hidePassword=!t.hidePassword})),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(41,"div",15),u.Zb(42,"div",16),u.Zb(43,"mat-form-field"),u.Zb(44,"input",45),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().sendmail.from=t})),u.mc(45,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(46,"div",46),u.Zb(47,"button",47),u.Sc(48),u.mc(49,"translate"),u.Yb(),u.Zb(50,"button",48),u.hc("click",(function(){return u.Hc(n),u.lc().cancelModification()})),u.Sc(51),u.mc(52,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.Dc(5),i=u.lc();u.Eb(2),u.tc("label",u.nc(3,38,"lang.informations")),u.Eb(7),u.tc("placeholder",u.nc(11,40,"lang.configurationType")),u.sc("ngModel",i.sendmail.type),u.Eb(3),u.sc("ngForOf",i.smtpTypeList),u.Eb(1),u.Pc("opacity",u.yc(58,Mg).indexOf(i.sendmail.type)>-1?"1":"0.5"),u.Eb(3),u.tc("placeholder",u.nc(17,42,"lang.smtpAuth")),u.sc("disabled",-1==u.yc(59,Mg).indexOf(i.sendmail.type))("ngModel",i.sendmail.secure),u.Eb(2),u.sc("ngForOf",i.smtpSecList),u.Eb(3),u.tc("placeholder",u.nc(22,44,"lang.host")),u.sc("disabled",-1==u.yc(60,Mg).indexOf(i.sendmail.type))("ngModel",i.sendmail.host),u.Eb(4),u.tc("placeholder",u.nc(26,46,"lang.port")),u.sc("ngModel",i.sendmail.port)("disabled",-1==u.yc(61,Mg).indexOf(i.sendmail.type)),u.Eb(2),u.Pc("opacity",u.yc(62,Mg).indexOf(i.sendmail.type)>-1?"1":"0.5"),u.Eb(2),u.sc("ngModel",i.sendmail.auth)("disabled",-1==u.yc(63,Mg).indexOf(i.sendmail.type)),u.Eb(1),u.Tc(u.nc(31,48,"lang.enableAuth")),u.Eb(2),u.Pc("opacity",u.yc(64,Mg).indexOf(i.sendmail.type)>-1?"1":"0.5"),u.Eb(3),u.tc("placeholder",u.nc(36,50,"lang.id")),u.sc("ngModel",i.sendmail.user)("disabled",!i.sendmail.auth||-1==u.yc(65,Mg).indexOf(i.sendmail.type)),u.Eb(4),u.sc("type",i.hidePassword?"password":"text")("ngModel",i.sendmail.password)("disabled",!i.sendmail.auth||-1==u.yc(66,Mg).indexOf(i.sendmail.type))("placeholder",i.translate.instant(!0===i.sendmail.passwordAlreadyExists?"lang.passwordModification":"lang.password"))("required",!i.sendmail.passwordAlreadyExists),u.Eb(1),u.sc("ngClass",u.zc(67,xg,i.hidePassword?"fa-eye-slash":"fa-eye")),u.Eb(4),u.tc("placeholder",u.nc(45,52,"lang.mailFrom")),u.sc("ngModel",i.sendmail.from),u.Eb(3),u.sc("disabled",i.checkModif()||!a.valid),u.Eb(1),u.Tc(u.nc(49,54,"lang.validate")),u.Eb(2),u.sc("disabled",i.checkModif()),u.Eb(1),u.Tc(u.nc(52,56,"lang.cancel"))}}function Zg(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-icon",50),u.hc("click",(function(){return u.Hc(n),u.lc().testEmailSend()})),u.mc(1,"translate"),u.Yb()}2&t&&u.tc("title",u.nc(1,1,"lang.beginSendTest"))}function _g(t,e){if(1&t&&(u.Zb(0,"mat-list-item"),u.Ub(1,"mat-icon",51),u.Zb(2,"p",24),u.Sc(3),u.Yb(),u.Yb()),2&t){var n=u.lc();u.Eb(1),u.Hb("fas ",n.emailSendResult.icon," fa-2x"),u.Eb(2),u.Uc(" ",n.emailSendResult.msg," ")}}function kg(t,e){if(1&t&&(u.Zb(0,"div",52),u.Sc(1),u.Yb()),2&t){var n=u.lc();u.Eb(1),u.Uc(" ",n.emailSendResult.debug," ")}}var wg,Og=((wg=function(){function t(e,n,a,i,r,c){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.headerService=i,this.appService=r,this.viewContainerRef=c,this.loading=!1,this.sendmail={type:"smtp",host:"",auth:!0,user:"",password:"",secure:"ssl",port:"465",charset:"utf-8",from:""},this.smtpTypeList=[{id:"smtp",label:this.translate.instant("lang.smtpclient")},{id:"sendmail",label:this.translate.instant("lang.smtprelay")},{id:"qmail",label:this.translate.instant("lang.qmail")},{id:"mail",label:this.translate.instant("lang.phpmail")}],this.smtpSecList=[{id:"",label:this.translate.instant("lang.none")},{id:"ssl",label:"ssl"},{id:"tls",label:"tls"}],this.sendmailClone={},this.hidePassword=!0,this.serverConnectionLoading=!1,this.emailSendLoading=!1,this.emailSendResult={icon:"",msg:"",debug:""},this.currentUser={},this.recipientTest="",this.passwordLabel=""}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.sendmailShort")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/configurations/admin_email_server").subscribe((function(e){t.sendmail=e.configuration.value,t.sendmailClone=JSON.parse(JSON.stringify(t.sendmail)),t.loading=!1}),(function(e){t.notify.handleErrors(e)}))}},{key:"cancelModification",value:function(){this.sendmail=JSON.parse(JSON.stringify(this.sendmailClone))}},{key:"onSubmit",value:function(){var t=this;this.sendmailFormCpt.invalid?this.notify.handleErrors({error:{errors:this.translate.instant("lang.notSavedBecauseInvalid")}}):this.http.put("../rest/configurations/admin_email_server",this.sendmail).subscribe((function(e){t.sendmailClone=JSON.parse(JSON.stringify(t.sendmail)),t.notify.success(t.translate.instant("lang.configurationUpdated"))}),(function(e){t.notify.handleErrors(e)}))}},{key:"checkModif",value:function(){return JSON.stringify(this.sendmailClone)===JSON.stringify(this.sendmail)}},{key:"initEmailSend",value:function(){var t=this;this.emailSendResult={icon:"",msg:"",debug:""},void 0===this.currentUser.mail&&this.http.get("../rest/currentUser/profile").subscribe((function(e){t.currentUser=e,t.recipientTest=e.mail}))}},{key:"testEmailSend",value:function(){var t=this;JSON.stringify(this.sendmailClone)!==JSON.stringify(this.sendmail)&&this.onSubmit(),this.emailSendResult={icon:"fa-paper-plane primary",msg:this.translate.instant("lang.emailSendInProgress"),debug:""};var e={sender:{email:this.currentUser.mail},recipients:[this.recipientTest],object:"["+this.translate.instant("lang.doNotReply")+"] "+this.translate.instant("lang.emailSendTest"),status:"EXPRESS",body:this.translate.instant("lang.emailSendTest"),isHtml:!1};this.emailSendLoading=!0,this.http.post("../rest/emails",e).subscribe((function(e){t.emailSendLoading=!1,t.emailSendResult={icon:"fa-check green",msg:t.translate.instant("lang.emailSendSuccess"),debug:""}}),(function(e){t.emailSendLoading=!1,t.emailSendResult={icon:"fa-times red",msg:t.translate.instant("lang.emailSendFailed"),debug:e.error.errors}}))}},{key:"cleanAuthInfo",value:function(t){this.sendmail.passwordAlreadyExists=!1,this.sendmail.user="",this.sendmail.password=""}}]),t}()).\u0275fac=function(t){return new(t||wg)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a),u.Tb(u.R))},wg.\u0275cmp=u.Nb({type:wg,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(gg,!0),u.Oc(hg,!0),u.ad(vg,!0)),2&t&&(u.Cc(n=u.ic())&&(e.sidenavRight=n.first),u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.sendmailFormCpt=n.first))},decls:31,vars:22,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],["joyrideStep","emailTour",1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",2,"overflow-x","hidden","width","500px",3,"mode","fixedInViewport","opened"],["snav2",""],["disableRipple","true",2,"display","flex","flex-direction","column"],["mat-subheader",""],[1,"form-group"],[1,"col-md-12"],["testSendmailForm","ngForm"],["name","recipientTest","matInput","","pattern","(^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$)",3,"placeholder","ngModel","disabled","ngModelChange"],["color","primary","style","cursor: pointer;","matSuffix","","class","fa fa-paper-plane fa-2x",3,"title","click",4,"ngIf"],[4,"ngIf"],["class","bash",4,"ngIf"],["mat-list-item","","joyrideStep","emailTour2",3,"click"],["color","primary","mat-list-icon","",1,"fas","fa-signal"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[3,"label"],[3,"ngSubmit"],["sendmailForm","ngForm"],[1,"col-md-12",2,"margin-bottom","20px"],["name","smtpType","required","",3,"placeholder","ngModel","ngModelChange"],["smtpType",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-2"],["name","SMTPSecure",3,"placeholder","disabled","ngModel","ngModelChange"],[1,"col-md-9"],["matInput","","name","host","required","",3,"disabled","ngModel","placeholder","ngModelChange"],[1,"col-md-1"],["name","port","type","number","matInput","","required","",3,"ngModel","disabled","placeholder","ngModelChange"],["color","primary","name","SMTPAuth",3,"ngModel","disabled","ngModelChange","change"],["name","user","matInput","","required","",3,"ngModel","disabled","placeholder","ngModelChange"],["name","password","matInput","",3,"type","ngModel","disabled","placeholder","required","ngModelChange"],["color","primary","matSuffix","",1,"fa","fa-2x",2,"cursor","pointer",3,"ngClass","click"],["name","mailFrom","required","","matInput","","pattern","(^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$)",3,"ngModel","placeholder","ngModelChange"],[1,"col-md-12","text-center",2,"padding","10px"],["mat-raised-button","","type","submit","color","primary",3,"disabled"],["mat-raised-button","","type","button","color","default",3,"disabled","click"],[3,"value"],["color","primary","matSuffix","",1,"fa","fa-paper-plane","fa-2x",2,"cursor","pointer",3,"title","click"],["mat-list-icon",""],[1,"bash"]],template:function(t,e){if(1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,yg,9,6,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,Cg,2,0,"div",9),u.Qc(14,Yg,53,69,"mat-card",10),u.Yb(),u.Yb(),u.Yb(),u.Zb(15,"mat-sidenav",11,12),u.hc("opened",(function(){return e.onSubmit(),e.initEmailSend()})),u.Zb(17,"mat-nav-list",13),u.Zb(18,"h3",14),u.Sc(19),u.mc(20,"translate"),u.Yb(),u.Zb(21,"div",15),u.Zb(22,"div",16),u.Zb(23,"form",null,17),u.Zb(25,"mat-form-field"),u.Zb(26,"input",18),u.hc("ngModelChange",(function(t){return e.recipientTest=t})),u.mc(27,"translate"),u.Yb(),u.Qc(28,Zg,2,3,"mat-icon",19),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Qc(29,_g,4,4,"mat-list-item",20),u.Yb(),u.Qc(30,kg,2,1,"div",21),u.Yb(),u.Yb()),2&t){var n=u.Dc(24);u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading),u.Eb(1),u.sc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",(e.appService.getViewMode(),!1)),u.Eb(4),u.Tc(u.nc(20,18,"lang.emailSendTest")),u.Eb(7),u.tc("placeholder",u.nc(27,20,"lang.mailTo")),u.sc("ngModel",e.recipientTest)("disabled",e.emailSendLoading),u.Eb(2),u.sc("ngIf",!e.emailSendLoading&&n.valid),u.Eb(1),u.sc("ngIf",""!=e.emailSendResult.msg),u.Eb(1),u.sc("ngIf",e.emailSendResult.msg===e.translate.instant("lang.emailSendFailed"))}},directives:[S.e,S.f,M.a,Y.a,x.a,Z.t,S.d,Dt.h,Dt.g,o.J,o.u,o.v,k.c,w.b,o.c,o.A,o.t,o.w,Dt.d,Ut.a,Dt.c,I.k,O.c,T.a,Re.c,Re.a,it.a,o.E,Z.s,o.z,nt.a,k.j,Z.q,D.b,I.o],pipes:[m.d],styles:[".mat-list-item[_ngcontent-%COMP%]:hover{background:inherit}.green[_ngcontent-%COMP%]{color:green}.primary[_ngcontent-%COMP%]{color:#135f7f}.red[_ngcontent-%COMP%]{color:red}.bash[_ngcontent-%COMP%]{background:#34495e;height:310px;border-radius:5px;top:40px;display:absolute;color:#fff;padding:10px;margin:10px}"]}),wg),Tg=["adminMenuTemplate"];function Ig(t,e){1&t&&(u.Zb(0,"mat-nav-list"),u.Zb(1,"h3",11),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"a",12),u.Ub(5,"mat-icon",13),u.Zb(6,"p",14),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(2),u.Tc(u.nc(3,2,"lang.actions")),u.Eb(5),u.Uc(" ",u.nc(8,4,"lang.add")," "))}function Dg(t,e){1&t&&(u.Zb(0,"div",15),u.Ub(1,"mat-spinner",16),u.Yb())}function Ug(t,e){if(1&t&&(u.Zb(0,"mat-header-cell",38),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=u.lc(2);u.Jb("hide-for-mobile",n.appService.getViewMode()),u.Eb(1),u.Tc(u.nc(2,3,"lang.label"))}}function Pg(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.Jb("hide-for-mobile",a.appService.getViewMode()),u.Eb(1),u.Uc(" ",n.label," ")}}function Fg(t,e){1&t&&(u.Zb(0,"mat-header-cell",38),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.description")))}function Lg(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.description," ")}}function jg(t,e){1&t&&(u.Zb(0,"mat-header-cell",38),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.mailevaAccount")))}function Rg(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.accountid," ")}}function Qg(t,e){1&t&&u.Ub(0,"mat-header-cell")}function Ag(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-cell",39),u.Zb(1,"button",40),u.hc("click",(function(t){u.Hc(n);var a=e.$implicit,i=u.lc(2);return t.stopPropagation(),i.deleteShipping(a.id)})),u.mc(2,"translate"),u.Ub(3,"mat-icon",41),u.Yb(),u.Yb()}2&t&&(u.Eb(1),u.tc("matTooltip",u.nc(2,1,"lang.delete")))}function Hg(t,e){1&t&&u.Ub(0,"mat-header-row")}function zg(t,e){1&t&&(u.Ub(0,"mat-row",42),u.mc(1,"translate")),2&t&&(u.uc("routerLink","/administration/shippings/",e.$implicit.id,""),u.tc("matTooltip",u.nc(1,2,"lang.view")))}function $g(t,e){if(1&t&&(u.Zb(0,"mat-card",17),u.Zb(1,"div",18),u.Zb(2,"div",19),u.Zb(3,"mat-form-field"),u.Ub(4,"input",20),u.mc(5,"translate"),u.Yb(),u.Yb(),u.Zb(6,"div",19),u.Ub(7,"mat-paginator",21,22),u.Yb(),u.Yb(),u.Zb(9,"mat-table",23,24),u.Xb(11,25),u.Qc(12,Ug,3,5,"mat-header-cell",26),u.Qc(13,Pg,2,3,"mat-cell",27),u.Wb(),u.Xb(14,28),u.Qc(15,Fg,3,3,"mat-header-cell",29),u.Qc(16,Lg,2,1,"mat-cell",30),u.Wb(),u.Xb(17,31),u.Qc(18,jg,3,3,"mat-header-cell",29),u.Qc(19,Rg,2,1,"mat-cell",30),u.Wb(),u.Xb(20,32),u.Qc(21,Qg,1,0,"mat-header-cell",33),u.Qc(22,Ag,4,3,"mat-cell",34),u.Wb(),u.Qc(23,Hg,1,0,"mat-header-row",35),u.Qc(24,zg,2,4,"mat-row",36),u.Yb(),u.Zb(25,"div",37),u.Sc(26),u.mc(27,"translate"),u.Yb(),u.Yb()),2&t){var n=u.lc();u.Eb(4),u.tc("placeholder",u.nc(5,10,"lang.filterBy")),u.sc("formControl",n.adminService.getFilterField()),u.Eb(3),u.sc("length",100)("hidePageSize",!0)("pageSize",10),u.Eb(2),u.sc("dataSource",n.adminService.getDataSource()),u.Eb(14),u.sc("matHeaderRowDef",n.displayedColumns),u.Eb(1),u.sc("matRowDefColumns",n.displayedColumns),u.Eb(2),u.Vc(" ",n.shippings.length," ",u.nc(27,12,"lang.shippings"),"")}}var Vg,Ng=((Vg=function(){function t(e,n,a,i,r,c,o,s){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.headerService=i,this.appService=r,this.functions=c,this.adminService=o,this.viewContainerRef=s,this.shippings=[],this.loading=!1,this.displayedColumns=["label","description","accountid","actions"],this.filterColumns=["label","description","accountid"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.shippings")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/administration/shippings").subscribe((function(e){t.shippings=e.shippings,setTimeout((function(){t.adminService.setDataSource("admin_shippings",t.shippings,t.sort,t.paginator,t.filterColumns)}),0),t.loading=!1}))}},{key:"deleteShipping",value:function(t){var e=this;confirm(this.translate.instant("lang.deleteMsg"))&&this.http.delete("../rest/administration/shippings/"+t).subscribe((function(t){e.shippings=t.shippings,e.adminService.setDataSource("admin_shippings",e.shippings,e.sort,e.paginator,e.filterColumns),e.notify.success(e.translate.instant("lang.shippingDeleted"))}),(function(t){e.notify.error(t.error.errors)}))}}]),t}()).\u0275fac=function(t){return new(t||Vg)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a),u.Tb(C.a),u.Tb(It),u.Tb(u.R))},Vg.\u0275cmp=u.Nb({type:Vg,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(Tg,!0),u.ad(V.a,!0),u.ad(N.a,!0)),2&t&&(u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.paginator=n.first),u.Cc(n=u.ic())&&(e.sort=n.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/shippings/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","label"],["mat-sort-header","",3,"hide-for-mobile",4,"matHeaderCellDef"],[3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","description"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","accountid"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header",""],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,Ig,9,6,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,Dg,2,0,"div",9),u.Qc(14,$g,28,14,"mat-card",10),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading))},directives:[S.e,S.f,M.a,Y.a,Z.t,Dt.h,Dt.g,Dt.d,r.f,Ut.a,Dt.c,I.k,O.c,T.a,k.c,w.b,o.c,o.t,o.i,V.a,B.n,N.a,B.c,B.i,B.b,B.k,B.m,B.h,N.b,B.a,D.b,Ft.b,B.j,B.l,r.d],pipes:[m.d],encapsulation:2}),Vg),Jg=["snav2"],Gg=["maarchTree"];function Bg(t,e){1&t&&(u.Zb(0,"div",16),u.Ub(1,"mat-spinner",17),u.Yb())}function Wg(t,e){if(1&t&&u.Ub(0,"div",54),2&t){var n=u.lc(2);u.sc("innerHTML",n.translate.instant("lang.shippingUnavailable"),u.Ic)}}function qg(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-list-item",55),u.Zb(1,"mat-slide-toggle",56),u.hc("change",(function(){u.Hc(n);var t=e.$implicit;return u.lc(2).toggleShapingOption(t)})),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit,i=u.lc(2);u.Eb(1),u.tc("name",a),u.sc("checked",i.shipping.options.shapingOptions.indexOf(a)>-1),u.Eb(1),u.Tc(u.nc(3,3,"lang.maileva_"+a))}}function Xg(t,e){if(1&t&&u.Ub(0,"div",57),2&t){var n=u.lc(2);u.sc("innerHTML",n.translate.instant("lang.warnShapingOption"),u.Ic)}}function Kg(t,e){if(1&t&&(u.Zb(0,"mat-radio-button",58),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=e.$implicit;u.tc("name",n),u.sc("value",n),u.Eb(1),u.Uc(" ",u.nc(2,3,"lang.maileva_"+n)," ")}}var th=function(t){return[t]};function eh(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-card",18),u.Qc(1,Wg,1,1,"div",19),u.Zb(2,"form",20,21),u.hc("ngSubmit",(function(){return u.Hc(n),u.lc().onSubmit()})),u.Zb(4,"div",22),u.Zb(5,"div",23),u.Zb(6,"mat-form-field"),u.Zb(7,"input",24),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().shipping.label=t})),u.mc(8,"translate"),u.mc(9,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(10,"div",22),u.Zb(11,"div",23),u.Zb(12,"mat-form-field"),u.Zb(13,"input",25),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().shipping.description=t})),u.mc(14,"translate"),u.mc(15,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(16,"div",26),u.Zb(17,"div",27),u.Zb(18,"div",28),u.Sc(19),u.mc(20,"translate"),u.Yb(),u.Zb(21,"mat-list",29),u.Qc(22,qg,4,5,"mat-list-item",30),u.Qc(23,Xg,1,1,"div",31),u.Yb(),u.Yb(),u.Zb(24,"div",32),u.Zb(25,"div",28),u.Sc(26),u.mc(27,"translate"),u.Yb(),u.Zb(28,"mat-radio-group",33),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().shipping.options.sendMode=t})),u.Qc(29,Kg,3,5,"mat-radio-button",34),u.Yb(),u.Yb(),u.Yb(),u.Zb(30,"div",26),u.Zb(31,"div",35),u.Zb(32,"div",28),u.Sc(33),u.mc(34,"translate"),u.Yb(),u.Zb(35,"div",36),u.Zb(36,"label",37),u.Sc(37),u.mc(38,"translate"),u.Yb(),u.Zb(39,"mat-form-field",38),u.Zb(40,"input",39),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().shipping.fee.firstPagePrice=t})),u.mc(41,"translate"),u.Yb(),u.Zb(42,"span",40),u.Sc(43,"\xa0\u20ac"),u.Yb(),u.Yb(),u.Yb(),u.Zb(44,"div",36),u.Zb(45,"label",41),u.Sc(46),u.mc(47,"translate"),u.Yb(),u.Zb(48,"mat-form-field",38),u.Zb(49,"input",42),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().shipping.fee.nextPagePrice=t})),u.mc(50,"translate"),u.Yb(),u.Zb(51,"span",40),u.Sc(52,"\xa0\u20ac"),u.Yb(),u.Yb(),u.Yb(),u.Zb(53,"div",36),u.Zb(54,"label",43),u.Sc(55),u.mc(56,"translate"),u.Yb(),u.Zb(57,"mat-form-field",38),u.Zb(58,"input",44),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().shipping.fee.postagePrice=t})),u.mc(59,"translate"),u.Yb(),u.Zb(60,"span",40),u.Sc(61,"\xa0\u20ac"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(62,"div",45),u.Zb(63,"div",28),u.Sc(64),u.mc(65,"translate"),u.Yb(),u.Zb(66,"div",46),u.Sc(67),u.mc(68,"translate"),u.Yb(),u.Zb(69,"div",23),u.Zb(70,"mat-form-field"),u.Zb(71,"input",47),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().shipping.account.id=t})),u.mc(72,"translate"),u.mc(73,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(74,"div",23),u.Zb(75,"mat-form-field"),u.Zb(76,"input",48),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().shipping.account.password=t})),u.Yb(),u.Zb(77,"mat-icon",49),u.hc("click",(function(){u.Hc(n);var t=u.lc();return t.hidePassword=!t.hidePassword})),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(78,"div",50),u.Zb(79,"div",51),u.Zb(80,"button",52),u.Sc(81),u.mc(82,"translate"),u.Yb(),u.Zb(83,"button",53),u.hc("click",(function(){return u.Hc(n),u.lc().cancelModification()})),u.Sc(84),u.mc(85,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.Dc(3),i=u.lc();u.Eb(1),u.sc("ngIf",!i.shippingAvailable),u.Eb(6),u.tc("title",u.nc(8,37,"lang.label")),u.tc("placeholder",u.nc(9,39,"lang.label")),u.sc("ngModel",i.shipping.label),u.Eb(6),u.tc("title",u.nc(14,41,"lang.description")),u.tc("placeholder",u.nc(15,43,"lang.description")),u.sc("ngModel",i.shipping.description),u.Eb(6),u.Uc(" ",u.nc(20,45,"lang.shapingOptions")," "),u.Eb(3),u.sc("ngForOf",i.shapingOptions),u.Eb(1),u.sc("ngIf",-1==i.shipping.options.shapingOptions.indexOf("addressPage")),u.Eb(3),u.Uc(" ",u.nc(27,47,"lang.sendModes")," "),u.Eb(2),u.sc("ngModel",i.shipping.options.sendMode),u.Eb(1),u.sc("ngForOf",i.sendModes),u.Eb(4),u.Uc(" ",u.nc(34,49,"lang.pricesInformations")," "),u.Eb(4),u.Uc(" ",u.nc(38,51,"lang.maileva_firstPagePrice")," "),u.Eb(3),u.tc("title",u.nc(41,53,"lang.maileva_firstPagePrice")),u.sc("ngModel",i.shipping.fee.firstPagePrice),u.Eb(6),u.Uc(" ",u.nc(47,55,"lang.maileva_nextPagePrice")," "),u.Eb(3),u.tc("title",u.nc(50,57,"lang.maileva_nextPagePrice")),u.sc("ngModel",i.shipping.fee.nextPagePrice),u.Eb(6),u.Uc(" ",u.nc(56,59,"lang.maileva_postagePrice")," "),u.Eb(3),u.tc("title",u.nc(59,61,"lang.maileva_postagePrice")),u.sc("ngModel",i.shipping.fee.postagePrice),u.Eb(6),u.Uc(" ",u.nc(65,63,"lang.mailevaAccount")," "),u.Eb(3),u.Tc(u.nc(68,65,"lang.infoMailevaAccount")),u.Eb(4),u.tc("title",u.nc(72,67,"lang.login")),u.tc("placeholder",u.nc(73,69,"lang.id")),u.sc("ngModel",i.shipping.account.id),u.Eb(5),u.sc("type",i.hidePassword?"password":"text")("ngModel",i.shipping.account.password)("placeholder",i.translate.instant(!1===i.creationMode?"lang.passwordModification":"lang.password"))("required",i.creationMode),u.Eb(1),u.sc("ngClass",u.zc(75,th,i.hidePassword?"fa-eye-slash":"fa-eye")),u.Eb(3),u.sc("disabled",i.checkModif()||!a.valid),u.Eb(1),u.Tc(u.nc(82,71,"lang.validate")),u.Eb(2),u.sc("disabled",i.checkModif()),u.Eb(1),u.Tc(u.nc(85,73,"lang.cancel"))}}var nh,ah=((nh=function(){function t(e,n,a,i,r,c,o){_classCallCheck(this,t),this.translate=e,this.http=n,this.route=a,this.router=i,this.notify=r,this.headerService=c,this.appService=o,this.loading=!1,this.creationMode=!0,this.shipping={label:"",description:"",options:{shapingOptions:["addressPage"],sendMode:"fast"},fee:{firstPagePrice:0,nextPagePrice:0,postagePrice:0},account:{id:"",password:""},entities:[]},this.entities=[],this.entitiesClone=null,this.shippingClone=null,this.shapingOptions=["color","duplexPrinting","addressPage"],this.sendModes=["fast","economic"],this.hidePassword=!0,this.shippingAvailable=!1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.http.get("../rest/externalConnectionsEnabled").pipe(Object(d.a)((function(e){t.shippingAvailable=!0===e.connection.maileva})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(J.of)(!1)}))).subscribe(),this.route.params.subscribe((function(e){void 0===e.id?(t.headerService.setHeader(t.translate.instant("lang.shippingCreation")),t.creationMode=!0,t.http.get("../rest/administration/shippings/new").subscribe((function(e){t.entities=e.entities.map((function(t){return Object.assign(Object.assign({},t),{id:parseInt(t.id)})})),t.entitiesClone=JSON.parse(JSON.stringify(t.entities)),t.initEntitiesTree(t.entities),t.shippingClone=JSON.parse(JSON.stringify(t.shipping)),t.loading=!1}),(function(e){t.notify.handleErrors(e)})),t.loading=!1):(t.headerService.setHeader(t.translate.instant("lang.shippingModification")),t.creationMode=!1,t.http.get("../rest/administration/shippings/"+e.id).subscribe((function(e){t.shipping=e.shipping,t.entities=e.entities,t.entitiesClone=JSON.parse(JSON.stringify(t.entities)),t.initEntitiesTree(t.entities),t.shippingClone=JSON.parse(JSON.stringify(t.shipping)),t.loading=!1}),(function(e){t.notify.handleErrors(e)})))}))}},{key:"initEntitiesTree",value:function(t){this.maarchTree.initData(t)}},{key:"updateSelectedEntities",value:function(){this.shipping.entities=this.maarchTree.getSelectedNodes().map((function(t){return t.id}))}},{key:"onSubmit",value:function(){var t=this;this.creationMode?this.http.post("../rest/administration/shippings",this.shipping).subscribe((function(e){t.shippingClone=JSON.parse(JSON.stringify(t.shipping)),t.notify.success(t.translate.instant("lang.shippingAdded")),t.router.navigate(["/administration/shippings"])}),(function(e){t.notify.handleErrors(e)})):this.http.put("../rest/administration/shippings/"+this.shipping.id,this.shipping).subscribe((function(e){t.shippingClone=JSON.parse(JSON.stringify(t.shipping)),t.notify.success(t.translate.instant("lang.shippingUpdated")),t.router.navigate(["/administration/shippings"])}),(function(e){t.notify.handleErrors(e)}))}},{key:"checkModif",value:function(){return JSON.stringify(this.shippingClone)===JSON.stringify(this.shipping)}},{key:"toggleShapingOption",value:function(t){var e=this.shipping.options.shapingOptions.indexOf(t);e>-1?this.shipping.options.shapingOptions.splice(e,1):this.shipping.options.shapingOptions.push(t)}},{key:"cancelModification",value:function(){this.shipping=JSON.parse(JSON.stringify(this.shippingClone)),this.entities=JSON.parse(JSON.stringify(this.entitiesClone)),this.initEntitiesTree(this.entities)}}]),t}()).\u0275fac=function(t){return new(t||nh)(u.Tb(m.e),u.Tb(f.b),u.Tb(r.a),u.Tb(r.c),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a))},nh.\u0275cmp=u.Nb({type:nh,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(Jg,!0),u.Oc(Gg,!0)),2&t&&(u.Cc(n=u.ic())&&(e.sidenavRight=n.first),u.Cc(n=u.ic())&&(e.maarchTree=n.first))},decls:22,vars:14,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",2,"overflow-x","hidden","width","400px",3,"mode","fixedInViewport","opened"],["snav2",""],["mat-subheader",""],[2,"padding","10px"],[3,"afterSelectNode","afterDeselectNode"],["maarchTree",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],["class","alert-message alert-message-danger","role","alert","style","max-width: 100%",3,"innerHTML",4,"ngIf"],[1,"form-horizontal",3,"ngSubmit"],["shippingForm","ngForm"],[1,"form-group"],[1,"col-sm-12"],["matInput","","required","","name","label","id","label","type","text","maxlength","64",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","required","","name","description","id","description","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],[1,"form-group",2,"flex-direction","row","flex-wrap","wrap"],[1,"formType","ratio-2","col-sm-12"],[1,"formType-title"],["role","list"],["role","listitem",4,"ngFor","ngForOf"],["class","alert-message alert-message-danger","role","alert","style","margin-top: 30px;max-width: none;",3,"innerHTML",4,"ngIf"],[1,"formType","ratio-1","col-sm-12"],["name","sendMode",1,"radio-group",3,"ngModel","ngModelChange"],["color","primary",3,"name","value",4,"ngFor","ngForOf"],[1,"formType","ratio-2",2,"flex-direction","column"],[1,"priceContent"],["for","firstPagePrice",1,"priceContent-label"],["appearance","outline"],["matInput","","required","","name","firstPagePrice","id","firstPagePrice","type","number","maxlength","255","min","0","step","0.1","pattern","^(?=.+)(?:[1-9]\\d*|0)?(?:\\.\\d+)?$",3,"ngModel","title","ngModelChange"],["matSuffix",""],["for","nextPagePrice",1,"priceContent-label"],["matInput","","required","","name","nextPagePrice","id","nextPagePrice","type","number","maxlength","255","min","0","step","0.1","pattern","^(?=.+)(?:[1-9]\\d*|0)?(?:\\.\\d+)?$",3,"ngModel","title","ngModelChange"],["for","postagePrice",1,"priceContent-label"],["matInput","","required","","name","postagePrice","id","postagePrice","type","number","maxlength","255","min","0","step","0.1","pattern","^(?=.+)(?:[1-9]\\d*|0)?(?:\\.\\d+)?$",3,"ngModel","title","ngModelChange"],[1,"formType","ratio-1",2,"flex-direction","column","justify-content","center"],[1,"alert-message","alert-message-info",2,"max-width","none"],["matInput","","required","","name","login","id","login","type","text","maxlength","255",3,"ngModel","title","placeholder","ngModelChange"],["name","password","matInput","",3,"type","ngModel","placeholder","required","ngModelChange"],["color","primary","matSuffix","","maxlength","255",1,"fa","fa-2x",2,"cursor","pointer",3,"ngClass","click"],[1,"form-group",2,"flex-direction","row","align-items","center"],[1,"col-sm-12","text-center",2,"padding","10px"],["mat-raised-button","","type","submit","color","primary",3,"disabled"],["mat-raised-button","","type","button","color","default",3,"disabled","click"],["role","alert",1,"alert-message","alert-message-danger",2,"max-width","100%",3,"innerHTML"],["role","listitem"],["color","primary",3,"name","checked","change"],["role","alert",1,"alert-message","alert-message-danger",2,"margin-top","30px","max-width","none",3,"innerHTML"],["color","primary",3,"name","value"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Zb(1,"mat-sidenav-content"),u.Zb(2,"div",1),u.Zb(3,"div",2),u.Zb(4,"div",3),u.Ub(5,"header-left"),u.Yb(),u.Zb(6,"div",4),u.Ub(7,"header-right"),u.Yb(),u.Yb(),u.Ub(8,"div",5),u.Yb(),u.Zb(9,"div",6),u.Zb(10,"div",7),u.Qc(11,Bg,2,0,"div",8),u.Qc(12,eh,86,77,"mat-card",9),u.Yb(),u.Yb(),u.Yb(),u.Zb(13,"mat-sidenav",10,11),u.Zb(15,"mat-list"),u.Zb(16,"h3",12),u.Sc(17),u.mc(18,"translate"),u.Yb(),u.Zb(19,"div",13),u.Zb(20,"app-maarch-flat-tree",14,15),u.hc("afterSelectNode",(function(){return e.updateSelectedEntities()}))("afterDeselectNode",(function(){return e.updateSelectedEntities()})),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(3),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading),u.Eb(1),u.sc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!e.appService.getViewMode()),u.Eb(4),u.Tc(u.nc(18,12,"lang.chooseEntityAssociationModel")))},directives:[S.e,S.f,M.a,Y.a,Z.t,S.d,Dt.a,Dt.g,Ae.a,O.c,T.a,o.J,o.u,o.v,k.c,w.b,o.c,o.E,o.o,o.t,o.w,Z.s,Je.b,o.z,o.A,k.j,Ut.a,Z.q,D.b,Dt.d,nt.a,Je.a],pipes:[m.d],styles:[".radio-group[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column}.radio-group[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]{padding:10px}.form-group[_ngcontent-%COMP%], .formType[_ngcontent-%COMP%]{display:flex}.formType[_ngcontent-%COMP%]{align-items:center;margin:10px;border-radius:4px;border:1px solid #ccc;position:relative;padding:10px}.formType-title[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;max-width:85%;text-overflow:ellipsis;z-index:1;font-size:10px;font-weight:700;background:#fff;position:absolute;top:-7px;left:10px;padding:0;margin:0;color:#135f7f}.formType[_ngcontent-%COMP%]    .mat-slide-toggle-label{color:#666;font-weight:700}.formType[_ngcontent-%COMP%]    .mat-radio-button, .formType[_ngcontent-%COMP%]    .mat-slide-toggle{opacity:.5;color:#666;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.formType[_ngcontent-%COMP%]    .mat-checked, .formType[_ngcontent-%COMP%]    .mat-radio-checked{opacity:1;color:#135f7f}.formType[_ngcontent-%COMP%]    .mat-checked .mat-slide-toggle-label{color:#135f7f}.formType[_ngcontent-%COMP%]    .mat-form-field-suffix{color:#f99830;font-size:15px;top:0}.ratio-1[_ngcontent-%COMP%], .ratio-2[_ngcontent-%COMP%]{flex:1}.priceContent[_ngcontent-%COMP%]{display:flex;align-items:first baseline;width:100%}.priceContent-label[_ngcontent-%COMP%]{text-align:right;color:#135f7f;flex:1;justify-content:flex-end;display:flex;padding-right:10px}.priceContent[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:90px!important}.priceContent[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-weight:700;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.priceInfo[_ngcontent-%COMP%]{font-size:10px;font-weight:700;opacity:.5}label[_ngcontent-%COMP%]{cursor:pointer}"]}),nh),ih=["snav2"];function rh(t,e){1&t&&(u.Zb(0,"div",14),u.Ub(1,"mat-spinner",15),u.Yb())}function ch(t,e){if(1&t&&u.Ub(0,"div",19),2&t){var n=u.lc(2);u.sc("innerHTML",n.translate.instant("lang.noCustomFieldInfo"),u.Ic)}}function oh(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",31),u.hc("click",(function(){u.Hc(n);var t=u.lc().$implicit;return u.lc(2).switchSQLMode(t)})),u.Ub(1,"mat-icon",32),u.Yb()}}function sh(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",41),u.hc("click",(function(){u.Hc(n);var t=u.lc(3).$implicit;return u.lc(2).sortValues(t)})),u.Ub(1,"mat-icon",42),u.Yb()}if(2&t){var a=u.lc(5);u.sc("title",a.translate.instant("lang.orderValues"))}}function lh(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-form-field",43),u.Zb(1,"input",44),u.hc("ngModelChange",(function(t){return u.Hc(n),e.$implicit.label=t})),u.Yb(),u.Zb(2,"button",45),u.hc("click",(function(){u.Hc(n);var t=e.index,a=u.lc(3).$implicit;return u.lc(2).removeValue(a,t)})),u.Ub(3,"mat-icon",46),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit,i=u.lc(5);u.Eb(1),u.sc("ngModel",a.label)("placeholder",i.translate.instant("lang.newValue")),u.Eb(1),u.sc("title",i.translate.instant("lang.delete"))}}function dh(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-expansion-panel",35),u.Zb(1,"mat-expansion-panel-header"),u.Zb(2,"mat-panel-title",36),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Yb(),u.Zb(5,"div",37),u.Zb(6,"div",33),u.Zb(7,"button",38),u.hc("click",(function(){u.Hc(n);var t=u.lc(2).index;return u.lc(2).addValue(t)})),u.Sc(8),u.mc(9,"translate"),u.Yb(),u.Yb(),u.Zb(10,"div"),u.Qc(11,sh,2,1,"button",39),u.Yb(),u.Yb(),u.Zb(12,"div",21),u.Qc(13,lh,4,3,"mat-form-field",40),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2).$implicit;u.Eb(2),u.sc("matBadge",a.values.length),u.Eb(1),u.Uc(" ",u.nc(4,5,"lang.valuesList")," "),u.Eb(5),u.Uc(" ",u.nc(9,7,"lang.addValue"),""),u.Eb(3),u.sc("ngIf",a.values.length>0),u.Eb(2),u.sc("ngForOf",a.values)}}function bh(t,e){if(1&t&&(u.Zb(0,"div",33),u.Qc(1,dh,14,9,"mat-expansion-panel",34),u.Yb()),2&t){var n=u.lc().$implicit;u.Eb(1),u.sc("ngIf",!n.SQLMode)}}function uh(t,e){if(1&t&&(u.Xb(0),u.Sc(1),u.mc(2,"translate"),u.Wb()),2&t){var n=u.lc().$implicit;u.Eb(1),u.Uc(" (",u.nc(2,1,"lang."+n.key),") ")}}function mh(t,e){if(1&t&&(u.Zb(0,"mat-option",54),u.Sc(1),u.Qc(2,uh,3,3,"ng-container",52),u.Yb()),2&t){var n=e.$implicit,a=u.lc(5);u.sc("value",n.key),u.Eb(1),u.Uc(" ",n.key," "),u.Eb(1),u.sc("ngIf",!a.functionsService.empty(a.translate.instant("lang."+n.key)))}}function fh(t,e){if(1&t){var n=u.ac();u.Zb(0,"span"),u.Zb(1,"input",61),u.hc("ngModelChange",(function(t){return u.Hc(n),e.$implicit.delimiterStart=t})),u.Yb(),u.Zb(2,"mat-chip",62),u.hc("removed",(function(){u.Hc(n);var t=e.index,a=u.lc(4).$implicit;return u.lc(2).removeColumnLabel(a.values.label,t)})),u.Sc(3),u.Ub(4,"mat-icon",63),u.Yb(),u.Zb(5,"input",61),u.hc("ngModelChange",(function(t){return u.Hc(n),e.$implicit.delimiterEnd=t})),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit;u.Eb(1),u.Pc("width",8*(a.delimiterStart.length+1),"px"),u.sc("ngModel",a.delimiterStart),u.Eb(2),u.Uc(" ",a.column," "),u.Eb(2),u.Pc("width",8*(a.delimiterEnd.length+1),"px"),u.sc("ngModel",a.delimiterEnd)}}function ph(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",64),u.hc("click",(function(){u.Hc(n);var t=e.$implicit,a=u.lc(4).$implicit;return u.lc(2).addColumnLabel(a.values.label,t)})),u.Sc(1),u.Yb()}if(2&t){var a=e.$implicit;u.Eb(1),u.Tc(a)}}function gh(t,e){if(1&t&&(u.Zb(0,"div",55),u.Zb(1,"mat-label",56),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Qc(4,fh,6,7,"span",18),u.Zb(5,"button",57),u.Ub(6,"i",58),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Zb(9,"mat-menu",null,59),u.Qc(11,ph,2,1,"button",60),u.Yb(),u.Yb()),2&t){var n=u.Dc(10),a=u.lc(3).$implicit,i=u.lc(2);u.Eb(2),u.Uc(" ",u.nc(3,5,"lang.targetLabel")," *"),u.Eb(2),u.sc("ngForOf",a.values.label),u.Eb(1),u.sc("matMenuTriggerFor",n),u.Eb(2),u.Uc(" ",u.nc(8,7,"lang.addColumn")," "),u.Eb(4),u.sc("ngForOf",i.availaibleTables[a.values.table])}}function hh(t,e){if(1&t&&(u.Zb(0,"mat-option",54),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n),u.Eb(1),u.Uc(" ",n," ")}}function vh(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-form-field"),u.Zb(1,"mat-label"),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"mat-select",49),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(3).$implicit.values.key=t})),u.Qc(5,hh,2,2,"mat-option",50),u.Yb(),u.Yb()}if(2&t){var a=u.lc(3).$implicit,i=u.lc(2);u.Eb(2),u.Tc(u.nc(3,3,"lang.targetIdentifier")),u.Eb(2),u.sc("ngModel",a.values.key),u.Eb(1),u.sc("ngForOf",i.availaibleTables[a.values.table])}}var yh=function(){return["string","integer","date"]};function Ch(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-expansion-panel",35),u.Zb(1,"mat-expansion-panel-header"),u.Zb(2,"mat-panel-title"),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Yb(),u.Zb(5,"div",21),u.Zb(6,"div",48),u.Zb(7,"mat-form-field"),u.Zb(8,"mat-label"),u.Sc(9),u.mc(10,"translate"),u.Yb(),u.Zb(11,"mat-select",49),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).$implicit.values.table=t})),u.Qc(12,mh,3,3,"mat-option",50),u.mc(13,"keyvalue"),u.Yb(),u.Yb(),u.Qc(14,gh,12,9,"div",51),u.Qc(15,vh,6,5,"mat-form-field",52),u.Yb(),u.Zb(16,"mat-form-field"),u.Zb(17,"mat-label"),u.Sc(18),u.mc(19,"translate"),u.Yb(),u.Zb(20,"textarea",53),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).$implicit.values.clause=t})),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2).$implicit,i=u.lc(2);u.Eb(3),u.Uc(" ",u.nc(4,8,"lang.database")," "),u.Eb(6),u.Tc(u.nc(10,10,"lang.targetTable")),u.Eb(2),u.sc("ngModel",a.values.table),u.Eb(1),u.sc("ngForOf",u.nc(13,12,i.availaibleTables)),u.Eb(2),u.sc("ngIf",-1===u.yc(16,yh).indexOf(a.type)&&a.values.table),u.Eb(1),u.sc("ngIf",a.values.table),u.Eb(3),u.Tc(u.nc(19,14,"lang.clause")),u.Eb(2),u.sc("ngModel",a.values.clause)}}function Eh(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",24),u.Zb(1,"div"),u.Zb(2,"button",31),u.hc("click",(function(){u.Hc(n);var t=u.lc().$implicit;return u.lc(2).switchSQLMode(t)})),u.Ub(3,"mat-icon",47),u.Yb(),u.Yb(),u.Zb(4,"div",33),u.Qc(5,Ch,21,17,"mat-expansion-panel",34),u.Yb(),u.Yb()}if(2&t){var a=u.lc().$implicit;u.Eb(5),u.sc("ngIf",a.SQLMode)}}var Sh=function(){return["select","radio","checkbox"]};function Mh(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-expansion-panel"),u.Zb(1,"mat-expansion-panel-header"),u.Zb(2,"mat-panel-title",20),u.Sc(3),u.Yb(),u.Zb(4,"mat-panel-description"),u.Sc(5),u.mc(6,"translate"),u.Yb(),u.Yb(),u.Zb(7,"div",21),u.Zb(8,"mat-form-field"),u.Zb(9,"input",22),u.hc("ngModelChange",(function(t){return u.Hc(n),e.$implicit.id=t})),u.Yb(),u.Yb(),u.Zb(10,"mat-form-field"),u.Zb(11,"input",23),u.hc("ngModelChange",(function(t){return u.Hc(n),e.$implicit.label=t})),u.Yb(),u.Yb(),u.Yb(),u.Zb(12,"div",24),u.Zb(13,"div"),u.Qc(14,oh,2,0,"button",25),u.Yb(),u.Qc(15,bh,2,1,"div",26),u.Yb(),u.Qc(16,Eh,6,1,"div",27),u.Zb(17,"div",28),u.Zb(18,"button",29),u.hc("click",(function(){u.Hc(n);var t=e.$implicit,a=e.index;return u.lc(2).updateCustomField(t,a)})),u.Sc(19),u.mc(20,"translate"),u.Yb(),u.Zb(21,"button",30),u.hc("click",(function(){u.Hc(n);var t=e.index;return u.lc(2).removeCustomField(t)})),u.Sc(22),u.mc(23,"translate"),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit,i=e.index,r=u.lc(2);u.Eb(3),u.Uc(" ",a.label," "),u.Eb(2),u.Uc(" ",u.nc(6,14,"lang."+a.type+"Input")," "),u.Eb(4),u.sc("ngModel",a.id)("placeholder",r.translate.instant("lang.technicalId"))("value",a.id),u.Eb(2),u.sc("ngModel",a.label)("placeholder",r.translate.instant("lang.label"))("value",a.label),u.Eb(3),u.sc("ngIf",!a.SQLMode&&"banAutocomplete"!==a.type),u.Eb(1),u.sc("ngIf",u.yc(20,Sh).indexOf(a.type)>-1),u.Eb(1),u.sc("ngIf",a.SQLMode),u.Eb(2),u.sc("disabled",r.isModified(a,i)||!r.isValidField(a)),u.Eb(1),u.Tc(u.nc(20,16,"lang.update")),u.Eb(3),u.Tc(u.nc(23,18,"lang.delete"))}}function xh(t,e){if(1&t&&(u.Zb(0,"mat-card",16),u.Zb(1,"mat-tab-group"),u.Zb(2,"mat-tab",12),u.Qc(3,ch,1,1,"div",17),u.Zb(4,"mat-accordion"),u.Qc(5,Mh,24,21,"mat-expansion-panel",18),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t){var n=u.lc();u.Eb(2),u.sc("label",n.translate.instant("lang.usableFields")),u.Eb(1),u.sc("ngIf",0===n.customFields.length),u.Eb(2),u.sc("ngForOf",n.customFields)}}function Yh(t,e){if(1&t&&(u.Xb(0),u.Zb(1,"mat-form-field",70),u.Ub(2,"textarea",71),u.Yb(),u.Wb()),2&t){var n=u.lc().$implicit,a=u.lc();u.Eb(2),u.sc("placeholder",a.translate.instant("lang."+n.type+"Input"))}}function Zh(t,e){if(1&t&&(u.Xb(0),u.Zb(1,"mat-form-field",70),u.Ub(2,"input",72),u.Yb(),u.Wb()),2&t){var n=u.lc().$implicit,a=u.lc();u.Eb(2),u.sc("placeholder",a.translate.instant("lang."+n.type+"Input"))}}function _h(t,e){if(1&t&&(u.Zb(0,"mat-option",54),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n),u.Eb(1),u.Vc(" ",u.nc(2,3,"lang.choice")," ",n," ")}}function kh(t,e){if(1&t&&(u.Xb(0),u.Zb(1,"mat-form-field",70),u.Zb(2,"mat-select",73),u.Qc(3,_h,3,5,"mat-option",50),u.Yb(),u.Yb(),u.Wb()),2&t){var n=u.lc().$implicit,a=u.lc();u.Eb(2),u.sc("placeholder",a.translate.instant("lang."+n.type+"Input")),u.Eb(1),u.sc("ngForOf",a.sampleIncrement)}}function wh(t,e){if(1&t){var n=u.ac();u.Xb(0),u.Zb(1,"mat-form-field",70),u.Zb(2,"input",74),u.hc("click",(function(){return u.Hc(n),u.Dc(5).open()})),u.Yb(),u.Ub(3,"mat-datepicker-toggle",75),u.Ub(4,"mat-datepicker",null,76),u.Yb(),u.Wb()}if(2&t){var a=u.Dc(5),i=u.lc().$implicit,r=u.lc();u.Eb(2),u.sc("matDatepicker",a)("placeholder",r.translate.instant("lang."+i.type+"Input")),u.Eb(1),u.sc("for",a)}}function Oh(t,e){if(1&t&&(u.Zb(0,"mat-radio-button",54),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n),u.Eb(1),u.Vc(" ",u.nc(2,3,"lang.choice")," ",n," ")}}function Th(t,e){if(1&t&&(u.Xb(0),u.Zb(1,"mat-radio-group",77),u.Qc(2,Oh,3,5,"mat-radio-button",50),u.Yb(),u.Wb()),2&t){var n=u.lc(2);u.Eb(2),u.sc("ngForOf",n.sampleIncrement)}}function Ih(t,e){if(1&t&&(u.Zb(0,"mat-list-option",83),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n),u.Eb(1),u.Vc(" ",u.nc(2,3,"lang.choice")," ",n," ")}}function Dh(t,e){1&t&&(u.Zb(0,"mat-chip"),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc(" ",u.nc(2,1,"lang.selectedValue")," "))}function Uh(t,e){if(1&t&&(u.Xb(0),u.Zb(1,"div",78),u.Zb(2,"mat-selection-list",79,80),u.Qc(4,Ih,3,5,"mat-list-option",81),u.Yb(),u.Yb(),u.Zb(5,"mat-chip-list",82),u.Qc(6,Dh,3,3,"mat-chip",18),u.Yb(),u.Wb()),2&t){var n=u.Dc(3),a=u.lc(2);u.Eb(4),u.sc("ngForOf",a.sampleIncrement),u.Eb(2),u.sc("ngForOf",n.selectedOptions.selected)}}function Ph(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",65),u.Zb(1,"div",66),u.Zb(2,"button",67),u.hc("click",(function(){u.Hc(n);var t=e.$implicit;return u.lc().addCustomField(t)})),u.Ub(3,"mat-icon",68),u.Yb(),u.Yb(),u.Zb(4,"div",33),u.Zb(5,"div",69),u.Sc(6),u.Yb(),u.Qc(7,Yh,3,1,"ng-container",52),u.Qc(8,Zh,3,1,"ng-container",52),u.Qc(9,kh,4,2,"ng-container",52),u.Qc(10,wh,6,3,"ng-container",52),u.Qc(11,Th,3,1,"ng-container",52),u.Qc(12,Uh,7,2,"ng-container",52),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit,i=u.lc();u.Eb(2),u.sc("title",i.translate.instant("lang.add")),u.Eb(4),u.Uc("",a.label," :"),u.Eb(1),u.sc("ngIf","string"===a.type||"banAutocomplete"===a.type),u.Eb(1),u.sc("ngIf","integer"===a.type),u.Eb(1),u.sc("ngIf","select"===a.type),u.Eb(1),u.sc("ngIf","date"===a.type),u.Eb(1),u.sc("ngIf","radio"===a.type),u.Eb(1),u.sc("ngIf","checkbox"===a.type)}}var Fh,Lh=((Fh=function(){function t(e,n,a,i,r,c,o,s){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.dialog=i,this.headerService=r,this.appService=c,this.sortPipe=o,this.functionsService=s,this.loading=!0,this.customFieldsTypes=[{label:this.translate.instant("lang.stringInput"),type:"string"},{label:this.translate.instant("lang.integerInput"),type:"integer"},{label:this.translate.instant("lang.selectInput"),type:"select"},{label:this.translate.instant("lang.dateInput"),type:"date"},{label:this.translate.instant("lang.radioInput"),type:"radio"},{label:this.translate.instant("lang.checkboxInput"),type:"checkbox"},{label:this.translate.instant("lang.banAutocompleteInput"),type:"banAutocomplete"}],this.customFields=[],this.customFieldsClone=[],this.incrementCreation=1,this.sampleIncrement=[1,2,3,4],this.SQLMode=!1,this.availaibleTables={}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.customFieldsAdmin")),this.getTables(),this.http.get("../rest/customFields?admin=true").pipe(Object(l.a)((function(e){return e.customFields.forEach((function(e){t.functionsService.empty(e.values.key)?(e.SQLMode=!1,e.values=Object.values(e.values).map((function(t){return{label:t}}))):e.SQLMode=!0})),e})),Object(d.a)((function(e){t.customFields=e.customFields,t.customFieldsClone=JSON.parse(JSON.stringify(t.customFields))})),Object(Ct.a)((function(){return t.loading=!1})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"addCustomField",value:function(t){var e=this,n={};this.dialogRef=this.dialog.open(W.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.add"),msg:this.translate.instant("lang.confirmAction")}}),this.dialogRef.afterClosed().pipe(Object(q.a)((function(t){return"ok"===t})),Object(d.a)((function(){n={label:e.translate.instant("lang.newField")+" "+e.incrementCreation,type:t.type,values:[]}})),Object(X.a)((function(t){return e.http.post("../rest/customFields",n)})),Object(d.a)((function(t){n.id=t.customFieldId,e.customFields.push(n),e.notify.success(e.translate.instant("lang.customFieldAdded")),e.incrementCreation++})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe()}},{key:"addValue",value:function(t){this.customFields[t].values.push({label:""})}},{key:"removeValue",value:function(t,e){t.values.splice(e,1)}},{key:"removeCustomField",value:function(t){var e=this;this.dialogRef=this.dialog.open(W.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete")+' "'+this.customFields[t].label+'"',msg:this.translate.instant("lang.confirmAction")}}),this.dialogRef.afterClosed().pipe(Object(q.a)((function(t){return"ok"===t})),Object(X.a)((function(){return e.http.delete("../rest/customFields/"+e.customFields[t].id)})),Object(d.a)((function(){e.customFields.splice(t,1),e.notify.success(e.translate.instant("lang.customFieldDeleted"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe()}},{key:"updateCustomField",value:function(t,e){var n=this,a=Object.assign({},t);if(t.SQLMode)["string","integer","date"].indexOf(t.type)>-1&&(t.values.label=[{column:t.values.key,delimiterEnd:"",delimiterStart:""}]);else if(t.values=t.values.filter((function(t,e,n){return n.map((function(t){return t.label})).indexOf(t.label)===e})),a.values=t.values.map((function(t){return t.label})),this.customFields.filter((function(t){return t.label===a.label})).length>1)return this.notify.handleErrors(this.translate.instant("lang.customFieldAlreadyExists")),Object(J.of)(!1);this.http.put("../rest/customFields/"+t.id,a).pipe(Object(d.a)((function(){n.customFieldsClone[e]=JSON.parse(JSON.stringify(t)),n.notify.success(n.translate.instant("lang.customFieldUpdated"))})),Object(b.a)((function(t){return n.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe()}},{key:"sortValues",value:function(t){t.values=this.sortPipe.transform(t.values,"label")}},{key:"isModified",value:function(t,e){return!(JSON.stringify(t)!==JSON.stringify(this.customFieldsClone[e])&&""!==t.label&&!this.SQLMode)}},{key:"switchSQLMode",value:function(t){t.SQLMode=!t.SQLMode,t.values=t.SQLMode?{key:"id",label:[{column:"id",delimiterEnd:"",delimiterStart:""}],table:"users",clause:"1=1"}:[]}},{key:"getTables",value:function(){var t=this;this.http.get("../rest/customFieldsWhiteList").pipe(Object(d.a)((function(e){e.allowedTables.forEach((function(e){t.availaibleTables[e.name]=e.columns}))})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"addColumnLabel",value:function(t,e){t.push({delimiterStart:"",delimiterEnd:"",column:e})}},{key:"removeColumnLabel",value:function(t,e){t.splice(e,1)}},{key:"isValidField",value:function(t){return!t.SQLMode||!(this.functionsService.empty(t.values.key)||this.functionsService.empty(t.values.label)||this.functionsService.empty(t.values.table)||this.functionsService.empty(t.values.clause))}}]),t}()).\u0275fac=function(t){return new(t||Fh)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(z.b),u.Tb(p.a),u.Tb(g.a),u.Tb(U.a),u.Tb(C.a))},Fh.\u0275cmp=u.Nb({type:Fh,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&u.Oc(ih,!0),2&t&&u.Cc(n=u.ic())&&(e.sidenavRight=n.first)},features:[u.Db([U.a])],decls:18,vars:12,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end","opened","",1,"col-md-4","col-sm-12","customFielsdPanel",3,"mode","fixedInViewport"],["snav2",""],[3,"label"],["class","customFieldsTypesItem",4,"ngFor","ngForOf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],["class","alert-message alert-message-info","role","alert",3,"innerHTML",4,"ngIf"],[4,"ngFor","ngForOf"],["role","alert",1,"alert-message","alert-message-info",3,"innerHTML"],["color","primary"],[1,"col-md-12"],["matInput","","name","id","disabled","",3,"ngModel","placeholder","value","ngModelChange"],["matInput","","name","label",3,"ngModel","placeholder","value","ngModelChange"],[1,"col-md-12",2,"display","flex","align-items","center"],["mat-mini-fab","","color","primary",3,"click",4,"ngIf"],["style","flex:1;",4,"ngIf"],["class","col-md-12","style","display: flex;align-items: center;",4,"ngIf"],[1,"col-md-12","text-center"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","warn",3,"click"],["mat-mini-fab","","color","primary",3,"click"],[1,"fas","fa-database",2,"height","auto"],[2,"flex","1"],["class","customFieldValues","opened","",4,"ngIf"],["opened","",1,"customFieldValues"],["matBadgeSize","small",3,"matBadge"],[1,"actionValuesCustom"],["mat-raised-button","","color","primary",3,"click"],["mat-mini-fab","","color","default",3,"title","click",4,"ngIf"],["floatLabel","never",4,"ngFor","ngForOf"],["mat-mini-fab","","color","default",3,"title","click"],["color","primary",1,"fas","fa-sort-alpha-down",2,"height","auto"],["floatLabel","never"],["matInput","",3,"ngModel","placeholder","ngModelChange"],["color","warn","mat-icon-button","","matSuffix","",3,"title","click"],[1,"fa","fa-trash"],[1,"fas","fa-list-ol",2,"height","auto"],[2,"display","flex","flex-direction","column"],["required","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["style","width:100%;padding-bottom: 20px;",4,"ngIf"],[4,"ngIf"],["matInput","","placeholder","Ex. status='OK'","required","",3,"ngModel","ngModelChange"],[3,"value"],[2,"width","100%","padding-bottom","20px"],[2,"font-size","75%","color","rgba(0,0,0,0.54)","width","100%","display","block"],["mat-button","","color","primary",3,"matMenuTriggerFor"],[1,"fa","fa-plus-circle"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[2,"min-width","8px",3,"ngModel","ngModelChange"],[3,"removed"],["matChipRemove","",1,"fa","fa-times-circle"],["mat-menu-item","",3,"click"],[1,"customFieldsTypesItem"],[1,"addCustomFieldTypeContainer"],["mat-icon-button","","color","primary",3,"title","click"],[1,"fas","fa-plus-circle","fa-2x"],[2,"color","rgba(0,0,0,0.54)"],["floatLabel","never",1,"input-form"],["matInput","","matTextareaAutosize","","matAutosizeMinRows","1","cdkAutosizeMaxRows","6","disabled","",3,"placeholder"],["type","number","matInput","","disabled","",3,"placeholder"],["disabled","",3,"placeholder"],["matInput","","disabled","",3,"matDatepicker","placeholder","click"],["matSuffix","",3,"for"],["picker",""],["color","primary","disabled","",1,"radio-form"],[1,"input-form","checkbox-form"],["disabled","",1,"div-list"],["sampleList",""],["checkboxPosition","before",3,"value",4,"ngFor","ngForOf"],[1,"checkbox-selected-list"],["checkboxPosition","before",3,"value"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Zb(1,"mat-sidenav-content"),u.Zb(2,"div",1),u.Zb(3,"div",2),u.Zb(4,"div",3),u.Ub(5,"header-left"),u.Yb(),u.Zb(6,"div",4),u.Ub(7,"header-right"),u.Yb(),u.Yb(),u.Ub(8,"div",5),u.Yb(),u.Zb(9,"div",6),u.Zb(10,"div",7),u.Qc(11,rh,2,0,"div",8),u.Qc(12,xh,6,3,"mat-card",9),u.Yb(),u.Yb(),u.Yb(),u.Zb(13,"mat-sidenav",10,11),u.Zb(15,"mat-tab-group"),u.Zb(16,"mat-tab",12),u.Qc(17,Ph,13,8,"div",13),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(3),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading),u.Eb(1),u.sc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode()),u.Eb(3),u.sc("label",e.translate.instant("lang.customFieldsTypesAvailable")),u.Eb(1),u.sc("ngForOf",e.customFieldsTypes))},directives:[S.e,S.f,M.a,Y.a,Z.t,S.d,Re.c,Re.a,Z.s,O.c,T.a,Qe.a,Qe.c,Qe.g,Qe.h,Qe.f,k.c,w.b,o.c,o.t,o.w,D.b,Ut.a,ar.a,k.j,k.g,it.a,o.E,I.o,ze.d,ze.e,er.a,er.e,ze.b,w.d,Ve.f,Ve.h,Ve.d,Je.b,Je.a,Dt.i,er.d,Dt.f],pipes:[m.d,Z.l],styles:[".mat-divider[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.customFielsdPanel[_ngcontent-%COMP%], .customFielsdPanel[_ngcontent-%COMP%]    .mat-tab-body-wrapper{padding-left:0}.mat-expansion-panel-header-description[_ngcontent-%COMP%]{flex-direction:row-reverse}.customFieldValues[_ngcontent-%COMP%]{box-shadow:none;border:1px solid rgba(0,0,0,.12)}.mat-expansion-panel[_ngcontent-%COMP%]{margin:5px}.mat-accordion[_ngcontent-%COMP%]{padding:5px}.mat-tab-body-content[_ngcontent-%COMP%], .mat-tab-body-wrapper[_ngcontent-%COMP%], .mat-tab-group[_ngcontent-%COMP%]{height:100%}.actionsCustomFields[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.actionValuesCustom[_ngcontent-%COMP%]{display:flex}.alert-message-info[_ngcontent-%COMP%]{margin-top:30px;max-width:100%}.addCustomFieldTypeContainer[_ngcontent-%COMP%]{justify-content:center;display:flex;align-items:center;width:60px}.customFieldsTypesItem[_ngcontent-%COMP%]{display:flex;padding-top:10px;padding-bottom:10px}.mat-badge-content[_ngcontent-%COMP%]{top:2px!important}",".banner[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:30px;border-radius:20px;border:1px solid #ccc;position:relative;padding:20px;width:100%}.banner[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;max-width:85%;text-overflow:ellipsis;z-index:1;font-size:20px;font-weight:700;letter-spacing:2px;position:absolute;top:-18px;left:20px;padding:0;margin:0;color:#135f7f}.banner[_ngcontent-%COMP%]   .title-divider[_ngcontent-%COMP%]{position:absolute;width:99%;z-index:-1;top:17px;background:#fff;height:1px}.banner[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:50%;padding-right:10px}.banner[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{font-size:16px}.fieldRow[_ngcontent-%COMP%]{display:flex;padding-top:10px;padding-bottom:10px}.fieldLabel[_ngcontent-%COMP%]{color:#4a4a4a}.fieldLabel[_ngcontent-%COMP%]   .cdk-drag-handle[_ngcontent-%COMP%]{margin-right:10px}.fieldState[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px;width:40px;justify-content:center;align-items:normal!important;padding-top:15px}.fieldState[_ngcontent-%COMP%]   .fieldRequired[_ngcontent-%COMP%]{font-size:5px;color:#135f7f}.fieldState[_ngcontent-%COMP%]   .fieldError[_ngcontent-%COMP%]{font-size:15px;color:#f99830}.fieldState[_ngcontent-%COMP%]   .fieldFull[_ngcontent-%COMP%]{font-size:15px;color:green}.fieldInput[_ngcontent-%COMP%]{position:relative}.fieldInput[_ngcontent-%COMP%], .fieldLabel[_ngcontent-%COMP%]{font-size:13px;flex:1}@media (max-width:768px){.fieldInput[_ngcontent-%COMP%], .fieldLabel[_ngcontent-%COMP%]{font-size:1em}}.fieldInput[_ngcontent-%COMP%], .fieldLabel[_ngcontent-%COMP%], .fieldState[_ngcontent-%COMP%]{align-items:center;display:flex}.input-form[_ngcontent-%COMP%]{font-size:13px;color:#666;width:500px}.input-form[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{color:#135f7f;padding-left:20px}.input-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.input-form[_ngcontent-%COMP%]    .mat-select-value-text{padding-left:20px;color:#135f7f}.input-form[_ngcontent-%COMP%]    .mat-form-field-label{top:15px;left:20px}.input-form[_ngcontent-%COMP%]    .mat-form-field-infix{display:flex;padding-top:0;padding-bottom:5px}.input-form[_ngcontent-%COMP%]    .mat-form-field-label-wrapper{top:-13px}.input-form[_ngcontent-%COMP%]    .mat-form-field-flex{background:#fff;height:40px;border-radius:10px;border:1px solid #135f7f}.input-form[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.input-form[_ngcontent-%COMP%]    .mat-form-field-suffix{margin-right:20px}.input-form[_ngcontent-%COMP%]    .mat-select-arrow-wrapper{padding-right:20px}.input-form[_ngcontent-%COMP%]    .mat-list-option{color:rgba(0,0,0,.54)}.input-form[_ngcontent-%COMP%]    .mat-form-field-wrapper{padding:0}.input-form[_ngcontent-%COMP%]    .mat-datepicker-toggle-default-icon{height:auto}.input-form.search-select[_ngcontent-%COMP%]    .mat-form-field-label-wrapper{top:-15px}.input-form.input-date[_ngcontent-%COMP%]    .mat-form-field-infix{padding-top:5px}.input-form-filled[_ngcontent-%COMP%]{color:#fff;width:500px;transition:all .1s}.input-form-filled[_ngcontent-%COMP%]:hover    .mat-form-field-flex, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-form-field-flex{background:#fff!important;border:1px solid #fff!important;color:#135f7f!important;transition:all .1s}.input-form-filled[_ngcontent-%COMP%]:hover    .mat-form-field-label, .input-form-filled[_ngcontent-%COMP%]:hover    .mat-select-placeholder, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-form-field-label, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-select-placeholder{color:#135f7f!important}.input-form-filled[_ngcontent-%COMP%]:hover    .mat-select-arrow, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-select-arrow{color:rgba(19,95,127,.54)}.input-form-filled[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{color:#135f7f;padding-left:20px}.input-form-filled[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-select-value{text-align:left;font-weight:400}.input-form-filled[_ngcontent-%COMP%]    .mat-select-value-text{padding-left:20px;color:#fff}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-label{color:#fff;left:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-infix{padding-bottom:15px}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-flex{background:#135f7f;border-radius:30px;border:1px solid #fff}.input-form-filled[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-suffix{margin-right:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-select-arrow-wrapper{padding-right:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-select-arrow{color:hsla(0,0%,100%,.54)}.input-form-filled[_ngcontent-%COMP%]    .mat-select-placeholder{color:#fff}.input-form-filled[_ngcontent-%COMP%]    .mat-list-option{color:rgba(0,0,0,.54)}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-wrapper{padding:0}.input-form-filled[_ngcontent-%COMP%]   textarea.cdk-textarea-autosize-measuring[_ngcontent-%COMP%]{padding:4px 0!important}.input-form-filled[_ngcontent-%COMP%]    .mat-datepicker-toggle-default-icon{height:auto}.input-form.mat-form-field-disabled[_ngcontent-%COMP%]    .mat-input-element{cursor:not-allowed;padding-left:20px}.input-form.mat-form-field-disabled[_ngcontent-%COMP%]    .mat-form-field-flex{cursor:not-allowed;border:1px dashed #353232}.opt-group[_ngcontent-%COMP%]{font-weight:700}.smallInput[_ngcontent-%COMP%]{font-size:11px;padding-left:20px;padding-right:20px}.smallInput[_ngcontent-%COMP%]    .mat-form-field-infix{padding:0 0 5px}.button-form-primary[_ngcontent-%COMP%]{background:#fff;border:1px solid #135f7f;color:#135f7f;border-radius:30px;padding-left:20px;padding-right:20px;width:240px;height:45px;transition:all .1s}@media (max-width:768px){.button-form-primary[_ngcontent-%COMP%]{width:auto}}.button-form-primary[_ngcontent-%COMP%]:hover, .button-form-primary[aria-expanded=true][_ngcontent-%COMP%]{background:#135f7f!important;border:1px solid #fff!important;color:#fff!important;transition:all .1s}.button-form-primary[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;align-items:center;justify-content:center;width:100%}.button-form-primary[_ngcontent-%COMP%]    .mat-button-wrapper .menu-label{display:flex;flex:1;overflow:hidden;text-overflow:ellipsis;margin-right:10px}.button-form-primary[_ngcontent-%COMP%]    .mat-button-wrapper .menu-icon{display:flex}.button-form-primary-filled[_ngcontent-%COMP%]{background:#135f7f;border:1px solid #fff;color:#fff;border-radius:30px;padding-left:20px;padding-right:20px;width:240px;height:45px;transition:all .1s}@media (max-width:768px){.button-form-primary-filled[_ngcontent-%COMP%]{width:auto}}.button-form-primary-filled[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;align-items:center;justify-content:center;width:100%}.button-form-primary-filled[_ngcontent-%COMP%]    .mat-button-wrapper .menu-label{display:flex;flex:1;overflow:hidden;text-overflow:ellipsis;margin-right:10px}.button-form-primary-filled[_ngcontent-%COMP%]    .mat-button-wrapper .menu-icon{display:flex}.button-form-primary-alt[_ngcontent-%COMP%]{font-size:13px;background:#135f7f;border:1px solid #fff;color:#fff;border-radius:30px;padding:5px 20px;width:240px;transition:all .1s}@media (max-width:768px){.button-form-primary-alt[_ngcontent-%COMP%]{font-size:1em}}.button-form-primary-alt[_ngcontent-%COMP%]:hover, .button-form-primary-alt[aria-expanded=true][_ngcontent-%COMP%]{background:#fff!important;border:1px solid #fff!important;color:#135f7f!important;transition:all .1s}.button-form-primary-alt[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;align-items:center;justify-content:center;width:100%}.button-form-primary-alt[_ngcontent-%COMP%]    .mat-button-wrapper .menu-label{display:flex;flex:1}.button-form-primary-alt[_ngcontent-%COMP%]    .mat-button-wrapper .menu-icon{display:flex}.button-form-primary[aria-expanded=true][_ngcontent-%COMP%]{color:#135f7f;background:#fff;transition:all .1s;border:1px solid #135f7f}.button-form[_ngcontent-%COMP%]{background:#fff;color:#135f7f;border-radius:30px;padding:5px 20px;width:240px;transition:all .1s}.button-form[aria-expanded=true][_ngcontent-%COMP%]{transition:all .1s;border-bottom-left-radius:0;border-bottom-right-radius:0;border-top-left-radius:30px;border-top-right-radius:30px} .menuForm{width:240px;border-radius:30px;border:1px solid #fff;min-height:auto} .menuForm .mat-menu-content{padding-top:0;padding-bottom:0} .menuForm .mat-menu-content .mat-menu-item{transition:all .1s;font-size:13px;color:#666}@media (max-width:768px){ .menuForm .mat-menu-content .mat-menu-item{font-size:1em}} .menuForm .mat-menu-content .mat-menu-item:hover{transition:all .1s;color:#fff;background:#1a80ab} .parametersFieldsMenu{min-height:auto}.div-list[_ngcontent-%COMP%]{padding:0;max-height:150px;overflow:auto}.div-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{font-size:13px}@media (max-width:768px){.div-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{font-size:1em}}.checkbox-form[_ngcontent-%COMP%]{width:100%;padding:0;border:1px solid #135f7f;border-radius:30px;overflow:hidden}.checkbox-selected-list[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:center}.checkbox-selected-list[_ngcontent-%COMP%]    .mat-chip-list-wrapper{justify-content:center}.checkbox-selected-list[_ngcontent-%COMP%]   .mat-chip[_ngcontent-%COMP%]{font-size:13px}@media (max-width:768px){.checkbox-selected-list[_ngcontent-%COMP%]   .mat-chip[_ngcontent-%COMP%]{font-size:1em}}.radio-form[_ngcontent-%COMP%]{padding-left:20px;display:grid;grid-template-columns:repeat(2,1fr);width:100%}.radio-form[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]{flex:1}.radio-form[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]    .mat-radio-label-content{font-weight:400;color:rgba(0,0,0,.54)}.radio-form[_ngcontent-%COMP%]   .mat-radio-disabled[_ngcontent-%COMP%]{opacity:.5}.input-radio[_ngcontent-%COMP%]    .mat-form-field-infix{overflow:auto;padding-top:0}.input-radio[_ngcontent-%COMP%]    .mat-form-field-flex{height:auto}.input-radio[_ngcontent-%COMP%]    .mat-form-field-label{top:0;font-size:12px}.disabled[_ngcontent-%COMP%]{opacity:.2}.customFieldRow[_ngcontent-%COMP%]{display:flex;padding-top:20px;padding-bottom:20px}.customFieldDrag[_ngcontent-%COMP%]{cursor:move;width:50px;display:flex;align-items:center;justify-content:center}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drag-preview[_ngcontent-%COMP%]{background:#fff;box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.indexingModelsCustomFieldsList.cdk-drop-list-dragging[_ngcontent-%COMP%]   .indexingModelsCustomFieldsList[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.advancedInput[_ngcontent-%COMP%]{flex-direction:column}.noMandatory[_ngcontent-%COMP%]{visibility:hidden}.checkboxInput[_ngcontent-%COMP%]{display:block}.categoryLabel[_ngcontent-%COMP%]{letter-spacing:1px;font-size:13px;color:#135f7f;font-weight:700}@media (max-width:768px){.categoryLabel[_ngcontent-%COMP%]{font-size:1em}}.textareaInput[_ngcontent-%COMP%]    .mat-form-field{line-height:normal}.textareaInput[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{padding:0;margin:0;color:#135f7f}.textareaInput[_ngcontent-%COMP%]    .mat-form-field-flex{padding-left:20px;height:auto!important;min-height:40px!important}.textareaInput[_ngcontent-%COMP%]    .mat-form-field-label{left:0}"]}),Fh),jh=n("87bG"),Rh=n("enVo"),Qh=n("sTim"),Ah=["snav2"],Hh=["indexingForm"];function zh(t,e){1&t&&(u.Zb(0,"div",15),u.Ub(1,"mat-spinner",16),u.Yb())}function $h(t,e){if(1&t&&(u.Zb(0,"mat-option",30),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n.id),u.Eb(1),u.Uc(" ",n.label," ")}}function Vh(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-card",17),u.Zb(1,"div",18),u.Zb(2,"mat-form-field"),u.Zb(3,"mat-label"),u.Sc(4),u.mc(5,"translate"),u.Yb(),u.Zb(6,"mat-select",19),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().indexingModel.category=t}))("selectionChange",(function(t){return u.Hc(n),u.lc().changeCategory(t)})),u.Qc(7,$h,2,2,"mat-option",20),u.Yb(),u.Yb(),u.Yb(),u.Zb(8,"div",18),u.Zb(9,"div",21),u.Zb(10,"mat-form-field",22),u.Zb(11,"mat-label"),u.Sc(12),u.mc(13,"translate"),u.Yb(),u.Zb(14,"input",23),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().indexingModel.label=t})),u.Yb(),u.Yb(),u.Yb(),u.Zb(15,"div",24),u.Zb(16,"mat-slide-toggle",25),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().indexingModel.default=t})),u.Sc(17),u.mc(18,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(19,"mat-tab-group"),u.Zb(20,"mat-tab",12),u.Ub(21,"app-indexing-form",26,27),u.Zb(23,"div",28),u.Zb(24,"button",29),u.hc("click",(function(){return u.Hc(n),u.lc().onSubmit()})),u.Sc(25),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.Dc(22),i=u.lc();u.Eb(4),u.Tc(u.nc(5,13,"lang.category_id")),u.Eb(2),u.sc("ngModel",i.indexingModel.category)("placeholder",i.translate.instant("lang.category_id")),u.Eb(1),u.sc("ngForOf",i.categoriesList),u.Eb(5),u.Tc(u.nc(13,15,"lang.modelName")),u.Eb(2),u.sc("ngModel",i.indexingModel.label),u.Eb(2),u.sc("ngModel",i.indexingModel.default),u.Eb(1),u.Uc(" ",u.nc(18,17,"lang.defaultModel")," "),u.Eb(3),u.sc("label",i.translate.instant("lang.indexingForm")),u.Eb(1),u.sc("indexingFormId",i.indexingModel.id)("admin",!0),u.Eb(3),u.sc("disabled",!a.isModified()&&!i.isModified()||""===i.indexingModel.label),u.Eb(1),u.Tc(i.translate.instant(i.creationMode?"lang.save":"lang.update"))}}function Nh(t,e){if(1&t&&u.Ub(0,"app-field-list",31),2&t){var n=u.lc();u.sc("dataFields",n.indexingForm.getAvailableFields())}}function Jh(t,e){if(1&t&&u.Ub(0,"app-field-list",32),2&t){var n=u.lc();u.sc("dataCustomFields",n.indexingForm.getAvailableCustomFields())}}var Gh,Bh=((Gh=function(){function t(e,n,a,i,r,c,o,s){_classCallCheck(this,t),this.translate=e,this.http=n,this.route=a,this.router=i,this.notify=r,this.dialog=c,this.headerService=o,this.appService=s,this.loading=!0,this.indexingModel={id:0,label:"",category:"incoming",default:!1,owner:0,private:!1},this.indexingModelsCustomFields=[],this.creationMode=!0}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.route.params.subscribe((function(e){void 0===e.id?(t.creationMode=!0,t.headerService.setHeader(t.translate.instant("lang.indexingModelCreation")),t.http.get("../rest/categories").pipe(Object(d.a)((function(e){t.categoriesList=e.categories})),Object(d.a)((function(e){t.loading=!1,setTimeout((function(){t.indexingForm.changeCategory(t.indexingModel.category)}),0)})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(J.of)(!1)}))).subscribe(),t.indexingModelClone=JSON.parse(JSON.stringify(t.indexingModel))):(t.creationMode=!1,t.http.get("../rest/indexingModels/"+e.id).pipe(Object(d.a)((function(e){t.indexingModel=e.indexingModel,t.headerService.setHeader(t.translate.instant("lang.indexingModelModification"),t.indexingModel.label),t.indexingModelClone=JSON.parse(JSON.stringify(t.indexingModel))})),Object(X.a)((function(){return t.http.get("../rest/categories")})),Object(d.a)((function(e){t.categoriesList=e.categories})),Object(Ct.a)((function(){return t.loading=!1})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(J.of)(!1)}))).subscribe())}))}},{key:"onSubmit",value:function(){var t=this,e=this.indexingForm.getDatas();e.forEach((function(t,n){e[n].default_value=["string","integer","date"].indexOf(e[n].type)>-1&&e[n].SQLMode?null:e[n].default_value,delete e[n].event,delete e[n].label,delete e[n].system,delete e[n].type,delete e[n].values})),this.indexingModel.fields=e,this.creationMode?this.http.post("../rest/indexingModels",this.indexingModel).pipe(Object(d.a)((function(e){t.indexingForm.setModification(),t.setModification(),t.router.navigate(["/administration/indexingModels"]),t.notify.success(t.translate.instant("lang.indexingModelAdded"))})),Object(Ct.a)((function(){return t.loading=!1})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(J.of)(!1)}))).subscribe():this.http.put("../rest/indexingModels/"+this.indexingModel.id,this.indexingModel).pipe(Object(d.a)((function(e){t.indexingForm.setModification(),t.setModification(),t.router.navigate(["/administration/indexingModels"]),t.notify.success(t.translate.instant("lang.indexingModelUpdated"))})),Object(Ct.a)((function(){return t.loading=!1})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"isModified",value:function(){return JSON.stringify(this.indexingModel)!==JSON.stringify(this.indexingModelClone)}},{key:"setModification",value:function(){this.indexingModelClone=JSON.parse(JSON.stringify(this.indexingModel))}},{key:"changeCategory",value:function(t){this.indexingForm.changeCategory(t.value)}}]),t}()).\u0275fac=function(t){return new(t||Gh)(u.Tb(m.e),u.Tb(f.b),u.Tb(r.a),u.Tb(r.c),u.Tb(y.a),u.Tb(z.b),u.Tb(p.a),u.Tb(g.a))},Gh.\u0275cmp=u.Nb({type:Gh,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(Ah,!0),u.ad(Hh,!0)),2&t&&(u.Cc(n=u.ic())&&(e.sidenavRight=n.first),u.Cc(n=u.ic())&&(e.indexingForm=n.first))},features:[u.Db([g.a,U.a])],decls:20,vars:14,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end","opened","",1,"col-md-4","col-sm-12",3,"mode","fixedInViewport"],["snav2",""],[3,"label"],[3,"dataFields",4,"ngIf"],[3,"dataCustomFields",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[2,"display","flex"],["name","category","required","",3,"ngModel","placeholder","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[2,"flex","1"],["appearance","outline",1,"indexingModelLabel"],["matInput","","name","label",3,"ngModel","ngModelChange"],[1,"defaultModel"],["color","primary","name","default",3,"ngModel","ngModelChange"],[3,"indexingFormId","admin"],["indexingForm",""],[1,"col-md-12","text-center"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"],[3,"dataFields"],[3,"dataCustomFields"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Zb(1,"mat-sidenav-content"),u.Zb(2,"div",1),u.Zb(3,"div",2),u.Zb(4,"div",3),u.Ub(5,"header-left"),u.Yb(),u.Zb(6,"div",4),u.Ub(7,"header-right"),u.Yb(),u.Yb(),u.Ub(8,"div",5),u.Yb(),u.Zb(9,"div",6),u.Zb(10,"div",7),u.Qc(11,zh,2,0,"div",8),u.Qc(12,Vh,26,19,"mat-card",9),u.Yb(),u.Yb(),u.Yb(),u.Zb(13,"mat-sidenav",10,11),u.Zb(15,"mat-tab-group"),u.Zb(16,"mat-tab",12),u.Qc(17,Nh,1,1,"app-field-list",13),u.Yb(),u.Zb(18,"mat-tab",12),u.Qc(19,Jh,1,1,"app-field-list",14),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(3),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading),u.Eb(1),u.sc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode()),u.Eb(3),u.sc("label",e.translate.instant("lang.availableFields")),u.Eb(1),u.sc("ngIf",void 0!==e.indexingForm),u.Eb(1),u.sc("label",e.translate.instant("lang.availableCustomFields")),u.Eb(1),u.sc("ngIf",void 0!==e.indexingForm))},directives:[S.e,S.f,M.a,Y.a,Z.t,S.d,Re.c,Re.a,O.c,T.a,k.c,k.g,it.a,o.E,o.t,o.w,Z.s,w.b,o.c,nt.a,Rh.a,D.b,I.o,Qh.a],pipes:[m.d],styles:[".indexingModelLabel[_ngcontent-%COMP%]    .mat-form-field-wrapper{padding:0}.defaultModel[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding-left:10px}",".banner[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:30px;border-radius:20px;border:1px solid #ccc;position:relative;padding:20px;width:100%}.banner[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;max-width:85%;text-overflow:ellipsis;z-index:1;font-size:20px;font-weight:700;letter-spacing:2px;position:absolute;top:-18px;left:20px;padding:0;margin:0;color:#135f7f}.banner[_ngcontent-%COMP%]   .title-divider[_ngcontent-%COMP%]{position:absolute;width:99%;z-index:-1;top:17px;background:#fff;height:1px}.banner[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:50%;padding-right:10px}.banner[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{font-size:16px}.fieldRow[_ngcontent-%COMP%]{display:flex;padding-top:10px;padding-bottom:10px}.fieldLabel[_ngcontent-%COMP%]{color:#4a4a4a}.fieldLabel[_ngcontent-%COMP%]   .cdk-drag-handle[_ngcontent-%COMP%]{margin-right:10px}.fieldState[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px;width:40px;justify-content:center;align-items:normal!important;padding-top:15px}.fieldState[_ngcontent-%COMP%]   .fieldRequired[_ngcontent-%COMP%]{font-size:5px;color:#135f7f}.fieldState[_ngcontent-%COMP%]   .fieldError[_ngcontent-%COMP%]{font-size:15px;color:#f99830}.fieldState[_ngcontent-%COMP%]   .fieldFull[_ngcontent-%COMP%]{font-size:15px;color:green}.fieldInput[_ngcontent-%COMP%]{position:relative}.fieldInput[_ngcontent-%COMP%], .fieldLabel[_ngcontent-%COMP%]{font-size:13px;flex:1}@media (max-width:768px){.fieldInput[_ngcontent-%COMP%], .fieldLabel[_ngcontent-%COMP%]{font-size:1em}}.fieldInput[_ngcontent-%COMP%], .fieldLabel[_ngcontent-%COMP%], .fieldState[_ngcontent-%COMP%]{align-items:center;display:flex}.input-form[_ngcontent-%COMP%]{font-size:13px;color:#666;width:500px}.input-form[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{color:#135f7f;padding-left:20px}.input-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.input-form[_ngcontent-%COMP%]    .mat-select-value-text{padding-left:20px;color:#135f7f}.input-form[_ngcontent-%COMP%]    .mat-form-field-label{top:15px;left:20px}.input-form[_ngcontent-%COMP%]    .mat-form-field-infix{display:flex;padding-top:0;padding-bottom:5px}.input-form[_ngcontent-%COMP%]    .mat-form-field-label-wrapper{top:-13px}.input-form[_ngcontent-%COMP%]    .mat-form-field-flex{background:#fff;height:40px;border-radius:10px;border:1px solid #135f7f}.input-form[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.input-form[_ngcontent-%COMP%]    .mat-form-field-suffix{margin-right:20px}.input-form[_ngcontent-%COMP%]    .mat-select-arrow-wrapper{padding-right:20px}.input-form[_ngcontent-%COMP%]    .mat-list-option{color:rgba(0,0,0,.54)}.input-form[_ngcontent-%COMP%]    .mat-form-field-wrapper{padding:0}.input-form[_ngcontent-%COMP%]    .mat-datepicker-toggle-default-icon{height:auto}.input-form.search-select[_ngcontent-%COMP%]    .mat-form-field-label-wrapper{top:-15px}.input-form.input-date[_ngcontent-%COMP%]    .mat-form-field-infix{padding-top:5px}.input-form-filled[_ngcontent-%COMP%]{color:#fff;width:500px;transition:all .1s}.input-form-filled[_ngcontent-%COMP%]:hover    .mat-form-field-flex, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-form-field-flex{background:#fff!important;border:1px solid #fff!important;color:#135f7f!important;transition:all .1s}.input-form-filled[_ngcontent-%COMP%]:hover    .mat-form-field-label, .input-form-filled[_ngcontent-%COMP%]:hover    .mat-select-placeholder, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-form-field-label, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-select-placeholder{color:#135f7f!important}.input-form-filled[_ngcontent-%COMP%]:hover    .mat-select-arrow, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-select-arrow{color:rgba(19,95,127,.54)}.input-form-filled[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{color:#135f7f;padding-left:20px}.input-form-filled[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-select-value{text-align:left;font-weight:400}.input-form-filled[_ngcontent-%COMP%]    .mat-select-value-text{padding-left:20px;color:#fff}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-label{color:#fff;left:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-infix{padding-bottom:15px}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-flex{background:#135f7f;border-radius:30px;border:1px solid #fff}.input-form-filled[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-suffix{margin-right:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-select-arrow-wrapper{padding-right:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-select-arrow{color:hsla(0,0%,100%,.54)}.input-form-filled[_ngcontent-%COMP%]    .mat-select-placeholder{color:#fff}.input-form-filled[_ngcontent-%COMP%]    .mat-list-option{color:rgba(0,0,0,.54)}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-wrapper{padding:0}.input-form-filled[_ngcontent-%COMP%]   textarea.cdk-textarea-autosize-measuring[_ngcontent-%COMP%]{padding:4px 0!important}.input-form-filled[_ngcontent-%COMP%]    .mat-datepicker-toggle-default-icon{height:auto}.input-form.mat-form-field-disabled[_ngcontent-%COMP%]    .mat-input-element{cursor:not-allowed;padding-left:20px}.input-form.mat-form-field-disabled[_ngcontent-%COMP%]    .mat-form-field-flex{cursor:not-allowed;border:1px dashed #353232}.opt-group[_ngcontent-%COMP%]{font-weight:700}.smallInput[_ngcontent-%COMP%]{font-size:11px;padding-left:20px;padding-right:20px}.smallInput[_ngcontent-%COMP%]    .mat-form-field-infix{padding:0 0 5px}.button-form-primary[_ngcontent-%COMP%]{background:#fff;border:1px solid #135f7f;color:#135f7f;border-radius:30px;padding-left:20px;padding-right:20px;width:240px;height:45px;transition:all .1s}@media (max-width:768px){.button-form-primary[_ngcontent-%COMP%]{width:auto}}.button-form-primary[_ngcontent-%COMP%]:hover, .button-form-primary[aria-expanded=true][_ngcontent-%COMP%]{background:#135f7f!important;border:1px solid #fff!important;color:#fff!important;transition:all .1s}.button-form-primary[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;align-items:center;justify-content:center;width:100%}.button-form-primary[_ngcontent-%COMP%]    .mat-button-wrapper .menu-label{display:flex;flex:1;overflow:hidden;text-overflow:ellipsis;margin-right:10px}.button-form-primary[_ngcontent-%COMP%]    .mat-button-wrapper .menu-icon{display:flex}.button-form-primary-filled[_ngcontent-%COMP%]{background:#135f7f;border:1px solid #fff;color:#fff;border-radius:30px;padding-left:20px;padding-right:20px;width:240px;height:45px;transition:all .1s}@media (max-width:768px){.button-form-primary-filled[_ngcontent-%COMP%]{width:auto}}.button-form-primary-filled[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;align-items:center;justify-content:center;width:100%}.button-form-primary-filled[_ngcontent-%COMP%]    .mat-button-wrapper .menu-label{display:flex;flex:1;overflow:hidden;text-overflow:ellipsis;margin-right:10px}.button-form-primary-filled[_ngcontent-%COMP%]    .mat-button-wrapper .menu-icon{display:flex}.button-form-primary-alt[_ngcontent-%COMP%]{font-size:13px;background:#135f7f;border:1px solid #fff;color:#fff;border-radius:30px;padding:5px 20px;width:240px;transition:all .1s}@media (max-width:768px){.button-form-primary-alt[_ngcontent-%COMP%]{font-size:1em}}.button-form-primary-alt[_ngcontent-%COMP%]:hover, .button-form-primary-alt[aria-expanded=true][_ngcontent-%COMP%]{background:#fff!important;border:1px solid #fff!important;color:#135f7f!important;transition:all .1s}.button-form-primary-alt[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;align-items:center;justify-content:center;width:100%}.button-form-primary-alt[_ngcontent-%COMP%]    .mat-button-wrapper .menu-label{display:flex;flex:1}.button-form-primary-alt[_ngcontent-%COMP%]    .mat-button-wrapper .menu-icon{display:flex}.button-form-primary[aria-expanded=true][_ngcontent-%COMP%]{color:#135f7f;background:#fff;transition:all .1s;border:1px solid #135f7f}.button-form[_ngcontent-%COMP%]{background:#fff;color:#135f7f;border-radius:30px;padding:5px 20px;width:240px;transition:all .1s}.button-form[aria-expanded=true][_ngcontent-%COMP%]{transition:all .1s;border-bottom-left-radius:0;border-bottom-right-radius:0;border-top-left-radius:30px;border-top-right-radius:30px} .menuForm{width:240px;border-radius:30px;border:1px solid #fff;min-height:auto} .menuForm .mat-menu-content{padding-top:0;padding-bottom:0} .menuForm .mat-menu-content .mat-menu-item{transition:all .1s;font-size:13px;color:#666}@media (max-width:768px){ .menuForm .mat-menu-content .mat-menu-item{font-size:1em}} .menuForm .mat-menu-content .mat-menu-item:hover{transition:all .1s;color:#fff;background:#1a80ab} .parametersFieldsMenu{min-height:auto}.div-list[_ngcontent-%COMP%]{padding:0;max-height:150px;overflow:auto}.div-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{font-size:13px}@media (max-width:768px){.div-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{font-size:1em}}.checkbox-form[_ngcontent-%COMP%]{width:100%;padding:0;border:1px solid #135f7f;border-radius:30px;overflow:hidden}.checkbox-selected-list[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:center}.checkbox-selected-list[_ngcontent-%COMP%]    .mat-chip-list-wrapper{justify-content:center}.checkbox-selected-list[_ngcontent-%COMP%]   .mat-chip[_ngcontent-%COMP%]{font-size:13px}@media (max-width:768px){.checkbox-selected-list[_ngcontent-%COMP%]   .mat-chip[_ngcontent-%COMP%]{font-size:1em}}.radio-form[_ngcontent-%COMP%]{padding-left:20px;display:grid;grid-template-columns:repeat(2,1fr);width:100%}.radio-form[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]{flex:1}.radio-form[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]    .mat-radio-label-content{font-weight:400;color:rgba(0,0,0,.54)}.radio-form[_ngcontent-%COMP%]   .mat-radio-disabled[_ngcontent-%COMP%]{opacity:.5}.input-radio[_ngcontent-%COMP%]    .mat-form-field-infix{overflow:auto;padding-top:0}.input-radio[_ngcontent-%COMP%]    .mat-form-field-flex{height:auto}.input-radio[_ngcontent-%COMP%]    .mat-form-field-label{top:0;font-size:12px}.disabled[_ngcontent-%COMP%]{opacity:.2}.customFieldRow[_ngcontent-%COMP%]{display:flex;padding-top:20px;padding-bottom:20px}.customFieldDrag[_ngcontent-%COMP%]{cursor:move;width:50px;display:flex;align-items:center;justify-content:center}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drag-preview[_ngcontent-%COMP%]{background:#fff;box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.indexingModelsCustomFieldsList.cdk-drop-list-dragging[_ngcontent-%COMP%]   .indexingModelsCustomFieldsList[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.advancedInput[_ngcontent-%COMP%]{flex-direction:column}.noMandatory[_ngcontent-%COMP%]{visibility:hidden}.checkboxInput[_ngcontent-%COMP%]{display:block}.categoryLabel[_ngcontent-%COMP%]{letter-spacing:1px;font-size:13px;color:#135f7f;font-weight:700}@media (max-width:768px){.categoryLabel[_ngcontent-%COMP%]{font-size:1em}}.textareaInput[_ngcontent-%COMP%]    .mat-form-field{line-height:normal}.textareaInput[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{padding:0;margin:0;color:#135f7f}.textareaInput[_ngcontent-%COMP%]    .mat-form-field-flex{padding-left:20px;height:auto!important;min-height:40px!important}.textareaInput[_ngcontent-%COMP%]    .mat-form-field-label{left:0}"]}),Gh);function Wh(t,e){if(1&t&&(u.Zb(0,"li"),u.Zb(1,"b"),u.Sc(2),u.Yb(),u.Sc(3),u.mc(4,"translate"),u.Zb(5,"b"),u.Sc(6),u.Yb(),u.Yb()),2&t){var n=e.$implicit;u.Eb(2),u.Tc(n.count),u.Eb(1),u.Uc(" ",u.nc(4,3,"lang.mailsWithStatus")," "),u.Eb(3),u.Tc(n.status)}}function qh(t,e){if(1&t&&(u.Zb(0,"mat-option",14),u.Sc(1),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.sc("value",n.id)("disabled",n.id===a.mainIndexingModel.id),u.Eb(1),u.Uc(" ",n.label," ")}}function Xh(t,e){if(1&t){var n=u.ac();u.Zb(0,"div"),u.Zb(1,"mat-form-field",11),u.Zb(2,"mat-select",12),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().modelIds=t}))("selectionChange",(function(t){return u.Hc(n),u.lc().changeModel(t)})),u.Qc(3,qh,2,3,"mat-option",13),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc();u.Eb(2),u.sc("ngModel",a.modelIds)("placeholder",a.translate.instant("lang.indexingModel")),u.Eb(1),u.sc("ngForOf",a.indexingModels)}}function Kh(t,e){if(1&t&&(u.Zb(0,"li"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.label," ")}}function tv(t,e){if(1&t&&(u.Zb(0,"div",15),u.Sc(1),u.mc(2,"translate"),u.Zb(3,"ul"),u.Qc(4,Kh,2,1,"li",4),u.Yb(),u.Sc(5),u.mc(6,"translate"),u.Yb()),2&t){var n=u.lc();u.Eb(1),u.Uc(" ",u.nc(2,3,"lang.indexingModelFieldsReset")," "),u.Eb(3),u.sc("ngForOf",n.resetFields),u.Eb(1),u.Uc(" ",u.nc(6,5,"lang.confirmAction")," ")}}var ev,nv=((ev=function(){function t(e,n,a,i,r,c){_classCallCheck(this,t),this.translate=e,this.data=n,this.dialogRef=a,this.http=i,this.notify=r,this.sortPipe=c,this.indexingModels=[],this.modelIds=[],this.resetFields=[],this.statuses=[],this.customFields=[],this.availableFields=[{identifier:"doctype",label:this.translate.instant("lang.doctype")},{identifier:"subject",label:this.translate.instant("lang.subject")},{identifier:"recipients",label:this.translate.instant("lang.getRecipients")},{identifier:"priority",label:this.translate.instant("lang.priority")},{identifier:"confidentiality",label:this.translate.instant("lang.confidential")},{identifier:"initiator",label:this.translate.instant("lang.initiatorEntityAlt")},{identifier:"departureDate",label:this.translate.instant("lang.departureDate")},{identifier:"processLimitDate",label:this.translate.instant("lang.processLimitDate")},{identifier:"tags",label:this.translate.instant("lang.tags")},{identifier:"senders",label:this.translate.instant("lang.getSenders")},{identifier:"destination",label:this.translate.instant("lang.destination")},{identifier:"folders",label:this.translate.instant("lang.folders")},{identifier:"documentDate",label:this.translate.instant("lang.docDate")},{identifier:"arrivalDate",label:this.translate.instant("lang.arrivalDate")}],this.loading=!1,this.mainIndexingModel=n.indexingModel}return _createClass(t,[{key:"ngOnInit",value:function(){return Object(yt.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.loadIndexingModels(),this.loadStatuses(),this.loadCustomFields(),this.loadIndexingModelFields();case 1:case"end":return t.stop()}}),t,this)})))}},{key:"loadIndexingModels",value:function(){var t=this;this.http.get("../rest/indexingModels").pipe(Object(l.a)((function(t){return t.indexingModels.filter((function(t){return!1===t.private}))})),Object(d.a)((function(e){t.indexingModels=e,t.sortPipe.transform(t.indexingModels,"label"),t.modelIds=t.indexingModels.map((function(t){return t.id}))})),Object(Ct.a)((function(){return t.loading=!1})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"loadIndexingModelFields",value:function(){var t=this;this.http.get("../rest/indexingModels/"+this.mainIndexingModel.id).pipe(Object(d.a)((function(e){t.mainIndexingModelFields=e.indexingModel.fields,t.mainIndexingModelFields=t.mainIndexingModelFields.map((function(e){var n=t.availableFields.find((function(t){return t.identifier===e.identifier}));return e.label=void 0===n?t.translate.instant("lang.undefined"):n.label,e}))})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"loadStatuses",value:function(){var t=this;this.http.get("../rest/statuses").pipe(Object(d.a)((function(e){t.statuses=e.statuses,t.mainIndexingModel.used.forEach((function(e){var n=t.statuses.find((function(t){return t.id===e.status}));void 0!==n&&(e.status=n.label_status)}))})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"loadCustomFields",value:function(){var t=this;this.http.get("../rest/customFields").pipe(Object(d.a)((function(e){e.customFields=e.customFields.map((function(t){return{identifier:"indexingCustomField_"+t.id,label:t.label}})),e.customFields.forEach((function(e){t.availableFields.push(e)})),t.sortPipe.transform(t.availableFields,"label"),t.loadIndexingModelFields()})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"changeModel",value:function(t){var e=this;this.selectedModelId=t.value,this.http.get("../rest/indexingModels/"+this.selectedModelId).pipe(Object(d.a)((function(t){e.selectedModelFields=t.indexingModel.fields,e.resetFields=e.mainIndexingModelFields.filter((function(t){return void 0===e.selectedModelFields.find((function(e){return e.identifier===t.identifier}))})),e.sortPipe.transform(e.resetFields,"label")})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe()}},{key:"onSubmit",value:function(){var t=this;this.http.request("DELETE","../rest/indexingModels/"+this.mainIndexingModel.id,{body:{targetId:this.selectedModelId}}).pipe(Object(d.a)((function(){t.notify.success(t.translate.instant("lang.indexingModelDeleted")),t.dialogRef.close("ok")})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}}]),t}()).\u0275fac=function(t){return new(t||ev)(u.Tb(m.e),u.Tb(z.a),u.Tb(z.h),u.Tb(f.b),u.Tb(y.a),u.Tb(U.a))},ev.\u0275cmp=u.Nb({type:ev,selectors:[["ng-component"]],features:[u.Db([U.a])],decls:22,vars:19,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"alert-message","alert-message-info"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","alert-message alert-message-danger",4,"ngIf"],[1,"divider-modal"],["mat-dialog-actions",""],["color","primary","mat-raised-button","",1,"actions",3,"disabled","click"],["color","","mat-raised-button","",1,"actions",3,"click"],[2,"padding","10px","margin-top","15px"],["name","model","required","",3,"ngModel","placeholder","ngModelChange","selectionChange"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"],[1,"alert-message","alert-message-danger"]],template:function(t,e){1&t&&(u.Zb(0,"div",0),u.Zb(1,"h1",1),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Sc(6),u.mc(7,"translate"),u.Zb(8,"ul"),u.Qc(9,Wh,7,5,"li",4),u.Yb(),u.Sc(10),u.mc(11,"translate"),u.Yb(),u.Qc(12,Xh,4,3,"div",5),u.Qc(13,tv,7,7,"div",6),u.Ub(14,"span",7),u.Zb(15,"div",8),u.Zb(16,"button",9),u.hc("click",(function(){return e.onSubmit()})),u.Sc(17),u.mc(18,"translate"),u.Yb(),u.Zb(19,"button",10),u.hc("click",(function(){return e.dialogRef.close("")})),u.Sc(20),u.mc(21,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(2),u.Tc(u.nc(3,9,"lang.indexingModelReassign")),u.Eb(4),u.Uc(" ",u.nc(7,11,"lang.indexingModelUsedBy")," "),u.Eb(3),u.sc("ngForOf",e.mainIndexingModel.used),u.Eb(1),u.Uc(" ",u.nc(11,13,"lang.indexingModelReplaceToDelete")," "),u.Eb(2),u.sc("ngIf",!e.loading),u.Eb(1),u.sc("ngIf",0!==e.resetFields.length),u.Eb(3),u.sc("disabled",void 0===e.selectedModelId),u.Eb(1),u.Tc(u.nc(18,15,"lang.validate")),u.Eb(3),u.Tc(u.nc(21,17,"lang.cancel")))},directives:[z.i,z.f,Z.s,Z.t,z.c,D.b,k.c,it.a,o.E,o.t,o.w,I.o],pipes:[m.d],styles:[".alert-message-info[_ngcontent-%COMP%]{margin:0;font-size:16px}"]}),ev),av=["adminMenuTemplate"];function iv(t,e){1&t&&(u.Zb(0,"mat-nav-list"),u.Zb(1,"h3",11),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"a",12),u.Ub(5,"mat-icon",13),u.Zb(6,"p",14),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(2),u.Tc(u.nc(3,2,"lang.actions")),u.Eb(5),u.Uc(" ",u.nc(8,4,"lang.add")," "))}function rv(t,e){1&t&&(u.Zb(0,"div",15),u.Ub(1,"mat-spinner",16),u.Yb())}function cv(t,e){1&t&&(u.Zb(0,"mat-header-cell",41),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.technicalId")))}function ov(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.id," ")}}function sv(t,e){1&t&&(u.Zb(0,"mat-header-cell",41),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.category_id")))}function lv(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",u.nc(2,1,"lang."+n.category)," ")}}function dv(t,e){1&t&&(u.Zb(0,"mat-header-cell",42),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.label")))}function bv(t,e){if(1&t&&(u.Zb(0,"mat-cell",43),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.label," ")}}function uv(t,e){1&t&&(u.Zb(0,"mat-header-cell",41),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.perimeter")))}var mv=function(t,e){return{dataLabelWarn:t,dataLabelPrimary:e}};function fv(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Zb(1,"span",44),u.Sc(2),u.Yb(),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.Eb(1),u.sc("ngClass",u.Ac(2,mv,n.private,!n.private)),u.Eb(1),u.Tc(a.translate.instant(n.private?"lang.private":"lang.public"))}}function pv(t,e){1&t&&(u.Zb(0,"mat-header-cell",41),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.default")))}function gv(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Zb(1,"span",44),u.Sc(2),u.Yb(),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.Eb(1),u.sc("ngClass",u.Ac(2,mv,!n.default,n.default)),u.Eb(1),u.Tc(a.translate.instant(n.default?"lang.yes":"lang.no"))}}function hv(t,e){1&t&&(u.Zb(0,"mat-header-cell",41),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.status")))}function vv(t,e){1&t&&(u.Zb(0,"span",47),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.active")))}function yv(t,e){1&t&&(u.Zb(0,"span",48),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.inactive")))}function Cv(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Qc(1,vv,3,3,"span",45),u.Qc(2,yv,3,3,"span",46),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.sc("ngIf",n.enabled),u.Eb(1),u.sc("ngIf",!n.enabled)}}function Ev(t,e){1&t&&u.Ub(0,"mat-header-cell")}function Sv(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",54),u.hc("click",(function(t){u.Hc(n);var e=u.lc().$implicit,a=u.lc(2);return t.stopPropagation(),a.disableIndexingModel(e)})),u.mc(1,"translate"),u.Ub(2,"mat-icon",55),u.Yb()}if(2&t){var a=u.lc().$implicit;u.tc("matTooltip",u.nc(1,2,"lang.suspend")),u.sc("disabled",a.default)}}function Mv(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",56),u.hc("click",(function(t){u.Hc(n);var e=u.lc().$implicit,a=u.lc(2);return t.stopPropagation(),a.enableIndexingModel(e)})),u.mc(1,"translate"),u.Ub(2,"mat-icon",57),u.Yb()}2&t&&u.tc("matTooltip",u.nc(1,1,"lang.authorize"))}function xv(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-cell",49),u.Qc(1,Sv,3,4,"button",50),u.Qc(2,Mv,3,3,"button",51),u.Zb(3,"button",52),u.hc("click",(function(t){u.Hc(n);var a=e.$implicit,i=u.lc(2);return t.stopPropagation(),i.delete(a)})),u.mc(4,"translate"),u.Ub(5,"mat-icon",53),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit;u.Eb(1),u.sc("ngIf",a.enabled),u.Eb(1),u.sc("ngIf",!a.enabled),u.Eb(1),u.tc("matTooltip",u.nc(4,4,"lang.delete")),u.sc("disabled",a.default)}}function Yv(t,e){1&t&&u.Ub(0,"mat-header-row")}function Zv(t,e){1&t&&(u.Ub(0,"mat-row",58),u.mc(1,"translate")),2&t&&(u.uc("routerLink","/administration/indexingModels/",e.$implicit.id,""),u.tc("matTooltip",u.nc(1,2,"lang.view")))}function _v(t,e){if(1&t&&(u.Zb(0,"mat-card",17),u.Zb(1,"div",18),u.Zb(2,"div",19),u.Zb(3,"mat-form-field"),u.Ub(4,"input",20),u.mc(5,"translate"),u.Yb(),u.Yb(),u.Zb(6,"div",19),u.Ub(7,"mat-paginator",21,22),u.Yb(),u.Yb(),u.Zb(9,"mat-table",23,24),u.Xb(11,25),u.Qc(12,cv,3,3,"mat-header-cell",26),u.Qc(13,ov,2,1,"mat-cell",27),u.Wb(),u.Xb(14,28),u.Qc(15,sv,3,3,"mat-header-cell",26),u.Qc(16,lv,3,3,"mat-cell",27),u.Wb(),u.Xb(17,29),u.Qc(18,dv,3,3,"mat-header-cell",30),u.Qc(19,bv,2,1,"mat-cell",31),u.Wb(),u.Xb(20,32),u.Qc(21,uv,3,3,"mat-header-cell",26),u.Qc(22,fv,3,5,"mat-cell",27),u.Wb(),u.Xb(23,33),u.Qc(24,pv,3,3,"mat-header-cell",26),u.Qc(25,gv,3,5,"mat-cell",27),u.Wb(),u.Xb(26,34),u.Qc(27,hv,3,3,"mat-header-cell",26),u.Qc(28,Cv,3,2,"mat-cell",27),u.Wb(),u.Xb(29,35),u.Qc(30,Ev,1,0,"mat-header-cell",36),u.Qc(31,xv,6,6,"mat-cell",37),u.Wb(),u.Qc(32,Yv,1,0,"mat-header-row",38),u.Qc(33,Zv,2,4,"mat-row",39),u.Yb(),u.Zb(34,"div",40),u.Sc(35),u.mc(36,"translate"),u.Yb(),u.Yb()),2&t){var n=u.lc();u.Eb(4),u.tc("placeholder",u.nc(5,10,"lang.filterBy")),u.sc("formControl",n.adminService.getFilterField()),u.Eb(3),u.sc("length",100)("hidePageSize",!0)("pageSize",10),u.Eb(2),u.sc("dataSource",n.adminService.getDataSource()),u.Eb(23),u.sc("matHeaderRowDef",n.displayedColumns),u.Eb(1),u.sc("matRowDefColumns",n.displayedColumns),u.Eb(2),u.Vc(" ",n.indexingModels.length," ",u.nc(36,12,"lang.indexingModels"),"")}}var kv,wv=((kv=function(){function t(e,n,a,i,r,c,o,s,l){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.headerService=i,this.appService=r,this.dialog=c,this.functions=o,this.adminService=s,this.viewContainerRef=l,this.search=null,this.indexingModels=[],this.loading=!1,this.displayedColumns=["id","category","label","private","default","enabled","actions"],this.filterColumns=["id","label"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/indexingModels?showDisabled=true").pipe(Object(l.a)((function(t){return t.indexingModels.filter((function(t){return!1===t.private}))})),Object(d.a)((function(e){t.indexingModels=e,t.headerService.setHeader(t.translate.instant("lang.administration")+" "+t.translate.instant("lang.indexingModels")),setTimeout((function(){t.adminService.setDataSource("admin_indexing_models",t.indexingModels,t.sort,t.paginator,t.filterColumns)}),0)})),Object(Ct.a)((function(){return t.loading=!1})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"delete",value:function(t){var e=this;0===t.used.length?(this.dialogRef=this.dialog.open(W.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete"),msg:this.translate.instant("lang.confirmAction")}}),this.dialogRef.afterClosed().pipe(Object(q.a)((function(t){return"ok"===t})),Object(X.a)((function(){return e.http.delete("../rest/indexingModels/"+t.id)})),Object(d.a)((function(){for(var n in e.indexingModels)e.indexingModels[n].id===t.id&&e.indexingModels.splice(Number(n),1);e.adminService.setDataSource("admin_indexing_models",e.indexingModels,e.sort,e.paginator,e.filterColumns),e.notify.success(e.translate.instant("lang.indexingModelDeleted"))})),Object(b.a)((function(t){return e.notify.handleSoftErrors(t),Object(J.of)(!1)}))).subscribe()):(this.dialogRef=this.dialog.open(nv,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete"),msg:this.translate.instant("lang.confirmAction"),indexingModel:t}}),this.dialogRef.afterClosed().pipe(Object(q.a)((function(t){return"ok"===t})),Object(d.a)((function(){for(var n in e.indexingModels)e.indexingModels[n].id===t.id&&e.indexingModels.splice(Number(n),1);e.adminService.setDataSource("admin_indexing_models",e.indexingModels,e.sort,e.paginator,e.filterColumns)})),Object(b.a)((function(t){return e.notify.handleSoftErrors(t),Object(J.of)(!1)}))).subscribe())}},{key:"disableIndexingModel",value:function(t){var e=this;this.dialogRef=this.dialog.open(W.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.disable"),msg:this.translate.instant("lang.confirmAction")}}),this.dialogRef.afterClosed().pipe(Object(q.a)((function(t){return"ok"===t})),Object(X.a)((function(){return e.http.request("PUT","../rest/indexingModels/"+t.id+"/disable")})),Object(d.a)((function(n){for(var a in e.indexingModels)e.indexingModels[a].id===t.id&&(e.indexingModels[a].enabled=!1);e.notify.success(e.translate.instant("lang.indexingModelDisabled"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe()}},{key:"enableIndexingModel",value:function(t){var e=this;this.dialogRef=this.dialog.open(W.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.enable"),msg:this.translate.instant("lang.confirmAction")}}),this.dialogRef.afterClosed().pipe(Object(q.a)((function(t){return"ok"===t})),Object(X.a)((function(){return e.http.request("PUT","../rest/indexingModels/"+t.id+"/enable")})),Object(d.a)((function(n){for(var a in e.indexingModels)e.indexingModels[a].id===t.id&&(e.indexingModels[a].enabled=!0);e.notify.success(e.translate.instant("lang.indexingModelEnabled"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe()}}]),t}()).\u0275fac=function(t){return new(t||kv)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a),u.Tb(z.b),u.Tb(C.a),u.Tb(It),u.Tb(u.R))},kv.\u0275cmp=u.Nb({type:kv,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(av,!0),u.ad(V.a,!0),u.ad(N.a,!0)),2&t&&(u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.paginator=n.first),u.Cc(n=u.ic())&&(e.sort=n.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/indexingModels/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSortDisableClear","","matSort","",3,"dataSource"],["table",""],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","category"],["matColumnDef","label"],["mat-sort-header","","style","flex:2",4,"matHeaderCellDef"],["style","flex:2",4,"matCellDef"],["matColumnDef","private"],["matColumnDef","default"],["matColumnDef","enabled"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header",""],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],[1,"label",3,"ngClass"],["class","label dataLabelPrimary",4,"ngIf"],["class","label dataLabelWarn",4,"ngIf"],[1,"label","dataLabelPrimary"],[1,"label","dataLabelWarn"],[2,"justify-content","flex-end"],["mat-icon-button","","color","primary",3,"matTooltip","disabled","click",4,"ngIf"],["mat-icon-button","","color","accent",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","color","warn",3,"matTooltip","disabled","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],["mat-icon-button","","color","primary",3,"matTooltip","disabled","click"],["aria-hidden","true",1,"fa","fa-pause","fa-2x"],["mat-icon-button","","color","accent",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-check","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,iv,9,6,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,rv,2,0,"div",9),u.Qc(14,_v,37,14,"mat-card",10),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading))},directives:[S.e,S.f,M.a,Y.a,Z.t,Dt.h,Dt.g,Dt.d,r.f,Ut.a,Dt.c,I.k,O.c,T.a,k.c,w.b,o.c,o.t,o.i,V.a,B.n,N.a,B.c,B.i,B.b,B.k,B.m,B.h,N.b,B.a,Z.q,D.b,Ft.b,B.j,B.l,r.d],pipes:[m.d],styles:[".dataLabelWarn[_ngcontent-%COMP%]{color:#8e3e52}.dataLabelPrimary[_ngcontent-%COMP%]{color:#135f7f}.label[_ngcontent-%COMP%]{font-size:75%;font-weight:700}"]}),kv),Ov=["listFilter"];function Tv(t,e){1&t&&(u.Zb(0,"div",32),u.Ub(1,"mat-spinner"),u.Yb())}function Iv(t,e){if(1&t&&(u.Zb(0,"mat-option",33),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n),u.Eb(1),u.Uc(" ",n," ")}}function Dv(t,e){if(1&t&&(u.Zb(0,"mat-option",33),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n),u.Eb(1),u.Uc(" ",n," ")}}function Uv(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",34),u.Zb(1,"mat-form-field",5),u.Zb(2,"mat-label"),u.Sc(3),u.mc(4,"translate"),u.Yb(),u.Zb(5,"mat-select",35),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().exportModel.delimiter=t})),u.mc(6,"translate"),u.Qc(7,Dv,2,2,"mat-option",7),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc();u.Eb(3),u.Tc(u.nc(4,5,"lang.delimiter")),u.Eb(2),u.tc("placeholder",u.nc(6,7,"lang.delimiter")),u.sc("ngModel",a.exportModel.delimiter)("disabled","csv"!=a.exportModel.format),u.Eb(2),u.sc("ngForOf",a.delimiters)}}function Pv(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",36),u.Sc(1),u.Zb(2,"i",37),u.hc("click",(function(){u.Hc(n);var t=e.$implicit;return u.lc().addData(t)})),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit;u.tc("id",a.value),u.Eb(1),u.Uc("",a.label," ")}}function Fv(t,e){1&t&&(u.Zb(0,"div",38),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.noDataAvailable")))}function Lv(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",36),u.Sc(1),u.Zb(2,"i",39),u.hc("click",(function(){u.Hc(n);var t=e.index;return u.lc().removeData(t)})),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit;u.tc("id",a.value),u.Eb(1),u.Uc("",a.label," ")}}function jv(t,e){1&t&&(u.Zb(0,"div",38),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.noDataAvailable")))}var Rv,Qv,Av=function(t){return[t]},Hv=((Rv=function(){function t(e,n,a,i,r,c,o){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.data=i,this.sortPipe=r,this.localStorage=c,this.headerService=o,this.loading=!1,this.loadingExport=!1,this.delimiters=[";",",","TAB"],this.formats=["csv"],this.exportModel={delimiter:";",format:"csv",data:[]},this.dataAvailable=[{value:"id",label:this.translate.instant("lang.id")},{value:"externalId",label:"External Id"},{value:"enabled",label:this.translate.instant("lang.status")},{value:"communicationMeans",label:this.translate.instant("lang.communicationMean")}]}return _createClass(t,[{key:"ngOnInit",value:function(){return Object(yt.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getContactFields();case 2:this.setConfiguration();case 3:case"end":return t.stop()}}),t,this)})))}},{key:"getContactFields",value:function(){var t=this;return new Promise((function(e,n){t.http.get("../rest/contactsParameters").pipe(Object(l.a)((function(e){var n=/contactCustomField_[.]*/g;return e.contactsParameters=e.contactsParameters.filter((function(t){return null===t.identifier.match(n)})).map((function(e){return{value:e.identifier,label:t.translate.instant("lang.contactsParameters_"+e.identifier)}})),e.contactsParameters})),Object(d.a)((function(e){t.dataAvailable=t.dataAvailable.concat(e)})),Object(X.a)((function(){return t.http.get("../rest/contactsCustomFields")})),Object(l.a)((function(t){return t.customFields=t.customFields.map((function(t){return{value:"contactCustomField_"+t.id,label:t.label}})),t.customFields})),Object(d.a)((function(n){t.dataAvailable=t.dataAvailable.concat(n),t.dataAvailable=t.sortPipe.transform(t.dataAvailable,"label"),e(!0)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}))}},{key:"drop",value:function(t){var e=this;if(t.previousContainer===t.container)Object(Pa.h)(t.container.data,t.previousIndex,t.currentIndex);else{var n=t.previousIndex;if("selectedElements"===t.container.id&&(n=0,void 0!==$(".available-data .columns")[t.previousIndex])){var a=$(".available-data .columns")[t.previousIndex].id;n=this.dataAvailable.map((function(t){return t.value})).indexOf(a)}Object(Pa.i)(t.previousContainer.data,t.container.data,n,t.currentIndex);var i=this.listFilter.nativeElement.value;this.listFilter.nativeElement.value="",setTimeout((function(){e.listFilter.nativeElement.value=i}),10)}}},{key:"exportData",value:function(){var t=this;this.localStorage.save("exportContactFields_"+this.headerService.user.id,JSON.stringify(this.exportModel)),this.loadingExport=!0,this.http.put("../rest/contacts/export",this.exportModel,{responseType:"blob"}).pipe(Object(d.a)((function(e){if("text/html"!==e.type){var n,a,i,r,c=document.createElement("a");c.href=window.URL.createObjectURL(e),a=(n=new Date).getDate(),i=n.getMonth()+1,r=n.getFullYear(),a<10&&(a="0"+a),i<10&&(i="0"+i),n=a+"-"+i+"-"+r,c.setAttribute("download","export_contact_maarch_"+n+"."+t.exportModel.format.toLowerCase()),document.body.appendChild(c),c.click()}else alert(t.translate.instant("lang.tooMuchDatas"))})),Object(Ct.a)((function(){return t.loadingExport=!1})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"addData",value:function(t){var e=this,n=0;this.dataAvailable.forEach((function(e,a){e.value===t.value&&(n=a)})),Object(Pa.i)(this.dataAvailable,this.exportModel.data,n,this.exportModel.data.length);var a=this.listFilter.nativeElement.value;this.listFilter.nativeElement.value="",setTimeout((function(){e.listFilter.nativeElement.value=a}),10)}},{key:"removeData",value:function(t){Object(Pa.i)(this.exportModel.data,this.dataAvailable,t,this.dataAvailable.length),this.sortPipe.transform(this.dataAvailable,"label")}},{key:"removeAllData",value:function(){this.dataAvailable=this.dataAvailable.concat(this.exportModel.data),this.exportModel.data=[]}},{key:"addAllData",value:function(){for(this.exportModel.data=this.exportModel.data.concat(this.dataAvailable);this.dataAvailable.length>0;)this.dataAvailable.pop();this.listFilter.nativeElement.value=""}},{key:"setConfiguration",value:function(){var t=this;null!==this.localStorage.get("exportContactFields_"+this.headerService.user.id)&&(JSON.parse(this.localStorage.get("exportContactFields_"+this.headerService.user.id)).data.forEach((function(e){t.addData(e)})),this.exportModel.delimiter=JSON.parse(this.localStorage.get("exportContactFields_"+this.headerService.user.id)).delimiter)}}]),t}()).\u0275fac=function(t){return new(t||Rv)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(z.a),u.Tb(U.a),u.Tb(tt.a),u.Tb(p.a))},Rv.\u0275cmp=u.Nb({type:Rv,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&u.Oc(Ov,!0),2&t&&u.Cc(n=u.ic())&&(e.listFilter=n.first)},features:[u.Db([U.a])],decls:63,vars:62,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["mat-dialog-content",""],["class","loader",4,"ngIf"],[1,"row"],["appearance","outline"],[3,"placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","col-md-9",4,"ngIf"],[3,"expanded"],[1,"col-md-12"],["appearance","outline",1,"listFilter"],["matInput","","cdkFocusInitial","",3,"placeholder"],["listFilter",""],[1,"row","exportList"],[1,"col-md-6","available-data"],[1,"title"],["color","primary",1,"fa","fa-plus-circle","removeAllDatas",3,"title","click"],["id","availableElements","cdkDropList","",1,"cdk-list",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["dataAvailableList","cdkDropList"],["class","columns","cdkDrag","",3,"id",4,"ngFor","ngForOf"],["class","noData",4,"ngIf"],[2,"display","flex","align-items","center"],[1,"fas","fa-arrow-right"],[1,"col-md-6","active-data"],["color","warn",1,"fa","fa-minus-circle","removeAllDatas",3,"title","click"],["id","selectedElements","cdkDropList","",1,"cdk-list",3,"cdkDropListData","cdkDropListConnectedTo","cdkDropListDropped"],["dataExportList","cdkDropList"],[1,"divider-modal"],["mat-dialog-actions","",1,"actions"],["mat-raised-button","","mat-button","","color","primary",3,"disabled","click"],["mat-raised-button","","mat-button","",3,"mat-dialog-close"],[1,"loader"],[3,"value"],[1,"col-md-9"],[3,"placeholder","ngModel","disabled","ngModelChange"],["cdkDrag","",1,"columns",3,"id"],["color","primary",1,"fa","fa-plus",2,"cursor","pointer",3,"click"],[1,"noData"],["color","warn",1,"fa","fa-minus",2,"cursor","pointer",3,"click"]],template:function(t,e){if(1&t&&(u.Zb(0,"div",0),u.Zb(1,"h1",1),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"div",2),u.Qc(5,Tv,2,0,"div",3),u.Zb(6,"div",4),u.Zb(7,"div"),u.Zb(8,"mat-form-field",5),u.Zb(9,"mat-label"),u.Sc(10),u.mc(11,"translate"),u.Yb(),u.Zb(12,"mat-select",6),u.hc("ngModelChange",(function(t){return e.exportModel.format=t})),u.mc(13,"translate"),u.Qc(14,Iv,2,2,"mat-option",7),u.Yb(),u.Yb(),u.Yb(),u.Qc(15,Uv,8,9,"div",8),u.Yb(),u.Zb(16,"mat-accordion"),u.Zb(17,"mat-expansion-panel",9),u.Zb(18,"mat-expansion-panel-header"),u.Zb(19,"mat-panel-title"),u.Sc(20),u.mc(21,"translate"),u.Yb(),u.Yb(),u.Zb(22,"div",4),u.Zb(23,"div",10),u.Zb(24,"mat-form-field",11),u.Ub(25,"input",12,13),u.mc(27,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Zb(28,"div",14),u.Zb(29,"div",15),u.Zb(30,"h2"),u.Zb(31,"span",16),u.Sc(32),u.mc(33,"translate"),u.Yb(),u.Zb(34,"i",17),u.hc("click",(function(){return e.addAllData()})),u.mc(35,"translate"),u.Yb(),u.Yb(),u.Zb(36,"div",18,19),u.hc("cdkDropListDropped",(function(t){return e.drop(t)})),u.Qc(38,Pv,3,2,"div",20),u.mc(39,"filterList"),u.mc(40,"sortBy"),u.Qc(41,Fv,3,3,"div",21),u.Yb(),u.Yb(),u.Zb(42,"div",22),u.Ub(43,"i",23),u.Yb(),u.Zb(44,"div",24),u.Zb(45,"h2"),u.Zb(46,"span",16),u.Sc(47),u.mc(48,"translate"),u.Yb(),u.Zb(49,"i",25),u.hc("click",(function(){return e.removeAllData()})),u.mc(50,"translate"),u.Yb(),u.Yb(),u.Zb(51,"div",26,27),u.hc("cdkDropListDropped",(function(t){return e.drop(t)})),u.Qc(53,Lv,3,2,"div",20),u.Qc(54,jv,3,3,"div",21),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Ub(55,"span",28),u.Zb(56,"div",29),u.Zb(57,"button",30),u.hc("click",(function(){return e.exportData()})),u.Sc(58),u.mc(59,"translate"),u.Yb(),u.Zb(60,"button",31),u.Sc(61),u.mc(62,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t){var n=u.Dc(26),a=u.Dc(37),i=u.Dc(52);u.Eb(2),u.Tc(u.nc(3,29,"lang.exportDatas")),u.Eb(3),u.sc("ngIf",e.loadingExport),u.Eb(2),u.Jb("col-md-12","csv"!=e.exportModel.format)("col-md-3","csv"==e.exportModel.format),u.Eb(3),u.Tc(u.nc(11,31,"lang.format")),u.Eb(2),u.tc("placeholder",u.nc(13,33,"lang.format")),u.sc("ngModel",e.exportModel.format),u.Eb(2),u.sc("ngForOf",e.formats),u.Eb(1),u.sc("ngIf","csv"==e.exportModel.format),u.Eb(2),u.sc("expanded",!0),u.Eb(3),u.Uc(" ",u.nc(21,35,"lang.datasToExport")," "),u.Eb(5),u.tc("placeholder",u.nc(27,37,"lang.searchDatas")),u.Eb(7),u.Tc(u.nc(33,39,"lang.availableDatas")),u.Eb(2),u.tc("title",u.nc(35,41,"lang.addAllData")),u.Eb(2),u.sc("cdkDropListData",e.dataAvailable)("cdkDropListConnectedTo",u.zc(58,Av,i)),u.Eb(2),u.sc("ngForOf",u.pc(39,43,u.oc(40,47,e.dataAvailable,"label"),n.value,"label")),u.Eb(3),u.sc("ngIf",0==e.dataAvailable.length),u.Eb(6),u.Tc(u.nc(48,50,"lang.chosenDatas")),u.Eb(2),u.tc("title",u.nc(50,52,"lang.removeAllDatas")),u.Eb(2),u.sc("cdkDropListData",e.exportModel.data)("cdkDropListConnectedTo",u.zc(60,Av,a)),u.Eb(2),u.sc("ngForOf",e.exportModel.data),u.Eb(1),u.sc("ngIf",0==e.exportModel.data.length),u.Eb(3),u.sc("disabled",0==e.exportModel.data.length),u.Eb(1),u.Tc(u.nc(59,54,"lang.toExport")),u.Eb(3),u.Tc(u.nc(62,56,"lang.cancel"))}},directives:[z.i,z.f,Z.t,k.c,k.g,it.a,o.t,o.w,Z.s,Qe.a,Qe.c,Qe.g,Qe.h,w.b,Pa.e,z.c,D.b,z.d,O.c,I.o,Pa.a],pipes:[m.d,Ha.a,U.a],styles:[".mat-dialog-container{position:relative}.mat-dialog-content[_ngcontent-%COMP%]{padding-bottom:10px;overflow-x:hidden} .mat-expansion-panel-body{padding-bottom:50px}.mat-expansion-panel-header[_ngcontent-%COMP%], .noData[_ngcontent-%COMP%]{opacity:.5}.noData[_ngcontent-%COMP%]{text-align:center}.removeAllDatas[_ngcontent-%COMP%]{float:right;font-size:14px;opacity:1;cursor:pointer;margin-right:10px}.listFilter[_ngcontent-%COMP%]{font-size:10px;margin-bottom:-20px}.exportList[_ngcontent-%COMP%]{display:flex}.exportList[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{float:left;height:20px;font-size:10px;font-weight:700;opacity:.5}.exportList[_ngcontent-%COMP%]   .cdk-list[_ngcontent-%COMP%]{height:100%}.cdk-list[_ngcontent-%COMP%]{max-width:100%;border:1px solid #ccc;display:block;border-radius:4px;max-height:310px;min-height:310px;overflow:auto}.cdk-list[_ngcontent-%COMP%], .columns[_ngcontent-%COMP%]{width:100%;background:#fff}.columns[_ngcontent-%COMP%]{height:50px;padding:20px 10px;border-bottom:1px solid #ccc;color:rgba(0,0,0,.87);display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;font-size:14px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.columns[_ngcontent-%COMP%]:last-child{border:none}.cdk-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .columns[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.actions[_ngcontent-%COMP%], .loader[_ngcontent-%COMP%]{justify-content:center}.loader[_ngcontent-%COMP%]{position:absolute;display:flex;width:100%;left:0;top:0;height:100%;background:hsla(0,0%,100%,.6);z-index:1;align-items:center}"]}),Rv),zv=n("NpuA"),$v=((Qv=function(){function t(){_classCallCheck(this,t),this._papa=zv}return _createClass(t,[{key:"parse",value:function(t,e){return this._papa.parse(t,e)}},{key:"unparse",value:function(t,e){return this._papa.unparse(t,e)}},{key:"setLocalChunkSize",value:function(t){this._papa.LocalChunkSize=t}},{key:"setRemoteChunkSize",value:function(t){this._papa.RemoteChunkSize=t}},{key:"setDefaultDelimiter",value:function(t){this._papa.DefaultDelimiter=t}},{key:"badDelimiters",get:function(){return this._papa.BAD_DELIMITERS}},{key:"recordSeparator",get:function(){return this._papa.RECORD_SEP}},{key:"unitSeparator",get:function(){return this._papa.UNIT_SEP}},{key:"workersSupported",get:function(){return this._papa.WORKERS_SUPPORTED}}]),t}()).\u0275fac=function(t){return new(t||Qv)},Qv.\u0275prov=Object(u.Pb)({factory:function(){return new Qv},token:Qv,providedIn:"root"}),Qv);function Vv(t,e){1&t&&(u.Xb(0),u.Zb(1,"div",18),u.Ub(2,"mat-spinner"),u.Yb(),u.Wb())}function Nv(t,e){if(1&t&&(u.Zb(0,"mat-option",34),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n),u.Eb(1),u.Uc(" ","\t"===n?"TAB":n," ")}}function Jv(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",30),u.hc("click",(function(){return u.Hc(n),u.lc(),u.Dc(1).click()}))("onFileDropped",(function(t){return u.Hc(n),u.lc(2).dndUploadFile(t)})),u.Zb(1,"div"),u.Sc(2),u.mc(3,"translate"),u.Zb(4,"mat-form-field",31),u.hc("click",(function(t){return u.Hc(n),t.stopPropagation()})),u.Zb(5,"mat-label"),u.Sc(6),u.mc(7,"translate"),u.Yb(),u.Zb(8,"mat-select",32),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc(2).currentDelimiter=t}))("click",(function(t){return u.Hc(n),t.stopPropagation()})),u.Qc(9,Nv,2,2,"mat-option",33),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc(2);u.Eb(2),u.Uc(" ",u.nc(3,4,"lang.dndFileCsvDesc")," "),u.Eb(4),u.Tc(u.nc(7,6,"lang.delimiter")),u.Eb(2),u.sc("ngModel",a.currentDelimiter),u.Eb(1),u.sc("ngForOf",a.delimiters)}}function Gv(t,e){if(1&t&&(u.Zb(0,"mat-option",34),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n),u.Eb(1),u.Uc(" ",n," ")}}function Bv(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-header-cell",43),u.Ub(1,"i",44),u.mc(2,"translate"),u.Sc(3,"\xa0"),u.Zb(4,"b",45),u.mc(5,"translate"),u.Sc(6),u.Yb(),u.Sc(7," \xa0"),u.Ub(8,"i",46),u.Sc(9,"\xa0 "),u.Ub(10,"i",47),u.mc(11,"translate"),u.Sc(12,"\xa0 "),u.Zb(13,"mat-form-field",48),u.hc("click",(function(t){return u.Hc(n),t.stopPropagation()})),u.mc(14,"translate"),u.Zb(15,"mat-select",49),u.hc("ngModelChange",(function(t){u.Hc(n);var e=u.lc().$implicit;return u.lc(3).associatedColmuns[e.id]=t}))("selectionChange",(function(t){u.Hc(n);var e=u.lc().$implicit;return u.lc(3).changeColumn(e,t.value)})),u.Ub(16,"mat-option",50),u.Qc(17,Gv,2,2,"mat-option",33),u.Yb(),u.Yb(),u.Zb(18,"mat-checkbox",51),u.hc("change",(function(t){u.Hc(n);var e=u.lc().$implicit;return u.lc(3).toggleEmptyMode(e.id,t.checked)})),u.mc(19,"translate"),u.Yb(),u.Yb()}if(2&t){var a=u.lc().$implicit,i=u.lc(3);u.Eb(1),u.sc("title",u.nc(2,8,"lang.dbColumn")),u.Eb(3),u.sc("title",u.nc(5,10,"lang.dbColumn")),u.Eb(2),u.Tc(a.label),u.Eb(4),u.sc("title",u.nc(11,12,"lang.csvColumn")),u.Eb(3),u.sc("title",u.nc(14,14,"lang.csvColumn")),u.Eb(2),u.sc("ngModel",i.associatedColmuns[a.id]),u.Eb(2),u.sc("ngForOf",i.csvColumns),u.Eb(1),u.sc("title",u.nc(19,16,"lang.toggleEmptyValues"))}}function Wv(t,e){1&t&&(u.Xb(0),u.Zb(1,"i",52),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Wb()),2&t&&(u.Eb(2),u.Tc(u.nc(3,1,"lang.emptyValue")))}function qv(t,e){if(1&t&&u.Sc(0),2&t){var n=u.lc().$implicit,a=u.lc().$implicit;u.Uc(" ",n[a.id]," ")}}function Xv(t,e){if(1&t&&(u.Zb(0,"mat-cell",43),u.Qc(1,Wv,4,3,"ng-container",12),u.Qc(2,qv,1,1,"ng-template",null,13,u.Rc),u.Yb()),2&t){var n=e.$implicit,a=u.Dc(3),i=u.lc().$implicit,r=u.lc(3);u.Eb(1),u.sc("ngIf",i.emptyValueMode&&r.functionsService.empty(n[i.id]))("ngIfElse",a)}}function Kv(t,e){if(1&t&&(u.Xb(0),u.Xb(1,40),u.Qc(2,Bv,20,18,"mat-header-cell",41),u.Qc(3,Xv,4,2,"mat-cell",42),u.Wb(),u.Wb()),2&t){var n=e.$implicit;u.Eb(1),u.sc("matColumnDef",n.id)}}function ty(t,e){1&t&&u.Ub(0,"mat-header-row")}function ey(t,e){1&t&&u.Ub(0,"mat-row")}function ny(t,e){if(1&t&&(u.Zb(0,"mat-table",35,36),u.Qc(2,Kv,4,1,"ng-container",37),u.Qc(3,ty,1,0,"mat-header-row",38),u.Qc(4,ey,1,0,"mat-row",39),u.Yb()),2&t){var n=u.lc(2);u.Pc("width",300*n.contactColumns.length,"px"),u.sc("dataSource",n.dataSource),u.Eb(2),u.sc("ngForOf",n.contactColumns),u.Eb(1),u.sc("matHeaderRowDef",n.getcontactColumnsIds()),u.Eb(1),u.sc("matRowDefColumns",n.getcontactColumnsIds())}}function ay(t,e){if(1&t){var n=u.ac();u.Zb(0,"input",19,20),u.hc("change",(function(t){return u.Hc(n),u.lc().uploadCsv(t)})),u.Yb(),u.Qc(2,Jv,10,8,"div",21),u.Zb(3,"div",22),u.Zb(4,"div",23),u.Ub(5,"mat-paginator",24,25),u.Yb(),u.Yb(),u.Zb(7,"div",26),u.Zb(8,"div",27),u.Qc(9,ny,5,6,"mat-table",28),u.Yb(),u.Yb(),u.Ub(10,"div",29),u.mc(11,"translate"),u.Ub(12,"div",29),u.mc(13,"translate")}if(2&t){var a=u.lc();u.Eb(2),u.sc("ngIf",0===a.csvData.length),u.Eb(3),u.sc("length",100)("hidePageSize",!0)("pageSize",10),u.Eb(4),u.sc("ngIf",a.csvData.length>0),u.Eb(1),u.sc("innerHTML",u.nc(11,7,"lang.infoImportcontacts"),u.Ic),u.Eb(2),u.sc("innerHTML",u.nc(13,9,"lang.infoImportcontacts2"),u.Ic)}}function iy(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",53),u.hc("click",(function(){return u.Hc(n),u.lc().onSubmit()})),u.Sc(1),u.mc(2,"translate"),u.Yb()}if(2&t){var a=u.lc();u.sc("disabled",a.loading),u.Eb(1),u.Tc(u.nc(2,2,"lang.validate"))}}var ry,cy=((ry=function(){function t(e,n,a,i,r,c,o,s,l,d){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.functionsService=i,this.localStorage=r,this.headerService=c,this.dialog=o,this.dialogRef=s,this.papa=l,this.data=d,this.loading=!1,this.contactColumns=[{id:"id",label:this.translate.instant("lang.id"),emptyValueMode:!1},{id:"company",label:this.translate.instant("lang.contactsParameters_company"),emptyValueMode:!1},{id:"civility",label:this.translate.instant("lang.contactsParameters_civility"),emptyValueMode:!1},{id:"firstname",label:this.translate.instant("lang.contactsParameters_firstname"),emptyValueMode:!1},{id:"lastname",label:this.translate.instant("lang.contactsParameters_lastname"),emptyValueMode:!1},{id:"function",label:this.translate.instant("lang.contactsParameters_function"),emptyValueMode:!1},{id:"department",label:this.translate.instant("lang.contactsParameters_department"),emptyValueMode:!1},{id:"email",label:this.translate.instant("lang.contactsParameters_email"),emptyValueMode:!1},{id:"phone",label:this.translate.instant("lang.contactsParameters_phone"),emptyValueMode:!1},{id:"addressAdditional1",label:this.translate.instant("lang.contactsParameters_addressAdditional1"),emptyValueMode:!1},{id:"addressNumber",label:this.translate.instant("lang.contactsParameters_addressNumber"),emptyValueMode:!1},{id:"addressStreet",label:this.translate.instant("lang.contactsParameters_addressStreet"),emptyValueMode:!1},{id:"addressAdditional2",label:this.translate.instant("lang.contactsParameters_addressAdditional2"),emptyValueMode:!1},{id:"addressPostcode",label:this.translate.instant("lang.contactsParameters_addressPostcode"),emptyValueMode:!1},{id:"addressTown",label:this.translate.instant("lang.contactsParameters_addressTown"),emptyValueMode:!1},{id:"addressCountry",label:this.translate.instant("lang.contactsParameters_addressCountry"),emptyValueMode:!1}],this.csvColumns=[],this.delimiters=[";",",","\t"],this.currentDelimiter=";",this.associatedColmuns={},this.dataSource=new B.o(null),this.hasHeader=!0,this.csvData=[],this.contactData=[],this.countAll=0,this.countAdd=0,this.countUp=0}return _createClass(t,[{key:"ngOnInit",value:function(){this.setConfiguration(),this.initCustomFields()}},{key:"getcontactColumnsIds",value:function(){return this.contactColumns.map((function(t){return t.id}))}},{key:"initCustomFields",value:function(){var t=this;this.http.get("../rest/contactsCustomFields").pipe(Object(l.a)((function(t){return t.customFields.map((function(t){return{id:"contactCustomField_"+t.id,label:t.label,type:t.type}}))})),Object(d.a)((function(e){t.contactColumns=t.contactColumns.concat(e)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"toggleEmptyMode",value:function(t,e){this.contactColumns.filter((function(e){return e.id===t}))[0].emptyValueMode=e}},{key:"changeColumn",value:function(t,e){var n=this;this.contactData=[];for(var a=function(a){var i=n.csvData[a],r={};n.contactColumns.forEach((function(a){r[a.id]=t===a.id?i[n.csvColumns.filter((function(t){return t===e}))[0]]:i[n.associatedColmuns[a.id]]})),n.contactData.push(r)},i=this.hasHeader?1:0;i<this.csvData.length;i++)a(i);this.countAdd=this.csvData.filter((function(t,e){return e>0&&n.functionsService.empty(t[n.associatedColmuns.id])})).length,this.countUp=this.csvData.filter((function(t,e){return e>0&&!n.functionsService.empty(t[n.associatedColmuns.id])})).length,setTimeout((function(){n.dataSource=new B.o(n.contactData),n.dataSource.paginator=n.paginator}),0)}},{key:"uploadCsv",value:function(t){var e=this;if(t.target.files&&t.target.files[0]&&("text/csv"===t.target.files[0].type||"application/vnd.ms-excel"===t.target.files[0].type)){this.loading=!0;var n=[],a=new FileReader;a.readAsText(t.target.files[0]),a.onload=function(t){e.papa.parse(t.target.result,{complete:function(t){n=(n=t.data).filter((function(t){return t.length===n[0].length}));var a={};e.setCsvColumns(n[0]),e.countAll=e.hasHeader?n.length-1:n.length;for(var i=0;i<n.length;i++)a={},n[i].forEach((function(t,n){a[e.csvColumns[n]]=t})),e.csvData.push(a);e.initData(),e.countAdd=e.csvData.filter((function(t,n){return n>0&&e.functionsService.empty(t[e.associatedColmuns.id])})).length,e.countUp=e.csvData.filter((function(t,n){return n>0&&!e.functionsService.empty(t[e.associatedColmuns.id])})).length,e.localStorage.save("importContactFields_"+e.headerService.user.id,e.currentDelimiter),e.loading=!1}})}}else this.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.notAllowedExtension")+" !",msg:this.translate.instant("lang.file")+" : <b>"+t.target.files[0].name+"</b>, "+this.translate.instant("lang.type")+" : <b>"+t.target.files[0].type+"</b><br/><br/><u>"+this.translate.instant("lang.allowedExtensions")+"</u> : <br/>text/csv"}})}},{key:"setCsvColumns",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.csvColumns=e.filter((function(e){return t.functionsService.empty(e)})).length>0?Object.keys(e).map((function(t,e){return""+e})):e}},{key:"toggleHeader",value:function(){var t=this;this.hasHeader=!this.hasHeader,this.countAll=this.hasHeader?this.csvData.length-1:this.csvData.length,this.hasHeader?(this.countAdd=this.csvData.filter((function(e,n){return n>0&&t.functionsService.empty(e[t.associatedColmuns.id])})).length,this.countUp=this.csvData.filter((function(e,n){return n>0&&!t.functionsService.empty(e[t.associatedColmuns.id])})).length):(this.countAdd=this.csvData.filter((function(e,n){return t.functionsService.empty(e[t.associatedColmuns.id])})).length,this.countUp=this.csvData.filter((function(e,n){return!t.functionsService.empty(e[t.associatedColmuns.id])})).length),this.initData()}},{key:"initData",value:function(){var t=this;this.contactData=[];for(var e=function(e){var n=t.csvData[e],a={};t.contactColumns.forEach((function(e,i){var r=t.csvColumns.indexOf(e.label);t.associatedColmuns[e.id]=r>-1?t.csvColumns[r]:"",a[e.id]=r>-1?n[t.csvColumns[r]]:""})),t.contactData.push(a)},n=this.hasHeader?1:0;n<this.csvData.length;n++)e(n);setTimeout((function(){t.dataSource=new B.o(t.contactData),t.dataSource.paginator=t.paginator}),0)}},{key:"dndUploadFile",value:function(t){this.uploadCsv({target:{files:[t[0]]}})}},{key:"onSubmit",value:function(){var t=this,e=[],n="";this.translate.get("lang.confirmImportContacts",{0:this.countAll}).subscribe((function(e){n=e+" ?<br/><br/>",n+="<ul><li><b>".concat(t.countAdd,"</b> ").concat(t.translate.instant("lang.additions"),"</li><li><b>").concat(t.countUp,"</b> ").concat(t.translate.instant("lang.modifications"),"</li></ul>")}));var a=this.dialog.open(W.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.import"),msg:n}});a.afterClosed().pipe(Object(q.a)((function(t){return"ok"===t})),Object(d.a)((function(){t.loading=!0,t.csvData.forEach((function(n,a){if(t.hasHeader&&a>0||!t.hasHeader){var i={};t.contactColumns.forEach((function(e){i[e.id]=(!e.emptyValueMode||void 0!==n[t.associatedColmuns[e.id]]&&!t.functionsService.empty(n[t.associatedColmuns[e.id]]))&&(void 0===n[t.associatedColmuns[e.id]]?"":"checkbox"===e.type?t.functionsService.empty(n[t.associatedColmuns[e.id]])?[]:n[t.associatedColmuns[e.id]].split("\n"):n[t.associatedColmuns[e.id]])})),e.push(i)}}))})),Object(X.a)((function(){return t.http.put("../rest/contacts/import",{contacts:e})})),Object(d.a)((function(e){var n="";e.errors.count>0&&(n+="<br/>".concat(e.errors.count," ").concat(t.translate.instant("lang.withErrors"),"  : <ul>"),e.errors.details.forEach((function(e){n+="<li> ".concat(t.translate.instant("lang."+e.lang,{0:e.langParam})," (").concat(t.translate.instant("lang.line")," : ").concat(t.hasHeader?e.index+2:e.index+1,")</li>")})),n+="</ul>"),a=t.dialog.open(K.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:t.translate.instant("lang.import"),msg:"<b>"+e.success+"</b> / <b>"+t.countAll+"</b> "+t.translate.instant("lang.importedContacts")+"."+n}})})),Object(X.a)((function(){return a.afterClosed()})),Object(d.a)((function(){t.dialogRef.close("success")})),Object(b.a)((function(e){return t.loading=!1,t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"setConfiguration",value:function(){null!==this.localStorage.get("importContactFields_"+this.headerService.user.id)&&(this.currentDelimiter=this.localStorage.get("importContactFields_"+this.headerService.user.id))}}]),t}()).\u0275fac=function(t){return new(t||ry)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(C.a),u.Tb(tt.a),u.Tb(p.a),u.Tb(z.b),u.Tb(z.h),u.Tb($v),u.Tb(z.a))},ry.\u0275cmp=u.Nb({type:ry,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&u.ad(V.a,!0),2&t&&u.Cc(n=u.ic())&&(e.paginator=n.first)},decls:37,vars:28,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"import-tool"],[2,"flex","1"],["color","primary",3,"checked","change"],[2,"flex","1","text-align","center"],["color","primary",1,"fa","fa-users"],["color","primary"],["color","primary",1,"fa","fa-user-plus"],[2,"flex","1","text-align","right"],["color","primary",1,"fa","fa-user-edit"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"divider-modal"],["mat-dialog-actions","",1,"actions"],["mat-raised-button","","mat-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-raised-button","","mat-button","",3,"disabled","mat-dialog-close"],[1,"loader"],["type","file","name","files[]","id","uploadFile","accept",".csv",2,"display","none",3,"change"],["uploadFile",""],["appUploadFileDragDrop","","class","dndFile",3,"click","onFileDropped",4,"ngIf"],[1,"row",2,"margin","0px"],[1,"col-md-12"],[3,"length","hidePageSize","pageSize"],["paginator",""],[2,"width","100%","box-shadow","inset 0px 0px 5px 0px rgba(0,0,0,0.75)","padding","10px"],[2,"overflow","auto"],[3,"dataSource","width",4,"ngIf"],[1,"alert-message","alert-message-info",2,"min-width","100%",3,"innerHTML"],["appUploadFileDragDrop","",1,"dndFile",3,"click","onFileDropped"],["appearance","outline",2,"font-size","14px",3,"click"],[3,"ngModel","ngModelChange","click"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"dataSource"],["table",""],[4,"ngFor","ngForOf"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["style","padding-left: 5px;padding-right: 5px;",4,"matHeaderCellDef"],["style","padding-left: 5px;padding-right: 5px;",4,"matCellDef"],[2,"padding-left","5px","padding-right","5px"],["color","primary",1,"fas","fa-database",3,"title"],["color","primary",3,"title"],[1,"fas","fa-arrows-alt-h"],[1,"fas","fa-file-csv",3,"title"],[2,"width","80px !important",3,"title","click"],[3,"ngModel","ngModelChange","selectionChange"],["value",""],["color","primary",3,"title","change"],[2,"opacity","0.5"],["mat-raised-button","","mat-button","","color","primary",3,"disabled","click"]],template:function(t,e){if(1&t&&(u.Zb(0,"div",0),u.Zb(1,"h1",1),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"div",2),u.Zb(5,"mat-toolbar",3),u.Zb(6,"span",4),u.Zb(7,"mat-slide-toggle",5),u.hc("change",(function(){return e.toggleHeader()})),u.Sc(8),u.mc(9,"translate"),u.Yb(),u.Yb(),u.Zb(10,"span",6),u.Ub(11,"i",7),u.Sc(12),u.mc(13,"translate"),u.Zb(14,"b",8),u.Sc(15),u.Yb(),u.Yb(),u.Zb(16,"span",6),u.Ub(17,"i",9),u.Sc(18),u.mc(19,"translate"),u.Zb(20,"b",8),u.Sc(21),u.Yb(),u.Yb(),u.Zb(22,"span",10),u.Ub(23,"i",11),u.Sc(24),u.mc(25,"translate"),u.Zb(26,"b",8),u.Sc(27),u.Yb(),u.Yb(),u.Yb(),u.Qc(28,Vv,3,0,"ng-container",12),u.Qc(29,ay,14,11,"ng-template",null,13,u.Rc),u.Yb(),u.Ub(31,"span",14),u.Zb(32,"div",15),u.Qc(33,iy,3,4,"button",16),u.Zb(34,"button",17),u.Sc(35),u.mc(36,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t){var n=u.Dc(30);u.Eb(2),u.Tc(u.nc(3,16,"lang.importContacts")),u.Eb(3),u.Jb("hide",0===e.csvData.length||e.loading),u.Eb(2),u.sc("checked",e.hasHeader),u.Eb(1),u.Uc(" ",u.nc(9,18,"lang.csvHeader")," "),u.Eb(4),u.Uc("\xa0",u.nc(13,20,"lang.contactsOfFile")," : "),u.Eb(3),u.Tc(e.countAll),u.Eb(3),u.Uc("\xa0",u.nc(19,22,"lang.additions")," : "),u.Eb(3),u.Tc(e.countAdd),u.Eb(3),u.Uc("\xa0",u.nc(25,24,"lang.modifications")," : "),u.Eb(3),u.Tc(e.countUp),u.Eb(1),u.sc("ngIf",e.loading)("ngIfElse",n),u.Eb(5),u.sc("ngIf",e.csvData.length>0),u.Eb(1),u.sc("disabled",e.loading),u.Eb(1),u.Tc(u.nc(36,26,"lang.cancel"))}},directives:[z.i,z.f,et.a,nt.a,Z.t,z.c,D.b,z.d,O.c,V.a,at.a,k.c,k.g,it.a,o.t,o.w,Z.s,I.o,B.n,B.k,B.m,B.c,B.i,B.b,B.h,He.a,B.a,B.j,B.l],pipes:[m.d],styles:[".loader[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center;justify-content:center}.hide[_ngcontent-%COMP%]{display:none}.import-tool[_ngcontent-%COMP%]{font-size:14px}.dndFile[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;margin:0;justify-content:center;font-size:30px;opacity:.5!important;cursor:pointer}"]}),ry),oy=["snav2"],sy=["adminMenuTemplate"],ly=["tableContactListSort"];function dy(t,e){if(1&t&&(u.Zb(0,"a",47),u.Ub(1,"mat-icon",48),u.Zb(2,"p",42),u.Sc(3),u.Yb(),u.Yb()),2&t){var n=e.$implicit;u.Jb("active",n.current),u.sc("routerLink",n.route),u.Eb(1),u.Gb(n.icon),u.Eb(2),u.Uc(" ",n.label," ")}}function by(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-nav-list"),u.Zb(1,"h3",39),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"a",40),u.Ub(5,"mat-icon",41),u.Zb(6,"p",42),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Yb(),u.Zb(9,"a",43),u.hc("click",(function(){return u.Hc(n),u.lc().openContactExport()})),u.Ub(10,"mat-icon",44),u.Zb(11,"p",42),u.Sc(12),u.mc(13,"translate"),u.Yb(),u.Yb(),u.Zb(14,"a",43),u.hc("click",(function(){return u.Hc(n),u.lc().openContactImportModal()})),u.Ub(15,"mat-icon",45),u.Zb(16,"p",42),u.Sc(17),u.mc(18,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Ub(19,"mat-divider"),u.Zb(20,"mat-nav-list"),u.Qc(21,dy,4,6,"a",46),u.Yb()}if(2&t){var a=u.lc();u.Eb(2),u.Tc(u.nc(3,5,"lang.actions")),u.Eb(5),u.Uc(" ",u.nc(8,7,"lang.add")," "),u.Eb(5),u.Uc(" ",u.nc(13,9,"lang.exportContacts")," "),u.Eb(5),u.Uc(" ",u.nc(18,11,"lang.importContacts")," "),u.Eb(4),u.sc("ngForOf",a.subMenus)}}function uy(t,e){1&t&&u.Ub(0,"mat-spinner")}function my(t,e){if(1&t&&(u.Zb(0,"div",49),u.Qc(1,uy,1,0,"mat-spinner",50),u.Yb()),2&t){var n=u.lc();u.Eb(1),u.sc("ngIf",n.isLoadingResults)}}function fy(t,e){if(1&t&&u.Ub(0,"mat-header-cell",51),2&t){var n=u.lc();u.Jb("hide-for-mobile",n.appService.getViewMode())}}function py(t,e){if(1&t&&(u.Zb(0,"mat-cell",52),u.Ub(1,"i",53),u.Yb()),2&t){var n=e.$implicit,a=u.lc();u.Jb("hide-for-mobile",a.appService.getViewMode()),u.Eb(1),u.Hb("fas fa-circle threshold_",n.filling.thresholdLevel,""),u.sc("title",a.translate.instant("lang.contactFilledTo")+" "+n.filling.rate+"%")}}function gy(t,e){1&t&&(u.Zb(0,"mat-header-cell",54),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.firstname")))}function hy(t,e){if(1&t&&(u.Zb(0,"mat-cell",55),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.firstname," ")}}function vy(t,e){1&t&&(u.Zb(0,"mat-header-cell",54),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.lastname")))}function yy(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.lastname," ")}}function Cy(t,e){1&t&&(u.Zb(0,"mat-header-cell",54),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc("",u.nc(2,1,"lang.contactsParameters_company")," "))}function Ey(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.company," ")}}function Sy(t,e){if(1&t&&(u.Zb(0,"mat-header-cell",56),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=u.lc();u.Jb("hide-for-mobile",n.appService.getViewMode()),u.Eb(1),u.Uc(" ",u.nc(2,3,"lang.address"),"")}}function My(t,e){if(1&t&&(u.Zb(0,"mat-cell",56),u.Sc(1),u.Yb()),2&t){var n=e.$implicit,a=u.lc();u.Jb("hide-for-mobile",a.appService.getViewMode()),u.Eb(1),u.Uc(" ",n.formatedAddress," ")}}function xy(t,e){1&t&&u.Ub(0,"mat-header-cell")}function Yy(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",62),u.hc("click",(function(t){u.Hc(n);var e=u.lc().$implicit,a=u.lc();return t.stopPropagation(),a.toggleContact(e)})),u.Ub(1,"mat-icon",63),u.Yb()}if(2&t){var a=u.lc(2);u.sc("title",a.translate.instant("lang.suspend"))}}function Zy(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",64),u.hc("click",(function(t){u.Hc(n);var e=u.lc().$implicit,a=u.lc();return t.stopPropagation(),a.toggleContact(e)})),u.Ub(1,"mat-icon",65),u.Yb()}if(2&t){var a=u.lc(2);u.sc("title",a.translate.instant("lang.authorize"))}}function _y(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-cell",57),u.Qc(1,Yy,2,1,"button",58),u.Qc(2,Zy,2,1,"button",59),u.Zb(3,"button",60),u.hc("click",(function(t){u.Hc(n);var a=e.$implicit,i=u.lc();return t.stopPropagation(),i.deleteContact(a)})),u.Ub(4,"mat-icon",61),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit,i=u.lc();u.Eb(1),u.sc("ngIf",a.enabled),u.Eb(1),u.sc("ngIf",!a.enabled),u.Eb(1),u.sc("title",i.translate.instant("lang.delete"))}}function ky(t,e){1&t&&u.Ub(0,"mat-header-row")}function wy(t,e){1&t&&u.Ub(0,"mat-row",66),2&t&&u.uc("routerLink","/administration/contacts/list/",e.$implicit.id,"")}var Oy=function(){return["/rest/autocomplete/contacts"]};function Ty(t,e){if(1&t){var n=u.ac();u.Zb(0,"plugin-autocomplete",14),u.hc("triggerEvent",(function(t){return u.Hc(n),u.lc().setRedirectUser(t)})),u.Yb()}if(2&t){var a=u.lc();u.sc("labelPlaceholder",a.translate.instant("lang.contactReplacement"))("labelList",a.translate.instant("lang.availableContacts"))("routeDatas",u.yc(4,Oy))("targetSearchKey","contact")}}function Iy(t,e){1&t&&(u.Zb(0,"span"),u.Zb(1,"em"),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Yb()),2&t&&(u.Eb(2),u.Tc(u.nc(3,1,"lang.deleteContactInformations")))}function Dy(t,e){1&t&&(u.Zb(0,"span"),u.Zb(1,"em"),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Yb()),2&t&&(u.Eb(2),u.Tc(u.nc(3,1,"lang.reaffectContactInformations")))}function Uy(t,e){if(1&t&&(u.Zb(0,"div",15),u.Qc(1,Iy,4,3,"span",16),u.Qc(2,Dy,4,3,"span",16),u.Yb()),2&t){var n=u.lc();u.Eb(1),u.sc("ngIf","delete"==n.processMode),u.Eb(1),u.sc("ngIf","reaffect"==n.processMode)}}var Py,Fy,Ly=((Py=function(){function t(e,n,a,i,r,c,s,l,d){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.headerService=i,this.appService=r,this.dialog=c,this.functions=s,this.adminService=l,this.viewContainerRef=d,this.loading=!1,this.filtersChange=new u.o,this.displayedColumnsContact=["filling","firstname","lastname","company","formatedAddress","actions"],this.isLoadingResults=!0,this.routeUrl="../rest/contacts",this.resultsLength=0,this.searchContact=new o.h,this.search="",this.destroy$=new qb.a,this.subMenus=[{icon:"fa fa-book",route:"/administration/contacts/list",label:this.translate.instant("lang.contactsList"),current:!0},{icon:"fa fa-code",route:"/administration/contacts/contactsCustomFields",label:this.translate.instant("lang.customFieldsAdmin"),current:!1},{icon:"fa fa-cog",route:"/administration/contacts/contacts-parameters",label:this.translate.instant("lang.contactsParameters"),current:!1},{icon:"fa fa-users",route:"/administration/contacts/contacts-groups",label:this.translate.instant("lang.contactsGroups"),current:!1},{icon:"fas fa-magic",route:"/administration/contacts/duplicates",label:this.translate.instant("lang.duplicatesContactsAdmin"),current:!1}]}return _createClass(t,[{key:"ngOnInit",value:function(){this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.adminService.setAdminId("admin_contacts_list"),this.functions.empty(this.adminService.getFilter())&&this.adminService.saveDefaultFilter(),this.initContactList(),this.initAutocompleteContacts()}},{key:"initContactList",value:function(){var t=this;this.resultListDatabase=new jy(this.http),this.paginator.pageIndex=this.adminService.getFilter("page"),this.sort.active=this.adminService.getFilter("sort"),this.sort.direction=this.adminService.getFilter("sortDirection"),this.sort.sortChange.subscribe((function(){return t.paginator.pageIndex=0})),Object(Xb.a)(this.sort.sortChange,this.paginator.page,this.filtersChange).pipe(Object(Kb.a)(this.destroy$),Object(s.a)({}),Object(tu.a)((function(){return t.adminService.saveFilter({sort:t.sort.active,sortDirection:t.sort.direction,page:t.paginator.pageIndex,field:t.adminService.getFilter("field")}),t.search=t.adminService.getFilter("field"),t.isLoadingResults=!0,t.resultListDatabase.getRepoIssues(t.sort.active,t.sort.direction,t.paginator.pageIndex,t.routeUrl,t.search)})),Object(l.a)((function(e){return t.isLoadingResults=!1,e=t.processPostData(e),t.resultsLength=e.count,t.headerService.setHeader(t.translate.instant("lang.administration")+" "+t.translate.instant("lang.contacts").toLowerCase(),"",""),e.contacts})),Object(b.a)((function(e){return t.notify.handleErrors(e),t.isLoadingResults=!1,Object(c.a)([])}))).subscribe((function(e){return t.data=e}))}},{key:"processPostData",value:function(t){var e=this;return t.contacts.forEach((function(t){var n=[];n.push(t.addressNumber),n.push(t.addressStreet),n.push(t.addressPostcode),n.push(t.addressTown),n.push(t.addressCountry),t.formatedAddress=n.filter((function(t){return!e.isEmptyValue(t)})).join(" ")})),this.displayedColumnsContact=this.functions.empty(t.contacts[0])||this.functions.empty(t.contacts[0].filling)?["firstname","lastname","company","formatedAddress","actions"]:["filling","firstname","lastname","company","formatedAddress","actions"],t}},{key:"deleteContact",value:function(t){var e=this;t.isUsed?(this.dialogRef=this.dialog.open(Ry,{panelClass:"maarch-modal",autoFocus:!1}),this.dialogRef.afterClosed().subscribe((function(n){if(void 0!==n&&""!=n){var a="";"reaffect"==n.processMode&&(a="?redirect="+n.contactId),e.http.request("DELETE","../rest/contacts/".concat(t.id).concat(a)).subscribe((function(){e.refreshDao(),e.notify.success(e.translate.instant("lang.contactDeleted"))}),(function(t){e.notify.error(t.error.errors)}))}e.dialogRef=null}))):this.dialog.open(W.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete"),msg:this.translate.instant("lang.confirmAction")}}).afterClosed().pipe(Object(q.a)((function(t){return"ok"===t})),Object(X.a)((function(){return e.http.delete("../rest/contacts/"+t.id)})),Object(d.a)((function(t){e.refreshDao(),e.notify.success(e.translate.instant("lang.contactDeleted"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(c.a)(!1)}))).subscribe()}},{key:"toggleContact",value:function(t){var e=this;this.dialog.open(W.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.suspend"),msg:this.translate.instant("lang.confirmAction")}}).afterClosed().pipe(Object(q.a)((function(t){return"ok"===t})),Object(X.a)((function(){return e.http.put("../rest/contacts/".concat(t.id,"/activation"),{enabled:!t.enabled})})),Object(d.a)((function(n){e.refreshDao(),e.notify.success(e.translate.instant(1==!t.enabled?"lang.contactEnabled":"lang.contactDisabled"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(c.a)(!1)}))).subscribe()}},{key:"openContactExport",value:function(){this.dialog.open(Hv,{panelClass:"maarch-modal",width:"800px",autoFocus:!1})}},{key:"openContactImportModal",value:function(){var t=this;this.dialog.open(cy,{disableClose:!0,width:"99vw",maxWidth:"99vw",panelClass:"maarch-full-height-modal"}).afterClosed().pipe(Object(q.a)((function(t){return"success"===t})),Object(d.a)((function(){t.refreshDao()})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(c.a)(!1)}))).subscribe()}},{key:"refreshDao",value:function(){this.filtersChange.emit()}},{key:"initAutocompleteContacts",value:function(){var t=this;this.searchContact=new o.h(this.adminService.getFilter("field")),this.searchContact.valueChanges.pipe(Object(d.a)((function(e){t.adminService.setFilter("field",e),t.adminService.saveFilter(t.adminService.getFilter()),0===e.length&&(t.search="",t.paginator.pageIndex=0,t.refreshDao())})),Object(Ql.a)(300),Object(q.a)((function(t){return t.length>2})),Object(gm.a)(),Object(d.a)((function(e){t.search=e,t.paginator.pageIndex=0,t.refreshDao()}))).subscribe()}},{key:"isEmptyValue",value:function(t){return null===t||(Array.isArray(t)?!(t.length>0):""===String(t))}}]),t}()).\u0275fac=function(t){return new(t||Py)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a),u.Tb(z.b),u.Tb(C.a),u.Tb(It),u.Tb(u.R))},Py.\u0275cmp=u.Nb({type:Py,selectors:[["contact-list"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(oy,!0),u.Oc(sy,!0),u.Oc(V.a,!0),u.Oc(ly,!0)),2&t&&(u.Cc(n=u.ic())&&(e.sidenavRight=n.first),u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.paginator=n.first),u.Cc(n=u.ic())&&(e.sort=n.first))},decls:49,vars:19,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["class","example-loading-shade",4,"ngIf"],[1,"table-head"],[1,"table-head-result"],["floatLabel","never",2,"font-size","13px"],["type","text","matInput","","maxlength","128",3,"placeholder","formControl","click"],["autoCompleteInput",""],[1,"table-head-tool"],[1,"paginatorResultList",3,"length","hidePageSize","pageSize"],["paginatorContactList",""],[2,"height","90%","overflow","auto","position","absolute","width","100%"],["id","contact-list","matSort","","matSortDisableClear","",2,"width","100%",3,"dataSource"],["tableContactListSort","matSort"],["matColumnDef","filling"],["style","flex: initial;width: 60px;",3,"hide-for-mobile",4,"matHeaderCellDef"],["mat-cell","","style","flex: initial;width: 60px;",3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","firstname"],["mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","lastname"],[4,"matCellDef"],["matColumnDef","company"],["matColumnDef","formatedAddress"],["style","flex: 2;",3,"hide-for-mobile",4,"matHeaderCellDef"],["style","flex: 2;",3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor: pointer;",3,"routerLink",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/contacts/list/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],["mat-list-item","",3,"click"],["color","primary","mat-list-icon","",1,"fa","fa-file-export"],["color","primary","mat-list-icon","",1,"fas","fa-file-import"],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],[1,"example-loading-shade"],[4,"ngIf"],[2,"flex","initial","width","60px"],["mat-cell","",2,"flex","initial","width","60px"],[3,"title"],["mat-sort-header",""],["mat-cell",""],[2,"flex","2"],[2,"justify-content","flex-end"],["mat-icon-button","","color","primary",3,"title","click",4,"ngIf"],["mat-icon-button","","color","accent",3,"title","click",4,"ngIf"],["mat-icon-button","","color","warn","data-toggle","modal","data-target","#changeDiffListDest",3,"title","click"],[1,"fa","fa-trash-alt","fa-2x"],["mat-icon-button","","color","primary",3,"title","click"],["aria-hidden","true",1,"fa","fa-pause","fa-2x"],["mat-icon-button","","color","accent",3,"title","click"],["aria-hidden","true",1,"fa","fa-check","fa-2x"],[2,"cursor","pointer",3,"routerLink"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,by,22,13,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,my,2,1,"div",9),u.Zb(14,"div",10),u.Zb(15,"div",11),u.Zb(16,"mat-form-field",12),u.Zb(17,"input",13,14),u.hc("click",(function(t){return t.stopPropagation()})),u.Yb(),u.Yb(),u.Yb(),u.Zb(19,"div",15),u.Ub(20,"mat-paginator",16,17),u.Yb(),u.Yb(),u.Zb(22,"div",18),u.Zb(23,"mat-table",19,20),u.Xb(25,21),u.Qc(26,fy,1,2,"mat-header-cell",22),u.Qc(27,py,2,6,"mat-cell",23),u.Wb(),u.Xb(28,24),u.Qc(29,gy,3,3,"mat-header-cell",25),u.Qc(30,hy,2,1,"mat-cell",26),u.Wb(),u.Xb(31,27),u.Qc(32,vy,3,3,"mat-header-cell",25),u.Qc(33,yy,2,1,"mat-cell",28),u.Wb(),u.Xb(34,29),u.Qc(35,Cy,3,3,"mat-header-cell",25),u.Qc(36,Ey,2,1,"mat-cell",28),u.Wb(),u.Xb(37,30),u.Qc(38,Sy,3,5,"mat-header-cell",31),u.Qc(39,My,2,3,"mat-cell",32),u.Wb(),u.Xb(40,33),u.Qc(41,xy,1,0,"mat-header-cell",34),u.Qc(42,_y,5,3,"mat-cell",35),u.Wb(),u.Qc(43,ky,1,0,"mat-header-row",36),u.Qc(44,wy,1,1,"mat-row",37),u.Yb(),u.Zb(45,"div",38),u.Sc(46),u.mc(47,"translate"),u.Yb(),u.Yb(),u.Ub(48,"div",10),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.isLoadingResults),u.Eb(4),u.sc("placeholder",e.translate.instant("lang.filterBy"))("formControl",e.searchContact),u.Eb(3),u.sc("length",e.resultsLength)("hidePageSize",!0)("pageSize",10),u.Eb(3),u.sc("dataSource",e.data),u.Eb(20),u.sc("matHeaderRowDef",e.displayedColumnsContact),u.Eb(1),u.sc("matRowDefColumns",e.displayedColumnsContact),u.Eb(2),u.Vc(" ",e.resultsLength," ",u.nc(47,17,"lang.contactsAlt"),""))},directives:[S.e,S.f,M.a,Y.a,Z.t,k.c,w.b,o.c,o.o,o.t,o.i,V.a,B.n,N.a,B.c,B.i,B.b,B.k,B.m,Dt.h,Dt.g,Dt.d,r.f,Ut.a,Dt.c,I.k,_.a,Z.s,O.c,B.h,B.a,N.b,D.b,B.j,B.l,r.d],pipes:[m.d],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}.paginatorResultList[_ngcontent-%COMP%]    .mat-paginator-range-label{justify-content:flex-end;display:flex}.threshold_first[_ngcontent-%COMP%]{color:#e81c2b}.threshold_second[_ngcontent-%COMP%]{color:#f4891e}.threshold_third[_ngcontent-%COMP%]{color:#0aa34f}"]}),Py),jy=function(){function t(e){_classCallCheck(this,t),this.http=e}return _createClass(t,[{key:"getRepoIssues",value:function(t,e,n,a,i){return this.http.get("".concat(a,"?limit=10&offset=").concat(10*n,"&order=").concat(e,"&orderBy=").concat(t,"&search=").concat(i))}}]),t}(),Ry=((Fy=function(){function t(e,n,a,i,r){_classCallCheck(this,t),this.translate=e,this.http=n,this.data=a,this.dialogRef=i,this.notify=r,this.modalTitle=this.translate.instant("lang.confirmAction"),this.processMode="delete"}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"setRedirectUser",value:function(t){this.redirectContact=t.id}}]),t}()).\u0275fac=function(t){return new(t||Fy)(u.Tb(m.e),u.Tb(f.b),u.Tb(z.a),u.Tb(z.h),u.Tb(y.a))},Fy.\u0275cmp=u.Nb({type:Fy,selectors:[["ng-component"]],decls:29,vars:22,consts:[[1,"mat-dialog-content-container"],["mat-dialog-title",""],["redirectConfForm","ngForm"],[1,"modal-body"],["role","alert",1,"alert-message","alert-message-danger"],[1,"input-group"],["id","processMode","name","processMode","color","primary","required","",2,"display","inline-flex","flex-direction","column",3,"ngModel","ngModelChange"],["value","delete","color","primary"],["value","reaffect","color","primary"],["singleMode","","required","",3,"labelPlaceholder","labelList","routeDatas","targetSearchKey","triggerEvent",4,"ngIf"],["class","alert-message alert-message-info","role","alert",4,"ngIf"],[1,"divider-modal"],["mat-raised-button","","color","primary","type","submit",3,"disabled","click"],["color","","mat-raised-button","",1,"actions",3,"click"],["singleMode","","required","",3,"labelPlaceholder","labelList","routeDatas","targetSearchKey","triggerEvent"],["role","alert",1,"alert-message","alert-message-info"],[4,"ngIf"]],template:function(t,e){if(1&t&&(u.Zb(0,"div",0),u.Zb(1,"h1",1),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"mat-dialog-content"),u.Zb(5,"form",null,2),u.Zb(7,"div",3),u.Zb(8,"div",4),u.Sc(9),u.mc(10,"translate"),u.Yb(),u.Zb(11,"div",5),u.Zb(12,"mat-radio-group",6),u.hc("ngModelChange",(function(t){return e.processMode=t})),u.Zb(13,"mat-radio-button",7),u.Sc(14),u.mc(15,"translate"),u.Yb(),u.Zb(16,"mat-radio-button",8),u.Sc(17),u.mc(18,"translate"),u.Yb(),u.Yb(),u.Qc(19,Ty,1,5,"plugin-autocomplete",9),u.Qc(20,Uy,3,2,"div",10),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Ub(21,"span",11),u.Zb(22,"mat-dialog-actions"),u.Zb(23,"button",12),u.hc("click",(function(){return e.dialogRef.close({contactId:e.redirectContact,processMode:e.processMode})})),u.Sc(24),u.mc(25,"translate"),u.Yb(),u.Zb(26,"button",13),u.hc("click",(function(){return e.dialogRef.close("")})),u.Sc(27),u.mc(28,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t){var n=u.Dc(6);u.Eb(2),u.Tc(u.nc(3,10,"lang.contactsReassign")),u.Eb(7),u.Uc(" ",u.nc(10,12,"lang.contactLinkedToMails")," "),u.Eb(3),u.sc("ngModel",e.processMode),u.Eb(2),u.Uc(" ",u.nc(15,14,"lang.deleteContactwithtoutReassign")," "),u.Eb(3),u.Uc(" ",u.nc(18,16,"lang.reaffectContactRedirect")," "),u.Eb(2),u.sc("ngIf","reaffect"==e.processMode),u.Eb(1),u.sc("ngIf",e.processMode),u.Eb(3),u.sc("disabled",!n.form.valid||!e.redirectContact&&"reaffect"==e.processMode),u.Eb(1),u.Tc(u.nc(25,18,"lang.delete")),u.Eb(3),u.Tc(u.nc(28,20,"lang.cancel"))}},directives:[z.i,z.f,o.J,o.u,o.v,Je.b,o.E,o.t,o.w,Je.a,Z.t,z.c,D.b,Lt.a],pipes:[m.d],encapsulation:2}),Fy),Qy=["snav2"],Ay=["adminMenuTemplate"];function Hy(t,e){if(1&t&&(u.Zb(0,"a",16),u.Ub(1,"mat-icon",17),u.Zb(2,"p",18),u.Sc(3),u.Yb(),u.Yb()),2&t){var n=e.$implicit;u.Jb("active",n.current),u.sc("routerLink",n.route),u.Eb(1),u.Gb(n.icon),u.Eb(2),u.Uc(" ",n.label," ")}}function zy(t,e){if(1&t&&(u.Zb(0,"mat-nav-list"),u.Qc(1,Hy,4,6,"a",15),u.Yb()),2&t){var n=u.lc();u.Eb(1),u.sc("ngForOf",n.subMenus)}}function $y(t,e){if(1&t&&u.Ub(0,"div",19),2&t){var n=u.lc();u.sc("innerHTML",n.translate.instant("lang.noCustomFieldInfo"),u.Ic)}}function Vy(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",35),u.hc("click",(function(){u.Hc(n);var t=u.lc(2).$implicit;return u.lc().sortValues(t)})),u.Ub(1,"mat-icon",36),u.Yb()}if(2&t){var a=u.lc(3);u.sc("title",a.translate.instant("lang.orderValues"))}}function Ny(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-form-field",37),u.Zb(1,"input",38),u.hc("ngModelChange",(function(t){return u.Hc(n),e.$implicit.label=t})),u.Yb(),u.Zb(2,"button",39),u.hc("click",(function(){u.Hc(n);var t=e.index,a=u.lc(2).$implicit;return u.lc().removeValue(a,t)})),u.Ub(3,"mat-icon",40),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit,i=u.lc(3);u.Eb(1),u.sc("ngModel",a.label)("placeholder",i.translate.instant("lang.newValue")),u.Eb(1),u.sc("title",i.translate.instant("lang.delete"))}}function Jy(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",21),u.Zb(1,"mat-expansion-panel",28),u.Zb(2,"mat-expansion-panel-header"),u.Zb(3,"mat-panel-title",29),u.Sc(4),u.mc(5,"translate"),u.Yb(),u.Yb(),u.Zb(6,"div",30),u.Zb(7,"div",31),u.Zb(8,"button",32),u.hc("click",(function(){u.Hc(n);var t=u.lc().index;return u.lc().addValue(t)})),u.Sc(9),u.mc(10,"translate"),u.Yb(),u.Yb(),u.Zb(11,"div"),u.Qc(12,Vy,2,1,"button",33),u.Yb(),u.Yb(),u.Zb(13,"div",21),u.Qc(14,Ny,4,3,"mat-form-field",34),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc().$implicit;u.Eb(3),u.sc("matBadge",a.values.length),u.Eb(1),u.Uc(" ",u.nc(5,5,"lang.valuesList")," "),u.Eb(5),u.Uc(" ",u.nc(10,7,"lang.addValue"),""),u.Eb(3),u.sc("ngIf",a.values.length>0),u.Eb(2),u.sc("ngForOf",a.values)}}var Gy=function(){return["select","radio","checkbox"]};function By(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-expansion-panel"),u.Zb(1,"mat-expansion-panel-header"),u.Zb(2,"mat-panel-title",20),u.Sc(3),u.Yb(),u.Zb(4,"mat-panel-description"),u.Sc(5),u.mc(6,"translate"),u.Yb(),u.Yb(),u.Zb(7,"div",21),u.Zb(8,"mat-form-field"),u.Zb(9,"input",22),u.hc("ngModelChange",(function(t){return u.Hc(n),e.$implicit.id=t})),u.Yb(),u.Yb(),u.Zb(10,"mat-form-field"),u.Zb(11,"input",23),u.hc("ngModelChange",(function(t){return u.Hc(n),e.$implicit.label=t})),u.Yb(),u.Yb(),u.Yb(),u.Qc(12,Jy,15,9,"div",24),u.Zb(13,"div",25),u.Zb(14,"button",26),u.hc("click",(function(){u.Hc(n);var t=e.$implicit,a=e.index;return u.lc().updateCustomField(t,a)})),u.Sc(15),u.mc(16,"translate"),u.Yb(),u.Zb(17,"button",27),u.hc("click",(function(){u.Hc(n);var t=e.index;return u.lc().removeCustomField(t)})),u.Sc(18),u.mc(19,"translate"),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit,i=e.index,r=u.lc();u.Eb(3),u.Uc(" ",a.label," "),u.Eb(2),u.Uc(" ",u.nc(6,12,"lang."+a.type+"Input")," "),u.Eb(4),u.sc("ngModel",a.id)("placeholder",r.translate.instant("lang.technicalId"))("value",a.id),u.Eb(2),u.sc("ngModel",a.label)("placeholder",r.translate.instant("lang.label"))("value",a.label),u.Eb(1),u.sc("ngIf",u.yc(18,Gy).indexOf(a.type)>-1),u.Eb(2),u.sc("disabled",r.isModified(a,i)),u.Eb(1),u.Tc(u.nc(16,14,"lang.update")),u.Eb(3),u.Tc(u.nc(19,16,"lang.delete"))}}function Wy(t,e){if(1&t&&(u.Xb(0),u.Zb(1,"mat-form-field",47),u.Ub(2,"textarea",48),u.Yb(),u.Wb()),2&t){var n=u.lc().$implicit,a=u.lc();u.Eb(2),u.sc("placeholder",a.translate.instant("lang."+n.type+"Input"))}}function qy(t,e){if(1&t&&(u.Xb(0),u.Zb(1,"mat-form-field",47),u.Ub(2,"input",49),u.Yb(),u.Wb()),2&t){var n=u.lc().$implicit,a=u.lc();u.Eb(2),u.sc("placeholder",a.translate.instant("lang."+n.type+"Input"))}}function Xy(t,e){if(1&t&&(u.Zb(0,"mat-option",52),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n),u.Eb(1),u.Vc(" ",u.nc(2,3,"lang.choice")," ",n," ")}}function Ky(t,e){if(1&t&&(u.Xb(0),u.Zb(1,"mat-form-field",47),u.Zb(2,"mat-select",50),u.Qc(3,Xy,3,5,"mat-option",51),u.Yb(),u.Yb(),u.Wb()),2&t){var n=u.lc().$implicit,a=u.lc();u.Eb(2),u.sc("placeholder",a.translate.instant("lang."+n.type+"Input")),u.Eb(1),u.sc("ngForOf",a.sampleIncrement)}}function tC(t,e){if(1&t){var n=u.ac();u.Xb(0),u.Zb(1,"mat-form-field",47),u.Zb(2,"input",53),u.hc("click",(function(){return u.Hc(n),u.Dc(5).open()})),u.Yb(),u.Ub(3,"mat-datepicker-toggle",54),u.Ub(4,"mat-datepicker",null,55),u.Yb(),u.Wb()}if(2&t){var a=u.Dc(5),i=u.lc().$implicit,r=u.lc();u.Eb(2),u.sc("matDatepicker",a)("placeholder",r.translate.instant("lang."+i.type+"Input")),u.Eb(1),u.sc("for",a)}}function eC(t,e){if(1&t&&(u.Zb(0,"mat-radio-button",52),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n),u.Eb(1),u.Vc(" ",u.nc(2,3,"lang.choice")," ",n," ")}}function nC(t,e){if(1&t&&(u.Xb(0),u.Zb(1,"mat-radio-group",56),u.Qc(2,eC,3,5,"mat-radio-button",51),u.Yb(),u.Wb()),2&t){var n=u.lc(2);u.Eb(2),u.sc("ngForOf",n.sampleIncrement)}}function aC(t,e){if(1&t&&(u.Zb(0,"mat-list-option",62),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n),u.Eb(1),u.Vc(" ",u.nc(2,3,"lang.choice")," ",n," ")}}function iC(t,e){1&t&&(u.Zb(0,"mat-chip"),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc(" ",u.nc(2,1,"lang.selectedValue")," "))}function rC(t,e){if(1&t&&(u.Xb(0),u.Zb(1,"div",57),u.Zb(2,"mat-selection-list",58,59),u.Qc(4,aC,3,5,"mat-list-option",60),u.Yb(),u.Yb(),u.Zb(5,"mat-chip-list",61),u.Qc(6,iC,3,3,"mat-chip",11),u.Yb(),u.Wb()),2&t){var n=u.Dc(3),a=u.lc(2);u.Eb(4),u.sc("ngForOf",a.sampleIncrement),u.Eb(2),u.sc("ngForOf",n.selectedOptions.selected)}}function cC(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",41),u.Zb(1,"div",42),u.Zb(2,"button",43),u.hc("click",(function(){u.Hc(n);var t=e.$implicit;return u.lc().addCustomField(t)})),u.Ub(3,"mat-icon",44),u.Yb(),u.Yb(),u.Zb(4,"div",31),u.Zb(5,"div",45),u.Sc(6),u.Yb(),u.Qc(7,Wy,3,1,"ng-container",46),u.Qc(8,qy,3,1,"ng-container",46),u.Qc(9,Ky,4,2,"ng-container",46),u.Qc(10,tC,6,3,"ng-container",46),u.Qc(11,nC,3,1,"ng-container",46),u.Qc(12,rC,7,2,"ng-container",46),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit,i=u.lc();u.Eb(2),u.sc("title",i.translate.instant("lang.add")),u.Eb(4),u.Uc("",a.label," :"),u.Eb(1),u.sc("ngIf","string"===a.type),u.Eb(1),u.sc("ngIf","integer"===a.type),u.Eb(1),u.sc("ngIf","select"===a.type),u.Eb(1),u.sc("ngIf","date"===a.type),u.Eb(1),u.sc("ngIf","radio"===a.type),u.Eb(1),u.sc("ngIf","checkbox"===a.type)}}var oC,sC=((oC=function(){function t(e,n,a,i,r,c,o,s){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.dialog=i,this.headerService=r,this.appService=c,this.sortPipe=o,this.viewContainerRef=s,this.loading=!0,this.subMenus=[{icon:"fa fa-book",route:"/administration/contacts/list",label:this.translate.instant("lang.contactsList"),current:!1},{icon:"fa fa-code",route:"/administration/contacts/contactsCustomFields",label:this.translate.instant("lang.customFieldsAdmin"),current:!0},{icon:"fa fa-cog",route:"/administration/contacts/contacts-parameters",label:this.translate.instant("lang.contactsParameters"),current:!1},{icon:"fa fa-users",route:"/administration/contacts/contacts-groups",label:this.translate.instant("lang.contactsGroups"),current:!1},{icon:"fas fa-magic",route:"/administration/contacts/duplicates",label:this.translate.instant("lang.duplicatesContactsAdmin"),current:!1}],this.customFieldsTypes=[{label:this.translate.instant("lang.stringInput"),type:"string"},{label:this.translate.instant("lang.integerInput"),type:"integer"},{label:this.translate.instant("lang.selectInput"),type:"select"},{label:this.translate.instant("lang.dateInput"),type:"date"},{label:this.translate.instant("lang.radioInput"),type:"radio"},{label:this.translate.instant("lang.checkboxInput"),type:"checkbox"}],this.customFields=[],this.customFieldsClone=[],this.incrementCreation=1,this.sampleIncrement=[1,2,3,4]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.customFields")+" "+this.translate.instant("lang.contacts")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.http.get("../rest/contactsCustomFields").pipe(Object(l.a)((function(t){return t.customFields.forEach((function(t){t.values=t.values.map((function(t){return{label:t}}))})),t})),Object(d.a)((function(e){t.customFields=e.customFields,t.customFieldsClone=JSON.parse(JSON.stringify(t.customFields))})),Object(Ct.a)((function(){return t.loading=!1})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"addCustomField",value:function(t){var e=this,n={};this.dialogRef=this.dialog.open(W.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.add"),msg:this.translate.instant("lang.confirmAction")}}),this.dialogRef.afterClosed().pipe(Object(q.a)((function(t){return"ok"===t})),Object(d.a)((function(){n={label:e.translate.instant("lang.newField")+" "+e.incrementCreation,type:t.type,values:[]}})),Object(X.a)((function(t){return e.http.post("../rest/contactsCustomFields",n)})),Object(d.a)((function(t){n.id=t.id,e.customFields.push(n),e.notify.success(e.translate.instant("lang.customFieldAdded")),e.incrementCreation++})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe()}},{key:"addValue",value:function(t){this.customFields[t].values.push({label:""})}},{key:"removeValue",value:function(t,e){t.values.splice(e,1)}},{key:"removeCustomField",value:function(t){var e=this;this.dialogRef=this.dialog.open(W.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete")+' "'+this.customFields[t].label+'"',msg:this.translate.instant("lang.confirmAction")}}),this.dialogRef.afterClosed().pipe(Object(q.a)((function(t){return"ok"===t})),Object(X.a)((function(){return e.http.delete("../rest/contactsCustomFields/"+e.customFields[t].id)})),Object(d.a)((function(){e.customFields.splice(t,1),e.notify.success(e.translate.instant("lang.customFieldDeleted"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe()}},{key:"updateCustomField",value:function(t,e){var n=this;t.values=t.values.filter((function(t,e,n){return n.map((function(t){return t.label})).indexOf(t.label)===e}));var a=Object.assign({},t);if(a.values=t.values.map((function(t){return t.label})),this.customFields.filter((function(t){return t.label===a.label})).length>1)return this.notify.handleErrors(this.translate.instant("lang.customFieldAlreadyExists")),Object(J.of)(!1);this.http.put("../rest/contactsCustomFields/"+t.id,a).pipe(Object(d.a)((function(){n.customFieldsClone[e]=JSON.parse(JSON.stringify(t)),n.notify.success(n.translate.instant("lang.customFieldUpdated"))})),Object(b.a)((function(t){return n.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe()}},{key:"sortValues",value:function(t){t.values=this.sortPipe.transform(t.values,"label")}},{key:"isModified",value:function(t,e){return JSON.stringify(t)===JSON.stringify(this.customFieldsClone[e])||""===t.label}}]),t}()).\u0275fac=function(t){return new(t||oC)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(z.b),u.Tb(p.a),u.Tb(g.a),u.Tb(U.a),u.Tb(u.R))},oC.\u0275cmp=u.Nb({type:oC,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(Qy,!0),u.Oc(Ay,!0)),2&t&&(u.Cc(n=u.ic())&&(e.sidenavRight=n.first),u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first))},features:[u.Db([U.a])],decls:23,vars:13,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],[3,"label"],["class","alert-message alert-message-info","role","alert",3,"innerHTML",4,"ngIf"],[4,"ngFor","ngForOf"],["position","end","opened","",1,"col-md-4","col-sm-12","customFielsdPanel",3,"mode","fixedInViewport"],["snav2",""],["class","customFieldsTypesItem",4,"ngFor","ngForOf"],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],["mat-line",""],["role","alert",1,"alert-message","alert-message-info",3,"innerHTML"],["color","primary"],[1,"col-md-12"],["matInput","","name","id","disabled","",3,"ngModel","placeholder","value","ngModelChange"],["matInput","","name","label",3,"ngModel","placeholder","value","ngModelChange"],["class","col-md-12",4,"ngIf"],[1,"col-md-12","text-center"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","warn",3,"click"],["opened","",1,"customFieldValues"],["matBadgeSize","small",3,"matBadge"],[1,"actionValuesCustom"],[2,"flex","1"],["mat-raised-button","","color","primary",3,"click"],["mat-mini-fab","","color","default",3,"title","click",4,"ngIf"],["floatLabel","never",4,"ngFor","ngForOf"],["mat-mini-fab","","color","default",3,"title","click"],["color","primary",1,"fas","fa-sort-alpha-down",2,"height","auto"],["floatLabel","never"],["matInput","",3,"ngModel","placeholder","ngModelChange"],["color","warn","mat-icon-button","","matSuffix","",3,"title","click"],[1,"fa","fa-trash"],[1,"customFieldsTypesItem"],[1,"addCustomFieldTypeContainer"],["mat-icon-button","","color","primary",3,"title","click"],[1,"fas","fa-plus-circle","fa-2x"],[2,"color","rgba(0,0,0,0.54)"],[4,"ngIf"],["floatLabel","never",1,"input-form"],["matInput","","matTextareaAutosize","","matAutosizeMinRows","1","cdkAutosizeMaxRows","6","disabled","",3,"placeholder"],["type","number","matInput","","disabled","",3,"placeholder"],["disabled","",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","disabled","",3,"matDatepicker","placeholder","click"],["matSuffix","",3,"for"],["picker",""],["color","primary","disabled","",1,"radio-form"],[1,"input-form","checkbox-form"],["disabled","",1,"div-list"],["sampleList",""],["checkboxPosition","before",3,"value",4,"ngFor","ngForOf"],[1,"checkbox-selected-list"],["checkboxPosition","before",3,"value"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,zy,2,1,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Zb(13,"mat-tab-group"),u.Zb(14,"mat-tab",9),u.Qc(15,$y,1,1,"div",10),u.Zb(16,"mat-accordion"),u.Qc(17,By,20,19,"mat-expansion-panel",11),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(18,"mat-sidenav",12,13),u.Zb(20,"mat-tab-group"),u.Zb(21,"mat-tab",9),u.Qc(22,cC,13,8,"div",14),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(3),u.sc("label",e.translate.instant("lang.usableFields")),u.Eb(1),u.sc("ngIf",0===e.customFields.length),u.Eb(2),u.sc("ngForOf",e.customFields),u.Eb(1),u.sc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode()),u.Eb(3),u.sc("label",e.translate.instant("lang.customFieldsTypesAvailable")),u.Eb(1),u.sc("ngForOf",e.customFieldsTypes))},directives:[S.e,S.f,M.a,Y.a,Re.c,Re.a,Z.t,Qe.a,Z.s,S.d,Dt.h,Dt.d,r.f,Ut.a,Dt.c,I.k,Qe.c,Qe.g,Qe.h,Qe.f,k.c,w.b,o.c,o.t,o.w,D.b,ar.a,k.j,w.d,it.a,I.o,Ve.f,Ve.h,Ve.d,Je.b,Je.a,Dt.i,er.d,Dt.f,er.a],pipes:[m.d],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}.mat-divider[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.customFielsdPanel[_ngcontent-%COMP%], .customFielsdPanel[_ngcontent-%COMP%]    .mat-tab-body-wrapper{padding-left:0}.mat-expansion-panel-header-description[_ngcontent-%COMP%]{flex-direction:row-reverse}.customFieldValues[_ngcontent-%COMP%]{box-shadow:none;border:1px solid rgba(0,0,0,.12)}.mat-expansion-panel[_ngcontent-%COMP%]{margin:5px}.mat-accordion[_ngcontent-%COMP%]{padding:5px}.mat-tab-body-content[_ngcontent-%COMP%], .mat-tab-body-wrapper[_ngcontent-%COMP%], .mat-tab-group[_ngcontent-%COMP%]{height:100%}.actionsCustomFields[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.actionValuesCustom[_ngcontent-%COMP%]{display:flex}.alert-message-info[_ngcontent-%COMP%]{margin-top:30px;max-width:100%}.addCustomFieldTypeContainer[_ngcontent-%COMP%]{justify-content:center;display:flex;align-items:center;width:60px}.customFieldsTypesItem[_ngcontent-%COMP%]{display:flex;padding-top:10px;padding-bottom:10px}.mat-badge-content[_ngcontent-%COMP%]{top:2px!important}",".banner[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:30px;border-radius:20px;border:1px solid #ccc;position:relative;padding:20px;width:100%}.banner[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;max-width:85%;text-overflow:ellipsis;z-index:1;font-size:20px;font-weight:700;letter-spacing:2px;position:absolute;top:-18px;left:20px;padding:0;margin:0;color:#135f7f}.banner[_ngcontent-%COMP%]   .title-divider[_ngcontent-%COMP%]{position:absolute;width:99%;z-index:-1;top:17px;background:#fff;height:1px}.banner[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:50%;padding-right:10px}.banner[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{font-size:16px}.fieldRow[_ngcontent-%COMP%]{display:flex;padding-top:10px;padding-bottom:10px}.fieldLabel[_ngcontent-%COMP%]{color:#4a4a4a}.fieldLabel[_ngcontent-%COMP%]   .cdk-drag-handle[_ngcontent-%COMP%]{margin-right:10px}.fieldState[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px;width:40px;justify-content:center;align-items:normal!important;padding-top:15px}.fieldState[_ngcontent-%COMP%]   .fieldRequired[_ngcontent-%COMP%]{font-size:5px;color:#135f7f}.fieldState[_ngcontent-%COMP%]   .fieldError[_ngcontent-%COMP%]{font-size:15px;color:#f99830}.fieldState[_ngcontent-%COMP%]   .fieldFull[_ngcontent-%COMP%]{font-size:15px;color:green}.fieldInput[_ngcontent-%COMP%]{position:relative}.fieldInput[_ngcontent-%COMP%], .fieldLabel[_ngcontent-%COMP%]{font-size:13px;flex:1}@media (max-width:768px){.fieldInput[_ngcontent-%COMP%], .fieldLabel[_ngcontent-%COMP%]{font-size:1em}}.fieldInput[_ngcontent-%COMP%], .fieldLabel[_ngcontent-%COMP%], .fieldState[_ngcontent-%COMP%]{align-items:center;display:flex}.input-form[_ngcontent-%COMP%]{font-size:13px;color:#666;width:500px}.input-form[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{color:#135f7f;padding-left:20px}.input-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.input-form[_ngcontent-%COMP%]    .mat-select-value-text{padding-left:20px;color:#135f7f}.input-form[_ngcontent-%COMP%]    .mat-form-field-label{top:15px;left:20px}.input-form[_ngcontent-%COMP%]    .mat-form-field-infix{display:flex;padding-top:0;padding-bottom:5px}.input-form[_ngcontent-%COMP%]    .mat-form-field-label-wrapper{top:-13px}.input-form[_ngcontent-%COMP%]    .mat-form-field-flex{background:#fff;height:40px;border-radius:10px;border:1px solid #135f7f}.input-form[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.input-form[_ngcontent-%COMP%]    .mat-form-field-suffix{margin-right:20px}.input-form[_ngcontent-%COMP%]    .mat-select-arrow-wrapper{padding-right:20px}.input-form[_ngcontent-%COMP%]    .mat-list-option{color:rgba(0,0,0,.54)}.input-form[_ngcontent-%COMP%]    .mat-form-field-wrapper{padding:0}.input-form[_ngcontent-%COMP%]    .mat-datepicker-toggle-default-icon{height:auto}.input-form.search-select[_ngcontent-%COMP%]    .mat-form-field-label-wrapper{top:-15px}.input-form.input-date[_ngcontent-%COMP%]    .mat-form-field-infix{padding-top:5px}.input-form-filled[_ngcontent-%COMP%]{color:#fff;width:500px;transition:all .1s}.input-form-filled[_ngcontent-%COMP%]:hover    .mat-form-field-flex, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-form-field-flex{background:#fff!important;border:1px solid #fff!important;color:#135f7f!important;transition:all .1s}.input-form-filled[_ngcontent-%COMP%]:hover    .mat-form-field-label, .input-form-filled[_ngcontent-%COMP%]:hover    .mat-select-placeholder, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-form-field-label, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-select-placeholder{color:#135f7f!important}.input-form-filled[_ngcontent-%COMP%]:hover    .mat-select-arrow, .input-form-filled[aria-expanded=true][_ngcontent-%COMP%]    .mat-select-arrow{color:rgba(19,95,127,.54)}.input-form-filled[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{color:#135f7f;padding-left:20px}.input-form-filled[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-select-value{text-align:left;font-weight:400}.input-form-filled[_ngcontent-%COMP%]    .mat-select-value-text{padding-left:20px;color:#fff}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-label{color:#fff;left:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-infix{padding-bottom:15px}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-flex{background:#135f7f;border-radius:30px;border:1px solid #fff}.input-form-filled[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-suffix{margin-right:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-select-arrow-wrapper{padding-right:20px}.input-form-filled[_ngcontent-%COMP%]    .mat-select-arrow{color:hsla(0,0%,100%,.54)}.input-form-filled[_ngcontent-%COMP%]    .mat-select-placeholder{color:#fff}.input-form-filled[_ngcontent-%COMP%]    .mat-list-option{color:rgba(0,0,0,.54)}.input-form-filled[_ngcontent-%COMP%]    .mat-form-field-wrapper{padding:0}.input-form-filled[_ngcontent-%COMP%]   textarea.cdk-textarea-autosize-measuring[_ngcontent-%COMP%]{padding:4px 0!important}.input-form-filled[_ngcontent-%COMP%]    .mat-datepicker-toggle-default-icon{height:auto}.input-form.mat-form-field-disabled[_ngcontent-%COMP%]    .mat-input-element{cursor:not-allowed;padding-left:20px}.input-form.mat-form-field-disabled[_ngcontent-%COMP%]    .mat-form-field-flex{cursor:not-allowed;border:1px dashed #353232}.opt-group[_ngcontent-%COMP%]{font-weight:700}.smallInput[_ngcontent-%COMP%]{font-size:11px;padding-left:20px;padding-right:20px}.smallInput[_ngcontent-%COMP%]    .mat-form-field-infix{padding:0 0 5px}.button-form-primary[_ngcontent-%COMP%]{background:#fff;border:1px solid #135f7f;color:#135f7f;border-radius:30px;padding-left:20px;padding-right:20px;width:240px;height:45px;transition:all .1s}@media (max-width:768px){.button-form-primary[_ngcontent-%COMP%]{width:auto}}.button-form-primary[_ngcontent-%COMP%]:hover, .button-form-primary[aria-expanded=true][_ngcontent-%COMP%]{background:#135f7f!important;border:1px solid #fff!important;color:#fff!important;transition:all .1s}.button-form-primary[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;align-items:center;justify-content:center;width:100%}.button-form-primary[_ngcontent-%COMP%]    .mat-button-wrapper .menu-label{display:flex;flex:1;overflow:hidden;text-overflow:ellipsis;margin-right:10px}.button-form-primary[_ngcontent-%COMP%]    .mat-button-wrapper .menu-icon{display:flex}.button-form-primary-filled[_ngcontent-%COMP%]{background:#135f7f;border:1px solid #fff;color:#fff;border-radius:30px;padding-left:20px;padding-right:20px;width:240px;height:45px;transition:all .1s}@media (max-width:768px){.button-form-primary-filled[_ngcontent-%COMP%]{width:auto}}.button-form-primary-filled[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;align-items:center;justify-content:center;width:100%}.button-form-primary-filled[_ngcontent-%COMP%]    .mat-button-wrapper .menu-label{display:flex;flex:1;overflow:hidden;text-overflow:ellipsis;margin-right:10px}.button-form-primary-filled[_ngcontent-%COMP%]    .mat-button-wrapper .menu-icon{display:flex}.button-form-primary-alt[_ngcontent-%COMP%]{font-size:13px;background:#135f7f;border:1px solid #fff;color:#fff;border-radius:30px;padding:5px 20px;width:240px;transition:all .1s}@media (max-width:768px){.button-form-primary-alt[_ngcontent-%COMP%]{font-size:1em}}.button-form-primary-alt[_ngcontent-%COMP%]:hover, .button-form-primary-alt[aria-expanded=true][_ngcontent-%COMP%]{background:#fff!important;border:1px solid #fff!important;color:#135f7f!important;transition:all .1s}.button-form-primary-alt[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;align-items:center;justify-content:center;width:100%}.button-form-primary-alt[_ngcontent-%COMP%]    .mat-button-wrapper .menu-label{display:flex;flex:1}.button-form-primary-alt[_ngcontent-%COMP%]    .mat-button-wrapper .menu-icon{display:flex}.button-form-primary[aria-expanded=true][_ngcontent-%COMP%]{color:#135f7f;background:#fff;transition:all .1s;border:1px solid #135f7f}.button-form[_ngcontent-%COMP%]{background:#fff;color:#135f7f;border-radius:30px;padding:5px 20px;width:240px;transition:all .1s}.button-form[aria-expanded=true][_ngcontent-%COMP%]{transition:all .1s;border-bottom-left-radius:0;border-bottom-right-radius:0;border-top-left-radius:30px;border-top-right-radius:30px} .menuForm{width:240px;border-radius:30px;border:1px solid #fff;min-height:auto} .menuForm .mat-menu-content{padding-top:0;padding-bottom:0} .menuForm .mat-menu-content .mat-menu-item{transition:all .1s;font-size:13px;color:#666}@media (max-width:768px){ .menuForm .mat-menu-content .mat-menu-item{font-size:1em}} .menuForm .mat-menu-content .mat-menu-item:hover{transition:all .1s;color:#fff;background:#1a80ab} .parametersFieldsMenu{min-height:auto}.div-list[_ngcontent-%COMP%]{padding:0;max-height:150px;overflow:auto}.div-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{font-size:13px}@media (max-width:768px){.div-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{font-size:1em}}.checkbox-form[_ngcontent-%COMP%]{width:100%;padding:0;border:1px solid #135f7f;border-radius:30px;overflow:hidden}.checkbox-selected-list[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:center}.checkbox-selected-list[_ngcontent-%COMP%]    .mat-chip-list-wrapper{justify-content:center}.checkbox-selected-list[_ngcontent-%COMP%]   .mat-chip[_ngcontent-%COMP%]{font-size:13px}@media (max-width:768px){.checkbox-selected-list[_ngcontent-%COMP%]   .mat-chip[_ngcontent-%COMP%]{font-size:1em}}.radio-form[_ngcontent-%COMP%]{padding-left:20px;display:grid;grid-template-columns:repeat(2,1fr);width:100%}.radio-form[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]{flex:1}.radio-form[_ngcontent-%COMP%]   .mat-radio-button[_ngcontent-%COMP%]    .mat-radio-label-content{font-weight:400;color:rgba(0,0,0,.54)}.radio-form[_ngcontent-%COMP%]   .mat-radio-disabled[_ngcontent-%COMP%]{opacity:.5}.input-radio[_ngcontent-%COMP%]    .mat-form-field-infix{overflow:auto;padding-top:0}.input-radio[_ngcontent-%COMP%]    .mat-form-field-flex{height:auto}.input-radio[_ngcontent-%COMP%]    .mat-form-field-label{top:0;font-size:12px}.disabled[_ngcontent-%COMP%]{opacity:.2}.customFieldRow[_ngcontent-%COMP%]{display:flex;padding-top:20px;padding-bottom:20px}.customFieldDrag[_ngcontent-%COMP%]{cursor:move;width:50px;display:flex;align-items:center;justify-content:center}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drag-preview[_ngcontent-%COMP%]{background:#fff;box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.indexingModelsCustomFieldsList.cdk-drop-list-dragging[_ngcontent-%COMP%]   .indexingModelsCustomFieldsList[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.advancedInput[_ngcontent-%COMP%]{flex-direction:column}.noMandatory[_ngcontent-%COMP%]{visibility:hidden}.checkboxInput[_ngcontent-%COMP%]{display:block}.categoryLabel[_ngcontent-%COMP%]{letter-spacing:1px;font-size:13px;color:#135f7f;font-weight:700}@media (max-width:768px){.categoryLabel[_ngcontent-%COMP%]{font-size:1em}}.textareaInput[_ngcontent-%COMP%]    .mat-form-field{line-height:normal}.textareaInput[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{padding:0;margin:0;color:#135f7f}.textareaInput[_ngcontent-%COMP%]    .mat-form-field-flex{padding-left:20px;height:auto!important;min-height:40px!important}.textareaInput[_ngcontent-%COMP%]    .mat-form-field-label{left:0}"]}),oC),lC=n("Gon0"),dC=["adminMenuTemplate"];function bC(t,e){if(1&t&&(u.Zb(0,"a",11),u.Ub(1,"mat-icon",12),u.Zb(2,"p",13),u.Sc(3),u.Yb(),u.Yb()),2&t){var n=e.$implicit;u.Jb("active",n.current),u.sc("routerLink",n.route),u.Eb(1),u.Gb(n.icon),u.Eb(2),u.Uc(" ",n.label," ")}}function uC(t,e){if(1&t&&(u.Zb(0,"mat-nav-list"),u.Qc(1,bC,4,6,"a",10),u.Yb()),2&t){var n=u.lc();u.Eb(1),u.sc("ngForOf",n.subMenus)}}function mC(t,e){if(1&t){var n=u.ac();u.Zb(0,"app-contact-form",14),u.hc("onSubmitEvent",(function(){return u.Hc(n),u.lc().goToList()})),u.Yb()}if(2&t){var a=u.lc();u.sc("creationMode",a.creationMode)("contactId",a.contactId)}}var fC,pC=((fC=function(){function t(e,n,a,i,r,c,o,s){_classCallCheck(this,t),this.translate=e,this.http=n,this.route=a,this.router=i,this.headerService=r,this.appService=c,this.dialog=o,this.viewContainerRef=s,this.loading=!1,this.creationMode=!0,this.subMenus=[{icon:"fa fa-book",route:"/administration/contacts/list",label:this.translate.instant("lang.contactsList"),current:!1},{icon:"fa fa-code",route:"/administration/contacts/contactsCustomFields",label:this.translate.instant("lang.customFieldsAdmin"),current:!1},{icon:"fa fa-cog",route:"/administration/contacts/contacts-parameters",label:this.translate.instant("lang.contactsParameters"),current:!1},{icon:"fa fa-users",route:"/administration/contacts/contacts-groups",label:this.translate.instant("lang.contactsGroups"),current:!1},{icon:"fas fa-magic",route:"/administration/contacts/duplicates",label:this.translate.instant("lang.duplicatesContactsAdmin"),current:!1}],this.contactId=null}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.route.params.subscribe((function(e){void 0===e.id?(t.headerService.setHeader(t.translate.instant("lang.contactCreation")),t.creationMode=!0,t.loading=!1):(t.headerService.setHeader(t.translate.instant("lang.contactModification")),t.creationMode=!1,t.contactId=e.id,t.loading=!1)}))}},{key:"goToList",value:function(){this.router.navigate(["/administration/contacts/list"])}}]),t}()).\u0275fac=function(t){return new(t||fC)(u.Tb(m.e),u.Tb(f.b),u.Tb(r.a),u.Tb(r.c),u.Tb(p.a),u.Tb(g.a),u.Tb(z.b),u.Tb(u.R))},fC.\u0275cmp=u.Nb({type:fC,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&u.Oc(dC,!0),2&t&&u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first)},decls:14,vars:7,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],[3,"creationMode","contactId","onSubmitEvent",4,"ngIf"],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],["mat-line",""],[3,"creationMode","contactId","onSubmitEvent"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,uC,2,1,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,mC,1,2,"app-contact-form",9),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",!e.loading))},directives:[S.e,S.f,M.a,Y.a,Z.t,Dt.h,Z.s,Dt.d,r.f,Ut.a,Dt.c,I.k,lC.a],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}"]}),fC),gC=["adminMenuTemplate"];function hC(t,e){1&t&&(u.Zb(0,"mat-nav-list"),u.Zb(1,"h3",29),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"a",30),u.Ub(5,"mat-icon",31),u.Zb(6,"p",32),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(2),u.Tc(u.nc(3,2,"lang.actions")),u.Eb(5),u.Uc(" ",u.nc(8,4,"lang.add")," "))}function vC(t,e){1&t&&(u.Zb(0,"mat-header-cell",33),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.label")))}function yC(t,e){if(1&t&&(u.Zb(0,"mat-cell",34),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.label," ")}}function CC(t,e){1&t&&(u.Zb(0,"mat-header-cell",33),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.description")))}function EC(t,e){if(1&t&&(u.Zb(0,"mat-cell",34),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.description," ")}}function SC(t,e){1&t&&u.Ub(0,"mat-header-cell")}function MC(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-cell",35),u.Zb(1,"button",36),u.hc("click",(function(t){u.Hc(n);var a=e.$implicit,i=u.lc();return t.stopPropagation(),i.deleteTag(a)})),u.Ub(2,"mat-icon",37),u.Yb(),u.Yb()}if(2&t){var a=u.lc();u.Eb(1),u.sc("title",a.translate.instant("lang.delete"))}}function xC(t,e){1&t&&u.Ub(0,"mat-header-row")}function YC(t,e){1&t&&u.Ub(0,"mat-row",38),2&t&&u.uc("routerLink","/administration/tags/",e.$implicit.id,"")}var ZC,_C=((ZC=function(){function t(e,n,a,i,r,c,o,s,l){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.headerService=i,this.appService=r,this.dialog=c,this.functions=o,this.adminService=s,this.viewContainerRef=l,this.loading=!0,this.resultsLength=0,this.displayedColumns=["label","description","actions"],this.filterColumns=["label","description"]}return _createClass(t,[{key:"ngOnInit",value:function(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.tags")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loadList()}},{key:"loadList",value:function(){var t=this;this.loading=!0,this.http.get("../rest/tags").pipe(Object(d.a)((function(e){t.resultsLength=e.tags.length,setTimeout((function(){t.adminService.setDataSource("admin_tag",e.tags,t.sort,t.paginator,t.filterColumns)}),0)})),Object(Ct.a)((function(){return t.loading=!1}))).subscribe()}},{key:"deleteTag",value:function(t){var e=this;this.dialog.open(W.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:"".concat(this.translate.instant("lang.delete"),' "').concat(t.label,'"'),msg:this.translate.instant("lang.confirmAction")}}).afterClosed().pipe(Object(q.a)((function(t){return"ok"===t})),Object(X.a)((function(){return e.http.delete("../rest/tags/"+t.id)})),Object(d.a)((function(){e.loadList(),e.notify.success(e.translate.instant("lang.tagDeleted"))})),Object(b.a)((function(t){return e.notify.handleSoftErrors(t),Object(J.of)(!1)}))).subscribe()}}]),t}()).\u0275fac=function(t){return new(t||ZC)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a),u.Tb(z.b),u.Tb(C.a),u.Tb(It),u.Tb(u.R))},ZC.\u0275cmp=u.Nb({type:ZC,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(gC,!0),u.ad(V.a,!0),u.ad(N.a,!0)),2&t&&(u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.paginator=n.first),u.Cc(n=u.ic())&&(e.sort=n.first))},decls:38,vars:20,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],[1,"table-head"],[1,"table-head-result"],[2,"font-size","13px"],["matInput","",3,"formControl","placeholder"],[1,"table-head-tool"],[3,"length","hidePageSize","pageSize"],["paginator",""],[2,"height","90%","overflow","auto","position","absolute","width","100%"],["id","contact-list","matSort","","matSortDisableClear","",2,"width","100%",3,"dataSource"],["tableContactListSort","matSort"],["matColumnDef","label"],["mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor: pointer;",3,"routerLink",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","display","flex","justify-content","end","align-items","center","padding-left","20px"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/tags/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],["mat-sort-header",""],["mat-cell",""],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"title","click"],[1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,hC,9,6,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Zb(13,"div",9),u.Zb(14,"div",10),u.Zb(15,"mat-form-field",11),u.Ub(16,"input",12),u.mc(17,"translate"),u.Yb(),u.Yb(),u.Zb(18,"div",13),u.Ub(19,"mat-paginator",14,15),u.Yb(),u.Yb(),u.Zb(21,"div",16),u.Zb(22,"mat-table",17,18),u.Xb(24,19),u.Qc(25,vC,3,3,"mat-header-cell",20),u.Qc(26,yC,2,1,"mat-cell",21),u.Wb(),u.Xb(27,22),u.Qc(28,CC,3,3,"mat-header-cell",20),u.Qc(29,EC,2,1,"mat-cell",21),u.Wb(),u.Xb(30,23),u.Qc(31,SC,1,0,"mat-header-cell",24),u.Qc(32,MC,3,1,"mat-cell",25),u.Wb(),u.Qc(33,xC,1,0,"mat-header-row",26),u.Qc(34,YC,1,1,"mat-row",27),u.Yb(),u.Zb(35,"div",28),u.Sc(36),u.mc(37,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(5),u.tc("placeholder",u.nc(17,16,"lang.filterBy")),u.sc("formControl",e.adminService.getFilterField()),u.Eb(3),u.sc("length",100)("hidePageSize",!0)("pageSize",10),u.Eb(3),u.sc("dataSource",e.adminService.getDataSource()),u.Eb(11),u.sc("matHeaderRowDef",e.displayedColumns),u.Eb(1),u.sc("matRowDefColumns",e.displayedColumns),u.Eb(2),u.Vc(" ",e.resultsLength," ",u.nc(37,18,"lang.tags"),""))},directives:[S.e,S.f,M.a,Y.a,k.c,w.b,o.c,o.t,o.i,V.a,B.n,N.a,B.c,B.i,B.b,B.k,B.m,Dt.h,Dt.g,Dt.d,r.f,Ut.a,Dt.c,I.k,B.h,N.b,B.a,D.b,B.j,B.l,r.d],pipes:[m.d],encapsulation:2}),ZC),kC=["linkedTagInput"];function wC(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-chip",31),u.hc("click",(function(){u.Hc(n);var t=e.$implicit;return u.lc(2).remove(t)}))("removed",(function(){u.Hc(n);var t=e.$implicit;return u.lc(2).remove(t)})),u.Sc(1),u.Ub(2,"mat-icon",32),u.Yb()}if(2&t){var a=e.$implicit,i=u.lc(2);u.Eb(1),u.Uc(" ",i.getTagLabel(a)," ")}}function OC(t,e){if(1&t&&(u.Zb(0,"mat-option",33),u.Sc(1),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.sc("value",n)("disabled",a.isSelected(n)||n.id==a.id),u.Eb(1),u.Uc(" ",n.label," ")}}function TC(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-form-field"),u.Zb(1,"mat-chip-list",null,24),u.Qc(3,wC,3,1,"mat-chip",25),u.Ub(4,"input",26,27),u.Yb(),u.Zb(6,"mat-autocomplete",28,29),u.hc("optionSelected",(function(t){return u.Hc(n),u.lc().selected(t)})),u.Qc(8,OC,2,3,"mat-option",30),u.mc(9,"async"),u.Yb(),u.Yb()}if(2&t){var a=u.Dc(2),i=u.Dc(7),r=u.lc();u.Eb(3),u.sc("ngForOf",r.tag.links.value),u.Eb(1),u.sc("placeholder",r.translate.instant("lang.linkedTags"))("formControl",r.myControl)("matAutocomplete",i)("matChipInputFor",a),u.Eb(4),u.sc("ngForOf",u.nc(9,6,r.filteredOptions))}}function IC(t,e){1&t&&(u.Zb(0,"div",34),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc(" ",u.nc(2,1,"lang.cannotMergeTags")," "))}function DC(t,e){if(1&t){var n=u.ac();u.Zb(0,"plugin-select-search",35),u.hc("afterOpened",(function(){return u.Hc(n),u.lc().getTags()}))("afterSelected",(function(t){return u.Hc(n),u.lc().mergeTag(t)})),u.Yb()}if(2&t){var a=u.lc();u.sc("label",a.translate.instant("lang.mergeTagWith"))("placeholderLabel",a.translate.instant("lang.mergeTagWith"))("formControlSelect",a.selectMergeTag)("datas",a.tags)}}var UC,PC=((UC=function(){function t(e,n,a,i,r,c,s,l,d){_classCallCheck(this,t),this.translate=e,this.http=n,this.route=a,this.router=i,this.notify=r,this.headerService=c,this.appService=s,this.functions=l,this.dialog=d,this.loading=!1,this.loadingTags=!0,this.advancedMode=!1,this.tags=[],this.tag={label:new o.h({value:"",disabled:!1},[o.H.required]),description:new o.h({value:"",disabled:!1}),parentId:new o.h({value:"",disabled:!1}),links:new o.h({value:[],disabled:!1}),usage:new o.h({value:"",disabled:!1}),canMerge:new o.h({value:!0,disabled:!1}),countResources:new o.h({value:0,disabled:!1})},this.myControl=new o.h,this.selectMergeTag=new o.h({value:"",disabled:!1}),this.tagFormGroup=new o.k(this.tag),this.currTagChildren=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.loading=!0,this.route.params.subscribe((function(e){return Object(yt.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.id=e.id,t.next=3,this.getTags();case 3:void 0===e.id?(this.headerService.setHeader(this.translate.instant("lang.tagCreation")),this.creationMode=!0,this.loading=!1):(this.creationMode=!1,this.http.get("../rest/tags/"+this.id).pipe(Object(d.a)((function(t){Object.keys(n.tag).forEach((function(e){n.functions.empty(t[e])||n.tag[e].setValue(t[e])})),n.functions.empty(n.tag.parentId.value)||n.toggleAdvancedTag(),n.headerService.setHeader(n.translate.instant("lang.tagModification"),n.tag.label.value)})),Object(Ct.a)((function(){return n.loading=!1})),Object(b.a)((function(t){return n.notify.handleErrors(t),Object(c.a)(!1)}))).subscribe());case 4:case"end":return t.stop()}}),t,this)})))}))}},{key:"onSubmit",value:function(){this.creationMode?this.createTag():this.updateTag()}},{key:"formatTag",value:function(){var t=this,e={};return Object.keys(this.tag).forEach((function(n){e[n]=t.tag[n].value})),e}},{key:"createTag",value:function(){var t=this;this.http.post("../rest/tags",this.formatTag()).pipe(Object(d.a)((function(){t.notify.success(t.translate.instant("lang.tagAdded")),t.router.navigate(["/administration/tags"])})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(c.a)(!1)}))).subscribe()}},{key:"updateTag",value:function(){var t=this;this.http.put("../rest/tags/"+this.id,this.formatTag()).pipe(Object(d.a)((function(){t.notify.success(t.translate.instant("lang.tagUpdated")),t.router.navigate(["/administration/tags"])})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(c.a)(!1)}))).subscribe()}},{key:"getTags",value:function(){var t=this;return new Promise((function(e){t.http.get("../rest/tags").pipe(Object(d.a)((function(n){t.tags=n.tags.map((function(e){return{id:e.id,label:e.label,parentId:e.parentId,countResources:e.countResources,disabled:e.id==t.id}})),e(!0)})),Object(Ct.a)((function(){return t.loadingTags=!1})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(c.a)(!1)}))).subscribe()}))}},{key:"mergeTag",value:function(t){var e=this;this.selectMergeTag.reset();var n=this.tags.filter((function(e){return e.id===t}))[0],a="".concat(this.translate.instant("lang.confirmAction"),"<br/><br/>").concat(this.translate.instant("lang.theTag"),'<b> "').concat(this.tag.label.value,'" </b>').concat(this.translate.instant("lang.willBeDeletedAndMerged"),'<b> "').concat(n.label,'"</b><br/><br/>').concat(this.translate.instant("lang.willBeTransferredToNewTag"),'<b> "').concat(n.label,'"</b> : <b>').concat(this.tag.countResources.value,"</b>");this.dialog.open(W.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:"".concat(this.translate.instant("lang.mergeWith"),'  "').concat(n.label,'"'),msg:a}}).afterClosed().pipe(Object(q.a)((function(t){return"ok"===t})),Object(X.a)((function(){return e.http.put("../rest/mergeTags",{idMaster:n.id,idMerge:e.id})})),Object(d.a)((function(){e.notify.success(e.translate.instant("lang.tagMerged")),e.router.navigate(["/administration/tags/"+n.id])})),Object(b.a)((function(t){return e.notify.handleSoftErrors(t),Object(c.a)(!1)}))).subscribe()}},{key:"toggleAdvancedTag",value:function(){return Object(yt.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.advancedMode=!this.advancedMode,this.getTagsTree(),this.filteredOptions=this.myControl.valueChanges.pipe(Object(s.a)(null),Object(l.a)((function(t){return t?e._filter(t):e.tags.slice()})));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"_filter",value:function(t){var e=t;return"string"==typeof t&&(e=t.toLowerCase()),this.tags.filter((function(t){return t.label.toLowerCase().indexOf(e)>-1}))}},{key:"isSelected",value:function(t){return this.tag.links.value.filter((function(e){return e==t.id})).length>0}},{key:"remove",value:function(t){var e=this.tag.links.value.indexOf(t);e>=0&&this.tag.links.value.splice(e,1)}},{key:"selected",value:function(t){var e=this.tag.links.value;e.push(t.option.value.id),this.tag.links.setValue(e),this.linkedTagInput.nativeElement.value="",this.myControl.setValue(null)}},{key:"getTagsTree",value:function(){var t=this;this.functions.empty(this.id)||this.getChildrens(this.id);var e=this.tags.map((function(e){return{id:e.id,text:e.label,parent:t.functions.empty(e.parentId)?"#":e.parentId,state:{opened:t.tag.parentId.value==e.id,selected:t.tag.parentId.value==e.id,disabled:t.currTagChildren.indexOf(e.id.toString())>-1}}}));setTimeout((function(){$("#jstree").on("select_node.jstree",(function(e,n){t.tag.parentId.setValue(parseInt(n.node.id))})).on("deselect_node.jstree",(function(e,n){t.tag.parentId.setValue(null)})).jstree({checkbox:{deselect_all:!0,three_state:!1},core:{force_text:!0,themes:{name:"proton",responsive:!0},multiple:!1,data:e},plugins:["checkbox","search","sort"]});var n=!1;$("#jstree_search").keyup((function(){n&&clearTimeout(n),n=setTimeout((function(){var t=$("#jstree_search").val();$("#jstree").jstree(!0).search(t)}),250)}))}),0)}},{key:"getChildrens",value:function(t){var e=this;this.currTagChildren.push(t.toString()),this.tags.filter((function(e){return e.parentId==t})).forEach((function(t){e.getChildrens(t.id)}))}},{key:"getTagLabel",value:function(t){return this.tags.filter((function(e){return e.id==t}))[0].label}}]),t}()).\u0275fac=function(t){return new(t||UC)(u.Tb(m.e),u.Tb(f.b),u.Tb(r.a),u.Tb(r.c),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a),u.Tb(C.a),u.Tb(z.b))},UC.\u0275cmp=u.Nb({type:UC,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&u.ad(kC,!0),2&t&&u.Cc(n=u.ic())&&(e.linkedTagInput=n.first)},decls:39,vars:29,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],[2,"height","90%","overflow","auto","position","absolute","width","100%"],[2,"padding","20px",3,"ngSubmit"],["matInput","","type","text","maxlength","128","required","",3,"formControl","placeholder"],["matInput","","type","text",3,"formControl","placeholder"],[4,"ngIf"],["class","alert-message alert-message-danger","style","min-width: 100%;",4,"ngIf"],["style","width:100%;",3,"label","placeholderLabel","formControlSelect","datas","afterOpened","afterSelected",4,"ngIf"],[1,"text-center"],["mat-raised-button","","color","primary",3,"disabled"],["type","button","mat-raised-button","","color","default",3,"click"],["fixedTopGap","56","position","end",2,"overflow-x","hidden","width","450px",3,"mode","fixedInViewport","opened"],["snav2",""],["mat-subheader",""],[2,"padding","10px"],["matInput","","id","jstree_search","name","jstree_search","type","text",3,"placeholder"],["id","jstree"],["chipList",""],["style","cursor: pointer;",3,"click","removed",4,"ngFor","ngForOf"],[3,"placeholder","formControl","matAutocomplete","matChipInputFor"],["linkedTagInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],[2,"cursor","pointer",3,"click","removed"],["matChipRemove","",1,"fa","fa-times-circle"],[3,"value","disabled"],[1,"alert-message","alert-message-danger",2,"min-width","100%"],[2,"width","100%",3,"label","placeholderLabel","formControlSelect","datas","afterOpened","afterSelected"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Zb(1,"mat-sidenav-content"),u.Zb(2,"div",1),u.Zb(3,"div",2),u.Zb(4,"div",3),u.Ub(5,"header-left"),u.Yb(),u.Zb(6,"div",4),u.Ub(7,"header-right"),u.Yb(),u.Yb(),u.Ub(8,"div",5),u.Yb(),u.Zb(9,"div",6),u.Zb(10,"div",7),u.Zb(11,"div",8),u.Zb(12,"form",9),u.hc("ngSubmit",(function(){return e.onSubmit()})),u.Zb(13,"mat-form-field"),u.Ub(14,"input",10),u.Yb(),u.Zb(15,"mat-form-field"),u.Ub(16,"textarea",11),u.Yb(),u.Zb(17,"mat-form-field"),u.Ub(18,"input",11),u.Yb(),u.Qc(19,TC,10,8,"mat-form-field",12),u.Qc(20,IC,3,3,"div",13),u.Qc(21,DC,1,4,"plugin-select-search",14),u.Zb(22,"div",15),u.Zb(23,"button",16),u.Sc(24),u.mc(25,"translate"),u.Yb(),u.Zb(26,"button",17),u.hc("click",(function(){return e.toggleAdvancedTag()})),u.Sc(27),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(28,"mat-sidenav",18,19),u.Zb(30,"mat-list"),u.Zb(31,"h3",20),u.Sc(32),u.mc(33,"translate"),u.Yb(),u.Zb(34,"div",21),u.Zb(35,"mat-form-field"),u.Ub(36,"input",22),u.mc(37,"translate"),u.Yb(),u.Ub(38,"div",23),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(3),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(5),u.sc("formControl",e.tag.label)("placeholder",e.translate.instant("lang.label")),u.Eb(2),u.sc("formControl",e.tag.description)("placeholder",e.translate.instant("lang.description")),u.Eb(2),u.sc("formControl",e.tag.usage)("placeholder",e.translate.instant("lang.usage")),u.Eb(1),u.sc("ngIf",e.advancedMode),u.Eb(1),u.sc("ngIf",!e.creationMode&&!e.tag.canMerge.value),u.Eb(1),u.sc("ngIf",!e.loadingTags&&e.tag.canMerge.value),u.Eb(2),u.sc("disabled",!e.tagFormGroup.valid),u.Eb(1),u.Tc(u.nc(25,23,"lang.validate")),u.Eb(3),u.Uc(" ",e.translate.instant(e.advancedMode?"lang.defaultMode":"lang.advancedMode")," "),u.Eb(1),u.sc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",e.advancedMode),u.Eb(4),u.Uc("",u.nc(33,25,"lang.selectParentTag")," :"),u.Eb(4),u.tc("placeholder",u.nc(37,27,"lang.searchTag")))},directives:[S.e,S.f,M.a,Y.a,o.J,o.u,o.v,k.c,w.b,o.c,o.o,o.E,o.t,o.i,Z.t,D.b,S.d,Dt.a,Dt.g,er.d,Z.s,nr.d,er.c,nr.a,er.a,Ut.a,er.e,I.o,Cl.a],pipes:[m.d,Z.b],encapsulation:2}),UC),FC=n("q3Kh"),LC=["snav2"],jC=["maarchTree"];function RC(t,e){1&t&&(u.Zb(0,"div",15),u.Ub(1,"mat-spinner",16),u.Yb())}var QC=function(t){return[t]};function AC(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-card",17),u.Zb(1,"form",18,19),u.hc("ngSubmit",(function(){return u.Hc(n),u.lc().onSubmit()})),u.Zb(3,"mat-form-field"),u.Zb(4,"input",20),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().alfresco.label=t})),u.mc(5,"translate"),u.mc(6,"translate"),u.Yb(),u.Yb(),u.Zb(7,"div",21),u.Zb(8,"div",22),u.Zb(9,"div",23),u.Sc(10),u.mc(11,"translate"),u.Yb(),u.Zb(12,"div",24),u.Zb(13,"mat-form-field"),u.Zb(14,"input",25),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().alfresco.account.id=t})),u.mc(15,"translate"),u.mc(16,"translate"),u.Yb(),u.Yb(),u.Zb(17,"mat-form-field"),u.Zb(18,"input",26),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().alfresco.account.password=t})),u.Yb(),u.Zb(19,"mat-icon",27),u.hc("click",(function(){u.Hc(n);var t=u.lc();return t.hidePassword=!t.hidePassword})),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(20,"div",28),u.Zb(21,"div",23),u.Sc(22),u.mc(23,"translate"),u.Yb(),u.Zb(24,"mat-form-field"),u.Zb(25,"input",29),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().alfresco.rootFolder=t})),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(26,"div",30),u.Zb(27,"button",31),u.hc("click",(function(){return u.Hc(n),u.lc().checkAccount()})),u.Sc(28),u.mc(29,"translate"),u.Yb(),u.Zb(30,"button",32),u.Sc(31),u.mc(32,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.Dc(2),i=u.lc();u.Eb(4),u.tc("title",u.nc(5,20,"lang.label")),u.tc("placeholder",u.nc(6,22,"lang.label")),u.sc("ngModel",i.alfresco.label),u.Eb(6),u.Uc(" ",u.nc(11,24,"lang.alfrescoAccount")," "),u.Eb(4),u.tc("title",u.nc(15,26,"lang.id")),u.tc("placeholder",u.nc(16,28,"lang.id")),u.sc("ngModel",i.alfresco.account.id),u.Eb(4),u.sc("ngModel",i.alfresco.account.password)("required",i.creationMode)("title",i.translate.instant(i.creationMode?"lang.password":"lang.changePassword"))("type",i.hidePassword?"password":"text")("placeholder",i.translate.instant(i.creationMode?"lang.password":"lang.changePassword")),u.Eb(1),u.sc("ngClass",u.zc(36,QC,i.hidePassword?"fa-eye-slash":"fa-eye")),u.Eb(3),u.Uc(" ",u.nc(23,30,"lang.rootFolder")," "),u.Eb(3),u.sc("ngModel",i.alfresco.rootFolder)("title",i.translate.instant("lang.id")),u.Eb(2),u.sc("disabled",i.functionsService.empty(i.alfresco.account.id)||i.functionsService.empty(i.alfresco.account.password)&&i.creationMode),u.Eb(1),u.Tc(u.nc(29,32,"lang.test")),u.Eb(2),u.sc("disabled",!a.valid||!i.validAccount()),u.Eb(1),u.Tc(u.nc(32,34,"lang.validate"))}}var HC,zC=((HC=function(){function t(e,n,a,i,r,c,o,s){_classCallCheck(this,t),this.translate=e,this.http=n,this.route=a,this.router=i,this.notify=r,this.headerService=c,this.appService=o,this.functionsService=s,this.loading=!1,this.creationMode=!0,this.entities=[],this.availableEntities=[],this.alfresco={id:0,label:"",account:{id:"",password:""},rootFolder:null,linkedEntities:[]},this.hidePassword=!0,this.alfrescoTreeLoaded=!1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.loading=!1,this.route.params.subscribe((function(e){return Object(yt.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e.id?(this.headerService.setHeader(this.translate.instant("lang.alfrescoCreation")),this.creationMode=!0):(this.headerService.setHeader(this.translate.instant("lang.alfrescoModification")),this.alfresco.id=e.id,this.creationMode=!1),t.next=3,this.getEntities();case 3:return t.next=5,this.getAvailableEntities();case 5:return t.next=7,this.initAccount();case 7:this.loading=!1;case 8:case"end":return t.stop()}}),t,this)})))}))}},{key:"onSubmit",value:function(){this.creationMode?this.createAccount():this.updateAccount()}},{key:"createAccount",value:function(){var t=this;this.http.post("../rest/alfresco/accounts",this.formatData()).pipe(Object(wt.tap)((function(){t.notify.success(t.translate.instant("lang.accountAdded")),t.router.navigate(["/administration/alfresco"])})),Object(G.catchError)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"updateAccount",value:function(){var t=this;this.http.put("../rest/alfresco/accounts/"+this.alfresco.id,this.formatData()).pipe(Object(wt.tap)((function(){t.notify.success(t.translate.instant("lang.accountUpdated")),t.router.navigate(["/administration/alfresco"])})),Object(G.catchError)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"formatData",value:function(){var t={label:this.alfresco.label,login:this.alfresco.account.id,nodeId:this.alfresco.rootFolder,entities:this.maarchTree.getSelectedNodes().map((function(t){return t.id}))};return this.functionsService.empty(this.alfresco.account.password)||(t.password=this.alfresco.account.password),t}},{key:"getAvailableEntities",value:function(){var t=this;return new Promise((function(e,n){t.http.get("../rest/alfresco/availableEntities").pipe(Object(wt.tap)((function(n){t.availableEntities=n.availableEntities,e(!0)})),Object(G.catchError)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}))}},{key:"getEntities",value:function(){var t=this;return new Promise((function(e,n){t.http.get("../rest/entities").pipe(Object(FC.map)((function(t){return t.entities=t.entities.map((function(t){return{text:t.entity_label,icon:t.icon,parent_id:t.parentSerialId,id:t.serialId,state:{opened:!0}}})),t.entities})),Object(wt.tap)((function(n){t.entities=n,e(!0)})),Object(G.catchError)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}))}},{key:"initAccount",value:function(){var t=this;return new Promise((function(e,n){t.creationMode?t.http.get("../rest/entities").pipe(Object(FC.map)((function(t){return t.entities=t.entities.map((function(t){return{text:t.entity_label,icon:t.icon,parent_id:t.parentSerialId,id:t.serialId,state:{opened:!0}}})),t.entities})),Object(wt.tap)((function(n){t.entities=n,t.entities.forEach((function(e){e.state.disabled=!(t.availableEntities.indexOf(+e.id)>-1)})),setTimeout((function(){t.initEntitiesTree(t.entities)}),0),e(!0)})),Object(G.catchError)((function(e){return t.notify.handleErrors(e),Object(J.of)(!1)}))).subscribe():t.http.get("../rest/alfresco/accounts/"+t.alfresco.id).pipe(Object(wt.tap)((function(n){t.alfresco={id:n.id,label:n.label,account:{id:n.login},rootFolder:n.nodeId,linkedEntities:n.entities},t.entities.forEach((function(e){e.state.disabled=!(t.availableEntities.indexOf(+e.id)>-1),t.alfresco.linkedEntities.indexOf(+e.id)>-1&&(e.state.disabled=!1,e.state.selected=!0)})),setTimeout((function(){t.initEntitiesTree(t.entities)}),0),e(!0)})),Object(G.catchError)((function(e){return t.notify.handleErrors(e),Object(J.of)(!1)}))).subscribe()}))}},{key:"initEntitiesTree",value:function(t){this.maarchTree.initData(t)}},{key:"validAccount",value:function(){return!this.functionsService.empty(this.alfresco.rootFolder)&&0!==this.maarchTree.getSelectedNodes().length}},{key:"checkAccount",value:function(){var t,e=this;t=this.creationMode?{login:this.alfresco.account.id,password:this.alfresco.account.password,nodeId:this.alfresco.rootFolder}:{accountId:this.alfresco.id,login:this.alfresco.account.id,password:this.alfresco.account.password,nodeId:this.alfresco.rootFolder},this.http.post("../rest/alfresco/checkAccounts",t).pipe(Object(wt.tap)((function(){e.notify.success(e.translate.instant("lang.testSucceeded"))})),Object(G.catchError)((function(t){return e.notify.handleSoftErrors(t),Object(J.of)(!1)}))).subscribe()}}]),t}()).\u0275fac=function(t){return new(t||HC)(u.Tb(m.e),u.Tb(f.b),u.Tb(r.a),u.Tb(r.c),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a),u.Tb(C.a))},HC.\u0275cmp=u.Nb({type:HC,selectors:[["app-alfresco"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(LC,!0),u.Oc(jC,!0)),2&t&&(u.Cc(n=u.ic())&&(e.sidenavRight=n.first),u.Cc(n=u.ic())&&(e.maarchTree=n.first))},decls:22,vars:14,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",2,"overflow-x","hidden","width","400px",3,"mode","fixedInViewport","opened"],["snav2",""],["mat-subheader",""],[2,"padding","10px"],["maarchTree",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[3,"ngSubmit"],["alfrescoForm","ngForm"],["matInput","","required","","name","label","id","label","type","text","maxlength","64",3,"ngModel","title","placeholder","ngModelChange"],[1,"form-group",2,"flex-direction","row","flex-wrap","wrap"],[1,"formType","ratio-2","col-sm-12"],[1,"formType-title"],[2,"width","100%","text-align","center"],["matInput","","required","","name","accountId","id","accountId","type","text",3,"ngModel","title","placeholder","ngModelChange"],["matInput","","name","password","id","password",3,"ngModel","required","title","type","placeholder","ngModelChange"],["color","primary","matSuffix","",1,"fa","fa-2x",2,"cursor","pointer",3,"ngClass","click"],[1,"formType","ratio-1","col-sm-12"],["matInput","","required","","name","rootFolder","id","rootFolder","type","text","placeholder","D\xe9p\xf4t racine",3,"ngModel","title","ngModelChange"],[1,"col-sm-12","text-center",2,"padding","10px"],["mat-raised-button","","type","button","color","primary",3,"disabled","click"],["mat-raised-button","","type","submit","color","primary",3,"disabled"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Zb(1,"mat-sidenav-content"),u.Zb(2,"div",1),u.Zb(3,"div",2),u.Zb(4,"div",3),u.Ub(5,"header-left"),u.Yb(),u.Zb(6,"div",4),u.Ub(7,"header-right"),u.Yb(),u.Yb(),u.Ub(8,"div",5),u.Yb(),u.Zb(9,"div",6),u.Zb(10,"div",7),u.Qc(11,RC,2,0,"div",8),u.Qc(12,AC,33,38,"mat-card",9),u.Yb(),u.Yb(),u.Yb(),u.Zb(13,"mat-sidenav",10,11),u.Zb(15,"mat-list"),u.Zb(16,"h3",12),u.Sc(17),u.mc(18,"translate"),u.Yb(),u.Zb(19,"div",13),u.Ub(20,"app-maarch-flat-tree",null,14),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(3),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading),u.Eb(1),u.sc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!e.appService.getViewMode()),u.Eb(4),u.Tc(u.nc(18,12,"lang.chooseEntityAssociationAccount")))},directives:[S.e,S.f,M.a,Y.a,Z.t,S.d,Dt.a,Dt.g,Ae.a,O.c,T.a,o.J,o.u,o.v,k.c,w.b,o.c,o.E,o.o,o.t,o.w,Ut.a,k.j,Z.q,D.b],pipes:[m.d],styles:[".form-group[_ngcontent-%COMP%], .formType[_ngcontent-%COMP%]{display:flex}.formType[_ngcontent-%COMP%]{align-items:center;margin:10px;border-radius:4px;border:1px solid #ccc;position:relative;padding:10px}.formType-title[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;max-width:85%;text-overflow:ellipsis;z-index:1;font-size:10px;font-weight:700;background:#fff;position:absolute;top:-7px;left:10px;padding:0;margin:0;color:#135f7f}.formType[_ngcontent-%COMP%]    .mat-slide-toggle-label{color:#666;font-weight:700}.formType[_ngcontent-%COMP%]    .mat-radio-button, .formType[_ngcontent-%COMP%]    .mat-slide-toggle{opacity:.5;color:#666;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.formType[_ngcontent-%COMP%]    .mat-checked, .formType[_ngcontent-%COMP%]    .mat-radio-checked{opacity:1;color:#135f7f}.formType[_ngcontent-%COMP%]    .mat-checked .mat-slide-toggle-label{color:#135f7f}.formType[_ngcontent-%COMP%]    .mat-form-field-suffix{color:#f99830;font-size:15px;top:0}.ratio-1[_ngcontent-%COMP%]{flex:1}.ratio-2[_ngcontent-%COMP%]{flex:1;align-items:baseline}"]}),HC),$C=n("4ik+"),VC=n("/JYr"),NC=["adminMenuTemplate"];function JC(t,e){1&t&&(u.Zb(0,"mat-nav-list"),u.Zb(1,"h3",11),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"a",12),u.Ub(5,"mat-icon",13),u.Zb(6,"p",14),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(2),u.Tc(u.nc(3,2,"lang.actions")),u.Eb(5),u.Uc(" ",u.nc(8,4,"lang.add")," "))}function GC(t,e){1&t&&(u.Zb(0,"div",15),u.Ub(1,"mat-spinner",16),u.Yb())}function BC(t,e){if(1&t&&(u.Zb(0,"mat-header-cell",40),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=u.lc(2);u.Jb("hide-for-mobile",n.appService.getViewMode()),u.Eb(1),u.Tc(u.nc(2,3,"lang.label"))}}function WC(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.Jb("hide-for-mobile",a.appService.getViewMode()),u.Eb(1),u.Uc(" ",n.label," ")}}function qC(t,e){1&t&&(u.Zb(0,"mat-header-cell",41),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.linkedEntities")))}function XC(t,e){if(1&t&&(u.Zb(0,"span",44),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Tc(n)}}function KC(t,e){if(1&t&&(u.Zb(0,"mat-cell",42),u.Zb(1,"div"),u.Qc(2,XC,2,1,"span",43),u.Yb(),u.Yb()),2&t){var n=e.$implicit;u.Eb(2),u.sc("ngForOf",n.entitiesLabel)}}function tE(t,e){1&t&&u.Ub(0,"mat-header-cell",45)}function eE(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-cell",46),u.Zb(1,"button",47),u.hc("click",(function(t){u.Hc(n);var a=e.$implicit,i=u.lc(2);return t.stopPropagation(),i.deleteAccount(a.id)})),u.mc(2,"translate"),u.Ub(3,"mat-icon",48),u.Yb(),u.Yb()}2&t&&(u.Eb(1),u.tc("matTooltip",u.nc(2,1,"lang.delete")))}function nE(t,e){1&t&&u.Ub(0,"mat-header-row")}function aE(t,e){1&t&&(u.Ub(0,"mat-row",49),u.mc(1,"translate")),2&t&&(u.uc("routerLink","/administration/alfresco/",e.$implicit.id,""),u.tc("matTooltip",u.nc(1,2,"lang.view")))}function iE(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-card",17),u.Zb(1,"div",18),u.Zb(2,"div",19),u.Zb(3,"mat-form-field",20),u.Zb(4,"mat-label"),u.Sc(5),u.mc(6,"translate"),u.Yb(),u.Zb(7,"input",21),u.hc("ngModelChange",(function(t){return u.Hc(n),u.lc().alfrescoUrl=t}))("blur",(function(){return u.Hc(n),u.lc().saveUrl()})),u.Yb(),u.Yb(),u.Yb(),u.Zb(8,"div",22),u.Zb(9,"mat-form-field"),u.Ub(10,"input",23),u.mc(11,"translate"),u.Yb(),u.Yb(),u.Zb(12,"div",22),u.Ub(13,"mat-paginator",24,25),u.Yb(),u.Yb(),u.Zb(15,"mat-table",26,27),u.Xb(17,28),u.Qc(18,BC,3,5,"mat-header-cell",29),u.Qc(19,WC,2,3,"mat-cell",30),u.Wb(),u.Xb(20,31),u.Qc(21,qC,3,3,"mat-header-cell",32),u.Qc(22,KC,3,1,"mat-cell",33),u.Wb(),u.Xb(23,34),u.Qc(24,tE,1,0,"mat-header-cell",35),u.Qc(25,eE,4,3,"mat-cell",36),u.Wb(),u.Qc(26,nE,1,0,"mat-header-row",37),u.Qc(27,aE,2,4,"mat-row",38),u.Yb(),u.Zb(28,"div",39),u.Sc(29),u.mc(30,"translate"),u.Yb(),u.Yb()}if(2&t){var a=u.lc();u.Eb(5),u.Tc(u.nc(6,13,"lang.alfrescoAPI")),u.Eb(2),u.sc("ngModel",a.alfrescoUrl)("title",a.alfrescoUrl),u.Eb(3),u.tc("placeholder",u.nc(11,15,"lang.filterBy")),u.sc("formControl",a.adminService.getFilterField()),u.Eb(3),u.sc("length",100)("hidePageSize",!0)("pageSize",10),u.Eb(2),u.sc("dataSource",a.adminService.getDataSource()),u.Eb(11),u.sc("matHeaderRowDef",a.displayedColumns),u.Eb(1),u.sc("matRowDefColumns",a.displayedColumns),u.Eb(2),u.Vc(" ",a.accounts.length," ",u.nc(30,17,"lang.accounts"),"")}}var rE,cE=((rE=function(){function t(e,n,a,i,r,c,o,s,l){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.headerService=i,this.appService=r,this.dialog=c,this.functions=o,this.adminService=s,this.viewContainerRef=l,this.alfrescoUrl="",this.accounts=[],this.loading=!1,this.displayedColumns=["label","entitiesLabel","actions"],this.filterColumns=["label","entitiesLabel"]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.alfresco")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!0,this.http.get("../rest/alfresco/configuration").pipe(Object($C.filter)((function(e){return!t.functions.empty(e.configuration)})),Object(wt.tap)((function(e){t.alfrescoUrl=e.configuration.uri}))).subscribe(),this.http.get("../rest/alfresco/accounts").subscribe((function(e){t.accounts=e.accounts,t.loading=!1,setTimeout((function(){t.adminService.setDataSource("admin_alfresco",t.accounts,t.sort,t.paginator,t.filterColumns)}),0)}))}},{key:"deleteAccount",value:function(t){var e=this;this.dialogRef=this.dialog.open(W.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete"),msg:this.translate.instant("lang.confirmAction")}}),this.dialogRef.afterClosed().pipe(Object($C.filter)((function(t){return"ok"===t})),Object(VC.exhaustMap)((function(){return e.http.delete("../rest/alfresco/accounts/"+t)})),Object(wt.tap)((function(){e.accounts=e.accounts.filter((function(e){return e.id!==t})),setTimeout((function(){e.adminService.setDataSource("admin_alfresco",e.accounts,e.sort,e.paginator,e.filterColumns)}),0),e.notify.success(e.translate.instant("lang.accountDeleted"))})),Object(G.catchError)((function(t){return e.notify.handleSoftErrors(t),Object(J.of)(!1)}))).subscribe()}},{key:"saveUrl",value:function(){var t=this;this.http.put("../rest/alfresco/configuration",{uri:this.alfrescoUrl}).pipe(Object(G.catchError)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}}]),t}()).\u0275fac=function(t){return new(t||rE)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a),u.Tb(z.b),u.Tb(C.a),u.Tb(It),u.Tb(u.R))},rE.\u0275cmp=u.Nb({type:rE,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(NC,!0),u.ad(V.a,!0),u.ad(N.a,!0)),2&t&&(u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.paginator=n.first),u.Cc(n=u.ic())&&(e.sort=n.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/alfresco/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-12"],["appearance","outline"],["matInput","","required","","name","accountId","id","accountId","type","text","placeholder","https://alfresco/api/",3,"ngModel","title","ngModelChange","blur"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSortDisableClear","","matSort","",3,"dataSource"],["table",""],["matColumnDef","label"],["mat-sort-header","",3,"hide-for-mobile",4,"matHeaderCellDef"],[3,"hide-for-mobile",4,"matCellDef"],["matColumnDef","entitiesLabel"],["mat-sort-header","","style","flex: 2",4,"matHeaderCellDef"],["style","flex: 2",4,"matCellDef"],["matColumnDef","actions"],["style","flex:none",4,"matHeaderCellDef"],["style","flex:none;justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header",""],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],["class","label",4,"ngFor","ngForOf"],[1,"label"],[2,"flex","none"],[2,"flex","none","justify-content","flex-end"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,JC,9,6,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,GC,2,0,"div",9),u.Qc(14,iE,31,19,"mat-card",10),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading))},directives:[S.e,S.f,M.a,Y.a,Z.t,Dt.h,Dt.g,Dt.d,r.f,Ut.a,Dt.c,I.k,O.c,T.a,k.c,k.g,w.b,o.c,o.E,o.t,o.w,o.i,V.a,B.n,N.a,B.c,B.i,B.b,B.k,B.m,B.h,N.b,B.a,Z.s,D.b,Ft.b,B.j,B.l,r.d],pipes:[m.d],styles:[".label[_ngcontent-%COMP%]{white-space:break-spaces;background:#135f7f;margin:5px}"]}),rE),oE=n("OigG"),sE=["appContactDetail"];function lE(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",13),u.hc("click",(function(){u.Hc(n);var t=u.lc().$implicit,e=u.lc();return e.toggleExcludeContact(t),e.mergeContact()})),u.Sc(1),u.mc(2,"translate"),u.Yb()}2&t&&(u.Eb(1),u.Tc(u.nc(2,1,"lang.exludeContact")))}function dE(t,e){1&t&&u.Ub(0,"i",14)}function bE(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",15),u.hc("click",(function(){u.Hc(n);var t=u.lc().$implicit,e=u.lc();return e.toggleExcludeContact(t),e.mergeContact()})),u.Ub(1,"i",16),u.Sc(2),u.mc(3,"translate"),u.Yb()}2&t&&(u.Eb(2),u.Uc("\xa0",u.nc(3,1,"lang.contactExcluded"),""))}function uE(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",7),u.Zb(1,"app-contact-detail",8,9),u.hc("afterSelectedEvent",(function(){u.Hc(n);var t=e.index;return u.lc().mergeContact(t)}))("afterDeselectedEvent",(function(t){u.Hc(n);var a=e.index;return u.lc().resetContact(t,a)})),u.Yb(),u.Qc(3,lE,3,3,"button",10),u.Qc(4,dE,1,0,"i",11),u.Qc(5,bE,4,3,"button",12),u.Yb()}if(2&t){var a=e.$implicit,i=e.index,r=u.lc();u.Eb(1),u.Jb("merged",r.contactSelected!==i&&null!==r.contactSelected&&-1===r.contactsExcluded.indexOf(a.id)),u.sc("contact",a)("selectable",r.contactSelected===i||null===r.contactSelected),u.Eb(2),u.sc("ngIf",r.contactSelected!==i&&null!==r.contactSelected&&-1===r.contactsExcluded.indexOf(a.id)),u.Eb(1),u.sc("ngIf",r.contactSelected!==i&&null!==r.contactSelected&&r.contactsExcluded.indexOf(a.id)>-1),u.Eb(1),u.sc("ngIf",r.contactSelected!==i&&null!==r.contactSelected&&r.contactsExcluded.indexOf(a.id)>-1)}}var mE,fE=((mE=function(){function t(e,n,a,i,r,c,o){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.data=i,this.dialogRef=r,this.headerService=c,this.functionsService=o,this.loading=!1,this.contactSelected=null,this.contactsExcluded=[]}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"mergeContact",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.contactSelected;this.appContactDetail.toArray()[e].resetContact(),this.appContactDetail.toArray()[e].contact.selected=!0,this.functionsService.empty(e)||(this.contactSelected=e),this.data.duplicate.forEach((function(n,a){-1===t.contactsExcluded.indexOf(t.appContactDetail.toArray()[a].getContactInfo().id)&&Object.keys(t.appContactDetail.toArray()[a].getContactInfo()).forEach((function(n){"customFields"!==n||t.functionsService.empty(t.appContactDetail.toArray()[a].getContactInfo()[n])?"civility"!==n||t.functionsService.empty(t.appContactDetail.toArray()[a].getContactInfo()[n].id)?t.functionsService.empty(t.appContactDetail.toArray()[e].getContactInfo()[n])&&t.appContactDetail.toArray()[e].getContactInfo()[n]!==t.appContactDetail.toArray()[a].getContactInfo()[n]&&t.appContactDetail.toArray()[e].setContactInfo(n,t.appContactDetail.toArray()[a].getContactInfo()[n]):t.appContactDetail.toArray()[e].setContactInfo(n,t.appContactDetail.toArray()[a].getContactInfo()[n]):t.appContactDetail.toArray()[a].getContactInfo()[n].forEach((function(a){0===t.appContactDetail.toArray()[e].getContactInfo()[n].filter((function(t){return t.label===a.label})).length&&t.appContactDetail.toArray()[e].setContactInfo(n,a)}))}))}))}},{key:"toggleExcludeContact",value:function(t){var e=this.contactsExcluded.indexOf(t.id);-1===e?this.contactsExcluded.push(t.id):this.contactsExcluded.splice(e,1)}},{key:"resetContact",value:function(t,e){this.contactSelected=null,this.appContactDetail.toArray()[e].resetContact()}},{key:"onSubmit",value:function(){var t=this;this.loading=!0;var e=this.data.duplicate.filter((function(e,n){return n===t.contactSelected})).map((function(t){return t.id}))[0],n=this.data.duplicate.filter((function(e,n){return n!==t.contactSelected})).filter((function(e,n){return-1===t.contactsExcluded.indexOf(e.id)})).map((function(t){return t.id}));this.http.put("../rest/contacts/".concat(e,"/merge"),{duplicates:n}).pipe(Object(d.a)((function(){t.dialogRef.close(n.length===t.data.duplicate.length-1?"removeAll":n)})),Object(Ct.a)((function(){return t.loading=!1})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}}]),t}()).\u0275fac=function(t){return new(t||mE)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(z.a),u.Tb(z.h),u.Tb(p.a),u.Tb(C.a))},mE.\u0275cmp=u.Nb({type:mE,selectors:[["app-manage-duplicate"]],viewQuery:function(t,e){var n;1&t&&u.ad(sE,!0),2&t&&u.Cc(n=u.ic())&&(e.appContactDetail=n)},decls:11,vars:12,consts:[[1,"mat-dialog-content-container"],["mat-dialog-content","",1,"contact-list-container"],["style","position: relative;",4,"ngFor","ngForOf"],[1,"divider-modal"],["mat-dialog-actions","",1,"actions"],["mat-raised-button","","mat-button","","color","primary",3,"disabled","click"],["mat-raised-button","","mat-button","",3,"mat-dialog-close"],[2,"position","relative"],[2,"height","100%",3,"contact","selectable","afterSelectedEvent","afterDeselectedEvent"],["appContactDetail",""],["mat-raised-button","","mat-button","","style","position: absolute;bottom: 0px;left: 50%;transform: translateX(-50%);",3,"click",4,"ngIf"],["class","fas fa-ban excludeLogo",4,"ngIf"],["mat-raised-button","","mat-button","","color","primary","style","position: absolute;bottom: 0px;left: 50%;transform: translateX(-50%);",3,"click",4,"ngIf"],["mat-raised-button","","mat-button","",2,"position","absolute","bottom","0px","left","50%","transform","translateX(-50%)",3,"click"],[1,"fas","fa-ban","excludeLogo"],["mat-raised-button","","mat-button","","color","primary",2,"position","absolute","bottom","0px","left","50%","transform","translateX(-50%)",3,"click"],[1,"fas","fa-ban"]],template:function(t,e){1&t&&(u.Zb(0,"div",0),u.Zb(1,"div",1),u.Qc(2,uE,6,7,"div",2),u.Yb(),u.Ub(3,"span",3),u.Zb(4,"div",4),u.Zb(5,"button",5),u.hc("click",(function(){return e.onSubmit()})),u.Sc(6),u.mc(7,"translate"),u.Yb(),u.Zb(8,"button",6),u.Sc(9),u.mc(10,"translate"),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(1),u.Jb("contact-list-container-1",1==e.data.duplicate.length)("contact-list-container-2",2==e.data.duplicate.length),u.Eb(1),u.sc("ngForOf",e.data.duplicate),u.Eb(3),u.sc("disabled",null===e.contactSelected||e.loading||e.contactsExcluded.length===e.data.duplicate.length-1),u.Eb(1),u.Tc(u.nc(7,8,"lang.merge")),u.Eb(3),u.Tc(u.nc(10,10,"lang.cancel")))},directives:[z.f,Z.s,z.c,D.b,z.d,oE.a,Z.t],pipes:[m.d],styles:[".merged[_ngcontent-%COMP%]{opacity:.5}.contact-list-container[_ngcontent-%COMP%]{padding:20px;display:grid;grid-template-columns:repeat(3,33%);grid-gap:10px}.contact-list-container-1[_ngcontent-%COMP%]{grid-template-columns:1fr}.contact-list-container-2[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.excludeLogo[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:80px;color:#8e3e52}"]}),mE),pE=n("vxfF"),gE=["adminMenuTemplate"];function hE(t,e){if(1&t&&(u.Zb(0,"a",19),u.Ub(1,"mat-icon",20),u.Zb(2,"p",21),u.Sc(3),u.Yb(),u.Yb()),2&t){var n=e.$implicit;u.Jb("active",n.current),u.sc("routerLink",n.route),u.Eb(1),u.Gb(n.icon),u.Eb(2),u.Uc(" ",n.label," ")}}function vE(t,e){if(1&t&&(u.Zb(0,"mat-nav-list"),u.Qc(1,hE,4,6,"a",18),u.Yb()),2&t){var n=u.lc();u.Eb(1),u.sc("ngForOf",n.subMenus)}}function yE(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-chip",31),u.hc("removed",(function(){u.Hc(n);var t=e.$implicit;return u.lc(2).removeCriteria(t)}))("click",(function(){u.Hc(n);var t=e.$implicit;return u.lc(2).removeCriteria(t)})),u.Sc(1),u.Ub(2,"mat-icon",32),u.Yb()}if(2&t){var a=e.$implicit;u.sc("removable",!0),u.Eb(1),u.Uc(" ",a.label," ")}}function CE(t,e){if(1&t){var n=u.ac();u.Zb(0,"div",22),u.Zb(1,"mat-accordion",23),u.Zb(2,"mat-expansion-panel",24),u.Zb(3,"mat-expansion-panel-header"),u.Zb(4,"mat-panel-title"),u.Sc(5),u.mc(6,"translate"),u.Yb(),u.Yb(),u.Zb(7,"plugin-select-search",25),u.hc("afterSelected",(function(t){return u.Hc(n),u.lc().addCriteria(t)})),u.Yb(),u.Ub(8,"mat-divider",26),u.Zb(9,"mat-chip-list",27),u.Qc(10,yE,3,2,"mat-chip",28),u.Yb(),u.Zb(11,"div",29),u.Zb(12,"button",30),u.hc("click",(function(){return u.Hc(n),u.lc().searchDuplicates()})),u.Sc(13),u.mc(14,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc();u.Eb(2),u.sc("expanded",a.openedSearchTool),u.Eb(3),u.Uc(" ",u.nc(6,9,"lang.criteriaSearch")," "),u.Eb(2),u.sc("label",a.translate.instant("lang.addCriteria"))("formControlSelect",a.addCriteriaSelect)("placeholderLabel",a.translate.instant("lang.addCriteria"))("datas",a.contactFields),u.Eb(3),u.sc("ngForOf",a.currentFieldsSearch),u.Eb(2),u.sc("disabled",0===a.currentFieldsSearch.length||a.isLoadingResults),u.Eb(1),u.Tc(u.nc(14,11,"lang.launchSearch"))}}function EE(t,e){1&t&&(u.Zb(0,"div",33),u.Zb(1,"em"),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Yb()),2&t&&(u.Eb(2),u.Tc(u.nc(3,1,"lang.noDuplicatesFound")))}var SE=function(t,e){return{value1:t,value2:e}};function ME(t,e){if(1&t&&(u.Zb(0,"div",34),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t){var n=u.lc();u.Eb(1),u.Uc(" ",u.oc(2,1,"lang.duplicatesContactDisplayed",u.Ac(4,SE,n.duplicatesContactsRealCount,n.duplicatesContactsCount))," ")}}function xE(t,e){if(1&t&&(u.Zb(0,"span",38),u.Sc(1),u.Yb()),2&t){var n=e.$implicit,a=u.lc(2);u.Eb(1),u.Uc(" ",a.getLabel(n)," ")}}function YE(t,e){if(1&t&&(u.Zb(0,"mat-list",15),u.Zb(1,"mat-list-item",35),u.Zb(2,"p",36),u.Qc(3,xE,2,1,"span",37),u.Yb(),u.Yb(),u.Yb()),2&t){var n=u.lc();u.Eb(2),u.Hb("contact-list-container-",n.displayedColumns.length,""),u.Eb(1),u.sc("ngForOf",n.displayedColumns)}}function ZE(t,e){if(1&t&&(u.Zb(0,"span",42),u.Sc(1),u.Yb()),2&t){var n=e.$implicit,a=u.lc().$implicit;u.Eb(1),u.Uc(" ",a[n]," ")}}function _E(t,e){if(1&t){var n=u.ac();u.Xb(0),u.Zb(1,"mat-list-item",39),u.hc("mouseover",(function(){u.Hc(n);var t=e.$implicit;return u.lc().selectDuplicates(t.duplicateId)}))("click",(function(){u.Hc(n);var t=e.$implicit;return u.lc().manageDuplicate(t.duplicateId)})),u.Zb(2,"p",40),u.Qc(3,ZE,2,1,"span",41),u.Yb(),u.Yb(),u.Wb()}if(2&t){var a=e.$implicit,i=e.index,r=u.lc();u.Eb(1),u.Jb("odd",void 0!==r.duplicatesContacts[i+1]&&a.odd!==r.duplicatesContacts[i+1].odd)("hovered",a.duplicateId===r.currentDuplicateId),u.Eb(1),u.Hb("contact-list-container-",r.displayedColumns.length,""),u.Eb(1),u.sc("ngForOf",r.displayedColumns)}}function kE(t,e){1&t&&(u.Zb(0,"div",43),u.Ub(1,"mat-spinner"),u.Yb())}var wE,OE=((wE=function(){function t(e,n,a,i,r,c,s,l,d,b){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.headerService=i,this.appService=r,this.dialog=c,this.functions=s,this.sortPipe=l,this.viewContainerRef=d,this.functionsService=b,this.loading=!0,this.subMenus=[{icon:"fa fa-book",route:"/administration/contacts/list",label:this.translate.instant("lang.contactsList"),current:!1},{icon:"fa fa-code",route:"/administration/contacts/contactsCustomFields",label:this.translate.instant("lang.customFieldsAdmin"),current:!1},{icon:"fa fa-cog",route:"/administration/contacts/contacts-parameters",label:this.translate.instant("lang.contactsParameters"),current:!1},{icon:"fa fa-users",route:"/administration/contacts/contacts-groups",label:this.translate.instant("lang.contactsGroups"),current:!1},{icon:"fas fa-magic",route:"/administration/contacts/duplicates",label:this.translate.instant("lang.duplicatesContactsAdmin"),current:!0}],this.contactFields=[],this.addCriteriaSelect=new o.h,this.currentFieldsSearch=[],this.currentDuplicateId=null,this.duplicatesContacts=[],this.duplicatesContactsCount=-1,this.duplicatesContactsRealCount=0,this.displayedColumns=["companyLastname","lastname","company"],this.isLoadingResults=!1,this.openedSearchTool=!0}return _createClass(t,[{key:"ngOnInit",value:function(){return Object(yt.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.headerService.setHeader(this.translate.instant("lang.contactsDuplicates"),"",""),t.next=4,this.getContactFields();case 4:this.setDefaultSearchCriteria(),this.loading=!1;case 6:case"end":return t.stop()}}),t,this)})))}},{key:"getContactFields",value:function(){var t=this;return new Promise((function(e,n){t.http.get("../rest/contactsParameters").pipe(Object(l.a)((function(e){var n=/contactCustomField_[.]*/g;return e.contactsParameters=e.contactsParameters.filter((function(t){return null===t.identifier.match(n)})).map((function(e){return Object.assign(Object.assign({},e),{label:t.translate.instant("lang.contactsParameters_"+e.identifier)})})),e.contactsParameters})),Object(d.a)((function(e){t.contactFields=e})),Object(X.a)((function(){return t.http.get("../rest/contactsCustomFields")})),Object(l.a)((function(t){return t.customFields=t.customFields.map((function(t){return Object.assign(Object.assign({},t),{id:"contactCustomField_"+t.id,identifier:"contactCustomField_"+t.id})})),t.customFields})),Object(d.a)((function(n){t.contactFields=t.contactFields.concat(n),t.contactFields=t.sortPipe.transform(t.contactFields,"label"),e(!0)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}))}},{key:"setDefaultSearchCriteria",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["lastname","company"];this.contactFields.filter((function(t){return e.indexOf(t.identifier)>-1})).forEach((function(e){e.disabled=!0,t.currentFieldsSearch.push(e)}))}},{key:"addCriteria",value:function(t){var e=this;this.contactFields.filter((function(e){return e.id===t})).forEach((function(t){t.disabled=!0,e.currentFieldsSearch.push(t)})),this.addCriteriaSelect.reset()}},{key:"removeCriteria",value:function(t){var e=this;this.contactFields.forEach((function(n,a){n.id===t.id&&(e.currentFieldsSearch=e.currentFieldsSearch.filter((function(e){return e.id!==t.id})),n.disabled=!1)}))}},{key:"searchDuplicates",value:function(){var t=this;this.duplicatesContacts=[],this.isLoadingResults=!0;var e="?criteria[]="+this.currentFieldsSearch.map((function(t){return t.identifier})).join("&criteria[]=");this.http.get("../rest/duplicatedContacts"+e).pipe(Object(l.a)((function(e){return t.duplicatesContactsRealCount=e.realCount,t.duplicatesContactsCount=e.returnedCount,e.contacts.forEach((function(n,a){n.odd=0===a||(void 0!==e.contacts[a-1]&&e.contacts[a-1].duplicateId===n.duplicateId?e.contacts[a-1].odd:!e.contacts[a-1].odd);var i=[];i.push(n.company),i.push(n.lastname),n.companyLastname=i.filter((function(e){return!t.functions.empty(e)})).join(" / "),t.functionsService.empty(n.customFields)||Object.keys(n.customFields).forEach((function(t){n[t]=n.customFields[t]}))})),e.contacts})),Object(d.a)((function(e){t.duplicatesContacts=e,setTimeout((function(){var e=/contactCustomField_[.]*/g;t.displayedColumns=t.currentFieldsSearch.filter((function(t){return null===t.identifier.match(e)})).map((function(t){return t.identifier})).concat(t.currentFieldsSearch.filter((function(t){return null!==t.identifier.match(e)})).map((function(t){return t.identifier.replace("contactCustomField_","")}))),t.displayedColumns.unshift("companyLastname"),t.openedSearchTool=!1}),0)})),Object(Ct.a)((function(){return t.isLoadingResults=!1})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"selectDuplicates",value:function(t){this.currentDuplicateId=t}},{key:"manageDuplicate",value:function(t){var e=this;this.dialog.open(fE,{panelClass:"maarch-modal",data:{duplicate:this.duplicatesContacts.filter((function(e){return e.duplicateId===t})).map((function(t){return{id:t.id,type:"contact"}}))}}).afterClosed().pipe(Object(q.a)((function(t){return!e.functionsService.empty(t)})),Object(d.a)((function(n){e.notify.success(e.translate.instant("lang.contactsMerged")),e.duplicatesContactsCount--,e.duplicatesContactsRealCount--,e.duplicatesContacts=e.duplicatesContacts.filter("removeAll"!==n?function(t){return-1===n.indexOf(t.id)}:function(e){return e.duplicateId!==t})})),Object(b.a)((function(t){return e.notify.handleSoftErrors(t),Object(J.of)(!1)}))).subscribe()}},{key:"getLabel",value:function(t){return void 0!==this.translate.instant("lang.contactsParameters_"+t)?this.translate.instant("lang.contactsParameters_"+t):void 0!==this.translate.instant("lang."+t)?this.translate.instant("lang."+t):this.contactFields.filter((function(e){return e.id==="contactCustomField_"+t}))[0].label}}]),t}()).\u0275fac=function(t){return new(t||wE)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a),u.Tb(z.b),u.Tb(C.a),u.Tb(U.a),u.Tb(u.R),u.Tb(C.a))},wE.\u0275cmp=u.Nb({type:wE,selectors:[["app-contact-duplicate"]],viewQuery:function(t,e){var n;1&t&&u.Oc(gE,!0),2&t&&u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first)},features:[u.Db([U.a])],decls:22,vars:12,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content",2,"display","flex","flex-direction","column","overflow","hidden"],["class","criteria-container",4,"ngIf"],["style","padding: 10px;text-align: center;color: rgba(0,0,0,0.54);",4,"ngIf"],["style","padding: 10px;text-align: right;color: rgba(0,0,0,0.54);",4,"ngIf"],["role","list",4,"ngIf"],[2,"position","relative","height","100%","overflow","auto"],["itemSize","48",1,"example-viewport"],["role","list"],[4,"cdkVirtualFor","cdkVirtualForOf"],["class","example-loading-shade",4,"ngIf"],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],["mat-line",""],[1,"criteria-container"],[2,"margin-bottom","10px"],[3,"expanded"],[3,"label","formControlSelect","placeholderLabel","datas","afterSelected"],[2,"margin-top","20px","margin-bottom","20px"],[1,"checkbox-selected-list"],["selected","",3,"removable","removed","click",4,"ngFor","ngForOf"],[1,"col-md-12","text-center"],["mat-raised-button","","color","primary","type","button",3,"disabled","click"],["selected","",3,"removable","removed","click"],["matChipRemove","",1,"fa","fa-times-circle"],[2,"padding","10px","text-align","center","color","rgba(0,0,0,0.54)"],[2,"padding","10px","text-align","right","color","rgba(0,0,0,0.54)"],["role","listitem"],["mat-line","",2,"font-size","80%","display","grid","grid-gap","10px"],["class","primary","style","overflow: hidden;text-overflow: ellipsis;",4,"ngFor","ngForOf"],[1,"primary",2,"overflow","hidden","text-overflow","ellipsis"],["role","listitem",2,"cursor","pointer","font-size","14px",3,"mouseover","click"],["mat-line","",2,"display","grid","grid-gap","10px","align-items","center"],["style","overflow: hidden;text-overflow: ellipsis;",4,"ngFor","ngForOf"],[2,"overflow","hidden","text-overflow","ellipsis"],[1,"example-loading-shade"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,vE,2,1,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,CE,15,13,"div",9),u.Qc(14,EE,4,3,"div",10),u.Qc(15,ME,3,7,"div",11),u.Qc(16,YE,4,4,"mat-list",12),u.Zb(17,"div",13),u.Zb(18,"cdk-virtual-scroll-viewport",14),u.Zb(19,"mat-list",15),u.Qc(20,_E,4,8,"ng-container",16),u.Yb(),u.Yb(),u.Qc(21,kE,2,0,"div",17),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",!e.loading),u.Eb(1),u.sc("ngIf",0===e.duplicatesContactsCount),u.Eb(1),u.sc("ngIf",e.duplicatesContacts.length>0),u.Eb(1),u.sc("ngIf",e.duplicatesContacts.length>0),u.Eb(4),u.sc("cdkVirtualForOf",e.duplicatesContacts),u.Eb(1),u.sc("ngIf",e.isLoadingResults))},directives:[S.e,S.f,M.a,Y.a,Z.t,pE.e,pE.a,Dt.a,pE.d,Dt.h,Z.s,Dt.d,r.f,Ut.a,Dt.c,I.k,Qe.a,Qe.c,Qe.g,Qe.h,Cl.a,_.a,er.d,D.b,er.a,er.e,O.c],pipes:[m.d],styles:[".example-viewport[_ngcontent-%COMP%]{flex:1;width:100%;background:#fff;height:100%}.example-viewport[_ngcontent-%COMP%]    .cdk-virtual-scroll-content-wrapper{overflow:hidden;text-overflow:ellipsis;width:100%}.active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}.criteria-container[_ngcontent-%COMP%]{margin:20px}.hovered[_ngcontent-%COMP%]{background:rgba(0,0,0,.04)!important;transition:all .3s}.odd[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.12)}.contact-list-container-1[_ngcontent-%COMP%]{grid-template-columns:1fr}.contact-list-container-2[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.contact-list-container-3[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}.contact-list-container-4[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}.contact-list-container-5[_ngcontent-%COMP%]{grid-template-columns:repeat(5,1fr)}"]}),wE),TE=["adminMenuTemplate"];function IE(t,e){if(1&t&&(u.Zb(0,"a",16),u.Ub(1,"mat-icon",17),u.Zb(2,"p",14),u.Sc(3),u.Yb(),u.Yb()),2&t){var n=e.$implicit;u.Jb("active",n.current),u.sc("routerLink",n.route),u.Eb(1),u.Gb(n.icon),u.Eb(2),u.Uc(" ",n.label," ")}}function DE(t,e){if(1&t&&(u.Zb(0,"mat-nav-list"),u.Zb(1,"h3",11),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"a",12),u.Ub(5,"mat-icon",13),u.Zb(6,"p",14),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Ub(9,"mat-divider"),u.Zb(10,"mat-nav-list"),u.Qc(11,IE,4,6,"a",15),u.Yb()),2&t){var n=u.lc();u.Eb(2),u.Tc(u.nc(3,3,"lang.actions")),u.Eb(5),u.Uc(" ",u.nc(8,5,"lang.add")," "),u.Eb(4),u.sc("ngForOf",n.subMenus)}}function UE(t,e){1&t&&(u.Zb(0,"div",18),u.Ub(1,"mat-spinner",19),u.Yb())}function PE(t,e){1&t&&(u.Zb(0,"mat-header-cell",39),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc("",u.nc(2,1,"lang.coclicoNumber")," "))}function FE(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.accountNumber," ")}}function LE(t,e){1&t&&(u.Zb(0,"mat-header-cell",39),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc(" ",u.nc(2,1,"lang.label")," "))}function jE(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.label," ")}}function RE(t,e){1&t&&(u.Zb(0,"mat-header-cell",39),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc(" ",u.nc(2,1,"lang.postOffice")," "))}function QE(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.postOfficeLabel," ")}}function AE(t,e){1&t&&u.Ub(0,"mat-header-cell")}function HE(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-cell",40),u.Zb(1,"button",41),u.hc("click",(function(t){u.Hc(n);var a=e.$implicit,i=u.lc(2);return t.stopPropagation(),i.delete(a)})),u.mc(2,"translate"),u.Ub(3,"mat-icon",42),u.Yb(),u.Yb()}2&t&&(u.Eb(1),u.tc("matTooltip",u.nc(2,1,"lang.delete")))}function zE(t,e){1&t&&u.Ub(0,"mat-header-row")}function $E(t,e){1&t&&(u.Ub(0,"mat-row",43),u.mc(1,"translate")),2&t&&(u.uc("routerLink","/administration/issuingSites/",e.$implicit.id,""),u.tc("matTooltip",u.nc(1,2,"lang.view")))}function VE(t,e){if(1&t&&(u.Zb(0,"mat-card",20),u.Zb(1,"div",21),u.Zb(2,"div",22),u.Zb(3,"mat-form-field"),u.Ub(4,"input",23),u.mc(5,"translate"),u.Yb(),u.Yb(),u.Zb(6,"div",22),u.Ub(7,"mat-paginator",24,25),u.Yb(),u.Yb(),u.Zb(9,"mat-table",26,27),u.Xb(11,28),u.Qc(12,PE,3,3,"mat-header-cell",29),u.Qc(13,FE,2,1,"mat-cell",30),u.Wb(),u.Xb(14,31),u.Qc(15,LE,3,3,"mat-header-cell",29),u.Qc(16,jE,2,1,"mat-cell",30),u.Wb(),u.Xb(17,32),u.Qc(18,RE,3,3,"mat-header-cell",29),u.Qc(19,QE,2,1,"mat-cell",30),u.Wb(),u.Xb(20,33),u.Qc(21,AE,1,0,"mat-header-cell",34),u.Qc(22,HE,4,3,"mat-cell",35),u.Wb(),u.Qc(23,zE,1,0,"mat-header-row",36),u.Qc(24,$E,2,4,"mat-row",37),u.Yb(),u.Zb(25,"div",38),u.Sc(26),u.mc(27,"translate"),u.Yb(),u.Yb()),2&t){var n=u.lc();u.Eb(4),u.tc("placeholder",u.nc(5,10,"lang.filterBy")),u.sc("formControl",n.adminService.getFilterField()),u.Eb(3),u.sc("length",100)("hidePageSize",!0)("pageSize",10),u.Eb(2),u.sc("dataSource",n.adminService.getDataSource()),u.Eb(14),u.sc("matHeaderRowDef",n.displayedColumns),u.Eb(1),u.sc("matRowDefColumns",n.displayedColumns),u.Eb(2),u.Vc(" ",n.data.length," ",u.nc(27,12,"lang.issuingSites"),"")}}var NE,JE=((NE=function(){function t(e,n,a,i,r,c,o,s,l){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.headerService=i,this.appService=r,this.functions=c,this.adminService=o,this.viewContainerRef=s,this.dialog=l,this.subMenus=[{icon:"fas fa-dolly-flatbed",route:"/administration/registeredMails",label:this.translate.instant("lang.registeredMailNumberRanges"),current:!1},{icon:"fas fa-warehouse",route:"/administration/issuingSites",label:this.translate.instant("lang.issuingSites"),current:!0}],this.parameters={},this.loading=!0,this.data=[],this.displayedColumns=["accountNumber","label","postOfficeLabel","actions"],this.filterColumns=["accountNumber","label","postOfficeLabel"]}return _createClass(t,[{key:"ngOnInit",value:function(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.issuingSites")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!1,this.getData()}},{key:"getData",value:function(){var t=this;this.data=[],this.http.get("../rest/registeredMail/sites").pipe(Object(wt.tap)((function(e){t.data=e.sites,t.loading=!1,setTimeout((function(){t.adminService.setDataSource("admin_regitered_mail_issuing_site",t.data,t.sort,t.paginator,t.filterColumns)}),0)})),Object(G.catchError)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"delete",value:function(t){var e=this;this.dialog.open(W.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete"),msg:this.translate.instant("lang.confirmAction")}}).afterClosed().pipe(Object(q.a)((function(t){return"ok"===t})),Object(X.a)((function(){return e.http.delete("../rest/registeredMail/sites/"+t.id)})),Object(wt.tap)((function(){e.data=e.data.filter((function(e){return e.id!==t.id})),setTimeout((function(){e.adminService.setDataSource("admin_regitered_mail_issuing_site",e.data,e.sort,e.paginator,e.filterColumns)}),0),e.notify.success(e.translate.instant("lang.issuingSiteDeleted"))})),Object(G.catchError)((function(t){return e.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe()}}]),t}()).\u0275fac=function(t){return new(t||NE)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a),u.Tb(C.a),u.Tb(It),u.Tb(u.R),u.Tb(z.b))},NE.\u0275cmp=u.Nb({type:NE,selectors:[["app-issuing-site-list"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(TE,!0),u.ad(V.a,!0),u.ad(N.a,!0)),2&t&&(u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.paginator=n.first),u.Cc(n=u.ic())&&(e.sort=n.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/issuingSites/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","accountNumber"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","label"],["matColumnDef","postOfficeLabel"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header",""],[2,"justify-content","flex-end"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,DE,12,7,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,UE,2,0,"div",9),u.Qc(14,VE,28,14,"mat-card",10),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading))},directives:[S.e,S.f,M.a,Y.a,Z.t,Dt.h,Dt.g,Dt.d,r.f,Ut.a,Dt.c,I.k,_.a,Z.s,O.c,T.a,k.c,w.b,o.c,o.t,o.i,V.a,B.n,N.a,B.c,B.i,B.b,B.k,B.m,B.h,N.b,B.a,D.b,Ft.b,B.j,B.l,r.d],pipes:[m.d],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}"]}),NE),GE=["maarchTree"];function BE(t,e){1&t&&(u.Zb(0,"div",15),u.Ub(1,"mat-spinner",16),u.Yb())}function WE(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",49),u.hc("click",(function(){u.Hc(n);var t=e.$implicit;return u.lc(2).addressBANCurrentDepartment=t})),u.Sc(1),u.Yb()}if(2&t){var a=e.$implicit;u.Eb(1),u.Tc(a)}}function qE(t,e){if(1&t&&(u.Zb(0,"mat-option",50),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n),u.Eb(1),u.Uc(" ",n.address," ")}}function XE(t,e){if(1&t&&(u.Xb(0),u.Qc(1,qE,2,2,"mat-option",46),u.mc(2,"async"),u.Wb()),2&t){var n=u.lc(2);u.Eb(1),u.sc("ngForOf",u.nc(2,1,n.addressBANFilteredResult))}}function KE(t,e){if(1&t&&u.Ub(0,"mat-option",51),2&t){var n=u.lc(2);u.sc("innerHTML",n.addressBANInfo,u.Ic)}}function tS(t,e){1&t&&(u.Zb(0,"mat-option",52),u.Ub(1,"mat-spinner",53),u.Yb())}function eS(t,e){if(1&t&&(u.Zb(0,"mat-option",50),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.sc("value",n),u.Eb(1),u.Uc(" ",n," ")}}function nS(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-card",17),u.Zb(1,"form",18),u.hc("ngSubmit",(function(){return u.Hc(n),u.lc().onSubmit()})),u.Zb(2,"div"),u.Zb(3,"mat-form-field"),u.Zb(4,"mat-label"),u.Sc(5),u.mc(6,"translate"),u.Yb(),u.Ub(7,"input",19),u.Yb(),u.Zb(8,"mat-form-field"),u.Zb(9,"mat-label"),u.Sc(10),u.mc(11,"translate"),u.Yb(),u.Ub(12,"input",20),u.Yb(),u.Zb(13,"mat-form-field"),u.Zb(14,"mat-label"),u.Sc(15),u.mc(16,"translate"),u.Yb(),u.Ub(17,"input",21),u.Yb(),u.Zb(18,"div",22),u.Zb(19,"div",23),u.Sc(20),u.mc(21,"translate"),u.Yb(),u.Zb(22,"mat-form-field",24),u.Zb(23,"button",25),u.hc("click",(function(t){return u.Hc(n),t.stopPropagation()})),u.Sc(24),u.Ub(25,"i",26),u.Yb(),u.Zb(26,"mat-menu",null,27),u.Qc(28,WE,2,1,"button",28),u.Yb(),u.Ub(29,"mat-icon",29),u.Zb(30,"input",30,31),u.hc("click",(function(t){return u.Hc(n),t.stopPropagation()}))("focus",(function(){return u.Hc(n),u.lc().resetAutocompleteAddressBan()})),u.Yb(),u.Zb(32,"mat-autocomplete",32,33),u.hc("optionSelected",(function(t){return u.Hc(n),u.lc().selectAddressBan(t)})),u.Qc(34,XE,3,3,"ng-container",34),u.Qc(35,KE,1,1,"mat-option",35),u.Qc(36,tS,2,0,"mat-option",36),u.Yb(),u.Yb(),u.Zb(37,"mat-form-field"),u.Zb(38,"mat-label"),u.Sc(39),u.mc(40,"translate"),u.Yb(),u.Ub(41,"input",37),u.Yb(),u.Zb(42,"mat-form-field"),u.Zb(43,"mat-label"),u.Sc(44),u.mc(45,"translate"),u.Yb(),u.Ub(46,"input",38),u.Yb(),u.Zb(47,"mat-form-field"),u.Zb(48,"mat-label"),u.Sc(49),u.mc(50,"translate"),u.Yb(),u.Ub(51,"input",39),u.Yb(),u.Zb(52,"mat-form-field"),u.Zb(53,"mat-label"),u.Sc(54),u.mc(55,"translate"),u.Yb(),u.Ub(56,"input",40),u.Yb(),u.Zb(57,"mat-form-field"),u.Zb(58,"mat-label"),u.Sc(59),u.mc(60,"translate"),u.Yb(),u.Ub(61,"input",41),u.Yb(),u.Zb(62,"mat-form-field"),u.Zb(63,"mat-label"),u.Sc(64),u.mc(65,"translate"),u.Yb(),u.Ub(66,"input",42),u.Yb(),u.Zb(67,"mat-form-field"),u.Zb(68,"mat-label"),u.Sc(69),u.mc(70,"translate"),u.Yb(),u.Ub(71,"input",43,31),u.Zb(73,"mat-autocomplete",44,45),u.hc("optionSelected",(function(t){return u.Hc(n),u.lc().adminFormGroup.controls.addressCountry.setValue(t.option.value)})),u.Qc(75,eS,2,2,"mat-option",46),u.mc(76,"async"),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(77,"div",47),u.Zb(78,"button",48),u.Sc(79),u.mc(80,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.Dc(27),i=u.Dc(33),r=u.Dc(74),c=u.lc();u.Eb(1),u.sc("formGroup",c.adminFormGroup),u.Eb(4),u.Tc(u.nc(6,26,"lang.siteName")),u.Eb(5),u.Tc(u.nc(11,28,"lang.coclicoNumber")),u.Eb(5),u.Tc(u.nc(16,30,"lang.postOffice")),u.Eb(5),u.Uc(" ",u.nc(21,32,"lang.address")," "),u.Eb(3),u.sc("matMenuTriggerFor",a)("title",c.translate.instant("lang.targetDepartment")),u.Eb(1),u.Uc(" ",c.addressBANCurrentDepartment,"\xa0"),u.Eb(4),u.sc("ngForOf",c.departmentList),u.Eb(2),u.sc("placeholder",c.translate.instant("lang.searchAddressBan"))("formControl",c.addressBANControl)("matAutocomplete",i),u.Eb(4),u.sc("ngIf",c.addressBANResult.length>0&&!c.addressBANLoading),u.Eb(1),u.sc("ngIf",0===c.addressBANResult.length&&!c.addressBANLoading),u.Eb(1),u.sc("ngIf",c.addressBANLoading),u.Eb(3),u.Tc(u.nc(40,34,"lang.contactsParameters_addressAdditional1")),u.Eb(5),u.Tc(u.nc(45,36,"lang.contactsParameters_addressNumber")),u.Eb(5),u.Tc(u.nc(50,38,"lang.contactsParameters_addressStreet")),u.Eb(5),u.Tc(u.nc(55,40,"lang.contactsParameters_addressAdditional2")),u.Eb(5),u.Tc(u.nc(60,42,"lang.contactsParameters_addressPostcode")),u.Eb(5),u.Tc(u.nc(65,44,"lang.contactsParameters_addressTown")),u.Eb(5),u.Tc(u.nc(70,46,"lang.contactsParameters_addressCountry")),u.Eb(2),u.sc("matAutocomplete",r),u.Eb(4),u.sc("ngForOf",u.nc(76,48,c.countriesFilteredResult)),u.Eb(3),u.sc("disabled",!c.adminFormGroup.valid),u.Eb(1),u.Tc(u.nc(80,50,"lang.save"))}}var aS,iS=((aS=function(){function t(e,n,a,i,r,c,s,l,d){_classCallCheck(this,t),this.translate=e,this.http=n,this.route=a,this.router=i,this.notify=r,this.headerService=c,this.appService=s,this._formBuilder=l,this.latinisePipe=d,this.loading=!0,this.entities=[],this.countries=[],this.id=null,this.addressBANInfo="",this.addressBANMode=!0,this.addressBANControl=new o.h,this.addressBANLoading=!1,this.addressBANResult=[],this.addressBANCurrentDepartment="75",this.departmentList=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.route.params.subscribe((function(e){return Object(yt.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e.id){t.next=14;break}return this.creationMode=!0,this.headerService.setHeader(this.translate.instant("lang.issuingSiteCreation")),this.initBanSearch(),this.initAutocompleteAddressBan(),this.adminFormGroup=this._formBuilder.group({id:[null],label:["",o.H.required],postOfficeLabel:["",o.H.required],accountNumber:["",o.H.required],addressNumber:["",o.H.required],addressStreet:["",o.H.required],addressAdditional1:[""],addressAdditional2:[""],addressPostcode:["",o.H.required],addressTown:["",o.H.required],addressCountry:[""]}),this.getCountries(),this.initAutocompleteCountries(),this.loading=!1,t.next=11,this.getEntities();case 11:this.maarchTree.initData(this.entities),t.next=26;break;case 14:return this.id=e.id,this.creationMode=!1,this.headerService.setHeader(this.translate.instant("lang.issuingSiteModification")),this.initBanSearch(),this.initAutocompleteAddressBan(),t.next=21,this.getEntities();case 21:return t.next=23,this.getData();case 23:this.getCountries(),this.initAutocompleteCountries(),this.maarchTree.initData(this.entities);case 26:case"end":return t.stop()}}),t,this)})))}))}},{key:"getData",value:function(){var t=this;return new Promise((function(e){t.http.get("../rest/registeredMail/sites/"+t.id).pipe(Object(d.a)((function(n){t.adminFormGroup=t._formBuilder.group({id:[t.id],label:[n.site.label,o.H.required],postOfficeLabel:[n.site.postOfficeLabel,o.H.required],accountNumber:[n.site.accountNumber,o.H.required],addressNumber:[n.site.addressNumber,o.H.required],addressStreet:[n.site.addressStreet,o.H.required],addressAdditional1:[n.site.addressAdditional1],addressAdditional2:[n.site.addressAdditional2],addressPostcode:[n.site.addressPostcode,o.H.required],addressTown:[n.site.addressTown,o.H.required],addressCountry:[n.site.addressCountry],entities:[n.site.entities]}),t.entities=t.entities.map((function(t){return Object.assign(Object.assign({},t),{state:{opened:!0,selected:n.site.entities.indexOf(t.id)>-1}})})),e(!0),t.loading=!1})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}))}},{key:"initBanSearch",value:function(){var t=this;this.http.get("../rest/ban/availableDepartments").pipe(Object(d.a)((function(e){null!==e.default&&-1!==e.departments.indexOf(e.default.toString())&&(t.addressBANCurrentDepartment=e.default),t.departmentList=e.departments})),Object(b.a)((function(e){return t.notify.handleErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"initAutocompleteCountries",value:function(){var t=this;this.countriesFilteredResult=this.adminFormGroup.controls.addressCountry.valueChanges.pipe(Object(s.a)(""),Object(l.a)((function(e){return t._filter(e)})))}},{key:"_filter",value:function(t){var e=t.toLowerCase();return this.countries.filter((function(t){return t.toLowerCase().includes(e)}))}},{key:"initAutocompleteAddressBan",value:function(){var t=this;this.addressBANInfo=this.translate.instant("lang.autocompleteInfo"),this.addressBANResult=[],this.addressBANControl.valueChanges.pipe(Object(Ql.a)(300),Object(q.a)((function(t){return t.length>2})),Object(gm.a)(),Object(d.a)((function(){return t.addressBANLoading=!0})),Object(tu.a)((function(e){return t.http.get("../rest/autocomplete/banAddresses",{params:{address:e,department:t.addressBANCurrentDepartment}})})),Object(d.a)((function(e){t.addressBANInfo=0===e.length?t.translate.instant("lang.noAvailableValue"):"",t.addressBANResult=e,t.addressBANFilteredResult=Object(J.of)(t.addressBANResult),t.addressBANLoading=!1}))).subscribe()}},{key:"resetAutocompleteAddressBan",value:function(){this.addressBANResult=[],this.addressBANInfo=this.translate.instant("lang.autocompleteInfo")}},{key:"selectAddressBan",value:function(t){this.adminFormGroup.controls.addressNumber.setValue(t.option.value.number),this.adminFormGroup.controls.addressStreet.setValue(t.option.value.afnorName),this.adminFormGroup.controls.addressPostcode.setValue(t.option.value.postalCode),this.adminFormGroup.controls.addressTown.setValue(t.option.value.city),this.adminFormGroup.controls.addressCountry.setValue("FRANCE"),this.addressBANControl.setValue("")}},{key:"getEntities",value:function(){var t=this;return new Promise((function(e){t.http.get("../rest/entities").pipe(Object(l.a)((function(t){return t.entities=t.entities.map((function(t){return{text:t.entity_label,icon:t.icon,parent_id:t.parentSerialId,id:t.serialId,state:{opened:!0}}})),t.entities})),Object(d.a)((function(n){t.entities=n,e(!0)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}))}},{key:"getCountries",value:function(){var t=this;this.http.get("../rest/registeredMail/countries").pipe(Object(d.a)((function(e){t.countries=e.countries.map((function(e){return t.latinisePipe.transform(e.toUpperCase())}))})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"onSubmit",value:function(){var t=this,e={};Object.keys(this.adminFormGroup.controls).forEach((function(n){e[n]=t.adminFormGroup.controls[n].value})),e.entities=this.maarchTree.getSelectedNodes().map((function(t){return t.id})),this.creationMode?this.http.post("../rest/registeredMail/sites",e).subscribe((function(){t.notify.success(t.translate.instant("lang.issuingSiteAdded")),t.router.navigate(["/administration/issuingSites"])}),(function(e){t.notify.handleSoftErrors(e)})):this.http.put("../rest/registeredMail/sites/"+this.id,e).subscribe((function(){t.notify.success(t.translate.instant("lang.issuingSiteUpdated")),t.router.navigate(["/administration/issuingSites"])}),(function(e){t.notify.handleSoftErrors(e)}))}}]),t}()).\u0275fac=function(t){return new(t||aS)(u.Tb(m.e),u.Tb(f.b),u.Tb(r.a),u.Tb(r.c),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a),u.Tb(o.g),u.Tb(v.c))},aS.\u0275cmp=u.Nb({type:aS,selectors:[["app-issuing-site"]],viewQuery:function(t,e){var n;1&t&&u.Oc(GE,!0),2&t&&u.Cc(n=u.ic())&&(e.maarchTree=n.first)},decls:22,vars:14,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["fixedTopGap","56","position","end",2,"overflow-x","hidden","width","400px",3,"mode","fixedInViewport","opened"],["snav2",""],["mat-subheader",""],[2,"padding","10px"],["maarchTree",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[2,"display","contents",3,"formGroup","ngSubmit"],["matInput","","formControlName","label"],["type","text","pattern","[0-9]+","maxlength","10","matInput","","formControlName","accountNumber"],["matInput","","formControlName","postOfficeLabel"],[1,"formType","ratio-1","col-sm-12"],[1,"formType-title"],["appearance","outline",1,"smallInput"],["mat-button","","matSuffix","",3,"matMenuTriggerFor","title","click"],[1,"fa","fa-chevron-down"],["menuDep","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["color","primary","matPrefix","",1,"fa","fa-search",2,"font-size","15px"],["type","text","matInput","","maxlength","128",3,"placeholder","formControl","matAutocomplete","click","focus"],["autoCompleteInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[4,"ngIf"],["class","autoCompleteInfoResult smallInputInfo","disabled","",3,"innerHTML",4,"ngIf"],["disabled","",4,"ngIf"],["matInput","","formControlName","addressAdditional1"],["matInput","","formControlName","addressNumber"],["matInput","","formControlName","addressStreet"],["matInput","","formControlName","addressAdditional2"],["matInput","","formControlName","addressPostcode"],["matInput","","formControlName","addressTown"],["matInput","","formControlName","addressCountry",3,"matAutocomplete"],["isOpen","true",3,"optionSelected"],["matAutocompleteCountries","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[2,"text-align","center"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-menu-item","",3,"click"],[3,"value"],["disabled","",1,"autoCompleteInfoResult","smallInputInfo",3,"innerHTML"],["disabled",""],["diameter","20"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Zb(1,"mat-sidenav-content"),u.Zb(2,"div",1),u.Zb(3,"div",2),u.Zb(4,"div",3),u.Ub(5,"header-left"),u.Yb(),u.Zb(6,"div",4),u.Ub(7,"header-right"),u.Yb(),u.Yb(),u.Ub(8,"div",5),u.Yb(),u.Zb(9,"div",6),u.Zb(10,"div",7),u.Qc(11,BE,2,0,"div",8),u.Qc(12,nS,81,52,"mat-card",9),u.Yb(),u.Yb(),u.Yb(),u.Zb(13,"mat-sidenav",10,11),u.Zb(15,"mat-list"),u.Zb(16,"h3",12),u.Sc(17),u.mc(18,"translate"),u.Yb(),u.Zb(19,"div",13),u.Ub(20,"app-maarch-flat-tree",null,14),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(3),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading),u.Eb(1),u.sc("mode",e.appService.getViewMode()?"over":"side")("fixedInViewport",e.appService.getViewMode())("opened",!e.appService.getViewMode()),u.Eb(4),u.Tc(u.nc(18,12,"lang.chooseEntityAssociationModel")))},directives:[S.e,S.f,M.a,Y.a,Z.t,S.d,Dt.a,Dt.g,Ae.a,O.c,T.a,o.J,o.u,o.l,k.c,k.g,w.b,o.c,o.t,o.j,o.A,o.o,D.b,k.j,ze.d,ze.e,Z.s,Ut.a,k.i,nr.d,o.i,nr.a,ze.b,I.o],pipes:[m.d,Z.b],styles:[".formType[_ngcontent-%COMP%]{align-items:center;display:flex;border-radius:4px;border:1px solid #ccc;position:relative;padding:10px 20px;flex-direction:column}.formType-title[_ngcontent-%COMP%]{white-space:pre;overflow:hidden;max-width:85%;text-overflow:ellipsis;z-index:1;font-size:10px;font-weight:700;background:#fff;position:absolute;top:-7px;left:10px;padding:0;margin:0;color:#135f7f}.formType[_ngcontent-%COMP%]    .mat-slide-toggle-label{color:#666;font-weight:700}.formType[_ngcontent-%COMP%]    .mat-radio-button, .formType[_ngcontent-%COMP%]    .mat-slide-toggle{opacity:.5;color:#666;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.formType[_ngcontent-%COMP%]    .mat-checked, .formType[_ngcontent-%COMP%]    .mat-radio-checked{opacity:1;color:#135f7f}.formType[_ngcontent-%COMP%]    .mat-checked .mat-slide-toggle-label{color:#135f7f}.formType[_ngcontent-%COMP%]    .mat-form-field-suffix{color:#f99830;font-size:15px;top:0}.ratio-1[_ngcontent-%COMP%], .ratio-2[_ngcontent-%COMP%]{flex:1}.smallInput[_ngcontent-%COMP%]{font-size:11px;padding-left:20px;padding-right:20px}.smallInput[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]{width:30px;height:25px;color:#135f7f}.smallInput[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;line-height:normal;align-items:center}.smallInput[_ngcontent-%COMP%]    .mat-form-field-infix{padding:0 0 5px}"]}),aS),rS=["adminMenuTemplate"];function cS(t,e){if(1&t&&(u.Zb(0,"a",16),u.Ub(1,"mat-icon",17),u.Zb(2,"p",14),u.Sc(3),u.Yb(),u.Yb()),2&t){var n=e.$implicit;u.Jb("active",n.current),u.sc("routerLink",n.route),u.Eb(1),u.Gb(n.icon),u.Eb(2),u.Uc(" ",n.label," ")}}function oS(t,e){if(1&t&&(u.Zb(0,"mat-nav-list"),u.Zb(1,"h3",11),u.Sc(2),u.mc(3,"translate"),u.Yb(),u.Zb(4,"a",12),u.Ub(5,"mat-icon",13),u.Zb(6,"p",14),u.Sc(7),u.mc(8,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Ub(9,"mat-divider"),u.Zb(10,"mat-nav-list"),u.Qc(11,cS,4,6,"a",15),u.Yb()),2&t){var n=u.lc();u.Eb(2),u.Tc(u.nc(3,3,"lang.actions")),u.Eb(5),u.Uc(" ",u.nc(8,5,"lang.add")," "),u.Eb(4),u.sc("ngForOf",n.subMenus)}}function sS(t,e){1&t&&(u.Zb(0,"div",18),u.Ub(1,"mat-spinner",19),u.Yb())}function lS(t,e){1&t&&(u.Zb(0,"mat-header-cell",45),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc(" ",u.nc(2,1,"lang.issuingSite")," "))}function dS(t,e){if(1&t&&(u.Zb(0,"mat-cell",46),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.label," ")}}function bS(t,e){1&t&&(u.Zb(0,"mat-header-cell",45),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc(" ",u.nc(2,1,"lang.trackerNumber")," "))}function uS(t,e){if(1&t&&(u.Zb(0,"mat-cell",46),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.trackerNumber," ")}}function mS(t,e){1&t&&(u.Zb(0,"mat-header-cell",45),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc(" ",u.nc(2,1,"lang.type")," "))}function fS(t,e){if(1&t&&(u.Zb(0,"mat-cell",46),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.typeLabel," ")}}function pS(t,e){1&t&&(u.Zb(0,"mat-header-cell",47),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc(" ",u.nc(2,1,"lang.rangeNumber")," "))}function gS(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.rangeNumber," ")}}function hS(t,e){1&t&&(u.Zb(0,"mat-header-cell",47),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc(" ",u.nc(2,1,"lang.currentNumber")," "))}function vS(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Sc(1),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Uc(" ",n.currentNumber," ")}}function yS(t,e){1&t&&(u.Zb(0,"mat-header-cell",47),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc(" ",u.nc(2,1,"lang.status")," "))}var CS=function(){return["OK"]},ES=function(){return["SPD"]},SS=function(){return["END"]},MS=function(t,e,n){return{statusLabelPrimary:t,statusLabelWarn:e,statusLabelDanger:n}};function xS(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Zb(1,"span",48),u.Sc(2),u.Yb(),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.sc("ngClass",u.Bc(5,MS,u.yc(2,CS).indexOf(n.status)>-1,u.yc(3,ES).indexOf(n.status)>-1,u.yc(4,SS).indexOf(n.status)>-1)),u.Eb(1),u.Tc(n.statusLabel)}}function YS(t,e){1&t&&(u.Zb(0,"mat-header-cell",47),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc(" ",u.nc(2,1,"lang.fullness")," "))}function ZS(t,e){if(1&t&&(u.Zb(0,"mat-cell"),u.Zb(1,"div",49),u.Ub(2,"mat-progress-spinner",50),u.Zb(3,"div",51),u.Sc(4),u.Yb(),u.Yb(),u.Yb()),2&t){var n=e.$implicit;u.Eb(1),u.Jb("fullness-ok",n.fullness<50)("fullness-warning",n.fullness>=50&&n.fullness<80)("fullness-danger",n.fullness>=80),u.Eb(1),u.sc("value",n.fullness),u.Eb(2),u.Uc("",n.fullness,"%")}}function _S(t,e){1&t&&u.Ub(0,"mat-header-cell")}function kS(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",57),u.hc("click",(function(t){u.Hc(n);var e=u.lc().$implicit,a=u.lc(2);return t.stopPropagation(),a.activate(e)})),u.mc(1,"translate"),u.Ub(2,"mat-icon",58),u.Yb()}if(2&t){var a=u.lc().$implicit;u.tc("matTooltip",u.nc(1,2,"Activer la plage")),u.sc("disabled",100===a.fullness)}}function wS(t,e){if(1&t){var n=u.ac();u.Zb(0,"button",59),u.hc("click",(function(t){u.Hc(n);var e=u.lc().$implicit,a=u.lc(2);return t.stopPropagation(),a.stop(e)})),u.mc(1,"translate"),u.Ub(2,"mat-icon",60),u.Yb()}2&t&&u.tc("matTooltip",u.nc(1,1,"Cl\xf4turer la plage"))}function OS(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-cell",52),u.Qc(1,kS,3,4,"button",53),u.Qc(2,wS,3,3,"button",54),u.Zb(3,"button",55),u.hc("click",(function(t){u.Hc(n);var a=e.$implicit,i=u.lc(2);return t.stopPropagation(),i.delete(a)})),u.mc(4,"translate"),u.Ub(5,"mat-icon",56),u.Yb(),u.Yb()}if(2&t){var a=e.$implicit;u.Eb(1),u.sc("ngIf","SPD"===a.status),u.Eb(1),u.sc("ngIf","OK"===a.status),u.Eb(1),u.tc("matTooltip",u.nc(4,4,"lang.delete")),u.sc("disabled","OK"===a.status)}}function TS(t,e){1&t&&u.Ub(0,"mat-header-row")}function IS(t,e){1&t&&(u.Ub(0,"mat-row",61),u.mc(1,"translate")),2&t&&(u.uc("routerLink","/administration/registeredMails/",e.$implicit.id,""),u.tc("matTooltip",u.nc(1,2,"lang.view")))}function DS(t,e){if(1&t&&(u.Zb(0,"mat-card",20),u.Zb(1,"div",21),u.Zb(2,"div",22),u.Zb(3,"mat-form-field"),u.Ub(4,"input",23),u.mc(5,"translate"),u.Yb(),u.Yb(),u.Zb(6,"div",22),u.Ub(7,"mat-paginator",24,25),u.Yb(),u.Yb(),u.Zb(9,"mat-table",26,27),u.Xb(11,28),u.Qc(12,lS,3,3,"mat-header-cell",29),u.Qc(13,dS,2,1,"mat-cell",30),u.Wb(),u.Xb(14,31),u.Qc(15,bS,3,3,"mat-header-cell",29),u.Qc(16,uS,2,1,"mat-cell",30),u.Wb(),u.Xb(17,32),u.Qc(18,mS,3,3,"mat-header-cell",29),u.Qc(19,fS,2,1,"mat-cell",30),u.Wb(),u.Xb(20,33),u.Qc(21,pS,3,3,"mat-header-cell",34),u.Qc(22,gS,2,1,"mat-cell",35),u.Wb(),u.Xb(23,36),u.Qc(24,hS,3,3,"mat-header-cell",34),u.Qc(25,vS,2,1,"mat-cell",35),u.Wb(),u.Xb(26,37),u.Qc(27,yS,3,3,"mat-header-cell",34),u.Qc(28,xS,3,9,"mat-cell",35),u.Wb(),u.Xb(29,38),u.Qc(30,YS,3,3,"mat-header-cell",34),u.Qc(31,ZS,5,8,"mat-cell",35),u.Wb(),u.Xb(32,39),u.Qc(33,_S,1,0,"mat-header-cell",40),u.Qc(34,OS,6,6,"mat-cell",41),u.Wb(),u.Qc(35,TS,1,0,"mat-header-row",42),u.Qc(36,IS,2,4,"mat-row",43),u.Yb(),u.Zb(37,"div",44),u.Sc(38),u.mc(39,"translate"),u.Yb(),u.Yb()),2&t){var n=u.lc();u.Eb(4),u.tc("placeholder",u.nc(5,10,"lang.filterBy")),u.sc("formControl",n.adminService.getFilterField()),u.Eb(3),u.sc("length",100)("hidePageSize",!0)("pageSize",10),u.Eb(2),u.sc("dataSource",n.adminService.getDataSource()),u.Eb(26),u.sc("matHeaderRowDef",n.displayedColumns),u.Eb(1),u.sc("matRowDefColumns",n.displayedColumns),u.Eb(2),u.Vc(" ",n.data.length," ",u.nc(39,12,"lang.registeredMailNumberRanges"),"")}}var US,PS=((US=function(){function t(e,n,a,i,r,c,o,s,l){_classCallCheck(this,t),this.translate=e,this.http=n,this.notify=a,this.headerService=i,this.appService=r,this.functions=c,this.adminService=o,this.viewContainerRef=s,this.dialog=l,this.subMenus=[{icon:"fas fa-dolly-flatbed",route:"/administration/registeredMails",label:this.translate.instant("lang.registeredMailNumberRanges"),current:!0},{icon:"fas fa-warehouse",route:"/administration/issuingSites",label:this.translate.instant("lang.issuingSites"),current:!1}],this.parameters={},this.loading=!0,this.data=[],this.displayedColumns=["trackerNumber","label","typeLabel","rangeNumber","currentNumber","status","fullness","actions"],this.filterColumns=["label","trackerNumber","typeLabel","rangeNumber","currentNumber","fullness","statusLabel"]}return _createClass(t,[{key:"ngOnInit",value:function(){this.headerService.setHeader(this.translate.instant("lang.administration")+" "+this.translate.instant("lang.registeredMailNumberRanges")),this.headerService.injectInSideBarLeft(this.adminMenuTemplate,this.viewContainerRef,"adminMenu"),this.loading=!1,this.getData()}},{key:"getData",value:function(){var t=this;this.data=[],this.http.get("../rest/registeredMail/ranges").pipe(Object(d.a)((function(e){t.data=e.ranges.map((function(e){return Object.assign(Object.assign({},e),{statusLabel:t.translate.instant("lang.registeredMail_"+e.status),typeLabel:t.translate.instant("lang.registeredMail_"+e.registeredMailType),rangeNumber:"".concat(e.rangeStart," - ").concat(e.rangeEnd)})})),t.loading=!1,setTimeout((function(){t.adminService.setDataSource("admin_regitered_mail",t.data,t.sort,t.paginator,t.filterColumns)}),0)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"activate",value:function(t){var e=this,n=JSON.parse(JSON.stringify(t));n.status="OK",this.dialog.open(W.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.activate"),msg:"En activant cette plage, cela cl\xf4turera la plage actuelle utilis\xe9e pour ce type de recommand\xe9."}}).afterClosed().pipe(Object(q.a)((function(t){return"ok"===t})),Object(X.a)((function(){return e.http.put("../rest/registeredMail/ranges/"+t.id,n)})),Object(d.a)((function(){e.data.forEach((function(n){"OK"===n.status&&n.registeredMailType===t.registeredMailType&&n.siteId===t.siteId?(n.status="END",n.currentNumber=null,n.statusLabel=e.translate.instant("lang.registeredMail_"+n.status)):n.id===t.id&&(n.status="OK",n.currentNumber=n.rangeStart,n.statusLabel=e.translate.instant("lang.registeredMail_"+n.status))})),setTimeout((function(){e.adminService.setDataSource("admin_regitered_mail",e.data,e.sort,e.paginator,e.filterColumns)}),0),e.notify.success(e.translate.instant("Plage activ\xe9e"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe()}},{key:"stop",value:function(t){var e=this,n=JSON.parse(JSON.stringify(t));n.status="END",this.dialog.open(W.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.suspend"),msg:"En cl\xf4turant la plage, vous ne pourrez plus utiliser de recommand\xe9 de ce type tant que vous n'en n'aurez pas activ\xe9 une autre."}}).afterClosed().pipe(Object(q.a)((function(t){return"ok"===t})),Object(X.a)((function(){return e.http.put("../rest/registeredMail/ranges/"+t.id,n)})),Object(d.a)((function(){t.status="END",t.statusLabel=e.translate.instant("lang.registeredMail_"+t.status),setTimeout((function(){e.adminService.setDataSource("admin_regitered_mail",e.data,e.sort,e.paginator,e.filterColumns)}),0),e.notify.success(e.translate.instant("Plage clotur\xe9e"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe()}},{key:"delete",value:function(t){var e=this;this.dialog.open(W.a,{panelClass:"maarch-modal",autoFocus:!1,disableClose:!0,data:{title:this.translate.instant("lang.delete"),msg:this.translate.instant("lang.confirmAction")}}).afterClosed().pipe(Object(q.a)((function(t){return"ok"===t})),Object(X.a)((function(){return e.http.delete("../rest/registeredMail/ranges/"+t.id)})),Object(d.a)((function(){e.data=e.data.filter((function(e){return e.id!==t.id})),setTimeout((function(){e.adminService.setDataSource("admin_regitered_mail",e.data,e.sort,e.paginator,e.filterColumns)}),0),e.notify.success(e.translate.instant("lang.issuingSiteDeleted"))})),Object(b.a)((function(t){return e.notify.handleErrors(t),Object(J.of)(!1)}))).subscribe()}}]),t}()).\u0275fac=function(t){return new(t||US)(u.Tb(m.e),u.Tb(f.b),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a),u.Tb(C.a),u.Tb(It),u.Tb(u.R),u.Tb(z.b))},US.\u0275cmp=u.Nb({type:US,selectors:[["app-registered-mail-list"]],viewQuery:function(t,e){var n;1&t&&(u.Oc(rS,!0),u.ad(V.a,!0),u.ad(N.a,!0)),2&t&&(u.Cc(n=u.ic())&&(e.adminMenuTemplate=n.first),u.Cc(n=u.ic())&&(e.paginator=n.first),u.Cc(n=u.ic())&&(e.sort=n.first))},decls:15,vars:8,consts:[["autosize","",1,"maarch-container"],["adminMenuTemplate",""],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],["mat-subheader",""],["mat-list-item","","routerLink","/administration/registeredMails/new"],["color","primary","mat-list-icon","",1,"fa","fa-plus"],["mat-line",""],["mat-list-item","",3,"active","routerLink",4,"ngFor","ngForOf"],["mat-list-item","",3,"routerLink"],["color","primary","mat-list-icon",""],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],[1,"row"],[1,"col-md-6","col-xs-6"],["matInput","",3,"formControl","placeholder"],[3,"length","hidePageSize","pageSize"],["paginator",""],["matSort","","matSortDisableClear","",3,"dataSource"],["table",""],["matColumnDef","label"],["mat-sort-header","","style","flex:2",4,"matHeaderCellDef"],["style","flex:2",4,"matCellDef"],["matColumnDef","trackerNumber"],["matColumnDef","typeLabel"],["matColumnDef","rangeNumber"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","currentNumber"],["matColumnDef","status"],["matColumnDef","fullness"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["style","justify-content: flex-end;",4,"matCellDef"],[4,"matHeaderRowDef"],["style","cursor:pointer;",3,"routerLink","matTooltip",4,"matRowDef","matRowDefColumns"],[1,"mat-paginator",2,"min-height","48px","min-height","48px","display","flex","justify-content","end","align-items","center","padding-right","20px"],["mat-sort-header","",2,"flex","2"],[2,"flex","2"],["mat-sort-header",""],[1,"label",3,"ngClass"],[1,"fullness","full"],["color","primay","mode","determinate","diameter","54",3,"value"],[1,"percent"],[2,"justify-content","flex-end"],["mat-icon-button","","color","accent",3,"matTooltip","disabled","click",4,"ngIf"],["mat-icon-button","","color","warn",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","color","warn",3,"matTooltip","disabled","click"],["aria-hidden","true",1,"fa","fa-trash-alt","fa-2x"],["mat-icon-button","","color","accent",3,"matTooltip","disabled","click"],["aria-hidden","true",1,"fa","fas","fa-play","fa-2x"],["mat-icon-button","","color","warn",3,"matTooltip","click"],["aria-hidden","true",1,"fa","fas","fa-stop-circle","fa-2x"],[2,"cursor","pointer",3,"routerLink","matTooltip"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Qc(1,oS,12,7,"ng-template",null,1,u.Rc),u.Zb(3,"mat-sidenav-content"),u.Zb(4,"div",2),u.Zb(5,"div",3),u.Zb(6,"div",4),u.Ub(7,"header-left"),u.Yb(),u.Zb(8,"div",5),u.Ub(9,"header-right"),u.Yb(),u.Yb(),u.Ub(10,"div",6),u.Yb(),u.Zb(11,"div",7),u.Zb(12,"div",8),u.Qc(13,sS,2,0,"div",9),u.Qc(14,DS,40,14,"mat-card",10),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(5),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading))},directives:[S.e,S.f,M.a,Y.a,Z.t,Dt.h,Dt.g,Dt.d,r.f,Ut.a,Dt.c,I.k,_.a,Z.s,O.c,T.a,k.c,w.b,o.c,o.t,o.i,V.a,B.n,N.a,B.c,B.i,B.b,B.k,B.m,B.h,N.b,B.a,Z.q,O.a,D.b,Ft.b,B.j,B.l,r.d],pipes:[m.d],styles:[".active[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]:active, .active[_ngcontent-%COMP%]:focus, .active[_ngcontent-%COMP%]:hover{color:#135f7f;border-left:5px solid #135f7f;background:rgba(19,95,127,.14)}.fullness[_ngcontent-%COMP%]{position:relative}.percent[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translate(-50%,-50%);left:50%;font-size:10px;font-weight:700;color:#888}.fullness-ok[_ngcontent-%COMP%]     .mat-progress-spinner circle, .mat-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:green}.fullness-warning[_ngcontent-%COMP%]     .mat-progress-spinner circle, .mat-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:orange}.fullness-danger[_ngcontent-%COMP%]     .mat-progress-spinner circle, .mat-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:red}.statusLabelDanger[_ngcontent-%COMP%]{color:#8e3e52}.statusLabelWarn[_ngcontent-%COMP%]{color:#f99830}.statusLabelPrimary[_ngcontent-%COMP%]{color:#135f7f}"]}),US);function FS(t,e){1&t&&(u.Zb(0,"div",10),u.Ub(1,"mat-spinner",11),u.Yb())}function LS(t,e){1&t&&(u.Ub(0,"div",24),u.mc(1,"translate")),2&t&&u.sc("innerHTML",u.nc(1,1,"lang.registeredMailNumberRangeModificationMsg"),u.Ic)}function jS(t,e){if(1&t&&u.Ub(0,"plugin-select-search",18),2&t){var n=u.lc(2);u.Gb(""),u.sc("showLabel",!0)("label",n.translate.instant("lang.issuingSite"))("placeholderLabel",n.translate.instant("lang.issuingSite"))("datas",n.customerAccountNumberList)("formControlSelect",n.adminFormGroup.controls.siteId)}}function RS(t,e){1&t&&(u.Zb(0,"div",25),u.Sc(1),u.mc(2,"translate"),u.Yb()),2&t&&(u.Eb(1),u.Uc(" ",u.nc(2,1,"lang.registeredMailNoIssuingSites")," "))}function QS(t,e){if(1&t){var n=u.ac();u.Zb(0,"mat-card",12),u.Qc(1,LS,2,3,"div",13),u.Zb(2,"form",14),u.hc("ngSubmit",(function(){return u.Hc(n),u.lc().onSubmit()})),u.Zb(3,"div"),u.Zb(4,"mat-form-field"),u.Zb(5,"mat-label"),u.Sc(6),u.mc(7,"translate"),u.Yb(),u.Ub(8,"input",15),u.Yb(),u.Qc(9,jS,1,7,"plugin-select-search",16),u.Qc(10,RS,3,3,"div",17),u.Ub(11,"plugin-select-search",18),u.Zb(12,"div",19),u.Zb(13,"mat-form-field"),u.Zb(14,"mat-label"),u.Sc(15),u.mc(16,"translate"),u.Yb(),u.Zb(17,"input",20),u.hc("keypress",(function(t){return u.Hc(n),u.lc().onlyNumbers(t)})),u.Yb(),u.Yb(),u.Zb(18,"mat-form-field"),u.Zb(19,"mat-label"),u.Sc(20),u.mc(21,"translate"),u.Yb(),u.Zb(22,"input",21),u.hc("keypress",(function(t){return u.Hc(n),u.lc().onlyNumbers(t)})),u.Yb(),u.Yb(),u.Yb(),u.Yb(),u.Zb(23,"div",22),u.Zb(24,"button",23),u.Sc(25),u.mc(26,"translate"),u.Yb(),u.Yb(),u.Yb(),u.Yb()}if(2&t){var a=u.lc();u.Eb(1),u.sc("ngIf","OK"===a.adminFormGroup.controls.status.value||"END"===a.adminFormGroup.controls.status.value),u.Eb(1),u.sc("formGroup",a.adminFormGroup),u.Eb(4),u.Tc(u.nc(7,18,"lang.trackerNumber")),u.Eb(3),u.sc("ngIf",a.customerAccountNumberList.length>0),u.Eb(1),u.sc("ngIf",0===a.customerAccountNumberList.length),u.Eb(1),u.Gb(""),u.sc("showLabel",!0)("label",a.translate.instant("lang.registeredMailType"))("placeholderLabel",a.translate.instant("lang.registeredMailType"))("datas",a.registeredMailType)("formControlSelect",a.adminFormGroup.controls.registeredMailType),u.Eb(4),u.Tc(u.nc(16,20,"lang.registeredMailStart")),u.Eb(2),u.sc("min",a.minRange),u.Eb(3),u.Tc(u.nc(21,22,"lang.registeredMailEnd")),u.Eb(2),u.sc("min",a.adminFormGroup.controls.rangeStart.value),u.Eb(2),u.sc("disabled",!a.adminFormGroup.valid),u.Eb(1),u.Tc(u.nc(26,24,"lang.save"))}}var AS,HS,zS,$S=((HS=function(){function t(e,n,a,i,r,c,o,s){_classCallCheck(this,t),this.translate=e,this.http=n,this.route=a,this.router=i,this.notify=r,this.headerService=c,this.appService=o,this._formBuilder=s,this.loading=!0,this.id=null,this.minRange=1,this.customerAccountNumberList=[],this.registeredMailType=[{id:"2D",label:this.translate.instant("lang.registeredMail_2D")},{id:"2C",label:this.translate.instant("lang.registeredMail_2C")},{id:"RW",label:this.translate.instant("lang.registeredMail_RW")}]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.route.params.subscribe((function(e){return Object(yt.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.getIssuingSites(),void 0!==e.id){t.next=5;break}this.creationMode=!0,this.headerService.setHeader(this.translate.instant("lang.registeredMailNumberRangeCreation")),this.adminFormGroup=this._formBuilder.group({id:[null],siteId:[null,o.H.required],trackerNumber:[null,o.H.required],registeredMailType:[null,o.H.required],rangeStart:[1,o.H.required],rangeEnd:[2,o.H.required],status:["SPD"]}),this.loading=!1,t.next=10;break;case 5:return this.headerService.setHeader(this.translate.instant("lang.registeredMailNumberRangeModification")),this.id=e.id,this.creationMode=!1,t.next=10,this.getData();case 10:this.adminFormGroup.controls.registeredMailType.valueChanges.pipe(Object(d.a)((function(){n.creationMode&&n.getMinRange()}))).subscribe(),this.adminFormGroup.controls.rangeStart.valueChanges.pipe(Object(d.a)((function(t){t>n.adminFormGroup.controls.rangeEnd.value?n.adminFormGroup.controls.rangeStart.setErrors({rangeError:!0}):(n.adminFormGroup.controls.rangeStart.setErrors(null),n.adminFormGroup.controls.rangeEnd.setErrors(null))}))).subscribe(),this.adminFormGroup.controls.rangeEnd.valueChanges.pipe(Object(d.a)((function(t){t<n.adminFormGroup.controls.rangeStart.value?n.adminFormGroup.controls.rangeEnd.setErrors({rangeError:!0}):(n.adminFormGroup.controls.rangeStart.setErrors(null),n.adminFormGroup.controls.rangeEnd.setErrors(null))}))).subscribe();case 13:case"end":return t.stop()}}),t,this)})))}))}},{key:"getIssuingSites",value:function(){var t=this;this.http.get("../rest/registeredMail/sites").pipe(Object(d.a)((function(e){t.customerAccountNumberList=e.sites.map((function(t){return{id:t.id,label:"".concat(t.label," (").concat(t.accountNumber,")")}}))})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"getData",value:function(){var t=this;return new Promise((function(e){t.http.get("../rest/registeredMail/ranges/"+t.id).pipe(Object(d.a)((function(n){t.adminFormGroup=t._formBuilder.group({id:[t.id],siteId:[n.range.siteId],trackerNumber:[n.range.trackerNumber],registeredMailType:[n.range.registeredMailType],rangeStart:[n.range.rangeStart],rangeEnd:[n.range.rangeEnd],status:[n.range.status]}),"OK"!==n.range.status&&"END"!==n.range.status||t.adminFormGroup.disable(),e(!0),t.loading=!1})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}))}},{key:"onlyNumbers",value:function(t){var e;return e=t.charCode,(null!==this.adminFormGroup.controls.rangeStart.value||48!==e)&&e>=48&&e<=57}},{key:"getMinRange",value:function(){var t=this;this.http.get("../rest/registeredMail/ranges/type/".concat(this.adminFormGroup.controls.registeredMailType.value,"/last")).pipe(Object(d.a)((function(e){t.minRange=1===e.lastNumber?e.lastNumber:e.lastNumber+1,t.adminFormGroup.controls.rangeStart.setValue(t.minRange),t.adminFormGroup.controls.rangeEnd.value<t.adminFormGroup.controls.rangeStart.value&&t.adminFormGroup.controls.rangeEnd.setValue(t.adminFormGroup.controls.rangeStart.value+1)})),Object(b.a)((function(e){return t.notify.handleSoftErrors(e),Object(J.of)(!1)}))).subscribe()}},{key:"onSubmit",value:function(){var t=this,e={};Object.keys(this.adminFormGroup.controls).forEach((function(n){e[n]=t.adminFormGroup.controls[n].value})),this.creationMode?this.http.post("../rest/registeredMail/ranges",e).subscribe((function(){t.notify.success(t.translate.instant("lang.registeredMailNumberRangesAdded")),t.router.navigate(["/administration/registeredMails"])}),(function(e){t.notify.handleSoftErrors(e)})):this.http.put("../rest/registeredMail/ranges/"+this.id,e).subscribe((function(){t.notify.success(t.translate.instant("lang.registeredMailNumberRangesUpdated")),t.router.navigate(["/administration/registeredMails"])}),(function(e){t.notify.handleSoftErrors(e)}))}}]),t}()).\u0275fac=function(t){return new(t||HS)(u.Tb(m.e),u.Tb(f.b),u.Tb(r.a),u.Tb(r.c),u.Tb(y.a),u.Tb(p.a),u.Tb(g.a),u.Tb(o.g))},HS.\u0275cmp=u.Nb({type:HS,selectors:[["app-registered-mail"]],decls:13,vars:8,consts:[["autosize","",1,"maarch-container"],[1,"bg-head"],[1,"bg-head-title"],[1,"bg-head-title-label"],[1,"bg-head-title-tool"],[1,"bg-head-content"],[1,"container"],[1,"container-content"],["style","display:flex;height:100%;",4,"ngIf"],["class","card-app-content",4,"ngIf"],[2,"display","flex","height","100%"],[2,"margin","auto"],[1,"card-app-content"],["class","alert-message alert-message-danger","style","min-width: 100%;",3,"innerHTML",4,"ngIf"],[2,"display","contents",3,"formGroup","ngSubmit"],["matInput","","formControlName","trackerNumber"],[3,"showLabel","label","placeholderLabel","datas","class","formControlSelect",4,"ngIf"],["class","alert-message alert-message-danger",4,"ngIf"],[3,"showLabel","label","placeholderLabel","datas","formControlSelect"],[2,"display","grid","grid-template-columns","1fr 1fr","grid-gap","20px"],["matInput","","type","number","formControlName","rangeStart",3,"min","keypress"],["matInput","","type","number","formControlName","rangeEnd",3,"min","keypress"],[2,"text-align","center"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[1,"alert-message","alert-message-danger",2,"min-width","100%",3,"innerHTML"],[1,"alert-message","alert-message-danger"]],template:function(t,e){1&t&&(u.Zb(0,"mat-sidenav-container",0),u.Zb(1,"mat-sidenav-content"),u.Zb(2,"div",1),u.Zb(3,"div",2),u.Zb(4,"div",3),u.Ub(5,"header-left"),u.Yb(),u.Zb(6,"div",4),u.Ub(7,"header-right"),u.Yb(),u.Yb(),u.Ub(8,"div",5),u.Yb(),u.Zb(9,"div",6),u.Zb(10,"div",7),u.Qc(11,FS,2,0,"div",8),u.Qc(12,QS,27,26,"mat-card",9),u.Yb(),u.Yb(),u.Yb(),u.Yb()),2&t&&(u.Eb(3),u.Jb("customContainerRight",e.appService.getViewMode()),u.Eb(5),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(1),u.Jb("fullContainer",e.appService.getViewMode()),u.Eb(2),u.sc("ngIf",e.loading),u.Eb(1),u.sc("ngIf",!e.loading))},directives:[S.e,S.f,M.a,Y.a,Z.t,O.c,T.a,o.J,o.u,o.l,k.c,k.g,w.b,o.c,o.t,o.j,Cl.a,o.z,D.b],pipes:[m.d],styles:[""]}),HS),VS=((AS=function t(){_classCallCheck(this,t)}).\u0275mod=u.Rb({type:AS}),AS.\u0275inj=u.Qb({factory:function(t){return new(t||AS)},imports:[[r.g.forChild([{path:"",canActivate:[jh.b],component:H},{path:"users",canActivate:[jh.b],component:we},{path:"users/new",canActivate:[jh.b],component:fa},{path:"users/:id",canActivate:[jh.b],component:fa},{path:"groups",canActivate:[jh.b],component:Da},{path:"groups/new",canActivate:[jh.b],component:Pi},{path:"groups/:id",canActivate:[jh.b],component:Pi},{path:"baskets",canActivate:[jh.b],component:tr},{path:"baskets/new",canActivate:[jh.b],component:lc},{path:"baskets/:id",canActivate:[jh.b],component:lc},{path:"doctypes",canActivate:[jh.b],component:Pc},{path:"diffusionModels",canActivate:[jh.b],component:Xc},{path:"diffusionModels/new",canActivate:[jh.b],component:uo},{path:"diffusionModels/:id",canActivate:[jh.b],component:uo},{path:"entities",canActivate:[jh.b],component:Zs},{path:"statuses",canActivate:[jh.b],component:Vs},{path:"statuses/new",canActivate:[jh.b],component:tl},{path:"statuses/:identifier",canActivate:[jh.b],component:tl},{path:"parameters",canActivate:[jh.b],component:sd},{path:"parameters/new",canActivate:[jh.b],component:Rl},{path:"parameters/:id",canActivate:[jh.b],component:Rl},{path:"priorities",canActivate:[jh.b],component:_d},{path:"priorities/new",canActivate:[jh.b],component:Td},{path:"priorities/:id",canActivate:[jh.b],component:Td},{path:"actions",canActivate:[jh.b],component:yl},{path:"actions/new",canActivate:[jh.b],component:Il},{path:"actions/:id",canActivate:[jh.b],component:Il},{path:"notifications",canActivate:[jh.b],component:ib},{path:"notifications/new",canActivate:[jh.b],component:Rb},{path:"notifications/:identifier",canActivate:[jh.b],component:Rb},{path:"history",canActivate:[jh.b],component:Wb},{path:"history-batch",canActivate:[jh.b],component:Fu},{path:"update-status",canActivate:[jh.b],component:zu},{path:"contacts",canActivate:[jh.b],component:Ly},{path:"contacts/duplicates",canActivate:[jh.b],component:OE},{path:"contacts/list",redirectTo:"contacts",pathMatch:"full"},{path:"contacts/list/new",canActivate:[jh.b],component:pC},{path:"contacts/list/:id",canActivate:[jh.b],component:pC},{path:"contacts/contactsCustomFields",canActivate:[jh.b],component:sC},{path:"contacts/contacts-groups",canActivate:[jh.b],component:pm},{path:"contacts/contacts-groups/new",canActivate:[jh.b],component:Bm},{path:"contacts/contacts-groups/:id",canActivate:[jh.b],component:Bm},{path:"contacts/contacts-parameters",canActivate:[jh.b],component:Sf},{path:"versions-update",canActivate:[jh.b],component:Df},{path:"docservers",canActivate:[jh.b],component:Vf},{path:"docservers/new",canActivate:[jh.b],component:Wf},{path:"templates",canActivate:[jh.b],component:gp},{path:"templates/new",canActivate:[jh.b],component:dg},{path:"templates/:id",canActivate:[jh.b],component:dg},{path:"securities",canActivate:[jh.b],component:pg},{path:"sendmail",canActivate:[jh.b],component:Og},{path:"shippings",canActivate:[jh.b],component:Ng},{path:"shippings/new",canActivate:[jh.b],component:ah},{path:"shippings/:id",canActivate:[jh.b],component:ah},{path:"customFields",canActivate:[jh.b],component:Lh},{path:"indexingModels",canActivate:[jh.b],component:wv},{path:"indexingModels/new",canActivate:[jh.b],component:Bh},{path:"indexingModels/:id",canActivate:[jh.b],component:Bh},{path:"tags",canActivate:[jh.b],component:_C},{path:"tags/new",canActivate:[jh.b],component:PC},{path:"tags/:id",canActivate:[jh.b],component:PC},{path:"alfresco",canActivate:[jh.b],component:cE},{path:"alfresco/new",canActivate:[jh.b],component:zC},{path:"alfresco/:id",canActivate:[jh.b],component:zC},{path:"registeredMails",canActivate:[jh.b],component:PS},{path:"registeredMails/new",canActivate:[jh.b],component:$S},{path:"registeredMails/:id",canActivate:[jh.b],component:$S},{path:"issuingSites",canActivate:[jh.b],component:JE},{path:"issuingSites/new",canActivate:[jh.b],component:iS},{path:"issuingSites/:id",canActivate:[jh.b],component:iS}])],r.g]}),AS),NS=n("U+qY"),JS=n("L6pT"),GS=((zS=function t(e){_classCallCheck(this,t),e.setDefaultLang("fr")}).\u0275mod=u.Rb({type:zS}),zS.\u0275inj=u.Qb({factory:function(t){return new(t||zS)(u.dc(m.e))},providers:[It],imports:[[a.a,i.a,x.b.forChild(),JS.a,VS,NS.a]]}),zS)}}]);