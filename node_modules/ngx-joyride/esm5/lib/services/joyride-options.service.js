import { __decorate } from "tslib";
import { Injectable } from '@angular/core';
import { of, Observable } from 'rxjs';
export var DEFAULT_THEME_COLOR = '#3b5560';
export var STEP_DEFAULT_POSITION = 'bottom';
export var DEFAULT_TIMEOUT_BETWEEN_STEPS = 1;
var ObservableCustomTexts = /** @class */ (function () {
    function ObservableCustomTexts() {
    }
    return ObservableCustomTexts;
}());
export { ObservableCustomTexts };
export var DEFAULT_TEXTS = {
    prev: of('prev'),
    next: of('next'),
    done: of('done'),
    close: of(null)
};
var JoyrideOptionsService = /** @class */ (function () {
    function JoyrideOptionsService() {
        this.themeColor = DEFAULT_THEME_COLOR;
        this.stepDefaultPosition = STEP_DEFAULT_POSITION;
        this.logsEnabled = false;
        this.showCounter = true;
        this.showPrevButton = true;
        this.stepsOrder = [];
    }
    JoyrideOptionsService.prototype.setOptions = function (options) {
        this.stepsOrder = options.steps;
        this.stepDefaultPosition = options.stepDefaultPosition
            ? options.stepDefaultPosition
            : this.stepDefaultPosition;
        this.logsEnabled =
            typeof options.logsEnabled !== 'undefined'
                ? options.logsEnabled
                : this.logsEnabled;
        this.showCounter =
            typeof options.showCounter !== 'undefined'
                ? options.showCounter
                : this.showCounter;
        this.showPrevButton =
            typeof options.showPrevButton !== 'undefined'
                ? options.showPrevButton
                : this.showPrevButton;
        this.themeColor = options.themeColor
            ? options.themeColor
            : this.themeColor;
        this.firstStep = options.startWith;
        this.waitingTime =
            typeof options.waitingTime !== 'undefined'
                ? options.waitingTime
                : DEFAULT_TIMEOUT_BETWEEN_STEPS;
        typeof options.customTexts !== 'undefined'
            ? this.setCustomText(options.customTexts)
            : this.setCustomText(DEFAULT_TEXTS);
    };
    JoyrideOptionsService.prototype.getBackdropColor = function () {
        return this.hexToRgb(this.themeColor);
    };
    JoyrideOptionsService.prototype.getThemeColor = function () {
        return this.themeColor;
    };
    JoyrideOptionsService.prototype.getStepDefaultPosition = function () {
        return this.stepDefaultPosition;
    };
    JoyrideOptionsService.prototype.getStepsOrder = function () {
        return this.stepsOrder;
    };
    JoyrideOptionsService.prototype.getFirstStep = function () {
        return this.firstStep;
    };
    JoyrideOptionsService.prototype.getWaitingTime = function () {
        return this.waitingTime;
    };
    JoyrideOptionsService.prototype.areLogsEnabled = function () {
        return this.logsEnabled;
    };
    JoyrideOptionsService.prototype.isCounterVisible = function () {
        return this.showCounter;
    };
    JoyrideOptionsService.prototype.isPrevButtonVisible = function () {
        return this.showPrevButton;
    };
    JoyrideOptionsService.prototype.getCustomTexts = function () {
        return this.customTexts;
    };
    JoyrideOptionsService.prototype.setCustomText = function (texts) {
        var prev;
        var next;
        var done;
        var close;
        prev = texts.prev ? texts.prev : DEFAULT_TEXTS.prev;
        next = texts.next ? texts.next : DEFAULT_TEXTS.next;
        done = texts.done ? texts.done : DEFAULT_TEXTS.done;
        close = texts.close ? texts.close : DEFAULT_TEXTS.close;
        this.customTexts = {
            prev: this.toObservable(prev),
            next: this.toObservable(next),
            done: this.toObservable(done),
            close: this.toObservable(close)
        };
    };
    JoyrideOptionsService.prototype.toObservable = function (value) {
        return value instanceof Observable ? value : of(value);
    };
    JoyrideOptionsService.prototype.hexToRgb = function (hex) {
        var shorthandRegex = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
        hex = hex.replace(shorthandRegex, function (m, r, g, b) {
            return r + r + g + g + b + b;
        });
        var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
        return result
            ? parseInt(result[1], 16) + ", " + parseInt(result[2], 16) + ", " + parseInt(result[3], 16)
            : null;
    };
    JoyrideOptionsService = __decorate([
        Injectable()
    ], JoyrideOptionsService);
    return JoyrideOptionsService;
}());
export { JoyrideOptionsService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiam95cmlkZS1vcHRpb25zLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZ3gtam95cmlkZS8iLCJzb3VyY2VzIjpbImxpYi9zZXJ2aWNlcy9qb3lyaWRlLW9wdGlvbnMuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQU0zQyxPQUFPLEVBQUUsRUFBRSxFQUFFLFVBQVUsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUV0QyxNQUFNLENBQUMsSUFBTSxtQkFBbUIsR0FBRyxTQUFTLENBQUM7QUFDN0MsTUFBTSxDQUFDLElBQU0scUJBQXFCLEdBQUcsUUFBUSxDQUFDO0FBQzlDLE1BQU0sQ0FBQyxJQUFNLDZCQUE2QixHQUFHLENBQUMsQ0FBQztBQUUvQztJQUFBO0lBS0EsQ0FBQztJQUFELDRCQUFDO0FBQUQsQ0FBQyxBQUxELElBS0M7O0FBQ0QsTUFBTSxDQUFDLElBQU0sYUFBYSxHQUEwQjtJQUNoRCxJQUFJLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQztJQUNoQixJQUFJLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQztJQUNoQixJQUFJLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQztJQUNoQixLQUFLLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQztDQUNsQixDQUFDO0FBaUJGO0lBQUE7UUFDWSxlQUFVLEdBQVcsbUJBQW1CLENBQUM7UUFDekMsd0JBQW1CLEdBQVcscUJBQXFCLENBQUM7UUFDcEQsZ0JBQVcsR0FBRyxLQUFLLENBQUM7UUFDcEIsZ0JBQVcsR0FBRyxJQUFJLENBQUM7UUFDbkIsbUJBQWMsR0FBRyxJQUFJLENBQUM7UUFDdEIsZUFBVSxHQUFhLEVBQUUsQ0FBQztJQThHdEMsQ0FBQztJQXpHRywwQ0FBVSxHQUFWLFVBQVcsT0FBdUI7UUFDOUIsSUFBSSxDQUFDLFVBQVUsR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxtQkFB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LENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxVQUFLLFFBQVEsQ0FDbkMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUNULEVBQUUsQ0FDTCxVQUFLLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFHO1lBQ2pDLENBQUMsQ0FBQyxJQUFJLENBQUM7SUFDZixDQUFDO0lBbkhRLHFCQUFxQjtRQURqQyxVQUFVLEVBQUU7T0FDQSxxQkFBcUIsQ0FvSGpDO0lBQUQsNEJBQUM7Q0FBQSxBQXBIRCxJQW9IQztTQXBIWSxxQkFBcUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge1xuICAgIEpveXJpZGVPcHRpb25zLFxuICAgIEN1c3RvbVRleHRzLFxuICAgIElDdXN0b21UZXh0c1xufSBmcm9tICcuLi9tb2RlbHMvam95cmlkZS1vcHRpb25zLmNsYXNzJztcbmltcG9ydCB7IG9mLCBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1RIRU1FX0NPTE9SID0gJyMzYjU1NjAnO1xuZXhwb3J0IGNvbnN0IFNURVBfREVGQVVMVF9QT1NJVElPTiA9ICdib3R0b20nO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfVElNRU9VVF9CRVRXRUVOX1NURVBTID0gMTtcblxuZXhwb3J0IGNsYXNzIE9ic2VydmFibGVDdXN0b21UZXh0cyBpbXBsZW1lbnRzIElDdXN0b21UZXh0cyB7XG4gICAgcHJldjogT2JzZXJ2YWJsZTxzdHJpbmc+O1xuICAgIG5leHQ6IE9ic2VydmFibGU8c3RyaW5nPjtcbiAgICBkb25lOiBPYnNlcnZhYmxlPHN0cmluZz47XG4gICAgY2xvc2U6IE9ic2VydmFibGU8c3RyaW5nPjtcbn1cbmV4cG9ydCBjb25zdCBERUZBVUxUX1RFWFRTOiBPYnNlcnZhYmxlQ3VzdG9tVGV4dHMgPSB7XG4gICAgcHJldjogb2YoJ3ByZXYnKSxcbiAgICBuZXh0OiBvZignbmV4dCcpLFxuICAgIGRvbmU6IG9mKCdkb25lJyksXG4gICAgY2xvc2U6IG9mKG51bGwpXG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIElKb3lyaWRlT3B0aW9uc1NlcnZpY2Uge1xuICAgIHNldE9wdGlvbnMob3B0aW9uczogSm95cmlkZU9wdGlvbnMpOiB2b2lkO1xuICAgIGdldEJhY2tkcm9wQ29sb3IoKTogc3RyaW5nO1xuICAgIGdldFRoZW1lQ29sb3IoKTogc3RyaW5nO1xuICAgIGdldFN0ZXBEZWZhdWx0UG9zaXRpb24oKTtcbiAgICBnZXRTdGVwc09yZGVyKCk6IHN0cmluZ1tdO1xuICAgIGdldEZpcnN0U3RlcCgpOiBzdHJpbmc7XG4gICAgZ2V0V2FpdGluZ1RpbWUoKTogbnVtYmVyO1xuICAgIGFyZUxvZ3NFbmFibGVkKCk6IGJvb2xlYW47XG4gICAgaXNDb3VudGVyVmlzaWJsZSgpOiBib29sZWFuO1xuICAgIGlzUHJldkJ1dHRvblZpc2libGUoKTogYm9vbGVhbjtcbiAgICBnZXRDdXN0b21UZXh0cygpOiBPYnNlcnZhYmxlQ3VzdG9tVGV4dHM7XG59XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBKb3lyaWRlT3B0aW9uc1NlcnZpY2UgaW1wbGVtZW50cyBJSm95cmlkZU9wdGlvbnNTZXJ2aWNlIHtcbiAgICBwcml2YXRlIHRoZW1lQ29sb3I6IHN0cmluZyA9IERFRkFVTFRfVEhFTUVfQ09MT1I7XG4gICAgcHJpdmF0ZSBzdGVwRGVmYXVsdFBvc2l0aW9uOiBzdHJpbmcgPSBTVEVQX0RFRkFVTFRfUE9TSVRJT047XG4gICAgcHJpdmF0ZSBsb2dzRW5hYmxlZCA9IGZhbHNlO1xuICAgIHByaXZhdGUgc2hvd0NvdW50ZXIgPSB0cnVlO1xuICAgIHByaXZhdGUgc2hvd1ByZXZCdXR0b24gPSB0cnVlO1xuICAgIHByaXZhdGUgc3RlcHNPcmRlcjogc3RyaW5nW10gPSBbXTtcbiAgICBwcml2YXRlIGZpcnN0U3RlcDogc3RyaW5nO1xuICAgIHByaXZhdGUgd2FpdGluZ1RpbWU6IG51bWJlcjtcbiAgICBwcml2YXRlIGN1c3RvbVRleHRzOiBPYnNlcnZhYmxlQ3VzdG9tVGV4dHM7XG5cbiAgICBzZXRPcHRpb25zKG9wdGlvbnM6IEpveXJpZGVPcHRpb25zKSB7XG4gICAgICAgIHRoaXMuc3RlcHNPcmRlciA9IG9wdGlvbnMuc3RlcHM7XG4gICAgICAgIHRoaXMuc3RlcERlZmF1bHRQb3NpdGlvbiA9IG9wdGlvbnMuc3RlcERlZmF1bHRQb3NpdGlvblxuICAgICAgICAgICAgPyBvcHRpb25zLnN0ZXBEZWZhdWx0UG9zaXRpb25cbiAgICAgICAgICAgIDogdGhpcy5zdGVwRGVmYXVsdFBvc2l0aW9uO1xuICAgICAgICB0aGlzLmxvZ3NFbmFibGVkID1cbiAgICAgICAgICAgIHR5cGVvZiBvcHRpb25zLmxvZ3NFbmFibGVkICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgICAgID8gb3B0aW9ucy5sb2dzRW5hYmxlZFxuICAgICAgICAgICAgICAgIDogdGhpcy5sb2dzRW5hYmxlZDtcbiAgICAgICAgdGhpcy5zaG93Q291bnRlciA9XG4gICAgICAgICAgICB0eXBlb2Ygb3B0aW9ucy5zaG93Q291bnRlciAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMuc2hvd0NvdW50ZXJcbiAgICAgICAgICAgICAgICA6IHRoaXMuc2hvd0NvdW50ZXI7XG4gICAgICAgIHRoaXMuc2hvd1ByZXZCdXR0b24gPVxuICAgICAgICAgICAgdHlwZW9mIG9wdGlvbnMuc2hvd1ByZXZCdXR0b24gIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICAgICAgPyBvcHRpb25zLnNob3dQcmV2QnV0dG9uXG4gICAgICAgICAgICAgICAgOiB0aGlzLnNob3dQcmV2QnV0dG9uO1xuICAgICAgICB0aGlzLnRoZW1lQ29sb3IgPSBvcHRpb25zLnRoZW1lQ29sb3JcbiAgICAgICAgICAgID8gb3B0aW9ucy50aGVtZUNvbG9yXG4gICAgICAgICAgICA6IHRoaXMudGhlbWVDb2xvcjtcbiAgICAgICAgdGhpcy5maXJzdFN0ZXAgPSBvcHRpb25zLnN0YXJ0V2l0aDtcbiAgICAgICAgdGhpcy53YWl0aW5nVGltZSA9XG4gICAgICAgICAgICB0eXBlb2Ygb3B0aW9ucy53YWl0aW5nVGltZSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMud2FpdGluZ1RpbWVcbiAgICAgICAgICAgICAgICA6IERFRkFVTFRfVElNRU9VVF9CRVRXRUVOX1NURVBTO1xuICAgICAgICB0eXBlb2Ygb3B0aW9ucy5jdXN0b21UZXh0cyAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgID8gdGhpcy5zZXRDdXN0b21UZXh0KG9wdGlvbnMuY3VzdG9tVGV4dHMpXG4gICAgICAgICAgICA6IHRoaXMuc2V0Q3VzdG9tVGV4dChERUZBVUxUX1RFWFRTKTtcbiAgICB9XG5cbiAgICBnZXRCYWNrZHJvcENvbG9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oZXhUb1JnYih0aGlzLnRoZW1lQ29sb3IpO1xuICAgIH1cblxuICAgIGdldFRoZW1lQ29sb3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRoZW1lQ29sb3I7XG4gICAgfVxuXG4gICAgZ2V0U3RlcERlZmF1bHRQb3NpdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RlcERlZmF1bHRQb3NpdGlvbjtcbiAgICB9XG5cbiAgICBnZXRTdGVwc09yZGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGVwc09yZGVyO1xuICAgIH1cblxuICAgIGdldEZpcnN0U3RlcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlyc3RTdGVwO1xuICAgIH1cblxuICAgIGdldFdhaXRpbmdUaW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy53YWl0aW5nVGltZTtcbiAgICB9XG5cbiAgICBhcmVMb2dzRW5hYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9nc0VuYWJsZWQ7XG4gICAgfVxuXG4gICAgaXNDb3VudGVyVmlzaWJsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hvd0NvdW50ZXI7XG4gICAgfVxuXG4gICAgaXNQcmV2QnV0dG9uVmlzaWJsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hvd1ByZXZCdXR0b247XG4gICAgfVxuXG4gICAgZ2V0Q3VzdG9tVGV4dHMoKTogT2JzZXJ2YWJsZUN1c3RvbVRleHRzIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tVGV4dHM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXRDdXN0b21UZXh0KHRleHRzOiBDdXN0b21UZXh0cykge1xuICAgICAgICBsZXQgcHJldjogc3RyaW5nIHwgT2JzZXJ2YWJsZTxzdHJpbmc+O1xuICAgICAgICBsZXQgbmV4dDogc3RyaW5nIHwgT2JzZXJ2YWJsZTxzdHJpbmc+O1xuICAgICAgICBsZXQgZG9uZTtcbiAgICAgICAgbGV0IGNsb3NlO1xuICAgICAgICBwcmV2ID0gdGV4dHMucHJldiA/IHRleHRzLnByZXYgOiBERUZBVUxUX1RFWFRTLnByZXY7XG4gICAgICAgIG5leHQgPSB0ZXh0cy5uZXh0ID8gdGV4dHMubmV4dCA6IERFRkFVTFRfVEVYVFMubmV4dDtcbiAgICAgICAgZG9uZSA9IHRleHRzLmRvbmUgPyB0ZXh0cy5kb25lIDogREVGQVVMVF9URVhUUy5kb25lO1xuICAgICAgICBjbG9zZSA9IHRleHRzLmNsb3NlID8gdGV4dHMuY2xvc2UgOiBERUZBVUxUX1RFWFRTLmNsb3NlO1xuICAgICAgICB0aGlzLmN1c3RvbVRleHRzID0ge1xuICAgICAgICAgICAgcHJldjogdGhpcy50b09ic2VydmFibGUocHJldiksXG4gICAgICAgICAgICBuZXh0OiB0aGlzLnRvT2JzZXJ2YWJsZShuZXh0KSxcbiAgICAgICAgICAgIGRvbmU6IHRoaXMudG9PYnNlcnZhYmxlKGRvbmUpLFxuICAgICAgICAgICAgY2xvc2U6IHRoaXMudG9PYnNlcnZhYmxlKGNsb3NlKVxuICAgICAgICB9IGFzIE9ic2VydmFibGVDdXN0b21UZXh0cztcbiAgICB9XG5cbiAgICBwcml2YXRlIHRvT2JzZXJ2YWJsZSh2YWx1ZTogc3RyaW5nIHwgT2JzZXJ2YWJsZTxzdHJpbmc+KSB7XG4gICAgICAgIHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIE9ic2VydmFibGUgPyB2YWx1ZSA6IG9mKHZhbHVlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhleFRvUmdiKGhleDogYW55KTogc3RyaW5nIHtcbiAgICAgICAgY29uc3Qgc2hvcnRoYW5kUmVnZXggPSAvXiM/KFthLWZcXGRdKShbYS1mXFxkXSkoW2EtZlxcZF0pJC9pO1xuICAgICAgICBoZXggPSBoZXgucmVwbGFjZShzaG9ydGhhbmRSZWdleCwgKG06IGFueSwgcjogYW55LCBnOiBhbnksIGI6IGFueSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHIgKyByICsgZyArIGcgKyBiICsgYjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gL14jPyhbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KSQvaS5leGVjKGhleCk7XG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgICAgICAgID8gYCR7cGFyc2VJbnQocmVzdWx0WzFdLCAxNil9LCAke3BhcnNlSW50KFxuICAgICAgICAgICAgICAgICAgcmVzdWx0WzJdLFxuICAgICAgICAgICAgICAgICAgMTZcbiAgICAgICAgICAgICAgKX0sICR7cGFyc2VJbnQocmVzdWx0WzNdLCAxNil9YFxuICAgICAgICAgICAgOiBudWxsO1xuICAgIH1cbn1cbiJdfQ==