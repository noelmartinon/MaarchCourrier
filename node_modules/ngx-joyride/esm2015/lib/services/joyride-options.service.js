import { __decorate } from "tslib";
import { Injectable } from '@angular/core';
import { of, Observable } from 'rxjs';
export const DEFAULT_THEME_COLOR = '#3b5560';
export const STEP_DEFAULT_POSITION = 'bottom';
export const DEFAULT_TIMEOUT_BETWEEN_STEPS = 1;
export class ObservableCustomTexts {
}
export const DEFAULT_TEXTS = {
    prev: of('prev'),
    next: of('next'),
    done: of('done'),
    close: of(null)
};
let JoyrideOptionsService = class JoyrideOptionsService {
    constructor() {
        this.themeColor = DEFAULT_THEME_COLOR;
        this.stepDefaultPosition = STEP_DEFAULT_POSITION;
        this.logsEnabled = false;
        this.showCounter = true;
        this.showPrevButton = true;
        this.stepsOrder = [];
    }
    setOptions(options) {
        this.stepsOrder = options.steps;
        this.stepDefaultPosition = options.stepDefaultPosition
            ? options.stepDefaultPosition
            : this.stepDefaultPosition;
        this.logsEnabled =
            typeof options.logsEnabled !== 'undefined'
                ? options.logsEnabled
                : this.logsEnabled;
        this.showCounter =
            typeof options.showCounter !== 'undefined'
                ? options.showCounter
                : this.showCounter;
        this.showPrevButton =
            typeof options.showPrevButton !== 'undefined'
                ? options.showPrevButton
                : this.showPrevButton;
        this.themeColor = options.themeColor
            ? options.themeColor
            : this.themeColor;
        this.firstStep = options.startWith;
        this.waitingTime =
            typeof options.waitingTime !== 'undefined'
                ? options.waitingTime
                : DEFAULT_TIMEOUT_BETWEEN_STEPS;
        typeof options.customTexts !== 'undefined'
            ? this.setCustomText(options.customTexts)
            : this.setCustomText(DEFAULT_TEXTS);
    }
    getBackdropColor() {
        return this.hexToRgb(this.themeColor);
    }
    getThemeColor() {
        return this.themeColor;
    }
    getStepDefaultPosition() {
        return this.stepDefaultPosition;
    }
    getStepsOrder() {
        return this.stepsOrder;
    }
    getFirstStep() {
        return this.firstStep;
    }
    getWaitingTime() {
        return this.waitingTime;
    }
    areLogsEnabled() {
        return this.logsEnabled;
    }
    isCounterVisible() {
        return this.showCounter;
    }
    isPrevButtonVisible() {
        return this.showPrevButton;
    }
    getCustomTexts() {
        return this.customTexts;
    }
    setCustomText(texts) {
        let prev;
        let next;
        let done;
        let close;
        prev = texts.prev ? texts.prev : DEFAULT_TEXTS.prev;
        next = texts.next ? texts.next : DEFAULT_TEXTS.next;
        done = texts.done ? texts.done : DEFAULT_TEXTS.done;
        close = texts.close ? texts.close : DEFAULT_TEXTS.close;
        this.customTexts = {
            prev: this.toObservable(prev),
            next: this.toObservable(next),
            done: this.toObservable(done),
            close: this.toObservable(close)
        };
    }
    toObservable(value) {
        return value instanceof Observable ? value : of(value);
    }
    hexToRgb(hex) {
        const shorthandRegex = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
        hex = hex.replace(shorthandRegex, (m, r, g, b) => {
            return r + r + g + g + b + b;
        });
        const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
        return result
            ? `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}`
            : null;
    }
};
JoyrideOptionsService = __decorate([
    Injectable()
], JoyrideOptionsService);
export { JoyrideOptionsService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiam95cmlkZS1vcHRpb25zLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZ3gtam95cmlkZS8iLCJzb3VyY2VzIjpbImxpYi9zZXJ2aWNlcy9qb3lyaWRlLW9wdGlvbnMuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQU0zQyxPQUFPLEVBQUUsRUFBRSxFQUFFLFVBQVUsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUV0QyxNQUFNLENBQUMsTUFBTSxtQkFBbUIsR0FBRyxTQUFTLENBQUM7QUFDN0MsTUFBTSxDQUFDLE1BQU0scUJBQXFCLEdBQUcsUUFBUSxDQUFDO0FBQzlDLE1BQU0sQ0FBQyxNQUFNLDZCQUE2QixHQUFHLENBQUMsQ0FBQztBQUUvQyxNQUFNLE9BQU8scUJBQXFCO0NBS2pDO0FBQ0QsTUFBTSxDQUFDLE1BQU0sYUFBYSxHQUEwQjtJQUNoRCxJQUFJLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQztJQUNoQixJQUFJLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQztJQUNoQixJQUFJLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQztJQUNoQixLQUFLLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQztDQUNsQixDQUFDO0FBaUJGLElBQWEscUJBQXFCLEdBQWxDLE1BQWEscUJBQXFCO0lBQWxDO1FBQ1ksZUFBVSxHQUFXLG1CQUFtQixDQUFDO1FBQ3pDLHdCQUFtQixHQUFXLHFCQUFxQixDQUFDO1FBQ3BELGdCQUFXLEdBQUcsS0FBSyxDQUFDO1FBQ3BCLGdCQUFXLEdBQUcsSUFBSSxDQUFDO1FBQ25CLG1CQUFjLEdBQUcsSUFBSSxDQUFDO1FBQ3RCLGVBQVUsR0FBYSxFQUFFLENBQUM7SUE4R3RDLENBQUM7SUF6R0csVUFBVSxDQUFDLE9BQXVCO1FBQzlCLElBQUksQ0FBQyxVQUFVLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQztRQUNoQyxJQUFJLENBQUMsbUJB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RUFBRSxDQUNMLEtBQUssUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRTtZQUNqQyxDQUFDLENBQUMsSUFBSSxDQUFDO0lBQ2YsQ0FBQztDQUNKLENBQUE7QUFwSFkscUJBQXFCO0lBRGpDLFVBQVUsRUFBRTtHQUNBLHFCQUFxQixDQW9IakM7U0FwSFkscUJBQXFCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtcbiAgICBKb3lyaWRlT3B0aW9ucyxcbiAgICBDdXN0b21UZXh0cyxcbiAgICBJQ3VzdG9tVGV4dHNcbn0gZnJvbSAnLi4vbW9kZWxzL2pveXJpZGUtb3B0aW9ucy5jbGFzcyc7XG5pbXBvcnQgeyBvZiwgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9USEVNRV9DT0xPUiA9ICcjM2I1NTYwJztcbmV4cG9ydCBjb25zdCBTVEVQX0RFRkFVTFRfUE9TSVRJT04gPSAnYm90dG9tJztcbmV4cG9ydCBjb25zdCBERUZBVUxUX1RJTUVPVVRfQkVUV0VFTl9TVEVQUyA9IDE7XG5cbmV4cG9ydCBjbGFzcyBPYnNlcnZhYmxlQ3VzdG9tVGV4dHMgaW1wbGVtZW50cyBJQ3VzdG9tVGV4dHMge1xuICAgIHByZXY6IE9ic2VydmFibGU8c3RyaW5nPjtcbiAgICBuZXh0OiBPYnNlcnZhYmxlPHN0cmluZz47XG4gICAgZG9uZTogT2JzZXJ2YWJsZTxzdHJpbmc+O1xuICAgIGNsb3NlOiBPYnNlcnZhYmxlPHN0cmluZz47XG59XG5leHBvcnQgY29uc3QgREVGQVVMVF9URVhUUzogT2JzZXJ2YWJsZUN1c3RvbVRleHRzID0ge1xuICAgIHByZXY6IG9mKCdwcmV2JyksXG4gICAgbmV4dDogb2YoJ25leHQnKSxcbiAgICBkb25lOiBvZignZG9uZScpLFxuICAgIGNsb3NlOiBvZihudWxsKVxufTtcblxuZXhwb3J0IGludGVyZmFjZSBJSm95cmlkZU9wdGlvbnNTZXJ2aWNlIHtcbiAgICBzZXRPcHRpb25zKG9wdGlvbnM6IEpveXJpZGVPcHRpb25zKTogdm9pZDtcbiAgICBnZXRCYWNrZHJvcENvbG9yKCk6IHN0cmluZztcbiAgICBnZXRUaGVtZUNvbG9yKCk6IHN0cmluZztcbiAgICBnZXRTdGVwRGVmYXVsdFBvc2l0aW9uKCk7XG4gICAgZ2V0U3RlcHNPcmRlcigpOiBzdHJpbmdbXTtcbiAgICBnZXRGaXJzdFN0ZXAoKTogc3RyaW5nO1xuICAgIGdldFdhaXRpbmdUaW1lKCk6IG51bWJlcjtcbiAgICBhcmVMb2dzRW5hYmxlZCgpOiBib29sZWFuO1xuICAgIGlzQ291bnRlclZpc2libGUoKTogYm9vbGVhbjtcbiAgICBpc1ByZXZCdXR0b25WaXNpYmxlKCk6IGJvb2xlYW47XG4gICAgZ2V0Q3VzdG9tVGV4dHMoKTogT2JzZXJ2YWJsZUN1c3RvbVRleHRzO1xufVxuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgSm95cmlkZU9wdGlvbnNTZXJ2aWNlIGltcGxlbWVudHMgSUpveXJpZGVPcHRpb25zU2VydmljZSB7XG4gICAgcHJpdmF0ZSB0aGVtZUNvbG9yOiBzdHJpbmcgPSBERUZBVUxUX1RIRU1FX0NPTE9SO1xuICAgIHByaXZhdGUgc3RlcERlZmF1bHRQb3NpdGlvbjogc3RyaW5nID0gU1RFUF9ERUZBVUxUX1BPU0lUSU9OO1xuICAgIHByaXZhdGUgbG9nc0VuYWJsZWQgPSBmYWxzZTtcbiAgICBwcml2YXRlIHNob3dDb3VudGVyID0gdHJ1ZTtcbiAgICBwcml2YXRlIHNob3dQcmV2QnV0dG9uID0gdHJ1ZTtcbiAgICBwcml2YXRlIHN0ZXBzT3JkZXI6IHN0cmluZ1tdID0gW107XG4gICAgcHJpdmF0ZSBmaXJzdFN0ZXA6IHN0cmluZztcbiAgICBwcml2YXRlIHdhaXRpbmdUaW1lOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBjdXN0b21UZXh0czogT2JzZXJ2YWJsZUN1c3RvbVRleHRzO1xuXG4gICAgc2V0T3B0aW9ucyhvcHRpb25zOiBKb3lyaWRlT3B0aW9ucykge1xuICAgICAgICB0aGlzLnN0ZXBzT3JkZXIgPSBvcHRpb25zLnN0ZXBzO1xuICAgICAgICB0aGlzLnN0ZXBEZWZhdWx0UG9zaXRpb24gPSBvcHRpb25zLnN0ZXBEZWZhdWx0UG9zaXRpb25cbiAgICAgICAgICAgID8gb3B0aW9ucy5zdGVwRGVmYXVsdFBvc2l0aW9uXG4gICAgICAgICAgICA6IHRoaXMuc3RlcERlZmF1bHRQb3NpdGlvbjtcbiAgICAgICAgdGhpcy5sb2dzRW5hYmxlZCA9XG4gICAgICAgICAgICB0eXBlb2Ygb3B0aW9ucy5sb2dzRW5hYmxlZCAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMubG9nc0VuYWJsZWRcbiAgICAgICAgICAgICAgICA6IHRoaXMubG9nc0VuYWJsZWQ7XG4gICAgICAgIHRoaXMuc2hvd0NvdW50ZXIgPVxuICAgICAgICAgICAgdHlwZW9mIG9wdGlvbnMuc2hvd0NvdW50ZXIgIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICAgICAgPyBvcHRpb25zLnNob3dDb3VudGVyXG4gICAgICAgICAgICAgICAgOiB0aGlzLnNob3dDb3VudGVyO1xuICAgICAgICB0aGlzLnNob3dQcmV2QnV0dG9uID1cbiAgICAgICAgICAgIHR5cGVvZiBvcHRpb25zLnNob3dQcmV2QnV0dG9uICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgICAgID8gb3B0aW9ucy5zaG93UHJldkJ1dHRvblxuICAgICAgICAgICAgICAgIDogdGhpcy5zaG93UHJldkJ1dHRvbjtcbiAgICAgICAgdGhpcy50aGVtZUNvbG9yID0gb3B0aW9ucy50aGVtZUNvbG9yXG4gICAgICAgICAgICA/IG9wdGlvbnMudGhlbWVDb2xvclxuICAgICAgICAgICAgOiB0aGlzLnRoZW1lQ29sb3I7XG4gICAgICAgIHRoaXMuZmlyc3RTdGVwID0gb3B0aW9ucy5zdGFydFdpdGg7XG4gICAgICAgIHRoaXMud2FpdGluZ1RpbWUgPVxuICAgICAgICAgICAgdHlwZW9mIG9wdGlvbnMud2FpdGluZ1RpbWUgIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICAgICAgPyBvcHRpb25zLndhaXRpbmdUaW1lXG4gICAgICAgICAgICAgICAgOiBERUZBVUxUX1RJTUVPVVRfQkVUV0VFTl9TVEVQUztcbiAgICAgICAgdHlwZW9mIG9wdGlvbnMuY3VzdG9tVGV4dHMgIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICA/IHRoaXMuc2V0Q3VzdG9tVGV4dChvcHRpb25zLmN1c3RvbVRleHRzKVxuICAgICAgICAgICAgOiB0aGlzLnNldEN1c3RvbVRleHQoREVGQVVMVF9URVhUUyk7XG4gICAgfVxuXG4gICAgZ2V0QmFja2Ryb3BDb2xvcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGV4VG9SZ2IodGhpcy50aGVtZUNvbG9yKTtcbiAgICB9XG5cbiAgICBnZXRUaGVtZUNvbG9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aGVtZUNvbG9yO1xuICAgIH1cblxuICAgIGdldFN0ZXBEZWZhdWx0UG9zaXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0ZXBEZWZhdWx0UG9zaXRpb247XG4gICAgfVxuXG4gICAgZ2V0U3RlcHNPcmRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RlcHNPcmRlcjtcbiAgICB9XG5cbiAgICBnZXRGaXJzdFN0ZXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpcnN0U3RlcDtcbiAgICB9XG5cbiAgICBnZXRXYWl0aW5nVGltZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2FpdGluZ1RpbWU7XG4gICAgfVxuXG4gICAgYXJlTG9nc0VuYWJsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvZ3NFbmFibGVkO1xuICAgIH1cblxuICAgIGlzQ291bnRlclZpc2libGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNob3dDb3VudGVyO1xuICAgIH1cblxuICAgIGlzUHJldkJ1dHRvblZpc2libGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNob3dQcmV2QnV0dG9uO1xuICAgIH1cblxuICAgIGdldEN1c3RvbVRleHRzKCk6IE9ic2VydmFibGVDdXN0b21UZXh0cyB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1c3RvbVRleHRzO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0Q3VzdG9tVGV4dCh0ZXh0czogQ3VzdG9tVGV4dHMpIHtcbiAgICAgICAgbGV0IHByZXY6IHN0cmluZyB8IE9ic2VydmFibGU8c3RyaW5nPjtcbiAgICAgICAgbGV0IG5leHQ6IHN0cmluZyB8IE9ic2VydmFibGU8c3RyaW5nPjtcbiAgICAgICAgbGV0IGRvbmU7XG4gICAgICAgIGxldCBjbG9zZTtcbiAgICAgICAgcHJldiA9IHRleHRzLnByZXYgPyB0ZXh0cy5wcmV2IDogREVGQVVMVF9URVhUUy5wcmV2O1xuICAgICAgICBuZXh0ID0gdGV4dHMubmV4dCA/IHRleHRzLm5leHQgOiBERUZBVUxUX1RFWFRTLm5leHQ7XG4gICAgICAgIGRvbmUgPSB0ZXh0cy5kb25lID8gdGV4dHMuZG9uZSA6IERFRkFVTFRfVEVYVFMuZG9uZTtcbiAgICAgICAgY2xvc2UgPSB0ZXh0cy5jbG9zZSA/IHRleHRzLmNsb3NlIDogREVGQVVMVF9URVhUUy5jbG9zZTtcbiAgICAgICAgdGhpcy5jdXN0b21UZXh0cyA9IHtcbiAgICAgICAgICAgIHByZXY6IHRoaXMudG9PYnNlcnZhYmxlKHByZXYpLFxuICAgICAgICAgICAgbmV4dDogdGhpcy50b09ic2VydmFibGUobmV4dCksXG4gICAgICAgICAgICBkb25lOiB0aGlzLnRvT2JzZXJ2YWJsZShkb25lKSxcbiAgICAgICAgICAgIGNsb3NlOiB0aGlzLnRvT2JzZXJ2YWJsZShjbG9zZSlcbiAgICAgICAgfSBhcyBPYnNlcnZhYmxlQ3VzdG9tVGV4dHM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB0b09ic2VydmFibGUodmFsdWU6IHN0cmluZyB8IE9ic2VydmFibGU8c3RyaW5nPikge1xuICAgICAgICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBPYnNlcnZhYmxlID8gdmFsdWUgOiBvZih2YWx1ZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoZXhUb1JnYihoZXg6IGFueSk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHNob3J0aGFuZFJlZ2V4ID0gL14jPyhbYS1mXFxkXSkoW2EtZlxcZF0pKFthLWZcXGRdKSQvaTtcbiAgICAgICAgaGV4ID0gaGV4LnJlcGxhY2Uoc2hvcnRoYW5kUmVnZXgsIChtOiBhbnksIHI6IGFueSwgZzogYW55LCBiOiBhbnkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiByICsgciArIGcgKyBnICsgYiArIGI7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IC9eIz8oW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkkL2kuZXhlYyhoZXgpO1xuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgICAgICA/IGAke3BhcnNlSW50KHJlc3VsdFsxXSwgMTYpfSwgJHtwYXJzZUludChcbiAgICAgICAgICAgICAgICAgIHJlc3VsdFsyXSxcbiAgICAgICAgICAgICAgICAgIDE2XG4gICAgICAgICAgICAgICl9LCAke3BhcnNlSW50KHJlc3VsdFszXSwgMTYpfWBcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICB9XG59XG4iXX0=