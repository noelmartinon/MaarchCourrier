!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("rxjs"),require("@angular/router"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("ngx-joyride",["exports","@angular/core","@angular/common","rxjs","@angular/router","rxjs/operators"],e):e((t=t||self)["ngx-joyride"]={},t.ng.core,t.ng.common,t.rxjs,t.ng.router,t.rxjs.operators)}(this,(function(t,e,i,o,r,n){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function p(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function h(t,e,i,o){var r,n=arguments.length,s=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var p=t.length-1;p>=0;p--)(r=t[p])&&(s=(n<3?r(s):n>3?r(e,i,s):r(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s}function a(t,e){return function(i,o){e(i,o,t)}}var c,l=function(){this.title=new o.ReplaySubject,this.text=new o.ReplaySubject},d=function(){},u={prev:o.of("prev"),next:o.of("next"),done:o.of("done"),close:o.of(null)},f=function(){function t(){this.themeColor="#3b5560",this.stepDefaultPosition="bottom",this.logsEnabled=!1,this.showCounter=!0,this.showPrevButton=!0,this.stepsOrder=[]}return t.prototype.setOptions=function(t){this.stepsOrder=t.steps,this.stepDefaultPosition=t.stepDefaultPosition?t.stepDefaultPosition:this.stepDefaultPosition,this.logsEnabled=void 0!==t.logsEnabled?t.logsEnabled:this.logsEnabled,this.showCounter=void 0!==t.showCounter?t.showCounter:this.showCounter,this.showPrevButton=void 0!==t.showPrevButton?t.showPrevButton:this.showPrevButton,this.themeColor=t.themeColor?t.themeColor:this.themeColor,this.firstStep=t.startWith,this.waitingTime=void 0!==t.waitingTime?t.waitingTime:1,void 0!==t.customTexts?this.setCustomText(t.customTexts):this.setCustomText(u)},t.prototype.getBackdropColor=function(){return this.hexToRgb(this.themeColor)},t.prototype.getThemeColor=function(){return this.themeColor},t.prototype.getStepDefaultPosition=function(){return this.stepDefaultPosition},t.prototype.getStepsOrder=function(){return this.stepsOrder},t.prototype.getFirstStep=function(){return this.firstStep},t.prototype.getWaitingTime=function(){return this.waitingTime},t.prototype.areLogsEnabled=function(){return this.logsEnabled},t.prototype.isCounterVisible=function(){return this.showCounter},t.prototype.isPrevButtonVisible=function(){return this.showPrevButton},t.prototype.getCustomTexts=function(){return this.customTexts},t.prototype.setCustomText=function(t){var e,i,o,r;e=t.prev?t.prev:u.prev,i=t.next?t.next:u.next,o=t.done?t.done:u.done,r=t.close?t.close:u.close,this.customTexts={prev:this.toObservable(e),next:this.toObservable(i),done:this.toObservable(o),close:this.toObservable(r)}},t.prototype.toObservable=function(t){return t instanceof o.Observable?t:o.of(t)},t.prototype.hexToRgb=function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,i,o){return e+e+i+i+o+o}));var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?parseInt(e[1],16)+", "+parseInt(e[2],16)+", "+parseInt(e[3],16):null},t=h([e.Injectable()],t)}(),g="ngx-joyride:::",m=function(){function t(t){this.optionService=t}return t.prototype.debug=function(t,e){void 0===e&&(e=""),this.optionService.areLogsEnabled()&&console.debug(g+t,e)},t.prototype.info=function(t,e){void 0===e&&(e=""),this.optionService.areLogsEnabled()&&console.info(g+t,e)},t.prototype.warn=function(t,e){void 0===e&&(e=""),this.optionService.areLogsEnabled()&&console.warn(g+t,e)},t.prototype.error=function(t,e){void 0===e&&(e=""),this.optionService.areLogsEnabled()&&console.error(g+t,e)},t.ctorParameters=function(){return[{type:f}]},t=h([e.Injectable()],t)}(),y=function(t){function e(i){var o=t.call(this,i)||this;return Object.setPrototypeOf(o,e.prototype),o}return p(e,t),e}(Error),v=function(t){function e(i){var o=t.call(this,i)||this;return Object.setPrototypeOf(o,e.prototype),o}return p(e,t),e}(Error),S=function(t){function e(i){var o=t.call(this,i)||this;return Object.setPrototypeOf(o,e.prototype),o}return p(e,t),e}(Error);(c=t.StepActionType||(t.StepActionType={})).NEXT="NEXT",c.PREV="PREV";var b=function(){function i(t,e){this.stepOptions=t,this.logger=e,this.tempSteps=[],this.currentStepIndex=-2,this.stepHasBeenModified=new o.Subject}return i.prototype.getFirstStepIndex=function(){var t=this.stepOptions.getFirstStep(),e=this.stepOptions.getStepsOrder().indexOf(t);return e<0&&(e=0,void 0!==t&&this.logger.warn("The step "+t+" does not exist. Check in your step list if it's present.")),e},i.prototype.init=function(){var t=this;this.logger.info("Initializing the steps array."),this.steps=[],this.currentStepIndex=this.getFirstStepIndex()-1,this.stepOptions.getStepsOrder().forEach((function(e){return t.steps.push({id:e,step:null})}))},i.prototype.addStep=function(t){if(this.tempSteps.filter((function(e){return e.name===t.name})).length>0){var e=this.tempSteps.findIndex((function(e){return e.name===t.name}));this.tempSteps[e]=t}else this.logger.info("Adding step "+t.name+" to the steps list."),this.tempSteps.push(t)},i.prototype.get=function(e){if(e===t.StepActionType.NEXT?this.currentStepIndex++:this.currentStepIndex--,this.currentStepIndex<0||this.currentStepIndex>=this.steps.length)throw new S("The first or last step of the tour cannot be found!");var i=this.getStepName(this.steps[this.currentStepIndex].id),o=this.tempSteps.findIndex((function(t){return t.name===i})),r=this.tempSteps[o];return this.steps[this.currentStepIndex].step=r,null==r&&this.logger.warn("Step "+this.steps[this.currentStepIndex].id+" not found in the DOM. Check if it's hidden by *ngIf directive."),r},i.prototype.getStepRoute=function(e){var i;return(i=e===t.StepActionType.NEXT?this.steps[this.currentStepIndex+1]?this.steps[this.currentStepIndex+1].id:null:this.steps[this.currentStepIndex-1]?this.steps[this.currentStepIndex-1].id:null)&&i.includes("@")?i.split("@")[1]:""},i.prototype.updatePosition=function(t,e){var i=this.getStepIndex(t);this.steps[i].step?(this.steps[i].step.position=e,this.stepHasBeenModified.next(this.steps[i].step)):this.logger.warn("Trying to modify the position of "+t+" to "+e+". Step not found!Is this step located in a different route?")},i.prototype.getStepNumber=function(t){return this.getStepIndex(t)+1},i.prototype.getStepsCount=function(){return this.stepOptions.getStepsOrder().length},i.prototype.getStepIndex=function(t){var e=this.steps.map((function(t){return t.id.includes("@")?t.id.split("@")[0]:t.id})).findIndex((function(e){return t===e}));if(-1===e)throw new y("The step with name: "+t+" does not exist in the step list.");return e},i.prototype.getStepName=function(t){return t&&t.includes("@")?t.split("@")[0]:t},i.ctorParameters=function(){return[{type:f},{type:m}]},i=h([e.Injectable()],i)}(),w=function(){function t(t){this.platformId=t,this.fakeDocument={body:{},documentElement:{}},this.fakeWindow={document:this.fakeDocument,navigator:{}}}return t.prototype.getNativeWindow=function(){return i.isPlatformBrowser(this.platformId)?window:this.fakeWindow},t.prototype.getNativeDocument=function(){return i.isPlatformBrowser(this.platformId)?document:this.fakeDocument},t.ctorParameters=function(){return[{type:Object,decorators:[{type:e.Inject,args:[e.PLATFORM_ID]}]}]},t=h([e.Injectable(),a(0,e.Inject(e.PLATFORM_ID))],t)}(),x=function(){function t(){}return t.prototype.setPrevButton=function(t){this._prevButton=t},t.prototype.getPrevButton=function(){return this._prevButton},t.prototype.setNextButton=function(t){this._nextButton=t},t.prototype.getNextButton=function(){return this._nextButton},t.prototype.setDoneButton=function(t){this._doneButton=t},t.prototype.getDoneButton=function(){return this._doneButton},t.prototype.setCounter=function(t){this._counter=t},t.prototype.getCounter=function(){return this._counter},t=h([e.Injectable()],t)}(),C=function(){function t(t,i,o,r,n,s){this.joyrideStepsContainer=t,this.viewContainerRef=i,this.domService=o,this.router=r,this.templateService=n,this.platformId=s,this.stepPosition="NO_POSITION",this.prev=new e.EventEmitter,this.next=new e.EventEmitter,this.done=new e.EventEmitter,this.subscriptions=[],this.windowRef=this.domService.getNativeWindow(),this.step=new l}return t.prototype.ngAfterViewInit=function(){if(i.isPlatformBrowser(this.platformId)){if(this.prevTemplate&&this.templateService.setPrevButton(this.prevTemplate),this.nextTemplate&&this.templateService.setNextButton(this.nextTemplate),this.doneTemplate&&this.templateService.setDoneButton(this.doneTemplate),this.counterTemplate&&this.templateService.setCounter(this.counterTemplate),this.step.position=this.stepPosition,this.step.targetViewContainer=this.viewContainerRef,this.setAsyncFields(this.step),this.step.stepContent=this.stepContent,this.step.stepContentParams=this.stepContentParams,this.step.nextClicked=this.next,this.step.prevCliked=this.prev,this.step.tourDone=this.done,!this.name)throw new y("All the steps should have the 'joyrideStep' property set with a custom name.");this.step.name=this.name,this.step.route="/"===this.router.url.substr(0,1)?this.router.url.substr(1):this.router.url,this.step.transformCssStyle=this.windowRef.getComputedStyle(this.viewContainerRef.element.nativeElement).transform,this.step.isElementOrAncestorFixed=this.isElementFixed(this.viewContainerRef.element)||this.isAncestorsFixed(this.viewContainerRef.element.nativeElement.parentElement),this.joyrideStepsContainer.addStep(this.step)}},t.prototype.ngOnChanges=function(t){(t.title||t.text)&&this.setAsyncFields(this.step)},t.prototype.isElementFixed=function(t){return"fixed"===this.windowRef.getComputedStyle(t.nativeElement).position},t.prototype.setAsyncFields=function(t){this.title instanceof o.Observable?this.subscriptions.push(this.title.subscribe((function(e){t.title.next(e)}))):t.title.next(this.title),this.text instanceof o.Observable?this.subscriptions.push(this.text.subscribe((function(e){t.text.next(e)}))):t.text.next(this.text)},t.prototype.isAncestorsFixed=function(t){if(!t||!t.parentElement)return!1;var e="fixed"===this.windowRef.getComputedStyle(t.parentElement).position;return"BODY"===t.nodeName?e:!!e||this.isAncestorsFixed(t.parentElement)},t.prototype.ngOnDestroy=function(){this.subscriptions.forEach((function(t){t.unsubscribe()}))},t.ctorParameters=function(){return[{type:b},{type:e.ViewContainerRef},{type:w},{type:r.Router},{type:x},{type:Object,decorators:[{type:e.Inject,args:[e.PLATFORM_ID]}]}]},h([e.Input("joyrideStep")],t.prototype,"name",void 0),h([e.Input()],t.prototype,"nextStep",void 0),h([e.Input()],t.prototype,"title",void 0),h([e.Input()],t.prototype,"text",void 0),h([e.Input()],t.prototype,"stepPosition",void 0),h([e.Input()],t.prototype,"stepContent",void 0),h([e.Input()],t.prototype,"stepContentParams",void 0),h([e.Input()],t.prototype,"prevTemplate",void 0),h([e.Input()],t.prototype,"nextTemplate",void 0),h([e.Input()],t.prototype,"doneTemplate",void 0),h([e.Input()],t.prototype,"counterTemplate",void 0),h([e.Output()],t.prototype,"prev",void 0),h([e.Output()],t.prototype,"next",void 0),h([e.Output()],t.prototype,"done",void 0),t=h([e.Directive({selector:"joyrideStep, [joyrideStep]"}),a(5,e.Inject(e.PLATFORM_ID))],t)}(),T=function(){function t(t){this.DOMService=t,this.setDocumentHeight(),document.elementsFromPoint||(document.elementsFromPoint=this.elementsFromPoint.bind(this))}return t.prototype.getElementFixedTop=function(t){return t.nativeElement.getBoundingClientRect().top},t.prototype.getElementFixedLeft=function(t){return t.nativeElement.getBoundingClientRect().left},t.prototype.getElementAbsoluteTop=function(t){var e=this.getScrollOffsets();return t.nativeElement.getBoundingClientRect().top+e.y},t.prototype.getElementAbsoluteLeft=function(t){var e=this.getScrollOffsets();return t.nativeElement.getBoundingClientRect().left+e.x},t.prototype.setDocumentHeight=function(){this.documentHeight=this.calculateDocumentHeight()},t.prototype.getDocumentHeight=function(){return this.documentHeight},t.prototype.isParentScrollable=function(t){return this.getFirstScrollableParent(t.nativeElement)!==this.DOMService.getNativeDocument().body},t.prototype.isElementBeyondOthers=function(t,e,i){var o=e?this.getElementFixedLeft(t):this.getElementAbsoluteLeft(t),r=e?this.getElementFixedTop(t):this.getElementAbsoluteTop(t),n=o+t.nativeElement.getBoundingClientRect().width-1,s=r+t.nativeElement.getBoundingClientRect().height-1,p=this.DOMService.getNativeDocument().elementsFromPoint(o,r),h=this.DOMService.getNativeDocument().elementsFromPoint(n,s);return 0===p.length&&0===h.length?1:this.getFirstElementWithoutKeyword(p,i)!==t.nativeElement||this.getFirstElementWithoutKeyword(h,i)!==t.nativeElement?2:3},t.prototype.scrollIntoView=function(t,e){var i=this.getFirstScrollableParent(t.nativeElement),o=e?this.getElementFixedTop(t):this.getElementAbsoluteTop(t);i!==this.DOMService.getNativeDocument().body?i.scrollTo?i.scrollTo(0,o-150):i.scrollTop=o-150:this.DOMService.getNativeWindow().scrollTo(0,o-150)},t.prototype.scrollToTheTop=function(t){var e=this.getFirstScrollableParent(t.nativeElement);e!==this.DOMService.getNativeDocument().body?e.scrollTo?e.scrollTo(0,0):e.scrollTop=0:this.DOMService.getNativeWindow().scrollTo(0,0)},t.prototype.scrollToTheBottom=function(t){var e=this.getFirstScrollableParent(t.nativeElement);e!==this.DOMService.getNativeDocument().body?e.scrollTo?e.scrollTo(0,this.DOMService.getNativeDocument().body.scrollHeight):e.scrollTop=e.scrollHeight-e.clientHeight:this.DOMService.getNativeWindow().scrollTo(0,this.DOMService.getNativeDocument().body.scrollHeight)},t.prototype.getFirstScrollableParent=function(t){var e=this,i=/(auto|scroll|overlay)/,o=function(t,i){return e.DOMService.getNativeWindow().getComputedStyle(t,null).getPropertyValue(i)},r=function(t){return t&&t!==e.DOMService.getNativeDocument().body?function(t){return i.test(o(t,"overflow")+o(t,"overflow-y")+o(t,"overflow-x"))}(t)?t:r(t.parentNode):e.DOMService.getNativeDocument().body};return r(t)},t.prototype.calculateDocumentHeight=function(){var t=this.DOMService.getNativeDocument();return Math.max(t.body.scrollHeight,t.documentElement.scrollHeight,t.body.offsetHeight,t.documentElement.offsetHeight,t.body.clientHeight,t.documentElement.clientHeight)},t.prototype.getScrollOffsets=function(){var t=this.DOMService.getNativeWindow(),e=this.DOMService.getNativeDocument();return null!=t.pageXOffset?{x:t.pageXOffset,y:t.pageYOffset}:"CSS1Compat"==e.compatMode?{x:e.documentElement.scrollLeft,y:e.documentElement.scrollTop}:{x:e.body.scrollLeft,y:e.body.scrollTop}},t.prototype.elementsFromPoint=function(t,e){var i=[],o=void 0;do{var r=this.DOMService.getNativeDocument().elementFromPoint(t,e);r&&o!==r?(o=r,i.push(o),o.style.pointerEvents="none"):o=!1}while(o);return i.forEach((function(t){return t.style.pointerEvents="all"})),i},t.prototype.getFirstElementWithoutKeyword=function(t,e){for(;t[0]&&t[0].classList.toString().includes(e);)t.shift();return t[0]},t.ctorParameters=function(){return[{type:w}]},t=h([e.Injectable()],t)}(),P=function(){function t(t,e,i){this.documentService=t,this.optionsService=e,this.rendererFactory=i,this.lastXScroll=0,this.lastYScroll=0,this.setRenderer()}return t.prototype.setRenderer=function(){this.renderer=this.rendererFactory.createRenderer(null,null)},t.prototype.draw=function(t){this.elementRef=t.targetViewContainer,this.targetAbsoluteTop=this.getTargetTotalTop(t),this.targetAbsoluteLeft=this.getTargetTotalLeft(t),this.currentBackdropContainer=this.renderer.createElement("div"),this.renderer.addClass(this.currentBackdropContainer,"backdrop-container"),this.renderer.setStyle(this.currentBackdropContainer,"position","fixed"),this.renderer.setStyle(this.currentBackdropContainer,"top","0px"),this.renderer.setStyle(this.currentBackdropContainer,"left","0px"),this.renderer.setStyle(this.currentBackdropContainer,"width","100%"),this.renderer.setStyle(this.currentBackdropContainer,"height","100%"),this.renderer.setStyle(this.currentBackdropContainer,"z-index","1000"),this.renderer.setAttribute(this.currentBackdropContainer,"id","backdrop-"+t.name),this.backdropContent=this.renderer.createElement("div"),this.renderer.addClass(this.backdropContent,"backdrop-content"),this.renderer.setStyle(this.backdropContent,"position","relative"),this.renderer.setStyle(this.backdropContent,"height","100%"),this.renderer.setStyle(this.backdropContent,"display","flex"),this.renderer.setStyle(this.backdropContent,"flex-direction","column"),this.renderer.appendChild(this.currentBackdropContainer,this.backdropContent),this.backdropTop=this.renderer.createElement("div"),this.renderer.addClass(this.backdropTop,"joyride-backdrop"),this.renderer.addClass(this.backdropTop,"backdrop-top"),this.renderer.setStyle(this.backdropTop,"width","100%"),this.renderer.setStyle(this.backdropTop,"height",this.targetAbsoluteTop-this.lastYScroll+"px"),this.renderer.setStyle(this.backdropTop,"flex-shrink","0"),this.renderer.setStyle(this.backdropTop,"background-color","rgba("+this.optionsService.getBackdropColor()+", 0.7)"),this.renderer.appendChild(this.backdropContent,this.backdropTop),this.backdropMiddleContainer=this.renderer.createElement("div"),this.renderer.addClass(this.backdropMiddleContainer,"backdrop-middle-container"),this.renderer.setStyle(this.backdropMiddleContainer,"height",this.elementRef.element.nativeElement.offsetHeight+"px"),this.renderer.setStyle(this.backdropMiddleContainer,"width","100%"),this.renderer.setStyle(this.backdropMiddleContainer,"flex-shrink","0"),this.renderer.appendChild(this.backdropContent,this.backdropMiddleContainer),this.backdropMiddleContent=this.renderer.createElement("div"),this.renderer.addClass(this.backdropMiddleContent,"backdrop-middle-content"),this.renderer.setStyle(this.backdropMiddleContent,"display","flex"),this.renderer.setStyle(this.backdropMiddleContent,"width","100%"),this.renderer.setStyle(this.backdropMiddleContent,"height","100%"),this.renderer.appendChild(this.backdropMiddleContainer,this.backdropMiddleContent),this.leftBackdrop=this.renderer.createElement("div"),this.renderer.addClass(this.leftBackdrop,"joyride-backdrop"),this.renderer.addClass(this.leftBackdrop,"backdrop-left"),this.renderer.setStyle(this.leftBackdrop,"flex-shrink","0"),this.renderer.setStyle(this.leftBackdrop,"width",this.targetAbsoluteLeft-this.lastXScroll+"px"),this.renderer.setStyle(this.leftBackdrop,"background-color","rgba("+this.optionsService.getBackdropColor()+", 0.7)"),this.renderer.appendChild(this.backdropMiddleContent,this.leftBackdrop),this.targetBackdrop=this.renderer.createElement("div"),this.renderer.addClass(this.targetBackdrop,"backdrop-target"),this.renderer.setStyle(this.targetBackdrop,"flex-shrink","0"),this.renderer.setStyle(this.targetBackdrop,"width",this.elementRef.element.nativeElement.offsetWidth+"px"),this.renderer.appendChild(this.backdropMiddleContent,this.targetBackdrop),this.rightBackdrop=this.renderer.createElement("div"),this.renderer.addClass(this.rightBackdrop,"joyride-backdrop"),this.renderer.addClass(this.rightBackdrop,"backdrop-right"),this.renderer.setStyle(this.rightBackdrop,"width","100%"),this.renderer.setStyle(this.rightBackdrop,"background-color","rgba("+this.optionsService.getBackdropColor()+", 0.7)"),this.renderer.appendChild(this.backdropMiddleContent,this.rightBackdrop),this.backdropBottom=this.renderer.createElement("div"),this.renderer.addClass(this.backdropBottom,"joyride-backdrop"),this.renderer.addClass(this.backdropBottom,"backdrop-bottom"),this.renderer.setStyle(this.backdropBottom,"width","100%"),this.renderer.setStyle(this.backdropBottom,"height","100%"),this.renderer.setStyle(this.backdropBottom,"background-color","rgba("+this.optionsService.getBackdropColor()+", 0.7)"),this.renderer.appendChild(this.backdropContent,this.backdropBottom),this.removeLastBackdrop(),this.drawCurrentBackdrop(),this.lastBackdropContainer=this.currentBackdropContainer},t.prototype.remove=function(){this.removeLastBackdrop()},t.prototype.redrawTarget=function(t){this.targetAbsoluteLeft=this.getTargetTotalLeft(t),this.targetAbsoluteTop=this.getTargetTotalTop(t),this.handleVerticalScroll(t),this.handleHorizontalScroll(t)},t.prototype.getTargetTotalTop=function(t){var e=t.targetViewContainer;return t.isElementOrAncestorFixed?this.documentService.getElementFixedTop(e.element):this.documentService.getElementAbsoluteTop(e.element)},t.prototype.getTargetTotalLeft=function(t){var e=t.targetViewContainer;return t.isElementOrAncestorFixed?this.documentService.getElementFixedLeft(e.element):this.documentService.getElementAbsoluteLeft(e.element)},t.prototype.redraw=function(t,e){this.lastYScroll!==e.scrollY&&(this.lastYScroll=e.scrollY,this.elementRef&&this.handleVerticalScroll(t)),this.lastXScroll!==e.scrollX&&(this.lastXScroll=e.scrollX,this.elementRef&&this.handleHorizontalScroll(t))},t.prototype.handleHorizontalScroll=function(t){var e=t.isElementOrAncestorFixed?this.targetAbsoluteLeft:this.targetAbsoluteLeft-this.lastXScroll;e>=0?(this.renderer.setStyle(this.leftBackdrop,"width",e+"px"),this.renderer.setStyle(this.targetBackdrop,"width",this.elementRef.element.nativeElement.offsetWidth+"px")):this.handleTargetPartialWidth(e)},t.prototype.handleTargetPartialWidth=function(t){this.renderer.setStyle(this.leftBackdrop,"width","0px");var e=this.elementRef.element.nativeElement.offsetWidth+t;e>=0?this.renderer.setStyle(this.targetBackdrop,"width",e+"px"):this.renderer.setStyle(this.targetBackdrop,"width","0px")},t.prototype.handleVerticalScroll=function(t){var e=t.isElementOrAncestorFixed?this.targetAbsoluteTop:this.targetAbsoluteTop-this.lastYScroll;e>=0?(this.renderer.setStyle(this.backdropTop,"height",e+"px"),this.renderer.setStyle(this.backdropMiddleContainer,"height",this.elementRef.element.nativeElement.offsetHeight+"px")):this.handleTargetPartialHeight(e)},t.prototype.handleTargetPartialHeight=function(t){this.renderer.setStyle(this.backdropTop,"height","0px");var e=this.elementRef.element.nativeElement.offsetHeight+t;e>=0?this.renderer.setStyle(this.backdropMiddleContainer,"height",e+"px"):this.renderer.setStyle(this.backdropMiddleContainer,"height","0px")},t.prototype.removeLastBackdrop=function(){this.lastBackdropContainer&&(this.renderer.removeChild(document.body,this.lastBackdropContainer),this.lastBackdropContainer=void 0)},t.prototype.drawCurrentBackdrop=function(){this.renderer.appendChild(document.body,this.currentBackdropContainer)},t.ctorParameters=function(){return[{type:T},{type:f},{type:e.RendererFactory2}]},t=h([e.Injectable()],t)}(),E=function(){},k=function(){function t(t,e){this.rendererFactory=t,this.DOMService=e,this.scrollEvent=new o.Subject,this.resizeEvent=new o.Subject,this.renderer=t.createRenderer(null,null)}return t.prototype.startListeningScrollEvents=function(){var t=this;this.scrollUnlisten=this.renderer.listen("document","scroll",(function(e){t.scrollEvent.next({scrollX:t.DOMService.getNativeWindow().pageXOffset,scrollY:t.DOMService.getNativeWindow().pageYOffset})}))},t.prototype.startListeningResizeEvents=function(){var t=this;this.resizeUnlisten=this.renderer.listen("window","resize",(function(e){t.resizeEvent.next(e)}))},t.prototype.stopListeningScrollEvents=function(){this.scrollUnlisten()},t.prototype.stopListeningResizeEvents=function(){this.resizeUnlisten()},t.ctorParameters=function(){return[{type:e.RendererFactory2},{type:w}]},t=h([e.Injectable()],t)}(),B=function(){function t(t,e,i,o,r,n,s,p){this.injector=t,this.stepsContainerService=e,this.eventListenerService=i,this.documentService=o,this.renderer=r,this.logger=n,this.optionsService=s,this.templateService=p,this.stepWidth=200,this.stepHeight=200,this.showArrow=!0,this.arrowSize=D,this.subscriptions=[]}return t.prototype.ngOnInit=function(){var t=this;this.joyrideStepService=this.injector.get(R),this.documentHeight=this.documentService.getDocumentHeight(),this.subscriptions.push(this.subscribeToResizeEvents()),this.title=this.step.title.asObservable(),this.text=this.step.text.asObservable(),this.setCustomTemplates(),this.setCustomTexts(),this.counter=this.getCounter(),this.isCounterVisible=this.optionsService.isCounterVisible(),this.isPrevButtonVisible=this.optionsService.isPrevButtonVisible(),this.themeColor=this.optionsService.getThemeColor(),this.text&&this.text.subscribe((function(e){return t.checkRedraw(e)})),this.title&&this.title.subscribe((function(e){return t.checkRedraw(e)}))},t.prototype.ngAfterViewInit=function(){if(this.isCustomized())this.renderer.setStyle(this.stepContainer.nativeElement,"max-width","90vw"),this.updateStepDimensions();else{this.renderer.setStyle(this.stepContainer.nativeElement,"max-width","400px");var t=this.getDimensionsByAspectRatio(this.stepContainer.nativeElement.clientWidth,this.stepContainer.nativeElement.clientHeight,1.212);t=this.adjustDimensions(t.width,t.height),this.stepWidth=t.width,this.stepHeight=t.height,this.renderer.setStyle(this.stepContainer.nativeElement,"width",this.stepWidth+"px"),this.renderer.setStyle(this.stepContainer.nativeElement,"height",this.stepHeight+"px")}this.drawStep()},t.prototype.checkRedraw=function(t){var e=this;null!=t&&setTimeout((function(){e.redrawStep()}),2)},t.prototype.isCustomized=function(){return this.step.stepContent||this.templateService.getCounter()||this.templateService.getPrevButton()||this.templateService.getNextButton()||this.templateService.getDoneButton()},t.prototype.setCustomTexts=function(){var t=this.optionsService.getCustomTexts();this.prevText=t.prev,this.nextText=t.next,this.doneText=t.done},t.prototype.drawStep=function(){var t=this.step.isElementOrAncestorFixed?"fixed":"absolute";this.renderer.setStyle(this.stepHolder.nativeElement,"position",t),this.renderer.setStyle(this.stepHolder.nativeElement,"transform",this.step.transformCssStyle),this.targetWidth=this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().width,this.targetHeight=this.step.targetViewContainer.element.nativeElement.getBoundingClientRect().height,this.targetAbsoluteLeft="fixed"===t?this.documentService.getElementFixedLeft(this.step.targetViewContainer.element):this.documentService.getElementAbsoluteLeft(this.step.targetViewContainer.element),this.targetAbsoluteTop="fixed"===t?this.documentService.getElementFixedTop(this.step.targetViewContainer.element):this.documentService.getElementAbsoluteTop(this.step.targetViewContainer.element),this.setStepStyle()},t.prototype.getCounter=function(){var t=this.stepsContainerService.getStepNumber(this.step.name),e=this.stepsContainerService.getStepsCount();return this.counterData={step:t,total:e},t+"/"+e},t.prototype.setCustomTemplates=function(){this.customContent=this.step.stepContent,this.ctx=this.step.stepContentParams,this.customPrevButton=this.templateService.getPrevButton(),this.customNextButton=this.templateService.getNextButton(),this.customDoneButton=this.templateService.getDoneButton(),this.customCounter=this.templateService.getCounter()},t.prototype.prev=function(){this.joyrideStepService.prev()},t.prototype.next=function(){this.joyrideStepService.next()},t.prototype.close=function(){this.joyrideStepService.close()},t.prototype.isFirstStep=function(){return 1===this.stepsContainerService.getStepNumber(this.step.name)},t.prototype.isLastStep=function(){return this.stepsContainerService.getStepNumber(this.step.name)===this.stepsContainerService.getStepsCount()},t.prototype.setStepStyle=function(){switch(this.step.position){case"top":this.setStyleTop();break;case"bottom":this.setStyleBottom();break;case"right":this.setStyleRight();break;case"left":this.setStyleLeft();break;case"center":this.setStyleCenter();break;default:this.setStyleBottom()}},t.prototype.setStyleTop=function(){this.stepsContainerService.updatePosition(this.step.name,"top"),this.topPosition=this.targetAbsoluteTop-I-this.stepHeight,this.stepAbsoluteTop=this.targetAbsoluteTop-I-this.stepHeight,this.arrowTopPosition=this.stepHeight,this.leftPosition=this.targetWidth/2-this.stepWidth/2+this.targetAbsoluteLeft,this.stepAbsoluteLeft=this.targetWidth/2-this.stepWidth/2+this.targetAbsoluteLeft,this.arrowLeftPosition=this.stepWidth/2-this.arrowSize,this.adjustLeftPosition(),this.adjustRightPosition(),this.arrowPosition="bottom",this.autofixTopPosition()},t.prototype.setStyleRight=function(){this.stepsContainerService.updatePosition(this.step.name,"right"),this.topPosition=this.targetAbsoluteTop+this.targetHeight/2-this.stepHeight/2,this.stepAbsoluteTop=this.targetAbsoluteTop+this.targetHeight/2-this.stepHeight/2,this.arrowTopPosition=this.stepHeight/2-this.arrowSize,this.leftPosition=this.targetAbsoluteLeft+this.targetWidth+I,this.stepAbsoluteLeft=this.targetAbsoluteLeft+this.targetWidth+I,this.arrowLeftPosition=-this.arrowSize,this.adjustTopPosition(),this.adjustBottomPosition(),this.arrowPosition="left",this.autofixRightPosition()},t.prototype.setStyleBottom=function(){this.stepsContainerService.updatePosition(this.step.name,"bottom"),this.topPosition=this.targetAbsoluteTop+this.targetHeight+I,this.stepAbsoluteTop=this.targetAbsoluteTop+this.targetHeight+I,this.arrowTopPosition=-this.arrowSize,this.arrowLeftPosition=this.stepWidth/2-this.arrowSize,this.leftPosition=this.targetWidth/2-this.stepWidth/2+this.targetAbsoluteLeft,this.stepAbsoluteLeft=this.targetWidth/2-this.stepWidth/2+this.targetAbsoluteLeft,this.adjustLeftPosition(),this.adjustRightPosition(),this.arrowPosition="top",this.autofixBottomPosition()},t.prototype.setStyleLeft=function(){this.stepsContainerService.updatePosition(this.step.name,"left"),this.topPosition=this.targetAbsoluteTop+this.targetHeight/2-this.stepHeight/2,this.stepAbsoluteTop=this.targetAbsoluteTop+this.targetHeight/2-this.stepHeight/2,this.arrowTopPosition=this.stepHeight/2-this.arrowSize,this.leftPosition=this.targetAbsoluteLeft-this.stepWidth-I,this.stepAbsoluteLeft=this.targetAbsoluteLeft-this.stepWidth-I,this.arrowLeftPosition=this.stepWidth,this.adjustTopPosition(),this.adjustBottomPosition(),this.arrowPosition="right",this.autofixLeftPosition()},t.prototype.setStyleCenter=function(){this.renderer.setStyle(this.stepHolder.nativeElement,"position","fixed"),this.renderer.setStyle(this.stepHolder.nativeElement,"top","50%"),this.renderer.setStyle(this.stepHolder.nativeElement,"left","50%"),this.updateStepDimensions(),this.renderer.setStyle(this.stepHolder.nativeElement,"transform","translate(-"+this.stepWidth/2+"px, -"+this.stepHeight/2+"px)"),this.showArrow=!1},t.prototype.adjustLeftPosition=function(){this.leftPosition<0&&(this.arrowLeftPosition=this.arrowLeftPosition+this.leftPosition-2,this.leftPosition=2)},t.prototype.adjustRightPosition=function(){var t=document.body.clientWidth;if(this.stepAbsoluteLeft+this.stepWidth>t){var e=this.leftPosition-(this.stepAbsoluteLeft+this.stepWidth+5-t),i=e-this.leftPosition;this.leftPosition=e,this.arrowLeftPosition=this.arrowLeftPosition-i}},t.prototype.adjustTopPosition=function(){this.stepAbsoluteTop<0&&(this.arrowTopPosition=this.arrowTopPosition+this.topPosition-2,this.topPosition=2)},t.prototype.adjustBottomPosition=function(){if(this.stepAbsoluteTop+this.stepHeight>this.documentHeight){var t=this.topPosition-(this.stepAbsoluteTop+this.stepHeight+5-this.documentHeight),e=t-this.topPosition;this.topPosition=t,this.arrowTopPosition=this.arrowTopPosition-e}},t.prototype.autofixTopPosition=function(){this.positionAlreadyFixed?this.logger.warn("No step positions found for this step. The step will be centered."):this.targetAbsoluteTop-this.stepHeight-this.arrowSize<0&&(this.positionAlreadyFixed=!0,this.setStyleRight())},t.prototype.autofixRightPosition=function(){this.targetAbsoluteLeft+this.targetWidth+this.stepWidth+this.arrowSize>document.body.clientWidth&&this.setStyleBottom()},t.prototype.autofixBottomPosition=function(){this.targetAbsoluteTop+this.stepHeight+this.arrowSize+this.targetHeight>this.documentHeight&&this.setStyleLeft()},t.prototype.autofixLeftPosition=function(){this.targetAbsoluteLeft-this.stepWidth-this.arrowSize<0&&this.setStyleTop()},t.prototype.subscribeToResizeEvents=function(){var t=this;return this.eventListenerService.resizeEvent.subscribe((function(){t.redrawStep()}))},t.prototype.redrawStep=function(){this.updateStepDimensions(),this.drawStep()},t.prototype.getDimensionsByAspectRatio=function(t,e,i){var o=(t+e)/(1+i);return{width:o*i,height:o}},t.prototype.adjustDimensions=function(t,e){var i=t,o=e;return t>400?o=t*e/(i=400):t<200&&(i=200,o=200/1.212),{width:i,height:o}},t.prototype.updateStepDimensions=function(){this.stepWidth=this.stepContainer.nativeElement.clientWidth,this.stepHeight=this.stepContainer.nativeElement.clientHeight},t.prototype.ngOnDestroy=function(){this.subscriptions.forEach((function(t){t.unsubscribe()}))},t.ctorParameters=function(){return[{type:e.Injector},{type:b},{type:k},{type:T},{type:e.Renderer2},{type:m},{type:f},{type:x}]},h([e.Input()],t.prototype,"step",void 0),h([e.ViewChild("stepHolder",{static:!0})],t.prototype,"stepHolder",void 0),h([e.ViewChild("stepContainer",{static:!0})],t.prototype,"stepContainer",void 0),t=h([e.Component({selector:"joyride-step",template:'<div #stepHolder class="joyride-step__holder" [id]="\'joyride-step-\' + step.name" [style.top.px]="topPosition" [style.left.px]="leftPosition">\n    <joyride-arrow *ngIf="showArrow" class="joyride-step__arrow" [position]="arrowPosition" [style.top.px]="arrowTopPosition"\n        [style.left.px]="arrowLeftPosition"></joyride-arrow>\n    <div #stepContainer class="joyride-step__container">\n        <joy-close-button class="joyride-step__close" (click)="close()"></joy-close-button>\n        <div class="joyride-step__header">\n            <div class="joyride-step__title" [style.color]="themeColor">{{ title | async }}</div>\n        </div>\n        <div class="joyride-step__body">\n            <ng-container *ngTemplateOutlet="customContent ? customContent : defaultContent; context: ctx"></ng-container>\n            <ng-template #defaultContent>\n                {{ text | async }}\n            </ng-template>\n        </div>\n        <div class="joyride-step__footer">\n            <div *ngIf="isCounterVisible" class="joyride-step__counter-container">\n                <ng-container *ngTemplateOutlet="customCounter ? customCounter : defaultCounter; context: counterData"></ng-container>\n                <ng-template #defaultCounter>\n                    <div class="joyride-step__counter">{{ counter }}</div>\n                </ng-template>\n            </div>\n            <div class="joyride-step__buttons-container">\n                <div class="joyride-step__prev-container joyride-step__button" *ngIf="isPrevButtonVisible && !isFirstStep()" (click)="prev()">\n                    <ng-container *ngTemplateOutlet="customPrevButton ? customPrevButton : defaultPrevButton"></ng-container>\n                    <ng-template #defaultPrevButton>\n                        <joyride-button class="joyride-step__prev-button" [color]="themeColor">{{ prevText | async }}</joyride-button>\n                    </ng-template>\n                </div>\n                <div class="joyride-step__next-container joyride-step__button" *ngIf="!isLastStep(); else doneButton" (click)="next()">\n                    <ng-container *ngTemplateOutlet="customNextButton ? customNextButton : defaulNextButton"></ng-container>\n                    <ng-template #defaulNextButton>\n                        <joyride-button [color]="themeColor">{{ nextText | async }}</joyride-button>\n                    </ng-template>\n                </div>\n                <ng-template #doneButton>\n                    <div class="joyride-step__done-container joyride-step__button" (click)="close()">\n                        <ng-container *ngTemplateOutlet="customDoneButton ? customDoneButton : defaultDoneButton"></ng-container>\n                        <ng-template #defaultDoneButton>\n                            <joyride-button class="joyride-step__done-button" [color]="themeColor">{{ doneText | async }}</joyride-button>\n                        </ng-template>\n                    </div>\n                </ng-template>\n            </div>\n        </div>\n    </div>\n</div>',encapsulation:e.ViewEncapsulation.None,styles:[".joyride-step__holder{position:absolute;font-family:Arial,Helvetica,sans-serif;font-size:16px;z-index:1001}.joyride-step__arrow{position:absolute;left:40px;z-index:1002}.joyride-step__container{box-sizing:border-box;position:relative;color:#000;background-color:#fff;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:justify;justify-content:space-between;padding:10px;box-shadow:0 0 30px 1px #000}.joyride-step__header{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;padding:8px}.joyride-step__title{font-weight:700;font-size:20px}.joyride-step__close{position:absolute;right:10px;top:10px;width:14px;height:14px;cursor:pointer}.joyride-step__body{text-align:left;padding:10px 8px}.joyride-step__footer{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center;padding-left:8px}.joyride-step__buttons-container{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.joyride-step__button:first-child{margin-right:2.5px}.joyride-step__button:last-child{margin-left:2.5px}.joyride-step__counter{font-weight:700;font-size:14px}.joyride-step__counter-container{margin-right:10px}"]})],t)}(),O=function(){function t(){this.position="top"}return h([e.Input()],t.prototype,"position",void 0),t=h([e.Component({selector:"joyride-arrow",template:"<div [class.joyride-arrow__top]=\"position == 'top'\"\n     [class.joyride-arrow__bottom]=\"position == 'bottom'\"\n     [class.joyride-arrow__left]=\"position == 'left'\"\n     [class.joyride-arrow__right]=\"position == 'right'\">\n</div>",encapsulation:e.ViewEncapsulation.None,styles:[".joyride-arrow__top{border-left:11px solid transparent;border-right:11px solid transparent;border-bottom:11px solid #fff}.joyride-arrow__bottom{border-left:11px solid transparent;border-right:11px solid transparent;border-top:11px solid #fff}.joyride-arrow__right{border-left:11px solid #fff;border-bottom:11px solid transparent;border-top:11px solid transparent}.joyride-arrow__left{border-right:11px solid #fff;border-top:11px solid transparent;border-bottom:11px solid transparent}"]})],t)}(),j=function(){function t(){this.clicked=new e.EventEmitter}return t.prototype.onClick=function(){this.clicked.emit()},h([e.Input()],t.prototype,"color",void 0),h([e.Output()],t.prototype,"clicked",void 0),t=h([e.Component({selector:"joyride-button",template:"<button (mouseleave)=\"hover=false\" (mouseover)=\"hover=true\"\n    [ngStyle]=\"{'background-color': hover ? '#fff' : color, \n                'color': hover ? color : '#fff',\n                'border-color' : hover ? color : 'transparent'}\"\n    class=\"joyride-button\" (click)=\"onClick()\">\n    <ng-content></ng-content>\n</button>",styles:[".joyride-button{text-transform:uppercase;border:2px solid transparent;outline:0;padding:6px 12px;font-size:12px;font-weight:700;color:#fff;background-color:#3b5560;cursor:pointer}.joyride-button:hover{color:#3b5560;border:2px solid #3b5560;background-color:#fff}"]})],t)}(),_=function(){function t(){}return t=h([e.Component({selector:"joy-close-button",template:'<svg viewBox="0 0 25 25" xmlns="http://www.w3.org/2000/svg">\n                <line x1="1" y1="24" \n                    x2="24" y2="1" \n                    stroke="black" \n                    stroke-width="3"/>\n                <line x1="1" y1="1" \n                    x2="24" y2="24" \n                    stroke="black" \n                    stroke-width="3"/>\n            </svg>'})],t)}(),A=function(){function t(t,e,i){this.componentFactoryResolver=t,this.appRef=e,this.injector=i,this.refMap={}}return t.prototype.draw=function(t){var e=this.componentFactoryResolver.resolveComponentFactory(B).create(this.injector);this.appRef.attachView(e.hostView);var i=e.hostView.rootNodes[0];document.body.appendChild(i);var o=e.instance;o.step=t,e.changeDetectorRef.detectChanges(),t.stepInstance=o,this.refMap[t.name]=e},t.prototype.remove=function(t){this.appRef.detachView(this.refMap[t.name].hostView),this.refMap[t.name].destroy()},t.ctorParameters=function(){return[{type:e.ComponentFactoryResolver},{type:e.ApplicationRef},{type:e.Injector}]},t=h([e.Injectable()],t)}(),I=15,D=10,R=function(){function i(t,e,i,r,n,s,p,h,a){this.backDropService=t,this.eventListener=e,this.stepsContainerService=i,this.documentService=r,this.DOMService=n,this.stepDrawerService=s,this.optionsService=p,this.router=h,this.logger=a,this.winTopPosition=0,this.winBottomPosition=0,this.stepsObserver=new o.ReplaySubject,this.initViewportPositions(),this.subscribeToScrollEvents(),this.subscribeToResizeEvents()}return i.prototype.initViewportPositions=function(){this.winTopPosition=0,this.winBottomPosition=this.DOMService.getNativeWindow().innerHeight-20},i.prototype.subscribeToScrollEvents=function(){var t=this;this.eventListener.startListeningScrollEvents(),this.eventListener.scrollEvent.subscribe((function(e){t.winTopPosition=e.scrollY,t.winBottomPosition=t.winTopPosition+t.DOMService.getNativeWindow().innerHeight-20,t.currentStep&&t.backDropService.redraw(t.currentStep,e)}))},i.prototype.subscribeToResizeEvents=function(){var t=this;this.eventListener.resizeEvent.subscribe((function(){t.currentStep&&t.backDropService.redrawTarget(t.currentStep)}))},i.prototype.drawStep=function(t){t.position="NO_POSITION"===t.position?this.optionsService.getStepDefaultPosition():t.position,this.stepDrawerService.draw(t)},i.prototype.startTour=function(){return this.stepsObserver=new o.ReplaySubject,this.stepsContainerService.init(),this.documentService.setDocumentHeight(),this.tryShowStep(t.StepActionType.NEXT),this.eventListener.startListeningResizeEvents(),this.subscribeToStepsUpdates(),this.stepsObserver.asObservable()},i.prototype.close=function(){this.removeCurrentStep(),this.notifyTourIsFinished(),this.DOMService.getNativeWindow().scrollTo(0,0),this.eventListener.stopListeningResizeEvents(),this.backDropService.remove()},i.prototype.prev=function(){this.removeCurrentStep(),this.currentStep.prevCliked.emit(),this.tryShowStep(t.StepActionType.PREV)},i.prototype.next=function(){this.removeCurrentStep(),this.currentStep.nextClicked.emit(),this.tryShowStep(t.StepActionType.NEXT)},i.prototype.navigateToStepPage=function(t){var e=this.stepsContainerService.getStepRoute(t);e&&this.router.navigate([e])},i.prototype.subscribeToStepsUpdates=function(){var t=this;this.stepsContainerService.stepHasBeenModified.subscribe((function(e){t.currentStep&&t.currentStep.name===e.name&&(t.currentStep=e)}))},i.prototype.tryShowStep=function(t){var e=this;this.navigateToStepPage(t);var i=this.optionsService.getWaitingTime();i>100&&this.backDropService.remove(),setTimeout((function(){try{e.showStep(t)}catch(i){if(i instanceof v)e.tryShowStep(t);else{if(!(i instanceof S))throw new Error(i);e.logger.error("Forcing the tour closure: First or Last step not found in the DOM."),e.close()}}}),i)},i.prototype.showStep=function(t){if(this.currentStep=this.stepsContainerService.get(t),null==this.currentStep)throw new v("");this.scrollIfElementBeyondOtherElements(),this.backDropService.draw(this.currentStep),this.drawStep(this.currentStep),this.scrollIfStepAndTargetAreNotVisible(),this.notifyStepClicked(t)},i.prototype.notifyStepClicked=function(t){var e={number:this.stepsContainerService.getStepNumber(this.currentStep.name),name:this.currentStep.name,route:this.currentStep.route,actionType:t};this.stepsObserver.next(e)},i.prototype.notifyTourIsFinished=function(){this.currentStep&&this.currentStep.tourDone.emit(),this.stepsObserver.complete()},i.prototype.removeCurrentStep=function(){this.currentStep&&this.stepDrawerService.remove(this.currentStep)},i.prototype.scrollIfStepAndTargetAreNotVisible=function(){this.scrollWhenTargetOrStepAreHiddenBottom(),this.scrollWhenTargetOrStepAreHiddenTop()},i.prototype.scrollWhenTargetOrStepAreHiddenBottom=function(){var t=this.getMaxTargetAndStepBottomPosition();t>this.winBottomPosition&&this.DOMService.getNativeWindow().scrollBy(0,t-this.winBottomPosition)},i.prototype.scrollWhenTargetOrStepAreHiddenTop=function(){var t=this.getMaxTargetAndStepTopPosition();t<this.winTopPosition&&this.DOMService.getNativeWindow().scrollBy(0,t-this.winTopPosition)},i.prototype.getMaxTargetAndStepBottomPosition=function(){var t=this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);return"top"===this.currentStep.position?t+this.currentStep.stepInstance.targetHeight:"bottom"===this.currentStep.position?t+this.currentStep.stepInstance.targetHeight+this.currentStep.stepInstance.stepHeight+D+I:"right"===this.currentStep.position||"left"===this.currentStep.position?Math.max(t+this.currentStep.stepInstance.targetHeight,t+this.currentStep.stepInstance.targetHeight/2+this.currentStep.stepInstance.stepHeight/2):void 0},i.prototype.getMaxTargetAndStepTopPosition=function(){var t=this.documentService.getElementAbsoluteTop(this.currentStep.targetViewContainer.element);return"top"===this.currentStep.position?t-(this.currentStep.stepInstance.stepHeight+D+I):"bottom"===this.currentStep.position?t:"right"===this.currentStep.position||"left"===this.currentStep.position?Math.min(t,t+this.currentStep.stepInstance.targetHeight/2-this.currentStep.stepInstance.stepHeight/2):void 0},i.prototype.scrollIfElementBeyondOtherElements=function(){2===this.isElementBeyondOthers()&&this.documentService.scrollToTheTop(this.currentStep.targetViewContainer.element),2===this.isElementBeyondOthers()&&this.documentService.scrollToTheBottom(this.currentStep.targetViewContainer.element),1===this.isElementBeyondOthers()&&this.documentService.isParentScrollable(this.currentStep.targetViewContainer.element)&&this.documentService.scrollIntoView(this.currentStep.targetViewContainer.element,this.currentStep.isElementOrAncestorFixed),1===this.isElementBeyondOthers()&&this.documentService.isParentScrollable(this.currentStep.targetViewContainer.element)&&this.currentStep.targetViewContainer.element.nativeElement.scrollIntoView()},i.prototype.isElementBeyondOthers=function(){return this.documentService.isElementBeyondOthers(this.currentStep.targetViewContainer.element,this.currentStep.isElementOrAncestorFixed,"backdrop")},i.ctorParameters=function(){return[{type:P},{type:k},{type:b},{type:T},{type:w},{type:A},{type:f},{type:r.Router},{type:m}]},i=h([e.Injectable()],i)}(),L=function(){},H=function(){function t(t,e,i){this.platformId=t,this.stepService=e,this.optionsService=i,this.tourInProgress=!1}return t.prototype.startTour=function(t){var e=this;return i.isPlatformBrowser(this.platformId)?(this.tourInProgress||(this.tourInProgress=!0,t&&this.optionsService.setOptions(t),this.tour$=this.stepService.startTour().pipe(n.finalize((function(){return e.tourInProgress=!1}))),this.tour$.subscribe()),this.tour$):o.of(new L)},t.prototype.closeTour=function(){this.isTourInProgress()&&this.stepService.close()},t.prototype.isTourInProgress=function(){return this.tourInProgress},t.ctorParameters=function(){return[{type:Object,decorators:[{type:e.Inject,args:[e.PLATFORM_ID]}]},{type:R},{type:f}]},t=h([e.Injectable(),a(0,e.Inject(e.PLATFORM_ID))],t)}(),M=r.RouterModule.forChild([]),F=function(){function t(){}var o;return o=t,t.forRoot=function(){return{ngModule:o,providers:[H,R,b,P,k,T,f,A,w,m,x]}},t.forChild=function(){return{ngModule:o,providers:[]}},t=o=h([e.NgModule({imports:[i.CommonModule,M],declarations:[C,B,O,j,_],entryComponents:[B],exports:[C]})],t)}();t.ARROW_SIZE=D,t.DEFAULT_DISTANCE_FROM_MARGIN_LEFT=2,t.DEFAULT_DISTANCE_FROM_MARGIN_TOP=2,t.DEFAULT_TEXTS=u,t.DEFAULT_THEME_COLOR="#3b5560",t.DEFAULT_TIMEOUT_BETWEEN_STEPS=1,t.DISTANCE_FROM_TARGET=I,t.DocumentService=T,t.DomRefService=w,t.EventListenerService=k,t.JoyrideArrowComponent=O,t.JoyrideBackdropService=P,t.JoyrideButtonComponent=j,t.JoyrideCloseButtonComponent=_,t.JoyrideDirective=C,t.JoyrideModule=F,t.JoyrideOptionsService=f,t.JoyrideService=H,t.JoyrideStepComponent=B,t.JoyrideStepService=R,t.JoyrideStepsContainerService=b,t.LoggerService=m,t.NO_POSITION="NO_POSITION",t.ObservableCustomTexts=d,t.STEP_DEFAULT_POSITION="bottom",t.Scroll=E,t.StepDrawerService=A,t.TemplatesService=x,t.routerModuleForChild=M,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-joyride.umd.min.js.map