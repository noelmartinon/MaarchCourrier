<div class="mat-dialog-content-container">
    <h1 mat-dialog-title>{{'lang.addOtpUser' | translate}}</h1>
    <div mat-dialog-content>
        <div *ngIf="loading" class="loading" style="display:flex;height:100%;">
            <mat-spinner style="margin:auto;"></mat-spinner>
        </div>
        <div *ngIf="!loading" class="userForm">
            <mat-form-field appearance="fill" *ngIf="sources.length >= 1">
                <mat-label>{{ 'lang.source' | translate }}</mat-label>
                <mat-select #source [value]="userOTP.source.id" required>
                    <mat-option *ngFor="let source of sources" [value]="source.id" >
                        {{ source.label }}
                    </mat-option>
                </mat-select>
            </mat-form-field>
            <mat-form-field appearance="fill">
                <mat-label>{{'lang.firstname' | translate}}</mat-label>
                <input matInput #firstname type="text" [(ngModel)]="userOTP.firstname" required>
            </mat-form-field>
            <mat-form-field appearance="fill">
                <mat-label>{{'lang.lastname' | translate}}</mat-label>
                <input matInput #lastname type="text" [(ngModel)]="userOTP.lastname"  required>
            </mat-form-field>

            <mat-form-field appearance="fill">
                <mat-label>{{'lang.phoneNumber' | translate}}</mat-label>
                <input matInput #phoneNumber type="text" [(ngModel)]="userOTP.phone" required>
                <mat-hint align="start">{{ 'lang.frFormatPhone' | translate }}</mat-hint>
            </mat-form-field>
            

            <mat-form-field appearance="fill">
                <mat-label>{{'lang.email' | translate}}</mat-label>
                <input matInput #email type="email" [(ngModel)]="userOTP.email" required>
            </mat-form-field>

            <mat-form-field appearance="fill">
                <mat-label>{{'lang.role' | translate}}</mat-label>
                <mat-select #role [(ngModel)]="userOTP.role" required>
                    <mat-option *ngFor="let role of sampleRoles" [value]="role.id" >
                        {{ role.label }}
                    </mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field appearance="fill">
                <mat-label>{{ 'lang.securityMode' | translate }}</mat-label>
                <mat-select #securityMode [(ngModel)]="userOTP.mode" required>
                    <mat-option *ngFor="let mode of securityModes" [value]="mode.id" >
                        {{ mode.label }}
                    </mat-option>
                </mat-select>
            </mat-form-field>
            <span class="divider-modal"></span>
            <app-maarch-message *ngIf="userOTP.mode" [mode]="'info'" [content]="'lang.securityModeInfo' | translate : {mode: userOTP.mode}"></app-maarch-message>
        </div>
    </div>
    <span class="divider-modal"></span>
    <div mat-dialog-actions class="actions">
        <button mat-raised-button mat-button color="primary" [disabled]="loading || !isValidForm()" (click)="addOtpUser()">{{'lang.validate' | translate}}</button>
        <button mat-raised-button mat-button [mat-dialog-close]="">{{'lang.cancel' | translate}}</button>
    </div>
</div>
